{"ast":null,"code":"import _objectSpread from\"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,createContext,useContext}from'react';import'./App.css';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const BACKEND_URL=process.env.REACT_APP_BACKEND_URL;const API=\"\".concat(BACKEND_URL,\"/api\");// Auth Context\nconst AuthContext=/*#__PURE__*/createContext();const useAuth=()=>{const context=useContext(AuthContext);if(!context){throw new Error('useAuth must be used within an AuthProvider');}return context;};const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[isLoading,setIsLoading]=useState(true);useEffect(()=>{const savedUser=localStorage.getItem('user');if(savedUser){setUser(JSON.parse(savedUser));}setIsLoading(false);},[]);const login=async(username,password)=>{try{const response=await axios.post(\"\".concat(API,\"/auth/login\"),null,{params:{username,password}});if(response.data.success){setUser(response.data.user);localStorage.setItem('user',JSON.stringify(response.data.user));return true;}return false;}catch(error){console.error('Login error:',error);return false;}};const logout=()=>{setUser(null);localStorage.removeItem('user');};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-xl\",children:\"\\u062C\\u0627\\u0631\\u064A \\u0627\\u0644\\u062A\\u062D\\u0645\\u064A\\u0644...\"})});}return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,login,logout},children:children});};// Login Component\nconst Login=()=>{const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const{login}=useAuth();const handleSubmit=async e=>{e.preventDefault();setError('');const success=await login(username,password);if(!success){setError('Ø®Ø·Ø£ ÙÙŠ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4\",dir:\"rtl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl p-8 border border-blue-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\",alt:\"Master Seal Logo\",className:\"h-16 w-16 mx-auto rounded-full shadow-lg border-4 border-blue-100\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent\",children:\"\\u0645\\u0627\\u0633\\u062A\\u0631 \\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mt-2\",children:\"\\u0646\\u0638\\u0627\\u0645 \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0634\\u0631\\u0643\\u0629 \\u0627\\u0644\\u0645\\u062A\\u0643\\u0627\\u0645\\u0644\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-1 bg-gradient-to-r from-blue-400 to-blue-600 mx-auto mt-3 rounded-full\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"\\uD83D\\uDC64 \\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,onChange:e=>setUsername(e.target.value),className:\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-3 focus:ring-blue-200 focus:border-blue-400 transition-all duration-200 bg-gray-50 hover:bg-white\",placeholder:\"\\u0627\\u062F\\u062E\\u0644 \\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"\\uD83D\\uDD12 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),className:\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-3 focus:ring-blue-200 focus:border-blue-400 transition-all duration-200 bg-gray-50 hover:bg-white\",placeholder:\"\\u0627\\u062F\\u062E\\u0644 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\",required:true})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-xl text-sm text-center animate-pulse\",children:[\"\\u26A0\\uFE0F \",error]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-gradient-to-r from-blue-600 to-blue-800 text-white py-3 px-6 rounded-xl hover:from-blue-700 hover:to-blue-900 focus:outline-none focus:ring-3 focus:ring-blue-300 transition-all duration-200 font-semibold shadow-lg hover:shadow-xl transform hover:scale-105\",children:\"\\uD83D\\uDE80 \\u062F\\u062E\\u0648\\u0644\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-8 pt-6 border-t border-gray-100\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400\",children:\"\\u0627\\u0644\\u062D\\u0631\\u0641\\u064A\\u064A\\u0646 - \\u0627\\u0644\\u0633\\u0644\\u0627\\u0645 - \\u0623\\u0645\\u0627\\u0645 \\u0627\\u0644\\u0633\\u0648\\u0628\\u0631 \\u062C\\u064A\\u062A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1 font-medium\",children:\"\\uD83D\\uDCDE 01020630677\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 bg-white/60 backdrop-blur-sm rounded-xl p-4 text-center border border-blue-100/50\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"\\u0646\\u0638\\u0627\\u0645 \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0645\\u062A\\u0643\\u0627\\u0645\\u0644 \\u0644\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0645\\u0628\\u064A\\u0639\\u0627\\u062A \\u0648\\u0627\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0648\\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\\u0627\\u062A\"})})]})});};// Navigation Component\nconst Navigation=_ref2=>{let{currentPage,onPageChange}=_ref2;const{user,logout}=useAuth();const[isCollapsed,setIsCollapsed]=useState(false);// Master user has all pages + delete records\nconst masterPages=[{key:'dashboard',label:'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…',icon:'ğŸ“Š'},{key:'sales',label:'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª',icon:'ğŸ’°'},{key:'inventory',label:'Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø®Ø§Ù…Ø§Øª',icon:'ğŸ“¦'},{key:'stock',label:'Ù…Ø®Ø²Ù† Ø¥Ù†ØªØ§Ø¬',icon:'ğŸª'},{key:'local',label:'Ù…ÙˆØ±Ø¯ÙŠÙ†',icon:'ğŸ­'},{key:'deferred',label:'Ø§Ù„Ø¢Ø¬Ù„',icon:'â³'},{key:'expenses',label:'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª',icon:'ğŸ’¸'},{key:'revenue',label:'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª',icon:'ğŸ“ˆ'},{key:'treasury',label:'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©',icon:'ğŸ¦'},{key:'main-treasury',label:'Ø§Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',icon:'ğŸ”'},{key:'invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ±',icon:'ğŸ§¾'},{key:'deleted-invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©',icon:'ğŸ—‘ï¸'},{key:'customer-statement',label:'ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨',icon:'ğŸ“‹'},{key:'settle-account',label:'ØªØµÙÙŠØ© Ø­Ø³Ø§Ø¨',icon:'ğŸ’µ'},{key:'work-orders',label:'Ø£Ù…Ø± Ø´ØºÙ„',icon:'âš™ï¸'},{key:'pricing',label:'Ø§Ù„ØªØ³Ø¹ÙŠØ±',icon:'ğŸ’²'},{key:'backup',label:'Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ',icon:'ğŸ’¾'},{key:'users',label:'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',icon:'ğŸ‘¥'}];// Dashboard is only for Elsawy\nconst elsawyPages=[{key:'dashboard',label:'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…',icon:'ğŸ“Š'},{key:'sales',label:'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª',icon:'ğŸ’°'},{key:'inventory',label:'Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø®Ø§Ù…Ø§Øª',icon:'ğŸ“¦'},{key:'stock',label:'Ù…Ø®Ø²Ù† Ø¥Ù†ØªØ§Ø¬',icon:'ğŸª'},{key:'local',label:'Ù…ÙˆØ±Ø¯ÙŠÙ†',icon:'ğŸ­'},{key:'deferred',label:'Ø§Ù„Ø¢Ø¬Ù„',icon:'â³'},{key:'expenses',label:'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª',icon:'ğŸ’¸'},{key:'revenue',label:'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª',icon:'ğŸ“ˆ'},{key:'treasury',label:'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©',icon:'ğŸ¦'},{key:'main-treasury',label:'Ø§Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',icon:'ğŸ”'},{key:'invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ±',icon:'ğŸ§¾'},{key:'deleted-invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©',icon:'ğŸ—‘ï¸'},{key:'customer-statement',label:'ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨',icon:'ğŸ“‹'},{key:'settle-account',label:'ØªØµÙÙŠØ© Ø­Ø³Ø§Ø¨',icon:'ğŸ’µ'},{key:'work-orders',label:'Ø£Ù…Ø± Ø´ØºÙ„',icon:'âš™ï¸'},{key:'pricing',label:'Ø§Ù„ØªØ³Ø¹ÙŠØ±',icon:'ğŸ’²'},{key:'backup',label:'Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ',icon:'ğŸ’¾'},{key:'users',label:'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',icon:'ğŸ‘¥'}];const adminPages=[{key:'sales',label:'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª',icon:'ğŸ’°'},{key:'inventory',label:'Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø®Ø§Ù…Ø§Øª',icon:'ğŸ“¦'},{key:'stock',label:'Ù…Ø®Ø²Ù† Ø¥Ù†ØªØ§Ø¬',icon:'ğŸª'},{key:'local',label:'Ù…ÙˆØ±Ø¯ÙŠÙ†',icon:'ğŸ­'},{key:'deferred',label:'Ø§Ù„Ø¢Ø¬Ù„',icon:'â³'},{key:'expenses',label:'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª',icon:'ğŸ’¸'},{key:'revenue',label:'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª',icon:'ğŸ“ˆ'},{key:'treasury',label:'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©',icon:'ğŸ¦'},{key:'invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ±',icon:'ğŸ§¾'},{key:'deleted-invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©',icon:'ğŸ—‘ï¸'},{key:'customer-statement',label:'ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨',icon:'ğŸ“‹'},{key:'work-orders',label:'Ø£Ù…Ø± Ø´ØºÙ„',icon:'âš™ï¸'},{key:'pricing',label:'Ø§Ù„ØªØ³Ø¹ÙŠØ±',icon:'ğŸ’²'},{key:'backup',label:'Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ',icon:'ğŸ’¾'},{key:'users',label:'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',icon:'ğŸ‘¥'}];const userPages=[{key:'sales',label:'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª',icon:'ğŸ’°'},{key:'inventory',label:'Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø®Ø§Ù…Ø§Øª',icon:'ğŸ“¦'},{key:'stock',label:'Ù…Ø®Ø²Ù† Ø¥Ù†ØªØ§Ø¬',icon:'ğŸª'},{key:'local',label:'Ù…ÙˆØ±Ø¯ÙŠÙ†',icon:'ğŸ­'},{key:'deferred',label:'Ø§Ù„Ø¢Ø¬Ù„',icon:'â³'},{key:'expenses',label:'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª',icon:'ğŸ’¸'},{key:'treasury',label:'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©',icon:'ğŸ¦'},{key:'invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ±',icon:'ğŸ§¾'},{key:'deleted-invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©',icon:'ğŸ—‘ï¸'},{key:'customer-statement',label:'ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨',icon:'ğŸ“‹'},{key:'work-orders',label:'Ø£Ù…Ø± Ø´ØºÙ„',icon:'âš™ï¸'},{key:'pricing',label:'Ø§Ù„ØªØ³Ø¹ÙŠØ±',icon:'ğŸ’²'}];// Determine pages based on user role\nconst pages=(user===null||user===void 0?void 0:user.username)==='master'?masterPages:(user===null||user===void 0?void 0:user.username)==='Elsawy'?elsawyPages:(user===null||user===void 0?void 0:user.role)==='admin'?adminPages:userPages;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-b from-blue-900 via-blue-800 to-blue-900 text-white shadow-2xl transition-all duration-300 relative \".concat(isCollapsed?'w-20':'w-80'),children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsCollapsed(!isCollapsed),className:\"absolute -left-4 top-6 bg-blue-600 hover:bg-blue-700 text-white rounded-full p-2 shadow-lg z-50 transition-all\",title:isCollapsed?'ØªÙˆØ³ÙŠØ¹ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©':'Ø·ÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©',children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xl\",children:isCollapsed?'â—€':'â–¶'})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-blue-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center \".concat(isCollapsed?'justify-center':'space-x-3 space-x-reverse'),children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\",alt:\"Master Seal Logo\",className:\"h-12 w-12 rounded-lg shadow-lg\"}),!isCollapsed&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold text-white\",children:\"\\u0645\\u0627\\u0633\\u062A\\u0631 \\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-200\",children:\"\\u0646\\u0638\\u0627\\u0645 \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0645\\u062A\\u0643\\u0627\\u0645\\u0644\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-blue-800 border-b border-blue-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center \".concat(isCollapsed?'justify-center flex-col space-y-2':'justify-between'),children:[!isCollapsed&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium\",children:\"\\u0623\\u0647\\u0644\\u0627\\u064B \\u0648\\u0633\\u0647\\u0644\\u0627\\u064B\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-bold text-blue-200\",children:user===null||user===void 0?void 0:user.username})]}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"bg-red-500 hover:bg-red-600 rounded-lg text-sm font-medium transition-all duration-200 shadow-lg hover:shadow-xl \".concat(isCollapsed?'p-2':'px-3 py-2'),title:\"\\u062E\\u0631\\u0648\\u062C\",children:isCollapsed?'ğŸšª':'Ø®Ø±ÙˆØ¬'})]})}),/*#__PURE__*/_jsx(\"nav\",{className:\"flex-1 p-4 space-y-2 overflow-y-auto\",style:{maxHeight:'calc(100vh - 300px)'},children:pages.map(page=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onPageChange(page.key),className:\"w-full flex items-center p-4 rounded-xl transition-all duration-200 group \".concat(isCollapsed?'justify-center':'space-x-3 space-x-reverse text-right',\" \").concat(currentPage===page.key?'bg-white text-blue-900 shadow-lg transform scale-105':'hover:bg-blue-700 hover:transform hover:translate-x-2'),title:isCollapsed?page.label:'',children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:page.icon}),!isCollapsed&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:page.label}),currentPage===page.key&&/*#__PURE__*/_jsx(\"div\",{className:\"mr-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-blue-500 rounded-full animate-pulse\"})})]})]},page.key))}),!isCollapsed&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-t border-blue-700 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-300\",children:\"\\u0627\\u0644\\u062D\\u0631\\u0641\\u064A\\u064A\\u0646 - \\u0627\\u0644\\u0633\\u0644\\u0627\\u0645 - \\u0623\\u0645\\u0627\\u0645 \\u0627\\u0644\\u0633\\u0648\\u0628\\u0631 \\u062C\\u064A\\u062A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-400 mt-1\",children:\"01020630677\"})]})]});};// Inventory Management Component\nconst Inventory=()=>{const[inventoryItems,setInventoryItems]=useState([]);const[inventoryTransactions,setInventoryTransactions]=useState([]);const[lowStockItems,setLowStockItems]=useState([]);const[currentView,setCurrentView]=useState('items');// items, transactions, low-stock, add-item\nconst[editingItem,setEditingItem]=useState(null);// Ù„Ù„ØªØ¹Ø¯ÙŠÙ„\nconst[newItem,setNewItem]=useState({material_type:'NBR',inner_diameter:'',outer_diameter:'',available_pieces:'',// ØªØºÙŠÙŠØ± Ù…Ù† available_height Ø¥Ù„Ù‰ available_pieces\nmin_stock_level:2,// Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ 2 Ù‚Ø·Ø¹Ø©\nnotes:''});const[newTransaction,setNewTransaction]=useState({material_type:'NBR',inner_diameter:'',outer_diameter:'',transaction_type:'in',pieces_change:'',// ØªØºÙŠÙŠØ± Ù…Ù† height_change Ø¥Ù„Ù‰ pieces_change\nreason:'',notes:''});const[searchTerm,setSearchTerm]=useState('');const materialTypes=['NBR','BUR','BT','VT','BOOM'];// Fetch functions\nconst fetchInventoryItems=async()=>{try{const response=await axios.get(\"\".concat(API,\"/inventory\"));setInventoryItems(response.data||[]);}catch(error){console.error('Error fetching inventory items:',error);}};const fetchInventoryTransactions=async()=>{try{const response=await axios.get(\"\".concat(API,\"/inventory-transactions\"));setInventoryTransactions(response.data||[]);}catch(error){console.error('Error fetching inventory transactions:',error);}};const fetchLowStockItems=async()=>{try{const response=await axios.get(\"\".concat(API,\"/inventory/low-stock\"));setLowStockItems(response.data||[]);}catch(error){console.error('Error fetching low stock items:',error);}};useEffect(()=>{fetchInventoryItems();fetchInventoryTransactions();fetchLowStockItems();},[]);// Add or Update inventory item\nconst addInventoryItem=async()=>{if(!newItem.material_type||!newItem.inner_diameter||!newItem.outer_diameter||!newItem.available_pieces){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{if(editingItem){// Update existing item\nawait axios.put(\"\".concat(API,\"/inventory/\").concat(editingItem.id),_objectSpread(_objectSpread({},newItem),{},{inner_diameter:parseFloat(newItem.inner_diameter),outer_diameter:parseFloat(newItem.outer_diameter),available_pieces:parseInt(newItem.available_pieces),min_stock_level:parseInt(newItem.min_stock_level||2)}));alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');setEditingItem(null);}else{// Add new item\nawait axios.post(\"\".concat(API,\"/inventory\"),_objectSpread(_objectSpread({},newItem),{},{inner_diameter:parseFloat(newItem.inner_diameter),outer_diameter:parseFloat(newItem.outer_diameter),available_pieces:parseInt(newItem.available_pieces),min_stock_level:parseInt(newItem.min_stock_level||2)}));alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}fetchInventoryItems();fetchLowStockItems();setCurrentView('items');setNewItem({material_type:'NBR',inner_diameter:'',outer_diameter:'',available_pieces:'',min_stock_level:2,notes:''});}catch(error){var _error$response,_error$response$data;console.error('Error saving inventory item:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯: '+(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||error.message));}};// Add inventory transaction\nconst addInventoryTransaction=async()=>{if(!newTransaction.material_type||!newTransaction.inner_diameter||!newTransaction.outer_diameter||!newTransaction.pieces_change||!newTransaction.reason){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{const transactionData=_objectSpread(_objectSpread({},newTransaction),{},{inner_diameter:parseFloat(newTransaction.inner_diameter),outer_diameter:parseFloat(newTransaction.outer_diameter),pieces_change:newTransaction.transaction_type==='out'?-Math.abs(parseInt(newTransaction.pieces_change)):Math.abs(parseInt(newTransaction.pieces_change))});await axios.post(\"\".concat(API,\"/inventory-transactions\"),transactionData);fetchInventoryItems();fetchInventoryTransactions();fetchLowStockItems();setNewTransaction({material_type:'NBR',inner_diameter:'',outer_diameter:'',transaction_type:'in',pieces_change:'',reason:'',notes:''});alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ù…Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response2,_error$response2$data;console.error('Error adding inventory transaction:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ù…Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ø¬Ø±Ø¯: '+(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.detail)||error.message));}};// Filter and sort items based on search\nconst filteredItems=inventoryItems.filter(item=>{var _item$notes;return item.material_type.toLowerCase().includes(searchTerm.toLowerCase())||item.inner_diameter.toString().includes(searchTerm.toLowerCase())||item.outer_diameter.toString().includes(searchTerm.toLowerCase())||((_item$notes=item.notes)===null||_item$notes===void 0?void 0:_item$notes.toLowerCase().includes(searchTerm.toLowerCase()));}).sort((a,b)=>{// ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\nconst materialPriority={'BUR':1,'NBR':2,'BT':3,'BOOM':4,'VT':5};const aPriority=materialPriority[a.material_type]||6;const bPriority=materialPriority[b.material_type]||6;if(aPriority!==bPriority){return aPriority-bPriority;}// Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)\nif(a.inner_diameter!==b.inner_diameter){return a.inner_diameter-b.inner_diameter;}return a.outer_diameter-b.outer_diameter;});const filteredTransactions=inventoryTransactions.filter(transaction=>{var _transaction$notes;return transaction.reason.toLowerCase().includes(searchTerm.toLowerCase())||transaction.material_type.toLowerCase().includes(searchTerm.toLowerCase())||((_transaction$notes=transaction.notes)===null||_transaction$notes===void 0?void 0:_transaction$notes.toLowerCase().includes(searchTerm.toLowerCase()));}).sort((a,b)=>{// ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\nconst materialPriority={'BUR':1,'NBR':2,'BT':3,'BOOM':4,'VT':5};const aPriority=materialPriority[a.material_type]||6;const bPriority=materialPriority[b.material_type]||6;if(aPriority!==bPriority){return aPriority-bPriority;}// Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ) Ø«Ù… Ø§Ù„ØªØ§Ø±ÙŠØ®\nif(a.inner_diameter!==b.inner_diameter){return a.inner_diameter-b.inner_diameter;}if(a.outer_diameter!==b.outer_diameter){return a.outer_diameter-b.outer_diameter;}return new Date(b.date)-new Date(a.date);// Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹\n});return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"\\u0627\\u0644\\u0645\\u062E\\u0632\\u0646 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('items'),className:\"px-4 py-2 rounded \".concat(currentView==='items'?'bg-blue-500 text-white':'bg-gray-200'),children:\"\\u0639\\u0646\\u0627\\u0635\\u0631 \\u0627\\u0644\\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('transactions'),className:\"px-4 py-2 rounded \".concat(currentView==='transactions'?'bg-blue-500 text-white':'bg-gray-200'),children:\"\\u0645\\u0639\\u0627\\u0645\\u0644\\u0627\\u062A \\u0627\\u0644\\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCurrentView('low-stock'),className:\"px-4 py-2 rounded \".concat(currentView==='low-stock'?'bg-red-500 text-white':'bg-gray-200'),children:[\"\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0645\\u0646\\u062E\\u0641\\u0636 (\",lowStockItems.length,\")\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('excel'),className:\"px-4 py-2 rounded \".concat(currentView==='excel'?'bg-green-500 text-white':'bg-gray-200'),children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0625\\u0643\\u0633\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('add-item'),className:\"px-4 py-2 rounded \".concat(currentView==='add-item'?'bg-green-500 text-white':'bg-gray-200'),children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0639\\u0646\\u0635\\u0631 \\u062C\\u062F\\u064A\\u062F\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"\\u0627\\u0644\\u0628\\u062D\\u062B \\u0641\\u064A \\u0627\\u0644\\u062C\\u0631\\u062F...\",className:\"w-full p-3 border border-gray-300 rounded-lg\"})}),currentView==='items'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0639\\u0646\\u0627\\u0635\\u0631 \\u0627\\u0644\\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0627\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0642\\u0637\\u0639 \\u0627\\u0644\\u0645\\u062A\\u0627\\u062D\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u062F \\u0627\\u0644\\u0623\\u062F\\u0646\\u0649\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredItems.map(item=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:item.material_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.inner_diameter}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.outer_diameter}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold \".concat(item.available_pieces<=item.min_stock_level?'text-red-600':'text-green-600'),children:[item.available_pieces,\" \\u0642\\u0637\\u0639\\u0629\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[item.min_stock_level,\" \\u0642\\u0637\\u0639\\u0629\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm \".concat(item.available_pieces<=item.min_stock_level?'bg-red-100 text-red-800':'bg-green-100 text-green-800'),children:item.available_pieces<=item.min_stock_level?'Ù…Ù†Ø®ÙØ¶':'Ø·Ø¨ÙŠØ¹ÙŠ'})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.notes||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingItem(item);setNewItem({material_type:item.material_type,inner_diameter:item.inner_diameter,outer_diameter:item.outer_diameter,available_pieces:item.available_pieces,min_stock_level:item.min_stock_level,notes:item.notes||''});setCurrentView('add-item');},className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{if(confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ØµØ±ØŸ')){try{await axios.delete(\"\".concat(API,\"/inventory/\").concat(item.id));alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ù†ØµØ± Ø¨Ù†Ø¬Ø§Ø­');fetchInventoryItems();}catch(error){console.error('Error deleting item:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¹Ù†ØµØ±');}}},className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641\"})]})})]},item.id))})]})})]}),currentView==='transactions'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0639\\u0627\\u0645\\u0644\\u0629 \\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsx(\"select\",{value:newTransaction.material_type,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{material_type:e.target.value})),className:\"p-2 border border-gray-300 rounded\",children:materialTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newTransaction.inner_diameter,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{inner_diameter:e.target.value})),placeholder:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newTransaction.outer_diameter,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{outer_diameter:e.target.value})),placeholder:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsxs(\"select\",{value:newTransaction.transaction_type,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{transaction_type:e.target.value})),className:\"p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"in\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0644\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646\"}),/*#__PURE__*/_jsx(\"option\",{value:\"out\",children:\"\\u062E\\u0635\\u0645 \\u0645\\u0646 \\u0627\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"1\",value:newTransaction.pieces_change,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{pieces_change:e.target.value})),placeholder:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0642\\u0637\\u0639\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newTransaction.reason,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{reason:e.target.value})),placeholder:\"\\u0633\\u0628\\u0628 \\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0629\",className:\"p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newTransaction.notes,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{notes:e.target.value})),placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\",className:\"w-full p-2 border border-gray-300 rounded\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:addInventoryTransaction,className:\"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0633\\u062C\\u0644 \\u0645\\u0639\\u0627\\u0645\\u0644\\u0627\\u062A \\u0627\\u0644\\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0627\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0642\\u0627\\u0633\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0642\\u0637\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0645\\u062A\\u0628\\u0642\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0633\\u0628\\u0628\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredTransactions.map(transaction=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(transaction.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.material_type}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[transaction.inner_diameter,\" \\xD7 \",transaction.outer_diameter]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm \".concat(transaction.transaction_type==='in'?'bg-green-100 text-green-800':'bg-red-100 text-red-800'),children:transaction.transaction_type==='in'?'Ø¥Ø¶Ø§ÙØ©':'Ø®ØµÙ…'})}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold \".concat(transaction.pieces_change>0?'text-green-600':'text-red-600'),children:[transaction.pieces_change>0?'+':'',transaction.pieces_change,\" \\u0642\\u0637\\u0639\\u0629\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:[transaction.remaining_pieces,\" \\u0642\\u0637\\u0639\\u0629\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.reason}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.notes||'-'})]},transaction.id))})]})})]})]}),currentView==='low-stock'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold mb-4 text-red-600\",children:[\"\\u0639\\u0646\\u0627\\u0635\\u0631 \\u0628\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0645\\u0646\\u062E\\u0641\\u0636 (\",lowStockItems.length,\")\"]}),lowStockItems.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-green-600 text-center py-8\",children:\"\\u2705 \\u062C\\u0645\\u064A\\u0639 \\u0639\\u0646\\u0627\\u0635\\u0631 \\u0627\\u0644\\u062C\\u0631\\u062F \\u0641\\u064A \\u0627\\u0644\\u0645\\u0633\\u062A\\u0648\\u0649 \\u0627\\u0644\\u0637\\u0628\\u064A\\u0639\\u064A\"}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-red-50\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0627\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0642\\u0627\\u0633\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u062F \\u0627\\u0644\\u0623\\u062F\\u0646\\u0649\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0642\\u0635 \\u0627\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:lowStockItems.map(item=>/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-red-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:item.material_type}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[item.inner_diameter,\" \\xD7 \",item.outer_diameter]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold text-red-600\",children:[item.available_pieces,\" \\u0642\\u0637\\u0639\\u0629\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[item.min_stock_level,\" \\u0642\\u0637\\u0639\\u0629\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold text-red-600\",children:[Math.max(0,item.min_stock_level-item.available_pieces),\" \\u0642\\u0637\\u0639\\u0629\"]})]},item.id))})]})})]}),currentView==='add-item'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:editingItem?'ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯':'Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø¬Ø±Ø¯ Ø¬Ø¯ÙŠØ¯'}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(\"select\",{value:newItem.material_type,onChange:e=>setNewItem(_objectSpread(_objectSpread({},newItem),{},{material_type:e.target.value})),className:\"p-2 border border-gray-300 rounded\",children:materialTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newItem.inner_diameter,onChange:e=>setNewItem(_objectSpread(_objectSpread({},newItem),{},{inner_diameter:e.target.value})),placeholder:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newItem.outer_diameter,onChange:e=>setNewItem(_objectSpread(_objectSpread({},newItem),{},{outer_diameter:e.target.value})),placeholder:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"1\",value:newItem.available_pieces,onChange:e=>setNewItem(_objectSpread(_objectSpread({},newItem),{},{available_pieces:e.target.value})),placeholder:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0642\\u0637\\u0639 \\u0627\\u0644\\u0645\\u062A\\u0627\\u062D\\u0629\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newItem.min_stock_level,onChange:e=>setNewItem(_objectSpread(_objectSpread({},newItem),{},{min_stock_level:e.target.value})),placeholder:\"\\u0627\\u0644\\u062D\\u062F \\u0627\\u0644\\u0623\\u062F\\u0646\\u0649 \\u0644\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newItem.notes,onChange:e=>setNewItem(_objectSpread(_objectSpread({},newItem),{},{notes:e.target.value})),placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\",className:\"p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addInventoryItem,className:\"mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:editingItem?'ØªØ­Ø¯ÙŠØ« Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯':'Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯'}),editingItem&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingItem(null);setNewItem({material_type:'NBR',inner_diameter:'',outer_diameter:'',available_pieces:'',min_stock_level:2,notes:''});setCurrentView('items');},className:\"mt-4 mr-2 bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621 \\u0627\\u0644\\u062A\\u0639\\u062F\\u064A\\u0644\"})]}),currentView==='excel'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0645\\u0644\\u0641\\u0627\\u062A \\u0627\\u0644\\u062C\\u0631\\u062F - Excel\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u062A\\u0635\\u062F\\u064A\\u0631 \\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{try{const response=await axios.get(\"\".concat(API,\"/excel/export/inventory\"),{responseType:'blob'});const url=window.URL.createObjectURL(new Blob([response.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download',\"inventory_export_\".concat(new Date().toISOString().split('T')[0],\".xlsx\"));document.body.appendChild(link);link.click();link.remove();alert('ØªÙ… ØªØµØ¯ÙŠØ± Ù…Ù„Ù Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error exporting inventory:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù');}},className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u062A\\u0635\\u062F\\u064A\\u0631 \\u062C\\u0631\\u062F Excel\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".xlsx,.xls\",onChange:async e=>{const file=e.target.files[0];if(!file)return;const formData=new FormData();formData.append('file',file);try{const response=await axios.post(\"\".concat(API,\"/excel/import/inventory\"),formData,{headers:{'Content-Type':'multipart/form-data'}});alert(\"\\u062A\\u0645 \\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \".concat(response.data.imported_count,\" \\u0639\\u0646\\u0635\\u0631 \\u0628\\u0646\\u062C\\u0627\\u062D\"));if(response.data.errors.length>0){console.warn('Import errors:',response.data.errors);}fetchInventoryItems();}catch(error){console.error('Error importing inventory:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù');}e.target.value='';},className:\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-2\",children:\"\\u0627\\u0644\\u0623\\u0639\\u0645\\u062F\\u0629 \\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628\\u0629: material_type, inner_diameter, outer_diameter, available_pieces\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u062E\\u0627\\u0645 - Excel\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u062A\\u0635\\u062F\\u064A\\u0631 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u062E\\u0627\\u0645\"}),/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{try{const response=await axios.get(\"\".concat(API,\"/excel/export/raw-materials\"),{responseType:'blob'});const url=window.URL.createObjectURL(new Blob([response.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download',\"raw_materials_export_\".concat(new Date().toISOString().split('T')[0],\".xlsx\"));document.body.appendChild(link);link.click();link.remove();alert('ØªÙ… ØªØµØ¯ÙŠØ± Ù…Ù„Ù Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error exporting raw materials:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù');}},className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u062A\\u0635\\u062F\\u064A\\u0631 \\u0645\\u0648\\u0627\\u062F \\u062E\\u0627\\u0645 Excel\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u062E\\u0627\\u0645\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".xlsx,.xls\",onChange:async e=>{const file=e.target.files[0];if(!file)return;const formData=new FormData();formData.append('file',file);try{const response=await axios.post(\"\".concat(API,\"/excel/import/raw-materials\"),formData,{headers:{'Content-Type':'multipart/form-data'}});alert(\"\\u062A\\u0645 \\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \".concat(response.data.imported_count,\" \\u0645\\u0627\\u062F\\u0629 \\u062E\\u0627\\u0645 \\u0628\\u0646\\u062C\\u0627\\u062D\"));if(response.data.errors.length>0){console.warn('Import errors:',response.data.errors);}}catch(error){console.error('Error importing raw materials:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù');}e.target.value='';},className:\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-2\",children:\"\\u0627\\u0644\\u0623\\u0639\\u0645\\u062F\\u0629 \\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628\\u0629: material_type, inner_diameter, outer_diameter, height, pieces_count, unit_code, cost_per_mm\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 p-6 rounded-lg shadow-md md:col-span-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u062A\\u0639\\u0644\\u064A\\u0645\\u0627\\u062A \\u0627\\u0633\\u062A\\u062E\\u062F\\u0627\\u0645 \\u0627\\u0644\\u0625\\u0643\\u0633\\u0644\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u062A\\u0635\\u062F\\u064A\\u0631 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"text-sm text-gray-700 list-disc list-inside space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u064A\\u062A\\u0645 \\u062A\\u0635\\u062F\\u064A\\u0631 \\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0644\\u0645\\u0644\\u0641 \\u064A\\u062D\\u062A\\u0648\\u064A \\u0639\\u0644\\u0649 \\u062A\\u0646\\u0633\\u064A\\u0642 \\u062C\\u0627\\u0647\\u0632 \\u0644\\u0644\\u062A\\u0639\\u062F\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u064A\\u0645\\u0643\\u0646 \\u0641\\u062A\\u062D \\u0627\\u0644\\u0645\\u0644\\u0641 \\u0641\\u064A Excel \\u0623\\u0648 Google Sheets\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"text-sm text-gray-700 list-disc list-inside space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u064A\\u062C\\u0628 \\u0623\\u0646 \\u064A\\u0643\\u0648\\u0646 \\u0627\\u0644\\u0645\\u0644\\u0641 \\u0645\\u0646 \\u0646\\u0648\\u0639 .xlsx \\u0623\\u0648 .xls\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0644\\u0623\\u0639\\u0645\\u062F\\u0629 \\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628\\u0629 \\u064A\\u062C\\u0628 \\u0623\\u0646 \\u062A\\u0643\\u0648\\u0646 \\u0645\\u0648\\u062C\\u0648\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u0645\\u0648\\u062C\\u0648\\u062F\\u0629 \\u0644\\u0646 \\u062A\\u062A\\u0623\\u062B\\u0631 (\\u064A\\u062A\\u0645 \\u0627\\u0644\\u062A\\u062D\\u062F\\u064A\\u062B \\u0623\\u0648 \\u0627\\u0644\\u0625\\u0636\\u0627\\u0641\\u0629)\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0633\\u064A\\u062A\\u0645 \\u0639\\u0631\\u0636 \\u0631\\u0633\\u0627\\u0644\\u0629 \\u062A\\u0623\\u0643\\u064A\\u062F \\u0645\\u0639 \\u0639\\u062F\\u062F \\u0627\\u0644\\u0639\\u0646\\u0627\\u0635\\u0631 \\u0627\\u0644\\u0645\\u0633\\u062A\\u0648\\u0631\\u062F\\u0629\"})]})]})]})]})]})]});};// Local Products Management Component\nconst Local=()=>{const{user}=useAuth();const[suppliers,setSuppliers]=useState([]);const[localProducts,setLocalProducts]=useState([]);const[supplierTransactions,setSupplierTransactions]=useState([]);const[currentView,setCurrentView]=useState('suppliers');// suppliers, products, transactions\nconst[newSupplier,setNewSupplier]=useState({name:'',phone:'',address:''});const[newProduct,setNewProduct]=useState({name:'',supplier_id:'',purchase_price:'',selling_price:'',current_stock:0});const[newTransaction,setNewTransaction]=useState({supplier_id:'',transaction_type:'purchase',amount:'',description:'',product_name:'',quantity:'',unit_price:'',payment_method:'cash'});const[selectedSupplier,setSelectedSupplier]=useState('');const[paymentAmount,setPaymentAmount]=useState('');const[paymentMethod,setPaymentMethod]=useState('cash');// Fetch data functions\nconst fetchSuppliers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/suppliers\"));setSuppliers(response.data||[]);}catch(error){console.error('Error fetching suppliers:',error);}};const fetchLocalProducts=async()=>{try{const response=await axios.get(\"\".concat(API,\"/local-products\"));setLocalProducts(response.data||[]);}catch(error){console.error('Error fetching local products:',error);}};const fetchSupplierTransactions=async()=>{try{const response=await axios.get(\"\".concat(API,\"/supplier-transactions\"));setSupplierTransactions(response.data||[]);}catch(error){console.error('Error fetching supplier transactions:',error);}};// Delete supplier transaction - Master only\nconst deleteSupplierTransaction=async transactionId=>{if((user===null||user===void 0?void 0:user.username)!=='master'){alert('ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„Ø§Øª');return;}// Ask user about deletion type\nconst choice=confirm('ğŸ—‘ï¸ Ø­Ø°Ù Ù…Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ù…ÙˆØ±Ø¯\\n\\n'+'Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø­Ø°Ù:\\n\\n'+'âœ… Ø§Ø¶ØºØ· \"Ù…ÙˆØ§ÙÙ‚\" â†’ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© ÙˆØ¹ÙƒØ³ ØªØ£Ø«ÙŠØ±Ù‡Ø§ (Ø¹ÙƒØ³ÙŠ)\\n'+'âŒ Ø§Ø¶ØºØ· \"Ø¥Ù„ØºØ§Ø¡\" Ø«Ù… \"Ù…ÙˆØ§ÙÙ‚\" â†’ Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„ ÙÙ‚Ø· ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±ØµÙŠØ¯\\n\\n'+'Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ø£ÙˆÙ„ (Ø¹ÙƒØ³ÙŠ) ÙŠÙ†ØµØ­ Ø¨Ù‡ Ù„Ø¶Ù…Ø§Ù† Ø¯Ù‚Ø© Ø§Ù„Ø£Ø±ØµØ¯Ø©');if(choice===null)return;// User pressed Escape\nconst reverseTransaction=choice;// Final confirmation\nconst confirmMsg=reverseTransaction?'ØªØ£ÙƒÙŠØ¯: Ø³ÙŠØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© ÙˆØ¹ÙƒØ³ ØªØ£Ø«ÙŠØ±Ù‡Ø§ Ø¹Ù„Ù‰ Ø±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ±Ø¯\\n\\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ':'ØªØ£ÙƒÙŠØ¯: Ø³ÙŠØªÙ… Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„ ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø­Ø³Ø§Ø¨ Ø±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ±Ø¯ Ù…Ù† Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª\\n\\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ';if(!confirm(confirmMsg))return;try{await axios.delete(\"\".concat(API,\"/suppliers/transactions/\").concat(transactionId),{params:{username:user.username,reverse_transaction:reverseTransaction}});alert('âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­');fetchSupplierTransactions();fetchSuppliers();// Refresh to update balances\n}catch(error){var _error$response3,_error$response3$data;console.error('Error deleting supplier transaction:',error);alert(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.detail)||'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©');}};useEffect(()=>{fetchSuppliers();fetchLocalProducts();fetchSupplierTransactions();},[]);// Add supplier\nconst addSupplier=async()=>{if(!newSupplier.name.trim()){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯');return;}try{if(newSupplier.id){// Update existing supplier\nawait axios.put(\"\".concat(API,\"/suppliers/\").concat(newSupplier.id),{name:newSupplier.name,phone:newSupplier.phone,address:newSupplier.address});alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}else{// Add new supplier\nawait axios.post(\"\".concat(API,\"/suppliers\"),newSupplier);alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}fetchSuppliers();setNewSupplier({name:'',phone:'',address:''});}catch(error){var _error$response4,_error$response4$data;console.error('Error saving supplier:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…ÙˆØ±Ø¯: '+(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.detail)||error.message));}};const editSupplier=supplier=>{// Fill the form with supplier data for editing\nsetNewSupplier({id:supplier.id,name:supplier.name,phone:supplier.phone||'',address:supplier.address||''});};const deleteSupplier=async supplierId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ±Ø¯ØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡.')){return;}try{await axios.delete(\"\".concat(API,\"/suppliers/\").concat(supplierId));fetchSuppliers();fetchLocalProducts();// Refresh products as they might be affected\nalert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response5,_error$response5$data;console.error('Error deleting supplier:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ±Ø¯: '+(((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.detail)||error.message));}};// Add local product\nconst addLocalProduct=async()=>{if(!newProduct.name.trim()||!newProduct.supplier_id||!newProduct.purchase_price||!newProduct.selling_price){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{if(newProduct.id){// Update existing product\nawait axios.put(\"\".concat(API,\"/local-products/\").concat(newProduct.id),{name:newProduct.name,supplier_id:newProduct.supplier_id,purchase_price:parseFloat(newProduct.purchase_price),selling_price:parseFloat(newProduct.selling_price),current_stock:parseInt(newProduct.current_stock||0)});alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­');}else{// Add new product\nawait axios.post(\"\".concat(API,\"/local-products\"),_objectSpread(_objectSpread({},newProduct),{},{purchase_price:parseFloat(newProduct.purchase_price),selling_price:parseFloat(newProduct.selling_price),current_stock:parseInt(newProduct.current_stock||0)}));alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­');}fetchLocalProducts();setNewProduct({name:'',supplier_id:'',purchase_price:'',selling_price:'',current_stock:0});}catch(error){var _error$response6,_error$response6$data;console.error('Error saving local product:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬: '+(((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.detail)||error.message));}};const editLocalProduct=product=>{// Fill the form with product data for editing\nsetNewProduct({id:product.id,name:product.name,supplier_id:product.supplier_id,purchase_price:product.purchase_price.toString(),selling_price:product.selling_price.toString(),current_stock:product.current_stock||0});};const deleteLocalProduct=async productId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡.')){return;}try{await axios.delete(\"\".concat(API,\"/local-products/\").concat(productId));fetchLocalProducts();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response7,_error$response7$data;console.error('Error deleting local product:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬: '+(((_error$response7=error.response)===null||_error$response7===void 0?void 0:(_error$response7$data=_error$response7.data)===null||_error$response7$data===void 0?void 0:_error$response7$data.detail)||error.message));}};// Pay supplier\nconst paySupplier=async()=>{if(!selectedSupplier||!paymentAmount){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙˆØ±Ø¯ ÙˆØ¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº');return;}try{await axios.post(\"\".concat(API,\"/supplier-payment?supplier_id=\").concat(selectedSupplier,\"&amount=\").concat(paymentAmount,\"&payment_method=\").concat(paymentMethod));fetchSuppliers();fetchSupplierTransactions();setSelectedSupplier('');setPaymentAmount('');alert('ØªÙ… Ø¯ÙØ¹ Ø§Ù„Ù…Ø¨Ù„Øº Ù„Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error paying supplier:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¯ÙØ¹ Ø§Ù„Ù…Ø¨Ù„Øº');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"\\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\\u064A\\u0646\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('suppliers'),className:\"px-4 py-2 rounded \".concat(currentView==='suppliers'?'bg-blue-500 text-white':'bg-gray-200'),children:\"\\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\\u064A\\u0646\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('products'),className:\"px-4 py-2 rounded \".concat(currentView==='products'?'bg-blue-500 text-white':'bg-gray-200'),children:\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('transactions'),className:\"px-4 py-2 rounded \".concat(currentView==='transactions'?'bg-blue-500 text-white':'bg-gray-200'),children:\"\\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('payments'),className:\"px-4 py-2 rounded \".concat(currentView==='payments'?'bg-blue-500 text-white':'bg-gray-200'),children:\"\\u0633\\u062F\\u0627\\u062F \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\\u064A\\u0646\"})]})]}),currentView==='suppliers'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0648\\u0631\\u062F \\u062C\\u062F\\u064A\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newSupplier.name,onChange:e=>setNewSupplier(_objectSpread(_objectSpread({},newSupplier),{},{name:e.target.value})),placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newSupplier.phone,onChange:e=>setNewSupplier(_objectSpread(_objectSpread({},newSupplier),{},{phone:e.target.value})),placeholder:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0647\\u0627\\u062A\\u0641 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newSupplier.address,onChange:e=>setNewSupplier(_objectSpread(_objectSpread({},newSupplier),{},{address:e.target.value})),placeholder:\"\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\",className:\"p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addSupplier,className:\"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0642\\u0627\\u0626\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\\u064A\\u0646\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0647\\u0627\\u062A\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0634\\u062A\\u0631\\u064A\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:suppliers.map(supplier=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:supplier.name}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:supplier.phone||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:supplier.address||'-'}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",(supplier.total_purchases||0).toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",(supplier.total_paid||0).toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold \".concat((supplier.balance||0)>0?'text-red-600':'text-green-600'),children:[\"\\u062C.\\u0645 \",(supplier.balance||0).toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editSupplier(supplier),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",title:\"\\u062A\\u062D\\u0631\\u064A\\u0631\",children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteSupplier(supplier.id),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",title:\"\\u062D\\u0630\\u0641\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]})})]},supplier.id))})]})})]})]}),currentView==='products'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0646\\u062A\\u062C \\u0645\\u062D\\u0644\\u064A \\u062C\\u062F\\u064A\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newProduct.name,onChange:e=>setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{name:e.target.value})),placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsxs(\"select\",{value:newProduct.supplier_id,onChange:e=>setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{supplier_id:e.target.value})),className:\"p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),suppliers.map(supplier=>/*#__PURE__*/_jsx(\"option\",{value:supplier.id,children:supplier.name},supplier.id))]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newProduct.purchase_price,onChange:e=>setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{purchase_price:e.target.value})),placeholder:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0634\\u0631\\u0627\\u0621\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newProduct.selling_price,onChange:e=>setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{selling_price:e.target.value})),placeholder:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0628\\u064A\\u0639\",className:\"p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addLocalProduct,className:\"mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0642\\u0627\\u0626\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A \\u0627\\u0644\\u0645\\u062D\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0634\\u0631\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0628\\u064A\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u0627\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:localProducts.map(product=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:product.name}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.supplier_name}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",product.purchase_price.toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",product.selling_price.toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.current_stock||0}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.total_sold||0}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editLocalProduct(product),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",title:\"\\u062A\\u062D\\u0631\\u064A\\u0631\",children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteLocalProduct(product.id),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",title:\"\\u062D\\u0630\\u0641\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]})})]},product.id))})]})})]})]}),currentView==='transactions'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0645\\u0639\\u0627\\u0645\\u0644\\u0627\\u062A \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\\u064A\\u0646\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0648\\u0635\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"}),(user===null||user===void 0?void 0:user.username)==='master'&&/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:supplierTransactions.map(transaction=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(transaction.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.supplier_name}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm \".concat(transaction.transaction_type==='purchase'?'bg-red-100 text-red-800':'bg-green-100 text-green-800'),children:transaction.transaction_type==='purchase'?'Ø´Ø±Ø§Ø¡':'Ø¯ÙØ¹'})}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold \".concat(transaction.transaction_type==='purchase'?'text-red-600':'text-green-600'),children:[\"\\u062C.\\u0645 \",transaction.amount.toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.description}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.product_name||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.quantity||'-'}),(user===null||user===void 0?void 0:user.username)==='master'&&/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteSupplierTransaction(transaction.id),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",title:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0629\",children:\"\\uD83D\\uDDD1\\uFE0F\"})})]},transaction.id))})]})})]}),currentView==='payments'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0633\\u062F\\u0627\\u062F \\u062D\\u0633\\u0627\\u0628\\u0627\\u062A \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\\u064A\\u0646\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"select\",{value:selectedSupplier,onChange:e=>setSelectedSupplier(e.target.value),className:\"p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),suppliers.filter(s=>(s.balance||0)>0).map(supplier=>/*#__PURE__*/_jsxs(\"option\",{value:supplier.id,children:[supplier.name,\" - \\u0645\\u0633\\u062A\\u062D\\u0642: \\u062C.\\u0645 \",(supplier.balance||0).toFixed(2)]},supplier.id))]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:paymentAmount,onChange:e=>setPaymentAmount(e.target.value),placeholder:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsxs(\"select\",{value:paymentMethod,onChange:e=>setPaymentMethod(e.target.value),className:\"p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"cash\",children:\"\\u0646\\u0642\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vodafone_elsawy\",children:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 010\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vodafone_wael\",children:\"\\u0643\\u0627\\u0634 0100\"}),/*#__PURE__*/_jsx(\"option\",{value:\"instapay\",children:\"\\u0627\\u0646\\u0633\\u062A\\u0627 \\u0628\\u0627\\u064A\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:paySupplier,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u062F\\u0641\\u0639 \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"})]})]});};// Dashboard Component\nconst Dashboard=()=>{const{user}=useAuth();// Only Elsawy can access dashboard\nif((user===null||user===void 0?void 0:user.username)!=='Elsawy'){return/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",dir:\"rtl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u063A\\u064A\\u0631 \\u0645\\u0633\\u0645\\u0648\\u062D!\"}),\" \\u0644\\u0648\\u062D\\u0629 \\u0627\\u0644\\u062A\\u062D\\u0643\\u0645 \\u0645\\u062E\\u0635\\u0635\\u0629 \\u0644\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645 Elsawy \\u0641\\u0642\\u0637.\"]})});}const[stats,setStats]=useState({total_sales:0,total_expenses:0,net_profit:0,total_unpaid:0,invoice_count:0,customer_count:0});useEffect(()=>{fetchStats();},[]);const fetchStats=async()=>{try{const response=await axios.get(\"\".concat(API,\"/dashboard/stats\"));setStats(response.data);}catch(error){console.error('Error fetching stats:',error);}};const clearAllData=async()=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.'))return;try{// Clear all data from backend\nawait axios.delete(\"\".concat(API,\"/customers/clear-all\"));await axios.delete(\"\".concat(API,\"/raw-materials/clear-all\"));await axios.delete(\"\".concat(API,\"/finished-products/clear-all\"));await axios.delete(\"\".concat(API,\"/invoices/clear-all\"));await axios.delete(\"\".concat(API,\"/expenses/clear-all\"));await axios.delete(\"\".concat(API,\"/payments/clear-all\"));await axios.delete(\"\".concat(API,\"/work-orders/clear-all\"));// Refresh dashboard stats\nfetchStats();alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');}catch(error){console.error('Error clearing all data:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');}};const printReport=reportType=>{const currentDate=new Date().toLocaleDateString('ar-EG');let printContent=\"\\n      <div style=\\\"font-family: Arial, sans-serif; direction: rtl; text-align: right;\\\">\\n        <div style=\\\"text-align: center; margin-bottom: 20px;\\\">\\n          <h1>\\u0645\\u0627\\u0633\\u062A\\u0631 \\u0633\\u064A\\u0644</h1>\\n          <p>\\u0627\\u0644\\u062D\\u0631\\u0641\\u064A\\u0627\\u0646 \\u0634\\u0627\\u0631\\u0639 \\u0627\\u0644\\u0633\\u0648\\u0628\\u0631 \\u062C\\u064A\\u062A - 01020630677</p>\\n          <h2>\\u062A\\u0642\\u0631\\u064A\\u0631 \\u0644\\u0648\\u062D\\u0629 \\u0627\\u0644\\u062A\\u062D\\u0643\\u0645</h2>\\n          <p>\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E: \".concat(currentDate,\"</p>\\n        </div>\\n        <table style=\\\"width: 100%; border-collapse: collapse;\\\">\\n          <tr>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\"><strong>\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u064A\\u0639\\u0627\\u062A:</strong></td>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\">\\u062C.\\u0645 \").concat(stats.total_sales.toFixed(2),\"</td>\\n          </tr>\\n          <tr>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\"><strong>\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A:</strong></td>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\">\\u062C.\\u0645 \").concat(stats.total_expenses.toFixed(2),\"</td>\\n          </tr>\\n          <tr>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\"><strong>\\u0635\\u0627\\u0641\\u064A \\u0627\\u0644\\u0631\\u0628\\u062D:</strong></td>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\">\\u062C.\\u0645 \").concat(stats.net_profit.toFixed(2),\"</td>\\n          </tr>\\n          <tr>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\"><strong>\\u0627\\u0644\\u0645\\u0628\\u0627\\u0644\\u063A \\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\\u0629:</strong></td>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\">\\u062C.\\u0645 \").concat(stats.total_unpaid.toFixed(2),\"</td>\\n          </tr>\\n          <tr>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\"><strong>\\u0639\\u062F\\u062F \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631:</strong></td>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\">\").concat(stats.invoice_count,\"</td>\\n          </tr>\\n          <tr>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\"><strong>\\u0639\\u062F\\u062F \\u0627\\u0644\\u0639\\u0645\\u0644\\u0627\\u0621:</strong></td>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\">\").concat(stats.customer_count,\"</td>\\n          </tr>\\n        </table>\\n      </div>\\n    \");const printWindow=window.open('','_blank');printWindow.document.write(printContent);printWindow.document.close();printWindow.print();};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-blue-600 to-blue-800 rounded-xl p-6 text-white shadow-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold mb-2\",children:\"\\u0644\\u0648\\u062D\\u0629 \\u0627\\u0644\\u062A\\u062D\\u0643\\u0645\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-100\",children:[\"\\u0645\\u0631\\u062D\\u0628\\u0627\\u064B \",user===null||user===void 0?void 0:user.username,\" - \\u0625\\u0644\\u064A\\u0643 \\u0646\\u0638\\u0631\\u0629 \\u0639\\u0627\\u0645\\u0629 \\u0639\\u0644\\u0649 \\u0623\\u062F\\u0627\\u0621 \\u0627\\u0644\\u0646\\u0634\\u0627\\u0637\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-6xl opacity-20\",children:\"\\uD83D\\uDCCA\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap space-x-4 space-x-reverse mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:clearAllData,className:\"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105\",children:\"\\uD83D\\uDDD1\\uFE0F \\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchStats,className:\"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105\",children:\"\\uD83D\\uDD04 \\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>printReport('dashboard'),className:\"bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105\",children:\"\\uD83D\\uDDA8\\uFE0F \\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"bg-white text-gray-700 border-0 rounded-lg px-4 py-3 shadow-lg focus:ring-2 focus:ring-blue-300 font-medium\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"\\uD83D\\uDCC5 \\u064A\\u0648\\u0645\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\uD83D\\uDCC6 \\u0623\\u0633\\u0628\\u0648\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\uD83D\\uDCCA \\u0634\\u0647\\u0631\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\uD83D\\uDCC8 \\u0633\\u0646\\u0648\\u064A\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-green-400 to-green-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold opacity-90\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u064A\\u0639\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold mt-2\",children:[\"\\u062C.\\u0645 \",stats.total_sales.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl opacity-30\",children:\"\\uD83D\\uDCB0\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-red-400 to-red-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold opacity-90\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold mt-2\",children:[\"\\u062C.\\u0645 \",stats.total_expenses.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl opacity-30\",children:\"\\uD83D\\uDCB8\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-blue-400 to-blue-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold opacity-90\",children:\"\\u0635\\u0627\\u0641\\u064A \\u0627\\u0644\\u0631\\u0628\\u062D\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold mt-2\",children:[\"\\u062C.\\u0645 \",stats.net_profit.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl opacity-30\",children:\"\\uD83D\\uDCC8\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-orange-400 to-orange-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold opacity-90\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0627\\u0644\\u063A \\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\\u0629\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold mt-2\",children:[\"\\u062C.\\u0645 \",stats.total_unpaid.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl opacity-30\",children:\"\\u23F3\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-purple-400 to-purple-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold opacity-90\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold mt-2\",children:stats.invoice_count})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl opacity-30\",children:\"\\uD83E\\uDDFE\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-teal-400 to-teal-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold opacity-90\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0639\\u0645\\u0644\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold mt-2\",children:stats.customer_count})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl opacity-30\",children:\"\\uD83D\\uDC65\"})]})})]})]});};// Sales Component\nconst Sales=()=>{const[customers,setCustomers]=useState([]);const[newCustomer,setNewCustomer]=useState('');const[selectedCustomer,setSelectedCustomer]=useState('');const[suppliers,setSuppliers]=useState([]);// Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†\nconst[supervisorName,setSupervisorName]=useState('');// Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØªØµÙ†ÙŠØ¹\nconst[invoiceTitle,setInvoiceTitle]=useState('');// Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nconst[currentItem,setCurrentItem]=useState({seal_type:'RSL',material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',quantity:1,unit_price:'',product_type:'manufactured'// manufactured Ø£Ùˆ local\n});// New state for dual measurement inputs\nconst[measurements,setMeasurements]=useState({inner_diameter_mm:'',inner_diameter_inch:'',outer_diameter_mm:'',outer_diameter_inch:'',height_mm:'',height_inch:'',wall_height_mm:'',wall_height_inch:''});const[localProduct,setLocalProduct]=useState({product_size:'',// Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ù†ØªØ¬\nproduct_type:'',// Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬\npurchase_price:'',selling_price:'',supplier:''});const[items,setItems]=useState([]);const[paymentMethod,setPaymentMethod]=useState('Ù†Ù‚Ø¯ÙŠ');const[discount,setDiscount]=useState(0);// Ø§Ù„Ø®ØµÙ…\nconst[discountType,setDiscountType]=useState('amount');// Ù†ÙˆØ¹ Ø§Ù„Ø®ØµÙ…: amount Ø£Ùˆ percentage\nconst[compatibilityResults,setCompatibilityResults]=useState(null);const[selectedMaterial,setSelectedMaterial]=useState(null);const[selectedMaterials,setSelectedMaterials]=useState([]);// Ø®Ø§Ù…Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© Ù…Ø®ØªØ§Ø±Ø©\nconst[measurementUnit,setMeasurementUnit]=useState('Ù…Ù…');// Ø¨ÙˆØµØ© Ø£Ùˆ Ù…Ù…\nconst[wallHeight,setWallHeight]=useState('');// Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø© Ù„Ù„Ù€ W types\nconst[clientType,setClientType]=useState(1);// Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù„ØªØ³Ø¹ÙŠØ± (1, 2, 3)\n// Measurement conversion functions\nconst mmToInch=mm=>{if(!mm||mm==='')return'';return(parseFloat(mm)/25.4).toFixed(4);};const inchToMm=inch=>{if(!inch||inch==='')return'';return(parseFloat(inch)*25.4).toFixed(2);};// Handle measurement input changes with auto-conversion\nconst handleMeasurementChange=(field,value,unit)=>{const newMeasurements=_objectSpread({},measurements);if(unit==='mm'){newMeasurements[\"\".concat(field,\"_mm\")]=value;newMeasurements[\"\".concat(field,\"_inch\")]=mmToInch(value);}else{newMeasurements[\"\".concat(field,\"_inch\")]=value;newMeasurements[\"\".concat(field,\"_mm\")]=inchToMm(value);}setMeasurements(newMeasurements);// Update currentItem with mm values (for backend compatibility)\nconst mmValue=parseFloat(newMeasurements[\"\".concat(field,\"_mm\")])||'';setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{[field]:mmValue}));};const sealTypes=['RSL','RS','RSS','RSE','B17','B3','B14','B1','R15','R17','W1','W4','W5','W11','WBT','XR','CH','VR'];const materialTypes=['NBR','BUR','BT','VT','BOOM'];useEffect(()=>{fetchCustomers();fetchSuppliers();},[]);const fetchCustomers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/customers\"));// Sort customers alphabetically by name\nconst sortedCustomers=(response.data||[]).sort((a,b)=>a.name.localeCompare(b.name,'ar'));setCustomers(sortedCustomers);}catch(error){console.error('Error fetching customers:',error);}};const fetchSuppliers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/suppliers\"));setSuppliers(response.data||[]);}catch(error){console.error('Error fetching suppliers:',error);}};// Calculate automatic pricing based on material and client type\nconst calculateAutomaticPrice=async(material,height,clientType)=>{try{const response=await axios.post(\"\".concat(API,\"/calculate-price\"),null,{params:{material_type:material.material_type,inner_diameter:material.inner_diameter,outer_diameter:material.outer_diameter,height:height,client_type:clientType}});return response.data;}catch(error){console.log('No pricing found for this material combination:',error);return null;}};// Confirm multi-material selection and calculate pricing\nconst confirmMultiMaterialSelection=async()=>{try{// Calculate total pricing for all selected materials\nlet totalPrice=0;const height=parseFloat(currentItem.height);for(const selected of selectedMaterials){const pricing=await calculateAutomaticPrice(selected.material,height,clientType);if(pricing){totalPrice+=pricing.total_price*selected.seals;}}// Update the current item with the calculated price\nsetCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{unit_price:(totalPrice/parseInt(currentItem.quantity)).toFixed(2)}));// Set the first material as the selected material for compatibility\nif(selectedMaterials.length>0){setSelectedMaterial(selectedMaterials[0].material);}alert(\"\\u2705 \\u062A\\u0645 \\u062A\\u0623\\u0643\\u064A\\u062F \\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0627\\u062A \\u0628\\u0646\\u062C\\u0627\\u062D!\\n\\n\\uD83D\\uDCCA \\u0645\\u0644\\u062E\\u0635 \\u0627\\u0644\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631:\\n\".concat(selectedMaterials.map(sel=>\"- \".concat(sel.material.unit_code,\": \").concat(sel.seals,\" \\u0633\\u064A\\u0644\")).join('\\n'),\"\\n\\n\\uD83D\\uDCB0 \\u0627\\u0644\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A: \").concat(totalPrice.toFixed(2),\" \\u062C.\\u0645\\n\\uD83D\\uDCB0 \\u0633\\u0639\\u0631 \\u0627\\u0644\\u0633\\u064A\\u0644 \\u0627\\u0644\\u0648\\u0627\\u062D\\u062F: \").concat((totalPrice/parseInt(currentItem.quantity)).toFixed(2),\" \\u062C.\\u0645\"));}catch(error){console.error('Error confirming multi-material selection:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±');}};const checkCompatibility=async()=>{if(!currentItem.inner_diameter||!currentItem.outer_diameter||!currentItem.height){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}let innerDiameter=parseFloat(currentItem.inner_diameter);let outerDiameter=parseFloat(currentItem.outer_diameter);let height=parseFloat(currentItem.height);if(isNaN(innerDiameter)||isNaN(outerDiameter)||isNaN(height)){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø£Ø±Ù‚Ø§Ù… ØµØ­ÙŠØ­Ø© Ù„Ù„Ù…Ù‚Ø§Ø³Ø§Øª');return;}// Convert from inches to millimeters if needed\nif(measurementUnit==='Ø¨ÙˆØµØ©'){innerDiameter=innerDiameter*25.4;outerDiameter=outerDiameter*25.4;height=height*25.4;console.log(\"\\u062A\\u062D\\u0648\\u064A\\u0644 \\u0645\\u0646 \\u0628\\u0648\\u0635\\u0629 \\u0625\\u0644\\u0649 \\u0645\\u0644\\u0644\\u064A\\u0645\\u062A\\u0631:\\n        \\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A: \".concat(currentItem.inner_diameter,\" \\u0628\\u0648\\u0635\\u0629 = \").concat(innerDiameter.toFixed(1),\" \\u0645\\u0645\\n        \\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A: \").concat(currentItem.outer_diameter,\" \\u0628\\u0648\\u0635\\u0629 = \").concat(outerDiameter.toFixed(1),\" \\u0645\\u0645\\n        \\u0627\\u0644\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639: \").concat(currentItem.height,\" \\u0628\\u0648\\u0635\\u0629 = \").concat(height.toFixed(1),\" \\u0645\\u0645\"));}try{const response=await axios.post(\"\".concat(API,\"/compatibility-check\"),{seal_type:currentItem.seal_type,material_type:currentItem.material_type,inner_diameter:innerDiameter,outer_diameter:outerDiameter,height:height});setCompatibilityResults(response.data);}catch(error){console.error('Error checking compatibility:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„ØªÙˆØ§ÙÙ‚');}};const addItem=()=>{if(currentItem.product_type==='manufactured'){// Validation for manufactured products - check if at least one measurement is filled\nconst hasInnerDiameter=measurements.inner_diameter_mm||measurements.inner_diameter_inch;const hasOuterDiameter=measurements.outer_diameter_mm||measurements.outer_diameter_inch;const hasHeight=measurements.height_mm||measurements.height_inch;if(!hasInnerDiameter||!hasOuterDiameter||!hasHeight||!currentItem.unit_price){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© (Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª ÙˆØ§Ù„Ø³Ø¹Ø±)');return;}// Use mm values (they're automatically kept in sync by handleMeasurementChange)\nconst innerDiameter=parseFloat(currentItem.inner_diameter);const outerDiameter=parseFloat(currentItem.outer_diameter);const height=parseFloat(currentItem.height);const wallHeightValue=parseFloat(measurements.wall_height_mm)||null;const item=_objectSpread(_objectSpread({},currentItem),{},{inner_diameter:innerDiameter,outer_diameter:outerDiameter,height:height,quantity:parseInt(currentItem.quantity),unit_price:parseFloat(currentItem.unit_price),total_price:parseFloat(currentItem.unit_price)*parseInt(currentItem.quantity),wall_height:wallHeightValue,// Store original display values for both units\ndisplay_measurements:{inner_diameter_mm:measurements.inner_diameter_mm,inner_diameter_inch:measurements.inner_diameter_inch,outer_diameter_mm:measurements.outer_diameter_mm,outer_diameter_inch:measurements.outer_diameter_inch,height_mm:measurements.height_mm,height_inch:measurements.height_inch,wall_height_mm:measurements.wall_height_mm,wall_height_inch:measurements.wall_height_inch},material_used:selectedMaterial?selectedMaterial.unit_code:null,material_details:selectedMaterial?{id:selectedMaterial.id,unit_code:selectedMaterial.unit_code,inner_diameter:selectedMaterial.inner_diameter,outer_diameter:selectedMaterial.outer_diameter,height:selectedMaterial.height,material_type:selectedMaterial.material_type,is_finished_product:selectedMaterial.is_finished_product||false}:{// Ø¥Ø±Ø³Ø§Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø­ØªÙ‰ Ø¨Ø¯ÙˆÙ† Ø§Ø®ØªÙŠØ§Ø± Ù…Ø§Ø¯Ø© Ù…Ø­Ø¯Ø¯Ø©\nmaterial_type:currentItem.material_type,inner_diameter:parseFloat(currentItem.inner_diameter),outer_diameter:parseFloat(currentItem.outer_diameter),is_finished_product:false},// Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø®Ø§Ù…Ø§Øª Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©\nselected_materials:selectedMaterials.length>0?selectedMaterials.map(sel=>({unit_code:sel.material.unit_code,material_type:sel.material.material_type,inner_diameter:sel.material.inner_diameter,outer_diameter:sel.material.outer_diameter,height:sel.material.height,seals_count:sel.seals,id:sel.material.id})):null});setItems([...items,item]);setCurrentItem({seal_type:'RSL',material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',quantity:1,unit_price:'',product_type:'manufactured'});setMeasurements({inner_diameter_mm:'',inner_diameter_inch:'',outer_diameter_mm:'',outer_diameter_inch:'',height_mm:'',height_inch:'',wall_height_mm:'',wall_height_inch:''});}else{// Validation for local products\nif(!localProduct.product_size||!localProduct.product_type||!localProduct.selling_price||!localProduct.supplier||!localProduct.purchase_price){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠ');return;}const product_name=\"\".concat(localProduct.product_size,\" - \").concat(localProduct.product_type);const item={// Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©ØŒ Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ØµÙ†Ø¹Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† null\nseal_type:null,material_type:null,inner_diameter:null,outer_diameter:null,height:null,product_type:'local',product_name:product_name,product_size:localProduct.product_size,product_type_name:localProduct.product_type,supplier:localProduct.supplier,purchase_price:parseFloat(localProduct.purchase_price),selling_price:parseFloat(localProduct.selling_price),quantity:parseInt(currentItem.quantity),unit_price:parseFloat(localProduct.selling_price),// Use selling price as unit price\ntotal_price:parseFloat(localProduct.selling_price)*parseInt(currentItem.quantity),// Store local product details\nlocal_product_details:{product_size:localProduct.product_size,product_type:localProduct.product_type,supplier:localProduct.supplier,purchase_price:parseFloat(localProduct.purchase_price),selling_price:parseFloat(localProduct.selling_price)}};setItems([...items,item]);setLocalProduct({product_size:'',product_type:'',purchase_price:'',selling_price:'',supplier:''});setCurrentItem({seal_type:'RSL',material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',quantity:1,unit_price:'',product_type:'manufactured'});setMeasurements({inner_diameter_mm:'',inner_diameter_inch:'',outer_diameter_mm:'',outer_diameter_inch:'',height_mm:'',height_inch:'',wall_height_mm:'',wall_height_inch:''});}setCompatibilityResults(null);setSelectedMaterial(null);setSelectedMaterials([]);// Ù…Ø³Ø­ Ø§Ù„Ø®Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©\n};const editItem=index=>{var _item$inner_diameter,_item$outer_diameter,_item$height,_item$unit_price,_item$inner_diameter2,_item$outer_diameter2,_item$height2,_item$wall_height;const item=items[index];// Set current item for editing\nsetCurrentItem({seal_type:item.seal_type||'RSL',material_type:item.material_type||'NBR',inner_diameter:((_item$inner_diameter=item.inner_diameter)===null||_item$inner_diameter===void 0?void 0:_item$inner_diameter.toString())||'',outer_diameter:((_item$outer_diameter=item.outer_diameter)===null||_item$outer_diameter===void 0?void 0:_item$outer_diameter.toString())||'',height:((_item$height=item.height)===null||_item$height===void 0?void 0:_item$height.toString())||'',quantity:item.quantity||1,unit_price:((_item$unit_price=item.unit_price)===null||_item$unit_price===void 0?void 0:_item$unit_price.toString())||'',product_type:item.product_type||(item.local_product_details?'local':'manufactured')});// Set measurements for dual input fields (assuming values are in mm from database)\nsetMeasurements({inner_diameter_mm:((_item$inner_diameter2=item.inner_diameter)===null||_item$inner_diameter2===void 0?void 0:_item$inner_diameter2.toString())||'',inner_diameter_inch:mmToInch(item.inner_diameter)||'',outer_diameter_mm:((_item$outer_diameter2=item.outer_diameter)===null||_item$outer_diameter2===void 0?void 0:_item$outer_diameter2.toString())||'',outer_diameter_inch:mmToInch(item.outer_diameter)||'',height_mm:((_item$height2=item.height)===null||_item$height2===void 0?void 0:_item$height2.toString())||'',height_inch:mmToInch(item.height)||'',wall_height_mm:((_item$wall_height=item.wall_height)===null||_item$wall_height===void 0?void 0:_item$wall_height.toString())||'',wall_height_inch:mmToInch(item.wall_height)||''});// Set wall height if exists\nif(item.wall_height){setWallHeight(item.wall_height.toString());}// Set measurement unit if exists\nif(item.measurement_unit){setMeasurementUnit(item.measurement_unit);}// Set local product details if exists\nif(item.local_product_details){var _item$unit_price2;setLocalProduct({product_size:item.local_product_details.product_size||'',product_type:item.local_product_details.product_type||'',purchase_price:'',selling_price:((_item$unit_price2=item.unit_price)===null||_item$unit_price2===void 0?void 0:_item$unit_price2.toString())||'',supplier:''});}// Remove the item being edited\nconst newItems=items.filter((_,i)=>i!==index);setItems(newItems);};const deleteItem=index=>{if(confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ØµØ±ØŸ')){const newItems=items.filter((_,i)=>i!==index);setItems(newItems);}};const[isCreatingInvoice,setIsCreatingInvoice]=useState(false);const createInvoice=async()=>{// Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø± Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nif(isCreatingInvoice){return;}if(!selectedCustomer&&!newCustomer){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø£Ùˆ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯');return;}if(items.length===0){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª Ù„Ù„ÙØ§ØªÙˆØ±Ø©');return;}try{setIsCreatingInvoice(true);// Ø¨Ø¯Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nlet customerId=selectedCustomer;let customerName='';// Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯ Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±\nif(!selectedCustomer&&newCustomer){try{const customerResponse=await axios.post(\"\".concat(API,\"/customers\"),{name:newCustomer,phone:'',address:''});customerId=customerResponse.data.id;customerName=newCustomer;// ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\nfetchCustomers();}catch(customerError){var _customerError$respon;// Check if it's a duplicate customer error\nif(((_customerError$respon=customerError.response)===null||_customerError$respon===void 0?void 0:_customerError$respon.status)===409){// Customer exists, ask user what to do\nconst existingCustomer=customers.find(c=>c.name.toLowerCase()===newCustomer.toLowerCase());if(existingCustomer){if(confirm(\"\\u26A0\\uFE0F \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\\"\".concat(newCustomer,\"\\\" \\u0645\\u0648\\u062C\\u0648\\u062F \\u0628\\u0627\\u0644\\u0641\\u0639\\u0644!\\n\\n\\u0647\\u0644 \\u062A\\u0631\\u064A\\u062F \\u0627\\u0633\\u062A\\u062E\\u062F\\u0627\\u0645 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0627\\u0644\\u0645\\u0648\\u062C\\u0648\\u062F\\u061F\"))){customerId=existingCustomer.id;customerName=existingCustomer.name;setSelectedCustomer(existingCustomer.id);setNewCustomer('');}else{setIsCreatingInvoice(false);return;}}else{alert(\"\\u274C \".concat(customerError.response.data.detail,\"\\n\\n\\u064A\\u0631\\u062C\\u0649 \\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0645\\u0646 \\u0627\\u0644\\u0642\\u0627\\u0626\\u0645\\u0629.\"));setIsCreatingInvoice(false);return;}}else{throw customerError;}}}else{const customer=customers.find(c=>c.id===customerId);customerName=customer?customer.name:'';}// Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ ÙˆØ§Ù„Ø®ØµÙ…\nconst subtotal=items.reduce((sum,item)=>sum+item.total_price,0);const discountAmount=discountType==='percentage'?subtotal*parseFloat(discount||0)/100:parseFloat(discount||0);const totalAfterDiscount=subtotal-discountAmount;// Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nconst invoiceData={customer_id:customerId,customer_name:customerName,invoice_title:invoiceTitle,// Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nsupervisor_name:supervisorName,// Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù\nitems:items,payment_method:paymentMethod,subtotal:subtotal,discount:discountAmount,discount_type:discountType,discount_value:parseFloat(discount||0),total_after_discount:totalAfterDiscount,notes:''};const response=await axios.post(\"\".concat(API,\"/invoices?supervisor_name=\").concat(encodeURIComponent(supervisorName)),invoiceData);if(response.data){alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');// Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\nsetItems([]);setSelectedCustomer('');setNewCustomer('');setSupervisorName('');setInvoiceTitle('');// Ù…Ø³Ø­ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nsetPaymentMethod('Ù†Ù‚Ø¯ÙŠ');setDiscount(0);setDiscountType('amount');setClientType(1);// Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„\n// Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nprintInvoice(response.data);}}catch(error){var _error$response8,_error$response8$data;console.error('Error creating invoice:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©: '+(((_error$response8=error.response)===null||_error$response8===void 0?void 0:(_error$response8$data=_error$response8.data)===null||_error$response8$data===void 0?void 0:_error$response8$data.detail)||error.message));}finally{setIsCreatingInvoice(false);// Ø¥Ù†Ù‡Ø§Ø¡ Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡\n}};const printInvoice=invoice=>{const printContent=\"\\n      <!DOCTYPE html>\\n      <html dir=\\\"rtl\\\">\\n      <head>\\n        <meta charset=\\\"UTF-8\\\">\\n        <style>\\n          body {\\n            font-family: Arial, sans-serif;\\n            margin: 0;\\n            padding: 20px;\\n            direction: rtl;\\n            font-size: 15px;\\n          }\\n          .header {\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n            border-bottom: 3px solid #000;\\n            padding-bottom: 10px;\\n            margin-bottom: 20px;\\n          }\\n          .company-info {\\n            text-align: right;\\n          }\\n          .company-name {\\n            font-size: 32px;\\n            font-weight: bold;\\n            color: #000;\\n            margin: 0;\\n          }\\n          .company-subtitle {\\n            font-size: 20px;\\n            margin: 5px 0;\\n            color: #666;\\n          }\\n          .company-details {\\n            font-size: 16px;\\n            margin: 2px 0;\\n            color: #333;\\n          }\\n          .logo-section {\\n            text-align: center;\\n            flex: 1;\\n          }\\n          .invoice-title {\\n            font-size: 20px;\\n            font-weight: bold;\\n            background-color: #ff4444;\\n            color: white;\\n            padding: 8px 20px;\\n            border-radius: 5px;\\n            display: inline-block;\\n            margin-bottom: 10px;\\n          }\\n          .invoice-number {\\n            font-size: 18px;\\n            font-weight: bold;\\n            color: #ff4444;\\n          }\\n          .customer-info {\\n            display: flex;\\n            justify-content: space-between;\\n            margin: 20px 0;\\n          }\\n          .customer-details {\\n            text-align: right;\\n          }\\n          .date-info {\\n            text-align: left;\\n          }\\n          .products-table {\\n            width: 100%;\\n            border-collapse: collapse;\\n            border: 2px solid #000;\\n            margin: 20px 0;\\n          }\\n          .products-table th,\\n          .products-table td {\\n            border: 1px solid #000;\\n            padding: 8px;\\n            text-align: center;\\n          }\\n          .products-table th {\\n            background-color: #f0f0f0;\\n            font-weight: bold;\\n          }\\n          .footer {\\n            margin-top: 30px;\\n            border-top: 1px solid #ccc;\\n            padding-top: 15px;\\n            display: flex;\\n            justify-content: space-between;\\n            font-size: 12px;\\n            color: #666;\\n          }\\n          .total-section {\\n            text-align: left;\\n            margin-top: 10px;\\n          }\\n          .total-amount {\\n            font-size: 18px;\\n            font-weight: bold;\\n            border: 2px solid #000;\\n            padding: 10px;\\n            display: inline-block;\\n            background-color: #f9f9f9;\\n          }\\n          @media print {\\n            body { margin: 0; padding: 10px; }\\n          }\\n        </style>\\n      </head>\\n      <body>\\n        <!-- Header Section -->\\n        <div class=\\\"header\\\">\\n          <div class=\\\"company-info\\\">\\n            <h1 class=\\\"company-name\\\">\\u0634\\u0631\\u0643\\u0629 \\u0645\\u0627\\u0633\\u062A\\u0631 \\u0633\\u064A\\u0644</h1>\\n            <p class=\\\"company-subtitle\\\">\\u062A\\u0635\\u0646\\u064A\\u0639 \\u062C\\u0645\\u064A\\u0639 \\u0623\\u0646\\u0648\\u0627\\u0639 \\u0627\\u0644\\u0623\\u0648\\u064A\\u0644 \\u0633\\u064A\\u0644</p>\\n            <p class=\\\"company-details\\\">\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0623\\u0642\\u0637\\u0627\\u0631 \\u062D\\u062A\\u0649 \\u0665\\u0660\\u0660\\u0645\\u0644</p>\\n            <p class=\\\"company-details\\\">\\u0647\\u064A\\u062F\\u0631\\u0648\\u0644\\u064A\\u0643 - \\u0646\\u064A\\u0648\\u0645\\u0627\\u062A\\u064A\\u0643</p>\\n          </div>\\n          \\n          <div class=\\\"logo-section\\\">\\n            <img src=\\\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\\\" \\n                 alt=\\\"Master Seal Logo\\\" \\n                 style=\\\"max-width: 120px; max-height: 80px; margin-bottom: 10px;\\\">\\n            <div class=\\\"invoice-title\\\">\".concat(invoice.invoice_title||'Ø¹Ø±Ø¶ Ø³Ø¹Ø±',\"</div>\\n            <div class=\\\"invoice-number\\\">\").concat(invoice.invoice_number,\"</div>\\n          </div>\\n        </div>\\n\\n        <!-- Customer and Date Info -->\\n        <div class=\\\"customer-info\\\">\\n          <div class=\\\"customer-details\\\">\\n            <p><strong>\\u0627\\u0644\\u0633\\u0627\\u062F\\u0629:</strong> \").concat(invoice.customer_name,\"</p>\\n            <p><strong>\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646:</strong> \").concat(invoice.customer_address||'........................',\"</p>\\n          </div>\\n          <div class=\\\"date-info\\\">\\n            <p><strong>\\u062A\\u062D\\u0631\\u064A\\u0631 \\u0641\\u064A:</strong> \").concat(new Date(invoice.date).toLocaleDateString('ar-EG'),\"</p>\\n            <p><strong>Date:</strong> \").concat(new Date(invoice.date).toLocaleDateString('en-GB'),\"</p>\\n          </div>\\n        </div>\\n\\n        <!-- Products Table -->\\n        <table class=\\\"products-table\\\">\\n          <thead>\\n            <tr>\\n              <th style=\\\"width: 60px;\\\">\\u0627\\u0644\\u0645\\u0633\\u0644\\u0633\\u0644<br>Item</th>\\n              <th style=\\\"width: 80px;\\\">\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629<br>QTY</th>\\n              <th style=\\\"width: 200px;\\\">Description<br>\\u0627\\u0644\\u0645\\u0648\\u0627\\u0635\\u0641\\u0627\\u062A</th>\\n              <th style=\\\"width: 100px;\\\">\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629<br>Unit Price</th>\\n              <th style=\\\"width: 100px;\\\">\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A<br>Total</th>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            \").concat(invoice.items.map((item,index)=>\"\\n              <tr>\\n                <td>\".concat(index+1,\"</td>\\n                <td>\").concat(item.quantity,\"</td>\\n                <td style=\\\"text-align: right;\\\">\\n                  \").concat(item.local_product_details?\"\".concat(item.local_product_details.product_size,\" - \").concat(item.local_product_details.product_type):\"\".concat(item.seal_type,\" - \").concat(item.material_type,\"<br>\\n                    <small>\").concat(item.inner_diameter,\" \\xD7 \").concat(item.outer_diameter,\" \\xD7 \").concat(item.height,\" \\u0645\\u0645\").concat(item.wall_height?\" (\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629: \".concat(item.wall_height,\" \\u0645\\u0645)\"):\"\",\"</small>\"),\"\\n                </td>\\n                <td>\\u062C.\\u0645 \").concat(item.unit_price.toFixed(2),\"</td>\\n                <td>\\u062C.\\u0645 \").concat(item.total_price.toFixed(2),\"</td>\\n              </tr>\\n            \")).join(''),\"\\n            <!-- Empty rows for additional items -->\\n            \").concat(Array.from({length:Math.max(0,8-invoice.items.length)},(_,i)=>\"\\n              <tr style=\\\"height: 40px;\\\">\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n              </tr>\\n            \").join(''),\"\\n          </tbody>\\n        </table>\\n\\n        <!-- Total Section -->\\n        <div class=\\\"total-section\\\">\\n          <div style=\\\"text-align: left; margin-bottom: 10px;\\\">\\n            \").concat(invoice.subtotal?\"\\n              <div style=\\\"margin-bottom: 5px;\\\">\\n                <span>\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639 \\u0627\\u0644\\u0641\\u0631\\u0639\\u064A: \\u062C.\\u0645 \".concat(invoice.subtotal.toFixed(2),\"</span>\\n              </div>\\n            \"):'',\"\\n            \").concat(invoice.discount&&invoice.discount>0?\"\\n              <div style=\\\"margin-bottom: 5px; color: #d32f2f;\\\">\\n                <span>\\u0627\\u0644\\u062E\\u0635\\u0645: - \\u062C.\\u0645 \".concat(invoice.discount.toFixed(2),\"</span>\\n                \").concat(invoice.discount_type==='percentage'&&invoice.discount_value?\" <small>(\".concat(invoice.discount_value,\"%)</small>\"):'',\"\\n              </div>\\n              <hr style=\\\"margin: 5px 0; border: 1px solid #000;\\\">\\n            \"):'',\"\\n          </div>\\n          <div class=\\\"total-amount\\\">\\n            \\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0646\\u0647\\u0627\\u0626\\u064A: \\u062C.\\u0645 \").concat((invoice.total_after_discount||invoice.total_amount).toFixed(2),\"\\n          </div>\\n        </div>\\n\\n        <!-- Additional Info -->\\n        <div style=\\\"margin-top: 20px; text-align: center; font-size: 12px;\\\">\\n          <p><strong>\\u0645\\u0644\\u062D\\u0648\\u0638\\u0629:</strong> \\u0641\\u0642\\u0637 \\u0648\\u0642\\u062F\\u0631\\u0647</p>\\n          <div style=\\\"height: 30px; border-bottom: 1px solid #000; margin: 10px 40px;\\\"></div>\\n        </div>\\n\\n        <!-- Footer -->\\n        <div class=\\\"footer\\\">\\n          <div>\\n            <p><strong>\\u0627\\u0644\\u062A\\u0648\\u0642\\u064A\\u0639:</strong></p>\\n            <p>\\u0645\\u0648\\u0628\\u0627\\u064A\\u0644: \\u0660\\u0661\\u0660\\u0662\\u0660\\u0666\\u0663\\u0660\\u0666\\u0667\\u0667 - \\u0660\\u0661\\u0660\\u0666\\u0662\\u0663\\u0669\\u0660\\u0668\\u0667\\u0660</p>\\n            <p>\\u062A\\u0644\\u064A\\u0641\\u0648\\u0646: \\u0660\\u0661\\u0660\\u0662\\u0660\\u0666\\u0663\\u0660\\u0666\\u0667\\u0667</p>\\n          </div>\\n          <div style=\\\"text-align: left;\\\">\\n            <p><strong>\\u0627\\u0644\\u0645\\u0633\\u062A\\u0644\\u0645:</strong></p>\\n            <p>\\u0627\\u0644\\u062D\\u0631\\u0641\\u064A\\u064A\\u0646 - \\u0627\\u0644\\u0633\\u0644\\u0627\\u0645 - \\u0623\\u0645\\u0627\\u0645 \\u0627\\u0644\\u0633\\u0648\\u0628\\u0631 \\u062C\\u064A\\u062A</p>\\n            <p>\\u0645\\u0648\\u0628\\u0627\\u064A\\u0644: \\u0660\\u0661\\u0660\\u0662\\u0660\\u0666\\u0663\\u0660\\u0666\\u0667\\u0667 - \\u0660\\u0661\\u0660\\u0666\\u0662\\u0663\\u0669\\u0660\\u0668\\u0667\\u0660</p>\\n          </div>\\n        </div>\\n\\n        <!-- Note -->\\n        <div style=\\\"text-align: center; margin-top: 20px; font-size: 11px; color: #666;\\\">\\n          <p>\\u064A\\u0642\\u0631 \\u0627\\u0644\\u0645\\u0634\\u062A\\u0631\\u064A \\u0628\\u0623\\u0646\\u0647 \\u0642\\u0627\\u0645 \\u0628\\u0645\\u0639\\u0627\\u064A\\u0646\\u0629 \\u0627\\u0644\\u0628\\u0636\\u0627\\u0639\\u0629 \\u0648\\u0642\\u0628\\u0648\\u0644\\u0647\\u0627</p>\\n        </div>\\n      </body>\\n      </html>\\n    \");const printWindow=window.open('','_blank');printWindow.document.write(printContent);printWindow.document.close();printWindow.print();};const clearAllInvoices=async()=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.'))return;try{setItems([]);alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±');}catch(error){alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-6\",children:\"\\u0627\\u0644\\u0645\\u0628\\u064A\\u0639\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"select\",{value:selectedCustomer,onChange:e=>setSelectedCustomer(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),customers.map(customer=>/*#__PURE__*/_jsx(\"option\",{value:customer.id,children:customer.name},customer.id))]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newCustomer,onChange:e=>{const value=e.target.value;setNewCustomer(value);// Check for exact match and auto-select\nconst exactMatch=customers.find(c=>c.name.toLowerCase()===value.toLowerCase());if(exactMatch){// Auto-select the existing customer\nsetSelectedCustomer(exactMatch.id);setNewCustomer('');e.target.style.borderColor='';e.target.style.backgroundColor='';// Show brief confirmation\nconst tempMsg=document.createElement('div');tempMsg.textContent=\"\\u2705 \\u062A\\u0645 \\u0627\\u062E\\u062A\\u064A\\u0627\\u0631: \".concat(exactMatch.name);tempMsg.className='text-xs text-green-600 mt-1';e.target.parentElement.appendChild(tempMsg);setTimeout(()=>tempMsg.remove(),2000);}else{// Check for potential duplicates (partial match)\nconst partialMatch=customers.some(c=>c.name.toLowerCase().includes(value.toLowerCase())&&value.length>2);if(partialMatch&&value){e.target.style.borderColor='orange';e.target.style.backgroundColor='#fff3cd';}else{e.target.style.borderColor='';e.target.style.backgroundColor='';}}},placeholder:\"\\u0627\\u0633\\u0645 \\u0639\\u0645\\u064A\\u0644 \\u062C\\u062F\\u064A\\u062F\",className:\"w-full p-2 border border-gray-300 rounded\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0639\\u0645\\u064A\\u0644 \\u062C\\u062F\\u064A\\u062F\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0634\\u0631\\u0641 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:supervisorName,onChange:e=>setSupervisorName(e.target.value),placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0634\\u0631\\u0641 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\",className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:invoiceTitle,onChange:e=>setInvoiceTitle(e.target.value),placeholder:\"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\",className:\"w-full p-2 border border-gray-300 rounded\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsxs(\"select\",{value:currentItem.product_type,onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{product_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"manufactured\",children:\"\\u0645\\u0646\\u062A\\u062C \\u062A\\u0635\\u0646\\u064A\\u0639\"}),/*#__PURE__*/_jsx(\"option\",{value:\"local\",children:\"\\u0645\\u0646\\u062A\\u062C \\u0645\\u062D\\u0644\\u064A\"})]})]}),currentItem.product_type==='manufactured'?/*#__PURE__*/// Manufacturing Product Form\n_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"select\",{value:currentItem.seal_type,onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{seal_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:sealTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"select\",{value:currentItem.material_type,onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{material_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:materialTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0645\\u0644\\u064A\\u0645\\u062A\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:measurements.inner_diameter_mm,onChange:e=>handleMeasurementChange('inner_diameter',e.target.value,'mm'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0645\\u0645\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0628\\u0648\\u0635\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.0001\",value:measurements.inner_diameter_inch,onChange:e=>handleMeasurementChange('inner_diameter',e.target.value,'inch'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0628\\u0648\\u0635\\u0629\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0645\\u0644\\u064A\\u0645\\u062A\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:measurements.outer_diameter_mm,onChange:e=>handleMeasurementChange('outer_diameter',e.target.value,'mm'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0645\\u0645\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0628\\u0648\\u0635\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.0001\",value:measurements.outer_diameter_inch,onChange:e=>handleMeasurementChange('outer_diameter',e.target.value,'inch'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0628\\u0648\\u0635\\u0629\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0645\\u0644\\u064A\\u0645\\u062A\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:measurements.height_mm,onChange:e=>handleMeasurementChange('height',e.target.value,'mm'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0645\\u0645\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0628\\u0648\\u0635\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.0001\",value:measurements.height_inch,onChange:e=>handleMeasurementChange('height',e.target.value,'inch'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0628\\u0648\\u0635\\u0629\"})]})]})]}),currentItem.seal_type&&currentItem.seal_type.startsWith('W')&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0645\\u0644\\u064A\\u0645\\u062A\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:measurements.wall_height_mm,onChange:e=>handleMeasurementChange('wall_height',e.target.value,'mm'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629 \\u0628\\u0627\\u0644\\u0645\\u0644\\u064A\\u0645\\u062A\\u0631\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0628\\u0648\\u0635\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.0001\",value:measurements.wall_height_inch,onChange:e=>handleMeasurementChange('wall_height',e.target.value,'inch'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629 \\u0628\\u0627\\u0644\\u0628\\u0648\\u0635\\u0629\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:currentItem.quantity,onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{quantity:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0644\\u0644\\u062A\\u0633\\u0639\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"select\",{value:clientType,onChange:e=>setClientType(parseInt(e.target.value)),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:1,children:\"\\u0639\\u0645\\u064A\\u0644 1\"}),/*#__PURE__*/_jsx(\"option\",{value:2,children:\"\\u0639\\u0645\\u064A\\u0644 2\"}),/*#__PURE__*/_jsx(\"option\",{value:3,children:\"\\u0639\\u0645\\u064A\\u0644 3\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0633\\u064A\\u0644 \\u0627\\u0644\\u0648\\u0627\\u062D\\u062F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:currentItem.unit_price,onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{unit_price:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"textarea\",{value:currentItem.notes||'',onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{notes:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",rows:\"2\",placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0625\\u0636\\u0627\\u0641\\u064A\\u0629...\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:checkCompatibility,className:\"w-full bg-yellow-500 text-white p-2 rounded hover:bg-yellow-600\",children:\"\\u0641\\u062D\\u0635 \\u0627\\u0644\\u062A\\u0648\\u0627\\u0641\\u0642\"})})]})}):/*#__PURE__*/// Local Product Form\n_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0642\\u0627\\u0633 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:localProduct.product_size,onChange:e=>setLocalProduct(_objectSpread(_objectSpread({},localProduct),{},{product_size:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0645\\u0642\\u0627\\u0633 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:localProduct.product_type,onChange:e=>setLocalProduct(_objectSpread(_objectSpread({},localProduct),{},{product_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),/*#__PURE__*/_jsxs(\"select\",{value:localProduct.supplier,onChange:e=>setLocalProduct(_objectSpread(_objectSpread({},localProduct),{},{supplier:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),suppliers.map(supplier=>/*#__PURE__*/_jsx(\"option\",{value:supplier.name,children:supplier.name},supplier.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0634\\u0631\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:localProduct.purchase_price,onChange:e=>setLocalProduct(_objectSpread(_objectSpread({},localProduct),{},{purchase_price:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0634\\u0631\\u0627\\u0621\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0628\\u064A\\u0639\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:localProduct.selling_price,onChange:e=>setLocalProduct(_objectSpread(_objectSpread({},localProduct),{},{selling_price:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0628\\u064A\\u0639\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:currentItem.quantity,onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{quantity:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:addItem,className:\"w-full bg-green-500 text-white p-2 rounded hover:bg-green-600 mt-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0644\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"})]})]}),compatibilityResults&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0646\\u062A\\u0627\\u0626\\u062C \\u0641\\u062D\\u0635 \\u0627\\u0644\\u062A\\u0648\\u0627\\u0641\\u0642\"}),compatibilityResults.compatible_materials.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\uD83D\\uDCE6 \\u0646\\u062A\\u0627\\u0626\\u062C \\u0641\\u062D\\u0635 \\u0627\\u0644\\u062A\\u0648\\u0627\\u0641\\u0642\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mb-2\",children:[\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0627\\u062A \\u0648\\u062D\\u062F\\u062F \\u0639\\u062F\\u062F \\u0627\\u0644\\u0633\\u064A\\u0644\\u0627\\u062A \\u0645\\u0646 \\u0643\\u0644 \\u062E\\u0627\\u0645\\u0629 (\\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628: \",currentItem.quantity,\" \\u0633\\u064A\\u0644)\"]}),selectedMaterials.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-3 bg-blue-50 rounded border\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium text-blue-800 mb-2\",children:\"\\u0627\\u0644\\u062E\\u0627\\u0645\\u0627\\u062A \\u0627\\u0644\\u0645\\u062E\\u062A\\u0627\\u0631\\u0629:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:selectedMaterials.map((selected,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between bg-white p-2 rounded border\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm\",children:[selected.material.unit_code,\" - \",selected.material.material_type,selected.material.inner_diameter,\"\\xD7\",selected.material.outer_diameter,\"\\xD7\",selected.material.height]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",max:Math.floor(selected.material.height/(parseFloat(currentItem.height)+2)),value:selected.seals,onChange:e=>{const newSelected=[...selectedMaterials];newSelected[index].seals=parseInt(e.target.value)||0;setSelectedMaterials(newSelected);},className:\"w-16 p-1 border rounded text-center\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const newSelected=selectedMaterials.filter((_,i)=>i!==index);setSelectedMaterials(newSelected);},className:\"text-red-600 hover:text-red-800 text-sm\",children:\"\\u2715\"})]})]},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-sm\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639: \",selectedMaterials.reduce((sum,sel)=>sum+sel.seals,0),\" / \",currentItem.quantity,\" \\u0633\\u064A\\u0644\"]}),selectedMaterials.reduce((sum,sel)=>sum+sel.seals,0)===parseInt(currentItem.quantity)&&/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600 ml-2\",children:\"\\u2713 \\u0645\\u0643\\u062A\\u0645\\u0644\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2 max-h-48 overflow-y-auto\",children:compatibilityResults.compatible_materials.map((material,index)=>{const isSelected=selectedMaterials.some(sel=>sel.material.unit_code===material.unit_code&&sel.material.inner_diameter===material.inner_diameter&&sel.material.outer_diameter===material.outer_diameter);const maxSeals=Math.floor(material.height/(parseFloat(currentItem.height)+2));const remainingSeals=parseInt(currentItem.quantity)-selectedMaterials.reduce((sum,sel)=>sum+sel.seals,0);return/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded border transition-colors \".concat(isSelected?'bg-blue-100 border-blue-300':'bg-gray-50 hover:bg-gray-100'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-blue-600\",children:[material.unit_code,\" - \",material.material_type]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"\\u0627\\u0644\\u0623\\u0628\\u0639\\u0627\\u062F: \",material.inner_diameter,\" \\xD7 \",material.outer_diameter,\" \\xD7 \",material.height,\" \\u0645\\u0645\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-green-600\",children:[\"\\u064A\\u0645\\u0643\\u0646 \\u0625\\u0646\\u062A\\u0627\\u062C: \",maxSeals,\" \\u0633\\u064A\\u0644 \\u0643\\u062D\\u062F \\u0623\\u0642\\u0635\\u0649\"]}),material.score&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[\"\\u0646\\u0633\\u0628\\u0629 \\u0627\\u0644\\u062A\\u0648\\u0627\\u0641\\u0642: \",material.score,\"%\"]})]}),!isSelected&&remainingSeals>0&&maxSeals>0&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const newSelection={material:material,seals:Math.min(maxSeals,remainingSeals)};setSelectedMaterials([...selectedMaterials,newSelection]);},className:\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\",children:\"\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\"}),isSelected&&/*#__PURE__*/_jsx(\"div\",{className:\"text-blue-600 text-sm font-medium\",children:\"\\u2713 \\u0645\\u062E\\u062A\\u0627\\u0631\\u0629\"}),!isSelected&&remainingSeals<=0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-sm\",children:\"\\u0645\\u0643\\u062A\\u0645\\u0644\"})]})},index);})}),selectedMaterials.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const totalSeals=selectedMaterials.reduce((sum,sel)=>sum+sel.seals,0);if(totalSeals!==parseInt(currentItem.quantity)){alert(\"\\u26A0\\uFE0F \\u0645\\u062C\\u0645\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\\u0627\\u062A \\u0627\\u0644\\u0645\\u062E\\u062A\\u0627\\u0631\\u0629 (\".concat(totalSeals,\") \\u0644\\u0627 \\u064A\\u0633\\u0627\\u0648\\u064A \\u0627\\u0644\\u0639\\u062F\\u062F \\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628 (\").concat(currentItem.quantity,\")\"));return;}// ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± ÙˆØ­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø±\nconfirmMultiMaterialSelection();},className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",disabled:selectedMaterials.reduce((sum,sel)=>sum+sel.seals,0)!==parseInt(currentItem.quantity),children:\"\\u062A\\u0623\\u0643\\u064A\\u062F \\u0627\\u0644\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedMaterials([]);},className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621 \\u0627\\u0644\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\"})]})]}),compatibilityResults.compatible_products.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A \\u0627\\u0644\\u062C\\u0627\\u0647\\u0632\\u0629:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:compatibilityResults.compatible_products.map((product,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 border border-blue-300 bg-blue-50 rounded cursor-pointer hover:bg-blue-100\",onClick:()=>setSelectedMaterial({unit_code:\"FINISHED-\".concat(product.id),material_type:product.material_type,seal_type:product.seal_type,inner_diameter:product.inner_diameter,outer_diameter:product.outer_diameter,height:product.height,is_finished_product:true}),children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0646\\u0648\\u0639:\"}),\" \",product.seal_type,\" - \",product.material_type]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0645\\u0642\\u0627\\u0633:\"}),\" \",product.inner_diameter,\" \\xD7 \",product.outer_diameter,\" \\xD7 \",product.height]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629:\"}),\" \",product.quantity]})]},index))})]}),selectedMaterial&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 p-3 bg-blue-100 rounded\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold text-blue-800\",children:[\"\\u062A\\u0645 \\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629: \",selectedMaterial.unit_code,\" (\",selectedMaterial.material_type,\")\"]})})]}),items.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0623\\u062E\\u064A\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0642\\u0627\\u0633\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0633\\u0639\\u0631\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:items.map((item,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.local_product_details?item.local_product_details.product_type:item.seal_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.local_product_details?'Ù…Ø­Ù„ÙŠ':item.material_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.local_product_details?\"\".concat(item.local_product_details.product_size,\" - \").concat(item.local_product_details.product_type):\"\".concat(item.original_inner_diameter||item.inner_diameter,\" \\xD7 \").concat(item.original_outer_diameter||item.outer_diameter,\" \\xD7 \").concat(item.original_height||item.height).concat(item.original_wall_height?\" (\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629: \".concat(item.original_wall_height,\")\"):item.wall_height?\" (\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629: \".concat(item.wall_height,\")\"):'',\" \").concat(item.measurement_unit||'Ù…Ù…')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.quantity}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",item.unit_price]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",item.total_price]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editItem(index),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",title:\"\\u062A\\u062D\\u0631\\u064A\\u0631\",children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteItem(index),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",title:\"\\u062D\\u0630\\u0641\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]})})]},index))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639\"}),/*#__PURE__*/_jsxs(\"select\",{value:paymentMethod,onChange:e=>setPaymentMethod(e.target.value),className:\"p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u0646\\u0642\\u062F\\u064A\",children:\"\\u0646\\u0642\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0622\\u062C\\u0644\",children:\"\\u0622\\u062C\\u0644\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 010\",children:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 010\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0643\\u0627\\u0634 0100\",children:\"\\u0643\\u0627\\u0634 0100\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0627\\u0646\\u0633\\u062A\\u0627\\u0628\\u0627\\u064A\",children:\"\\u0627\\u0646\\u0633\\u062A\\u0627\\u0628\\u0627\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u064A\\u062F \\u0627\\u0644\\u0635\\u0627\\u0648\\u064A\",children:\"\\u064A\\u062F \\u0627\\u0644\\u0635\\u0627\\u0648\\u064A\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 p-4 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0635\\u0645\"}),/*#__PURE__*/_jsxs(\"select\",{value:discountType,onChange:e=>setDiscountType(e.target.value),className:\"p-2 border border-gray-300 rounded w-full\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"amount\",children:\"\\u0645\\u0628\\u0644\\u063A \\u062B\\u0627\\u0628\\u062A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"percentage\",children:\"\\u0646\\u0633\\u0628\\u0629 \\u0645\\u0626\\u0648\\u064A\\u0629\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium mb-1\",children:[\"\\u0642\\u064A\\u0645\\u0629 \\u0627\\u0644\\u062E\\u0635\\u0645 \",discountType==='percentage'?'(%)':'(Ø¬.Ù…)']}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:discount,onChange:e=>setDiscount(e.target.value),className:\"p-2 border border-gray-300 rounded w-full\",placeholder:\"0\",min:\"0\",step:discountType==='percentage'?'0.1':'0.01'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u062E\\u0635\\u0645\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-white border border-gray-300 rounded w-full\",children:[\"\\u062C.\\u0645 \",(()=>{const subtotal=items.reduce((sum,item)=>sum+item.total_price,0);const discountAmount=discountType==='percentage'?subtotal*parseFloat(discount||0)/100:parseFloat(discount||0);return discountAmount.toFixed(2);})()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 bg-blue-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639 \\u0627\\u0644\\u0641\\u0631\\u0639\\u064A:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg font-semibold\",children:[\"\\u062C.\\u0645 \",items.reduce((sum,item)=>sum+item.total_price,0).toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:\"\\u0627\\u0644\\u062E\\u0635\\u0645:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg font-semibold text-red-600\",children:[\"- \\u062C.\\u0645 \",(()=>{const subtotal=items.reduce((sum,item)=>sum+item.total_price,0);const discountAmount=discountType==='percentage'?subtotal*parseFloat(discount||0)/100:parseFloat(discount||0);return discountAmount.toFixed(2);})()]})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl font-bold\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0646\\u0647\\u0627\\u0626\\u064A:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xl font-bold text-green-600\",children:[\"\\u062C.\\u0645 \",(()=>{const subtotal=items.reduce((sum,item)=>sum+item.total_price,0);const discountAmount=discountType==='percentage'?subtotal*parseFloat(discount||0)/100:parseFloat(discount||0);return(subtotal-discountAmount).toFixed(2);})()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xl font-bold\",style:{display:'none'},children:[\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A: \\u062C.\\u0645 \",items.reduce((sum,item)=>sum+item.total_price,0).toFixed(2)]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:createInvoice,disabled:isCreatingInvoice,className:\"w-full p-3 rounded mt-4 text-lg font-semibold \".concat(isCreatingInvoice?'bg-gray-400 text-gray-600 cursor-not-allowed':'bg-green-500 text-white hover:bg-green-600'),children:isCreatingInvoice?'Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©...':'Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©'})]})]});};// Simple placeholder components for other pages\n// Inventory Component will be replaced with new advanced version above\n// Stock Component (Old Inventory functionality for Raw Materials and Finished Products)\nconst Stock=()=>{const[rawMaterials,setRawMaterials]=useState([]);const[finishedProducts,setFinishedProducts]=useState([]);const[searchTerm,setSearchTerm]=useState('');// Ù„Ù„Ø¨Ø­Ø«\nconst[newRawMaterial,setNewRawMaterial]=useState({material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',pieces_count:'',cost_per_mm:''});const[newFinishedProduct,setNewFinishedProduct]=useState({seal_type:'RSL',material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',quantity:'',unit_price:''});const materialTypes=['NBR','BUR','BT','VT','BOOM'];const sealTypes=['RSL','RS','RSS','RSE','B17','B3','B14','B1','R15','R17','W1','W4','W5','W11','WBT','XR','CH','VR'];// Ø¯Ø§Ù„Ø© ØªØµÙÙŠØ© Ø§Ù„Ø¨Ø­Ø«\nconst filteredRawMaterials=rawMaterials.filter(material=>material.material_type.toLowerCase().includes(searchTerm.toLowerCase())||material.unit_code.toLowerCase().includes(searchTerm.toLowerCase())||material.inner_diameter.toString().includes(searchTerm)||material.outer_diameter.toString().includes(searchTerm)||material.height.toString().includes(searchTerm)).sort((a,b)=>{// ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\nconst materialPriority={'BUR':1,'NBR':2,'BT':3,'BOOM':4,'VT':5};const aPriority=materialPriority[a.material_type]||6;const bPriority=materialPriority[b.material_type]||6;if(aPriority!==bPriority){return aPriority-bPriority;}// Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)\nif(a.inner_diameter!==b.inner_diameter){return a.inner_diameter-b.inner_diameter;}return a.outer_diameter-b.outer_diameter;});const filteredFinishedProducts=finishedProducts.filter(product=>product.seal_type.toLowerCase().includes(searchTerm.toLowerCase())||product.material_type.toLowerCase().includes(searchTerm.toLowerCase())||product.inner_diameter.toString().includes(searchTerm)||product.outer_diameter.toString().includes(searchTerm)||product.height.toString().includes(searchTerm)).sort((a,b)=>{// ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\nconst materialPriority={'BUR':1,'NBR':2,'BT':3,'BOOM':4,'VT':5};const aPriority=materialPriority[a.material_type]||6;const bPriority=materialPriority[b.material_type]||6;if(aPriority!==bPriority){return aPriority-bPriority;}// Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)\nif(a.inner_diameter!==b.inner_diameter){return a.inner_diameter-b.inner_diameter;}return a.outer_diameter-b.outer_diameter;});useEffect(()=>{fetchRawMaterials();fetchFinishedProducts();},[]);const fetchRawMaterials=async()=>{try{const response=await axios.get(\"\".concat(API,\"/raw-materials\"));setRawMaterials(response.data);}catch(error){console.error('Error fetching raw materials:',error);}};const fetchFinishedProducts=async()=>{try{const response=await axios.get(\"\".concat(API,\"/finished-products\"));setFinishedProducts(response.data);}catch(error){console.error('Error fetching finished products:',error);}};const addRawMaterial=async()=>{if(!newRawMaterial.inner_diameter||!newRawMaterial.outer_diameter||!newRawMaterial.height||!newRawMaterial.pieces_count||!newRawMaterial.cost_per_mm){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{const rawMaterial={material_type:newRawMaterial.material_type,inner_diameter:parseFloat(newRawMaterial.inner_diameter),outer_diameter:parseFloat(newRawMaterial.outer_diameter),height:parseFloat(newRawMaterial.height),pieces_count:parseInt(newRawMaterial.pieces_count),cost_per_mm:parseFloat(newRawMaterial.cost_per_mm)// unit_code will be generated automatically by backend\n};let response;if(newRawMaterial.id){// Update existing material\nresponse=await axios.put(\"\".concat(API,\"/raw-materials/\").concat(newRawMaterial.id),rawMaterial);alert(\"\\u062A\\u0645 \\u062A\\u062D\\u062F\\u064A\\u062B \\u0627\\u0644\\u0645\\u0627\\u062F\\u0629 \\u0627\\u0644\\u062E\\u0627\\u0645 \\u0628\\u0646\\u062C\\u0627\\u062D. \\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629: \".concat(response.data.unit_code));}else{// Add new material\nresponse=await axios.post(\"\".concat(API,\"/raw-materials\"),rawMaterial);alert(\"\\u062A\\u0645 \\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0627\\u062F\\u0629 \\u0627\\u0644\\u062E\\u0627\\u0645 \\u0628\\u0646\\u062C\\u0627\\u062D. \\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629: \".concat(response.data.unit_code));}fetchRawMaterials();setNewRawMaterial({material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',pieces_count:'',cost_per_mm:''});}catch(error){var _error$response9,_error$response9$data;console.error('Error saving raw material:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…: '+(((_error$response9=error.response)===null||_error$response9===void 0?void 0:(_error$response9$data=_error$response9.data)===null||_error$response9$data===void 0?void 0:_error$response9$data.detail)||error.message));}};const clearAllRawMaterials=async()=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…ØŸ')){return;}try{await axios.delete(\"\".concat(API,\"/raw-materials/clear-all\"));fetchRawMaterials();alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…');}catch(error){console.error('Error clearing raw materials:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…');}};const deleteRawMaterial=async materialId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…ØŸ')){return;}try{await axios.delete(\"\".concat(API,\"/raw-materials/\").concat(materialId));fetchRawMaterials();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…');}catch(error){console.error('Error deleting raw material:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…');}};const editRawMaterial=material=>{// Fill the form with the material data for editing\nsetNewRawMaterial({id:material.id,material_type:material.material_type,inner_diameter:material.inner_diameter.toString(),outer_diameter:material.outer_diameter.toString(),height:material.height.toString(),pieces_count:material.pieces_count.toString(),cost_per_mm:material.cost_per_mm.toString()});};const handleFileImport=async event=>{const file=event.target.files[0];if(!file)return;const formData=new FormData();formData.append('file',file);try{const response=await axios.post(\"\".concat(API,\"/excel/import/raw-materials\"),formData,{headers:{'Content-Type':'multipart/form-data'}});alert(response.data.message);fetchRawMaterials();// Refresh the raw materials list\nevent.target.value='';// Clear file input\n}catch(error){var _error$response10,_error$response10$dat;console.error('Error importing file:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù: '+(((_error$response10=error.response)===null||_error$response10===void 0?void 0:(_error$response10$dat=_error$response10.data)===null||_error$response10$dat===void 0?void 0:_error$response10$dat.detail)||error.message));}};const handleFileExport=async()=>{try{const response=await axios.get(\"\".concat(API,\"/excel/export/raw-materials\"),{responseType:'blob'});// Create download link\nconst url=window.URL.createObjectURL(new Blob([response.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download',\"raw_materials_export_\".concat(new Date().toISOString().split('T')[0],\".xlsx\"));document.body.appendChild(link);link.click();document.body.removeChild(link);window.URL.revokeObjectURL(url);}catch(error){console.error('Error exporting file:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù');}};const addFinishedProduct=async()=>{if(!newFinishedProduct.inner_diameter||!newFinishedProduct.outer_diameter||!newFinishedProduct.height||!newFinishedProduct.quantity||!newFinishedProduct.unit_price){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{const finishedProduct={seal_type:newFinishedProduct.seal_type,material_type:newFinishedProduct.material_type,inner_diameter:parseFloat(newFinishedProduct.inner_diameter),outer_diameter:parseFloat(newFinishedProduct.outer_diameter),height:parseFloat(newFinishedProduct.height),quantity:parseInt(newFinishedProduct.quantity),unit_price:parseFloat(newFinishedProduct.unit_price)};if(newFinishedProduct.id){// Update existing product\nawait axios.put(\"\".concat(API,\"/finished-products/\").concat(newFinishedProduct.id),finishedProduct);alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¨Ù†Ø¬Ø§Ø­');}else{// Add new product\nawait axios.post(\"\".concat(API,\"/finished-products\"),finishedProduct);alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¨Ù†Ø¬Ø§Ø­');}fetchFinishedProducts();setNewFinishedProduct({seal_type:'RSL',material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',quantity:'',unit_price:''});}catch(error){console.error('Error saving finished product:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ');}};const editFinishedProduct=product=>{// Fill the form with the product data for editing\nsetNewFinishedProduct({id:product.id,seal_type:product.seal_type,material_type:product.material_type,inner_diameter:product.inner_diameter.toString(),outer_diameter:product.outer_diameter.toString(),height:product.height.toString(),quantity:product.quantity.toString(),unit_price:product.unit_price.toString()});};const deleteFinishedProduct=async productId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØŸ')){return;}try{await axios.delete(\"\".concat(API,\"/finished-products/\").concat(productId));fetchFinishedProducts();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ');}catch(error){console.error('Error deleting finished product:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-6\",children:\"\\u0645\\u062E\\u0632\\u0646 \\u0625\\u0646\\u062A\\u0627\\u062C\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:\"\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u062E\\u0627\\u0645\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:/*#__PURE__*/_jsx(\"button\",{onClick:clearAllRawMaterials,className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg mb-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-4\",children:\"\\uD83D\\uDCC1 \\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0648\\u062A\\u0635\\u062F\\u064A\\u0631 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u062E\\u0627\\u0645\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-4 items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 cursor-pointer\",children:[\"\\uD83D\\uDCE4 \\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0645\\u0646 Excel\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".xlsx,.xls\",onChange:handleFileImport,className:\"hidden\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"(.xlsx \\u0623\\u0648 .xls)\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleFileExport,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\uD83D\\uDCE5 \\u062A\\u0635\\u062F\\u064A\\u0631 \\u0625\\u0644\\u0649 Excel\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600 bg-white p-2 rounded border\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u062A\\u0646\\u0633\\u064A\\u0642 \\u0627\\u0644\\u0645\\u0644\\u0641 \\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628:\"}),/*#__PURE__*/_jsx(\"br\",{}),\"material_type, inner_diameter, outer_diameter, height, pieces_count, unit_code, cost_per_mm\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"select\",{value:newRawMaterial.material_type,onChange:e=>setNewRawMaterial(_objectSpread(_objectSpread({},newRawMaterial),{},{material_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:materialTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newRawMaterial.inner_diameter,onChange:e=>setNewRawMaterial(_objectSpread(_objectSpread({},newRawMaterial),{},{inner_diameter:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newRawMaterial.outer_diameter,onChange:e=>setNewRawMaterial(_objectSpread(_objectSpread({},newRawMaterial),{},{outer_diameter:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 (\\u0645\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newRawMaterial.height,onChange:e=>setNewRawMaterial(_objectSpread(_objectSpread({},newRawMaterial),{},{height:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0642\\u0637\\u0639\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newRawMaterial.pieces_count,onChange:e=>setNewRawMaterial(_objectSpread(_objectSpread({},newRawMaterial),{},{pieces_count:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0644\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newRawMaterial.cost_per_mm,onChange:e=>setNewRawMaterial(_objectSpread(_objectSpread({},newRawMaterial),{},{cost_per_mm:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-4\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0629: \\u0633\\u064A\\u062A\\u0645 \\u062A\\u0648\\u0644\\u064A\\u062F \\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629 \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0627\\u064B \\u062D\\u0633\\u0628 \\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629 \\u0648\\u0627\\u0644\\u0645\\u0648\\u0627\\u0635\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:addRawMaterial,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0627\\u062F\\u0629 \\u062E\\u0627\\u0645\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"\\u0628\\u062D\\u062B \\u0641\\u064A \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u062E\\u0627\\u0645 (\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\\u060C \\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629\\u060C \\u0627\\u0644\\u0645\\u0642\\u0627\\u0633\\u0627\\u062A...)\",className:\"w-full p-3 border border-gray-300 rounded-lg\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0642\\u0637\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0644\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredRawMaterials.map(material=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.material_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.inner_diameter}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.outer_diameter}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.height}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.pieces_count}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.unit_code}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.cost_per_mm}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editRawMaterial(material),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",title:\"\\u062A\\u062D\\u0631\\u064A\\u0631\",children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteRawMaterial(material.id),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",title:\"\\u062D\\u0630\\u0641\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]})})]},material.id))})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0627\\u0644\\u0625\\u0646\\u062A\\u0627\\u062C \\u0627\\u0644\\u062A\\u0627\\u0645\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"select\",{value:newFinishedProduct.seal_type,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{seal_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:sealTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"select\",{value:newFinishedProduct.material_type,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{material_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:materialTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newFinishedProduct.inner_diameter,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{inner_diameter:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newFinishedProduct.outer_diameter,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{outer_diameter:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newFinishedProduct.height,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{height:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newFinishedProduct.quantity,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{quantity:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newFinishedProduct.unit_price,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{unit_price:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addFinishedProduct,className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0646\\u062A\\u062C \\u0646\\u0647\\u0627\\u0626\\u064A\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredFinishedProducts.map(product=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.seal_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.material_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.inner_diameter}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.outer_diameter}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.height}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.quantity}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.unit_price}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editFinishedProduct(product),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",title:\"\\u062A\\u062D\\u0631\\u064A\\u0631\",children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteFinishedProduct(product.id),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",title:\"\\u062D\\u0630\\u0641\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]})})]},product.id))})]})})]})]});};// Deferred Payments Component\nconst Deferred=()=>{var _selectedInvoice$rema;const[unpaidInvoices,setUnpaidInvoices]=useState([]);const[customers,setCustomers]=useState([]);const[selectedInvoice,setSelectedInvoice]=useState(null);const[paymentAmount,setPaymentAmount]=useState('');const[paymentMethod,setPaymentMethod]=useState('Ù†Ù‚Ø¯ÙŠ');const[paymentNotes,setPaymentNotes]=useState('');const[searchTerm,setSearchTerm]=useState('');// Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª Ù„ÙƒÙ„ Ø¹Ù…ÙŠÙ„\nconst[customerTotals,setCustomerTotals]=useState({});useEffect(()=>{fetchUnpaidInvoices();fetchCustomers();},[]);useEffect(()=>{// Ø­Ø³Ø§Ø¨ Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\nconst totals={};filteredInvoices.forEach(invoice=>{const customerName=invoice.customer_name;if(!totals[customerName]){totals[customerName]={totalAmount:0,invoiceCount:0};}totals[customerName].totalAmount+=invoice.remaining_amount||invoice.total_amount;totals[customerName].invoiceCount+=1;});setCustomerTotals(totals);},[unpaidInvoices,searchTerm]);// ÙÙ„ØªØ±Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø­Ø³Ø¨ Ø§Ù„Ø¨Ø­Ø«\nconst filteredInvoices=unpaidInvoices.filter(invoice=>invoice.customer_name.toLowerCase().includes(searchTerm.toLowerCase())||invoice.invoice_number.toLowerCase().includes(searchTerm.toLowerCase())||invoice.invoice_title&&invoice.invoice_title.toLowerCase().includes(searchTerm.toLowerCase()));useEffect(()=>{fetchUnpaidInvoices();fetchCustomers();},[]);const fetchUnpaidInvoices=async()=>{try{const response=await axios.get(\"\".concat(API,\"/invoices\"));const invoices=response.data.filter(invoice=>// ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¢Ø¬Ù„Ø© Ø£Ùˆ Ù„Ù‡Ø§ Ù…Ø¨Ù„Øº Ù…Ø³ØªØ­Ù‚\n(invoice.payment_method==='Ø¢Ø¬Ù„'||invoice.remaining_amount>0)&&(invoice.status==='ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©'||invoice.status==='Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹'||invoice.status==='Ø§Ù†ØªØ¸Ø§Ø±'||invoice.remaining_amount>0));setUnpaidInvoices(invoices);}catch(error){console.error('Error fetching unpaid invoices:',error);}};const fetchCustomers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/customers\"));// Sort customers alphabetically by name\nconst sortedCustomers=(response.data||[]).sort((a,b)=>a.name.localeCompare(b.name,'ar'));setCustomers(sortedCustomers);}catch(error){console.error('Error fetching customers:',error);}};const getCustomerName=customerId=>{const customer=customers.find(c=>c.id===customerId);return customer?customer.name:'Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…Ø­Ø¯Ø¯';};const makePayment=async()=>{if(!selectedInvoice||!paymentAmount){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙˆØ¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº');return;}if(parseFloat(paymentAmount)>selectedInvoice.remaining_amount){alert('Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯Ø®Ù„ Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚');return;}try{await axios.post(\"\".concat(API,\"/payments\"),{invoice_id:selectedInvoice.id,amount:parseFloat(paymentAmount),payment_method:paymentMethod,notes:paymentNotes});setPaymentAmount('');setPaymentNotes('');setSelectedInvoice(null);fetchUnpaidInvoices();alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø© Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error making payment:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø©');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row md:items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-blue-600 mb-2 md:mb-0\",children:\"\\u0627\\u0644\\u0622\\u062C\\u0644 - \\u0645\\u062A\\u0627\\u0628\\u0639\\u0629 \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"border border-gray-300 rounded px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"\\u064A\\u0648\\u0645\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0623\\u0633\\u0628\\u0648\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0634\\u0647\\u0631\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0633\\u0646\\u0648\\u064A\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0628\\u062D\\u062B \\u0628\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0623\\u0648 \\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0623\\u0648 \\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\"})}),Object.keys(customerTotals).length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3\",children:Object.entries(customerTotals).map(_ref3=>{let[customerName,totals]=_ref3;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-3 rounded border text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold text-blue-800 text-sm\",children:customerName}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-blue-600\",children:[totals.invoiceCount,\" \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-bold text-green-600\",children:[totals.totalAmount.toFixed(2),\" \\u062C.\\u0645\"]})]},customerName);})})]}),selectedInvoice&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u062A\\u0633\\u062C\\u064A\\u0644 \\u062F\\u0641\\u0639\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:selectedInvoice.invoice_number,disabled:true,className:\"w-full p-2 border border-gray-300 rounded bg-gray-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:selectedInvoice.customer_name,disabled:true,className:\"w-full p-2 border border-gray-300 rounded bg-gray-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:\"\\u062C.\\u0645 \".concat(((_selectedInvoice$rema=selectedInvoice.remaining_amount)===null||_selectedInvoice$rema===void 0?void 0:_selectedInvoice$rema.toFixed(2))||'0.00'),disabled:true,className:\"w-full p-2 border border-gray-300 rounded bg-gray-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u062F\\u0641\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:paymentAmount,onChange:e=>setPaymentAmount(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"0.00\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639\"}),/*#__PURE__*/_jsxs(\"select\",{value:paymentMethod,onChange:e=>setPaymentMethod(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u0646\\u0642\\u062F\\u064A\",children:\"\\u0646\\u0642\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 010\",children:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 010\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0643\\u0627\\u0634 0100\",children:\"\\u0643\\u0627\\u0634 0100\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0627\\u0646\\u0633\\u062A\\u0627\\u0628\\u0627\\u064A\",children:\"\\u0627\\u0646\\u0633\\u062A\\u0627\\u0628\\u0627\\u064A\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:paymentNotes,onChange:e=>setPaymentNotes(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0625\\u0636\\u0627\\u0641\\u064A\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:makePayment,className:\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\",children:\"\\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u062F\\u0641\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedInvoice(null),className:\"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u063A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u0633\\u062F\\u062F\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredInvoices.map(invoice=>{var _invoice$total_amount,_invoice$paid_amount,_invoice$remaining_am;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.invoice_number}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.customer_name}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(invoice.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",((_invoice$total_amount=invoice.total_amount)===null||_invoice$total_amount===void 0?void 0:_invoice$total_amount.toFixed(2))||'0.00']}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",((_invoice$paid_amount=invoice.paid_amount)===null||_invoice$paid_amount===void 0?void 0:_invoice$paid_amount.toFixed(2))||'0.00']}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold text-red-600\",children:[\"\\u062C.\\u0645 \",((_invoice$remaining_am=invoice.remaining_amount)===null||_invoice$remaining_am===void 0?void 0:_invoice$remaining_am.toFixed(2))||'0.00']})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm \".concat(invoice.status==='ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©'?'bg-red-100 text-red-800':invoice.status==='Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹'?'bg-yellow-100 text-yellow-800':'bg-green-100 text-green-800'),children:invoice.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedInvoice(invoice),className:\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\",children:\"\\u0639\\u0631\\u0636 \\u0627\\u0644\\u062F\\u0641\\u0639\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedInvoice(invoice),className:\"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600\",children:\"\\u062F\\u0641\\u0639\"})]})})]},invoice.id);})})]}),filteredInvoices.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u063A\\u064A\\u0631 \\u0645\\u0633\\u062F\\u062F\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 p-4 rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-red-800\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u0627\\u0644\\u063A \\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\\u0629\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-red-600\",children:[\"\\u062C.\\u0645 \",filteredInvoices.reduce((sum,inv)=>sum+(inv.remaining_amount||0),0).toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 p-4 rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-yellow-800\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u0639\\u0644\\u0642\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-yellow-600\",children:filteredInvoices.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-4 rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-blue-800\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u0623\\u0635\\u0644\\u064A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-blue-600\",children:[\"\\u062C.\\u0645 \",filteredInvoices.reduce((sum,inv)=>sum+(inv.total_amount||0),0).toFixed(2)]})]})]})]})]});};// Expenses Component\nconst Expenses=()=>{const[expenses,setExpenses]=useState([]);const[newExpense,setNewExpense]=useState({description:'',amount:'',category:'Ø®Ø§Ù…Ø§Øª'});const expenseCategories=['Ø®Ø§Ù…Ø§Øª','Ø±ÙˆØ§ØªØ¨','ÙƒÙ‡Ø±Ø¨Ø§Ø¡','ØµÙŠØ§Ù†Ø©','Ø£Ø®Ø±Ù‰'];useEffect(()=>{fetchExpenses();},[]);const fetchExpenses=async()=>{try{const response=await axios.get(\"\".concat(API,\"/expenses\"));setExpenses(response.data);}catch(error){console.error('Error fetching expenses:',error);}};const addExpense=async()=>{if(!newExpense.description||!newExpense.amount){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{await axios.post(\"\".concat(API,\"/expenses\"),_objectSpread(_objectSpread({},newExpense),{},{amount:parseFloat(newExpense.amount)}));setNewExpense({description:'',amount:'',category:'Ø®Ø§Ù…Ø§Øª'});fetchExpenses();alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ØµØ±ÙˆÙ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error adding expense:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ØµØ±ÙˆÙ');}};const deleteExpense=async expenseId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ØµØ±ÙˆÙØŸ'))return;try{await axios.delete(\"\".concat(API,\"/expenses/\").concat(expenseId));fetchExpenses();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ØµØ±ÙˆÙ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error deleting expense:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ØµØ±ÙˆÙ');}};const getTotalExpenses=()=>{return expenses.reduce((sum,expense)=>sum+expense.amount,0);};const getExpensesByCategory=()=>{const byCategory={};expenseCategories.forEach(cat=>{byCategory[cat]=expenses.filter(exp=>exp.category===cat).reduce((sum,exp)=>sum+exp.amount,0);});return byCategory;};const clearAllExpenses=async()=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§ØªØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.'))return;try{await axios.delete(\"\".concat(API,\"/expenses/clear-all\"));fetchExpenses();alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª');}catch(error){console.error('Error clearing expenses:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-4\",children:\"\\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:clearAllExpenses,className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchExpenses,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"border border-gray-300 rounded px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"\\u064A\\u0648\\u0645\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0623\\u0633\\u0628\\u0648\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0634\\u0647\\u0631\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0633\\u0646\\u0648\\u064A\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0635\\u0631\\u0648\\u0641 \\u062C\\u062F\\u064A\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0648\\u0635\\u0641 \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newExpense.description,onChange:e=>setNewExpense(_objectSpread(_objectSpread({},newExpense),{},{description:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0645\\u062B\\u0627\\u0644: \\u0634\\u0631\\u0627\\u0621 \\u062E\\u0627\\u0645\\u0627\\u062A\\u060C \\u0643\\u0647\\u0631\\u0628\\u0627\\u0621 \\u0627\\u0644\\u0645\\u0635\\u0646\\u0639\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newExpense.amount,onChange:e=>setNewExpense(_objectSpread(_objectSpread({},newExpense),{},{amount:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"0.00\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0641\\u0626\\u0629\"}),/*#__PURE__*/_jsx(\"select\",{value:newExpense.category,onChange:e=>setNewExpense(_objectSpread(_objectSpread({},newExpense),{},{category:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:expenseCategories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category,children:category},category))})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addExpense,className:\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 p-6 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-red-800 mb-2\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-red-600\",children:[\"\\u062C.\\u0645 \",getTotalExpenses().toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-6 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-blue-800 mb-2\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-blue-600\",children:expenses.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 p-6 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-yellow-800 mb-2\",children:\"\\u0645\\u062A\\u0648\\u0633\\u0637 \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-yellow-600\",children:[\"\\u062C.\\u0645 \",expenses.length>0?(getTotalExpenses()/expenses.length).toFixed(2):'0.00']})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A \\u062D\\u0633\\u0628 \\u0627\\u0644\\u0641\\u0626\\u0629\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\",children:Object.entries(getExpensesByCategory()).map(_ref4=>{let[category,amount]=_ref4;return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 border rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700\",children:category}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl font-bold text-blue-600\",children:[\"\\u062C.\\u0645 \",amount.toFixed(2)]})]},category);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0648\\u0635\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0641\\u0626\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:expenses.map(expense=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:expense.description}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-red-600\",children:[\"\\u062C.\\u0645 \",expense.amount.toFixed(2)]})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm \".concat(expense.category==='Ø®Ø§Ù…Ø§Øª'?'bg-blue-100 text-blue-800':expense.category==='Ø±ÙˆØ§ØªØ¨'?'bg-green-100 text-green-800':expense.category==='ÙƒÙ‡Ø±Ø¨Ø§Ø¡'?'bg-yellow-100 text-yellow-800':expense.category==='ØµÙŠØ§Ù†Ø©'?'bg-purple-100 text-purple-800':'bg-gray-100 text-gray-800'),children:expense.category})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(expense.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteExpense(expense.id),className:\"bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641\"})})]},expense.id))})]}),expenses.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A \\u0645\\u0633\\u062C\\u0644\\u0629\"})]})]})]});};// Revenue Component\nconst Revenue=()=>{var _revenueData$total_re,_revenueData$total_ex,_revenueData$material,_revenueData$profit,_revenueData$total_re2,_revenueData$material2,_revenueData$profit2;const[revenueData,setRevenueData]=useState({total_revenue:0,total_expenses:0,material_cost:0,profit:0});const[period,setPeriod]=useState('daily');useEffect(()=>{fetchRevenueData();},[period]);const fetchRevenueData=async()=>{try{const response=await axios.get(\"\".concat(API,\"/reports/revenue?period=\").concat(period));setRevenueData(response.data);}catch(error){console.error('Error fetching revenue data:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-4\",children:\"\\u0627\\u0644\\u0625\\u064A\\u0631\\u0627\\u062F\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchRevenueData,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"select\",{value:period,onChange:e=>setPeriod(e.target.value),className:\"border border-gray-300 rounded px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"daily\",children:\"\\u0627\\u0644\\u064A\\u0648\\u0645\"}),/*#__PURE__*/_jsx(\"option\",{value:\"weekly\",children:\"\\u0627\\u0644\\u0623\\u0633\\u0628\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"option\",{value:\"monthly\",children:\"\\u0627\\u0644\\u0634\\u0647\\u0631\"}),/*#__PURE__*/_jsx(\"option\",{value:\"yearly\",children:\"\\u0627\\u0644\\u0633\\u0646\\u0629\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-green-800 text-center mb-2\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0625\\u064A\\u0631\\u0627\\u062F\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-green-600 text-center\",children:[\"\\u062C.\\u0645 \",((_revenueData$total_re=revenueData.total_revenue)===null||_revenueData$total_re===void 0?void 0:_revenueData$total_re.toFixed(2))||'0.00']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-red-800 text-center mb-2\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-red-600 text-center\",children:[\"\\u062C.\\u0645 \",((_revenueData$total_ex=revenueData.total_expenses)===null||_revenueData$total_ex===void 0?void 0:_revenueData$total_ex.toFixed(2))||'0.00']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-yellow-800 text-center mb-2\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-yellow-600 text-center\",children:[\"\\u062C.\\u0645 \",((_revenueData$material=revenueData.material_cost)===null||_revenueData$material===void 0?void 0:_revenueData$material.toFixed(2))||'0.00']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-blue-800 text-center mb-2\",children:\"\\u0635\\u0627\\u0641\\u064A \\u0627\\u0644\\u0631\\u0628\\u062D\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-center \".concat((revenueData.profit||0)>=0?'text-blue-600':'text-red-600'),children:[\"\\u062C.\\u0645 \",((_revenueData$profit=revenueData.profit)===null||_revenueData$profit===void 0?void 0:_revenueData$profit.toFixed(2))||'0.00']})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mt-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold mb-4\",children:[\"\\u062A\\u0642\\u0631\\u064A\\u0631 \\u0627\\u0644\\u0625\\u064A\\u0631\\u0627\\u062F\\u0627\\u062A - \",period==='daily'?'ÙŠÙˆÙ…ÙŠ':period==='weekly'?'Ø£Ø³Ø¨ÙˆØ¹ÙŠ':period==='monthly'?'Ø´Ù‡Ø±ÙŠ':'Ø³Ù†ÙˆÙŠ']}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3\",children:\"\\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A (\\u062C.\\u0645)\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3\",children:\"\\u0627\\u0644\\u0646\\u0633\\u0628\\u0629 \\u0627\\u0644\\u0645\\u0626\\u0648\\u064A\\u0629\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3 font-semibold\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0625\\u064A\\u0631\\u0627\\u062F\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3 text-green-600 font-bold\",children:((_revenueData$total_re2=revenueData.total_revenue)===null||_revenueData$total_re2===void 0?void 0:_revenueData$total_re2.toFixed(2))||'0.00'}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3\",children:\"100%\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3 text-yellow-600 font-semibold\",children:[\"-\",((_revenueData$material2=revenueData.material_cost)===null||_revenueData$material2===void 0?void 0:_revenueData$material2.toFixed(2))||'0.00']}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3\",children:[revenueData.total_revenue>0?(revenueData.material_cost/revenueData.total_revenue*100).toFixed(1):'0.0',\"%\"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3\",children:\"\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A \\u0623\\u062E\\u0631\\u0649\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3 text-red-600 font-semibold\",children:[\"-\",((revenueData.total_expenses||0)-(revenueData.material_cost||0)).toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3\",children:[revenueData.total_revenue>0?((revenueData.total_expenses-revenueData.material_cost)/revenueData.total_revenue*100).toFixed(1):'0.0',\"%\"]})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-blue-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3 font-bold\",children:\"\\u0635\\u0627\\u0641\\u064A \\u0627\\u0644\\u0631\\u0628\\u062D\"}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3 font-bold \".concat((revenueData.profit||0)>=0?'text-blue-600':'text-red-600'),children:((_revenueData$profit2=revenueData.profit)===null||_revenueData$profit2===void 0?void 0:_revenueData$profit2.toFixed(2))||'0.00'}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3 font-bold\",children:[revenueData.total_revenue>0?(revenueData.profit/revenueData.total_revenue*100).toFixed(1):'0.0',\"%\"]})]})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mt-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0645\\u0624\\u0634\\u0631\\u0627\\u062A \\u0627\\u0644\\u0623\\u062F\\u0627\\u0621\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 border rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-2\",children:\"\\u0647\\u0627\\u0645\\u0634 \\u0627\\u0644\\u0631\\u0628\\u062D\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold \".concat((revenueData.profit||0)>=0?'text-green-600':'text-red-600'),children:[revenueData.total_revenue>0?(revenueData.profit/revenueData.total_revenue*100).toFixed(1):'0.0',\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 border rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-2\",children:\"\\u0646\\u0633\\u0628\\u0629 \\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-yellow-600\",children:[revenueData.total_revenue>0?(revenueData.material_cost/revenueData.total_revenue*100).toFixed(1):'0.0',\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 border rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-2\",children:\"\\u0646\\u0633\\u0628\\u0629 \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A \\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-red-600\",children:[revenueData.total_revenue>0?(revenueData.total_expenses/revenueData.total_revenue*100).toFixed(1):'0.0',\"%\"]})]})]})]})]});};// Invoices Component\nconst Invoices=()=>{const{user}=useAuth();const[invoices,setInvoices]=useState([]);const[customers,setCustomers]=useState([]);const[filterStatus,setFilterStatus]=useState('');const[searchTerm,setSearchTerm]=useState('');const[editingInvoice,setEditingInvoice]=useState(null);const[editForm,setEditForm]=useState({invoice_title:'',supervisor_name:'',customer_name:'',payment_method:'Ù†Ù‚Ø¯ÙŠ',discount_type:'amount',discount_value:0,items:[],notes:''});// Password protection states\nconst[showPasswordModal,setShowPasswordModal]=useState(false);const[operationPassword,setOperationPassword]=useState('');const[pendingOperation,setPendingOperation]=useState(null);// {type: 'cancel'|'edit'|'changePayment', data: ...}\nuseEffect(()=>{fetchInvoices();fetchCustomers();},[]);const fetchInvoices=async()=>{try{console.log('Fetching invoices...');const response=await axios.get(\"\".concat(API,\"/invoices\"));console.log('Invoices fetched:',response.data.length,'invoices');setInvoices(response.data);}catch(error){var _error$response11,_error$response11$dat;console.error('Error fetching invoices:',error);alert('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙˆØ§ØªÙŠØ±: '+(((_error$response11=error.response)===null||_error$response11===void 0?void 0:(_error$response11$dat=_error$response11.data)===null||_error$response11$dat===void 0?void 0:_error$response11$dat.detail)||error.message));}};const fetchCustomers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/customers\"));// Sort customers alphabetically by name\nconst sortedCustomers=(response.data||[]).sort((a,b)=>a.name.localeCompare(b.name,'ar'));setCustomers(sortedCustomers);}catch(error){console.error('Error fetching customers:',error);}};// Request password for operation\nconst requestPasswordFor=(operationType,operationData)=>{setPendingOperation({type:operationType,data:operationData});setOperationPassword('');setShowPasswordModal(true);};// Execute operation after password verification\nconst executeOperation=async()=>{if(!operationPassword){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');return;}if(!pendingOperation){alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ© Ù…Ø¹Ù„Ù‚Ø©');return;}try{if(pendingOperation.type==='cancel'){await executeCancelInvoice(pendingOperation.data,operationPassword);}else if(pendingOperation.type==='edit'){await executeUpdateInvoice(operationPassword);}else if(pendingOperation.type==='changePayment'){await executeChangePaymentMethod(pendingOperation.data.invoiceId,pendingOperation.data.newMethod,operationPassword);}setShowPasswordModal(false);setPendingOperation(null);setOperationPassword('');}catch(error){var _error$response12,_error$response12$dat;console.error('Operation error:',error);alert(((_error$response12=error.response)===null||_error$response12===void 0?void 0:(_error$response12$dat=_error$response12.data)===null||_error$response12$dat===void 0?void 0:_error$response12$dat.detail)||error.message||'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');}};// Execute cancel with password\nconst executeCancelInvoice=async(invoiceId,password)=>{const response=await axios.delete(\"\".concat(API,\"/invoices/\").concat(invoiceId,\"/cancel\"),{params:{password:password,username:user===null||user===void 0?void 0:user.username}});alert(response.data.message);fetchInvoices();};// Execute update with password\nconst executeUpdateInvoice=async password=>{const response=await axios.put(\"\".concat(API,\"/invoices/\").concat(editingInvoice),editForm,{params:{password:password}});alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');setEditingInvoice(null);fetchInvoices();};// Execute change payment method with password\nconst executeChangePaymentMethod=async(invoiceId,newMethod,password)=>{await axios.put(\"\".concat(API,\"/invoices/\").concat(invoiceId,\"/change-payment-method\"),null,{params:{new_payment_method:newMethod,password:password}});alert('ØªÙ… ØªØºÙŠÙŠØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ø¨Ù†Ø¬Ø§Ø­');fetchInvoices();};// Change payment method function\nconst changePaymentMethod=async invoiceId=>{const paymentMethods=[{value:'Ù†Ù‚Ø¯ÙŠ',label:'Ù†Ù‚Ø¯ÙŠ'},{value:'Ø¢Ø¬Ù„',label:'Ø¢Ø¬Ù„'},{value:'ÙÙˆØ¯Ø§ÙÙˆÙ† 010',label:'ÙÙˆØ¯Ø§ÙÙˆÙ† 010'},{value:'ÙƒØ§Ø´ 0100',label:'ÙƒØ§Ø´ 0100'},{value:'Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ',label:'Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ'},{value:'ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ',label:'ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ'}];const invoice=invoices.find(inv=>inv.id===invoiceId);if(!invoice){alert('Ø§Ù„ÙØ§ØªÙˆØ±Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©');return;}// Ù…Ù†Ø¹ ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹\nif(invoice.paid_amount>0&&invoice.remaining_amount>0){alert('Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­ÙˆÙŠÙ„ Ø·Ø±ÙŠÙ‚Ø© Ø¯ÙØ¹ ÙØ§ØªÙˆØ±Ø© Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹');return;}// Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø§ÙØ°Ø© Ø­ÙˆØ§Ø± Ù…Ø®ØµØµØ© Ù„Ù„Ø§Ø®ØªÙŠØ§Ø±\nconst modalHtml=\"\\n      <div id=\\\"paymentMethodModal\\\" style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        width: 100%;\\n        height: 100%;\\n        background: rgba(0,0,0,0.5);\\n        display: flex;\\n        justify-content: center;\\n        align-items: center;\\n        z-index: 1000;\\n        direction: rtl;\\n      \\\">\\n        <div style=\\\"\\n          background: white;\\n          padding: 30px;\\n          border-radius: 10px;\\n          box-shadow: 0 4px 6px rgba(0,0,0,0.1);\\n          min-width: 400px;\\n          text-align: center;\\n        \\\">\\n          <h3 style=\\\"margin-bottom: 20px; color: #333;\\\">\\u062A\\u063A\\u064A\\u064A\\u0631 \\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639</h3>\\n          <p style=\\\"margin-bottom: 15px;\\\">\\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629: <strong>\".concat(invoice.invoice_number,\"</strong></p>\\n          <p style=\\\"margin-bottom: 20px;\\\">\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639 \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\\u0629: <strong style=\\\"color: #e74c3c;\\\">\").concat(invoice.payment_method,\"</strong></p>\\n          <div style=\\\"margin-bottom: 20px;\\\">\\n            <label style=\\\"display: block; margin-bottom: 10px; font-weight: bold;\\\">\\u0627\\u062E\\u062A\\u0631 \\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639 \\u0627\\u0644\\u062C\\u062F\\u064A\\u062F\\u0629:</label>\\n            <select id=\\\"newPaymentMethod\\\" style=\\\"\\n              width: 100%;\\n              padding: 10px;\\n              border: 2px solid #ddd;\\n              border-radius: 5px;\\n              font-size: 16px;\\n              direction: rtl;\\n            \\\">\\n              <option value=\\\"\\\">-- \\u0627\\u062E\\u062A\\u0631 \\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639 --</option>\\n              \").concat(paymentMethods.filter(method=>method.value!==invoice.payment_method).map(method=>\"<option value=\\\"\".concat(method.value,\"\\\">\").concat(method.label,\"</option>\")).join(''),\"\\n            </select>\\n          </div>\\n          <div style=\\\"display: flex; gap: 10px; justify-content: center;\\\">\\n            <button id=\\\"confirmChange\\\" style=\\\"\\n              background: #27ae60;\\n              color: white;\\n              border: none;\\n              padding: 10px 20px;\\n              border-radius: 5px;\\n              cursor: pointer;\\n              font-size: 16px;\\n            \\\">\\u062A\\u0623\\u0643\\u064A\\u062F \\u0627\\u0644\\u062A\\u063A\\u064A\\u064A\\u0631</button>\\n            <button id=\\\"cancelChange\\\" style=\\\"\\n              background: #e74c3c;\\n              color: white;\\n              border: none;\\n              padding: 10px 20px;\\n              border-radius: 5px;\\n              cursor: pointer;\\n              font-size: 16px;\\n            \\\">\\u0625\\u0644\\u063A\\u0627\\u0621</button>\\n          </div>\\n        </div>\\n      </div>\\n    \");// Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø§ÙØ°Ø© Ù„Ù„ØµÙØ­Ø©\ndocument.body.insertAdjacentHTML('beforeend',modalHtml);// Ø¥Ø¶Ø§ÙØ© Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø£Ø²Ø±Ø§Ø±\nconst modal=document.getElementById('paymentMethodModal');const selectElement=document.getElementById('newPaymentMethod');const confirmBtn=document.getElementById('confirmChange');const cancelBtn=document.getElementById('cancelChange');// Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©\nconst closeModal=()=>{if(modal&&modal.parentNode){modal.parentNode.removeChild(modal);}};// Ø²Ø± Ø§Ù„Ø¥Ù„ØºØ§Ø¡\ncancelBtn.onclick=closeModal;// Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø§ÙØ°Ø©\nmodal.onclick=e=>{if(e.target===modal){closeModal();}};// Ø²Ø± Ø§Ù„ØªØ£ÙƒÙŠØ¯\nconfirmBtn.onclick=async()=>{const newMethod=selectElement.value;if(!newMethod){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø·Ø±ÙŠÙ‚Ø© Ø¯ÙØ¹ Ø¬Ø¯ÙŠØ¯Ø©');return;}if(newMethod===invoice.payment_method){alert('Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ù‡ÙŠ Ù†ÙØ³Ù‡Ø§ Ø¨Ø§Ù„ÙØ¹Ù„');return;}if(!confirm(\"\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u062A\\u062D\\u0648\\u064A\\u0644 \\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639 \\u0645\\u0646 \\\"\".concat(invoice.payment_method,\"\\\" \\u0625\\u0644\\u0649 \\\"\").concat(newMethod,\"\\\"\\u061F\\n\\n\\u0633\\u064A\\u062A\\u0645 \\u062A\\u062D\\u062F\\u064A\\u062B \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629 \\u0648\\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\\u0627\\u062A \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0627\\u064B.\\n\\n\\u064A\\u062A\\u0637\\u0644\\u0628 \\u0643\\u0644\\u0645\\u0629 \\u0645\\u0631\\u0648\\u0631 \\u0644\\u0644\\u062A\\u0623\\u0643\\u064A\\u062F\"))){return;}closeModal();// Request password\nrequestPasswordFor('changePayment',{invoiceId,newMethod});};};// Cancel invoice function\nconst cancelInvoice=async invoiceId=>{const invoice=invoices.find(inv=>inv.id===invoiceId);if(!invoice){alert('Ø§Ù„ÙØ§ØªÙˆØ±Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©');return;}const confirmMessage=\"\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u0625\\u0644\\u063A\\u0627\\u0621 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \".concat(invoice.invoice_number,\"\\u061F\\n\\n\\u0633\\u064A\\u062A\\u0645:\\n- \\u0625\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\\u0629 \\u0625\\u0644\\u0649 \\u0627\\u0644\\u0645\\u062E\\u0632\\u0646\\n- \\u0639\\u0645\\u0644 \\u0645\\u0639\\u0627\\u0645\\u0644\\u0629 \\u0639\\u0643\\u0633\\u064A\\u0629 \\u0641\\u064A \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629\\n- \\u0646\\u0642\\u0644 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0644\\u0644\\u0645\\u062D\\u0630\\u0648\\u0641\\u0629\\n\\n\\u064A\\u062A\\u0637\\u0644\\u0628 \\u0643\\u0644\\u0645\\u0629 \\u0645\\u0631\\u0648\\u0631 \\u0644\\u0644\\u062A\\u0623\\u0643\\u064A\\u062F\");if(!confirm(confirmMessage)){return;}// Request password\nrequestPasswordFor('cancel',invoiceId);};const startEditInvoice=invoice=>{setEditingInvoice(invoice.id);setEditForm({invoice_title:invoice.invoice_title||'',supervisor_name:invoice.supervisor_name||'',customer_name:invoice.customer_name||'',payment_method:invoice.payment_method||'Ù†Ù‚Ø¯ÙŠ',discount_type:invoice.discount_type||'amount',discount_value:invoice.discount_value||0,items:invoice.items||[],notes:invoice.notes||''});};const cancelEdit=()=>{setEditingInvoice(null);setEditForm({invoice_title:'',supervisor_name:'',customer_name:'',payment_method:'Ù†Ù‚Ø¯ÙŠ',discount_type:'amount',discount_value:0,items:[],notes:''});};const saveInvoiceEdit=async()=>{if(!editForm.customer_name.trim()){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„');return;}try{console.log('Saving invoice edit for ID:',editingInvoice);console.log('Edit form data:',editForm);// Calculate totals\nconst subtotal=editForm.items.reduce((sum,item)=>sum+(item.total_price||0),0);let discountAmount=0;if(editForm.discount_type==='percentage'){discountAmount=subtotal*parseFloat(editForm.discount_value||0)/100;}else{discountAmount=parseFloat(editForm.discount_value||0);}const totalAfterDiscount=subtotal-discountAmount;const updatedInvoice=_objectSpread(_objectSpread({},editForm),{},{subtotal:subtotal,discount:discountAmount,total_after_discount:totalAfterDiscount,total_amount:totalAfterDiscount});console.log('Sending update to backend:',updatedInvoice);// Store the edit form for password-protected execution\nsetEditForm(updatedInvoice);// Request password\nrequestPasswordFor('edit',null);}catch(error){var _error$response13,_error$response14,_error$response14$dat;console.error('Error updating invoice:',error);console.error('Error response:',(_error$response13=error.response)===null||_error$response13===void 0?void 0:_error$response13.data);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ§ØªÙˆØ±Ø©: '+(((_error$response14=error.response)===null||_error$response14===void 0?void 0:(_error$response14$dat=_error$response14.data)===null||_error$response14$dat===void 0?void 0:_error$response14$dat.detail)||error.message));}};const updateInvoiceStatus=async(invoiceId,newStatus)=>{try{await axios.put(\"\".concat(API,\"/invoices/\").concat(invoiceId,\"/status\"),{status:newStatus},{headers:{'Content-Type':'application/json'}});fetchInvoices();alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©');}catch(error){console.error('Error updating invoice status:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©');}};const printInvoice=invoice=>{const printContent=\"\\n      <!DOCTYPE html>\\n      <html dir=\\\"rtl\\\">\\n      <head>\\n        <meta charset=\\\"UTF-8\\\">\\n        <style>\\n          body {\\n            font-family: Arial, sans-serif;\\n            margin: 0;\\n            padding: 20px;\\n            direction: rtl;\\n            font-size: 15px;\\n          }\\n          .header {\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n            border-bottom: 3px solid #000;\\n            padding-bottom: 10px;\\n            margin-bottom: 20px;\\n          }\\n          .company-info {\\n            text-align: right;\\n          }\\n          .company-name {\\n            font-size: 32px;\\n            font-weight: bold;\\n            color: #000;\\n            margin: 0;\\n          }\\n          .company-subtitle {\\n            font-size: 20px;\\n            margin: 5px 0;\\n            color: #666;\\n          }\\n          .company-details {\\n            font-size: 16px;\\n            margin: 2px 0;\\n            color: #333;\\n          }\\n          .logo-section {\\n            text-align: center;\\n            flex: 1;\\n          }\\n          .invoice-title {\\n            font-size: 22px;\\n            font-weight: bold;\\n            background-color: #ff4444;\\n            color: white;\\n            padding: 8px 20px;\\n            border-radius: 5px;\\n            display: inline-block;\\n            margin-bottom: 10px;\\n          }\\n          .invoice-number {\\n            font-size: 20px;\\n            font-weight: bold;\\n            color: #ff4444;\\n          }\\n          .customer-info {\\n            display: flex;\\n            justify-content: space-between;\\n            margin: 20px 0;\\n          }\\n          .customer-details {\\n            text-align: right;\\n          }\\n          .date-info {\\n            text-align: left;\\n          }\\n          .products-table {\\n            width: 100%;\\n            border-collapse: collapse;\\n            border: 2px solid #000;\\n            margin: 20px 0;\\n          }\\n          .products-table th,\\n          .products-table td {\\n            border: 1px solid #000;\\n            padding: 8px;\\n            text-align: center;\\n          }\\n          .products-table th {\\n            background-color: #f0f0f0;\\n            font-weight: bold;\\n          }\\n          .footer {\\n            margin-top: 30px;\\n            border-top: 1px solid #ccc;\\n            padding-top: 15px;\\n            display: flex;\\n            justify-content: space-between;\\n            font-size: 13px;\\n            color: #666;\\n          }\\n          .total-section {\\n            text-align: left;\\n            margin-top: 10px;\\n          }\\n          .total-amount {\\n            font-size: 20px;\\n            font-weight: bold;\\n            border: 2px solid #000;\\n            padding: 10px;\\n            display: inline-block;\\n            background-color: #f9f9f9;\\n          }\\n          @media print {\\n            body { margin: 0; padding: 10px; }\\n          }\\n        </style>\\n      </head>\\n      <body>\\n        <!-- Header Section -->\\n        <div class=\\\"header\\\">\\n          <div class=\\\"company-info\\\">\\n            <h1 class=\\\"company-name\\\">\\u0634\\u0631\\u0643\\u0629 \\u0645\\u0627\\u0633\\u062A\\u0631 \\u0633\\u064A\\u0644</h1>\\n            <p class=\\\"company-subtitle\\\">\\u062A\\u0635\\u0646\\u064A\\u0639 \\u062C\\u0645\\u064A\\u0639 \\u0623\\u0646\\u0648\\u0627\\u0639 \\u0627\\u0644\\u0623\\u0648\\u064A\\u0644 \\u0633\\u064A\\u0644</p>\\n            <p class=\\\"company-details\\\">\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0623\\u0642\\u0637\\u0627\\u0631 \\u062D\\u062A\\u0649 \\u0665\\u0660\\u0660\\u0645\\u0644</p>\\n            <p class=\\\"company-details\\\">\\u0647\\u064A\\u062F\\u0631\\u0648\\u0644\\u064A\\u0643 - \\u0646\\u064A\\u0648\\u0645\\u0627\\u062A\\u064A\\u0643</p>\\n          </div>\\n          \\n          <div class=\\\"logo-section\\\">\\n            <img src=\\\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\\\" \\n                 alt=\\\"Master Seal Logo\\\" \\n                 style=\\\"max-width: 120px; max-height: 80px; margin-bottom: 10px;\\\">\\n            <div class=\\\"invoice-title\\\">\".concat(invoice.invoice_title||'Ø¹Ø±Ø¶ Ø³Ø¹Ø±',\"</div>\\n            <div class=\\\"invoice-number\\\">\").concat(invoice.invoice_number,\"</div>\\n          </div>\\n        </div>\\n\\n        <!-- Customer and Date Info -->\\n        <div class=\\\"customer-info\\\">\\n          <div class=\\\"customer-details\\\">\\n            <p><strong>\\u0627\\u0644\\u0633\\u0627\\u062F\\u0629:</strong> \").concat(invoice.customer_name,\"</p>\\n            <p><strong>\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646:</strong> \").concat(invoice.customer_address||'........................',\"</p>\\n          </div>\\n          <div class=\\\"date-info\\\">\\n            <p><strong>\\u062A\\u062D\\u0631\\u064A\\u0631 \\u0641\\u064A:</strong> \").concat(new Date(invoice.date).toLocaleDateString('ar-EG'),\"</p>\\n            <p><strong>Date:</strong> \").concat(new Date(invoice.date).toLocaleDateString('en-GB'),\"</p>\\n          </div>\\n        </div>\\n\\n        <!-- Products Table -->\\n        <table class=\\\"products-table\\\">\\n          <thead>\\n            <tr>\\n              <th style=\\\"width: 60px;\\\">\\u0627\\u0644\\u0645\\u0633\\u0644\\u0633\\u0644<br>Item</th>\\n              <th style=\\\"width: 80px;\\\">\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629<br>QTY</th>\\n              <th style=\\\"width: 200px;\\\">Description<br>\\u0627\\u0644\\u0645\\u0648\\u0627\\u0635\\u0641\\u0627\\u062A</th>\\n              <th style=\\\"width: 100px;\\\">\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629<br>Unit Price</th>\\n              <th style=\\\"width: 100px;\\\">\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A<br>Total</th>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            \").concat(invoice.items.map((item,index)=>\"\\n              <tr>\\n                <td>\".concat(index+1,\"</td>\\n                <td>\").concat(item.quantity,\"</td>\\n                <td style=\\\"text-align: right;\\\">\\n                  \").concat(item.local_product_details?\"\".concat(item.local_product_details.product_size,\" - \").concat(item.local_product_details.product_type):\"\".concat(item.seal_type,\" - \").concat(item.material_type,\"<br>\\n                    <small>\").concat(item.inner_diameter,\" \\xD7 \").concat(item.outer_diameter,\" \\xD7 \").concat(item.height,\" \\u0645\\u0645\").concat(item.wall_height?\" (\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629: \".concat(item.wall_height,\" \\u0645\\u0645)\"):\"\",\"</small>\"),\"\\n                </td>\\n                <td>\\u062C.\\u0645 \").concat(item.unit_price.toFixed(2),\"</td>\\n                <td>\\u062C.\\u0645 \").concat(item.total_price.toFixed(2),\"</td>\\n              </tr>\\n            \")).join(''),\"\\n            <!-- Empty rows for additional items -->\\n            \").concat(Array.from({length:Math.max(0,8-invoice.items.length)},(_,i)=>\"\\n              <tr style=\\\"height: 40px;\\\">\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n              </tr>\\n            \").join(''),\"\\n          </tbody>\\n        </table>\\n\\n        <!-- Total Section -->\\n        <div class=\\\"total-section\\\">\\n          <div style=\\\"text-align: left; margin-bottom: 10px;\\\">\\n            \").concat(invoice.subtotal?\"\\n              <div style=\\\"margin-bottom: 5px;\\\">\\n                <span>\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639 \\u0627\\u0644\\u0641\\u0631\\u0639\\u064A: \\u062C.\\u0645 \".concat(invoice.subtotal.toFixed(2),\"</span>\\n              </div>\\n            \"):'',\"\\n            \").concat(invoice.discount&&invoice.discount>0?\"\\n              <div style=\\\"margin-bottom: 5px; color: #d32f2f;\\\">\\n                <span>\\u0627\\u0644\\u062E\\u0635\\u0645: - \\u062C.\\u0645 \".concat(invoice.discount.toFixed(2),\"</span>\\n                \").concat(invoice.discount_type==='percentage'&&invoice.discount_value?\" <small>(\".concat(invoice.discount_value,\"%)</small>\"):'',\"\\n              </div>\\n              <hr style=\\\"margin: 5px 0; border: 1px solid #000;\\\">\\n            \"):'',\"\\n          </div>\\n          <div class=\\\"total-amount\\\">\\n            \\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0646\\u0647\\u0627\\u0626\\u064A: \\u062C.\\u0645 \").concat((invoice.total_after_discount||invoice.total_amount).toFixed(2),\"\\n          </div>\\n        </div>\\n\\n        <!-- Additional Info -->\\n        <div style=\\\"margin-top: 20px; text-align: center; font-size: 13px;\\\">\\n          <p><strong>\\u0645\\u0644\\u062D\\u0648\\u0638\\u0629:</strong> \\u0641\\u0642\\u0637 \\u0648\\u0642\\u062F\\u0631\\u0647</p>\\n          <div style=\\\"height: 30px; border-bottom: 1px solid #000; margin: 10px 40px;\\\"></div>\\n        </div>\\n\\n        <!-- Footer -->\\n        <div class=\\\"footer\\\">\\n          <div>\\n            <p><strong>\\u0627\\u0644\\u062A\\u0648\\u0642\\u064A\\u0639:</strong></p>\\n            <p>\\u0645\\u0648\\u0628\\u0627\\u064A\\u0644: \\u0660\\u0661\\u0660\\u0662\\u0660\\u0666\\u0663\\u0660\\u0666\\u0667\\u0667 - \\u0660\\u0661\\u0660\\u0666\\u0662\\u0663\\u0669\\u0660\\u0668\\u0667\\u0660</p>\\n            <p>\\u062A\\u0644\\u064A\\u0641\\u0648\\u0646: \\u0660\\u0661\\u0660\\u0662\\u0660\\u0666\\u0663\\u0660\\u0666\\u0667\\u0667</p>\\n          </div>\\n          <div style=\\\"text-align: left;\\\">\\n            <p><strong>\\u0627\\u0644\\u0645\\u0633\\u062A\\u0644\\u0645:</strong></p>\\n            <p>\\u0627\\u0644\\u062D\\u0631\\u0641\\u064A\\u064A\\u0646 - \\u0627\\u0644\\u0633\\u0644\\u0627\\u0645 - \\u0623\\u0645\\u0627\\u0645 \\u0627\\u0644\\u0633\\u0648\\u0628\\u0631 \\u062C\\u064A\\u062A</p>\\n            <p>\\u0645\\u0648\\u0628\\u0627\\u064A\\u0644: \\u0660\\u0661\\u0660\\u0662\\u0660\\u0666\\u0663\\u0660\\u0666\\u0667\\u0667 - \\u0660\\u0661\\u0660\\u0666\\u0662\\u0663\\u0669\\u0660\\u0668\\u0667\\u0660</p>\\n          </div>\\n        </div>\\n\\n        <!-- Note -->\\n        <div style=\\\"text-align: center; margin-top: 20px; font-size: 12px; color: #666;\\\">\\n          <p>\\u064A\\u0642\\u0631 \\u0627\\u0644\\u0645\\u0634\\u062A\\u0631\\u064A \\u0628\\u0623\\u0646\\u0647 \\u0642\\u0627\\u0645 \\u0628\\u0645\\u0639\\u0627\\u064A\\u0646\\u0629 \\u0627\\u0644\\u0628\\u0636\\u0627\\u0639\\u0629 \\u0648\\u0642\\u0628\\u0648\\u0644\\u0647\\u0627</p>\\n        </div>\\n      </body>\\n      </html>\\n    \");const printWindow=window.open('','_blank');printWindow.document.write(printContent);printWindow.document.close();printWindow.print();};const clearAllInvoices=async()=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ±ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.'))return;try{await axios.delete(\"\".concat(API,\"/invoices/clear-all\"));fetchInvoices();alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ±');}catch(error){console.error('Error clearing invoices:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');}};const filteredInvoices=invoices.filter(invoice=>{const matchesStatus=filterStatus===''||invoice.status===filterStatus;const matchesSearch=searchTerm===''||invoice.invoice_number.toLowerCase().includes(searchTerm.toLowerCase())||invoice.customer_name.toLowerCase().includes(searchTerm.toLowerCase());return matchesStatus&&matchesSearch;});return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-4\",children:\"\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:clearAllInvoices,className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchInvoices,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"border border-gray-300 rounded px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"\\u064A\\u0648\\u0645\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0623\\u0633\\u0628\\u0648\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0634\\u0647\\u0631\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0633\\u0646\\u0648\\u064A\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-4 rounded-lg shadow-md mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0628\\u062D\\u062B\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0623\\u0648 \\u0627\\u0633\\u0645 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\",className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0641\\u0644\\u062A\\u0631\\u0629 \\u062D\\u0633\\u0628 \\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsxs(\"select\",{value:filterStatus,onChange:e=>setFilterStatus(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u062D\\u0627\\u0644\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629\",children:\"\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u063A\\u064A\\u0631 \\u0645\\u062F\\u0641\\u0648\\u0639\\u0629\",children:\"\\u063A\\u064A\\u0631 \\u0645\\u062F\\u0641\\u0648\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629 \\u062C\\u0632\\u0626\\u064A\\u0627\\u064B\",children:\"\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629 \\u062C\\u0632\\u0626\\u064A\\u0627\\u064B\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0627\\u0646\\u062A\\u0638\\u0627\\u0631\",children:\"\\u0627\\u0646\\u062A\\u0638\\u0627\\u0631\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u062A\\u0645 \\u0627\\u0644\\u062A\\u0646\\u0641\\u064A\\u0630\",children:\"\\u062A\\u0645 \\u0627\\u0644\\u062A\\u0646\\u0641\\u064A\\u0630\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSearchTerm('');setFilterStatus('');},className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0645\\u0633\\u062D \\u0627\\u0644\\u0641\\u0644\\u0627\\u062A\\u0631\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-4 rounded-lg text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-blue-800\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-blue-600\",children:invoices.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 p-4 rounded-lg text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-green-800\",children:\"\\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-green-600\",children:invoices.filter(inv=>inv.status==='Ù…Ø¯ÙÙˆØ¹Ø©').length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 p-4 rounded-lg text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-red-800\",children:\"\\u063A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-red-600\",children:invoices.filter(inv=>inv.status==='ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©').length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 p-4 rounded-lg text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-yellow-800\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-yellow-600\",children:[\"\\u062C.\\u0645 \",invoices.reduce((sum,inv)=>sum+(inv.total_amount||0),0).toFixed(2)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639 \\u0627\\u0644\\u0641\\u0631\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062E\\u0635\\u0645\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0646\\u0647\\u0627\\u0626\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredInvoices.map(invoice=>{var _invoice$subtotal,_invoice$total_amount2,_ref5;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:invoice.invoice_number}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.customer_name}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(invoice.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.payment_method}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:[\"\\u062C.\\u0645 \",((_invoice$subtotal=invoice.subtotal)===null||_invoice$subtotal===void 0?void 0:_invoice$subtotal.toFixed(2))||((_invoice$total_amount2=invoice.total_amount)===null||_invoice$total_amount2===void 0?void 0:_invoice$total_amount2.toFixed(2))||'0.00']}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-red-600\",children:invoice.discount&&invoice.discount>0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u062C.\\u0645 \",invoice.discount.toFixed(2)]}),invoice.discount_type==='percentage'&&invoice.discount_value&&/*#__PURE__*/_jsxs(\"small\",{className:\"block text-xs\",children:[\"(%\",invoice.discount_value,\")\"]})]}):/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:\"\\u0644\\u0627 \\u064A\\u0648\\u062C\\u062F\"})}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold text-green-600\",children:[\"\\u062C.\\u0645 \",((_ref5=invoice.total_after_discount||invoice.total_amount)===null||_ref5===void 0?void 0:_ref5.toFixed(2))||'0.00']}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm cursor-pointer \".concat(invoice.status==='Ù…Ø¯ÙÙˆØ¹Ø©'?'bg-green-100 text-green-800':invoice.status==='ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©'?'bg-red-100 text-red-800':invoice.status==='Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹'?'bg-yellow-100 text-yellow-800':invoice.status==='Ø§Ù†ØªØ¸Ø§Ø±'?'bg-blue-100 text-blue-800':invoice.status==='ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°'?'bg-green-100 text-green-800':invoice.status==='ØªÙ… Ø§Ù„ØªØµÙ†ÙŠØ¹'?'bg-purple-100 text-purple-800':'bg-gray-100 text-gray-800'),children:invoice.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>printInvoice(invoice),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>startEditInvoice(invoice),className:\"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>changePaymentMethod(invoice.id),className:\"bg-purple-500 text-white px-2 py-1 rounded text-sm hover:bg-purple-600\",title:\"\\u062A\\u063A\\u064A\\u064A\\u0631 \\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639\",children:\"\\uD83D\\uDCB3 \\u062A\\u062D\\u0648\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>cancelInvoice(invoice.id),className:\"bg-red-600 text-white px-2 py-1 rounded text-sm hover:bg-red-700\",title:\"\\u0625\\u0644\\u063A\\u0627\\u0621 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0648\\u0625\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F\",children:\"\\u274C \\u0625\\u0644\\u063A\\u0627\\u0621\"}),invoice.status==='Ø§Ù†ØªØ¸Ø§Ø±'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateInvoiceStatus(invoice.id,'ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°'),className:\"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600\",children:\"\\u062A\\u0645 \\u0627\\u0644\\u062A\\u0646\\u0641\\u064A\\u0630\"})]})})]},invoice.id);})})]}),filteredInvoices.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u062A\\u0637\\u0627\\u0628\\u0642 \\u0645\\u0639\\u0627\\u064A\\u064A\\u0631 \\u0627\\u0644\\u0628\\u062D\\u062B\"})]})]}),editingInvoice&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-lg w-full max-w-4xl max-h-screen overflow-y-auto\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-4\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.invoice_title,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{invoice_title:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0634\\u0631\\u0641\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.supervisor_name,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{supervisor_name:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0634\\u0631\\u0641 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.customer_name,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{customer_name:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639\"}),/*#__PURE__*/_jsxs(\"select\",{value:editForm.payment_method,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{payment_method:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u0646\\u0642\\u062F\\u064A\",children:\"\\u0646\\u0642\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 010\",children:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 010\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0643\\u0627\\u0634 0100\",children:\"\\u0643\\u0627\\u0634 0100\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0622\\u062C\\u0644\",children:\"\\u0622\\u062C\\u0644\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0627\\u0646\\u0633\\u062A\\u0627 \\u0628\\u0627\\u064A\",children:\"\\u0627\\u0646\\u0633\\u062A\\u0627 \\u0628\\u0627\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Yad_Elsawy\",children:\"Yad Elsawy\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0635\\u0645\"}),/*#__PURE__*/_jsxs(\"select\",{value:editForm.discount_type,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{discount_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"amount\",children:\"\\u0645\\u0628\\u0644\\u063A \\u062B\\u0627\\u0628\\u062A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"percentage\",children:\"\\u0646\\u0633\\u0628\\u0629 \\u0645\\u0626\\u0648\\u064A\\u0629\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0642\\u064A\\u0645\\u0629 \\u0627\\u0644\\u062E\\u0635\\u0645\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:editForm.discount_value,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{discount_value:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:editForm.discount_type==='percentage'?'0-100':'0.00'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"textarea\",{value:editForm.notes,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{notes:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",rows:\"3\",placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0625\\u0636\\u0627\\u0641\\u064A\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium mb-2\",children:\"\\u0639\\u0646\\u0627\\u0635\\u0631 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:editForm.items.map((item,index)=>{var _item$local_product_d,_item$local_product_d2;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.product_type==='local'||item.local_product_details?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:item.product_name||\"\".concat(((_item$local_product_d=item.local_product_details)===null||_item$local_product_d===void 0?void 0:_item$local_product_d.product_size)||'',\" - \").concat(((_item$local_product_d2=item.local_product_details)===null||_item$local_product_d2===void 0?void 0:_item$local_product_d2.product_type)||''),onChange:e=>{const newItems=[...editForm.items];newItems[index].product_name=e.target.value;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},className:\"w-full p-1 border border-gray-300 rounded\",placeholder:\"\\u0645\\u0642\\u0627\\u0633 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C - \\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-medium w-16\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644:\"}),/*#__PURE__*/_jsxs(\"select\",{value:item.seal_type||'',onChange:e=>{const newItems=[...editForm.items];newItems[index].seal_type=e.target.value;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},className:\"flex-1 p-1 text-xs border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0646\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"option\",{value:\"RSL\",children:\"RSL\"}),/*#__PURE__*/_jsx(\"option\",{value:\"RS\",children:\"RS\"}),/*#__PURE__*/_jsx(\"option\",{value:\"RSS\",children:\"RSS\"}),/*#__PURE__*/_jsx(\"option\",{value:\"RSE\",children:\"RSE\"}),/*#__PURE__*/_jsx(\"option\",{value:\"B17\",children:\"B17\"}),/*#__PURE__*/_jsx(\"option\",{value:\"B3\",children:\"B3\"}),/*#__PURE__*/_jsx(\"option\",{value:\"B14\",children:\"B14\"}),/*#__PURE__*/_jsx(\"option\",{value:\"B1\",children:\"B1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"R15\",children:\"R15\"}),/*#__PURE__*/_jsx(\"option\",{value:\"R17\",children:\"R17\"}),/*#__PURE__*/_jsx(\"option\",{value:\"W1\",children:\"W1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"W4\",children:\"W4\"}),/*#__PURE__*/_jsx(\"option\",{value:\"W5\",children:\"W5\"}),/*#__PURE__*/_jsx(\"option\",{value:\"W11\",children:\"W11\"}),/*#__PURE__*/_jsx(\"option\",{value:\"WBT\",children:\"WBT\"}),/*#__PURE__*/_jsx(\"option\",{value:\"XR\",children:\"XR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"CH\",children:\"CH\"}),/*#__PURE__*/_jsx(\"option\",{value:\"VR\",children:\"VR\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-medium w-16\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629:\"}),/*#__PURE__*/_jsxs(\"select\",{value:item.material_type||'',onChange:e=>{const newItems=[...editForm.items];newItems[index].material_type=e.target.value;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},className:\"flex-1 p-1 text-xs border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"option\",{value:\"NBR\",children:\"NBR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BUR\",children:\"BUR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BT\",children:\"BT\"}),/*#__PURE__*/_jsx(\"option\",{value:\"VT\",children:\"VT\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BOOM\",children:\"BOOM\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:item.inner_diameter||'',onChange:e=>{const newItems=[...editForm.items];newItems[index].inner_diameter=parseFloat(e.target.value)||0;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},placeholder:\"\\u062F\\u0627\\u062E\\u0644\\u064A\",className:\"w-12 p-1 text-xs border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:item.outer_diameter||'',onChange:e=>{const newItems=[...editForm.items];newItems[index].outer_diameter=parseFloat(e.target.value)||0;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},placeholder:\"\\u062E\\u0627\\u0631\\u062C\\u064A\",className:\"w-12 p-1 text-xs border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:item.height||'',onChange:e=>{const newItems=[...editForm.items];newItems[index].height=parseFloat(e.target.value)||0;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},placeholder:\"\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639\",className:\"w-12 p-1 text-xs border border-gray-300 rounded\"})]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:item.quantity,onChange:e=>{const newItems=[...editForm.items];newItems[index].quantity=parseInt(e.target.value)||0;newItems[index].total_price=newItems[index].unit_price*newItems[index].quantity;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},className:\"w-full p-1 border border-gray-300 rounded\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:item.unit_price,onChange:e=>{const newItems=[...editForm.items];newItems[index].unit_price=parseFloat(e.target.value)||0;newItems[index].total_price=newItems[index].unit_price*newItems[index].quantity;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},className:\"w-full p-1 border border-gray-300 rounded\"})}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:[\"\\u062C.\\u0645 \",(item.total_price||0).toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const newItems=editForm.items.filter((_,i)=>i!==index);setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641\"})})]},index);})})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{// Add a new empty item for editing\nconst newItem={seal_type:'',material_type:'',inner_diameter:'',outer_diameter:'',height:'',quantity:1,unit_price:0,total_price:0};setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:[...editForm.items,newItem]}));},className:\"mt-2 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0646\\u062A\\u062C \\u062C\\u062F\\u064A\\u062F\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:cancelEdit,className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"button\",{onClick:saveInvoiceEdit,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u062D\\u0641\\u0638 \\u0627\\u0644\\u062A\\u0639\\u062F\\u064A\\u0644\\u0627\\u062A\"})]})]})}),showPasswordModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",dir:\"rtl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-8 max-w-md w-full shadow-2xl\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold mb-4 text-blue-600\",children:\"\\uD83D\\uDD10 \\u062A\\u0623\\u0643\\u064A\\u062F \\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-4 bg-blue-50 border-r-4 border-blue-500 rounded\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-700\",children:[(pendingOperation===null||pendingOperation===void 0?void 0:pendingOperation.type)==='cancel'&&'âŒ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©',(pendingOperation===null||pendingOperation===void 0?void 0:pendingOperation.type)==='edit'&&'âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø©',(pendingOperation===null||pendingOperation===void 0?void 0:pendingOperation.type)==='changePayment'&&'ğŸ’³ ØªØ­ÙˆÙŠÙ„ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹']}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-600 mt-2\",children:\"\\u064A\\u062A\\u0637\\u0644\\u0628 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 \\u0644\\u0644\\u0645\\u062A\\u0627\\u0628\\u0639\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 (1462):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:operationPassword,onChange:e=>setOperationPassword(e.target.value),onKeyPress:e=>e.key==='Enter'&&executeOperation(),placeholder:\"\\u0623\\u062F\\u062E\\u0644 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\",className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\",autoFocus:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:executeOperation,className:\"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-semibold transition-colors\",children:\"\\u2705 \\u062A\\u0623\\u0643\\u064A\\u062F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowPasswordModal(false);setPendingOperation(null);setOperationPassword('');},className:\"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-3 rounded-lg font-semibold transition-colors\",children:\"\\u274C \\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]})})]});};// Deleted Invoices Component\nconst DeletedInvoices=()=>{const{user}=useAuth();const[isAuthenticated,setIsAuthenticated]=useState(false);const[password,setPassword]=useState('');const[deletedInvoices,setDeletedInvoices]=useState([]);const[searchTerm,setSearchTerm]=useState('');const[showPasswordChange,setShowPasswordChange]=useState(false);const[oldPassword,setOldPassword]=useState('');const[newPassword,setNewPassword]=useState('');// Invoice operations password change states\nconst[showInvoiceOpsPasswordChange,setShowInvoiceOpsPasswordChange]=useState(false);const[invoiceOpsOldPassword,setInvoiceOpsOldPassword]=useState('');const[invoiceOpsNewPassword,setInvoiceOpsNewPassword]=useState('');// Verify password\nconst verifyPassword=async()=>{try{const response=await axios.post(\"\".concat(API,\"/deleted-invoices/verify-password\"),{password:password});if(response.data.success){setIsAuthenticated(true);fetchDeletedInvoices();}else{alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©');setPassword('');}}catch(error){console.error('Error verifying password:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');}};// Change password\nconst changePassword=async()=>{if(!oldPassword||!newPassword){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ÙˆØ§Ù„Ø¬Ø¯ÙŠØ¯Ø©');return;}if(newPassword.length<4){alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 4 Ø£Ø±Ù‚Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');return;}try{await axios.post(\"\".concat(API,\"/deleted-invoices/change-password\"),{old_password:oldPassword,new_password:newPassword});alert('ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­');setShowPasswordChange(false);setOldPassword('');setNewPassword('');}catch(error){var _error$response15,_error$response15$dat;console.error('Error changing password:',error);alert(((_error$response15=error.response)===null||_error$response15===void 0?void 0:(_error$response15$dat=_error$response15.data)===null||_error$response15$dat===void 0?void 0:_error$response15$dat.detail)||'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');}};// Change invoice operations password (1462)\nconst changeInvoiceOpsPassword=async()=>{if(!invoiceOpsOldPassword||!invoiceOpsNewPassword){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ÙˆØ§Ù„Ø¬Ø¯ÙŠØ¯Ø©');return;}if(invoiceOpsNewPassword.length<4){alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 4 Ø£Ø±Ù‚Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');return;}try{await axios.post(\"\".concat(API,\"/invoice-operations/change-password\"),{old_password:invoiceOpsOldPassword,new_password:invoiceOpsNewPassword});alert('ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª (Ø¥Ù„ØºØ§Ø¡/ØªØ¹Ø¯ÙŠÙ„/ØªØ­ÙˆÙŠÙ„) Ø¨Ù†Ø¬Ø§Ø­');setShowInvoiceOpsPasswordChange(false);setInvoiceOpsOldPassword('');setInvoiceOpsNewPassword('');}catch(error){var _error$response16,_error$response16$dat;console.error('Error changing invoice ops password:',error);alert(((_error$response16=error.response)===null||_error$response16===void 0?void 0:(_error$response16$dat=_error$response16.data)===null||_error$response16$dat===void 0?void 0:_error$response16$dat.detail)||'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');}};const fetchDeletedInvoices=async()=>{try{const response=await axios.get(\"\".concat(API,\"/deleted-invoices\"));setDeletedInvoices(response.data||[]);}catch(error){console.error('Error fetching deleted invoices:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©');}};const handleRestore=async(invoiceId,invoiceNumber)=>{if(!confirm(\"\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u0627\\u0633\\u062A\\u0639\\u0627\\u062F\\u0629 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \".concat(invoiceNumber,\"\\u061F\\n\\n\\u0645\\u0644\\u0627\\u062D\\u0638\\u0629: \\u0633\\u064A\\u062A\\u0645 \\u0627\\u0633\\u062A\\u0639\\u0627\\u062F\\u0629 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0641\\u0642\\u0637\\u060C \\u0644\\u0646 \\u064A\\u062A\\u0645 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0623\\u0648 \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629 \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0627\\u064B\"))){return;}try{const response=await axios.post(\"\".concat(API,\"/deleted-invoices/\").concat(invoiceId,\"/restore\"),null,{params:{username:user===null||user===void 0?void 0:user.username}});alert(response.data.message+'\\n\\n'+(response.data.warning||''));fetchDeletedInvoices();}catch(error){var _error$response17,_error$response17$dat;console.error('Error restoring invoice:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©: '+(((_error$response17=error.response)===null||_error$response17===void 0?void 0:(_error$response17$dat=_error$response17.data)===null||_error$response17$dat===void 0?void 0:_error$response17$dat.detail)||error.message));}};const handlePermanentDelete=async(invoiceId,invoiceNumber)=>{if(!confirm(\"\\u26A0\\uFE0F \\u062A\\u062D\\u0630\\u064A\\u0631: \\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u062D\\u0630\\u0641 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \".concat(invoiceNumber,\" \\u0646\\u0647\\u0627\\u0626\\u064A\\u0627\\u064B\\u061F\\n\\n\\u0647\\u0630\\u0627 \\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621 \\u0644\\u0627 \\u064A\\u0645\\u0643\\u0646 \\u0627\\u0644\\u062A\\u0631\\u0627\\u062C\\u0639 \\u0639\\u0646\\u0647!\"))){return;}try{await axios.delete(\"\".concat(API,\"/deleted-invoices/\").concat(invoiceId));alert('ØªÙ… Ø­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹');fetchDeletedInvoices();}catch(error){var _error$response18,_error$response18$dat;console.error('Error deleting invoice:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø©: '+(((_error$response18=error.response)===null||_error$response18===void 0?void 0:(_error$response18$dat=_error$response18.data)===null||_error$response18$dat===void 0?void 0:_error$response18$dat.detail)||error.message));}};const filteredInvoices=deletedInvoices.filter(invoice=>{var _invoice$invoice_numb,_invoice$customer_nam,_invoice$payment_meth;const searchLower=searchTerm.toLowerCase();return((_invoice$invoice_numb=invoice.invoice_number)===null||_invoice$invoice_numb===void 0?void 0:_invoice$invoice_numb.toLowerCase().includes(searchLower))||((_invoice$customer_nam=invoice.customer_name)===null||_invoice$customer_nam===void 0?void 0:_invoice$customer_nam.toLowerCase().includes(searchLower))||((_invoice$payment_meth=invoice.payment_method)===null||_invoice$payment_meth===void 0?void 0:_invoice$payment_meth.toLowerCase().includes(searchLower));});// If not authenticated, show password screen\nif(!isAuthenticated){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-500 to-orange-600 p-6\",dir:\"rtl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-lg shadow-2xl max-w-md w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-6xl mb-4\",children:\"\\uD83D\\uDDD1\\uFE0F\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800\",children:\"\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062D\\u0630\\u0648\\u0641\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2\",children:\"\\u0627\\u0644\\u0631\\u062C\\u0627\\u0621 \\u0625\\u062F\\u062E\\u0627\\u0644 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 \\u0644\\u0644\\u062F\\u062E\\u0648\\u0644\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),onKeyPress:e=>e.key==='Enter'&&verifyPassword(),placeholder:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\",className:\"w-full p-3 border-2 border-gray-300 rounded-lg focus:border-red-500 focus:outline-none text-center text-lg\",autoFocus:true}),/*#__PURE__*/_jsx(\"button\",{onClick:verifyPassword,className:\"w-full bg-red-500 text-white py-3 rounded-lg hover:bg-red-600 font-semibold text-lg transition-colors\",children:\"\\u062F\\u062E\\u0648\\u0644\"})]})]})});}// Main deleted invoices interface\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 bg-gray-50 min-h-screen\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-800\",children:\"\\uD83D\\uDDD1\\uFE0F \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062D\\u0630\\u0648\\u0641\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-1\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0648\\u0627\\u0633\\u062A\\u0639\\u0627\\u062F\\u0629 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062D\\u0630\\u0648\\u0641\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPasswordChange(!showPasswordChange),className:\"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors\",title:\"\\u062A\\u063A\\u064A\\u064A\\u0631 \\u0643\\u0644\\u0645\\u0629 \\u0645\\u0631\\u0648\\u0631 \\u0627\\u0644\\u0635\\u0641\\u062D\\u0629\",children:\"\\uD83D\\uDD11 \\u0627\\u0644\\u0635\\u0641\\u062D\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowInvoiceOpsPasswordChange(!showInvoiceOpsPasswordChange),className:\"bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors\",title:\"\\u062A\\u063A\\u064A\\u064A\\u0631 \\u0643\\u0644\\u0645\\u0629 \\u0645\\u0631\\u0648\\u0631 \\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0627\\u062A\",children:\"\\uD83D\\uDD10 \\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchDeletedInvoices,className:\"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors\",children:\"\\uD83D\\uDD04 \\u062A\\u062D\\u062F\\u064A\\u062B\"})]})]}),showPasswordChange&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-4 flex items-center gap-2\",children:\"\\uD83D\\uDD11 \\u062A\\u063A\\u064A\\u064A\\u0631 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 \\u0627\\u0644\\u0642\\u062F\\u064A\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:oldPassword,onChange:e=>setOldPassword(e.target.value),className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 \\u0627\\u0644\\u062C\\u062F\\u064A\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:newPassword,onChange:e=>setNewPassword(e.target.value),className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-end gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:changePassword,className:\"flex-1 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 font-semibold\",children:\"\\u2705 \\u062A\\u0623\\u0643\\u064A\\u062F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowPasswordChange(false);setOldPassword('');setNewPassword('');},className:\"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 font-semibold\",children:\"\\u274C \\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]})]}),showInvoiceOpsPasswordChange&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-4 flex items-center gap-2\",children:\"\\uD83D\\uDD10 \\u062A\\u063A\\u064A\\u064A\\u0631 \\u0643\\u0644\\u0645\\u0629 \\u0645\\u0631\\u0648\\u0631 \\u0639\\u0645\\u0644\\u064A\\u0627\\u062A \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mb-4\",children:[\"\\u062A\\u063A\\u064A\\u064A\\u0631 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\\u0629 \\u0641\\u064A: \",/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0625\\u0644\\u063A\\u0627\\u0621 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631\\u060C \\u062A\\u0639\\u062F\\u064A\\u0644 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631\\u060C \\u062A\\u062D\\u0648\\u064A\\u0644 \\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 \\u0627\\u0644\\u0642\\u062F\\u064A\\u0645\\u0629 (1462)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:invoiceOpsOldPassword,onChange:e=>setInvoiceOpsOldPassword(e.target.value),className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 \\u0627\\u0644\\u062C\\u062F\\u064A\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:invoiceOpsNewPassword,onChange:e=>setInvoiceOpsNewPassword(e.target.value),className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-end gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:changeInvoiceOpsPassword,className:\"flex-1 bg-purple-500 text-white py-3 rounded-lg hover:bg-purple-600 font-semibold\",children:\"\\u2705 \\u062A\\u0623\\u0643\\u064A\\u062F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowInvoiceOpsPasswordChange(false);setInvoiceOpsOldPassword('');setInvoiceOpsNewPassword('');},className:\"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 font-semibold\",children:\"\\u274C \\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"\\u0627\\u0644\\u0628\\u062D\\u062B (\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\\u060C \\u0627\\u0633\\u0645 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\\u060C \\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639...)\",className:\"w-full p-2 border border-gray-300 rounded\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-md overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full border-collapse\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u062A\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u062D\\u0630\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredInvoices.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"7\",className:\"border border-gray-300 p-4 text-center text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0645\\u062D\\u0630\\u0648\\u0641\\u0629\"})}):filteredInvoices.map(invoice=>{var _invoice$total_amount3;return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-medium\",children:invoice.invoice_number}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(invoice.created_at).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.customer_name}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-bold\",children:[(_invoice$total_amount3=invoice.total_amount)===null||_invoice$total_amount3===void 0?void 0:_invoice$total_amount3.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.payment_method}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-sm text-gray-600\",children:new Date(invoice.deleted_at).toLocaleDateString('ar-EG',{year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse justify-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRestore(invoice.id,invoice.invoice_number),className:\"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600\",children:\"\\u21A9\\uFE0F \\u0627\\u0633\\u062A\\u0639\\u0627\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePermanentDelete(invoice.id,invoice.invoice_number),className:\"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700\",children:\"\\uD83D\\uDDD1\\uFE0F \\u062D\\u0630\\u0641 \\u0646\\u0647\\u0627\\u0626\\u064A\"})]})})]},invoice.id);})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 bg-blue-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-700\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062D\\u0630\\u0648\\u0641\\u0629:\"}),\" \",filteredInvoices.length]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-600 mt-2\",children:[\"\\uD83D\\uDCA1 \",/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0629:\"}),\" \\u0627\\u0633\\u062A\\u0639\\u0627\\u062F\\u0629 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0633\\u062A\\u0631\\u062C\\u0639\\u0647\\u0627 \\u0625\\u0644\\u0649 \\u0642\\u0627\\u0626\\u0645\\u0629 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0646\\u0634\\u0637\\u0629\\u060C \\u0644\\u0643\\u0646 \\u0644\\u0646 \\u064A\\u062A\\u0645 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0623\\u0648 \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629 \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0627\\u064B.\"]})]})]});};// Customer Statement Component (ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨)\nconst CustomerStatement=()=>{var _statement$summary$to,_statement$summary$to2,_statement$summary$fi;const[customers,setCustomers]=useState([]);const[selectedCustomer,setSelectedCustomer]=useState('');const[statement,setStatement]=useState(null);const[fromDate,setFromDate]=useState('');const[toDate,setToDate]=useState('');const[loading,setLoading]=useState(false);useEffect(()=>{fetchCustomers();},[]);const fetchCustomers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/customers\"));// Sort customers alphabetically by name\nconst sortedCustomers=(response.data||[]).sort((a,b)=>a.name.localeCompare(b.name,'ar'));setCustomers(sortedCustomers);}catch(error){console.error('Error fetching customers:',error);}};const fetchStatement=async()=>{if(!selectedCustomer){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø¹Ù…ÙŠÙ„');return;}setLoading(true);try{const params={};if(fromDate)params.from_date=fromDate;if(toDate)params.to_date=toDate;const response=await axios.get(\"\".concat(API,\"/customer-statement/\").concat(selectedCustomer),{params});setStatement(response.data);}catch(error){var _error$response19,_error$response19$dat;console.error('Error fetching statement:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨: '+(((_error$response19=error.response)===null||_error$response19===void 0?void 0:(_error$response19$dat=_error$response19.data)===null||_error$response19$dat===void 0?void 0:_error$response19$dat.detail)||error.message));}finally{setLoading(false);}};const printStatement=()=>{var _summary$total_credit,_summary$total_debit,_summary$final_balanc;if(!statement)return;const printWindow=window.open('','','width=800,height=600');const customer=statement.customer;const transactions=statement.transactions||[];const summary=statement.summary||{};printWindow.document.write(\"\\n      <!DOCTYPE html>\\n      <html dir=\\\"rtl\\\">\\n      <head>\\n        <title>\\u0643\\u0634\\u0641 \\u062D\\u0633\\u0627\\u0628 - \".concat(customer.name,\"</title>\\n        <style>\\n          body {\\n            font-family: Arial, sans-serif;\\n            padding: 20px;\\n            direction: rtl;\\n          }\\n          .header {\\n            text-align: center;\\n            margin-bottom: 30px;\\n            border-bottom: 2px solid #333;\\n            padding-bottom: 10px;\\n          }\\n          .info-section {\\n            margin-bottom: 20px;\\n            display: flex;\\n            justify-content: space-between;\\n          }\\n          .info-box {\\n            border: 1px solid #ddd;\\n            padding: 10px;\\n            border-radius: 5px;\\n            width: 45%;\\n          }\\n          table {\\n            width: 100%;\\n            border-collapse: collapse;\\n            margin-bottom: 20px;\\n          }\\n          th, td {\\n            border: 1px solid #ddd;\\n            padding: 8px;\\n            text-align: center;\\n          }\\n          th {\\n            background-color: #f2f2f2;\\n            font-weight: bold;\\n          }\\n          .summary {\\n            margin-top: 20px;\\n            border-top: 2px solid #333;\\n            padding-top: 10px;\\n          }\\n          .summary-row {\\n            display: flex;\\n            justify-content: space-between;\\n            padding: 5px 0;\\n            font-size: 14px;\\n          }\\n          .final-balance {\\n            font-size: 18px;\\n            font-weight: bold;\\n            color: \").concat(summary.final_balance>=0?'green':'red',\";\\n          }\\n          @media print {\\n            body { padding: 10px; }\\n          }\\n        </style>\\n      </head>\\n      <body>\\n        <div class=\\\"header\\\">\\n          <h1>\\u0643\\u0634\\u0641 \\u062D\\u0633\\u0627\\u0628 \\u0639\\u0627\\u0645</h1>\\n          <p>\\u0645\\u0631\\u062A\\u0628 \\u0628\\u062A\\u0648\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u0642\\u064A\\u0648\\u062F</p>\\n        </div>\\n\\n        <div class=\\\"info-section\\\">\\n          <div class=\\\"info-box\\\">\\n            <p><strong>\\u0627\\u0633\\u0645 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628:</strong> \").concat(customer.name,\"</p>\\n            <p><strong>\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0647\\u0627\\u062A\\u0641:</strong> \").concat(customer.phone||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',\"</p>\\n            \").concat(customer.is_also_supplier?'<p><strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…ÙˆØ±Ø¯ Ø£ÙŠØ¶Ø§Ù‹</p>':'',\"\\n          </div>\\n          <div class=\\\"info-box\\\">\\n            <p><strong>\\u0645\\u0646 \\u062A\\u0627\\u0631\\u064A\\u062E:</strong> \").concat(statement.period.from_date,\"</p>\\n            <p><strong>\\u0625\\u0644\\u0649 \\u062A\\u0627\\u0631\\u064A\\u062E:</strong> \").concat(statement.period.to_date,\"</p>\\n            <p><strong>\\u062A\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u0637\\u0628\\u0627\\u0639\\u0629:</strong> \").concat(new Date().toLocaleDateString('ar-EG'),\"</p>\\n          </div>\\n        </div>\\n\\n        <table>\\n          <thead>\\n            <tr>\\n              <th>\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E</th>\\n              <th>\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0642\\u064A\\u062F</th>\\n              <th>\\u0627\\u0644\\u0628\\u064A\\u0627\\u0646</th>\\n              <th>\\u0645\\u062F\\u064A\\u0646</th>\\n              <th>\\u062F\\u0627\\u0626\\u0646</th>\\n              <th>\\u0627\\u0644\\u0631\\u0635\\u064A\\u062F</th>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            \").concat(transactions.map(t=>\"\\n              <tr>\\n                <td>\".concat(new Date(t.date).toLocaleDateString('ar-EG'),\"</td>\\n                <td>\").concat(t.type,\"</td>\\n                <td>\").concat(t.description,\"</td>\\n                <td>\").concat(t.debit>0?t.debit.toFixed(2):'-',\"</td>\\n                <td>\").concat(t.credit>0?t.credit.toFixed(2):'-',\"</td>\\n                <td>\").concat(t.balance.toFixed(2),\"</td>\\n              </tr>\\n            \")).join(''),\"\\n          </tbody>\\n        </table>\\n\\n        <div class=\\\"summary\\\">\\n          <div class=\\\"summary-row\\\">\\n            <span><strong>\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u062F\\u0627\\u0626\\u0646:</strong></span>\\n            <span>\").concat(((_summary$total_credit=summary.total_credit)===null||_summary$total_credit===void 0?void 0:_summary$total_credit.toFixed(2))||'0.00',\" \\u062C.\\u0645</span>\\n          </div>\\n          <div class=\\\"summary-row\\\">\\n            <span><strong>\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u062F\\u064A\\u0646:</strong></span>\\n            <span>\").concat(((_summary$total_debit=summary.total_debit)===null||_summary$total_debit===void 0?void 0:_summary$total_debit.toFixed(2))||'0.00',\" \\u062C.\\u0645</span>\\n          </div>\\n          <div class=\\\"summary-row final-balance\\\">\\n            <span><strong>\\u0627\\u0644\\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0646\\u0647\\u0627\\u0626\\u064A:</strong></span>\\n            <span>\").concat(((_summary$final_balanc=summary.final_balance)===null||_summary$final_balanc===void 0?void 0:_summary$final_balanc.toFixed(2))||'0.00',\" \\u062C.\\u0645</span>\\n          </div>\\n        </div>\\n\\n        <p style=\\\"margin-top: 30px; text-align: left;\\\">\\u0627\\u0644\\u0645\\u062D\\u0627\\u0633\\u0628 \\u064A\\u0639\\u062A\\u0645\\u062F\\u060C\\u060C\\u060C</p>\\n      </body>\\n      </html>\\n    \"));printWindow.document.close();printWindow.print();};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-6\",children:\"\\u0643\\u0634\\u0641 \\u062D\\u0633\\u0627\\u0628 \\u0627\\u0644\\u0639\\u0645\\u0644\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 *\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedCustomer,onChange:e=>setSelectedCustomer(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- \\u0627\\u062E\\u062A\\u0631 \\u0639\\u0645\\u064A\\u0644 --\"}),customers.map(customer=>/*#__PURE__*/_jsx(\"option\",{value:customer.id,children:customer.name},customer.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0646 \\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:fromDate,onChange:e=>setFromDate(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0625\\u0644\\u0649 \\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:toDate,onChange:e=>setToDate(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:fetchStatement,disabled:loading||!selectedCustomer,className:\"w-full px-4 py-2 rounded text-white \".concat(loading||!selectedCustomer?'bg-gray-400 cursor-not-allowed':'bg-blue-500 hover:bg-blue-600'),children:loading?'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...':'ğŸ“‹ Ø¹Ø±Ø¶ ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨'})})]})}),statement&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6 pb-4 border-b-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:\"\\u0643\\u0634\\u0641 \\u062D\\u0633\\u0627\\u0628 \\u0639\\u0627\\u0645\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"\\u0645\\u0631\\u062A\\u0628 \\u0628\\u062A\\u0648\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u0642\\u064A\\u0648\\u062F\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:printStatement,className:\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\",children:\"\\uD83D\\uDDA8\\uFE0F \\u0637\\u0628\\u0627\\u0639\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-4 rounded\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628:\"}),\" \",statement.customer.name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0647\\u0627\\u062A\\u0641:\"}),\" \",statement.customer.phone||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯']}),statement.customer.is_also_supplier&&/*#__PURE__*/_jsx(\"p\",{className:\"text-orange-600 font-medium\",children:\"\\u26A0\\uFE0F \\u0647\\u0630\\u0627 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0645\\u0648\\u0631\\u062F \\u0623\\u064A\\u0636\\u0627\\u064B\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0645\\u0646 \\u062A\\u0627\\u0631\\u064A\\u062E:\"}),\" \",statement.period.from_date]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0625\\u0644\\u0649 \\u062A\\u0627\\u0631\\u064A\\u062E:\"}),\" \",statement.period.to_date]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E:\"}),\" \",new Date().toLocaleDateString('ar-EG')]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto mb-6\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0642\\u064A\\u062F\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0631\\u062C\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0645\\u062F\\u064A\\u0646\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u062F\\u0627\\u0626\\u0646\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0631\\u0635\\u064A\\u062F\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:statement.transactions.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"7\",className:\"border border-gray-300 p-4 text-center text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0645\\u0639\\u0627\\u0645\\u0644\\u0627\\u062A \\u0641\\u064A \\u0647\\u0630\\u0647 \\u0627\\u0644\\u0641\\u062A\\u0631\\u0629\"})}):statement.transactions.map((trans,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(trans.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:trans.type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-right\",children:trans.description}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:trans.reference}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-red-600 font-medium\",children:trans.debit>0?trans.debit.toFixed(2):'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-green-600 font-medium\",children:trans.credit>0?trans.credit.toFixed(2):'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-bold\",children:trans.balance.toFixed(2)})]},index))})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-lg border-t-4 border-blue-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-1\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u062F\\u0627\\u0626\\u0646\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-green-600\",children:[(_statement$summary$to=statement.summary.total_credit)===null||_statement$summary$to===void 0?void 0:_statement$summary$to.toFixed(2),\" \\u062C.\\u0645\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-1\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u062F\\u064A\\u0646\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-red-600\",children:[(_statement$summary$to2=statement.summary.total_debit)===null||_statement$summary$to2===void 0?void 0:_statement$summary$to2.toFixed(2),\" \\u062C.\\u0645\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-1\",children:\"\\u0627\\u0644\\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0646\\u0647\\u0627\\u0626\\u064A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold \".concat(statement.summary.final_balance>=0?'text-green-600':'text-red-600'),children:[(_statement$summary$fi=statement.summary.final_balance)===null||_statement$summary$fi===void 0?void 0:_statement$summary$fi.toFixed(2),\" \\u062C.\\u0645\"]})]})]})})]}),!statement&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-6 rounded-lg border-r-4 border-blue-500\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold mb-2\",children:\"\\uD83D\\uDCDD \\u062A\\u0639\\u0644\\u064A\\u0645\\u0627\\u062A:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside text-sm text-gray-700 space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628 \\u0645\\u0646 \\u0627\\u0644\\u0642\\u0627\\u0626\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u064A\\u0645\\u0643\\u0646\\u0643 \\u062A\\u062D\\u062F\\u064A\\u062F \\u0641\\u062A\\u0631\\u0629 \\u0632\\u0645\\u0646\\u064A\\u0629 \\u0645\\u0639\\u064A\\u0646\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0636\\u063A\\u0637 \\u0639\\u0644\\u0649 \\\"\\u0639\\u0631\\u0636 \\u0643\\u0634\\u0641 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\\\" \\u0644\\u0639\\u0631\\u0636 \\u0627\\u0644\\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u064A\\u0645\\u0643\\u0646\\u0643 \\u0637\\u0628\\u0627\\u0639\\u0629 \\u0643\\u0634\\u0641 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628 \\u0628\\u0627\\u0644\\u0636\\u063A\\u0637 \\u0639\\u0644\\u0649 \\u0632\\u0631 \\u0627\\u0644\\u0637\\u0628\\u0627\\u0639\\u0629\"}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0629:\"}),\" \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 = \\u062F\\u0627\\u0626\\u0646 (\\u0645\\u0648\\u062C\\u0628) | \\u0627\\u0644\\u062F\\u0641\\u0639\\u0627\\u062A \\u0648\\u0627\\u0644\\u0645\\u0634\\u062A\\u0631\\u064A\\u0627\\u062A = \\u0645\\u062F\\u064A\\u0646 (\\u0633\\u0627\\u0644\\u0628)\"]})]})]})]});};// Customer Account Settlement Component - ØªØµÙÙŠØ© Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…ÙŠÙ„\nconst SettleAccount=()=>{const{user}=useAuth();const[customers,setCustomers]=useState([]);const[selectedCustomer,setSelectedCustomer]=useState(null);const[deferredInvoices,setDeferredInvoices]=useState([]);const[amountPaid,setAmountPaid]=useState('');const[paymentMethod,setPaymentMethod]=useState('Ù†Ù‚Ø¯ÙŠ');const[loading,setLoading]=useState(false);const[result,setResult]=useState(null);const[suppliers,setSuppliers]=useState([]);const[isCustomerAlsoSupplier,setIsCustomerAlsoSupplier]=useState(false);const[supplierBalance,setSupplierBalance]=useState(0);useEffect(()=>{fetchCustomers();fetchSuppliers();},[]);const fetchCustomers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/customers\"));const sortedCustomers=(response.data||[]).sort((a,b)=>a.name.localeCompare(b.name,'ar'));setCustomers(sortedCustomers);}catch(error){console.error('Error fetching customers:',error);}};const fetchSuppliers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/suppliers\"));setSuppliers(response.data||[]);}catch(error){console.error('Error fetching suppliers:',error);}};const fetchCustomerInvoices=async customerId=>{try{const response=await axios.get(\"\".concat(API,\"/invoices\"));const customer=customers.find(c=>c.id===customerId);if(customer){const customerInvoices=response.data.filter(inv=>inv.customer_name===customer.name&&inv.payment_method==='Ø¢Ø¬Ù„'&&inv.remaining_amount>0).sort((a,b)=>new Date(a.date)-new Date(b.date));// Sort by date ascending\nsetDeferredInvoices(customerInvoices);}}catch(error){console.error('Error fetching invoices:',error);}};const handleCustomerChange=customerId=>{setSelectedCustomer(customerId);setResult(null);if(customerId){fetchCustomerInvoices(customerId);// Check if customer is also supplier\nconst customer=customers.find(c=>c.id===customerId);if(customer){const supplier=suppliers.find(s=>s.name===customer.name);if(supplier){// Support both 'balance' and 'current_balance' fields\nconst balance=supplier.current_balance!==undefined?supplier.current_balance:supplier.balance||0;if(balance>0){setIsCustomerAlsoSupplier(true);setSupplierBalance(balance);}else{setIsCustomerAlsoSupplier(false);setSupplierBalance(0);}}else{setIsCustomerAlsoSupplier(false);setSupplierBalance(0);}}}else{setDeferredInvoices([]);setIsCustomerAlsoSupplier(false);setSupplierBalance(0);}};const handleSettleAccount=async()=>{if(!selectedCustomer){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„');return;}if(!amountPaid||parseFloat(amountPaid)<=0){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');return;}if(!confirm(\"\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u062A\\u0635\\u0641\\u064A\\u0629 \\u062D\\u0633\\u0627\\u0628 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0628\\u0645\\u0628\\u0644\\u063A \".concat(parseFloat(amountPaid).toFixed(2),\" \\u062C.\\u0645\\u061F\\n\\n\\u0633\\u064A\\u062A\\u0645 \\u062A\\u0648\\u0632\\u064A\\u0639 \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A \\u0639\\u0644\\u0649 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0622\\u062C\\u0644\\u0629 \\u0645\\u0646 \\u0627\\u0644\\u0623\\u0642\\u062F\\u0645 \\u0644\\u0644\\u0623\\u062D\\u062F\\u062B\"))){return;}setLoading(true);try{const response=await axios.post(\"\".concat(API,\"/customers/\").concat(selectedCustomer,\"/settle-account\"),null,{params:{amount_paid:parseFloat(amountPaid),payment_method:paymentMethod,username:user===null||user===void 0?void 0:user.username}});setResult(response.data);setAmountPaid('');// Refresh invoices\nfetchCustomerInvoices(selectedCustomer);// Show detailed result\nlet message=\"\\u2705 \".concat(response.data.message,\"\\n\\n\");message+=\"\\uD83D\\uDCB0 \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639: \".concat(response.data.total_amount_paid.toFixed(2),\" \\u062C.\\u0645\\n\");message+=\"\\uD83D\\uDCCA \\u062A\\u0645 \\u062A\\u0648\\u0632\\u064A\\u0639: \".concat(response.data.amount_distributed.toFixed(2),\" \\u062C.\\u0645\\n\");if(response.data.remaining_amount>0){message+=\"\\uD83D\\uDCB5 \\u0645\\u062A\\u0628\\u0642\\u064A: \".concat(response.data.remaining_amount.toFixed(2),\" \\u062C.\\u0645\\n\\n\");}message+=\"\\uD83D\\uDCCB \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629 (\".concat(response.data.invoices_count,\"):\\n\");response.data.paid_invoices.forEach(inv=>{message+=\"\\n\\u2022 \".concat(inv.invoice_number,\"\\n\");message+=\"  \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639: \".concat(inv.amount_paid.toFixed(2),\" \\u062C.\\u0645\\n\");message+=\"  \\u0627\\u0644\\u062D\\u0627\\u0644\\u0629: \".concat(inv.status,\"\\n\");});alert(message);}catch(error){var _error$response20,_error$response20$dat;console.error('Error settling account:',error);alert(((_error$response20=error.response)===null||_error$response20===void 0?void 0:(_error$response20$dat=_error$response20.data)===null||_error$response20$dat===void 0?void 0:_error$response20$dat.detail)||'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµÙÙŠØ© Ø§Ù„Ø­Ø³Ø§Ø¨');}finally{setLoading(false);}};// Reconcile customer-supplier account\nconst handleReconciliation=async()=>{var _customers$find;if(!selectedCustomer){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„');return;}const settlementAmount=Math.min(supplierBalance,totalRemaining);const confirmMessage=\"\\uD83D\\uDD04 \\u062A\\u0633\\u0648\\u064A\\u0629 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\\n\\n\"+\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644/\\u0627\\u0644\\u0645\\u0648\\u0631\\u062F: \".concat((_customers$find=customers.find(c=>c.id===selectedCustomer))===null||_customers$find===void 0?void 0:_customers$find.name,\"\\n\\n\")+\"\\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F: \".concat(supplierBalance.toFixed(2),\" \\u062C.\\u0645\\n\")+\"\\u062F\\u064A\\u0648\\u0646 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644: \".concat(totalRemaining.toFixed(2),\" \\u062C.\\u0645\\n\\n\")+\"\\u0633\\u064A\\u062A\\u0645 \\u062A\\u0633\\u0648\\u064A\\u0629: \".concat(settlementAmount.toFixed(2),\" \\u062C.\\u0645\\n\\n\")+\"\\u0628\\u0639\\u062F \\u0627\\u0644\\u062A\\u0633\\u0648\\u064A\\u0629:\\n\"+\"\\u2022 \\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F: \".concat((supplierBalance-settlementAmount).toFixed(2),\" \\u062C.\\u0645\\n\")+\"\\u2022 \\u062F\\u064A\\u0648\\u0646 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644: \".concat((totalRemaining-settlementAmount).toFixed(2),\" \\u062C.\\u0645\\n\\n\")+\"\\u26A0\\uFE0F \\u0645\\u0644\\u0627\\u062D\\u0638\\u0629: \\u062A\\u0633\\u0648\\u064A\\u0629 \\u062F\\u0627\\u062E\\u0644\\u064A\\u0629 \\u0628\\u062F\\u0648\\u0646 \\u062A\\u0623\\u062B\\u064A\\u0631 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629\\n\\n\"+\"\\u0647\\u0644 \\u062A\\u0631\\u064A\\u062F \\u0627\\u0644\\u0645\\u062A\\u0627\\u0628\\u0639\\u0629\\u061F\";if(!confirm(confirmMessage)){return;}setLoading(true);try{const response=await axios.post(\"\".concat(API,\"/customers/\").concat(selectedCustomer,\"/reconcile-with-supplier\"),null,{params:{username:user===null||user===void 0?void 0:user.username}});// Refresh data\nfetchCustomerInvoices(selectedCustomer);fetchSuppliers();// Show detailed result\nlet message=\"\\u2705 \".concat(response.data.message,\"\\n\\n\");message+=\"\\uD83D\\uDCCA \\u0627\\u0644\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644:\\n\";message+=\"\\u2022 \\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F \\u0627\\u0644\\u0633\\u0627\\u0628\\u0642: \".concat(response.data.supplier_previous_balance.toFixed(2),\" \\u062C.\\u0645\\n\");message+=\"\\u2022 \\u062F\\u064A\\u0648\\u0646 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0627\\u0644\\u0633\\u0627\\u0628\\u0642\\u0629: \".concat(response.data.customer_previous_debt.toFixed(2),\" \\u062C.\\u0645\\n\");message+=\"\\u2022 \\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u062A\\u0633\\u0648\\u064A\\u0629: \".concat(response.data.settlement_amount.toFixed(2),\" \\u062C.\\u0645\\n\\n\");message+=\"\\uD83D\\uDCC9 \\u0628\\u0639\\u062F \\u0627\\u0644\\u062A\\u0633\\u0648\\u064A\\u0629:\\n\";message+=\"\\u2022 \\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F \\u0627\\u0644\\u062C\\u062F\\u064A\\u062F: \".concat(response.data.supplier_new_balance.toFixed(2),\" \\u062C.\\u0645\\n\");message+=\"\\u2022 \\u062F\\u064A\\u0648\\u0646 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0627\\u0644\\u0645\\u062A\\u0628\\u0642\\u064A\\u0629: \".concat(response.data.customer_remaining_debt.toFixed(2),\" \\u062C.\\u0645\\n\\n\");message+=\"\\uD83D\\uDCCB \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u0633\\u0648\\u0627\\u0629 (\".concat(response.data.invoices_count,\"):\\n\");response.data.settled_invoices.forEach(inv=>{message+=\"\\n\\u2022 \".concat(inv.invoice_number,\"\\n\");message+=\"  \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639: \".concat(inv.amount_paid.toFixed(2),\" \\u062C.\\u0645\\n\");message+=\"  \\u0627\\u0644\\u062D\\u0627\\u0644\\u0629: \".concat(inv.status,\"\\n\");});message+=\"\\n\".concat(response.data.note);alert(message);// Update local state\nsetIsCustomerAlsoSupplier(response.data.supplier_new_balance>0);setSupplierBalance(response.data.supplier_new_balance);}catch(error){var _error$response21,_error$response21$dat;console.error('Error reconciling account:',error);alert(((_error$response21=error.response)===null||_error$response21===void 0?void 0:(_error$response21$dat=_error$response21.data)===null||_error$response21$dat===void 0?void 0:_error$response21$dat.detail)||'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ³ÙˆÙŠØ©');}finally{setLoading(false);}};const totalRemaining=deferredInvoices.reduce((sum,inv)=>sum+inv.remaining_amount,0);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 bg-gray-50 min-h-screen\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-800 flex items-center gap-2\",children:\"\\uD83D\\uDCB5 \\u062A\\u0635\\u0641\\u064A\\u0629 \\u062D\\u0633\\u0627\\u0628 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2\",children:\"\\u062F\\u0641\\u0639 \\u0645\\u0628\\u0644\\u063A \\u0644\\u062A\\u0635\\u0641\\u064A\\u0629 \\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0627\\u0644\\u0622\\u062C\\u0644\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-4\",children:\"\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062A\\u0635\\u0641\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 *\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedCustomer||'',onChange:e=>handleCustomerChange(e.target.value),className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- \\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 --\"}),customers.map(customer=>/*#__PURE__*/_jsx(\"option\",{value:customer.id,children:customer.name},customer.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639 (\\u062C.\\u0645) *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:amountPaid,onChange:e=>setAmountPaid(e.target.value),placeholder:\"0.00\",className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639 *\"}),/*#__PURE__*/_jsxs(\"select\",{value:paymentMethod,onChange:e=>setPaymentMethod(e.target.value),className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u0646\\u0642\\u062F\\u064A\",children:\"\\u0646\\u0642\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 010\",children:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 010\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0643\\u0627\\u0634 0100\",children:\"\\u0643\\u0627\\u0634 0100\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0627\\u0646\\u0633\\u062A\\u0627\\u0628\\u0627\\u064A\",children:\"\\u0627\\u0646\\u0633\\u062A\\u0627\\u0628\\u0627\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u064A\\u062F \\u0627\\u0644\\u0635\\u0627\\u0648\\u064A\",children:\"\\u064A\\u062F \\u0627\\u0644\\u0635\\u0627\\u0648\\u064A\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleSettleAccount,disabled:loading||!selectedCustomer||!amountPaid,className:\"w-full py-3 rounded-lg font-semibold text-white transition-colors \".concat(loading||!selectedCustomer||!amountPaid?'bg-gray-400 cursor-not-allowed':'bg-green-500 hover:bg-green-600'),children:loading?'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØµÙÙŠØ©...':'âœ… ØªØµÙÙŠØ© Ø§Ù„Ø­Ø³Ø§Ø¨'})})]}),selectedCustomer&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 rounded-lg border-2 transition-all \".concat(isCustomerAlsoSupplier&&totalRemaining>0?'bg-gradient-to-r from-purple-50 to-blue-50 border-purple-300':'bg-gray-50 border-gray-300'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold mb-2 \".concat(isCustomerAlsoSupplier?'text-purple-800':'text-gray-500'),children:\"\\uD83D\\uDD04 \\u062A\\u0633\\u0648\\u064A\\u0629 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628 (\\u0639\\u0645\\u064A\\u0644 \\u0648\\u0645\\u0648\\u0631\\u062F)\"}),isCustomerAlsoSupplier?/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm space-y-1\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"\\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F:\"}),\" \",supplierBalance.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"\\u062F\\u064A\\u0648\\u0646 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644:\"}),\" \",totalRemaining.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-purple-700 font-semibold\",children:[\"\\u0633\\u064A\\u062A\\u0645 \\u062A\\u0633\\u0648\\u064A\\u0629: \",Math.min(supplierBalance,totalRemaining).toFixed(2),\" \\u062C.\\u0645\"]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:!isCustomerAlsoSupplier&&supplierBalance===0?'âš ï¸ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„ÙŠØ³ Ù…ÙˆØ±Ø¯Ø§Ù‹ Ø£Ùˆ Ø±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ±Ø¯ = 0':totalRemaining===0?'âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙˆØ§ØªÙŠØ± Ø¢Ø¬Ù„Ø© Ù…Ø³ØªØ­Ù‚Ø©':'âš ï¸ Ø§Ù„ØªØ³ÙˆÙŠØ© ØºÙŠØ± Ù…ØªØ§Ø­Ø©'})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleReconciliation,disabled:loading||!isCustomerAlsoSupplier||totalRemaining===0||supplierBalance===0,className:\"px-6 py-3 rounded-lg font-semibold text-white transition-colors \".concat(loading||!isCustomerAlsoSupplier||totalRemaining===0||supplierBalance===0?'bg-gray-400 cursor-not-allowed':'bg-purple-600 hover:bg-purple-700'),title:!isCustomerAlsoSupplier?'Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„ÙŠØ³ Ù…ÙˆØ±Ø¯Ø§Ù‹':supplierBalance===0?'Ø±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ±Ø¯ = 0':totalRemaining===0?'Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙˆØ§ØªÙŠØ± Ø¢Ø¬Ù„Ø©':'ØªØ³ÙˆÙŠØ© Ø§Ù„Ø­Ø³Ø§Ø¨',children:loading?'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ³ÙˆÙŠØ©...':'ğŸ”„ ØªØ³ÙˆÙŠØ©'})]}),isCustomerAlsoSupplier&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-purple-600 mt-2\",children:\"\\u26A0\\uFE0F \\u062A\\u0633\\u0648\\u064A\\u0629 \\u062F\\u0627\\u062E\\u0644\\u064A\\u0629 \\u0628\\u062F\\u0648\\u0646 \\u062A\\u0623\\u062B\\u064A\\u0631 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629\"})]})]}),selectedCustomer&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-semibold\",children:[\"\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0622\\u062C\\u0644\\u0629 (\",deferredInvoices.length,\")\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-red-600\",children:[totalRemaining.toFixed(2),\" \\u062C.\\u0645\"]})]})]}),deferredInvoices.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u2705 \\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0622\\u062C\\u0644\\u0629 \\u0645\\u0633\\u062A\\u062D\\u0642\\u0629 \\u0644\\u0647\\u0630\\u0627 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3 text-right\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3 text-right\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3 text-right\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3 text-right\",children:\"\\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3 text-right\",children:\"\\u0627\\u0644\\u0645\\u062A\\u0628\\u0642\\u064A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:deferredInvoices.map((invoice,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:index%2===0?'bg-white':'bg-gray-50',children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3 font-semibold\",children:invoice.invoice_number}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3\",children:new Date(invoice.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3\",children:[invoice.total_amount.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3 text-green-600\",children:[invoice.paid_amount.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3 text-red-600 font-bold\",children:[invoice.remaining_amount.toFixed(2),\" \\u062C.\\u0645\"]})]},invoice.id))}),/*#__PURE__*/_jsx(\"tfoot\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-200 font-bold\",children:[/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",className:\"border border-gray-300 p-3 text-right\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A:\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3 text-red-600\",children:[totalRemaining.toFixed(2),\" \\u062C.\\u0645\"]})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 p-4 bg-blue-50 rounded-lg border-r-4 border-blue-500\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-700\",children:[\"\\uD83D\\uDCA1 \",/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0629:\"}),\" \\u0633\\u064A\\u062A\\u0645 \\u062A\\u0648\\u0632\\u064A\\u0639 \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0628\\u062A\\u0631\\u062A\\u064A\\u0628 \\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E \\u0645\\u0646 \\u0627\\u0644\\u0623\\u0642\\u062F\\u0645 \\u0644\\u0644\\u0623\\u062D\\u062F\\u062B\"]})})]})]});};// Work Orders Component\nconst WorkOrders=()=>{const[workOrders,setWorkOrders]=useState([]);const[invoices,setInvoices]=useState([]);const[selectedInvoices,setSelectedInvoices]=useState([]);const[newWorkOrder,setNewWorkOrder]=useState({title:'',description:'',priority:'Ø¹Ø§Ø¯ÙŠ'});const[showAddToExisting,setShowAddToExisting]=useState(false);const[selectedWorkOrderId,setSelectedWorkOrderId]=useState('');const[selectedInvoiceForAdd,setSelectedInvoiceForAdd]=useState('');useEffect(()=>{fetchWorkOrders();fetchInvoices();},[]);const fetchWorkOrders=async()=>{try{const response=await axios.get(\"\".concat(API,\"/work-orders\"));setWorkOrders(response.data);}catch(error){console.error('Error fetching work orders:',error);setWorkOrders([]);// Set empty array on error\n}};const fetchInvoices=async()=>{try{const response=await axios.get(\"\".concat(API,\"/invoices\"));setInvoices(response.data);}catch(error){console.error('Error fetching invoices:',error);}};const toggleInvoiceSelection=invoiceId=>{setSelectedInvoices(prev=>prev.includes(invoiceId)?prev.filter(id=>id!==invoiceId):[...prev,invoiceId]);};const createWorkOrderFromMultipleInvoices=async()=>{if(selectedInvoices.length===0){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ÙØ§ØªÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');return;}if(!newWorkOrder.title.trim()){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„');return;}try{// Get selected invoices data\nconst selectedInvoicesData=invoices.filter(inv=>selectedInvoices.includes(inv.id));// Clean invoices data (remove MongoDB ObjectIds)\nconst cleanInvoices=selectedInvoicesData.map(inv=>{const cleanInv=_objectSpread({},inv);if(cleanInv._id)delete cleanInv._id;return cleanInv;});// Create work order with multiple invoices\nconst workOrderData={title:newWorkOrder.title,description:newWorkOrder.description,priority:newWorkOrder.priority,invoices:cleanInvoices,total_amount:cleanInvoices.reduce((sum,inv)=>sum+(inv.total_amount||0),0),total_items:cleanInvoices.reduce((sum,inv)=>{var _inv$items;return sum+(((_inv$items=inv.items)===null||_inv$items===void 0?void 0:_inv$items.length)||0);},0)};const response=await axios.post(\"\".concat(API,\"/work-orders/multiple\"),workOrderData);if(response.data){alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ø¨Ù†Ø¬Ø§Ø­');// Reset form\nsetSelectedInvoices([]);setNewWorkOrder({title:'',description:'',priority:'Ø¹Ø§Ø¯ÙŠ'});// Refresh work orders list\nawait fetchWorkOrders();}}catch(error){var _error$response22,_error$response22$dat;console.error('Error creating work order:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„: '+(((_error$response22=error.response)===null||_error$response22===void 0?void 0:(_error$response22$dat=_error$response22.data)===null||_error$response22$dat===void 0?void 0:_error$response22$dat.detail)||error.message));}};const addInvoiceToExistingWorkOrder=async()=>{if(!selectedWorkOrderId||!selectedInvoiceForAdd){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ ÙˆØ§Ù„ÙØ§ØªÙˆØ±Ø©');return;}try{const response=await axios.put(\"\".concat(API,\"/work-orders/\").concat(selectedWorkOrderId,\"/add-invoice\"),null,{params:{invoice_id:selectedInvoiceForAdd}});if(response.data){alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¥Ù„Ù‰ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ø¨Ù†Ø¬Ø§Ø­');// Reset form\nsetSelectedWorkOrderId('');setSelectedInvoiceForAdd('');setShowAddToExisting(false);// Refresh work orders list\nawait fetchWorkOrders();}}catch(error){var _error$response23,_error$response23$dat;console.error('Error adding invoice to work order:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ§ØªÙˆØ±Ø©: '+(((_error$response23=error.response)===null||_error$response23===void 0?void 0:(_error$response23$dat=_error$response23.data)===null||_error$response23$dat===void 0?void 0:_error$response23$dat.detail)||error.message));}};const getInvoiceDetails=invoiceId=>{return invoices.find(inv=>inv.id===invoiceId);};const getAvailableInvoices=()=>{// Show invoices that are \"ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°\" or \"Ø§Ù†ØªØ¸Ø§Ø±\"\nreturn invoices.filter(invoice=>invoice.status==='ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°'||invoice.status==='Ø§Ù†ØªØ¸Ø§Ø±');};const getAvailableInvoicesForAdd=()=>{var _selectedWorkOrder$in;// Get invoices not already in the selected work order\nif(!selectedWorkOrderId)return getAvailableInvoices();const selectedWorkOrder=workOrders.find(wo=>wo.id===selectedWorkOrderId);if(!selectedWorkOrder)return getAvailableInvoices();const usedInvoiceIds=((_selectedWorkOrder$in=selectedWorkOrder.invoices)===null||_selectedWorkOrder$in===void 0?void 0:_selectedWorkOrder$in.map(inv=>inv.id))||[];return getAvailableInvoices().filter(invoice=>!usedInvoiceIds.includes(invoice.id));};const printWorkOrder=workOrder=>{var _workOrder$invoices;const workOrderInvoices=((_workOrder$invoices=workOrder.invoices)===null||_workOrder$invoices===void 0?void 0:_workOrder$invoices.map(invoiceData=>invoices.find(inv=>inv.id===invoiceData.id)||invoiceData).filter(inv=>inv))||[];const totalAmount=workOrderInvoices.reduce((sum,inv)=>sum+(inv.total_amount||0),0);const totalItems=workOrderInvoices.reduce((sum,inv)=>{var _inv$items2;return sum+(((_inv$items2=inv.items)===null||_inv$items2===void 0?void 0:_inv$items2.length)||0);},0);const printContent=\"\\n      <div style=\\\"font-family: Arial, sans-serif; direction: rtl; text-align: right;\\\">\\n        <div style=\\\"text-align: center; margin-bottom: 20px;\\\">\\n          <h1>\\u0645\\u0627\\u0633\\u062A\\u0631 \\u0633\\u064A\\u0644</h1>\\n          <p>\\u0627\\u0644\\u062D\\u0631\\u0641\\u064A\\u064A\\u0646 \\u0634\\u0627\\u0631\\u0639 \\u0627\\u0644\\u0633\\u0648\\u0628\\u0631 \\u062C\\u064A\\u062A - 01020630677</p>\\n          <h2 style=\\\"color: #333; margin-top: 20px;\\\">\\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644</h2>\\n        </div>\\n        \\n        <div style=\\\"margin-bottom: 20px;\\\">\\n          <strong>\\u0631\\u0642\\u0645 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644:</strong> \".concat(workOrder.id,\"<br>\\n          <strong>\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646:</strong> \").concat(workOrder.title||\"\\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 #\".concat(workOrder.id.slice(-8)),\"<br>\\n          <strong>\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E:</strong> \").concat(new Date(workOrder.created_at).toLocaleDateString('ar-EG'),\"<br>\\n          <strong>\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629:</strong> \").concat(workOrder.status||'Ø¬Ø¯ÙŠØ¯',\"<br>\\n          <strong>\\u0639\\u062F\\u062F \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631:</strong> \").concat(workOrderInvoices.length,\"<br>\\n          <strong>\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A:</strong> \\u062C.\\u0645 \").concat(totalAmount.toFixed(2),\"\\n          \").concat(workOrder.description?\"<br><strong>\\u0627\\u0644\\u0648\\u0635\\u0641:</strong> \".concat(workOrder.description):'',\"\\n          \").concat(workOrder.supervisor_name?\"<br><strong>\\u0627\\u0644\\u0645\\u0634\\u0631\\u0641 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639:</strong> \".concat(workOrder.supervisor_name):'',\"\\n          \").concat(workOrder.is_daily?\"<br><strong>\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0623\\u0645\\u0631:</strong> \\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 \\u064A\\u0648\\u0645\\u064A \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\":'',\"\\n        </div>\\n\\n        <h3 style=\\\"color: #333; margin-bottom: 10px;\\\">\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062F\\u0631\\u062C\\u0629:</h3>\\n        <table style=\\\"width: 100%; border-collapse: collapse; margin-bottom: 20px;\\\">\\n          <thead>\\n            <tr style=\\\"background-color: #f0f0f0;\\\">\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0639\\u062F\\u062F \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A</th>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            \").concat(workOrderInvoices.map(invoice=>{var _invoice$total_amount4,_invoice$items;return\"\\n              <tr>\\n                <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\".concat(invoice.invoice_number,\"</td>\\n                <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(invoice.customer_name,\"</td>\\n                <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(new Date(invoice.date).toLocaleDateString('ar-EG'),\"</td>\\n                <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u062C.\\u0645 \").concat(((_invoice$total_amount4=invoice.total_amount)===null||_invoice$total_amount4===void 0?void 0:_invoice$total_amount4.toFixed(2))||'0.00',\"</td>\\n                <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(((_invoice$items=invoice.items)===null||_invoice$items===void 0?void 0:_invoice$items.length)||0,\"</td>\\n              </tr>\\n            \");}).join(''),\"\\n          </tbody>\\n        </table>\\n\\n        <h3 style=\\\"color: #333; margin-bottom: 10px;\\\">\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A:</h3>\\n        <table style=\\\"width: 100%; border-collapse: collapse; margin-bottom: 20px;\\\">\\n          <thead>\\n            <tr style=\\\"background-color: #f0f0f0;\\\">\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0627\\u0644\\u0645\\u0642\\u0627\\u0633</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0627\\u0644\\u062E\\u0627\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\\u0629</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629</th>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            \").concat(workOrderInvoices.map(invoice=>{var _invoice$items2;return((_invoice$items2=invoice.items)===null||_invoice$items2===void 0?void 0:_invoice$items2.map(item=>\"\\n                <tr>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\".concat(invoice.invoice_number,\"</td>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(item.local_product_details?item.local_product_details.product_type:item.seal_type||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',\"</td>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(item.local_product_details?'Ù…Ø­Ù„ÙŠ':item.material_type||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',\"</td>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(item.local_product_details?\"\".concat(item.local_product_details.product_size,\" - \").concat(item.local_product_details.product_type):item.inner_diameter&&item.outer_diameter&&item.height?\"\".concat(item.inner_diameter,\" \\xD7 \").concat(item.outer_diameter,\" \\xD7 \").concat(item.height).concat(item.wall_height?\" (\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629: \".concat(item.wall_height,\")\"):''):'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',\"</td>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(item.quantity,\"</td>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(item.local_product_details?'Ù…Ø­Ù„ÙŠ':item.material_used||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',\"</td>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\n                    \").concat(item.local_product_details?'Ù…Ø­Ù„ÙŠ':item.material_details?item.material_details.is_finished_product?'Ù…Ø®Ø²Ù† Ø§Ù†ØªØ§Ø¬ ØªØ§Ù…':\"\".concat(item.material_details.unit_code,\" / \").concat(item.material_details.inner_diameter,\"-\").concat(item.material_details.outer_diameter):\"\".concat(item.material_used||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',\" / \\u0645\\u0639\\u0644\\u0648\\u0645\\u0627\\u062A \\u063A\\u064A\\u0631 \\u0645\\u062A\\u0648\\u0641\\u0631\\u0629\"),\"\\n                  </td>\\n                </tr>\\n              \")).join(''))||'';}).join(''),\"\\n          </tbody>\\n        </table>\\n        \\n        <div style=\\\"margin-top: 40px; border-top: 1px solid #ddd; padding-top: 20px;\\\">\\n          <div style=\\\"float: left;\\\">\\n            <strong>\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639:</strong><br>\\n            <div style=\\\"margin-top: 10px; height: 50px; border: 1px solid #ddd;\\\"></div>\\n          </div>\\n          <div style=\\\"float: right;\\\">\\n            <strong>\\u062A\\u0648\\u0642\\u064A\\u0639 \\u0627\\u0644\\u0645\\u0633\\u0624\\u0648\\u0644:</strong><br>\\n            <div style=\\\"margin-top: 10px; height: 50px; border: 1px solid #ddd; width: 150px;\\\"></div>\\n          </div>\\n          <div style=\\\"clear: both;\\\"></div>\\n        </div>\\n      </div>\\n    \");const printWindow=window.open('','_blank');printWindow.document.write(printContent);printWindow.document.close();printWindow.print();};const clearAllWorkOrders=async()=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´ØºÙ„ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.'))return;try{await axios.delete(\"\".concat(API,\"/work-orders/clear-all\"));fetchWorkOrders();alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´ØºÙ„');}catch(error){console.error('Error clearing work orders:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');}};const deleteWorkOrder=async workOrderId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ù‡Ø°Ø§ØŸ'))return;try{await axios.delete(\"\".concat(API,\"/work-orders/\").concat(workOrderId));fetchWorkOrders();alert('ØªÙ… Ø­Ø°Ù Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error deleting work order:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-4\",children:\"\\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:clearAllWorkOrders,className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{fetchWorkOrders();fetchInvoices();},className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddToExisting(!showAddToExisting),className:\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\",children:showAddToExisting?'Ø¥Ø®ÙØ§Ø¡':'Ø¥Ø¶Ø§ÙØ© ÙØ§ØªÙˆØ±Ø© Ù„Ø£Ù…Ø± Ù…ÙˆØ¬ÙˆØ¯'}),/*#__PURE__*/_jsxs(\"select\",{className:\"border border-gray-300 rounded px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"\\u064A\\u0648\\u0645\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0623\\u0633\\u0628\\u0648\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0634\\u0647\\u0631\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0633\\u0646\\u0648\\u064A\"})]})]})]}),showAddToExisting&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 p-6 rounded-lg shadow-md mb-6 border border-yellow-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4 text-yellow-800\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0625\\u0644\\u0649 \\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 \\u0645\\u0648\\u062C\\u0648\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedWorkOrderId,onChange:e=>setSelectedWorkOrderId(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644\"}),workOrders.map(workOrder=>{var _workOrder$invoices2;return/*#__PURE__*/_jsxs(\"option\",{value:workOrder.id,children:[workOrder.title||\"\\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 #\".concat(workOrder.id.slice(-8)),\"(\",((_workOrder$invoices2=workOrder.invoices)===null||_workOrder$invoices2===void 0?void 0:_workOrder$invoices2.length)||0,\" \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629)\"]},workOrder.id);})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedInvoiceForAdd,onChange:e=>setSelectedInvoiceForAdd(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",disabled:!selectedWorkOrderId,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),getAvailableInvoicesForAdd().map(invoice=>{var _invoice$total_amount5;return/*#__PURE__*/_jsxs(\"option\",{value:invoice.id,children:[invoice.invoice_number,\" - \",invoice.customer_name,\"(\\u062C.\\u0645 \",((_invoice$total_amount5=invoice.total_amount)===null||_invoice$total_amount5===void 0?void 0:_invoice$total_amount5.toFixed(2))||'0.00',\")\"]},invoice.id);})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:addInvoiceToExistingWorkOrder,className:\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\",disabled:!selectedWorkOrderId||!selectedInvoiceForAdd,children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowAddToExisting(false);setSelectedWorkOrderId('');setSelectedInvoiceForAdd('');},className:\"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0646\\u0634\\u0627\\u0621 \\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 \\u062C\\u062F\\u064A\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644 *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newWorkOrder.title,onChange:e=>setNewWorkOrder(_objectSpread(_objectSpread({},newWorkOrder),{},{title:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0645\\u062B\\u0627\\u0644: \\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 \\u0631\\u0642\\u0645 1 - \\u064A\\u0646\\u0627\\u064A\\u0631 2025\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0623\\u0648\\u0644\\u0648\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"select\",{value:newWorkOrder.priority,onChange:e=>setNewWorkOrder(_objectSpread(_objectSpread({},newWorkOrder),{},{priority:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u0639\\u0627\\u062F\\u064A\",children:\"\\u0639\\u0627\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0645\\u0647\\u0645\",children:\"\\u0645\\u0647\\u0645\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0637\\u0627\\u0631\\u0626\",children:\"\\u0637\\u0627\\u0631\\u0626\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062E\\u062A\\u0627\\u0631\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-gray-100 rounded\",children:[selectedInvoices.length,\" \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0645\\u062D\\u062F\\u062F\\u0629\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0648\\u0635\\u0641 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644\"}),/*#__PURE__*/_jsx(\"textarea\",{value:newWorkOrder.description,onChange:e=>setNewWorkOrder(_objectSpread(_objectSpread({},newWorkOrder),{},{description:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded h-20\",placeholder:\"\\u0648\\u0635\\u0641 \\u0625\\u0636\\u0627\\u0641\\u064A (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4 max-h-60 overflow-y-auto border rounded p-4\",children:getAvailableInvoices().map(invoice=>{var _invoice$total_amount6,_invoice$items3;return/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-3 cursor-pointer transition-colors \".concat(selectedInvoices.includes(invoice.id)?'border-blue-500 bg-blue-50':'border-gray-300 hover:bg-gray-50'),onClick:()=>toggleInvoiceSelection(invoice.id),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedInvoices.includes(invoice.id),onChange:()=>{},className:\"ml-2\"}),/*#__PURE__*/_jsx(\"h5\",{className:\"font-semibold\",children:invoice.invoice_number})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644: \",invoice.customer_name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E: \",new Date(invoice.date).toLocaleDateString('ar-EG')]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium\",children:[\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A: \\u062C.\\u0645 \",((_invoice$total_amount6=invoice.total_amount)===null||_invoice$total_amount6===void 0?void 0:_invoice$total_amount6.toFixed(2))||'0.00']}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A: \",((_invoice$items3=invoice.items)===null||_invoice$items3===void 0?void 0:_invoice$items3.length)||0,\" \\u0635\\u0646\\u0641\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-block px-2 py-1 rounded text-xs mt-1 \".concat(invoice.status==='ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°'?'bg-green-100 text-green-800':'bg-blue-100 text-blue-800'),children:invoice.status})]},invoice.id);})}),getAvailableInvoices().length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0645\\u062A\\u0627\\u062D\\u0629 \\u0644\\u0625\\u0646\\u0634\\u0627\\u0621 \\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644\"}),selectedInvoices.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-3 bg-blue-100 rounded\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-semibold text-blue-800\",children:\"\\u0645\\u0644\\u062E\\u0635 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644:\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-700\",children:[\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631: \",selectedInvoices.length,\" \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-700\",children:[\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A: \\u062C.\\u0645 \",invoices.filter(inv=>selectedInvoices.includes(inv.id)).reduce((sum,inv)=>sum+(inv.total_amount||0),0).toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-700\",children:[\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A: \",invoices.filter(inv=>selectedInvoices.includes(inv.id)).reduce((sum,inv)=>{var _inv$items3;return sum+(((_inv$items3=inv.items)===null||_inv$items3===void 0?void 0:_inv$items3.length)||0);},0),\" \\u0635\\u0646\\u0641\"]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:createWorkOrderFromMultipleInvoices,className:\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\",disabled:selectedInvoices.length===0,children:[\"\\u0625\\u0646\\u0634\\u0627\\u0621 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644 (\",selectedInvoices.length,\" \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold mb-4\",children:[\"\\u0623\\u0648\\u0627\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644 (\",workOrders.length,\")\"]}),workOrders.map(workOrder=>{var _workOrder$total_amou;// Handle both single invoice and multiple invoices work orders\nconst workOrderInvoices=workOrder.invoices||(workOrder.invoice_id?[getInvoiceDetails(workOrder.invoice_id)]:[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-lg\",children:workOrder.title||\"\\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 #\".concat(workOrder.id.slice(-8))}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0623\\u0648\\u0644\\u0648\\u064A\\u0629:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mr-2 px-2 py-1 rounded text-sm \".concat(workOrder.priority==='Ø·Ø§Ø±Ø¦'?'bg-red-100 text-red-800':workOrder.priority==='Ù…Ù‡Ù…'?'bg-yellow-100 text-yellow-800':'bg-blue-100 text-blue-800'),children:workOrder.priority||'Ø¹Ø§Ø¯ÙŠ'})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u062A\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u0625\\u0646\\u0634\\u0627\\u0621:\"}),\" \",new Date(workOrder.created_at).toLocaleDateString('ar-EG')]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631:\"}),\" \",workOrderInvoices.filter(inv=>inv).length]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mr-2 px-2 py-1 rounded text-sm bg-blue-100 text-blue-800\",children:workOrder.status||'Ø¬Ø¯ÙŠØ¯'})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A:\"}),\"\\u062C.\\u0645 \",((_workOrder$total_amou=workOrder.total_amount)===null||_workOrder$total_amou===void 0?void 0:_workOrder$total_amou.toFixed(2))||workOrderInvoices.reduce((sum,inv)=>sum+((inv===null||inv===void 0?void 0:inv.total_amount)||0),0).toFixed(2)]}),workOrder.description&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0648\\u0635\\u0641:\"}),\" \",workOrder.description]}),workOrder.supervisor_name&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0645\\u0634\\u0631\\u0641 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639:\"}),\" \",workOrder.supervisor_name]}),workOrder.is_daily&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0623\\u0645\\u0631:\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600\",children:\"\\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 \\u064A\\u0648\\u0645\\u064A \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium mb-2\",children:\"\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062F\\u0631\\u062C\\u0629:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\",children:workOrderInvoices.filter(invoice=>invoice).map((invoice,index)=>{var _invoice$total_amount7,_invoice$items4;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-3 rounded border\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629:\"}),\" \",invoice.invoice_number]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644:\"}),\" \",invoice.customer_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A:\"}),\" \\u062C.\\u0645 \",((_invoice$total_amount7=invoice.total_amount)===null||_invoice$total_amount7===void 0?void 0:_invoice$total_amount7.toFixed(2))||'0.00']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A:\"}),\" \",((_invoice$items4=invoice.items)===null||_invoice$items4===void 0?void 0:_invoice$items4.length)||0,\" \\u0635\\u0646\\u0641\"]})]},index);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto mb-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium mb-2\",children:\"\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A:\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0642\\u0627\\u0633\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062E\\u0627\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:workOrderInvoices.filter(invoice=>invoice).map(invoice=>{var _invoice$items5;return((_invoice$items5=invoice.items)===null||_invoice$items5===void 0?void 0:_invoice$items5.map((item,itemIndex)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.invoice_number}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.seal_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.material_type}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[item.inner_diameter,\" \\xD7 \",item.outer_diameter,\" \\xD7 \",item.height]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.quantity}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.material_details?item.material_details.is_finished_product?/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm\",children:\"\\u0645\\u0646\\u062A\\u062C \\u062C\\u0627\\u0647\\u0632\"}):/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 bg-green-100 text-green-800 rounded text-sm\",children:item.material_details.material_type}):/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 bg-green-100 text-green-800 rounded text-sm\",children:item.material_used||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"font-mono text-sm\",children:item.material_details?item.material_details.is_finished_product?/*#__PURE__*/_jsx(\"div\",{className:\"text-center font-semibold text-blue-600\",children:\"\\u0645\\u062E\\u0632\\u0646 \\u0627\\u0646\\u062A\\u0627\\u062C \\u062A\\u0627\\u0645\"}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold\",children:item.unit_code_display||item.material_details.unit_code}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-600\",children:[item.material_details.inner_diameter,\" - \",item.material_details.outer_diameter]})]}):/*#__PURE__*/// Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø£Ùˆ Ø¹Ù†Ø¯Ù…Ø§ Ù„Ø§ ØªÙˆØ¬Ø¯ material_details\n_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold\",children:item.material_used||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-600\",children:\"\\u0645\\u0639\\u0644\\u0648\\u0645\\u0627\\u062A \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629 \\u063A\\u064A\\u0631 \\u0645\\u062A\\u0648\\u0641\\u0631\\u0629\"})]})})})]},\"\".concat(invoice.id,\"-\").concat(itemIndex))))||[];})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>printWorkOrder(workOrder),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644 \\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedWorkOrderId(workOrder.id);setShowAddToExisting(true);},className:\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteWorkOrder(workOrder.id),className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641\"})]})]},workOrder.id);}),workOrders.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0623\\u0648\\u0627\\u0645\\u0631 \\u0634\\u063A\\u0644\"})]})]});};// Treasury Management Component\nconst Treasury=()=>{const{user}=useAuth();// Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ\nconst[accounts,setAccounts]=useState([{id:'cash',name:'Ù†Ù‚Ø¯ÙŠ',balance:0,transactions:[]},{id:'vodafone_elsawy',name:'ÙÙˆØ¯Ø§ÙÙˆÙ† 010',balance:0,transactions:[]},{id:'vodafone_wael',name:'ÙƒØ§Ø´ 0100',balance:0,transactions:[]},{id:'deferred',name:'Ø¢Ø¬Ù„',balance:0,transactions:[]},{id:'instapay',name:'Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ',balance:0,transactions:[]},{id:'yad_elsawy',name:'ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ',balance:0,transactions:[]}]);const[selectedAccount,setSelectedAccount]=useState('cash');const[showTransferModal,setShowTransferModal]=useState(false);const[transferData,setTransferData]=useState({from:'cash',to:'vodafone_elsawy',amount:'',notes:''});const[manualTransaction,setManualTransaction]=useState({account:'cash',type:'income',// income or expense\namount:'',description:'',notes:''});const[showManualForm,setShowManualForm]=useState(false);const[searchTerm,setSearchTerm]=useState('');// Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø­Ø«\nuseEffect(()=>{fetchTreasuryData();},[]);const fetchTreasuryData=async()=>{try{// Fetch balances and transactions from backend\nconst balancesResponse=await axios.get(\"\".concat(API,\"/treasury/balances\"));const transactionsResponse=await axios.get(\"\".concat(API,\"/treasury/transactions\"));const invoicesResponse=await axios.get(\"\".concat(API,\"/invoices\"));const expensesResponse=await axios.get(\"\".concat(API,\"/expenses\"));const balances=balancesResponse.data;const manualTransactions=transactionsResponse.data;const invoices=invoicesResponse.data;const expenses=expensesResponse.data;// Update accounts with balances and transactions\nconst updatedAccounts=accounts.map(account=>{let transactions=[];// Add invoice transactions\ninvoices.forEach(invoice=>{const paymentMethodMap={'Ù†Ù‚Ø¯ÙŠ':'cash','ÙÙˆØ¯Ø§ÙÙˆÙ† 010':'vodafone_elsawy','ÙƒØ§Ø´ 0100':'vodafone_wael','Ø¢Ø¬Ù„':'deferred','Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ':'instapay','ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ':'yad_elsawy'};if(paymentMethodMap[invoice.payment_method]===account.id){transactions.push({id:\"inv-\".concat(invoice.id),type:'income',amount:invoice.total_amount||0,description:\"\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0631\\u0642\\u0645 \".concat(invoice.invoice_number),date:invoice.date,reference:\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644: \".concat(invoice.customer_name)});}});// Add expense transactions (only from cash account)\nif(account.id==='cash'){expenses.forEach(expense=>{transactions.push({id:\"exp-\".concat(expense.id),type:'expense',amount:expense.amount||0,description:expense.description||'Ù…ØµØ±ÙˆÙ',date:expense.date,category:expense.category});});}// Add manual transactions\nmanualTransactions.filter(transaction=>transaction.account_id===account.id).forEach(transaction=>{transactions.push({id:transaction.id,type:transaction.transaction_type,amount:transaction.amount,description:transaction.description,date:transaction.date,reference:transaction.reference});});return _objectSpread(_objectSpread({},account),{},{balance:balances[account.id]||0,transactions:transactions.sort((a,b)=>new Date(b.date)-new Date(a.date))});});setAccounts(updatedAccounts);}catch(error){console.error('Error fetching treasury data:',error);}};const handleTransfer=async()=>{if(!transferData.amount||parseFloat(transferData.amount)<=0){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');return;}const amount=parseFloat(transferData.amount);const fromAccount=accounts.find(acc=>acc.id===transferData.from);if(fromAccount.balance<amount){alert('Ø§Ù„Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙŠ');return;}try{await axios.post(\"\".concat(API,\"/treasury/transfer\"),{from_account:transferData.from,to_account:transferData.to,amount:amount,notes:transferData.notes});// Refresh data\nfetchTreasuryData();setShowTransferModal(false);setTransferData({from:'cash',to:'vodafone_elsawy',amount:'',notes:''});alert('ØªÙ… Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error processing transfer:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­ÙˆÙŠÙ„');}};const handleManualTransaction=async()=>{if(!manualTransaction.amount||parseFloat(manualTransaction.amount)<=0){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');return;}const amount=parseFloat(manualTransaction.amount);try{await axios.post(\"\".concat(API,\"/treasury/transactions\"),{account_id:manualTransaction.account,transaction_type:manualTransaction.type,amount:amount,description:manualTransaction.description,reference:manualTransaction.notes||'Ø¥Ø¯Ø®Ø§Ù„ ÙŠØ¯ÙˆÙŠ'});// Refresh data\nfetchTreasuryData();setShowManualForm(false);setManualTransaction({account:'cash',type:'income',amount:'',description:'',notes:''});alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error processing manual transaction:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');}};const clearAccount=async accountId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØµÙÙŠØ± Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.'))return;const account=accounts.find(acc=>acc.id===accountId);if(!account||account.balance===0){alert('Ø§Ù„Ø­Ø³Ø§Ø¨ ÙØ§Ø±Øº Ø¨Ø§Ù„ÙØ¹Ù„ Ø£Ùˆ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');return;}try{// If clearing \"ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ\", transfer to main treasury\nif(accountId==='yad_elsawy'){// Transfer to main treasury\nawait axios.post(\"\".concat(API,\"/main-treasury/transfer-from-yad?amount=\").concat(account.balance,\"&username=\").concat(user.username));}// Create expense transaction to zero the account\nawait axios.post(\"\".concat(API,\"/treasury/transactions\"),{account_id:accountId,transaction_type:'expense',amount:account.balance,description:\"\\u062A\\u0635\\u0641\\u064A\\u0631 \\u062D\\u0633\\u0627\\u0628 \".concat(account.name).concat(accountId==='yad_elsawy'?' (ØªÙ… Ø§Ù„ØªØ±Ø­ÙŠÙ„ Ù„Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©)':''),reference:'ØªØµÙÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ù…Ø¯ÙŠØ±'});// Refresh data\nfetchTreasuryData();if(accountId==='yad_elsawy'){alert(\"\\u062A\\u0645 \\u062A\\u0635\\u0641\\u064A\\u0631 \\u062D\\u0633\\u0627\\u0628 \".concat(account.name,\" \\u0628\\u0646\\u062C\\u0627\\u062D \\u0648\\u062A\\u0631\\u062D\\u064A\\u0644 \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A \").concat(account.balance.toFixed(2),\" \\u062C.\\u0645 \\u0644\\u0644\\u062E\\u0632\\u0646\\u0629 \\u0627\\u0644\\u0631\\u0626\\u064A\\u0633\\u064A\\u0629\"));}else{alert(\"\\u062A\\u0645 \\u062A\\u0635\\u0641\\u064A\\u0631 \\u062D\\u0633\\u0627\\u0628 \".concat(account.name,\" \\u0628\\u0646\\u062C\\u0627\\u062D\"));}}catch(error){console.error('Error clearing account:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµÙÙŠØ± Ø§Ù„Ø­Ø³Ø§Ø¨');}};// Delete single transaction - Only for master\nconst deleteTransaction=async transactionId=>{if((user===null||user===void 0?void 0:user.username)!=='master'){alert('ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„Ø§Øª');return;}// Ask user about deletion type\nconst choice=confirm('ğŸ—‘ï¸ Ø­Ø°Ù Ù…Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ø®Ø²ÙŠÙ†Ø©\\n\\n'+'Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø­Ø°Ù:\\n\\n'+'âœ… Ø§Ø¶ØºØ· \"Ù…ÙˆØ§ÙÙ‚\" â†’ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© ÙˆØ¹ÙƒØ³ ØªØ£Ø«ÙŠØ±Ù‡Ø§ (Ø¹ÙƒØ³ÙŠ)\\n'+'âŒ Ø§Ø¶ØºØ· \"Ø¥Ù„ØºØ§Ø¡\" Ø«Ù… \"Ù…ÙˆØ§ÙÙ‚\" â†’ Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„ ÙÙ‚Ø· (Ø¨Ø¯ÙˆÙ† Ø¹ÙƒØ³)\\n\\n'+'Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ø£ÙˆÙ„ (Ø¹ÙƒØ³ÙŠ) ÙŠÙ†ØµØ­ Ø¨Ù‡ Ù„Ø¶Ù…Ø§Ù† Ø¯Ù‚Ø© Ø§Ù„Ø£Ø±ØµØ¯Ø©');if(choice===null)return;// User pressed Escape\nconst reverseTransaction=choice;// Final confirmation\nconst confirmMsg=reverseTransaction?'ØªØ£ÙƒÙŠØ¯: Ø³ÙŠØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© ÙˆØ¹ÙƒØ³ ØªØ£Ø«ÙŠØ±Ù‡Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø³Ø§Ø¨\\n\\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ':'ØªØ£ÙƒÙŠØ¯: Ø³ÙŠØªÙ… Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„ ÙÙ‚Ø· Ø¨Ø¯ÙˆÙ† Ø¹ÙƒØ³ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©\\n\\nâš ï¸ Ù‚Ø¯ ÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰ Ø¯Ù‚Ø© Ø§Ù„Ø£Ø±ØµØ¯Ø©\\n\\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ';if(!confirm(confirmMsg))return;try{await axios.delete(\"\".concat(API,\"/treasury/transactions/\").concat(transactionId),{params:{username:user.username,reverse_transaction:reverseTransaction}});alert('âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­');fetchTreasuryData();}catch(error){var _error$response24,_error$response24$dat;console.error('Error deleting transaction:',error);alert(((_error$response24=error.response)===null||_error$response24===void 0?void 0:(_error$response24$dat=_error$response24.data)===null||_error$response24$dat===void 0?void 0:_error$response24$dat.detail)||'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©');}};// Treasury Reset Function - Only for Elsawy\nconst resetTreasury=async()=>{if((user===null||user===void 0?void 0:user.username)!=='Elsawy'){alert('ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨ØªÙ†ÙÙŠØ° Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');return;}// Triple confirmation for this critical operation\nconst firstConfirm=confirm('âš ï¸ ØªØ­Ø°ÙŠØ±: Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø³ÙŠØ­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø²ÙŠÙ†Ø© ÙˆÙ„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!\\nÙ‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ');if(!firstConfirm)return;const secondConfirm=confirm('âš ï¸ ØªØ£ÙƒÙŠØ¯ Ø«Ø§Ù†ÙŠ: Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª ÙˆØ§Ù„Ø£Ø±ØµØ¯Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹!\\nØ§ÙƒØªØ¨ \"Ù†Ø¹Ù…\" Ù„Ù„ØªØ£ÙƒÙŠØ¯:');if(!secondConfirm)return;const finalConfirm=prompt('âš ï¸ Ù„Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØŒ Ø§ÙƒØªØ¨ Ø¨Ø§Ù„Ø¶Ø¨Ø·: \"Ø§Ø­Ø°Ù ÙƒÙ„ Ø´ÙŠØ¡\"');if(finalConfirm!=='Ø§Ø­Ø°Ù ÙƒÙ„ Ø´ÙŠØ¡'){alert('ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');return;}try{const response=await axios.post(\"\".concat(API,\"/treasury/reset\"),null,{params:{username:user.username}});alert(\"\\u2705 \\u062A\\u0645 \\u0645\\u0633\\u062D \\u062C\\u0645\\u064A\\u0639 \\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629 \\u0628\\u0646\\u062C\\u0627\\u062D!\\n\\u062A\\u0645 \\u062D\\u0630\\u0641 \".concat(response.data.deleted_treasury_transactions,\" \\u0645\\u0639\\u0627\\u0645\\u0644\\u0629\"));// Refresh data\nfetchTreasuryData();}catch(error){var _error$response25,_error$response25$dat;console.error('Error resetting treasury:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ù…Ø³Ø­ Ø§Ù„Ø®Ø²ÙŠÙ†Ø©: '+(((_error$response25=error.response)===null||_error$response25===void 0?void 0:(_error$response25$dat=_error$response25.data)===null||_error$response25$dat===void 0?void 0:_error$response25$dat.detail)||error.message));}};const selectedAccountData=accounts.find(acc=>acc.id===selectedAccount);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-4\",children:\"\\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629 - \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0623\\u0645\\u0648\\u0627\\u0644\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowTransferModal(true),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u062A\\u062D\\u0648\\u064A\\u0644 \\u0623\\u0645\\u0648\\u0627\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowManualForm(true),className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0639\\u0645\\u0644\\u064A\\u0629 \\u064A\\u062F\\u0648\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchTreasuryData,className:\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),(user===null||user===void 0?void 0:user.username)==='Elsawy'&&/*#__PURE__*/_jsx(\"button\",{onClick:resetTreasury,className:\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 font-bold border-2 border-red-800\",children:\"\\u26A0\\uFE0F \\u0645\\u0633\\u062D \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629 \\u0628\\u0627\\u0644\\u0643\\u0627\\u0645\\u0644\"}),(user===null||user===void 0?void 0:user.username)==='Elsawy'&&selectedAccount==='yad_elsawy'&&(selectedAccountData===null||selectedAccountData===void 0?void 0:selectedAccountData.balance)>0&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>clearAccount(selectedAccount),className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062A\\u0635\\u0641\\u064A\\u0631 \\u062D\\u0633\\u0627\\u0628 \\u064A\\u062F \\u0627\\u0644\\u0635\\u0627\\u0648\\u064A\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-6\",children:accounts.map(account=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 rounded-lg shadow cursor-pointer transition-colors \".concat(selectedAccount===account.id?'bg-blue-100 border-2 border-blue-500':'bg-white hover:bg-gray-50'),onClick:()=>setSelectedAccount(account.id),children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-800 mb-2\",children:account.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold \".concat(account.balance>=0?'text-green-600':'text-red-600'),children:[\"\\u062C.\\u0645 \",account.balance.toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:[account.transactions.length,\" \\u0639\\u0645\\u0644\\u064A\\u0629\"]})]},account.id))}),selectedAccountData&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold mb-4\",children:[\"\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644 \\u062D\\u0633\\u0627\\u0628: \",selectedAccountData.name]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"\\u0627\\u0644\\u0628\\u062D\\u062B \\u0641\\u064A \\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0627\\u062A...\",className:\"w-full p-3 border border-gray-300 rounded-lg\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0646\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0648\\u0635\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0631\\u062C\\u0639\"}),(user===null||user===void 0?void 0:user.username)==='master'&&/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:selectedAccountData.transactions.filter(transaction=>transaction.description.toLowerCase().includes(searchTerm.toLowerCase())||transaction.reference&&transaction.reference.toLowerCase().includes(searchTerm.toLowerCase())||transaction.category&&transaction.category.toLowerCase().includes(searchTerm.toLowerCase())).map((transaction,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(transaction.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-xs \".concat(transaction.type==='income'?'bg-green-100 text-green-800':transaction.type==='expense'?'bg-red-100 text-red-800':transaction.type==='transfer_in'?'bg-blue-100 text-blue-800':'bg-orange-100 text-orange-800'),children:transaction.type==='income'?'Ø¯Ø®Ù„':transaction.type==='expense'?'Ù…ØµØ±ÙˆÙ':transaction.type==='transfer_in'?'ØªØ­ÙˆÙŠÙ„ ÙˆØ§Ø±Ø¯':'ØªØ­ÙˆÙŠÙ„ ØµØ§Ø¯Ø±'})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.description}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:transaction.type==='income'||transaction.type==='transfer_in'?'text-green-600 font-semibold':'text-red-600 font-semibold',children:[transaction.type==='income'||transaction.type==='transfer_in'?'+':'-',\"\\u062C.\\u0645 \",transaction.amount.toFixed(2)]})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-sm text-gray-600\",children:transaction.reference||transaction.category||'-'}),(user===null||user===void 0?void 0:user.username)==='master'&&/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteTransaction(transaction.id),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",title:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0629\",children:\"\\uD83D\\uDDD1\\uFE0F\"})})]},transaction.id||index))})]}),selectedAccountData.transactions.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0639\\u0645\\u0644\\u064A\\u0627\\u062A \\u0644\\u0647\\u0630\\u0627 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\"})]})]}),showTransferModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u062A\\u062D\\u0648\\u064A\\u0644 \\u0623\\u0645\\u0648\\u0627\\u0644 \\u0628\\u064A\\u0646 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0646 \\u062D\\u0633\\u0627\\u0628\"}),/*#__PURE__*/_jsx(\"select\",{value:transferData.from,onChange:e=>setTransferData(_objectSpread(_objectSpread({},transferData),{},{from:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:accounts.map(account=>/*#__PURE__*/_jsxs(\"option\",{value:account.id,children:[account.name,\" (\\u062C.\\u0645 \",account.balance.toFixed(2),\")\"]},account.id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0625\\u0644\\u0649 \\u062D\\u0633\\u0627\\u0628\"}),/*#__PURE__*/_jsx(\"select\",{value:transferData.to,onChange:e=>setTransferData(_objectSpread(_objectSpread({},transferData),{},{to:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:accounts.filter(acc=>acc.id!==transferData.from).map(account=>/*#__PURE__*/_jsx(\"option\",{value:account.id,children:account.name},account.id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:transferData.amount,onChange:e=>setTransferData(_objectSpread(_objectSpread({},transferData),{},{amount:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"0.00\",min:\"0\",step:\"0.01\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:transferData.notes,onChange:e=>setTransferData(_objectSpread(_objectSpread({},transferData),{},{notes:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0625\\u0636\\u0627\\u0641\\u064A\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleTransfer,className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u062A\\u0623\\u0643\\u064A\\u062F \\u0627\\u0644\\u062A\\u062D\\u0648\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowTransferModal(false),className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]})}),showManualForm&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0639\\u0645\\u0644\\u064A\\u0629 \\u064A\\u062F\\u0648\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\"}),/*#__PURE__*/_jsx(\"select\",{value:manualTransaction.account,onChange:e=>setManualTransaction(_objectSpread(_objectSpread({},manualTransaction),{},{account:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:accounts.map(account=>/*#__PURE__*/_jsx(\"option\",{value:account.id,children:account.name},account.id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"select\",{value:manualTransaction.type,onChange:e=>setManualTransaction(_objectSpread(_objectSpread({},manualTransaction),{},{type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"income\",children:\"\\u062F\\u062E\\u0644\"}),/*#__PURE__*/_jsx(\"option\",{value:\"expense\",children:\"\\u0645\\u0635\\u0631\\u0648\\u0641\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:manualTransaction.amount,onChange:e=>setManualTransaction(_objectSpread(_objectSpread({},manualTransaction),{},{amount:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"0.00\",min:\"0\",step:\"0.01\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0648\\u0635\\u0641\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:manualTransaction.description,onChange:e=>setManualTransaction(_objectSpread(_objectSpread({},manualTransaction),{},{description:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0648\\u0635\\u0641 \\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:manualTransaction.notes,onChange:e=>setManualTransaction(_objectSpread(_objectSpread({},manualTransaction),{},{notes:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0625\\u0636\\u0627\\u0641\\u064A\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleManualTransaction,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowManualForm(false),className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]})})]});};// Backup and Restore Component\nconst Backup=()=>{const[backups,setBackups]=useState([]);const[driveFiles,setDriveFiles]=useState([]);const[driveStatus,setDriveStatus]=useState(null);const[loading,setLoading]=useState(false);const[creating,setCreating]=useState(false);const[activeTab,setActiveTab]=useState('local');// 'local' or 'drive'\nconst{user}=useAuth();// Bulk deletion states\nconst[showDeleteModal,setShowDeleteModal]=useState(false);const[deletePassword,setDeletePassword]=useState('');const[deleteType,setDeleteType]=useState('');// 'date', 'last-1', 'last-2'\nconst[deleteDate,setDeleteDate]=useState('');useEffect(()=>{fetchBackups();fetchDriveStatus();},[]);const fetchBackups=async()=>{setLoading(true);try{const response=await axios.get(\"\".concat(API,\"/backup/list\"));setBackups(response.data||[]);}catch(error){console.error('Error fetching backups:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©');}finally{setLoading(false);}};const fetchDriveStatus=async()=>{try{const response=await axios.get(\"\".concat(API,\"/backup/drive/status\"));setDriveStatus(response.data);}catch(error){console.error('Error fetching drive status:',error);}};const fetchDriveFiles=async()=>{setLoading(true);try{const response=await axios.get(\"\".concat(API,\"/backup/drive/list\"));setDriveFiles(response.data.files||[]);}catch(error){console.error('Error fetching drive files:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ù…Ù„ÙØ§Øª Google Drive');}finally{setLoading(false);}};// Bulk deletion functions\nconst openDeleteModal=type=>{if((user===null||user===void 0?void 0:user.username)!=='Elsawy'){alert('ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨ØªÙ†ÙÙŠØ° Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');return;}setDeleteType(type);setDeletePassword('');setDeleteDate('');setShowDeleteModal(true);};const handleBulkDelete=async()=>{if(!deletePassword){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');return;}if(deleteType==='date'&&!deleteDate){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªØ§Ø±ÙŠØ®');return;}const confirmMessage=deleteType==='date'?\"\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u062D\\u0630\\u0641 \\u062C\\u0645\\u064A\\u0639 \\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u064A\\u0648\\u0645 \".concat(deleteDate,\"\\u061F\\n\\n\\u26A0\\uFE0F \\u0633\\u064A\\u062A\\u0645:\\n\\u2022 \\u0646\\u0642\\u0644 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0644\\u0644\\u0645\\u062D\\u0630\\u0648\\u0641\\u0629\\n\\u2022 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0644\\u0644\\u0645\\u062E\\u0632\\u0646\\n\\u2022 \\u0639\\u0643\\u0633 \\u0639\\u0645\\u0644\\u064A\\u0627\\u062A \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629\"):deleteType==='last-1'?\"\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u062D\\u0630\\u0641 \\u0622\\u062E\\u0631 \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\\u061F\\n\\n\\u26A0\\uFE0F \\u0633\\u064A\\u062A\\u0645:\\n\\u2022 \\u0646\\u0642\\u0644 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0644\\u0644\\u0645\\u062D\\u0630\\u0648\\u0641\\u0629\\n\\u2022 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0644\\u0644\\u0645\\u062E\\u0632\\u0646\\n\\u2022 \\u0639\\u0643\\u0633 \\u0639\\u0645\\u0644\\u064A\\u0627\\u062A \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629\":\"\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u062D\\u0630\\u0641 \\u0622\\u062E\\u0631 \\u0641\\u0627\\u062A\\u0648\\u0631\\u062A\\u064A\\u0646\\u061F\\n\\n\\u26A0\\uFE0F \\u0633\\u064A\\u062A\\u0645:\\n\\u2022 \\u0646\\u0642\\u0644 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0644\\u0644\\u0645\\u062D\\u0630\\u0648\\u0641\\u0629\\n\\u2022 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0644\\u0644\\u0645\\u062E\\u0632\\u0646\\n\\u2022 \\u0639\\u0643\\u0633 \\u0639\\u0645\\u0644\\u064A\\u0627\\u062A \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629\";if(!confirm(confirmMessage)){return;}setLoading(true);try{let response;if(deleteType==='date'){response=await axios.post(\"\".concat(API,\"/invoices/bulk-delete-by-date\"),null,{params:{date:deleteDate,password:deletePassword,username:user.username}});}else{const count=deleteType==='last-1'?1:2;response=await axios.post(\"\".concat(API,\"/invoices/bulk-delete-last\"),null,{params:{count:count,password:deletePassword,username:user.username}});}// Show detailed results\nconst data=response.data;let message=\"\\u2705 \".concat(data.message,\"\\n\\n\\u0639\\u062F\\u062F \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062D\\u0630\\u0648\\u0641\\u0629: \").concat(data.deleted_count,\"\\n\\n\");if(data.invoices&&data.invoices.length>0){message+='Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©:\\n';data.invoices.forEach(inv=>{message+=\"\\u2022 \".concat(inv.invoice_number,\" - \").concat(inv.customer_name,\" - \").concat(inv.total_amount,\" \\u062C.\\u0645\\n\");});}alert(message);setShowDeleteModal(false);setDeletePassword('');setDeleteDate('');}catch(error){var _error$response26,_error$response26$dat;console.error('Error deleting invoices:',error);alert(((_error$response26=error.response)===null||_error$response26===void 0?void 0:(_error$response26$dat=_error$response26.data)===null||_error$response26$dat===void 0?void 0:_error$response26$dat.detail)||'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ÙÙˆØ§ØªÙŠØ±');}finally{setLoading(false);}};const checkBackupStatus=async function(backupId){let attempts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;try{const response=await axios.get(\"\".concat(API,\"/backup/status/\").concat(backupId));const status=response.data.status;if(status==='completed'||status==='completed_with_drive'){setCreating(false);let message=\"\\u2705 \\u062A\\u0645 \\u0625\\u0646\\u0634\\u0627\\u0621 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0628\\u0646\\u062C\\u0627\\u062D!\\n\\n\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0633\\u062A\\u0646\\u062F\\u0627\\u062A: \".concat(response.data.total_documents);if(status==='completed_with_drive'){message+='\\n\\nğŸŒ ØªÙ… Ø§Ù„Ø±ÙØ¹ Ø¥Ù„Ù‰ Google Drive Ø¨Ù†Ø¬Ø§Ø­!';}alert(message);fetchBackups();fetchDriveFiles();}else if(status==='failed'){setCreating(false);alert('âŒ ÙØ´Ù„Øª Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ\\n\\n'+(response.data.error||'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'));fetchBackups();}else if(status==='in_progress'&&attempts<60){// Keep checking every 2 seconds for up to 2 minutes\nsetTimeout(()=>checkBackupStatus(backupId,attempts+1),2000);}else{// Timeout after 2 minutes\nsetCreating(false);alert('â±ï¸ Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©.');fetchBackups();}}catch(error){console.error('Error checking backup status:',error);if(attempts<60){setTimeout(()=>checkBackupStatus(backupId,attempts+1),2000);}else{setCreating(false);fetchBackups();}}};const createBackup=async()=>{if(!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ø­Ù„ÙŠØ© Ø§Ù„Ø¢Ù†ØŸ')){return;}setCreating(true);try{const response=await axios.post(\"\".concat(API,\"/backup/create\"),null,{params:{username:user===null||user===void 0?void 0:user.username}});// Start polling for status\nif(response.data.backup_id){alert(\"\\u23F3 \".concat(response.data.message,\"\\n\\n\\u0633\\u064A\\u062A\\u0645 \\u062A\\u062D\\u062F\\u064A\\u062B \\u0627\\u0644\\u0642\\u0627\\u0626\\u0645\\u0629 \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0627\\u064B \\u0639\\u0646\\u062F \\u0627\\u0644\\u0627\\u0646\\u062A\\u0647\\u0627\\u0621.\"));checkBackupStatus(response.data.backup_id);}else{setCreating(false);alert('âŒ ÙØ´Ù„ ÙÙŠ Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ');}}catch(error){var _error$response27,_error$response27$dat;console.error('Error creating backup:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: '+(((_error$response27=error.response)===null||_error$response27===void 0?void 0:(_error$response27$dat=_error$response27.data)===null||_error$response27$dat===void 0?void 0:_error$response27$dat.detail)||error.message));setCreating(false);}};const downloadBackup=async(backupId,createdAt)=>{try{const response=await axios.get(\"\".concat(API,\"/backup/download/\").concat(backupId),{responseType:'blob'});// Create download link\nconst timestamp=new Date(createdAt).toISOString().replace(/[:.]/g,'-').slice(0,-5);const filename=\"backup_\".concat(timestamp,\".json\");const url=window.URL.createObjectURL(new Blob([response.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download',filename);document.body.appendChild(link);link.click();link.remove();window.URL.revokeObjectURL(url);alert('âœ… ØªÙ… ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!');}catch(error){var _error$response28,_error$response28$dat;console.error('Error downloading backup:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙ†Ø²ÙŠÙ„: '+(((_error$response28=error.response)===null||_error$response28===void 0?void 0:(_error$response28$dat=_error$response28.data)===null||_error$response28$dat===void 0?void 0:_error$response28$dat.detail)||error.message));}};const handleFileUpload=async event=>{const file=event.target.files[0];if(!file)return;// Check file type\nif(!file.name.endsWith('.json')){alert('âŒ ÙŠØ¬Ø¨ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù JSON');event.target.value='';return;}// Ask user what to do\nconst action=confirm(\"\\u062A\\u0645 \\u0627\\u062E\\u062A\\u064A\\u0627\\u0631: \".concat(file.name,\"\\n\\n\")+\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621:\\n\\n\"+\"\\u2705 \\u0645\\u0648\\u0627\\u0641\\u0642 = \\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0644\\u0644\\u0642\\u0627\\u0626\\u0645\\u0629 \\u0641\\u0642\\u0637 (\\u064A\\u0645\\u0643\\u0646\\u0643 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639\\u0647\\u0627 \\u0644\\u0627\\u062D\\u0642\\u0627\\u064B)\\n\"+\"\\u274C \\u0625\\u0644\\u063A\\u0627\\u0621 = \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0645\\u0628\\u0627\\u0634\\u0631\\u0629 (\\u0633\\u064A\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\\u0629)\\n\\n\"+\"\\u0645\\u0627\\u0630\\u0627 \\u062A\\u0631\\u064A\\u062F\\u061F\");if(action){// Add to list only\nawait uploadBackupFile(file,false);}else{// Ask for confirmation before restore\nif(confirm(\"\\u26A0\\uFE0F \\u062A\\u062D\\u0630\\u064A\\u0631!\\n\\n\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0645\\u0628\\u0627\\u0634\\u0631\\u0629\\u061F\\n\\n\\u0633\\u064A\\u062A\\u0645 \\u062D\\u0630\\u0641 \\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\\u0629!\\n\\n\\u0647\\u0630\\u0627 \\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621 \\u0644\\u0627 \\u064A\\u0645\\u0643\\u0646 \\u0627\\u0644\\u062A\\u0631\\u0627\\u062C\\u0639 \\u0639\\u0646\\u0647!\")){await uploadBackupFile(file,true);}}// Reset input\nevent.target.value='';};const uploadBackupFile=async(file,restoreDirectly)=>{setLoading(true);try{const formData=new FormData();formData.append('file',file);let response;if(restoreDirectly){// Restore directly\nresponse=await axios.post(\"\".concat(API,\"/backup/restore-from-file\"),formData,{params:{username:user===null||user===void 0?void 0:user.username},headers:{'Content-Type':'multipart/form-data'}});alert(\"\\u2705 \".concat(response.data.message,\"\\n\\n\")+\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\\u0627\\u062A \\u0627\\u0644\\u0645\\u0633\\u062A\\u0631\\u062C\\u0639\\u0629: \".concat(response.data.collections_restored,\"\\n\")+\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0633\\u062A\\u0646\\u062F\\u0627\\u062A: \".concat(response.data.total_documents,\"\\n\\n\")+\"\\u0633\\u064A\\u062A\\u0645 \\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644 \\u0627\\u0644\\u0635\\u0641\\u062D\\u0629...\");setTimeout(()=>window.location.reload(),2000);}else{// Upload to list\nresponse=await axios.post(\"\".concat(API,\"/backup/upload\"),formData,{headers:{'Content-Type':'multipart/form-data'}});alert(\"\\u2705 \".concat(response.data.message,\"\\n\\n\")+\"\\u064A\\u0645\\u0643\\u0646\\u0643 \\u0627\\u0644\\u0622\\u0646 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0647\\u0630\\u0647 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0645\\u0646 \\u0627\\u0644\\u0642\\u0627\\u0626\\u0645\\u0629\");fetchBackups();}}catch(error){var _error$response29,_error$response29$dat;console.error('Error uploading backup:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£: '+(((_error$response29=error.response)===null||_error$response29===void 0?void 0:(_error$response29$dat=_error$response29.data)===null||_error$response29$dat===void 0?void 0:_error$response29$dat.detail)||error.message));}finally{setLoading(false);}};const restoreBackup=async(backupId,createdAt)=>{if(!confirm(\"\\u26A0\\uFE0F \\u062A\\u062D\\u0630\\u064A\\u0631 \\u062E\\u0637\\u064A\\u0631!\\n\\n\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629\\u061F\\n\\n\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E: \".concat(new Date(createdAt).toLocaleString('ar-EG'),\"\\n\\n\\u0633\\u064A\\u062A\\u0645 \\u062D\\u0630\\u0641 \\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\\u0629 \\u0648\\u0627\\u0633\\u062A\\u0628\\u062F\\u0627\\u0644\\u0647\\u0627 \\u0628\\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629!\\n\\n\\u0647\\u0630\\u0627 \\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621 \\u0644\\u0627 \\u064A\\u0645\\u0643\\u0646 \\u0627\\u0644\\u062A\\u0631\\u0627\\u062C\\u0639 \\u0639\\u0646\\u0647!\"))){return;}// Second confirmation\nif(!confirm('ØªØ£ÙƒÙŠØ¯ Ù†Ù‡Ø§Ø¦ÙŠ: Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ ØªÙ…Ø§Ù…Ø§Ù‹ØŸ')){return;}setLoading(true);try{const response=await axios.post(\"\".concat(API,\"/backup/restore/\").concat(backupId),null,{params:{username:user===null||user===void 0?void 0:user.username}});alert(\"\\u2705 \".concat(response.data.message,\"\\n\\n\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\\u0627\\u062A \\u0627\\u0644\\u0645\\u0633\\u062A\\u0631\\u062C\\u0639\\u0629: \").concat(response.data.collections_restored,\"\\n\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0633\\u062A\\u0646\\u062F\\u0627\\u062A: \").concat(response.data.total_documents,\"\\n\\n\\u064A\\u064F\\u0646\\u0635\\u062D \\u0628\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644 \\u0627\\u0644\\u0635\\u0641\\u062D\\u0629.\"));// Reload page after successful restore\nif(confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø¢Ù†ØŸ')){window.location.reload();}}catch(error){var _error$response30,_error$response30$dat;console.error('Error restoring backup:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: '+(((_error$response30=error.response)===null||_error$response30===void 0?void 0:(_error$response30$dat=_error$response30.data)===null||_error$response30$dat===void 0?void 0:_error$response30$dat.detail)||error.message));}finally{setLoading(false);}};const deleteBackup=async(backupId,createdAt)=>{if(!confirm(\"\\u0647\\u0644 \\u062A\\u0631\\u064A\\u062F \\u062D\\u0630\\u0641 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629\\u061F\\n\\n\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E: \".concat(new Date(createdAt).toLocaleString('ar-EG'),\"\\n\\n\\u0647\\u0630\\u0627 \\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621 \\u0644\\u0627 \\u064A\\u0645\\u0643\\u0646 \\u0627\\u0644\\u062A\\u0631\\u0627\\u062C\\u0639 \\u0639\\u0646\\u0647!\"))){return;}try{await axios.delete(\"\".concat(API,\"/backup/\").concat(backupId));alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');fetchBackups();fetchDriveFiles();// Refresh Drive files too\n}catch(error){var _error$response31,_error$response31$dat;console.error('Error deleting backup:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: '+(((_error$response31=error.response)===null||_error$response31===void 0?void 0:(_error$response31$dat=_error$response31.data)===null||_error$response31$dat===void 0?void 0:_error$response31$dat.detail)||error.message));}};// Google Drive Functions\nconst uploadToDrive=async backupId=>{if(!(driveStatus!==null&&driveStatus!==void 0&&driveStatus.enabled)){alert('âŒ Google Drive ØºÙŠØ± Ù…ØªØµÙ„!\\n\\nÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Google Drive.');return;}try{const response=await axios.post(\"\".concat(API,\"/backup/\").concat(backupId,\"/upload-to-drive\"));alert(\"\\u2705 \".concat(response.data.message));fetchBackups();fetchDriveFiles();}catch(error){var _error$response32,_error$response32$dat;console.error('Error uploading to Drive:',error);let errorMsg='Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¹ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©:\\n\\n';if((_error$response32=error.response)!==null&&_error$response32!==void 0&&(_error$response32$dat=_error$response32.data)!==null&&_error$response32$dat!==void 0&&_error$response32$dat.detail){errorMsg+=error.response.data.detail;// Check for storage quota error\nif(error.response.data.detail.includes('storage quota')||error.response.data.detail.includes('403')){errorMsg+='\\n\\nğŸ’¡ Ø§Ù„Ø­Ù„:\\n';errorMsg+='1. Ø§ÙØªØ­ Google Drive\\n';errorMsg+='2. Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø¬Ù„Ø¯ \"Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„\"\\n';errorMsg+='3. Ø´Ø§Ø±Ùƒ Ø§Ù„Ù…Ø¬Ù„Ø¯ Ù…Ø¹:\\n   master-seal-backup@master-seal-backup.iam.gserviceaccount.com\\n';errorMsg+='4. Ø§Ø®ØªØ± ØµÙ„Ø§Ø­ÙŠØ© \"Editor\"';}}else{errorMsg+=error.message;}alert(errorMsg);}};const downloadFromDrive=async(fileId,fileName)=>{try{const response=await axios.get(\"\".concat(API,\"/backup/drive/download/\").concat(fileId),{responseType:'blob'});// Create download link\nconst url=window.URL.createObjectURL(new Blob([response.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download',fileName);document.body.appendChild(link);link.click();link.remove();alert('âœ… ØªÙ… ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response33,_error$response33$dat;console.error('Error downloading from Drive:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„Ù: '+(((_error$response33=error.response)===null||_error$response33===void 0?void 0:(_error$response33$dat=_error$response33.data)===null||_error$response33$dat===void 0?void 0:_error$response33$dat.detail)||error.message));}};const restoreFromDrive=async(fileId,fileName)=>{if(!confirm(\"\\u26A0\\uFE0F \\u062A\\u062D\\u0630\\u064A\\u0631!\\n\\n\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0645\\u0646 Google Drive\\u061F\\n\\n\\u0645\\u0644\\u0641: \".concat(fileName,\"\\n\\n\\u0633\\u064A\\u062A\\u0645 \\u062D\\u0630\\u0641 \\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\\u0629!\"))){return;}if(!confirm('ØªØ£ÙƒÙŠØ¯ Ù†Ù‡Ø§Ø¦ÙŠ: Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ ØªÙ…Ø§Ù…Ø§Ù‹ØŸ')){return;}setLoading(true);try{const response=await axios.post(\"\".concat(API,\"/backup/drive/restore/\").concat(fileId));alert(\"\\u2705 \".concat(response.data.message,\"\\n\\n\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\\u0627\\u062A \\u0627\\u0644\\u0645\\u0633\\u062A\\u0631\\u062C\\u0639\\u0629: \").concat(response.data.collections_restored,\"\\n\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0633\\u062A\\u0646\\u062F\\u0627\\u062A: \").concat(response.data.total_documents));if(confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø¢Ù†ØŸ')){window.location.reload();}}catch(error){var _error$response34,_error$response34$dat;console.error('Error restoring from Drive:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹: '+(((_error$response34=error.response)===null||_error$response34===void 0?void 0:(_error$response34$dat=_error$response34.data)===null||_error$response34$dat===void 0?void 0:_error$response34$dat.detail)||error.message));}finally{setLoading(false);}};const deleteFromDrive=async(fileId,fileName)=>{if(!confirm(\"\\u0647\\u0644 \\u062A\\u0631\\u064A\\u062F \\u062D\\u0630\\u0641 \\u0627\\u0644\\u0645\\u0644\\u0641 \\u0645\\u0646 Google Drive\\u061F\\n\\n\".concat(fileName,\"\\n\\n\\u0647\\u0630\\u0627 \\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621 \\u0644\\u0627 \\u064A\\u0645\\u0643\\u0646 \\u0627\\u0644\\u062A\\u0631\\u0627\\u062C\\u0639 \\u0639\\u0646\\u0647!\"))){return;}try{await axios.delete(\"\".concat(API,\"/backup/drive/\").concat(fileId));alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù„Ù Ù…Ù† Google Drive Ø¨Ù†Ø¬Ø§Ø­');fetchDriveFiles();}catch(error){var _error$response35,_error$response35$dat;console.error('Error deleting from Drive:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­Ø°Ù: '+(((_error$response35=error.response)===null||_error$response35===void 0?void 0:(_error$response35$dat=_error$response35.data)===null||_error$response35$dat===void 0?void 0:_error$response35$dat.detail)||error.message));}};// Switch tab and load data\nconst switchTab=tab=>{setActiveTab(tab);if(tab==='drive'&&driveFiles.length===0){fetchDriveFiles();}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0646\\u0633\\u062E \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse flex-wrap gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:createBackup,disabled:creating,className:\"px-6 py-2 rounded text-white \".concat(creating?'bg-gray-400 cursor-not-allowed':'bg-green-500 hover:bg-green-600'),children:creating?'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡...':'ğŸ’¾ Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø©'}),/*#__PURE__*/_jsxs(\"label\",{className:\"bg-purple-500 text-white px-6 py-2 rounded hover:bg-purple-600 cursor-pointer\",children:[\"\\uD83D\\uDCE4 \\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0646\\u0633\\u062E\\u0629\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".json\",onChange:handleFileUpload,className:\"hidden\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchBackups,disabled:loading,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\uD83D\\uDD04 \\u062A\\u062D\\u062F\\u064A\\u062B\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-lg mb-6 border-r-4 border-blue-500\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold mb-2\",children:\"\\uD83D\\uDCC5 \\u0627\\u0644\\u0646\\u0633\\u062E \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A \\u0627\\u0644\\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-700\",children:\"\\u064A\\u062A\\u0645 \\u0625\\u0646\\u0634\\u0627\\u0621 \\u0646\\u0633\\u062E\\u0629 \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0645\\u062D\\u0644\\u064A\\u0629 \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0627\\u064B \\u0643\\u0644 \\u064A\\u0648\\u0645 \\u0641\\u064A \\u062A\\u0645\\u0627\\u0645 \\u0627\\u0644\\u0633\\u0627\\u0639\\u0629 7:00 \\u0645\\u0633\\u0627\\u0621\\u064B. \\u064A\\u0645\\u0643\\u0646\\u0643 \\u062A\\u0646\\u0632\\u064A\\u0644 \\u0623\\u064A \\u0646\\u0633\\u062E\\u0629 \\u0648\\u0631\\u0641\\u0639\\u0647\\u0627 \\u064A\\u062F\\u0648\\u064A\\u0627\\u064B \\u0625\\u0644\\u0649 Google Drive \\u0623\\u0648 \\u0623\\u064A \\u062E\\u062F\\u0645\\u0629 \\u0633\\u062D\\u0627\\u0628\\u064A\\u0629 \\u0623\\u062E\\u0631\\u0649.\"})]}),(user===null||user===void 0?void 0:user.username)==='Elsawy'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-red-50 to-orange-100 p-6 rounded-lg mb-6 border-r-4 border-red-500\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-xl mb-4 flex items-center gap-2\",children:\"\\uD83D\\uDDD1\\uFE0F \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 - \\u062D\\u0630\\u0641 \\u062C\\u0645\\u0627\\u0639\\u064A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-700 mb-4\",children:[\"\\u26A0\\uFE0F \",/*#__PURE__*/_jsx(\"strong\",{children:\"\\u062A\\u062D\\u0630\\u064A\\u0631:\"}),\" \\u0639\\u0646\\u062F \\u0627\\u0644\\u062D\\u0630\\u0641 \\u0633\\u064A\\u062A\\u0645 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0644\\u0644\\u0645\\u062E\\u0632\\u0646 \\u0648\\u0639\\u0643\\u0633 \\u0639\\u0645\\u0644\\u064A\\u0627\\u062A \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629 \\u0648\\u0646\\u0642\\u0644 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0644\\u0644\\u0645\\u062D\\u0630\\u0648\\u0641\\u0629\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>openDeleteModal('date'),className:\"bg-red-500 hover:bg-red-600 text-white px-6 py-4 rounded-lg font-semibold transition-all flex items-center justify-center gap-2\",children:\"\\uD83D\\uDCC5 \\u062D\\u0630\\u0641 \\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u064A\\u0648\\u0645 \\u0645\\u0639\\u064A\\u0646\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>openDeleteModal('last-1'),className:\"bg-orange-500 hover:bg-orange-600 text-white px-6 py-4 rounded-lg font-semibold transition-all flex items-center justify-center gap-2\",children:\"\\uD83D\\uDD34 \\u062D\\u0630\\u0641 \\u0622\\u062E\\u0631 \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>openDeleteModal('last-2'),className:\"bg-orange-600 hover:bg-orange-700 text-white px-6 py-4 rounded-lg font-semibold transition-all flex items-center justify-center gap-2\",children:\"\\uD83D\\uDD34\\uD83D\\uDD34 \\u062D\\u0630\\u0641 \\u0622\\u062E\\u0631 \\u0641\\u0627\\u062A\\u0648\\u0631\\u062A\\u064A\\u0646\"})]})]}),showDeleteModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",dir:\"rtl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-8 max-w-md w-full shadow-2xl\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold mb-4 text-red-600\",children:\"\\u26A0\\uFE0F \\u062A\\u0623\\u0643\\u064A\\u062F \\u0627\\u0644\\u062D\\u0630\\u0641\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-4 bg-yellow-50 border-r-4 border-yellow-500 rounded\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-700\",children:deleteType==='date'?'ğŸ—“ï¸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ ÙÙˆØ§ØªÙŠØ± Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ù…Ø­Ø¯Ø¯':deleteType==='last-1'?'ğŸ“‹ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¢Ø®Ø± ÙØ§ØªÙˆØ±Ø©':'ğŸ“‹ğŸ“‹ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¢Ø®Ø± ÙØ§ØªÙˆØ±ØªÙŠÙ†'}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-600 mt-2\",children:[\"\\u2713 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u2713 \\u0639\\u0643\\u0633 \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u2713 \\u0646\\u0642\\u0644 \\u0644\\u0644\\u0645\\u062D\\u0630\\u0648\\u0641\\u0629\"]})]}),deleteType==='date'&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:deleteDate,onChange:e=>setDeleteDate(e.target.value),className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-red-500 focus:outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 (200200):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:deletePassword,onChange:e=>setDeletePassword(e.target.value),onKeyPress:e=>e.key==='Enter'&&handleBulkDelete(),placeholder:\"\\u0623\\u062F\\u062E\\u0644 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\",className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-red-500 focus:outline-none\",autoFocus:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleBulkDelete,disabled:loading,className:\"flex-1 py-3 rounded-lg font-semibold text-white transition-colors \".concat(loading?'bg-gray-400 cursor-not-allowed':'bg-red-600 hover:bg-red-700'),children:loading?'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­Ø°Ù...':'âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowDeleteModal(false);setDeletePassword('');setDeleteDate('');},disabled:loading,className:\"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-3 rounded-lg font-semibold transition-colors\",children:\"\\u274C \\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-md overflow-x-auto\",children:loading&&!creating?/*#__PURE__*/_jsx(\"div\",{className:\"p-8 text-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u23F3 \\u062C\\u0627\\u0631\\u064A \\u0627\\u0644\\u062A\\u062D\\u0645\\u064A\\u0644...\"})}):backups.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0646\\u0633\\u062E \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u062D\\u062A\\u0649 \\u0627\\u0644\\u0622\\u0646\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 mt-2\",children:\"\\u0627\\u0636\\u063A\\u0637 \\u0639\\u0644\\u0649 \\\"\\u0625\\u0646\\u0634\\u0627\\u0621 \\u0646\\u0633\\u062E\\u0629 \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629\\\" \\u0644\\u0625\\u0646\\u0634\\u0627\\u0621 \\u0623\\u0648\\u0644 \\u0646\\u0633\\u062E\\u0629\"})]}):/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full border-collapse\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E \\u0648\\u0627\\u0644\\u0648\\u0642\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0623\\u0646\\u0634\\u0626\\u062A \\u0628\\u0648\\u0627\\u0633\\u0637\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0645\\u0633\\u062A\\u0646\\u062F\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:backups.map(backup=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[new Date(backup.created_at).toLocaleString('ar-EG',{year:'numeric',month:'long',day:'numeric',hour:'2-digit',minute:'2-digit'}),backup.is_scheduled&&/*#__PURE__*/_jsx(\"span\",{className:\"block text-xs text-blue-600 mt-1\",children:\"\\uD83E\\uDD16 \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\"})]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:backup.created_by}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-center font-medium\",children:backup.total_documents||0}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 text-center\",children:[backup.status==='in_progress'&&/*#__PURE__*/_jsx(\"span\",{className:\"text-orange-600 animate-pulse\",children:\"\\u23F3 \\u062C\\u0627\\u0631\\u064A...\"}),backup.status==='failed'&&/*#__PURE__*/_jsx(\"span\",{className:\"text-red-600\",children:\"\\u274C \\u0641\\u0634\\u0644\"}),(backup.status==='completed'||backup.status==='completed_with_drive'||backup.status==='completed_no_drive')&&/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600\",children:\"\\u2705 \\u0645\\u0643\\u062A\\u0645\\u0644\"})]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse justify-center flex-wrap gap-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>downloadBackup(backup.backup_id,backup.created_at),className:\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\",title:\"\\u062A\\u0646\\u0632\\u064A\\u0644 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629\",children:\"\\u2B07\\uFE0F \\u062A\\u0646\\u0632\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>restoreBackup(backup.backup_id,backup.created_at),disabled:loading||backup.status==='in_progress',className:\"bg-orange-500 text-white px-3 py-1 rounded text-sm hover:bg-orange-600 disabled:bg-gray-400\",title:\"\\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0645\\u0646 \\u0647\\u0630\\u0647 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629\",children:\"\\u21A9\\uFE0F \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteBackup(backup.backup_id,backup.created_at),disabled:loading,className:\"bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600 disabled:bg-gray-400\",title:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629\",children:\"\\uD83D\\uDDD1\\uFE0F \\u062D\\u0630\\u0641\"})]})})]},backup.backup_id))})]})}),activeTab==='drive'&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-md overflow-x-auto\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"p-8 text-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u23F3 \\u062C\\u0627\\u0631\\u064A \\u0627\\u0644\\u062A\\u062D\\u0645\\u064A\\u0644...\"})}):!(driveStatus!==null&&driveStatus!==void 0&&driveStatus.enabled)?/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500\",children:\"\\u274C Google Drive \\u063A\\u064A\\u0631 \\u0645\\u062A\\u0635\\u0644\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 mt-2\",children:\"\\u064A\\u0631\\u062C\\u0649 \\u0627\\u0644\\u062A\\u062D\\u0642\\u0642 \\u0645\\u0646 \\u0625\\u0639\\u062F\\u0627\\u062F\\u0627\\u062A Google Drive\"})]}):driveFiles.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0645\\u0644\\u0641\\u0627\\u062A \\u0641\\u064A Google Drive\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 mt-2\",children:\"\\u0642\\u0645 \\u0628\\u0631\\u0641\\u0639 \\u0646\\u0633\\u062E\\u0629 \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0645\\u0646 \\u0627\\u0644\\u062A\\u0628\\u0648\\u064A\\u0628 \\u0627\\u0644\\u0633\\u0627\\u0628\\u0642\"})]}):/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full border-collapse\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0644\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u062C\\u0645\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:driveFiles.map(file=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"a\",{href:file.webViewLink,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-blue-600 hover:underline\",children:file.name})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(file.createdTime).toLocaleString('ar-EG',{year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-center\",children:file.size?\"\".concat((file.size/1024).toFixed(2),\" KB\"):'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse justify-center flex-wrap gap-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>downloadFromDrive(file.id,file.name),className:\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\",children:\"\\u2B07\\uFE0F \\u062A\\u0646\\u0632\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>restoreFromDrive(file.id,file.name),disabled:loading,className:\"bg-orange-500 text-white px-3 py-1 rounded text-sm hover:bg-orange-600 disabled:bg-gray-400\",children:\"\\u21A9\\uFE0F \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639\"})]})})]},file.id))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 bg-red-50 p-4 rounded-lg border-r-4 border-red-500\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-red-700 mb-2\",children:\"\\u26A0\\uFE0F \\u062A\\u062D\\u0630\\u064A\\u0631\\u0627\\u062A \\u0645\\u0647\\u0645\\u0629:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside text-sm text-red-700 space-y-1\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0646\\u0633\\u062E\\u0629 \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0633\\u064A\\u062D\\u0630\\u0641 \",/*#__PURE__*/_jsx(\"strong\",{children:\"\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\\u0629\"})]}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u0625\\u0646\\u0634\\u0627\\u0621 \\u0646\\u0633\\u062E\\u0629 \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u062D\\u062F\\u064A\\u062B\\u0629 \\u0642\\u0628\\u0644 \\u0627\\u0644\\u0642\\u064A\\u0627\\u0645 \\u0628\\u0623\\u064A \\u062A\\u063A\\u064A\\u064A\\u0631\\u0627\\u062A \\u0643\\u0628\\u064A\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0644\\u0646\\u0633\\u062E \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0644\\u0646 \\u064A\\u062A\\u0645 \\u062D\\u0630\\u0641\\u0647\\u0627 \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0627\\u064B - \\u0627\\u062D\\u0630\\u0641\\u0647\\u0627 \\u064A\\u062F\\u0648\\u064A\\u0627\\u064B \\u0639\\u0646\\u062F \\u0627\\u0644\\u062D\\u0627\\u062C\\u0629\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0644\\u0627 \\u064A\\u0645\\u0643\\u0646 \\u0627\\u0644\\u062A\\u0631\\u0627\\u062C\\u0639 \\u0639\\u0646 \\u0639\\u0645\\u0644\\u064A\\u0629 \\u0627\\u0644\\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0628\\u0639\\u062F \\u062A\\u0646\\u0641\\u064A\\u0630\\u0647\\u0627\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 bg-green-50 p-4 rounded-lg border-r-4 border-green-500\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-green-700 mb-2\",children:\"\\uD83D\\uDCA1 \\u0646\\u0635\\u0627\\u0626\\u062D:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside text-sm text-green-700 space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0627\\u0644\\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0629 \\u062A\\u0639\\u0645\\u0644 \\u064A\\u0648\\u0645\\u064A\\u0627\\u064B \\u0627\\u0644\\u0633\\u0627\\u0639\\u0629 7:00 \\u0645\\u0633\\u0627\\u0621\\u064B\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0633\\u062A\\u062E\\u062F\\u0645 \\u0632\\u0631 \\\"\\u062A\\u0646\\u0632\\u064A\\u0644\\\" \\u0644\\u062D\\u0641\\u0638 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0639\\u0644\\u0649 \\u062C\\u0647\\u0627\\u0632\\u0643\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u064A\\u0645\\u0643\\u0646\\u0643 \\u0631\\u0641\\u0639 \\u0627\\u0644\\u0646\\u0633\\u062E \\u0627\\u0644\\u0645\\u062D\\u0641\\u0648\\u0638\\u0629 \\u064A\\u062F\\u0648\\u064A\\u0627\\u064B \\u0625\\u0644\\u0649 Google Drive \\u0623\\u0648 \\u0623\\u064A \\u062E\\u062F\\u0645\\u0629 \\u0633\\u062D\\u0627\\u0628\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0633\\u062A\\u062E\\u062F\\u0645 \\u0632\\u0631 \\\"\\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0646\\u0633\\u062E\\u0629\\\" \\u0644\\u0631\\u0641\\u0639 \\u0645\\u0644\\u0641 \\u0646\\u0633\\u062E\\u0629 \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0645\\u0646 \\u062C\\u0647\\u0627\\u0632\\u0643\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u062D\\u062A\\u0641\\u0638 \\u0628\\u0646\\u0633\\u062E \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0645\\u0646 \\u0641\\u062A\\u0631\\u0627\\u062A \\u0645\\u062E\\u062A\\u0644\\u0641\\u0629 \\u0644\\u0644\\u0623\\u0645\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u062D\\u062C\\u0645 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0635\\u063A\\u064A\\u0631 (\\u0639\\u0627\\u062F\\u0629 \\u0623\\u0642\\u0644 \\u0645\\u0646 1 MB)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 bg-blue-50 p-4 rounded-lg border-r-4 border-blue-500\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-blue-700 mb-2\",children:\"\\uD83D\\uDCE4 \\u0643\\u064A\\u0641\\u064A\\u0629 \\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0646\\u0633\\u062E\\u0629 \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629:\"}),/*#__PURE__*/_jsxs(\"ol\",{className:\"list-decimal list-inside text-sm text-blue-700 space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0636\\u063A\\u0637 \\u0639\\u0644\\u0649 \\u0632\\u0631 \\\"\\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0646\\u0633\\u062E\\u0629\\\"\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u062E\\u062A\\u0631 \\u0645\\u0644\\u0641 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 (.json) \\u0645\\u0646 \\u062C\\u0647\\u0627\\u0632\\u0643\"}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621:\",/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside mr-6 mt-1\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0645\\u0648\\u0627\\u0641\\u0642\"}),\" = \\u0625\\u0636\\u0627\\u0641\\u0629 \\u0644\\u0644\\u0642\\u0627\\u0626\\u0645\\u0629 \\u0641\\u0642\\u0637 (\\u0622\\u0645\\u0646)\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"}),\" = \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0645\\u0628\\u0627\\u0634\\u0631 (\\u064A\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\\u0629)\"]})]})]})]})]})]});};// Users Management Component  \nconst Users=()=>{const[users,setUsers]=useState([]);const[newUser,setNewUser]=useState({username:'',password:'',role:'user'});const[editingUser,setEditingUser]=useState(null);const[editForm,setEditForm]=useState({username:'',password:'',role:'user'});const[companyInfo,setCompanyInfo]=useState({name:'Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„',address:'Ø§Ù„Ø­Ø±ÙÙŠÙŠÙ† Ø´Ø§Ø±Ø¹ Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª',phone:'01020630677'});const[editingCompany,setEditingCompany]=useState(false);const[selectedUserPermissions,setSelectedUserPermissions]=useState(null);const allPermissions=[{key:'dashboard',label:'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…'},{key:'sales',label:'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª'},{key:'inventory',label:'Ø§Ù„Ù…Ø®Ø²ÙˆÙ†'},{key:'deferred',label:'Ø§Ù„Ø¢Ø¬Ù„'},{key:'expenses',label:'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª'},{key:'revenue',label:'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª'},{key:'treasury',label:'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©'},{key:'invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ±'},{key:'work-orders',label:'Ø£Ù…Ø± Ø´ØºÙ„'},{key:'pricing',label:'Ø§Ù„ØªØ³Ø¹ÙŠØ±'},{key:'users',label:'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†'}];useEffect(()=>{fetchUsers();},[]);const fetchUsers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/users\"));// Check if default users exist in database\nconst dbUsers=response.data||[];const hasElsawy=dbUsers.some(user=>user.username==='Elsawy');const hasRoot=dbUsers.some(user=>user.username==='Root');// Create default users if they don't exist\nif(!hasElsawy){await axios.post(\"\".concat(API,\"/users\"),{username:'Elsawy',password:'100100',role:'admin',permissions:allPermissions.map(p=>p.key)});}if(!hasRoot){await axios.post(\"\".concat(API,\"/users\"),{username:'Root',password:'master',role:'user',permissions:['dashboard','sales','inventory','deferred','expenses','treasury','work-orders']});}// Fetch users again if we created default users\nif(!hasElsawy||!hasRoot){const updatedResponse=await axios.get(\"\".concat(API,\"/users\"));setUsers(updatedResponse.data||[]);}else{setUsers(dbUsers);}}catch(error){console.error('Error fetching users:',error);// Fall back to empty array for now\nsetUsers([]);}};const addUser=async()=>{if(!newUser.username||!newUser.password){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');return;}try{// Check if username already exists\nif(users.some(user=>user.username===newUser.username)){alert('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„');return;}// Default permissions based on role\nconst defaultPermissions=newUser.role==='admin'?allPermissions.map(p=>p.key):['dashboard','sales','inventory','deferred','expenses','treasury','work-orders','pricing'];// Let backend generate ID and created_at\nconst user={username:newUser.username,password:newUser.password,role:newUser.role,permissions:defaultPermissions};await axios.post(\"\".concat(API,\"/users\"),user);fetchUsers();setNewUser({username:'',password:'',role:'user'});alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response36,_error$response36$dat;console.error('Error adding user:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: '+(((_error$response36=error.response)===null||_error$response36===void 0?void 0:(_error$response36$dat=_error$response36.data)===null||_error$response36$dat===void 0?void 0:_error$response36$dat.detail)||error.message));}};const startEdit=user=>{setEditingUser(user.id);setEditForm({username:user.username,password:'',role:user.role});};const cancelEdit=()=>{setEditingUser(null);setEditForm({username:'',password:'',role:'user'});};const saveEdit=async()=>{if(!editForm.username){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');return;}// Check if username already exists (excluding current user)\nif(users.some(user=>user.username===editForm.username&&user.id!==editingUser)){alert('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„');return;}try{// Find current user to preserve their permissions\nconst currentUser=users.find(u=>u.id===editingUser);if(!currentUser){alert('Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');return;}// Update user in backend - preserve existing permissions\nconst updatedUser={id:editingUser,username:editForm.username,role:editForm.role,password:editForm.password||currentUser.password,permissions:currentUser.permissions||[],created_at:currentUser.created_at};await axios.put(\"\".concat(API,\"/users/\").concat(editingUser),updatedUser);// Fetch updated data from database instead of updating local state\nfetchUsers();setEditingUser(null);setEditForm({username:'',password:'',role:'user'});alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response37,_error$response37$dat;console.error('Error updating user:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: '+(((_error$response37=error.response)===null||_error$response37===void 0?void 0:(_error$response37$dat=_error$response37.data)===null||_error$response37$dat===void 0?void 0:_error$response37$dat.detail)||error.message));}};const deleteUser=async userId=>{if(userId==='1'||userId==='2'){alert('Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠÙŠÙ†');return;}if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ'))return;try{await axios.delete(\"\".concat(API,\"/users/\").concat(userId));fetchUsers();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error deleting user:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');}};const resetPassword=async userId=>{const newPassword=prompt('Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:');if(newPassword&&newPassword.trim()){try{// Find the user to get their current data\nconst user=users.find(u=>u.id===userId);if(!user){alert('Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');return;}// Update password in backend\nconst updatedUser={id:user.id,username:user.username,password:newPassword.trim(),role:user.role,permissions:user.permissions||[],created_at:user.created_at};await axios.put(\"\".concat(API,\"/users/\").concat(userId),updatedUser);alert('ØªÙ… ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response38,_error$response38$dat;console.error('Error updating password:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: '+(((_error$response38=error.response)===null||_error$response38===void 0?void 0:(_error$response38$dat=_error$response38.data)===null||_error$response38$dat===void 0?void 0:_error$response38$dat.detail)||error.message));}}};const openPermissions=user=>{setSelectedUserPermissions(_objectSpread(_objectSpread({},user),{},{tempPermissions:[...(user.permissions||[])]}));};const togglePermission=permissionKey=>{setSelectedUserPermissions(prev=>{const newPermissions=prev.tempPermissions.includes(permissionKey)?prev.tempPermissions.filter(p=>p!==permissionKey):[...prev.tempPermissions,permissionKey];return _objectSpread(_objectSpread({},prev),{},{tempPermissions:newPermissions});});};const savePermissions=async()=>{try{// Update permissions in backend\nconst updatedUser={id:selectedUserPermissions.id,username:selectedUserPermissions.username,password:selectedUserPermissions.password,role:selectedUserPermissions.role,permissions:selectedUserPermissions.tempPermissions,created_at:selectedUserPermissions.created_at};await axios.put(\"\".concat(API,\"/users/\").concat(selectedUserPermissions.id),updatedUser);// Fetch updated data from database\nfetchUsers();setSelectedUserPermissions(null);alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response39,_error$response39$dat;console.error('Error updating permissions:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª: '+(((_error$response39=error.response)===null||_error$response39===void 0?void 0:(_error$response39$dat=_error$response39.data)===null||_error$response39$dat===void 0?void 0:_error$response39$dat.detail)||error.message));}};const saveCompanyInfo=()=>{setEditingCompany(false);alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ© Ø¨Ù†Ø¬Ø§Ø­');};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-4\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\\u064A\\u0646\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u0634\\u0631\\u0643\\u0629\"}),editingCompany?/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0634\\u0631\\u0643\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:companyInfo.name,onChange:e=>setCompanyInfo(_objectSpread(_objectSpread({},companyInfo),{},{name:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:companyInfo.address,onChange:e=>setCompanyInfo(_objectSpread(_objectSpread({},companyInfo),{},{address:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u062A\\u0644\\u064A\\u0641\\u0648\\u0646\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:companyInfo.phone,onChange:e=>setCompanyInfo(_objectSpread(_objectSpread({},companyInfo),{},{phone:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0634\\u0631\\u0643\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"p-2 bg-gray-100 rounded\",children:companyInfo.name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"p\",{className:\"p-2 bg-gray-100 rounded\",children:companyInfo.address})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u062A\\u0644\\u064A\\u0641\\u0648\\u0646\"}),/*#__PURE__*/_jsx(\"p\",{className:\"p-2 bg-gray-100 rounded\",children:companyInfo.phone})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:editingCompany?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:saveCompanyInfo,className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u062D\\u0641\\u0638\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingCompany(false),className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingCompany(true),className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644 \\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u0634\\u0631\\u0643\\u0629\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0633\\u062A\\u062E\\u062F\\u0645 \\u062C\\u062F\\u064A\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newUser.username,onChange:e=>setNewUser(_objectSpread(_objectSpread({},newUser),{},{username:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:newUser.password,onChange:e=>setNewUser(_objectSpread(_objectSpread({},newUser),{},{password:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0635\\u0644\\u0627\\u062D\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"select\",{value:newUser.role,onChange:e=>setNewUser(_objectSpread(_objectSpread({},newUser),{},{role:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645 \\u0639\\u0627\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"\\u0645\\u062F\\u064A\\u0631\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addUser,className:\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\\u064A\\u0646\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0635\\u0644\\u0627\\u062D\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0635\\u0644\\u0627\\u062D\\u064A\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u062A\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u0625\\u0646\\u0634\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>{var _user$permissions;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:editingUser===user.id?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.username,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{username:e.target.value})),className:\"w-full p-1 border border-gray-300 rounded\"}):/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:user.username})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:editingUser===user.id?/*#__PURE__*/_jsxs(\"select\",{value:editForm.role,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{role:e.target.value})),className:\"w-full p-1 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645 \\u0639\\u0627\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"\\u0645\\u062F\\u064A\\u0631\"})]}):/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm \".concat(user.role==='admin'?'bg-red-100 text-red-800':'bg-blue-100 text-blue-800'),children:user.role==='admin'?'Ù…Ø¯ÙŠØ±':'Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯ÙŠ'})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"bg-gray-100 px-2 py-1 rounded text-sm\",children:[((_user$permissions=user.permissions)===null||_user$permissions===void 0?void 0:_user$permissions.length)||0,\" \\u0635\\u0644\\u0627\\u062D\\u064A\\u0629\"]})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(user.created_at).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm bg-green-100 text-green-800\",children:\"\\u0646\\u0634\\u0637\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-2 space-x-reverse flex-wrap\",children:editingUser===user.id?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:saveEdit,className:\"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600 mb-1\",children:\"\\u062D\\u0641\\u0638\"}),/*#__PURE__*/_jsx(\"button\",{onClick:cancelEdit,className:\"bg-gray-500 text-white px-2 py-1 rounded text-sm hover:bg-gray-600 mb-1\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>startEdit(user),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600 mb-1\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>openPermissions(user),className:\"bg-purple-500 text-white px-2 py-1 rounded text-sm hover:bg-purple-600 mb-1\",children:\"\\u0627\\u0644\\u0635\\u0644\\u0627\\u062D\\u064A\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>resetPassword(user.id),className:\"bg-yellow-500 text-white px-2 py-1 rounded text-sm hover:bg-yellow-600 mb-1\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"}),user.id!=='1'&&user.id!=='2'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteUser(user.id),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600 mb-1\",children:\"\\u062D\\u0630\\u0641\"})]})})})]},user.id);})})]})})]}),selectedUserPermissions&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 max-w-md w-full mx-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-bold mb-4\",children:[\"\\u0635\\u0644\\u0627\\u062D\\u064A\\u0627\\u062A \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645: \",selectedUserPermissions.username]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2 mb-4\",children:allPermissions.map(permission=>/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedUserPermissions.tempPermissions.includes(permission.key),onChange:()=>togglePermission(permission.key),className:\"ml-2\"}),/*#__PURE__*/_jsx(\"span\",{children:permission.label})]},permission.key))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:savePermissions,className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u062D\\u0641\\u0638\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedUserPermissions(null),className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]})})]});};// Material Pricing Component\nconst Pricing=()=>{const[materialPricings,setMaterialPricings]=useState([]);const[editingPricing,setEditingPricing]=useState(null);const[newPricing,setNewPricing]=useState({material_type:'NBR',inner_diameter:'',outer_diameter:'',price_per_mm:'',manufacturing_cost_client1:'',manufacturing_cost_client2:'',manufacturing_cost_client3:'',notes:''});const materialTypes=['NBR','BUR','BT','VT','BOOM'];useEffect(()=>{fetchMaterialPricings();},[]);const fetchMaterialPricings=async()=>{try{const response=await axios.get(\"\".concat(API,\"/material-pricing\"));setMaterialPricings(response.data);}catch(error){console.error('Error fetching material pricings:',error);}};const addMaterialPricing=async()=>{if(!newPricing.inner_diameter||!newPricing.outer_diameter||!newPricing.price_per_mm){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{if(editingPricing){// Update existing pricing\nawait axios.put(\"\".concat(API,\"/material-pricing/\").concat(editingPricing),_objectSpread(_objectSpread({},newPricing),{},{inner_diameter:parseFloat(newPricing.inner_diameter),outer_diameter:parseFloat(newPricing.outer_diameter),price_per_mm:parseFloat(newPricing.price_per_mm),manufacturing_cost_client1:parseFloat(newPricing.manufacturing_cost_client1||0),manufacturing_cost_client2:parseFloat(newPricing.manufacturing_cost_client2||0),manufacturing_cost_client3:parseFloat(newPricing.manufacturing_cost_client3||0)}));alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');setEditingPricing(null);}else{// Add new pricing\nawait axios.post(\"\".concat(API,\"/material-pricing\"),_objectSpread(_objectSpread({},newPricing),{},{inner_diameter:parseFloat(newPricing.inner_diameter),outer_diameter:parseFloat(newPricing.outer_diameter),price_per_mm:parseFloat(newPricing.price_per_mm),manufacturing_cost_client1:parseFloat(newPricing.manufacturing_cost_client1||0),manufacturing_cost_client2:parseFloat(newPricing.manufacturing_cost_client2||0),manufacturing_cost_client3:parseFloat(newPricing.manufacturing_cost_client3||0)}));alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');}fetchMaterialPricings();setNewPricing({material_type:'NBR',inner_diameter:'',outer_diameter:'',price_per_mm:'',manufacturing_cost_client1:'',manufacturing_cost_client2:'',manufacturing_cost_client3:'',notes:''});}catch(error){var _error$response40,_error$response40$dat;console.error('Error saving material pricing:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©: '+(((_error$response40=error.response)===null||_error$response40===void 0?void 0:(_error$response40$dat=_error$response40.data)===null||_error$response40$dat===void 0?void 0:_error$response40$dat.detail)||error.message));}};const editMaterialPricing=pricing=>{setNewPricing({material_type:pricing.material_type,inner_diameter:pricing.inner_diameter.toString(),outer_diameter:pricing.outer_diameter.toString(),price_per_mm:pricing.price_per_mm.toString(),manufacturing_cost_client1:pricing.manufacturing_cost_client1.toString(),manufacturing_cost_client2:pricing.manufacturing_cost_client2.toString(),manufacturing_cost_client3:pricing.manufacturing_cost_client3.toString(),notes:pricing.notes||''});setEditingPricing(pricing.id);};const deleteMaterialPricing=async pricingId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©ØŸ')){return;}try{await axios.delete(\"\".concat(API,\"/material-pricing/\").concat(pricingId));fetchMaterialPricings();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response41,_error$response41$dat;console.error('Error deleting material pricing:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©: '+(((_error$response41=error.response)===null||_error$response41===void 0?void 0:(_error$response41$dat=_error$response41.data)===null||_error$response41$dat===void 0?void 0:_error$response41$dat.detail)||error.message));}};const cancelEdit=()=>{setEditingPricing(null);setNewPricing({material_type:'NBR',inner_diameter:'',outer_diameter:'',price_per_mm:'',manufacturing_cost_client1:'',manufacturing_cost_client2:'',manufacturing_cost_client3:'',notes:''});};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-6\",children:\"\\uD83D\\uDCB2 \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u062A\\u0633\\u0639\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:editingPricing?'ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©':'Ø¥Ø¶Ø§ÙØ© ØªØ³Ø¹ÙŠØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©'}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"select\",{value:newPricing.material_type,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{material_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:materialTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A (\\u0645\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:newPricing.inner_diameter,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{inner_diameter:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A (\\u0645\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:newPricing.outer_diameter,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{outer_diameter:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0645\\u0644\\u064A (\\u062C.\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newPricing.price_per_mm,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{price_per_mm:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0645\\u0644\\u064A \\u0627\\u0644\\u0648\\u0627\\u062D\\u062F\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639 - \\u0639\\u0645\\u064A\\u0644 1 (\\u062C.\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newPricing.manufacturing_cost_client1,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{manufacturing_cost_client1:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639 \\u0644\\u0644\\u0639\\u0645\\u064A\\u0644 1\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639 - \\u0639\\u0645\\u064A\\u0644 2 (\\u062C.\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newPricing.manufacturing_cost_client2,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{manufacturing_cost_client2:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639 \\u0644\\u0644\\u0639\\u0645\\u064A\\u0644 2\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639 - \\u0639\\u0645\\u064A\\u0644 3 (\\u062C.\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newPricing.manufacturing_cost_client3,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{manufacturing_cost_client3:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639 \\u0644\\u0644\\u0639\\u0645\\u064A\\u0644 3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2 lg:col-span-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"textarea\",{value:newPricing.notes,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{notes:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",rows:\"2\",placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0625\\u0636\\u0627\\u0641\\u064A\\u0629...\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4 space-x-reverse mt-4\",children:[editingPricing&&/*#__PURE__*/_jsx(\"button\",{onClick:cancelEdit,className:\"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"button\",{onClick:addMaterialPricing,className:\"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600\",children:editingPricing?'ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©':'Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:\"\\u0642\\u0627\\u0626\\u0645\\u0629 \\u0627\\u0644\\u062A\\u0633\\u0639\\u064A\\u0631\\u0627\\u062A\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0627\\u0644\\u0623\\u0628\\u0639\\u0627\\u062F (\\u062F\\u0627\\u062E\\u0644\\u064A\\xD7\\u062E\\u0627\\u0631\\u062C\\u064A)\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0645\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0639\\u0645\\u064A\\u0644 1\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0639\\u0645\\u064A\\u0644 2\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0639\\u0645\\u064A\\u0644 3\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:[materialPricings.map((pricing,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:index%2===0?'bg-white':'bg-gray-50',children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",children:pricing.material_type}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:[pricing.inner_diameter,\"\\xD7\",pricing.outer_diameter,\" \\u0645\\u0645\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:[pricing.price_per_mm.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:[pricing.manufacturing_cost_client1.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:[pricing.manufacturing_cost_client2.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:[pricing.manufacturing_cost_client3.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:pricing.notes||'-'}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editMaterialPricing(pricing),className:\"text-blue-600 hover:text-blue-900 ml-2\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteMaterialPricing(pricing.id),className:\"text-red-600 hover:text-red-900\",children:\"\\u062D\\u0630\\u0641\"})]})]},pricing.id)),materialPricings.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"8\",className:\"px-6 py-4 text-center text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u062A\\u0633\\u0639\\u064A\\u0631\\u0627\\u062A \\u0645\\u0636\\u0627\\u0641\\u0629\"})})]})]})})]})]});};// Main Treasury Component - Ø§Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©\nconst MainTreasury=()=>{const{user}=useAuth();const[isAuthenticated,setIsAuthenticated]=useState(false);const[password,setPassword]=useState('');const[balance,setBalance]=useState(0);const[transactions,setTransactions]=useState([]);const[transactionType,setTransactionType]=useState('deposit');const[amount,setAmount]=useState('');const[description,setDescription]=useState('');const[reference,setReference]=useState('');const[showPasswordChange,setShowPasswordChange]=useState(false);const[oldPassword,setOldPassword]=useState('');const[newPassword,setNewPassword]=useState('');// Verify password\nconst verifyPassword=async()=>{try{const response=await axios.post(\"\".concat(API,\"/main-treasury/verify-password\"),{password:password});if(response.data.success){setIsAuthenticated(true);fetchMainTreasuryData();}else{alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©');setPassword('');}}catch(error){console.error('Error verifying password:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');}};// Fetch main treasury data\nconst fetchMainTreasuryData=async()=>{try{const balanceResponse=await axios.get(\"\".concat(API,\"/main-treasury/balance\"));setBalance(balanceResponse.data.balance);const transactionsResponse=await axios.get(\"\".concat(API,\"/main-treasury/transactions\"));setTransactions(transactionsResponse.data);}catch(error){console.error('Error fetching main treasury data:',error);}};// Handle transaction (deposit or withdrawal)\nconst handleTransaction=async()=>{if(!amount||!description){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº ÙˆØ§Ù„ÙˆØµÙ');return;}if(parseFloat(amount)<=0){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');return;}try{const endpoint=transactionType==='deposit'?\"\".concat(API,\"/main-treasury/deposit?username=\").concat(user.username):\"\".concat(API,\"/main-treasury/withdrawal?username=\").concat(user.username);await axios.post(endpoint,{transaction_type:transactionType,amount:parseFloat(amount),description:description,reference:reference||null});alert(transactionType==='deposit'?'ØªÙ… Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ Ø¨Ù†Ø¬Ø§Ø­':'ØªÙ… Ø§Ù„ØµØ±Ù Ø¨Ù†Ø¬Ø§Ø­');// Reset form\nsetAmount('');setDescription('');setReference('');// Refresh data\nfetchMainTreasuryData();}catch(error){var _error$response42,_error$response42$dat;console.error('Error performing transaction:',error);alert(((_error$response42=error.response)===null||_error$response42===void 0?void 0:(_error$response42$dat=_error$response42.data)===null||_error$response42$dat===void 0?void 0:_error$response42$dat.detail)||'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');}};// Change password\nconst changePassword=async()=>{if(!oldPassword||!newPassword){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ÙˆØ§Ù„Ø¬Ø¯ÙŠØ¯Ø©');return;}if(newPassword.length<4){alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 4 Ø£Ø±Ù‚Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');return;}try{await axios.post(\"\".concat(API,\"/main-treasury/change-password\"),{old_password:oldPassword,new_password:newPassword});alert('ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­');setShowPasswordChange(false);setOldPassword('');setNewPassword('');}catch(error){var _error$response43,_error$response43$dat;console.error('Error changing password:',error);alert(((_error$response43=error.response)===null||_error$response43===void 0?void 0:(_error$response43$dat=_error$response43.data)===null||_error$response43$dat===void 0?void 0:_error$response43$dat.detail)||'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');}};// If not authenticated, show password screen\nif(!isAuthenticated){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600 p-6\",dir:\"rtl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-lg shadow-2xl max-w-md w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-6xl mb-4\",children:\"\\uD83D\\uDD10\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800\",children:\"\\u0627\\u0644\\u062E\\u0632\\u0646\\u0629 \\u0627\\u0644\\u0631\\u0626\\u064A\\u0633\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2\",children:\"\\u0627\\u0644\\u0631\\u062C\\u0627\\u0621 \\u0625\\u062F\\u062E\\u0627\\u0644 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 \\u0644\\u0644\\u062F\\u062E\\u0648\\u0644\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),onKeyPress:e=>e.key==='Enter'&&verifyPassword(),placeholder:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\",className:\"w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-center text-lg\",autoFocus:true}),/*#__PURE__*/_jsx(\"button\",{onClick:verifyPassword,className:\"w-full bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 font-semibold text-lg transition-colors\",children:\"\\u062F\\u062E\\u0648\\u0644\"})]})]})});}// Main treasury interface\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 bg-gray-50 min-h-screen\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-800 flex items-center gap-2\",children:\"\\uD83D\\uDD10 \\u0627\\u0644\\u062E\\u0632\\u0646\\u0629 \\u0627\\u0644\\u0631\\u0626\\u064A\\u0633\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u062E\\u0632\\u0646\\u0629 \\u0627\\u0644\\u0631\\u0626\\u064A\\u0633\\u064A\\u0629 \\u0644\\u0644\\u0634\\u0631\\u0643\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-left\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"\\u0627\\u0644\\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-4xl font-bold text-green-600\",children:[balance.toFixed(2),\" \\u062C.\\u0645\"]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-4 flex items-center gap-2\",children:transactionType==='deposit'?'ğŸ’µ Ø¥ÙŠØ¯Ø§Ø¹':'ğŸ’¸ ØµØ±Ù'}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTransactionType('deposit'),className:\"flex-1 py-2 rounded-lg font-semibold transition-colors \".concat(transactionType==='deposit'?'bg-green-500 text-white':'bg-gray-200 text-gray-700 hover:bg-gray-300'),children:\"\\uD83D\\uDCB5 \\u0625\\u064A\\u062F\\u0627\\u0639\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTransactionType('withdrawal'),className:\"flex-1 py-2 rounded-lg font-semibold transition-colors \".concat(transactionType==='withdrawal'?'bg-red-500 text-white':'bg-gray-200 text-gray-700 hover:bg-gray-300'),children:\"\\uD83D\\uDCB8 \\u0635\\u0631\\u0641\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A (\\u062C.\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:amount,onChange:e=>setAmount(e.target.value),placeholder:\"0.00\",className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"\\u0627\\u0644\\u0648\\u0635\\u0641/\\u0627\\u0644\\u0633\\u0628\\u0628 *\"}),/*#__PURE__*/_jsx(\"textarea\",{value:description,onChange:e=>setDescription(e.target.value),placeholder:\"\\u0627\\u0643\\u062A\\u0628 \\u0633\\u0628\\u0628 \\u0627\\u0644\\u0625\\u064A\\u062F\\u0627\\u0639 \\u0623\\u0648 \\u0627\\u0644\\u0635\\u0631\\u0641...\",rows:\"3\",className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"\\u0627\\u0644\\u0645\\u0631\\u062C\\u0639 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:reference,onChange:e=>setReference(e.target.value),placeholder:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u0646\\u062F \\u0623\\u0648 \\u0627\\u0644\\u0645\\u0631\\u062C\\u0639\",className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleTransaction,className:\"w-full py-3 rounded-lg font-semibold text-white transition-colors \".concat(transactionType==='deposit'?'bg-green-500 hover:bg-green-600':'bg-red-500 hover:bg-red-600'),children:transactionType==='deposit'?'âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹':'âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØµØ±Ù'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-4 flex items-center gap-2\",children:\"\\uD83D\\uDD11 \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"}),!showPasswordChange?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"\\u062A\\u063A\\u064A\\u064A\\u0631 \\u0643\\u0644\\u0645\\u0629 \\u0645\\u0631\\u0648\\u0631 \\u0627\\u0644\\u062E\\u0632\\u0646\\u0629 \\u0627\\u0644\\u0631\\u0626\\u064A\\u0633\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPasswordChange(true),className:\"bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 font-semibold\",children:\"\\u062A\\u063A\\u064A\\u064A\\u0631 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 \\u0627\\u0644\\u0642\\u062F\\u064A\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:oldPassword,onChange:e=>setOldPassword(e.target.value),className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 \\u0627\\u0644\\u062C\\u062F\\u064A\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:newPassword,onChange:e=>setNewPassword(e.target.value),className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:changePassword,className:\"flex-1 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 font-semibold\",children:\"\\u2705 \\u062A\\u0623\\u0643\\u064A\\u062F \\u0627\\u0644\\u062A\\u063A\\u064A\\u064A\\u0631\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowPasswordChange(false);setOldPassword('');setNewPassword('');},className:\"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 font-semibold\",children:\"\\u274C \\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-4 flex items-center gap-2\",children:\"\\uD83D\\uDCCB \\u0633\\u062C\\u0644 \\u0627\\u0644\\u062D\\u0631\\u0643\\u0627\\u062A\"}),transactions.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-500 py-8\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u062D\\u0631\\u0643\\u0627\\u062A \\u0645\\u0633\\u062C\\u0644\\u0629\"}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3 text-right\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3 text-right\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3 text-right\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3 text-right\",children:\"\\u0627\\u0644\\u0648\\u0635\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3 text-right\",children:\"\\u0627\\u0644\\u0645\\u0631\\u062C\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3 text-right\",children:\"\\u0627\\u0644\\u0631\\u0635\\u064A\\u062F \\u0628\\u0639\\u062F\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3 text-right\",children:\"\\u0646\\u0641\\u0630 \\u0628\\u0648\\u0627\\u0633\\u0637\\u0629\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:transactions.map(transaction=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3\",children:new Date(transaction.date).toLocaleDateString('ar-EG',{year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit'})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-sm font-semibold \".concat(transaction.transaction_type==='deposit'?'bg-green-100 text-green-800':transaction.transaction_type==='withdrawal'?'bg-red-100 text-red-800':'bg-blue-100 text-blue-800'),children:transaction.transaction_type==='deposit'?'ğŸ’µ Ø¥ÙŠØ¯Ø§Ø¹':transaction.transaction_type==='withdrawal'?'ğŸ’¸ ØµØ±Ù':'â†”ï¸ ØªØ±Ø­ÙŠÙ„'})}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3 font-bold \".concat(transaction.transaction_type==='withdrawal'?'text-red-600':'text-green-600'),children:[transaction.transaction_type==='withdrawal'?'-':'+',transaction.amount.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3\",children:transaction.description}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3 text-gray-600\",children:transaction.reference||'-'}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3 font-bold text-blue-600\",children:[transaction.balance_after.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3\",children:transaction.performed_by})]},transaction.id))})]})})]})]});};// Main App Component\nconst App=()=>{const[currentPage,setCurrentPage]=useState('sales');// Default to sales instead of dashboard\nconst{user}=useAuth();if(!user)return/*#__PURE__*/_jsx(Login,{});const renderPage=()=>{switch(currentPage){case'dashboard':// Only Elsawy can access dashboard\nreturn(user===null||user===void 0?void 0:user.username)==='Elsawy'?/*#__PURE__*/_jsx(Dashboard,{}):/*#__PURE__*/_jsx(Sales,{});case'sales':return/*#__PURE__*/_jsx(Sales,{});case'inventory':return/*#__PURE__*/_jsx(Inventory,{});case'stock':return/*#__PURE__*/_jsx(Stock,{});case'local':return/*#__PURE__*/_jsx(Local,{});case'deferred':return/*#__PURE__*/_jsx(Deferred,{});case'expenses':return/*#__PURE__*/_jsx(Expenses,{});case'revenue':return/*#__PURE__*/_jsx(Revenue,{});case'treasury':return/*#__PURE__*/_jsx(Treasury,{});case'main-treasury':// Only Elsawy can access main treasury\nreturn(user===null||user===void 0?void 0:user.username)==='Elsawy'?/*#__PURE__*/_jsx(MainTreasury,{}):/*#__PURE__*/_jsx(Sales,{});case'invoices':return/*#__PURE__*/_jsx(Invoices,{});case'deleted-invoices':return/*#__PURE__*/_jsx(DeletedInvoices,{});case'customer-statement':return/*#__PURE__*/_jsx(CustomerStatement,{});case'settle-account':return/*#__PURE__*/_jsx(SettleAccount,{});case'work-orders':return/*#__PURE__*/_jsx(WorkOrders,{});case'pricing':return/*#__PURE__*/_jsx(Pricing,{});case'backup':return/*#__PURE__*/_jsx(Backup,{});case'users':return/*#__PURE__*/_jsx(Users,{});default:return/*#__PURE__*/_jsx(Sales,{});// Default to sales instead of dashboard\n}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen bg-gray-50\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(Navigation,{currentPage:currentPage,onPageChange:setCurrentPage}),/*#__PURE__*/_jsx(\"main\",{className:\"flex-1 overflow-y-auto bg-gradient-to-br from-gray-50 to-blue-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:renderPage()})})]});};// Root App with AuthProvider\nconst AppWithAuth=()=>/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(App,{})});export default AppWithAuth;","map":{"version":3,"names":["React","useState","useEffect","createContext","useContext","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","API","concat","AuthContext","useAuth","context","Error","AuthProvider","_ref","children","user","setUser","isLoading","setIsLoading","savedUser","localStorage","getItem","JSON","parse","login","username","password","response","post","params","data","success","setItem","stringify","error","console","logout","removeItem","className","Provider","value","Login","setUsername","setPassword","setError","handleSubmit","e","preventDefault","dir","src","alt","onSubmit","type","onChange","target","placeholder","required","Navigation","_ref2","currentPage","onPageChange","isCollapsed","setIsCollapsed","masterPages","key","label","icon","elsawyPages","adminPages","userPages","pages","role","onClick","title","style","maxHeight","map","page","Inventory","inventoryItems","setInventoryItems","inventoryTransactions","setInventoryTransactions","lowStockItems","setLowStockItems","currentView","setCurrentView","editingItem","setEditingItem","newItem","setNewItem","material_type","inner_diameter","outer_diameter","available_pieces","min_stock_level","notes","newTransaction","setNewTransaction","transaction_type","pieces_change","reason","searchTerm","setSearchTerm","materialTypes","fetchInventoryItems","get","fetchInventoryTransactions","fetchLowStockItems","addInventoryItem","alert","put","id","_objectSpread","parseFloat","parseInt","_error$response","_error$response$data","detail","message","addInventoryTransaction","transactionData","Math","abs","_error$response2","_error$response2$data","filteredItems","filter","item","_item$notes","toLowerCase","includes","toString","sort","a","b","materialPriority","aPriority","bPriority","filteredTransactions","transaction","_transaction$notes","Date","date","length","confirm","delete","step","toLocaleDateString","remaining_pieces","max","responseType","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","toISOString","split","body","appendChild","click","remove","accept","file","files","formData","FormData","append","headers","imported_count","errors","warn","Local","suppliers","setSuppliers","localProducts","setLocalProducts","supplierTransactions","setSupplierTransactions","newSupplier","setNewSupplier","name","phone","address","newProduct","setNewProduct","supplier_id","purchase_price","selling_price","current_stock","amount","description","product_name","quantity","unit_price","payment_method","selectedSupplier","setSelectedSupplier","paymentAmount","setPaymentAmount","paymentMethod","setPaymentMethod","fetchSuppliers","fetchLocalProducts","fetchSupplierTransactions","deleteSupplierTransaction","transactionId","choice","reverseTransaction","confirmMsg","reverse_transaction","_error$response3","_error$response3$data","addSupplier","trim","_error$response4","_error$response4$data","editSupplier","supplier","deleteSupplier","supplierId","_error$response5","_error$response5$data","addLocalProduct","_error$response6","_error$response6$data","editLocalProduct","product","deleteLocalProduct","productId","_error$response7","_error$response7$data","paySupplier","total_purchases","toFixed","total_paid","balance","supplier_name","total_sold","s","Dashboard","stats","setStats","total_sales","total_expenses","net_profit","total_unpaid","invoice_count","customer_count","fetchStats","clearAllData","printReport","reportType","currentDate","printContent","printWindow","open","write","close","print","Sales","customers","setCustomers","newCustomer","setNewCustomer","selectedCustomer","setSelectedCustomer","supervisorName","setSupervisorName","invoiceTitle","setInvoiceTitle","currentItem","setCurrentItem","seal_type","height","product_type","measurements","setMeasurements","inner_diameter_mm","inner_diameter_inch","outer_diameter_mm","outer_diameter_inch","height_mm","height_inch","wall_height_mm","wall_height_inch","localProduct","setLocalProduct","product_size","items","setItems","discount","setDiscount","discountType","setDiscountType","compatibilityResults","setCompatibilityResults","selectedMaterial","setSelectedMaterial","selectedMaterials","setSelectedMaterials","measurementUnit","setMeasurementUnit","wallHeight","setWallHeight","clientType","setClientType","mmToInch","mm","inchToMm","inch","handleMeasurementChange","field","unit","newMeasurements","mmValue","sealTypes","fetchCustomers","sortedCustomers","localeCompare","calculateAutomaticPrice","material","client_type","log","confirmMultiMaterialSelection","totalPrice","selected","pricing","total_price","seals","sel","unit_code","join","checkCompatibility","innerDiameter","outerDiameter","isNaN","addItem","hasInnerDiameter","hasOuterDiameter","hasHeight","wallHeightValue","wall_height","display_measurements","material_used","material_details","is_finished_product","selected_materials","seals_count","product_type_name","local_product_details","editItem","index","_item$inner_diameter","_item$outer_diameter","_item$height","_item$unit_price","_item$inner_diameter2","_item$outer_diameter2","_item$height2","_item$wall_height","measurement_unit","_item$unit_price2","newItems","_","i","deleteItem","isCreatingInvoice","setIsCreatingInvoice","createInvoice","customerId","customerName","customerResponse","customerError","_customerError$respon","status","existingCustomer","find","c","customer","subtotal","reduce","sum","discountAmount","totalAfterDiscount","invoiceData","customer_id","customer_name","invoice_title","supervisor_name","discount_type","discount_value","total_after_discount","encodeURIComponent","printInvoice","_error$response8","_error$response8$data","invoice","invoice_number","customer_address","Array","from","total_amount","clearAllInvoices","exactMatch","borderColor","backgroundColor","tempMsg","textContent","parentElement","setTimeout","partialMatch","some","startsWith","rows","compatible_materials","min","floor","newSelected","isSelected","maxSeals","remainingSeals","score","newSelection","totalSeals","disabled","compatible_products","original_inner_diameter","original_outer_diameter","original_height","original_wall_height","display","Stock","rawMaterials","setRawMaterials","finishedProducts","setFinishedProducts","newRawMaterial","setNewRawMaterial","pieces_count","cost_per_mm","newFinishedProduct","setNewFinishedProduct","filteredRawMaterials","filteredFinishedProducts","fetchRawMaterials","fetchFinishedProducts","addRawMaterial","rawMaterial","_error$response9","_error$response9$data","clearAllRawMaterials","deleteRawMaterial","materialId","editRawMaterial","handleFileImport","event","_error$response10","_error$response10$dat","handleFileExport","removeChild","revokeObjectURL","addFinishedProduct","finishedProduct","editFinishedProduct","deleteFinishedProduct","Deferred","_selectedInvoice$rema","unpaidInvoices","setUnpaidInvoices","selectedInvoice","setSelectedInvoice","paymentNotes","setPaymentNotes","customerTotals","setCustomerTotals","fetchUnpaidInvoices","totals","filteredInvoices","forEach","totalAmount","invoiceCount","remaining_amount","invoices","getCustomerName","makePayment","invoice_id","Object","keys","entries","_ref3","_invoice$total_amount","_invoice$paid_amount","_invoice$remaining_am","paid_amount","inv","Expenses","expenses","setExpenses","newExpense","setNewExpense","category","expenseCategories","fetchExpenses","addExpense","deleteExpense","expenseId","getTotalExpenses","expense","getExpensesByCategory","byCategory","cat","exp","clearAllExpenses","_ref4","Revenue","_revenueData$total_re","_revenueData$total_ex","_revenueData$material","_revenueData$profit","_revenueData$total_re2","_revenueData$material2","_revenueData$profit2","revenueData","setRevenueData","total_revenue","material_cost","profit","period","setPeriod","fetchRevenueData","Invoices","setInvoices","filterStatus","setFilterStatus","editingInvoice","setEditingInvoice","editForm","setEditForm","showPasswordModal","setShowPasswordModal","operationPassword","setOperationPassword","pendingOperation","setPendingOperation","fetchInvoices","_error$response11","_error$response11$dat","requestPasswordFor","operationType","operationData","executeOperation","executeCancelInvoice","executeUpdateInvoice","executeChangePaymentMethod","invoiceId","newMethod","_error$response12","_error$response12$dat","new_payment_method","changePaymentMethod","paymentMethods","modalHtml","method","insertAdjacentHTML","modal","getElementById","selectElement","confirmBtn","cancelBtn","closeModal","parentNode","onclick","cancelInvoice","confirmMessage","startEditInvoice","cancelEdit","saveInvoiceEdit","updatedInvoice","_error$response13","_error$response14","_error$response14$dat","updateInvoiceStatus","newStatus","matchesStatus","matchesSearch","_invoice$subtotal","_invoice$total_amount2","_ref5","_item$local_product_d","_item$local_product_d2","onKeyPress","autoFocus","DeletedInvoices","isAuthenticated","setIsAuthenticated","deletedInvoices","setDeletedInvoices","showPasswordChange","setShowPasswordChange","oldPassword","setOldPassword","newPassword","setNewPassword","showInvoiceOpsPasswordChange","setShowInvoiceOpsPasswordChange","invoiceOpsOldPassword","setInvoiceOpsOldPassword","invoiceOpsNewPassword","setInvoiceOpsNewPassword","verifyPassword","fetchDeletedInvoices","changePassword","old_password","new_password","_error$response15","_error$response15$dat","changeInvoiceOpsPassword","_error$response16","_error$response16$dat","handleRestore","invoiceNumber","warning","_error$response17","_error$response17$dat","handlePermanentDelete","_error$response18","_error$response18$dat","_invoice$invoice_numb","_invoice$customer_nam","_invoice$payment_meth","searchLower","colSpan","_invoice$total_amount3","created_at","deleted_at","year","month","day","hour","minute","CustomerStatement","_statement$summary$to","_statement$summary$to2","_statement$summary$fi","statement","setStatement","fromDate","setFromDate","toDate","setToDate","loading","setLoading","fetchStatement","from_date","to_date","_error$response19","_error$response19$dat","printStatement","_summary$total_credit","_summary$total_debit","_summary$final_balanc","transactions","summary","final_balance","is_also_supplier","t","debit","credit","total_credit","total_debit","trans","reference","SettleAccount","deferredInvoices","setDeferredInvoices","amountPaid","setAmountPaid","result","setResult","isCustomerAlsoSupplier","setIsCustomerAlsoSupplier","supplierBalance","setSupplierBalance","fetchCustomerInvoices","customerInvoices","handleCustomerChange","current_balance","undefined","handleSettleAccount","amount_paid","total_amount_paid","amount_distributed","invoices_count","paid_invoices","_error$response20","_error$response20$dat","handleReconciliation","_customers$find","settlementAmount","totalRemaining","supplier_previous_balance","customer_previous_debt","settlement_amount","supplier_new_balance","customer_remaining_debt","settled_invoices","note","_error$response21","_error$response21$dat","WorkOrders","workOrders","setWorkOrders","selectedInvoices","setSelectedInvoices","newWorkOrder","setNewWorkOrder","priority","showAddToExisting","setShowAddToExisting","selectedWorkOrderId","setSelectedWorkOrderId","selectedInvoiceForAdd","setSelectedInvoiceForAdd","fetchWorkOrders","toggleInvoiceSelection","prev","createWorkOrderFromMultipleInvoices","selectedInvoicesData","cleanInvoices","cleanInv","_id","workOrderData","total_items","_inv$items","_error$response22","_error$response22$dat","addInvoiceToExistingWorkOrder","_error$response23","_error$response23$dat","getInvoiceDetails","getAvailableInvoices","getAvailableInvoicesForAdd","_selectedWorkOrder$in","selectedWorkOrder","wo","usedInvoiceIds","printWorkOrder","workOrder","_workOrder$invoices","workOrderInvoices","totalItems","_inv$items2","slice","is_daily","_invoice$total_amount4","_invoice$items","_invoice$items2","clearAllWorkOrders","deleteWorkOrder","workOrderId","_workOrder$invoices2","_invoice$total_amount5","_invoice$total_amount6","_invoice$items3","checked","_inv$items3","_workOrder$total_amou","_invoice$total_amount7","_invoice$items4","_invoice$items5","itemIndex","unit_code_display","Treasury","accounts","setAccounts","selectedAccount","setSelectedAccount","showTransferModal","setShowTransferModal","transferData","setTransferData","to","manualTransaction","setManualTransaction","account","showManualForm","setShowManualForm","fetchTreasuryData","balancesResponse","transactionsResponse","invoicesResponse","expensesResponse","balances","manualTransactions","updatedAccounts","paymentMethodMap","push","account_id","handleTransfer","fromAccount","acc","from_account","to_account","handleManualTransaction","clearAccount","accountId","deleteTransaction","_error$response24","_error$response24$dat","resetTreasury","firstConfirm","secondConfirm","finalConfirm","prompt","deleted_treasury_transactions","_error$response25","_error$response25$dat","selectedAccountData","Backup","backups","setBackups","driveFiles","setDriveFiles","driveStatus","setDriveStatus","creating","setCreating","activeTab","setActiveTab","showDeleteModal","setShowDeleteModal","deletePassword","setDeletePassword","deleteType","setDeleteType","deleteDate","setDeleteDate","fetchBackups","fetchDriveStatus","fetchDriveFiles","openDeleteModal","handleBulkDelete","count","deleted_count","_error$response26","_error$response26$dat","checkBackupStatus","backupId","attempts","arguments","total_documents","createBackup","backup_id","_error$response27","_error$response27$dat","downloadBackup","createdAt","timestamp","replace","filename","_error$response28","_error$response28$dat","handleFileUpload","endsWith","action","uploadBackupFile","restoreDirectly","collections_restored","location","reload","_error$response29","_error$response29$dat","restoreBackup","toLocaleString","_error$response30","_error$response30$dat","deleteBackup","_error$response31","_error$response31$dat","uploadToDrive","enabled","_error$response32","_error$response32$dat","errorMsg","downloadFromDrive","fileId","fileName","_error$response33","_error$response33$dat","restoreFromDrive","_error$response34","_error$response34$dat","deleteFromDrive","_error$response35","_error$response35$dat","switchTab","tab","backup","is_scheduled","created_by","webViewLink","rel","createdTime","size","Users","users","setUsers","newUser","setNewUser","editingUser","setEditingUser","companyInfo","setCompanyInfo","editingCompany","setEditingCompany","selectedUserPermissions","setSelectedUserPermissions","allPermissions","fetchUsers","dbUsers","hasElsawy","hasRoot","permissions","p","updatedResponse","addUser","defaultPermissions","_error$response36","_error$response36$dat","startEdit","saveEdit","currentUser","u","updatedUser","_error$response37","_error$response37$dat","deleteUser","userId","resetPassword","_error$response38","_error$response38$dat","openPermissions","tempPermissions","togglePermission","permissionKey","newPermissions","savePermissions","_error$response39","_error$response39$dat","saveCompanyInfo","_user$permissions","permission","Pricing","materialPricings","setMaterialPricings","editingPricing","setEditingPricing","newPricing","setNewPricing","price_per_mm","manufacturing_cost_client1","manufacturing_cost_client2","manufacturing_cost_client3","fetchMaterialPricings","addMaterialPricing","_error$response40","_error$response40$dat","editMaterialPricing","deleteMaterialPricing","pricingId","_error$response41","_error$response41$dat","MainTreasury","setBalance","setTransactions","transactionType","setTransactionType","setAmount","setDescription","setReference","fetchMainTreasuryData","balanceResponse","handleTransaction","endpoint","_error$response42","_error$response42$dat","_error$response43","_error$response43$dat","balance_after","performed_by","App","setCurrentPage","renderPage","AppWithAuth"],"sources":["/app/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, createContext, useContext } from 'react';\nimport './App.css';\nimport axios from 'axios';\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nconst API = `${BACKEND_URL}/api`;\n\n// Auth Context\nconst AuthContext = createContext();\n\nconst useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\nconst AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const savedUser = localStorage.getItem('user');\n    if (savedUser) {\n      setUser(JSON.parse(savedUser));\n    }\n    setIsLoading(false);\n  }, []);\n\n  const login = async (username, password) => {\n    try {\n      const response = await axios.post(`${API}/auth/login`, null, {\n        params: { username, password }\n      });\n      \n      if (response.data.success) {\n        setUser(response.data.user);\n        localStorage.setItem('user', JSON.stringify(response.data.user));\n        return true;\n      }\n      return false;\n    } catch (error) {\n      console.error('Login error:', error);\n      return false;\n    }\n  };\n\n  const logout = () => {\n    setUser(null);\n    localStorage.removeItem('user');\n  };\n\n  if (isLoading) {\n    return <div className=\"flex items-center justify-center min-h-screen\">\n      <div className=\"text-xl\">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>\n    </div>;\n  }\n\n  return (\n    <AuthContext.Provider value={{ user, login, logout }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\n// Login Component\nconst Login = () => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const { login } = useAuth();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    \n    const success = await login(username, password);\n    if (!success) {\n      setError('Ø®Ø·Ø£ ÙÙŠ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4\" dir=\"rtl\">\n      <div className=\"max-w-md w-full\">\n        {/* Login Card */}\n        <div className=\"bg-white rounded-2xl shadow-2xl p-8 border border-blue-100\">\n          {/* Header */}\n          <div className=\"text-center mb-8\">\n            <div className=\"mb-4\">\n              <img \n                src=\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\" \n                alt=\"Master Seal Logo\" \n                className=\"h-16 w-16 mx-auto rounded-full shadow-lg border-4 border-blue-100\"\n              />\n            </div>\n            <h1 className=\"text-3xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent\">Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„</h1>\n            <p className=\"text-gray-500 mt-2\">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„</p>\n            <div className=\"w-16 h-1 bg-gradient-to-r from-blue-400 to-blue-600 mx-auto mt-3 rounded-full\"></div>\n          </div>\n          \n          {/* Login Form */}\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <div className=\"space-y-2\">\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                ğŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\n              </label>\n              <input\n                type=\"text\"\n                value={username}\n                onChange={(e) => setUsername(e.target.value)}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-3 focus:ring-blue-200 focus:border-blue-400 transition-all duration-200 bg-gray-50 hover:bg-white\"\n                placeholder=\"Ø§Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\"\n                required\n              />\n            </div>\n            \n            <div className=\"space-y-2\">\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                ğŸ”’ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\n              </label>\n              <input\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-3 focus:ring-blue-200 focus:border-blue-400 transition-all duration-200 bg-gray-50 hover:bg-white\"\n                placeholder=\"Ø§Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\"\n                required\n              />\n            </div>\n            \n            {error && (\n              <div className=\"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-xl text-sm text-center animate-pulse\">\n                âš ï¸ {error}\n              </div>\n            )}\n            \n            <button\n              type=\"submit\"\n              className=\"w-full bg-gradient-to-r from-blue-600 to-blue-800 text-white py-3 px-6 rounded-xl hover:from-blue-700 hover:to-blue-900 focus:outline-none focus:ring-3 focus:ring-blue-300 transition-all duration-200 font-semibold shadow-lg hover:shadow-xl transform hover:scale-105\"\n            >\n              ğŸš€ Ø¯Ø®ÙˆÙ„\n            </button>\n          </form>\n          \n          {/* Footer */}\n          <div className=\"text-center mt-8 pt-6 border-t border-gray-100\">\n            <p className=\"text-xs text-gray-400\">Ø§Ù„Ø­Ø±ÙÙŠÙŠÙ† - Ø§Ù„Ø³Ù„Ø§Ù… - Ø£Ù…Ø§Ù… Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª</p>\n            <p className=\"text-xs text-gray-500 mt-1 font-medium\">ğŸ“ 01020630677</p>\n          </div>\n        </div>\n        \n        {/* Additional Info Card */}\n        <div className=\"mt-6 bg-white/60 backdrop-blur-sm rounded-xl p-4 text-center border border-blue-100/50\">\n          <p className=\"text-sm text-gray-600\">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…ØªÙƒØ§Ù…Ù„ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙˆØ§Ù„Ù…Ø®Ø²ÙˆÙ† ÙˆØ§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Navigation Component\nconst Navigation = ({ currentPage, onPageChange }) => {\n  const { user, logout } = useAuth();\n  const [isCollapsed, setIsCollapsed] = useState(false);\n  \n  // Master user has all pages + delete records\n  const masterPages = [\n    { key: 'dashboard', label: 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…', icon: 'ğŸ“Š' },\n    { key: 'sales', label: 'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª', icon: 'ğŸ’°' },\n    { key: 'inventory', label: 'Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø®Ø§Ù…Ø§Øª', icon: 'ğŸ“¦' },\n    { key: 'stock', label: 'Ù…Ø®Ø²Ù† Ø¥Ù†ØªØ§Ø¬', icon: 'ğŸª' },\n    { key: 'local', label: 'Ù…ÙˆØ±Ø¯ÙŠÙ†', icon: 'ğŸ­' },\n    { key: 'deferred', label: 'Ø§Ù„Ø¢Ø¬Ù„', icon: 'â³' },\n    { key: 'expenses', label: 'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª', icon: 'ğŸ’¸' },\n    { key: 'revenue', label: 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª', icon: 'ğŸ“ˆ' },\n    { key: 'treasury', label: 'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©', icon: 'ğŸ¦' },\n    { key: 'main-treasury', label: 'Ø§Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©', icon: 'ğŸ”' },\n    { key: 'invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ±', icon: 'ğŸ§¾' },\n    { key: 'deleted-invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©', icon: 'ğŸ—‘ï¸' },\n    { key: 'customer-statement', label: 'ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨', icon: 'ğŸ“‹' },\n    { key: 'settle-account', label: 'ØªØµÙÙŠØ© Ø­Ø³Ø§Ø¨', icon: 'ğŸ’µ' },\n    { key: 'work-orders', label: 'Ø£Ù…Ø± Ø´ØºÙ„', icon: 'âš™ï¸' },\n    { key: 'pricing', label: 'Ø§Ù„ØªØ³Ø¹ÙŠØ±', icon: 'ğŸ’²' },\n    { key: 'backup', label: 'Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ', icon: 'ğŸ’¾' },\n    { key: 'users', label: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†', icon: 'ğŸ‘¥' }\n  ];\n\n  // Dashboard is only for Elsawy\n  const elsawyPages = [\n    { key: 'dashboard', label: 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…', icon: 'ğŸ“Š' },\n    { key: 'sales', label: 'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª', icon: 'ğŸ’°' },\n    { key: 'inventory', label: 'Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø®Ø§Ù…Ø§Øª', icon: 'ğŸ“¦' },\n    { key: 'stock', label: 'Ù…Ø®Ø²Ù† Ø¥Ù†ØªØ§Ø¬', icon: 'ğŸª' },\n    { key: 'local', label: 'Ù…ÙˆØ±Ø¯ÙŠÙ†', icon: 'ğŸ­' },\n    { key: 'deferred', label: 'Ø§Ù„Ø¢Ø¬Ù„', icon: 'â³' },\n    { key: 'expenses', label: 'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª', icon: 'ğŸ’¸' },\n    { key: 'revenue', label: 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª', icon: 'ğŸ“ˆ' },\n    { key: 'treasury', label: 'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©', icon: 'ğŸ¦' },\n    { key: 'main-treasury', label: 'Ø§Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©', icon: 'ğŸ”' },\n    { key: 'invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ±', icon: 'ğŸ§¾' },\n    { key: 'deleted-invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©', icon: 'ğŸ—‘ï¸' },\n    { key: 'customer-statement', label: 'ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨', icon: 'ğŸ“‹' },\n    { key: 'settle-account', label: 'ØªØµÙÙŠØ© Ø­Ø³Ø§Ø¨', icon: 'ğŸ’µ' },\n    { key: 'work-orders', label: 'Ø£Ù…Ø± Ø´ØºÙ„', icon: 'âš™ï¸' },\n    { key: 'pricing', label: 'Ø§Ù„ØªØ³Ø¹ÙŠØ±', icon: 'ğŸ’²' },\n    { key: 'backup', label: 'Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ', icon: 'ğŸ’¾' },\n    { key: 'users', label: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†', icon: 'ğŸ‘¥' }\n  ];\n  \n  const adminPages = [\n    { key: 'sales', label: 'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª', icon: 'ğŸ’°' },\n    { key: 'inventory', label: 'Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø®Ø§Ù…Ø§Øª', icon: 'ğŸ“¦' },\n    { key: 'stock', label: 'Ù…Ø®Ø²Ù† Ø¥Ù†ØªØ§Ø¬', icon: 'ğŸª' },\n    { key: 'local', label: 'Ù…ÙˆØ±Ø¯ÙŠÙ†', icon: 'ğŸ­' },\n    { key: 'deferred', label: 'Ø§Ù„Ø¢Ø¬Ù„', icon: 'â³' },\n    { key: 'expenses', label: 'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª', icon: 'ğŸ’¸' },\n    { key: 'revenue', label: 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª', icon: 'ğŸ“ˆ' },\n    { key: 'treasury', label: 'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©', icon: 'ğŸ¦' },\n    { key: 'invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ±', icon: 'ğŸ§¾' },\n    { key: 'deleted-invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©', icon: 'ğŸ—‘ï¸' },\n    { key: 'customer-statement', label: 'ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨', icon: 'ğŸ“‹' },\n    { key: 'work-orders', label: 'Ø£Ù…Ø± Ø´ØºÙ„', icon: 'âš™ï¸' },\n    { key: 'pricing', label: 'Ø§Ù„ØªØ³Ø¹ÙŠØ±', icon: 'ğŸ’²' },\n    { key: 'backup', label: 'Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ', icon: 'ğŸ’¾' },\n    { key: 'users', label: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†', icon: 'ğŸ‘¥' }\n  ];\n  \n  const userPages = [\n    { key: 'sales', label: 'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª', icon: 'ğŸ’°' },\n    { key: 'inventory', label: 'Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø®Ø§Ù…Ø§Øª', icon: 'ğŸ“¦' },\n    { key: 'stock', label: 'Ù…Ø®Ø²Ù† Ø¥Ù†ØªØ§Ø¬', icon: 'ğŸª' },\n    { key: 'local', label: 'Ù…ÙˆØ±Ø¯ÙŠÙ†', icon: 'ğŸ­' },\n    { key: 'deferred', label: 'Ø§Ù„Ø¢Ø¬Ù„', icon: 'â³' },\n    { key: 'expenses', label: 'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª', icon: 'ğŸ’¸' },\n    { key: 'treasury', label: 'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©', icon: 'ğŸ¦' },\n    { key: 'invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ±', icon: 'ğŸ§¾' },\n    { key: 'deleted-invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©', icon: 'ğŸ—‘ï¸' },\n    { key: 'customer-statement', label: 'ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨', icon: 'ğŸ“‹' },\n    { key: 'work-orders', label: 'Ø£Ù…Ø± Ø´ØºÙ„', icon: 'âš™ï¸' },\n    { key: 'pricing', label: 'Ø§Ù„ØªØ³Ø¹ÙŠØ±', icon: 'ğŸ’²' }\n  ];\n  \n  // Determine pages based on user role\n  const pages = user?.username === 'master' ? masterPages :\n               user?.username === 'Elsawy' ? elsawyPages : \n               user?.role === 'admin' ? adminPages : userPages;\n\n  return (\n    <div \n      className={`bg-gradient-to-b from-blue-900 via-blue-800 to-blue-900 text-white shadow-2xl transition-all duration-300 relative ${\n        isCollapsed ? 'w-20' : 'w-80'\n      }`}\n    >\n      {/* Collapse/Expand Button */}\n      <button\n        onClick={() => setIsCollapsed(!isCollapsed)}\n        className=\"absolute -left-4 top-6 bg-blue-600 hover:bg-blue-700 text-white rounded-full p-2 shadow-lg z-50 transition-all\"\n        title={isCollapsed ? 'ØªÙˆØ³ÙŠØ¹ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©' : 'Ø·ÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©'}\n      >\n        <span className=\"text-xl\">{isCollapsed ? 'â—€' : 'â–¶'}</span>\n      </button>\n\n      {/* Header */}\n      <div className=\"p-6 border-b border-blue-700\">\n        <div className={`flex items-center ${isCollapsed ? 'justify-center' : 'space-x-3 space-x-reverse'}`}>\n          <img \n            src=\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\" \n            alt=\"Master Seal Logo\" \n            className=\"h-12 w-12 rounded-lg shadow-lg\"\n          />\n          {!isCollapsed && (\n            <div>\n              <h1 className=\"text-xl font-bold text-white\">Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„</h1>\n              <p className=\"text-xs text-blue-200\">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…ØªÙƒØ§Ù…Ù„</p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* User Info */}\n      <div className=\"p-4 bg-blue-800 border-b border-blue-700\">\n        <div className={`flex items-center ${isCollapsed ? 'justify-center flex-col space-y-2' : 'justify-between'}`}>\n          {!isCollapsed && (\n            <div>\n              <p className=\"text-sm font-medium\">Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ø§Ù‹</p>\n              <p className=\"text-lg font-bold text-blue-200\">{user?.username}</p>\n            </div>\n          )}\n          <button\n            onClick={logout}\n            className={`bg-red-500 hover:bg-red-600 rounded-lg text-sm font-medium transition-all duration-200 shadow-lg hover:shadow-xl ${\n              isCollapsed ? 'p-2' : 'px-3 py-2'\n            }`}\n            title=\"Ø®Ø±ÙˆØ¬\"\n          >\n            {isCollapsed ? 'ğŸšª' : 'Ø®Ø±ÙˆØ¬'}\n          </button>\n        </div>\n      </div>\n      \n      {/* Navigation Menu */}\n      <nav className=\"flex-1 p-4 space-y-2 overflow-y-auto\" style={{ maxHeight: 'calc(100vh - 300px)' }}>\n        {pages.map(page => (\n          <button\n            key={page.key}\n            onClick={() => onPageChange(page.key)}\n            className={`w-full flex items-center p-4 rounded-xl transition-all duration-200 group ${\n              isCollapsed ? 'justify-center' : 'space-x-3 space-x-reverse text-right'\n            } ${\n              currentPage === page.key \n                ? 'bg-white text-blue-900 shadow-lg transform scale-105' \n                : 'hover:bg-blue-700 hover:transform hover:translate-x-2'\n            }`}\n            title={isCollapsed ? page.label : ''}\n          >\n            <span className=\"text-2xl\">{page.icon}</span>\n            {!isCollapsed && (\n              <>\n                <span className=\"font-medium\">{page.label}</span>\n                {currentPage === page.key && (\n                  <div className=\"mr-auto\">\n                    <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-pulse\"></div>\n                  </div>\n                )}\n              </>\n            )}\n          </button>\n        ))}\n      </nav>\n\n      {/* Footer */}\n      {!isCollapsed && (\n        <div className=\"p-4 border-t border-blue-700 text-center\">\n          <p className=\"text-xs text-blue-300\">Ø§Ù„Ø­Ø±ÙÙŠÙŠÙ† - Ø§Ù„Ø³Ù„Ø§Ù… - Ø£Ù…Ø§Ù… Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª</p>\n          <p className=\"text-xs text-blue-400 mt-1\">01020630677</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Inventory Management Component\nconst Inventory = () => {\n  const [inventoryItems, setInventoryItems] = useState([]);\n  const [inventoryTransactions, setInventoryTransactions] = useState([]);\n  const [lowStockItems, setLowStockItems] = useState([]);\n  const [currentView, setCurrentView] = useState('items'); // items, transactions, low-stock, add-item\n  const [editingItem, setEditingItem] = useState(null); // Ù„Ù„ØªØ¹Ø¯ÙŠÙ„\n  const [newItem, setNewItem] = useState({\n    material_type: 'NBR',\n    inner_diameter: '',\n    outer_diameter: '',\n    available_pieces: '',  // ØªØºÙŠÙŠØ± Ù…Ù† available_height Ø¥Ù„Ù‰ available_pieces\n    min_stock_level: 2,    // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ 2 Ù‚Ø·Ø¹Ø©\n    notes: ''\n  });\n  const [newTransaction, setNewTransaction] = useState({\n    material_type: 'NBR',\n    inner_diameter: '',\n    outer_diameter: '',\n    transaction_type: 'in',\n    pieces_change: '',     // ØªØºÙŠÙŠØ± Ù…Ù† height_change Ø¥Ù„Ù‰ pieces_change\n    reason: '',\n    notes: ''\n  });\n  const [searchTerm, setSearchTerm] = useState('');\n\n  const materialTypes = ['NBR', 'BUR', 'BT', 'VT', 'BOOM'];\n\n  // Fetch functions\n  const fetchInventoryItems = async () => {\n    try {\n      const response = await axios.get(`${API}/inventory`);\n      setInventoryItems(response.data || []);\n    } catch (error) {\n      console.error('Error fetching inventory items:', error);\n    }\n  };\n\n  const fetchInventoryTransactions = async () => {\n    try {\n      const response = await axios.get(`${API}/inventory-transactions`);\n      setInventoryTransactions(response.data || []);\n    } catch (error) {\n      console.error('Error fetching inventory transactions:', error);\n    }\n  };\n\n  const fetchLowStockItems = async () => {\n    try {\n      const response = await axios.get(`${API}/inventory/low-stock`);\n      setLowStockItems(response.data || []);\n    } catch (error) {\n      console.error('Error fetching low stock items:', error);\n    }\n  };\n\n  useEffect(() => {\n    fetchInventoryItems();\n    fetchInventoryTransactions();\n    fetchLowStockItems();\n  }, []);\n\n  // Add or Update inventory item\n  const addInventoryItem = async () => {\n    if (!newItem.material_type || !newItem.inner_diameter || \n        !newItem.outer_diameter || !newItem.available_pieces) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      if (editingItem) {\n        // Update existing item\n        await axios.put(`${API}/inventory/${editingItem.id}`, {\n          ...newItem,\n          inner_diameter: parseFloat(newItem.inner_diameter),\n          outer_diameter: parseFloat(newItem.outer_diameter),\n          available_pieces: parseInt(newItem.available_pieces),\n          min_stock_level: parseInt(newItem.min_stock_level || 2)\n        });\n        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n        setEditingItem(null);\n      } else {\n        // Add new item\n        await axios.post(`${API}/inventory`, {\n          ...newItem,\n          inner_diameter: parseFloat(newItem.inner_diameter),\n          outer_diameter: parseFloat(newItem.outer_diameter),\n          available_pieces: parseInt(newItem.available_pieces),\n          min_stock_level: parseInt(newItem.min_stock_level || 2)\n        });\n        alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n      }\n      \n      fetchInventoryItems();\n      fetchLowStockItems();\n      setCurrentView('items');\n      setNewItem({\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        available_pieces: '',\n        min_stock_level: 2,\n        notes: ''\n      });\n    } catch (error) {\n      console.error('Error saving inventory item:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  // Add inventory transaction\n  const addInventoryTransaction = async () => {\n    if (!newTransaction.material_type || !newTransaction.inner_diameter || \n        !newTransaction.outer_diameter || !newTransaction.pieces_change || !newTransaction.reason) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      const transactionData = {\n        ...newTransaction,\n        inner_diameter: parseFloat(newTransaction.inner_diameter),\n        outer_diameter: parseFloat(newTransaction.outer_diameter),\n        pieces_change: newTransaction.transaction_type === 'out' \n          ? -Math.abs(parseInt(newTransaction.pieces_change))\n          : Math.abs(parseInt(newTransaction.pieces_change))\n      };\n\n      await axios.post(`${API}/inventory-transactions`, transactionData);\n      \n      fetchInventoryItems();\n      fetchInventoryTransactions();\n      fetchLowStockItems();\n      setNewTransaction({\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        transaction_type: 'in',\n        pieces_change: '',\n        reason: '',\n        notes: ''\n      });\n      alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ù…Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error adding inventory transaction:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ù…Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ø¬Ø±Ø¯: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  // Filter and sort items based on search\n  const filteredItems = inventoryItems.filter(item =>\n    item.material_type.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    item.inner_diameter.toString().includes(searchTerm.toLowerCase()) ||\n    item.outer_diameter.toString().includes(searchTerm.toLowerCase()) ||\n    item.notes?.toLowerCase().includes(searchTerm.toLowerCase())\n  ).sort((a, b) => {\n    // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\n    const materialPriority = { 'BUR': 1, 'NBR': 2, 'BT': 3, 'BOOM': 4, 'VT': 5 };\n    const aPriority = materialPriority[a.material_type] || 6;\n    const bPriority = materialPriority[b.material_type] || 6;\n    \n    if (aPriority !== bPriority) {\n      return aPriority - bPriority;\n    }\n    // Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)\n    if (a.inner_diameter !== b.inner_diameter) {\n      return a.inner_diameter - b.inner_diameter;\n    }\n    return a.outer_diameter - b.outer_diameter;\n  });\n\n  const filteredTransactions = inventoryTransactions.filter(transaction =>\n    transaction.reason.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    transaction.material_type.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    transaction.notes?.toLowerCase().includes(searchTerm.toLowerCase())\n  ).sort((a, b) => {\n    // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\n    const materialPriority = { 'BUR': 1, 'NBR': 2, 'BT': 3, 'BOOM': 4, 'VT': 5 };\n    const aPriority = materialPriority[a.material_type] || 6;\n    const bPriority = materialPriority[b.material_type] || 6;\n    \n    if (aPriority !== bPriority) {\n      return aPriority - bPriority;\n    }\n    // Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ) Ø«Ù… Ø§Ù„ØªØ§Ø±ÙŠØ®\n    if (a.inner_diameter !== b.inner_diameter) {\n      return a.inner_diameter - b.inner_diameter;\n    }\n    if (a.outer_diameter !== b.outer_diameter) {\n      return a.outer_diameter - b.outer_diameter;\n    }\n    return new Date(b.date) - new Date(a.date); // Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹\n  });\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-3xl font-bold\">Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø®Ø§Ù…Ø§Øª</h1>\n        <div className=\"flex space-x-4 space-x-reverse\">\n          <button\n            onClick={() => setCurrentView('items')}\n            className={`px-4 py-2 rounded ${currentView === 'items' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¬Ø±Ø¯\n          </button>\n          <button\n            onClick={() => setCurrentView('transactions')}\n            className={`px-4 py-2 rounded ${currentView === 'transactions' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ø¬Ø±Ø¯\n          </button>\n          <button\n            onClick={() => setCurrentView('low-stock')}\n            className={`px-4 py-2 rounded ${currentView === 'low-stock' ? 'bg-red-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ù…Ø®Ø²ÙˆÙ† Ù…Ù†Ø®ÙØ¶ ({lowStockItems.length})\n          </button>\n          <button\n            onClick={() => setCurrentView('excel')}\n            className={`px-4 py-2 rounded ${currentView === 'excel' ? 'bg-green-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥ÙƒØ³Ù„\n          </button>\n          <button\n            onClick={() => setCurrentView('add-item')}\n            className={`px-4 py-2 rounded ${currentView === 'add-item' ? 'bg-green-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø¬Ø¯ÙŠØ¯\n          </button>\n        </div>\n      </div>\n\n      {/* Search Bar */}\n      <div className=\"mb-4\">\n        <input\n          type=\"text\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          placeholder=\"Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¬Ø±Ø¯...\"\n          className=\"w-full p-3 border border-gray-300 rounded-lg\"\n        />\n      </div>\n\n      {/* Inventory Items View */}\n      {currentView === 'items' && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¬Ø±Ø¯</h3>\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full border-collapse border border-gray-300\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø§Ø¯Ø©</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</th>\n                  <th className=\"border border-gray-300 p-2\">Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹ Ø§Ù„Ù…ØªØ§Ø­Ø©</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø§Ù„Ø©</th>\n                  <th className=\"border border-gray-300 p-2\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n                </tr>\n              </thead>\n              <tbody>\n                {filteredItems.map(item => (\n                  <tr key={item.id}>\n                    <td className=\"border border-gray-300 p-2 font-semibold\">{item.material_type}</td>\n                    <td className=\"border border-gray-300 p-2\">{item.inner_diameter}</td>\n                    <td className=\"border border-gray-300 p-2\">{item.outer_diameter}</td>\n                    <td className={`border border-gray-300 p-2 font-semibold ${\n                      item.available_pieces <= item.min_stock_level ? 'text-red-600' : 'text-green-600'\n                    }`}>\n                      {item.available_pieces} Ù‚Ø·Ø¹Ø©\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">{item.min_stock_level} Ù‚Ø·Ø¹Ø©</td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <span className={`px-2 py-1 rounded text-sm ${\n                        item.available_pieces <= item.min_stock_level ? 'bg-red-100 text-red-800' : 'bg-green-100 text-green-800'\n                      }`}>\n                        {item.available_pieces <= item.min_stock_level ? 'Ù…Ù†Ø®ÙØ¶' : 'Ø·Ø¨ÙŠØ¹ÙŠ'}\n                      </span>\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">{item.notes || '-'}</td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <div className=\"flex space-x-2 space-x-reverse\">\n                        <button\n                          onClick={() => {\n                            setEditingItem(item);\n                            setNewItem({\n                              material_type: item.material_type,\n                              inner_diameter: item.inner_diameter,\n                              outer_diameter: item.outer_diameter,\n                              available_pieces: item.available_pieces,\n                              min_stock_level: item.min_stock_level,\n                              notes: item.notes || ''\n                            });\n                            setCurrentView('add-item');\n                          }}\n                          className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                        >\n                          ØªØ¹Ø¯ÙŠÙ„\n                        </button>\n                        <button\n                          onClick={async () => {\n                            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ØµØ±ØŸ')) {\n                              try {\n                                await axios.delete(`${API}/inventory/${item.id}`);\n                                alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ù†ØµØ± Ø¨Ù†Ø¬Ø§Ø­');\n                                fetchInventoryItems();\n                              } catch (error) {\n                                console.error('Error deleting item:', error);\n                                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¹Ù†ØµØ±');\n                              }\n                            }\n                          }}\n                          className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                        >\n                          Ø­Ø°Ù\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {/* Transactions View */}\n      {currentView === 'transactions' && (\n        <div>\n          {/* Add Transaction Form */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø§Ù…Ù„Ø© Ø¬Ø±Ø¯</h3>\n            <div className=\"grid grid-cols-3 gap-4\">\n              <select\n                value={newTransaction.material_type}\n                onChange={(e) => setNewTransaction({...newTransaction, material_type: e.target.value})}\n                className=\"p-2 border border-gray-300 rounded\"\n              >\n                {materialTypes.map(type => (\n                  <option key={type} value={type}>{type}</option>\n                ))}\n              </select>\n              <input\n                type=\"number\"\n                value={newTransaction.inner_diameter}\n                onChange={(e) => setNewTransaction({...newTransaction, inner_diameter: e.target.value})}\n                placeholder=\"Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <input\n                type=\"number\"\n                value={newTransaction.outer_diameter}\n                onChange={(e) => setNewTransaction({...newTransaction, outer_diameter: e.target.value})}\n                placeholder=\"Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <select\n                value={newTransaction.transaction_type}\n                onChange={(e) => setNewTransaction({...newTransaction, transaction_type: e.target.value})}\n                className=\"p-2 border border-gray-300 rounded\"\n              >\n                <option value=\"in\">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…Ø®Ø²ÙˆÙ†</option>\n                <option value=\"out\">Ø®ØµÙ… Ù…Ù† Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</option>\n              </select>\n              <input\n                type=\"number\"\n                step=\"1\"\n                value={newTransaction.pieces_change}\n                onChange={(e) => setNewTransaction({...newTransaction, pieces_change: e.target.value})}\n                placeholder=\"Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <input\n                type=\"text\"\n                value={newTransaction.reason}\n                onChange={(e) => setNewTransaction({...newTransaction, reason: e.target.value})}\n                placeholder=\"Ø³Ø¨Ø¨ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            <div className=\"mt-4\">\n              <input\n                type=\"text\"\n                value={newTransaction.notes}\n                onChange={(e) => setNewTransaction({...newTransaction, notes: e.target.value})}\n                placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            <button\n              onClick={addInventoryTransaction}\n              className=\"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n            >\n              ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©\n            </button>\n          </div>\n\n          {/* Transactions List */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø³Ø¬Ù„ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ø¬Ø±Ø¯</h3>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full border-collapse border border-gray-300\">\n                <thead>\n                  <tr className=\"bg-gray-100\">\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                    <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø§Ø¯Ø©</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª</th>\n                    <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©</th>\n                    <th className=\"border border-gray-300 p-2\">Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø³Ø¨Ø¨</th>\n                    <th className=\"border border-gray-300 p-2\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {filteredTransactions.map(transaction => (\n                    <tr key={transaction.id}>\n                      <td className=\"border border-gray-300 p-2\">\n                        {new Date(transaction.date).toLocaleDateString('ar-EG')}\n                      </td>\n                      <td className=\"border border-gray-300 p-2\">{transaction.material_type}</td>\n                      <td className=\"border border-gray-300 p-2\">\n                        {transaction.inner_diameter} Ã— {transaction.outer_diameter}\n                      </td>\n                      <td className=\"border border-gray-300 p-2\">\n                        <span className={`px-2 py-1 rounded text-sm ${\n                          transaction.transaction_type === 'in' \n                            ? 'bg-green-100 text-green-800' \n                            : 'bg-red-100 text-red-800'\n                        }`}>\n                          {transaction.transaction_type === 'in' ? 'Ø¥Ø¶Ø§ÙØ©' : 'Ø®ØµÙ…'}\n                        </span>\n                      </td>\n                      <td className={`border border-gray-300 p-2 font-semibold ${\n                        transaction.pieces_change > 0 ? 'text-green-600' : 'text-red-600'\n                      }`}>\n                        {transaction.pieces_change > 0 ? '+' : ''}{transaction.pieces_change} Ù‚Ø·Ø¹Ø©\n                      </td>\n                      <td className=\"border border-gray-300 p-2 font-semibold\">\n                        {transaction.remaining_pieces} Ù‚Ø·Ø¹Ø©\n                      </td>\n                      <td className=\"border border-gray-300 p-2\">{transaction.reason}</td>\n                      <td className=\"border border-gray-300 p-2\">{transaction.notes || '-'}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Low Stock Items View */}\n      {currentView === 'low-stock' && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4 text-red-600\">\n            Ø¹Ù†Ø§ØµØ± Ø¨Ù…Ø®Ø²ÙˆÙ† Ù…Ù†Ø®ÙØ¶ ({lowStockItems.length})\n          </h3>\n          {lowStockItems.length === 0 ? (\n            <p className=\"text-green-600 text-center py-8\">\n              âœ… Ø¬Ù…ÙŠØ¹ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¬Ø±Ø¯ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ\n            </p>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full border-collapse border border-gray-300\">\n                <thead>\n                  <tr className=\"bg-red-50\">\n                    <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø§Ø¯Ø©</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰</th>\n                    <th className=\"border border-gray-300 p-2\">Ù†Ù‚Øµ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {lowStockItems.map(item => (\n                    <tr key={item.id} className=\"bg-red-50\">\n                      <td className=\"border border-gray-300 p-2 font-semibold\">{item.material_type}</td>\n                      <td className=\"border border-gray-300 p-2\">\n                        {item.inner_diameter} Ã— {item.outer_diameter}\n                      </td>\n                      <td className=\"border border-gray-300 p-2 font-semibold text-red-600\">\n                        {item.available_pieces} Ù‚Ø·Ø¹Ø©\n                      </td>\n                      <td className=\"border border-gray-300 p-2\">{item.min_stock_level} Ù‚Ø·Ø¹Ø©</td>\n                      <td className=\"border border-gray-300 p-2 font-semibold text-red-600\">\n                        {Math.max(0, item.min_stock_level - item.available_pieces)} Ù‚Ø·Ø¹Ø©\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Add/Edit Item View */}\n      {currentView === 'add-item' && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">\n            {editingItem ? 'ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯' : 'Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø¬Ø±Ø¯ Ø¬Ø¯ÙŠØ¯'}\n          </h3>\n          <div className=\"grid grid-cols-2 gap-4\">\n            <select\n              value={newItem.material_type}\n              onChange={(e) => setNewItem({...newItem, material_type: e.target.value})}\n              className=\"p-2 border border-gray-300 rounded\"\n            >\n              {materialTypes.map(type => (\n                <option key={type} value={type}>{type}</option>\n              ))}\n            </select>\n            <input\n              type=\"number\"\n              value={newItem.inner_diameter}\n              onChange={(e) => setNewItem({...newItem, inner_diameter: e.target.value})}\n              placeholder=\"Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ\"\n              className=\"p-2 border border-gray-300 rounded\"\n            />\n            <input\n              type=\"number\"\n              value={newItem.outer_diameter}\n              onChange={(e) => setNewItem({...newItem, outer_diameter: e.target.value})}\n              placeholder=\"Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ\"\n              className=\"p-2 border border-gray-300 rounded\"\n            />\n            <input\n              type=\"number\"\n              step=\"1\"\n              value={newItem.available_pieces}\n              onChange={(e) => setNewItem({...newItem, available_pieces: e.target.value})}\n              placeholder=\"Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹ Ø§Ù„Ù…ØªØ§Ø­Ø©\"\n              className=\"p-2 border border-gray-300 rounded\"\n            />\n            <input\n              type=\"number\"\n              value={newItem.min_stock_level}\n              onChange={(e) => setNewItem({...newItem, min_stock_level: e.target.value})}\n              placeholder=\"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ù…Ø®Ø²ÙˆÙ†\"\n              className=\"p-2 border border-gray-300 rounded\"\n            />\n            <input\n              type=\"text\"\n              value={newItem.notes}\n              onChange={(e) => setNewItem({...newItem, notes: e.target.value})}\n              placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n              className=\"p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          <button\n            onClick={addInventoryItem}\n            className=\"mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n          >\n            {editingItem ? 'ØªØ­Ø¯ÙŠØ« Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯' : 'Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯'}\n          </button>\n          {editingItem && (\n            <button\n              onClick={() => {\n                setEditingItem(null);\n                setNewItem({\n                  material_type: 'NBR',\n                  inner_diameter: '',\n                  outer_diameter: '',\n                  available_pieces: '',\n                  min_stock_level: 2,\n                  notes: ''\n                });\n                setCurrentView('items');\n              }}\n              className=\"mt-4 mr-2 bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n            >\n              Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„\n            </button>\n          )}\n        </div>\n      )}\n\n      {/* Excel Management View */}\n      {currentView === 'excel' && (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          {/* Inventory Excel Management */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¯Ø§Ø±Ø© Ù…Ù„ÙØ§Øª Ø§Ù„Ø¬Ø±Ø¯ - Excel</h3>\n            \n            {/* Export Inventory */}\n            <div className=\"mb-6\">\n              <h4 className=\"font-medium mb-2\">ØªØµØ¯ÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø±Ø¯</h4>\n              <button\n                onClick={async () => {\n                  try {\n                    const response = await axios.get(`${API}/excel/export/inventory`, {\n                      responseType: 'blob'\n                    });\n                    const url = window.URL.createObjectURL(new Blob([response.data]));\n                    const link = document.createElement('a');\n                    link.href = url;\n                    link.setAttribute('download', `inventory_export_${new Date().toISOString().split('T')[0]}.xlsx`);\n                    document.body.appendChild(link);\n                    link.click();\n                    link.remove();\n                    alert('ØªÙ… ØªØµØ¯ÙŠØ± Ù…Ù„Ù Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n                  } catch (error) {\n                    console.error('Error exporting inventory:', error);\n                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù');\n                  }\n                }}\n                className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n              >\n                ØªØµØ¯ÙŠØ± Ø¬Ø±Ø¯ Excel\n              </button>\n            </div>\n\n            {/* Import Inventory */}\n            <div>\n              <h4 className=\"font-medium mb-2\">Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø±Ø¯</h4>\n              <input\n                type=\"file\"\n                accept=\".xlsx,.xls\"\n                onChange={async (e) => {\n                  const file = e.target.files[0];\n                  if (!file) return;\n                  \n                  const formData = new FormData();\n                  formData.append('file', file);\n                  \n                  try {\n                    const response = await axios.post(`${API}/excel/import/inventory`, formData, {\n                      headers: { 'Content-Type': 'multipart/form-data' }\n                    });\n                    alert(`ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ ${response.data.imported_count} Ø¹Ù†ØµØ± Ø¨Ù†Ø¬Ø§Ø­`);\n                    if (response.data.errors.length > 0) {\n                      console.warn('Import errors:', response.data.errors);\n                    }\n                    fetchInventoryItems();\n                  } catch (error) {\n                    console.error('Error importing inventory:', error);\n                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù');\n                  }\n                  \n                  e.target.value = '';\n                }}\n                className=\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100\"\n              />\n              <p className=\"text-sm text-gray-600 mt-2\">\n                Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©: material_type, inner_diameter, outer_diameter, available_pieces\n              </p>\n            </div>\n          </div>\n\n          {/* Raw Materials Excel Management */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù… - Excel</h3>\n            \n            {/* Export Raw Materials */}\n            <div className=\"mb-6\">\n              <h4 className=\"font-medium mb-2\">ØªØµØ¯ÙŠØ± Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…</h4>\n              <button\n                onClick={async () => {\n                  try {\n                    const response = await axios.get(`${API}/excel/export/raw-materials`, {\n                      responseType: 'blob'\n                    });\n                    const url = window.URL.createObjectURL(new Blob([response.data]));\n                    const link = document.createElement('a');\n                    link.href = url;\n                    link.setAttribute('download', `raw_materials_export_${new Date().toISOString().split('T')[0]}.xlsx`);\n                    document.body.appendChild(link);\n                    link.click();\n                    link.remove();\n                    alert('ØªÙ… ØªØµØ¯ÙŠØ± Ù…Ù„Ù Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­');\n                  } catch (error) {\n                    console.error('Error exporting raw materials:', error);\n                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù');\n                  }\n                }}\n                className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n              >\n                ØªØµØ¯ÙŠØ± Ù…ÙˆØ§Ø¯ Ø®Ø§Ù… Excel\n              </button>\n            </div>\n\n            {/* Import Raw Materials */}\n            <div>\n              <h4 className=\"font-medium mb-2\">Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…</h4>\n              <input\n                type=\"file\"\n                accept=\".xlsx,.xls\"\n                onChange={async (e) => {\n                  const file = e.target.files[0];\n                  if (!file) return;\n                  \n                  const formData = new FormData();\n                  formData.append('file', file);\n                  \n                  try {\n                    const response = await axios.post(`${API}/excel/import/raw-materials`, formData, {\n                      headers: { 'Content-Type': 'multipart/form-data' }\n                    });\n                    alert(`ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ ${response.data.imported_count} Ù…Ø§Ø¯Ø© Ø®Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­`);\n                    if (response.data.errors.length > 0) {\n                      console.warn('Import errors:', response.data.errors);\n                    }\n                  } catch (error) {\n                    console.error('Error importing raw materials:', error);\n                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù');\n                  }\n                  \n                  e.target.value = '';\n                }}\n                className=\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100\"\n              />\n              <p className=\"text-sm text-gray-600 mt-2\">\n                Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©: material_type, inner_diameter, outer_diameter, height, pieces_count, unit_code, cost_per_mm\n              </p>\n            </div>\n          </div>\n\n          {/* Instructions */}\n          <div className=\"bg-yellow-50 p-6 rounded-lg shadow-md md:col-span-2\">\n            <h3 className=\"text-lg font-semibold mb-4\">ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¥ÙƒØ³Ù„</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <h4 className=\"font-medium mb-2\">ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:</h4>\n                <ul className=\"text-sm text-gray-700 list-disc list-inside space-y-1\">\n                  <li>ÙŠØªÙ… ØªØµØ¯ÙŠØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</li>\n                  <li>Ø§Ù„Ù…Ù„Ù ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ØªÙ†Ø³ÙŠÙ‚ Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ¹Ø¯ÙŠÙ„</li>\n                  <li>ÙŠÙ…ÙƒÙ† ÙØªØ­ Ø§Ù„Ù…Ù„Ù ÙÙŠ Excel Ø£Ùˆ Google Sheets</li>\n                </ul>\n              </div>\n              <div>\n                <h4 className=\"font-medium mb-2\">Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:</h4>\n                <ul className=\"text-sm text-gray-700 list-disc list-inside space-y-1\">\n                  <li>ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ù…Ù„Ù Ù…Ù† Ù†ÙˆØ¹ .xlsx Ø£Ùˆ .xls</li>\n                  <li>Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù…ÙˆØ¬ÙˆØ¯Ø©</li>\n                  <li>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© Ù„Ù† ØªØªØ£Ø«Ø± (ÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø£Ùˆ Ø§Ù„Ø¥Ø¶Ø§ÙØ©)</li>\n                  <li>Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯ Ù…Ø¹ Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø³ØªÙˆØ±Ø¯Ø©</li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Local Products Management Component\nconst Local = () => {\n  const {user} = useAuth();\n  const [suppliers, setSuppliers] = useState([]);\n  const [localProducts, setLocalProducts] = useState([]);\n  const [supplierTransactions, setSupplierTransactions] = useState([]);\n  const [currentView, setCurrentView] = useState('suppliers'); // suppliers, products, transactions\n  const [newSupplier, setNewSupplier] = useState({ name: '', phone: '', address: '' });\n  const [newProduct, setNewProduct] = useState({ name: '', supplier_id: '', purchase_price: '', selling_price: '', current_stock: 0 });\n  const [newTransaction, setNewTransaction] = useState({ supplier_id: '', transaction_type: 'purchase', amount: '', description: '', product_name: '', quantity: '', unit_price: '', payment_method: 'cash' });\n  const [selectedSupplier, setSelectedSupplier] = useState('');\n  const [paymentAmount, setPaymentAmount] = useState('');\n  const [paymentMethod, setPaymentMethod] = useState('cash');\n\n  // Fetch data functions\n  const fetchSuppliers = async () => {\n    try {\n      const response = await axios.get(`${API}/suppliers`);\n      setSuppliers(response.data || []);\n    } catch (error) {\n      console.error('Error fetching suppliers:', error);\n    }\n  };\n\n  const fetchLocalProducts = async () => {\n    try {\n      const response = await axios.get(`${API}/local-products`);\n      setLocalProducts(response.data || []);\n    } catch (error) {\n      console.error('Error fetching local products:', error);\n    }\n  };\n\n  const fetchSupplierTransactions = async () => {\n    try {\n      const response = await axios.get(`${API}/supplier-transactions`);\n      setSupplierTransactions(response.data || []);\n    } catch (error) {\n      console.error('Error fetching supplier transactions:', error);\n    }\n  };\n\n  // Delete supplier transaction - Master only\n  const deleteSupplierTransaction = async (transactionId) => {\n    if (user?.username !== 'master') {\n      alert('ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„Ø§Øª');\n      return;\n    }\n\n    // Ask user about deletion type\n    const choice = confirm(\n      'ğŸ—‘ï¸ Ø­Ø°Ù Ù…Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ù…ÙˆØ±Ø¯\\n\\n' +\n      'Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø­Ø°Ù:\\n\\n' +\n      'âœ… Ø§Ø¶ØºØ· \"Ù…ÙˆØ§ÙÙ‚\" â†’ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© ÙˆØ¹ÙƒØ³ ØªØ£Ø«ÙŠØ±Ù‡Ø§ (Ø¹ÙƒØ³ÙŠ)\\n' +\n      'âŒ Ø§Ø¶ØºØ· \"Ø¥Ù„ØºØ§Ø¡\" Ø«Ù… \"Ù…ÙˆØ§ÙÙ‚\" â†’ Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„ ÙÙ‚Ø· ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±ØµÙŠØ¯\\n\\n' +\n      'Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ø£ÙˆÙ„ (Ø¹ÙƒØ³ÙŠ) ÙŠÙ†ØµØ­ Ø¨Ù‡ Ù„Ø¶Ù…Ø§Ù† Ø¯Ù‚Ø© Ø§Ù„Ø£Ø±ØµØ¯Ø©'\n    );\n\n    if (choice === null) return; // User pressed Escape\n\n    const reverseTransaction = choice;\n\n    // Final confirmation\n    const confirmMsg = reverseTransaction\n      ? 'ØªØ£ÙƒÙŠØ¯: Ø³ÙŠØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© ÙˆØ¹ÙƒØ³ ØªØ£Ø«ÙŠØ±Ù‡Ø§ Ø¹Ù„Ù‰ Ø±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ±Ø¯\\n\\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ'\n      : 'ØªØ£ÙƒÙŠØ¯: Ø³ÙŠØªÙ… Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„ ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø­Ø³Ø§Ø¨ Ø±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ±Ø¯ Ù…Ù† Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª\\n\\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ';\n\n    if (!confirm(confirmMsg)) return;\n\n    try {\n      await axios.delete(`${API}/suppliers/transactions/${transactionId}`, {\n        params: { \n          username: user.username,\n          reverse_transaction: reverseTransaction\n        }\n      });\n      \n      alert('âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­');\n      fetchSupplierTransactions();\n      fetchSuppliers(); // Refresh to update balances\n    } catch (error) {\n      console.error('Error deleting supplier transaction:', error);\n      alert(error.response?.data?.detail || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©');\n    }\n  };\n\n  useEffect(() => {\n    fetchSuppliers();\n    fetchLocalProducts();\n    fetchSupplierTransactions();\n  }, []);\n\n  // Add supplier\n  const addSupplier = async () => {\n    if (!newSupplier.name.trim()) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯');\n      return;\n    }\n\n    try {\n      if (newSupplier.id) {\n        // Update existing supplier\n        await axios.put(`${API}/suppliers/${newSupplier.id}`, {\n          name: newSupplier.name,\n          phone: newSupplier.phone,\n          address: newSupplier.address\n        });\n        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n      } else {\n        // Add new supplier\n        await axios.post(`${API}/suppliers`, newSupplier);\n        alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n      }\n      \n      fetchSuppliers();\n      setNewSupplier({ name: '', phone: '', address: '' });\n    } catch (error) {\n      console.error('Error saving supplier:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…ÙˆØ±Ø¯: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const editSupplier = (supplier) => {\n    // Fill the form with supplier data for editing\n    setNewSupplier({\n      id: supplier.id,\n      name: supplier.name,\n      phone: supplier.phone || '',\n      address: supplier.address || ''\n    });\n  };\n\n  const deleteSupplier = async (supplierId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ±Ø¯ØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡.')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/suppliers/${supplierId}`);\n      fetchSuppliers();\n      fetchLocalProducts(); // Refresh products as they might be affected\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting supplier:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ±Ø¯: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  // Add local product\n  const addLocalProduct = async () => {\n    if (!newProduct.name.trim() || !newProduct.supplier_id || !newProduct.purchase_price || !newProduct.selling_price) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      if (newProduct.id) {\n        // Update existing product\n        await axios.put(`${API}/local-products/${newProduct.id}`, {\n          name: newProduct.name,\n          supplier_id: newProduct.supplier_id,\n          purchase_price: parseFloat(newProduct.purchase_price),\n          selling_price: parseFloat(newProduct.selling_price),\n          current_stock: parseInt(newProduct.current_stock || 0)\n        });\n        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­');\n      } else {\n        // Add new product\n        await axios.post(`${API}/local-products`, {\n          ...newProduct,\n          purchase_price: parseFloat(newProduct.purchase_price),\n          selling_price: parseFloat(newProduct.selling_price),\n          current_stock: parseInt(newProduct.current_stock || 0)\n        });\n        alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­');\n      }\n      \n      fetchLocalProducts();\n      setNewProduct({ name: '', supplier_id: '', purchase_price: '', selling_price: '', current_stock: 0 });\n    } catch (error) {\n      console.error('Error saving local product:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const editLocalProduct = (product) => {\n    // Fill the form with product data for editing\n    setNewProduct({\n      id: product.id,\n      name: product.name,\n      supplier_id: product.supplier_id,\n      purchase_price: product.purchase_price.toString(),\n      selling_price: product.selling_price.toString(),\n      current_stock: product.current_stock || 0\n    });\n  };\n\n  const deleteLocalProduct = async (productId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡.')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/local-products/${productId}`);\n      fetchLocalProducts();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting local product:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  // Pay supplier\n  const paySupplier = async () => {\n    if (!selectedSupplier || !paymentAmount) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙˆØ±Ø¯ ÙˆØ¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº');\n      return;\n    }\n\n    try {\n      await axios.post(`${API}/supplier-payment?supplier_id=${selectedSupplier}&amount=${paymentAmount}&payment_method=${paymentMethod}`);\n      fetchSuppliers();\n      fetchSupplierTransactions();\n      setSelectedSupplier('');\n      setPaymentAmount('');\n      alert('ØªÙ… Ø¯ÙØ¹ Ø§Ù„Ù…Ø¨Ù„Øº Ù„Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error paying supplier:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¯ÙØ¹ Ø§Ù„Ù…Ø¨Ù„Øº');\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-3xl font-bold\">Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</h1>\n        <div className=\"flex space-x-4 space-x-reverse\">\n          <button\n            onClick={() => setCurrentView('suppliers')}\n            className={`px-4 py-2 rounded ${currentView === 'suppliers' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†\n          </button>\n          <button\n            onClick={() => setCurrentView('products')}\n            className={`px-4 py-2 rounded ${currentView === 'products' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª\n          </button>\n          <button\n            onClick={() => setCurrentView('transactions')}\n            className={`px-4 py-2 rounded ${currentView === 'transactions' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª\n          </button>\n          <button\n            onClick={() => setCurrentView('payments')}\n            className={`px-4 py-2 rounded ${currentView === 'payments' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø³Ø¯Ø§Ø¯ Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†\n          </button>\n        </div>\n      </div>\n\n      {/* Suppliers View */}\n      {currentView === 'suppliers' && (\n        <div>\n          {/* Add New Supplier */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ±Ø¯ Ø¬Ø¯ÙŠØ¯</h3>\n            <div className=\"grid grid-cols-3 gap-4\">\n              <input\n                type=\"text\"\n                value={newSupplier.name}\n                onChange={(e) => setNewSupplier({...newSupplier, name: e.target.value})}\n                placeholder=\"Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <input\n                type=\"text\"\n                value={newSupplier.phone}\n                onChange={(e) => setNewSupplier({...newSupplier, phone: e.target.value})}\n                placeholder=\"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <input\n                type=\"text\"\n                value={newSupplier.address}\n                onChange={(e) => setNewSupplier({...newSupplier, address: e.target.value})}\n                placeholder=\"Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            <button\n              onClick={addSupplier}\n              className=\"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n            >\n              Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ±Ø¯\n            </button>\n          </div>\n\n          {/* Suppliers List */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</h3>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full border-collapse border border-gray-300\">\n                <thead>\n                  <tr className=\"bg-gray-100\">\n                    <th className=\"border border-gray-300 p-2\">Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‡Ø§ØªÙ</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>\n                    <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</th>\n                    <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯ÙÙˆØ¹</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ­Ù‚</th>\n                    <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {suppliers.map(supplier => (\n                    <tr key={supplier.id}>\n                      <td className=\"border border-gray-300 p-2 font-semibold\">{supplier.name}</td>\n                      <td className=\"border border-gray-300 p-2\">{supplier.phone || '-'}</td>\n                      <td className=\"border border-gray-300 p-2\">{supplier.address || '-'}</td>\n                      <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {(supplier.total_purchases || 0).toFixed(2)}</td>\n                      <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {(supplier.total_paid || 0).toFixed(2)}</td>\n                      <td className={`border border-gray-300 p-2 font-semibold ${(supplier.balance || 0) > 0 ? 'text-red-600' : 'text-green-600'}`}>\n                        Ø¬.Ù… {(supplier.balance || 0).toFixed(2)}\n                      </td>\n                      <td className=\"border border-gray-300 p-2\">\n                        <div className=\"flex space-x-2 space-x-reverse\">\n                          <button\n                            onClick={() => editSupplier(supplier)}\n                            className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                            title=\"ØªØ­Ø±ÙŠØ±\"\n                          >\n                            âœï¸\n                          </button>\n                          <button\n                            onClick={() => deleteSupplier(supplier.id)}\n                            className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                            title=\"Ø­Ø°Ù\"\n                          >\n                            ğŸ—‘ï¸\n                          </button>\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Products View */}\n      {currentView === 'products' && (\n        <div>\n          {/* Add New Product */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ù…Ø­Ù„ÙŠ Ø¬Ø¯ÙŠØ¯</h3>\n            <div className=\"grid grid-cols-2 gap-4\">\n              <input\n                type=\"text\"\n                value={newProduct.name}\n                onChange={(e) => setNewProduct({...newProduct, name: e.target.value})}\n                placeholder=\"Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <select\n                value={newProduct.supplier_id}\n                onChange={(e) => setNewProduct({...newProduct, supplier_id: e.target.value})}\n                className=\"p-2 border border-gray-300 rounded\"\n              >\n                <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ±Ø¯</option>\n                {suppliers.map(supplier => (\n                  <option key={supplier.id} value={supplier.id}>{supplier.name}</option>\n                ))}\n              </select>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                value={newProduct.purchase_price}\n                onChange={(e) => setNewProduct({...newProduct, purchase_price: e.target.value})}\n                placeholder=\"Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                value={newProduct.selling_price}\n                onChange={(e) => setNewProduct({...newProduct, selling_price: e.target.value})}\n                placeholder=\"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            <button\n              onClick={addLocalProduct}\n              className=\"mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n            >\n              Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬\n            </button>\n          </div>\n\n          {/* Products List */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©</h3>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full border-collapse border border-gray-300\">\n                <thead>\n                  <tr className=\"bg-gray-100\">\n                    <th className=\"border border-gray-300 p-2\">Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…ÙˆØ±Ø¯</th>\n                    <th className=\"border border-gray-300 p-2\">Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡</th>\n                    <th className=\"border border-gray-300 p-2\">Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ</th>\n                    <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ø§Ø¹</th>\n                    <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {localProducts.map(product => (\n                    <tr key={product.id}>\n                      <td className=\"border border-gray-300 p-2 font-semibold\">{product.name}</td>\n                      <td className=\"border border-gray-300 p-2\">{product.supplier_name}</td>\n                      <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {product.purchase_price.toFixed(2)}</td>\n                      <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {product.selling_price.toFixed(2)}</td>\n                      <td className=\"border border-gray-300 p-2\">{product.current_stock || 0}</td>\n                      <td className=\"border border-gray-300 p-2\">{product.total_sold || 0}</td>\n                      <td className=\"border border-gray-300 p-2\">\n                        <div className=\"flex space-x-2 space-x-reverse\">\n                          <button\n                            onClick={() => editLocalProduct(product)}\n                            className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                            title=\"ØªØ­Ø±ÙŠØ±\"\n                          >\n                            âœï¸\n                          </button>\n                          <button\n                            onClick={() => deleteLocalProduct(product.id)}\n                            className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                            title=\"Ø­Ø°Ù\"\n                          >\n                            ğŸ—‘ï¸\n                          </button>\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Transactions View */}\n      {currentView === 'transactions' && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</h3>\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full border-collapse border border-gray-300\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…ÙˆØ±Ø¯</th>\n                  <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø¨Ù„Øº</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙˆØµÙ</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ù†ØªØ¬</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙƒÙ…ÙŠØ©</th>\n                  {user?.username === 'master' && (\n                    <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n                  )}\n                </tr>\n              </thead>\n              <tbody>\n                {supplierTransactions.map(transaction => (\n                  <tr key={transaction.id}>\n                    <td className=\"border border-gray-300 p-2\">\n                      {new Date(transaction.date).toLocaleDateString('ar-EG')}\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">{transaction.supplier_name}</td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <span className={`px-2 py-1 rounded text-sm ${\n                        transaction.transaction_type === 'purchase' \n                          ? 'bg-red-100 text-red-800' \n                          : 'bg-green-100 text-green-800'\n                      }`}>\n                        {transaction.transaction_type === 'purchase' ? 'Ø´Ø±Ø§Ø¡' : 'Ø¯ÙØ¹'}\n                      </span>\n                    </td>\n                    <td className={`border border-gray-300 p-2 font-semibold ${\n                      transaction.transaction_type === 'purchase' ? 'text-red-600' : 'text-green-600'\n                    }`}>\n                      Ø¬.Ù… {transaction.amount.toFixed(2)}\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">{transaction.description}</td>\n                    <td className=\"border border-gray-300 p-2\">{transaction.product_name || '-'}</td>\n                    <td className=\"border border-gray-300 p-2\">{transaction.quantity || '-'}</td>\n                    {user?.username === 'master' && (\n                      <td className=\"border border-gray-300 p-2 text-center\">\n                        <button\n                          onClick={() => deleteSupplierTransaction(transaction.id)}\n                          className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                          title=\"Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©\"\n                        >\n                          ğŸ—‘ï¸\n                        </button>\n                      </td>\n                    )}\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {/* Payments View */}\n      {currentView === 'payments' && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ø³Ø¯Ø§Ø¯ Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</h3>\n          <div className=\"grid grid-cols-3 gap-4 mb-6\">\n            <select\n              value={selectedSupplier}\n              onChange={(e) => setSelectedSupplier(e.target.value)}\n              className=\"p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ±Ø¯</option>\n              {suppliers.filter(s => (s.balance || 0) > 0).map(supplier => (\n                <option key={supplier.id} value={supplier.id}>\n                  {supplier.name} - Ù…Ø³ØªØ­Ù‚: Ø¬.Ù… {(supplier.balance || 0).toFixed(2)}\n                </option>\n              ))}\n            </select>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={paymentAmount}\n              onChange={(e) => setPaymentAmount(e.target.value)}\n              placeholder=\"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹\"\n              className=\"p-2 border border-gray-300 rounded\"\n            />\n            <select\n              value={paymentMethod}\n              onChange={(e) => setPaymentMethod(e.target.value)}\n              className=\"p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"cash\">Ù†Ù‚Ø¯ÙŠ</option>\n              <option value=\"vodafone_elsawy\">ÙÙˆØ¯Ø§ÙÙˆÙ† 010</option>\n              <option value=\"vodafone_wael\">ÙƒØ§Ø´ 0100</option>\n              <option value=\"instapay\">Ø§Ù†Ø³ØªØ§ Ø¨Ø§ÙŠ</option>\n            </select>\n          </div>\n          <button\n            onClick={paySupplier}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n          >\n            Ø¯ÙØ¹ Ø§Ù„Ù…Ø¨Ù„Øº\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Dashboard Component\nconst Dashboard = () => {\n  const { user } = useAuth();\n  \n  // Only Elsawy can access dashboard\n  if (user?.username !== 'Elsawy') {\n    return (\n      <div className=\"p-6\" dir=\"rtl\">\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\n          <strong>ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­!</strong> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ù…Ø®ØµØµØ© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Elsawy ÙÙ‚Ø·.\n        </div>\n      </div>\n    );\n  }\n\n  const [stats, setStats] = useState({\n    total_sales: 0,\n    total_expenses: 0,\n    net_profit: 0,\n    total_unpaid: 0,\n    invoice_count: 0,\n    customer_count: 0\n  });\n\n  useEffect(() => {\n    fetchStats();\n  }, []);\n\n  const fetchStats = async () => {\n    try {\n      const response = await axios.get(`${API}/dashboard/stats`);\n      setStats(response.data);\n    } catch (error) {\n      console.error('Error fetching stats:', error);\n    }\n  };\n\n  const clearAllData = async () => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) return;\n    \n    try {\n      // Clear all data from backend\n      await axios.delete(`${API}/customers/clear-all`);\n      await axios.delete(`${API}/raw-materials/clear-all`);\n      await axios.delete(`${API}/finished-products/clear-all`);\n      await axios.delete(`${API}/invoices/clear-all`);\n      await axios.delete(`${API}/expenses/clear-all`);\n      await axios.delete(`${API}/payments/clear-all`);\n      await axios.delete(`${API}/work-orders/clear-all`);\n      \n      // Refresh dashboard stats\n      fetchStats();\n      \n      alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');\n    } catch (error) {\n      console.error('Error clearing all data:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');\n    }\n  };\n\n  const printReport = (reportType) => {\n    const currentDate = new Date().toLocaleDateString('ar-EG');\n    let printContent = `\n      <div style=\"font-family: Arial, sans-serif; direction: rtl; text-align: right;\">\n        <div style=\"text-align: center; margin-bottom: 20px;\">\n          <h1>Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„</h1>\n          <p>Ø§Ù„Ø­Ø±ÙÙŠØ§Ù† Ø´Ø§Ø±Ø¹ Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª - 01020630677</p>\n          <h2>ØªÙ‚Ø±ÙŠØ± Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>\n          <p>Ø§Ù„ØªØ§Ø±ÙŠØ®: ${currentDate}</p>\n        </div>\n        <table style=\"width: 100%; border-collapse: collapse;\">\n          <tr>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\"><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª:</strong></td>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\">Ø¬.Ù… ${stats.total_sales.toFixed(2)}</td>\n          </tr>\n          <tr>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\"><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª:</strong></td>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\">Ø¬.Ù… ${stats.total_expenses.toFixed(2)}</td>\n          </tr>\n          <tr>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\"><strong>ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­:</strong></td>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\">Ø¬.Ù… ${stats.net_profit.toFixed(2)}</td>\n          </tr>\n          <tr>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\"><strong>Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø©:</strong></td>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\">Ø¬.Ù… ${stats.total_unpaid.toFixed(2)}</td>\n          </tr>\n          <tr>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\"><strong>Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ±:</strong></td>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\">${stats.invoice_count}</td>\n          </tr>\n          <tr>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\"><strong>Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡:</strong></td>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\">${stats.customer_count}</td>\n          </tr>\n        </table>\n      </div>\n    `;\n    \n    const printWindow = window.open('', '_blank');\n    printWindow.document.write(printContent);\n    printWindow.document.close();\n    printWindow.print();\n  };\n\n  return (\n    <div className=\"space-y-6\" dir=\"rtl\">\n      {/* Header Section */}\n      <div className=\"bg-gradient-to-r from-blue-600 to-blue-800 rounded-xl p-6 text-white shadow-lg\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-3xl font-bold mb-2\">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>\n            <p className=\"text-blue-100\">Ù…Ø±Ø­Ø¨Ø§Ù‹ {user?.username} - Ø¥Ù„ÙŠÙƒ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù†Ø´Ø§Ø·</p>\n          </div>\n          <div className=\"text-6xl opacity-20\">ğŸ“Š</div>\n        </div>\n        \n        <div className=\"flex flex-wrap space-x-4 space-x-reverse mt-6\">\n          <button \n            onClick={clearAllData}\n            className=\"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105\">\n            ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n          </button>\n          <button \n            onClick={fetchStats}\n            className=\"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105\">\n            ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => printReport('dashboard')}\n            className=\"bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105\">\n            ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n          <select className=\"bg-white text-gray-700 border-0 rounded-lg px-4 py-3 shadow-lg focus:ring-2 focus:ring-blue-300 font-medium\">\n            <option>ğŸ“… ÙŠÙˆÙ…ÙŠ</option>\n            <option>ğŸ“† Ø£Ø³Ø¨ÙˆØ¹ÙŠ</option>\n            <option>ğŸ“Š Ø´Ù‡Ø±ÙŠ</option>\n            <option>ğŸ“ˆ Ø³Ù†ÙˆÙŠ</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {/* Total Sales */}\n        <div className=\"bg-gradient-to-br from-green-400 to-green-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold opacity-90\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</h3>\n              <p className=\"text-3xl font-bold mt-2\">\n                Ø¬.Ù… {stats.total_sales.toFixed(2)}\n              </p>\n            </div>\n            <div className=\"text-5xl opacity-30\">ğŸ’°</div>\n          </div>\n        </div>\n        \n        {/* Total Expenses */}\n        <div className=\"bg-gradient-to-br from-red-400 to-red-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold opacity-90\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>\n              <p className=\"text-3xl font-bold mt-2\">\n                Ø¬.Ù… {stats.total_expenses.toFixed(2)}\n              </p>\n            </div>\n            <div className=\"text-5xl opacity-30\">ğŸ’¸</div>\n          </div>\n        </div>\n        \n        {/* Net Profit */}\n        <div className=\"bg-gradient-to-br from-blue-400 to-blue-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold opacity-90\">ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­</h3>\n              <p className=\"text-3xl font-bold mt-2\">\n                Ø¬.Ù… {stats.net_profit.toFixed(2)}\n              </p>\n            </div>\n            <div className=\"text-5xl opacity-30\">ğŸ“ˆ</div>\n          </div>\n        </div>\n        \n        {/* Unpaid Amount */}\n        <div className=\"bg-gradient-to-br from-orange-400 to-orange-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold opacity-90\">Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø©</h3>\n              <p className=\"text-3xl font-bold mt-2\">\n                Ø¬.Ù… {stats.total_unpaid.toFixed(2)}\n              </p>\n            </div>\n            <div className=\"text-5xl opacity-30\">â³</div>\n          </div>\n        </div>\n        \n        {/* Invoice Count */}\n        <div className=\"bg-gradient-to-br from-purple-400 to-purple-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold opacity-90\">Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ±</h3>\n              <p className=\"text-3xl font-bold mt-2\">\n                {stats.invoice_count}\n              </p>\n            </div>\n            <div className=\"text-5xl opacity-30\">ğŸ§¾</div>\n          </div>\n        </div>\n        \n        {/* Customer Count */}\n        <div className=\"bg-gradient-to-br from-teal-400 to-teal-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold opacity-90\">Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h3>\n              <p className=\"text-3xl font-bold mt-2\">\n                {stats.customer_count}\n              </p>\n            </div>\n            <div className=\"text-5xl opacity-30\">ğŸ‘¥</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Sales Component\nconst Sales = () => {\n  const [customers, setCustomers] = useState([]);\n  const [newCustomer, setNewCustomer] = useState('');\n  const [selectedCustomer, setSelectedCustomer] = useState('');\n  const [suppliers, setSuppliers] = useState([]); // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†\n  const [supervisorName, setSupervisorName] = useState(''); // Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØªØµÙ†ÙŠØ¹\n  const [invoiceTitle, setInvoiceTitle] = useState(''); // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n  const [currentItem, setCurrentItem] = useState({\n    seal_type: 'RSL',\n    material_type: 'NBR',\n    inner_diameter: '',\n    outer_diameter: '',\n    height: '',\n    quantity: 1,\n    unit_price: '',\n    product_type: 'manufactured' // manufactured Ø£Ùˆ local\n  });\n  // New state for dual measurement inputs\n  const [measurements, setMeasurements] = useState({\n    inner_diameter_mm: '',\n    inner_diameter_inch: '',\n    outer_diameter_mm: '',\n    outer_diameter_inch: '',\n    height_mm: '',\n    height_inch: '',\n    wall_height_mm: '',\n    wall_height_inch: ''\n  });\n  const [localProduct, setLocalProduct] = useState({\n    product_size: '',      // Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ù†ØªØ¬\n    product_type: '',      // Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬\n    purchase_price: '',\n    selling_price: '',\n    supplier: ''\n  });\n  const [items, setItems] = useState([]);\n  const [paymentMethod, setPaymentMethod] = useState('Ù†Ù‚Ø¯ÙŠ');\n  const [discount, setDiscount] = useState(0); // Ø§Ù„Ø®ØµÙ…\n  const [discountType, setDiscountType] = useState('amount'); // Ù†ÙˆØ¹ Ø§Ù„Ø®ØµÙ…: amount Ø£Ùˆ percentage\n  const [compatibilityResults, setCompatibilityResults] = useState(null);\n  const [selectedMaterial, setSelectedMaterial] = useState(null);\n  const [selectedMaterials, setSelectedMaterials] = useState([]); // Ø®Ø§Ù…Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© Ù…Ø®ØªØ§Ø±Ø©\n  const [measurementUnit, setMeasurementUnit] = useState('Ù…Ù…'); // Ø¨ÙˆØµØ© Ø£Ùˆ Ù…Ù…\n  const [wallHeight, setWallHeight] = useState(''); // Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø© Ù„Ù„Ù€ W types\n  const [clientType, setClientType] = useState(1); // Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù„ØªØ³Ø¹ÙŠØ± (1, 2, 3)\n\n  // Measurement conversion functions\n  const mmToInch = (mm) => {\n    if (!mm || mm === '') return '';\n    return (parseFloat(mm) / 25.4).toFixed(4);\n  };\n\n  const inchToMm = (inch) => {\n    if (!inch || inch === '') return '';\n    return (parseFloat(inch) * 25.4).toFixed(2);\n  };\n\n  // Handle measurement input changes with auto-conversion\n  const handleMeasurementChange = (field, value, unit) => {\n    const newMeasurements = { ...measurements };\n    \n    if (unit === 'mm') {\n      newMeasurements[`${field}_mm`] = value;\n      newMeasurements[`${field}_inch`] = mmToInch(value);\n    } else {\n      newMeasurements[`${field}_inch`] = value;\n      newMeasurements[`${field}_mm`] = inchToMm(value);\n    }\n    \n    setMeasurements(newMeasurements);\n    \n    // Update currentItem with mm values (for backend compatibility)\n    const mmValue = parseFloat(newMeasurements[`${field}_mm`]) || '';\n    setCurrentItem({\n      ...currentItem,\n      [field]: mmValue\n    });\n  };\n\n  const sealTypes = ['RSL', 'RS', 'RSS', 'RSE', 'B17', 'B3', 'B14', 'B1', 'R15', 'R17', 'W1', 'W4', 'W5', 'W11', 'WBT', 'XR', 'CH', 'VR'];\n  const materialTypes = ['NBR', 'BUR', 'BT', 'VT', 'BOOM'];\n\n  useEffect(() => {\n    fetchCustomers();\n    fetchSuppliers();\n  }, []);\n\n  const fetchCustomers = async () => {\n    try {\n      const response = await axios.get(`${API}/customers`);\n      // Sort customers alphabetically by name\n      const sortedCustomers = (response.data || []).sort((a, b) => \n        a.name.localeCompare(b.name, 'ar')\n      );\n      setCustomers(sortedCustomers);\n    } catch (error) {\n      console.error('Error fetching customers:', error);\n    }\n  };\n\n  const fetchSuppliers = async () => {\n    try {\n      const response = await axios.get(`${API}/suppliers`);\n      setSuppliers(response.data || []);\n    } catch (error) {\n      console.error('Error fetching suppliers:', error);\n    }\n  };\n\n  // Calculate automatic pricing based on material and client type\n  const calculateAutomaticPrice = async (material, height, clientType) => {\n    try {\n      const response = await axios.post(`${API}/calculate-price`, null, {\n        params: {\n          material_type: material.material_type,\n          inner_diameter: material.inner_diameter,\n          outer_diameter: material.outer_diameter,\n          height: height,\n          client_type: clientType\n        }\n      });\n      \n      return response.data;\n    } catch (error) {\n      console.log('No pricing found for this material combination:', error);\n      return null;\n    }\n  };\n\n  // Confirm multi-material selection and calculate pricing\n  const confirmMultiMaterialSelection = async () => {\n    try {\n      // Calculate total pricing for all selected materials\n      let totalPrice = 0;\n      const height = parseFloat(currentItem.height);\n      \n      for (const selected of selectedMaterials) {\n        const pricing = await calculateAutomaticPrice(selected.material, height, clientType);\n        if (pricing) {\n          totalPrice += pricing.total_price * selected.seals;\n        }\n      }\n      \n      // Update the current item with the calculated price\n      setCurrentItem({\n        ...currentItem,\n        unit_price: (totalPrice / parseInt(currentItem.quantity)).toFixed(2)\n      });\n      \n      // Set the first material as the selected material for compatibility\n      if (selectedMaterials.length > 0) {\n        setSelectedMaterial(selectedMaterials[0].material);\n      }\n      \n      alert(`âœ… ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø®Ø§Ù…Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!\n\nğŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±:\n${selectedMaterials.map(sel => `- ${sel.material.unit_code}: ${sel.seals} Ø³ÙŠÙ„`).join('\\n')}\n\nğŸ’° Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${totalPrice.toFixed(2)} Ø¬.Ù…\nğŸ’° Ø³Ø¹Ø± Ø§Ù„Ø³ÙŠÙ„ Ø§Ù„ÙˆØ§Ø­Ø¯: ${(totalPrice / parseInt(currentItem.quantity)).toFixed(2)} Ø¬.Ù…`);\n      \n    } catch (error) {\n      console.error('Error confirming multi-material selection:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±');\n    }\n  };\n\n  const checkCompatibility = async () => {\n    if (!currentItem.inner_diameter || !currentItem.outer_diameter || !currentItem.height) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n    \n    let innerDiameter = parseFloat(currentItem.inner_diameter);\n    let outerDiameter = parseFloat(currentItem.outer_diameter);\n    let height = parseFloat(currentItem.height);\n    \n    if (isNaN(innerDiameter) || isNaN(outerDiameter) || isNaN(height)) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø£Ø±Ù‚Ø§Ù… ØµØ­ÙŠØ­Ø© Ù„Ù„Ù…Ù‚Ø§Ø³Ø§Øª');\n      return;\n    }\n    \n    // Convert from inches to millimeters if needed\n    if (measurementUnit === 'Ø¨ÙˆØµØ©') {\n      innerDiameter = innerDiameter * 25.4;\n      outerDiameter = outerDiameter * 25.4;\n      height = height * 25.4;\n      \n      console.log(`ØªØ­ÙˆÙŠÙ„ Ù…Ù† Ø¨ÙˆØµØ© Ø¥Ù„Ù‰ Ù…Ù„Ù„ÙŠÙ…ØªØ±:\n        Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ: ${currentItem.inner_diameter} Ø¨ÙˆØµØ© = ${innerDiameter.toFixed(1)} Ù…Ù…\n        Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ: ${currentItem.outer_diameter} Ø¨ÙˆØµØ© = ${outerDiameter.toFixed(1)} Ù…Ù…\n        Ø§Ù„Ø§Ø±ØªÙØ§Ø¹: ${currentItem.height} Ø¨ÙˆØµØ© = ${height.toFixed(1)} Ù…Ù…`);\n    }\n    \n    try {\n      const response = await axios.post(`${API}/compatibility-check`, {\n        seal_type: currentItem.seal_type,\n        material_type: currentItem.material_type,\n        inner_diameter: innerDiameter,\n        outer_diameter: outerDiameter,\n        height: height\n      });\n      setCompatibilityResults(response.data);\n    } catch (error) {\n      console.error('Error checking compatibility:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„ØªÙˆØ§ÙÙ‚');\n    }\n  };\n\n  const addItem = () => {\n    if (currentItem.product_type === 'manufactured') {\n      // Validation for manufactured products - check if at least one measurement is filled\n      const hasInnerDiameter = measurements.inner_diameter_mm || measurements.inner_diameter_inch;\n      const hasOuterDiameter = measurements.outer_diameter_mm || measurements.outer_diameter_inch;\n      const hasHeight = measurements.height_mm || measurements.height_inch;\n      \n      if (!hasInnerDiameter || !hasOuterDiameter || !hasHeight || !currentItem.unit_price) {\n        alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© (Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª ÙˆØ§Ù„Ø³Ø¹Ø±)');\n        return;\n      }\n\n      // Use mm values (they're automatically kept in sync by handleMeasurementChange)\n      const innerDiameter = parseFloat(currentItem.inner_diameter);\n      const outerDiameter = parseFloat(currentItem.outer_diameter);\n      const height = parseFloat(currentItem.height);\n      const wallHeightValue = parseFloat(measurements.wall_height_mm) || null;\n\n      const item = {\n        ...currentItem,\n        inner_diameter: innerDiameter,\n        outer_diameter: outerDiameter,\n        height: height,\n        quantity: parseInt(currentItem.quantity),\n        unit_price: parseFloat(currentItem.unit_price),\n        total_price: parseFloat(currentItem.unit_price) * parseInt(currentItem.quantity),\n        wall_height: wallHeightValue,\n        // Store original display values for both units\n        display_measurements: {\n          inner_diameter_mm: measurements.inner_diameter_mm,\n          inner_diameter_inch: measurements.inner_diameter_inch,\n          outer_diameter_mm: measurements.outer_diameter_mm,\n          outer_diameter_inch: measurements.outer_diameter_inch,\n          height_mm: measurements.height_mm,\n          height_inch: measurements.height_inch,\n          wall_height_mm: measurements.wall_height_mm,\n          wall_height_inch: measurements.wall_height_inch\n        },\n        material_used: selectedMaterial ? selectedMaterial.unit_code : null,\n        material_details: selectedMaterial ? {\n          id: selectedMaterial.id,\n          unit_code: selectedMaterial.unit_code,\n          inner_diameter: selectedMaterial.inner_diameter,\n          outer_diameter: selectedMaterial.outer_diameter,\n          height: selectedMaterial.height,\n          material_type: selectedMaterial.material_type,\n          is_finished_product: selectedMaterial.is_finished_product || false\n        } : {\n          // Ø¥Ø±Ø³Ø§Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø­ØªÙ‰ Ø¨Ø¯ÙˆÙ† Ø§Ø®ØªÙŠØ§Ø± Ù…Ø§Ø¯Ø© Ù…Ø­Ø¯Ø¯Ø©\n          material_type: currentItem.material_type,\n          inner_diameter: parseFloat(currentItem.inner_diameter),\n          outer_diameter: parseFloat(currentItem.outer_diameter),\n          is_finished_product: false\n        },\n        // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø®Ø§Ù…Ø§Øª Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©\n        selected_materials: selectedMaterials.length > 0 ? selectedMaterials.map(sel => ({\n          unit_code: sel.material.unit_code,\n          material_type: sel.material.material_type,\n          inner_diameter: sel.material.inner_diameter,\n          outer_diameter: sel.material.outer_diameter,\n          height: sel.material.height,\n          seals_count: sel.seals,\n          id: sel.material.id\n        })) : null\n      };\n\n      setItems([...items, item]);\n      setCurrentItem({\n        seal_type: 'RSL',\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        height: '',\n        quantity: 1,\n        unit_price: '',\n        product_type: 'manufactured'\n      });\n      setMeasurements({\n        inner_diameter_mm: '',\n        inner_diameter_inch: '',\n        outer_diameter_mm: '',\n        outer_diameter_inch: '',\n        height_mm: '',\n        height_inch: '',\n        wall_height_mm: '',\n        wall_height_inch: ''\n      });\n    } else {\n      // Validation for local products\n      if (!localProduct.product_size || !localProduct.product_type || !localProduct.selling_price || !localProduct.supplier || !localProduct.purchase_price) {\n        alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠ');\n        return;\n      }\n\n      const product_name = `${localProduct.product_size} - ${localProduct.product_type}`;\n\n      const item = {\n        // Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©ØŒ Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ØµÙ†Ø¹Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† null\n        seal_type: null,\n        material_type: null, \n        inner_diameter: null,\n        outer_diameter: null,\n        height: null,\n        product_type: 'local',\n        product_name: product_name,\n        product_size: localProduct.product_size,\n        product_type_name: localProduct.product_type,\n        supplier: localProduct.supplier,\n        purchase_price: parseFloat(localProduct.purchase_price),\n        selling_price: parseFloat(localProduct.selling_price),\n        quantity: parseInt(currentItem.quantity),\n        unit_price: parseFloat(localProduct.selling_price), // Use selling price as unit price\n        total_price: parseFloat(localProduct.selling_price) * parseInt(currentItem.quantity),\n        // Store local product details\n        local_product_details: {\n          product_size: localProduct.product_size,\n          product_type: localProduct.product_type,\n          supplier: localProduct.supplier,\n          purchase_price: parseFloat(localProduct.purchase_price),\n          selling_price: parseFloat(localProduct.selling_price)\n        }\n      };\n\n      setItems([...items, item]);\n      setLocalProduct({\n        product_size: '',\n        product_type: '',\n        purchase_price: '',\n        selling_price: '',\n        supplier: ''\n      });\n      setCurrentItem({\n        seal_type: 'RSL',\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        height: '',\n        quantity: 1,\n        unit_price: '',\n        product_type: 'manufactured'\n      });\n      setMeasurements({\n        inner_diameter_mm: '',\n        inner_diameter_inch: '',\n        outer_diameter_mm: '',\n        outer_diameter_inch: '',\n        height_mm: '',\n        height_inch: '',\n        wall_height_mm: '',\n        wall_height_inch: ''\n      });\n    }\n    \n    setCompatibilityResults(null);\n    setSelectedMaterial(null);\n    setSelectedMaterials([]); // Ù…Ø³Ø­ Ø§Ù„Ø®Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©\n  };\n\n  const editItem = (index) => {\n    const item = items[index];\n    \n    // Set current item for editing\n    setCurrentItem({\n      seal_type: item.seal_type || 'RSL',\n      material_type: item.material_type || 'NBR',\n      inner_diameter: item.inner_diameter?.toString() || '',\n      outer_diameter: item.outer_diameter?.toString() || '',\n      height: item.height?.toString() || '',\n      quantity: item.quantity || 1,\n      unit_price: item.unit_price?.toString() || '',\n      product_type: item.product_type || (item.local_product_details ? 'local' : 'manufactured')\n    });\n    \n    // Set measurements for dual input fields (assuming values are in mm from database)\n    setMeasurements({\n      inner_diameter_mm: item.inner_diameter?.toString() || '',\n      inner_diameter_inch: mmToInch(item.inner_diameter) || '',\n      outer_diameter_mm: item.outer_diameter?.toString() || '',\n      outer_diameter_inch: mmToInch(item.outer_diameter) || '',\n      height_mm: item.height?.toString() || '',\n      height_inch: mmToInch(item.height) || '',\n      wall_height_mm: item.wall_height?.toString() || '',\n      wall_height_inch: mmToInch(item.wall_height) || ''\n    });\n    \n    // Set wall height if exists\n    if (item.wall_height) {\n      setWallHeight(item.wall_height.toString());\n    }\n    \n    // Set measurement unit if exists\n    if (item.measurement_unit) {\n      setMeasurementUnit(item.measurement_unit);\n    }\n    \n    // Set local product details if exists\n    if (item.local_product_details) {\n      setLocalProduct({\n        product_size: item.local_product_details.product_size || '',\n        product_type: item.local_product_details.product_type || '',\n        purchase_price: '',\n        selling_price: item.unit_price?.toString() || '',\n        supplier: ''\n      });\n    }\n    \n    // Remove the item being edited\n    const newItems = items.filter((_, i) => i !== index);\n    setItems(newItems);\n  };\n\n  const deleteItem = (index) => {\n    if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ØµØ±ØŸ')) {\n      const newItems = items.filter((_, i) => i !== index);\n      setItems(newItems);\n    }\n  };\n\n  const [isCreatingInvoice, setIsCreatingInvoice] = useState(false);\n\n  const createInvoice = async () => {\n    // Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø± Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n    if (isCreatingInvoice) {\n      return;\n    }\n\n    if (!selectedCustomer && !newCustomer) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø£Ùˆ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯');\n      return;\n    }\n\n    if (items.length === 0) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª Ù„Ù„ÙØ§ØªÙˆØ±Ø©');\n      return;\n    }\n\n    try {\n      setIsCreatingInvoice(true); // Ø¨Ø¯Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n      \n      let customerId = selectedCustomer;\n      let customerName = '';\n\n      // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯ Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±\n      if (!selectedCustomer && newCustomer) {\n        try {\n          const customerResponse = await axios.post(`${API}/customers`, {\n            name: newCustomer,\n            phone: '',\n            address: ''\n          });\n          customerId = customerResponse.data.id;\n          customerName = newCustomer;\n          \n          // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\n          fetchCustomers();\n        } catch (customerError) {\n          // Check if it's a duplicate customer error\n          if (customerError.response?.status === 409) {\n            // Customer exists, ask user what to do\n            const existingCustomer = customers.find(c => c.name.toLowerCase() === newCustomer.toLowerCase());\n            if (existingCustomer) {\n              if (confirm(`âš ï¸ Ø§Ù„Ø¹Ù…ÙŠÙ„ \"${newCustomer}\" Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„!\\n\\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ØŸ`)) {\n                customerId = existingCustomer.id;\n                customerName = existingCustomer.name;\n                setSelectedCustomer(existingCustomer.id);\n                setNewCustomer('');\n              } else {\n                setIsCreatingInvoice(false);\n                return;\n              }\n            } else {\n              alert(`âŒ ${customerError.response.data.detail}\\n\\nÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©.`);\n              setIsCreatingInvoice(false);\n              return;\n            }\n          } else {\n            throw customerError;\n          }\n        }\n      } else {\n        const customer = customers.find(c => c.id === customerId);\n        customerName = customer ? customer.name : '';\n      }\n\n      // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ ÙˆØ§Ù„Ø®ØµÙ…\n      const subtotal = items.reduce((sum, item) => sum + item.total_price, 0);\n      const discountAmount = discountType === 'percentage' \n        ? (subtotal * parseFloat(discount || 0)) / 100\n        : parseFloat(discount || 0);\n      const totalAfterDiscount = subtotal - discountAmount;\n\n      // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n      const invoiceData = {\n        customer_id: customerId,\n        customer_name: customerName,\n        invoice_title: invoiceTitle, // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n        supervisor_name: supervisorName, // Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù\n        items: items,\n        payment_method: paymentMethod,\n        subtotal: subtotal,\n        discount: discountAmount,\n        discount_type: discountType,\n        discount_value: parseFloat(discount || 0),\n        total_after_discount: totalAfterDiscount,\n        notes: ''\n      };\n\n      const response = await axios.post(`${API}/invoices?supervisor_name=${encodeURIComponent(supervisorName)}`, invoiceData);\n      \n      if (response.data) {\n        alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');\n        \n        // Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\n        setItems([]);\n        setSelectedCustomer('');\n        setNewCustomer('');\n        setSupervisorName('');\n        setInvoiceTitle(''); // Ù…Ø³Ø­ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n        setPaymentMethod('Ù†Ù‚Ø¯ÙŠ');\n        setDiscount(0);\n        setDiscountType('amount');\n        setClientType(1); // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„\n        \n        // Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n        printInvoice(response.data);\n      }\n    } catch (error) {\n      console.error('Error creating invoice:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    } finally {\n      setIsCreatingInvoice(false); // Ø¥Ù†Ù‡Ø§Ø¡ Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡\n    }\n  };\n\n  const printInvoice = (invoice) => {\n    const printContent = `\n      <!DOCTYPE html>\n      <html dir=\"rtl\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <style>\n          body {\n            font-family: Arial, sans-serif;\n            margin: 0;\n            padding: 20px;\n            direction: rtl;\n            font-size: 15px;\n          }\n          .header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            border-bottom: 3px solid #000;\n            padding-bottom: 10px;\n            margin-bottom: 20px;\n          }\n          .company-info {\n            text-align: right;\n          }\n          .company-name {\n            font-size: 32px;\n            font-weight: bold;\n            color: #000;\n            margin: 0;\n          }\n          .company-subtitle {\n            font-size: 20px;\n            margin: 5px 0;\n            color: #666;\n          }\n          .company-details {\n            font-size: 16px;\n            margin: 2px 0;\n            color: #333;\n          }\n          .logo-section {\n            text-align: center;\n            flex: 1;\n          }\n          .invoice-title {\n            font-size: 20px;\n            font-weight: bold;\n            background-color: #ff4444;\n            color: white;\n            padding: 8px 20px;\n            border-radius: 5px;\n            display: inline-block;\n            margin-bottom: 10px;\n          }\n          .invoice-number {\n            font-size: 18px;\n            font-weight: bold;\n            color: #ff4444;\n          }\n          .customer-info {\n            display: flex;\n            justify-content: space-between;\n            margin: 20px 0;\n          }\n          .customer-details {\n            text-align: right;\n          }\n          .date-info {\n            text-align: left;\n          }\n          .products-table {\n            width: 100%;\n            border-collapse: collapse;\n            border: 2px solid #000;\n            margin: 20px 0;\n          }\n          .products-table th,\n          .products-table td {\n            border: 1px solid #000;\n            padding: 8px;\n            text-align: center;\n          }\n          .products-table th {\n            background-color: #f0f0f0;\n            font-weight: bold;\n          }\n          .footer {\n            margin-top: 30px;\n            border-top: 1px solid #ccc;\n            padding-top: 15px;\n            display: flex;\n            justify-content: space-between;\n            font-size: 12px;\n            color: #666;\n          }\n          .total-section {\n            text-align: left;\n            margin-top: 10px;\n          }\n          .total-amount {\n            font-size: 18px;\n            font-weight: bold;\n            border: 2px solid #000;\n            padding: 10px;\n            display: inline-block;\n            background-color: #f9f9f9;\n          }\n          @media print {\n            body { margin: 0; padding: 10px; }\n          }\n        </style>\n      </head>\n      <body>\n        <!-- Header Section -->\n        <div class=\"header\">\n          <div class=\"company-info\">\n            <h1 class=\"company-name\">Ø´Ø±ÙƒØ© Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„</h1>\n            <p class=\"company-subtitle\">ØªØµÙ†ÙŠØ¹ Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£ÙˆÙŠÙ„ Ø³ÙŠÙ„</p>\n            <p class=\"company-details\">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø·Ø§Ø± Ø­ØªÙ‰ Ù¥Ù Ù Ù…Ù„</p>\n            <p class=\"company-details\">Ù‡ÙŠØ¯Ø±ÙˆÙ„ÙŠÙƒ - Ù†ÙŠÙˆÙ…Ø§ØªÙŠÙƒ</p>\n          </div>\n          \n          <div class=\"logo-section\">\n            <img src=\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\" \n                 alt=\"Master Seal Logo\" \n                 style=\"max-width: 120px; max-height: 80px; margin-bottom: 10px;\">\n            <div class=\"invoice-title\">${invoice.invoice_title || 'Ø¹Ø±Ø¶ Ø³Ø¹Ø±'}</div>\n            <div class=\"invoice-number\">${invoice.invoice_number}</div>\n          </div>\n        </div>\n\n        <!-- Customer and Date Info -->\n        <div class=\"customer-info\">\n          <div class=\"customer-details\">\n            <p><strong>Ø§Ù„Ø³Ø§Ø¯Ø©:</strong> ${invoice.customer_name}</p>\n            <p><strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> ${invoice.customer_address || '........................'}</p>\n          </div>\n          <div class=\"date-info\">\n            <p><strong>ØªØ­Ø±ÙŠØ± ÙÙŠ:</strong> ${new Date(invoice.date).toLocaleDateString('ar-EG')}</p>\n            <p><strong>Date:</strong> ${new Date(invoice.date).toLocaleDateString('en-GB')}</p>\n          </div>\n        </div>\n\n        <!-- Products Table -->\n        <table class=\"products-table\">\n          <thead>\n            <tr>\n              <th style=\"width: 60px;\">Ø§Ù„Ù…Ø³Ù„Ø³Ù„<br>Item</th>\n              <th style=\"width: 80px;\">Ø§Ù„ÙƒÙ…ÙŠØ©<br>QTY</th>\n              <th style=\"width: 200px;\">Description<br>Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª</th>\n              <th style=\"width: 100px;\">Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©<br>Unit Price</th>\n              <th style=\"width: 100px;\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ<br>Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${invoice.items.map((item, index) => `\n              <tr>\n                <td>${index + 1}</td>\n                <td>${item.quantity}</td>\n                <td style=\"text-align: right;\">\n                  ${item.local_product_details ? \n                    `${item.local_product_details.product_size} - ${item.local_product_details.product_type}` : \n                    `${item.seal_type} - ${item.material_type}<br>\n                    <small>${item.inner_diameter} Ã— ${item.outer_diameter} Ã— ${item.height} Ù…Ù…${item.wall_height ? ` (Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø©: ${item.wall_height} Ù…Ù…)` : \"\"}</small>`\n                  }\n                </td>\n                <td>Ø¬.Ù… ${item.unit_price.toFixed(2)}</td>\n                <td>Ø¬.Ù… ${item.total_price.toFixed(2)}</td>\n              </tr>\n            `).join('')}\n            <!-- Empty rows for additional items -->\n            ${Array.from({length: Math.max(0, 8 - invoice.items.length)}, (_, i) => `\n              <tr style=\"height: 40px;\">\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n              </tr>\n            `).join('')}\n          </tbody>\n        </table>\n\n        <!-- Total Section -->\n        <div class=\"total-section\">\n          <div style=\"text-align: left; margin-bottom: 10px;\">\n            ${invoice.subtotal ? `\n              <div style=\"margin-bottom: 5px;\">\n                <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ: Ø¬.Ù… ${invoice.subtotal.toFixed(2)}</span>\n              </div>\n            ` : ''}\n            ${invoice.discount && invoice.discount > 0 ? `\n              <div style=\"margin-bottom: 5px; color: #d32f2f;\">\n                <span>Ø§Ù„Ø®ØµÙ…: - Ø¬.Ù… ${invoice.discount.toFixed(2)}</span>\n                ${invoice.discount_type === 'percentage' && invoice.discount_value ? \n                  ` <small>(${invoice.discount_value}%)</small>` : ''}\n              </div>\n              <hr style=\"margin: 5px 0; border: 1px solid #000;\">\n            ` : ''}\n          </div>\n          <div class=\"total-amount\">\n            Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: Ø¬.Ù… ${(invoice.total_after_discount || invoice.total_amount).toFixed(2)}\n          </div>\n        </div>\n\n        <!-- Additional Info -->\n        <div style=\"margin-top: 20px; text-align: center; font-size: 12px;\">\n          <p><strong>Ù…Ù„Ø­ÙˆØ¸Ø©:</strong> ÙÙ‚Ø· ÙˆÙ‚Ø¯Ø±Ù‡</p>\n          <div style=\"height: 30px; border-bottom: 1px solid #000; margin: 10px 40px;\"></div>\n        </div>\n\n        <!-- Footer -->\n        <div class=\"footer\">\n          <div>\n            <p><strong>Ø§Ù„ØªÙˆÙ‚ÙŠØ¹:</strong></p>\n            <p>Ù…ÙˆØ¨Ø§ÙŠÙ„: Ù Ù¡Ù Ù¢Ù Ù¦Ù£Ù Ù¦Ù§Ù§ - Ù Ù¡Ù Ù¦Ù¢Ù£Ù©Ù Ù¨Ù§Ù </p>\n            <p>ØªÙ„ÙŠÙÙˆÙ†: Ù Ù¡Ù Ù¢Ù Ù¦Ù£Ù Ù¦Ù§Ù§</p>\n          </div>\n          <div style=\"text-align: left;\">\n            <p><strong>Ø§Ù„Ù…Ø³ØªÙ„Ù…:</strong></p>\n            <p>Ø§Ù„Ø­Ø±ÙÙŠÙŠÙ† - Ø§Ù„Ø³Ù„Ø§Ù… - Ø£Ù…Ø§Ù… Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª</p>\n            <p>Ù…ÙˆØ¨Ø§ÙŠÙ„: Ù Ù¡Ù Ù¢Ù Ù¦Ù£Ù Ù¦Ù§Ù§ - Ù Ù¡Ù Ù¦Ù¢Ù£Ù©Ù Ù¨Ù§Ù </p>\n          </div>\n        </div>\n\n        <!-- Note -->\n        <div style=\"text-align: center; margin-top: 20px; font-size: 11px; color: #666;\">\n          <p>ÙŠÙ‚Ø± Ø§Ù„Ù…Ø´ØªØ±ÙŠ Ø¨Ø£Ù†Ù‡ Ù‚Ø§Ù… Ø¨Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø¨Ø¶Ø§Ø¹Ø© ÙˆÙ‚Ø¨ÙˆÙ„Ù‡Ø§</p>\n        </div>\n      </body>\n      </html>\n    `;\n    \n    const printWindow = window.open('', '_blank');\n    printWindow.document.write(printContent);\n    printWindow.document.close();\n    printWindow.print();\n  };\n\n  const clearAllInvoices = async () => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) return;\n    \n    try {\n      setItems([]);\n      alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±');\n    } catch (error) {\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <h2 className=\"text-2xl font-bold text-blue-600 mb-6\">Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</h2>\n      \n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Customer Selection */}\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„</h3>\n          \n          <div className=\"space-y-4\">\n            <div>\n              <select\n                value={selectedCustomer}\n                onChange={(e) => setSelectedCustomer(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              >\n                <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„</option>\n                {customers.map(customer => (\n                  <option key={customer.id} value={customer.id}>\n                    {customer.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n            \n            <div className=\"flex space-x-2 space-x-reverse\">\n              <div className=\"flex-1\">\n                <input\n                  type=\"text\"\n                  value={newCustomer}\n                  onChange={(e) => {\n                    const value = e.target.value;\n                    setNewCustomer(value);\n                    \n                    // Check for exact match and auto-select\n                    const exactMatch = customers.find(c => c.name.toLowerCase() === value.toLowerCase());\n                    if (exactMatch) {\n                      // Auto-select the existing customer\n                      setSelectedCustomer(exactMatch.id);\n                      setNewCustomer('');\n                      e.target.style.borderColor = '';\n                      e.target.style.backgroundColor = '';\n                      // Show brief confirmation\n                      const tempMsg = document.createElement('div');\n                      tempMsg.textContent = `âœ… ØªÙ… Ø§Ø®ØªÙŠØ§Ø±: ${exactMatch.name}`;\n                      tempMsg.className = 'text-xs text-green-600 mt-1';\n                      e.target.parentElement.appendChild(tempMsg);\n                      setTimeout(() => tempMsg.remove(), 2000);\n                    } else {\n                      // Check for potential duplicates (partial match)\n                      const partialMatch = customers.some(c => c.name.toLowerCase().includes(value.toLowerCase()) && value.length > 2);\n                      if (partialMatch && value) {\n                        e.target.style.borderColor = 'orange';\n                        e.target.style.backgroundColor = '#fff3cd';\n                      } else {\n                        e.target.style.borderColor = '';\n                        e.target.style.backgroundColor = '';\n                      }\n                    }\n                  }}\n                  placeholder=\"Ø§Ø³Ù… Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯\"\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                />\n              </div>\n              <button className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n                Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯\n              </button>\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØªØµÙ†ÙŠØ¹</label>\n              <input\n                type=\"text\"\n                value={supervisorName}\n                onChange={(e) => setSupervisorName(e.target.value)}\n                placeholder=\"Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©</label>\n              <input\n                type=\"text\"\n                value={invoiceTitle}\n                onChange={(e) => setInvoiceTitle(e.target.value)}\n                placeholder=\"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Product Entry */}\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</h3>\n          \n          {/* Product Type Selection */}\n          <div className=\"mb-4\">\n            <label className=\"block text-sm font-medium mb-2\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬</label>\n            <select\n              value={currentItem.product_type}\n              onChange={(e) => setCurrentItem({...currentItem, product_type: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"manufactured\">Ù…Ù†ØªØ¬ ØªØµÙ†ÙŠØ¹</option>\n              <option value=\"local\">Ù…Ù†ØªØ¬ Ù…Ø­Ù„ÙŠ</option>\n            </select>\n          </div>\n          \n          {/* Conditional Product Forms */}\n          {currentItem.product_type === 'manufactured' ? (\n            // Manufacturing Product Form\n            <>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„</label>\n                  <select\n                    value={currentItem.seal_type}\n                    onChange={(e) => setCurrentItem({...currentItem, seal_type: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  >\n                    {sealTypes.map(type => (\n                      <option key={type} value={type}>{type}</option>\n                    ))}\n                  </select>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</label>\n                  <select\n                    value={currentItem.material_type}\n                    onChange={(e) => setCurrentItem({...currentItem, material_type: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  >\n                    {materialTypes.map(type => (\n                      <option key={type} value={type}>{type}</option>\n                    ))}\n                  </select>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</label>\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">Ù…Ù„ÙŠÙ…ØªØ±</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.01\"\n                        value={measurements.inner_diameter_mm}\n                        onChange={(e) => handleMeasurementChange('inner_diameter', e.target.value, 'mm')}\n                        className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                        placeholder=\"Ù…Ù…\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">Ø¨ÙˆØµØ©</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.0001\"\n                        value={measurements.inner_diameter_inch}\n                        onChange={(e) => handleMeasurementChange('inner_diameter', e.target.value, 'inch')}\n                        className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                        placeholder=\"Ø¨ÙˆØµØ©\"\n                      />\n                    </div>\n                  </div>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</label>\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">Ù…Ù„ÙŠÙ…ØªØ±</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.01\"\n                        value={measurements.outer_diameter_mm}\n                        onChange={(e) => handleMeasurementChange('outer_diameter', e.target.value, 'mm')}\n                        className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                        placeholder=\"Ù…Ù…\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">Ø¨ÙˆØµØ©</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.0001\"\n                        value={measurements.outer_diameter_inch}\n                        onChange={(e) => handleMeasurementChange('outer_diameter', e.target.value, 'inch')}\n                        className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                        placeholder=\"Ø¨ÙˆØµØ©\"\n                      />\n                    </div>\n                  </div>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø³ÙŠÙ„</label>\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">Ù…Ù„ÙŠÙ…ØªØ±</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.01\"\n                        value={measurements.height_mm}\n                        onChange={(e) => handleMeasurementChange('height', e.target.value, 'mm')}\n                        className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                        placeholder=\"Ù…Ù…\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">Ø¨ÙˆØµØ©</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.0001\"\n                        value={measurements.height_inch}\n                        onChange={(e) => handleMeasurementChange('height', e.target.value, 'inch')}\n                        className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                        placeholder=\"Ø¨ÙˆØµØ©\"\n                      />\n                    </div>\n                  </div>\n                </div>\n                \n                {/* Wall Height for W-type seals */}\n                {currentItem.seal_type && currentItem.seal_type.startsWith('W') && (\n                  <div>\n                    <label className=\"block text-sm font-medium mb-1\">Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø©</label>\n                    <div className=\"grid grid-cols-2 gap-2\">\n                      <div>\n                        <label className=\"block text-xs text-gray-600 mb-1\">Ù…Ù„ÙŠÙ…ØªØ±</label>\n                        <input\n                          type=\"number\"\n                          step=\"0.01\"\n                          value={measurements.wall_height_mm}\n                          onChange={(e) => handleMeasurementChange('wall_height', e.target.value, 'mm')}\n                          className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                          placeholder=\"Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø© Ø¨Ø§Ù„Ù…Ù„ÙŠÙ…ØªØ±\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-xs text-gray-600 mb-1\">Ø¨ÙˆØµØ©</label>\n                        <input\n                          type=\"number\"\n                          step=\"0.0001\"\n                          value={measurements.wall_height_inch}\n                          onChange={(e) => handleMeasurementChange('wall_height', e.target.value, 'inch')}\n                          className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                          placeholder=\"Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø© Ø¨Ø§Ù„Ø¨ÙˆØµØ©\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n                )}\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙŠÙ„</label>\n                  <input\n                    type=\"number\"\n                    value={currentItem.quantity}\n                    onChange={(e) => setCurrentItem({...currentItem, quantity: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù„ØªØ³Ø¹ÙŠØ±</label>\n                  <select\n                    value={clientType}\n                    onChange={(e) => setClientType(parseInt(e.target.value))}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  >\n                    <option value={1}>Ø¹Ù…ÙŠÙ„ 1</option>\n                    <option value={2}>Ø¹Ù…ÙŠÙ„ 2</option>\n                    <option value={3}>Ø¹Ù…ÙŠÙ„ 3</option>\n                  </select>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø³Ø¹Ø± Ø§Ù„Ø³ÙŠÙ„ Ø§Ù„ÙˆØ§Ø­Ø¯</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={currentItem.unit_price}\n                    onChange={(e) => setCurrentItem({...currentItem, unit_price: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>\n                  <textarea\n                    value={currentItem.notes || ''}\n                    onChange={(e) => setCurrentItem({...currentItem, notes: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                    rows=\"2\"\n                    placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©...\"\n                  />\n                </div>\n                \n                <div className=\"flex items-end\">\n                  <button\n                    onClick={checkCompatibility}\n                    className=\"w-full bg-yellow-500 text-white p-2 rounded hover:bg-yellow-600\"\n                  >\n                    ÙØ­Øµ Ø§Ù„ØªÙˆØ§ÙÙ‚\n                  </button>\n                </div>\n              </div>\n            </>\n          ) : (\n            // Local Product Form\n            <>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ù†ØªØ¬</label>\n                  <input\n                    type=\"text\"\n                    value={localProduct.product_size}\n                    onChange={(e) => setLocalProduct({...localProduct, product_size: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                    placeholder=\"Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ù†ØªØ¬\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬</label>\n                  <input\n                    type=\"text\"\n                    value={localProduct.product_type}\n                    onChange={(e) => setLocalProduct({...localProduct, product_type: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                    placeholder=\"Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù…ÙˆØ±Ø¯</label>\n                  <select\n                    value={localProduct.supplier}\n                    onChange={(e) => setLocalProduct({...localProduct, supplier: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  >\n                    <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ±Ø¯</option>\n                    {suppliers.map(supplier => (\n                      <option key={supplier.id} value={supplier.name}>\n                        {supplier.name}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={localProduct.purchase_price}\n                    onChange={(e) => setLocalProduct({...localProduct, purchase_price: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                    placeholder=\"Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={localProduct.selling_price}\n                    onChange={(e) => setLocalProduct({...localProduct, selling_price: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                    placeholder=\"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ÙƒÙ…ÙŠØ©</label>\n                  <input\n                    type=\"number\"\n                    value={currentItem.quantity}\n                    onChange={(e) => setCurrentItem({...currentItem, quantity: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  />\n                </div>\n              </div>\n            </>\n          )}\n          \n          <button\n            onClick={addItem}\n            className=\"w-full bg-green-500 text-white p-2 rounded hover:bg-green-600 mt-4\"\n          >\n            Ø¥Ø¶Ø§ÙØ© Ù„Ù„ÙØ§ØªÙˆØ±Ø©\n          </button>\n        </div>\n      </div>\n\n      {/* Compatibility Results */}\n      {compatibilityResults && (\n        <div className=\"mt-6 bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ù†ØªØ§Ø¦Ø¬ ÙØ­Øµ Ø§Ù„ØªÙˆØ§ÙÙ‚</h3>\n          \n          {compatibilityResults.compatible_materials.length > 0 && (\n            <div className=\"mb-4\">\n              <h4 className=\"font-medium mb-2\">ğŸ“¦ Ù†ØªØ§Ø¦Ø¬ ÙØ­Øµ Ø§Ù„ØªÙˆØ§ÙÙ‚</h4>\n              <p className=\"text-sm text-gray-600 mb-2\">Ø§Ø®ØªØ± Ø§Ù„Ø®Ø§Ù…Ø§Øª ÙˆØ­Ø¯Ø¯ Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙŠÙ„Ø§Øª Ù…Ù† ÙƒÙ„ Ø®Ø§Ù…Ø© (Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: {currentItem.quantity} Ø³ÙŠÙ„)</p>\n              \n              {/* Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© */}\n              {selectedMaterials.length > 0 && (\n                <div className=\"mb-4 p-3 bg-blue-50 rounded border\">\n                  <h5 className=\"font-medium text-blue-800 mb-2\">Ø§Ù„Ø®Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©:</h5>\n                  <div className=\"space-y-2\">\n                    {selectedMaterials.map((selected, index) => (\n                      <div key={index} className=\"flex items-center justify-between bg-white p-2 rounded border\">\n                        <span className=\"text-sm\">\n                          {selected.material.unit_code} - {selected.material.material_type} \n                          {selected.material.inner_diameter}Ã—{selected.material.outer_diameter}Ã—{selected.material.height}\n                        </span>\n                        <div className=\"flex items-center space-x-2 space-x-reverse\">\n                          <input\n                            type=\"number\"\n                            min=\"1\"\n                            max={Math.floor(selected.material.height / (parseFloat(currentItem.height) + 2))}\n                            value={selected.seals}\n                            onChange={(e) => {\n                              const newSelected = [...selectedMaterials];\n                              newSelected[index].seals = parseInt(e.target.value) || 0;\n                              setSelectedMaterials(newSelected);\n                            }}\n                            className=\"w-16 p-1 border rounded text-center\"\n                          />\n                          <span className=\"text-xs\">Ø³ÙŠÙ„</span>\n                          <button\n                            onClick={() => {\n                              const newSelected = selectedMaterials.filter((_, i) => i !== index);\n                              setSelectedMaterials(newSelected);\n                            }}\n                            className=\"text-red-600 hover:text-red-800 text-sm\"\n                          >\n                            âœ•\n                          </button>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                  <div className=\"mt-2 text-sm\">\n                    <span className=\"font-medium\">\n                      Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: {selectedMaterials.reduce((sum, sel) => sum + sel.seals, 0)} / {currentItem.quantity} Ø³ÙŠÙ„\n                    </span>\n                    {selectedMaterials.reduce((sum, sel) => sum + sel.seals, 0) === parseInt(currentItem.quantity) && (\n                      <span className=\"text-green-600 ml-2\">âœ“ Ù…ÙƒØªÙ…Ù„</span>\n                    )}\n                  </div>\n                </div>\n              )}\n              \n              <div className=\"space-y-2 max-h-48 overflow-y-auto\">\n                {compatibilityResults.compatible_materials.map((material, index) => {\n                  const isSelected = selectedMaterials.some(sel => \n                    sel.material.unit_code === material.unit_code && \n                    sel.material.inner_diameter === material.inner_diameter &&\n                    sel.material.outer_diameter === material.outer_diameter\n                  );\n                  const maxSeals = Math.floor(material.height / (parseFloat(currentItem.height) + 2));\n                  const remainingSeals = parseInt(currentItem.quantity) - selectedMaterials.reduce((sum, sel) => sum + sel.seals, 0);\n                  \n                  return (\n                    <div key={index} \n                         className={`p-3 rounded border transition-colors ${\n                           isSelected ? 'bg-blue-100 border-blue-300' : 'bg-gray-50 hover:bg-gray-100'\n                         }`}>\n                      <div className=\"flex justify-between items-start\">\n                        <div className=\"flex-1\">\n                          <p className=\"font-medium text-blue-600\">\n                            {material.unit_code} - {material.material_type}\n                          </p>\n                          <p className=\"text-sm text-gray-600\">\n                            Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯: {material.inner_diameter} Ã— {material.outer_diameter} Ã— {material.height} Ù…Ù…\n                          </p>\n                          <p className=\"text-xs text-green-600\">\n                            ÙŠÙ…ÙƒÙ† Ø¥Ù†ØªØ§Ø¬: {maxSeals} Ø³ÙŠÙ„ ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰\n                          </p>\n                          {material.score && (\n                            <p className=\"text-xs text-gray-500\">Ù†Ø³Ø¨Ø© Ø§Ù„ØªÙˆØ§ÙÙ‚: {material.score}%</p>\n                          )}\n                        </div>\n                        {!isSelected && remainingSeals > 0 && maxSeals > 0 && (\n                          <button\n                            onClick={() => {\n                              const newSelection = {\n                                material: material,\n                                seals: Math.min(maxSeals, remainingSeals)\n                              };\n                              setSelectedMaterials([...selectedMaterials, newSelection]);\n                            }}\n                            className=\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\"\n                          >\n                            Ø§Ø®ØªÙŠØ§Ø±\n                          </button>\n                        )}\n                        {isSelected && (\n                          <div className=\"text-blue-600 text-sm font-medium\">\n                            âœ“ Ù…Ø®ØªØ§Ø±Ø©\n                          </div>\n                        )}\n                        {!isSelected && remainingSeals <= 0 && (\n                          <div className=\"text-gray-400 text-sm\">\n                            Ù…ÙƒØªÙ…Ù„\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n              \n              {/* Ø²Ø± ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± */}\n              {selectedMaterials.length > 0 && (\n                <div className=\"mt-4 flex space-x-2 space-x-reverse\">\n                  <button\n                    onClick={() => {\n                      const totalSeals = selectedMaterials.reduce((sum, sel) => sum + sel.seals, 0);\n                      if (totalSeals !== parseInt(currentItem.quantity)) {\n                        alert(`âš ï¸ Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© (${totalSeals}) Ù„Ø§ ÙŠØ³Ø§ÙˆÙŠ Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ (${currentItem.quantity})`);\n                        return;\n                      }\n                      \n                      // ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± ÙˆØ­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø±\n                      confirmMultiMaterialSelection();\n                    }}\n                    className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n                    disabled={selectedMaterials.reduce((sum, sel) => sum + sel.seals, 0) !== parseInt(currentItem.quantity)}\n                  >\n                    ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±\n                  </button>\n                  <button\n                    onClick={() => {\n                      setSelectedMaterials([]);\n                    }}\n                    className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n                  >\n                    Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±\n                  </button>\n                </div>\n              )}\n            </div>\n          )}\n          \n          {compatibilityResults.compatible_products.length > 0 && (\n            <div>\n              <h4 className=\"font-medium mb-2\">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©:</h4>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {compatibilityResults.compatible_products.map((product, index) => (\n                  <div \n                    key={index} \n                    className=\"p-3 border border-blue-300 bg-blue-50 rounded cursor-pointer hover:bg-blue-100\"\n                    onClick={() => setSelectedMaterial({\n                      unit_code: `FINISHED-${product.id}`,\n                      material_type: product.material_type,\n                      seal_type: product.seal_type,\n                      inner_diameter: product.inner_diameter,\n                      outer_diameter: product.outer_diameter,\n                      height: product.height,\n                      is_finished_product: true\n                    })}\n                  >\n                    <p><strong>Ø§Ù„Ù†ÙˆØ¹:</strong> {product.seal_type} - {product.material_type}</p>\n                    <p><strong>Ø§Ù„Ù…Ù‚Ø§Ø³:</strong> {product.inner_diameter} Ã— {product.outer_diameter} Ã— {product.height}</p>\n                    <p><strong>Ø§Ù„ÙƒÙ…ÙŠØ©:</strong> {product.quantity}</p>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {selectedMaterial && (\n            <div className=\"mt-4 p-3 bg-blue-100 rounded\">\n              <p className=\"font-semibold text-blue-800\">\n                ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø®Ø§Ù…Ø©: {selectedMaterial.unit_code} ({selectedMaterial.material_type})\n              </p>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Current Items */}\n      {items.length > 0 && (\n        <div className=\"mt-6 bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø£Ø®ÙŠØ±Ø©</h3>\n          \n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full border-collapse border border-gray-300\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„</th>\n                  <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ù‚Ø§Ø³</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙƒÙ…ÙŠØ©</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø³Ø¹Ø±</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</th>\n                  <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n                </tr>\n              </thead>\n              <tbody>\n                {items.map((item, index) => (\n                  <tr key={index}>\n                    <td className=\"border border-gray-300 p-2\">\n                      {item.local_product_details ? item.local_product_details.product_type : item.seal_type}\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">\n                      {item.local_product_details ? 'Ù…Ø­Ù„ÙŠ' : item.material_type}\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">\n                      {item.local_product_details ? \n                        `${item.local_product_details.product_size} - ${item.local_product_details.product_type}` :\n                        `${item.original_inner_diameter || item.inner_diameter} Ã— ${item.original_outer_diameter || item.outer_diameter} Ã— ${item.original_height || item.height}${item.original_wall_height ? ` (Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø©: ${item.original_wall_height})` : (item.wall_height ? ` (Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø©: ${item.wall_height})` : '')} ${item.measurement_unit || 'Ù…Ù…'}`\n                      }\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">{item.quantity}</td>\n                    <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {item.unit_price}</td>\n                    <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {item.total_price}</td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <div className=\"flex space-x-2 space-x-reverse\">\n                        <button\n                          onClick={() => editItem(index)}\n                          className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                          title=\"ØªØ­Ø±ÙŠØ±\"\n                        >\n                          âœï¸\n                        </button>\n                        <button\n                          onClick={() => deleteItem(index)}\n                          className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                          title=\"Ø­Ø°Ù\"\n                        >\n                          ğŸ—‘ï¸\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n          \n          <div className=\"mt-4 flex justify-between items-center\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</label>\n              <select\n                value={paymentMethod}\n                onChange={(e) => setPaymentMethod(e.target.value)}\n                className=\"p-2 border border-gray-300 rounded\"\n              >\n                <option value=\"Ù†Ù‚Ø¯ÙŠ\">Ù†Ù‚Ø¯ÙŠ</option>\n                <option value=\"Ø¢Ø¬Ù„\">Ø¢Ø¬Ù„</option>\n                <option value=\"ÙÙˆØ¯Ø§ÙÙˆÙ† 010\">ÙÙˆØ¯Ø§ÙÙˆÙ† 010</option>\n                <option value=\"ÙƒØ§Ø´ 0100\">ÙƒØ§Ø´ 0100</option>\n                <option value=\"Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ\">Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ</option>\n                <option value=\"ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ\">ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ</option>\n              </select>\n            </div>\n            \n            {/* Discount Section */}\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 p-4 bg-gray-50 rounded-lg\">\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø®ØµÙ…</label>\n                <select\n                  value={discountType}\n                  onChange={(e) => setDiscountType(e.target.value)}\n                  className=\"p-2 border border-gray-300 rounded w-full\"\n                >\n                  <option value=\"amount\">Ù…Ø¨Ù„Øº Ø«Ø§Ø¨Øª</option>\n                  <option value=\"percentage\">Ù†Ø³Ø¨Ø© Ù…Ø¦ÙˆÙŠØ©</option>\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">\n                  Ù‚ÙŠÙ…Ø© Ø§Ù„Ø®ØµÙ… {discountType === 'percentage' ? '(%)' : '(Ø¬.Ù…)'}\n                </label>\n                <input\n                  type=\"number\"\n                  value={discount}\n                  onChange={(e) => setDiscount(e.target.value)}\n                  className=\"p-2 border border-gray-300 rounded w-full\"\n                  placeholder=\"0\"\n                  min=\"0\"\n                  step={discountType === 'percentage' ? '0.1' : '0.01'}\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù…Ø¨Ù„Øº Ø§Ù„Ø®ØµÙ…</label>\n                <div className=\"p-2 bg-white border border-gray-300 rounded w-full\">\n                  Ø¬.Ù… {(() => {\n                    const subtotal = items.reduce((sum, item) => sum + item.total_price, 0);\n                    const discountAmount = discountType === 'percentage' \n                      ? (subtotal * parseFloat(discount || 0)) / 100\n                      : parseFloat(discount || 0);\n                    return discountAmount.toFixed(2);\n                  })()}\n                </div>\n              </div>\n            </div>\n            \n            {/* Total Section */}\n            <div className=\"mt-4 p-4 bg-blue-50 rounded-lg\">\n              <div className=\"flex justify-between items-center mb-2\">\n                <span className=\"text-lg\">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ:</span>\n                <span className=\"text-lg font-semibold\">\n                  Ø¬.Ù… {items.reduce((sum, item) => sum + item.total_price, 0).toFixed(2)}\n                </span>\n              </div>\n              <div className=\"flex justify-between items-center mb-2\">\n                <span className=\"text-lg\">Ø§Ù„Ø®ØµÙ…:</span>\n                <span className=\"text-lg font-semibold text-red-600\">\n                  - Ø¬.Ù… {(() => {\n                    const subtotal = items.reduce((sum, item) => sum + item.total_price, 0);\n                    const discountAmount = discountType === 'percentage' \n                      ? (subtotal * parseFloat(discount || 0)) / 100\n                      : parseFloat(discount || 0);\n                    return discountAmount.toFixed(2);\n                  })()}\n                </span>\n              </div>\n              <hr className=\"my-2\" />\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-xl font-bold\">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:</span>\n                <span className=\"text-xl font-bold text-green-600\">\n                  Ø¬.Ù… {(() => {\n                    const subtotal = items.reduce((sum, item) => sum + item.total_price, 0);\n                    const discountAmount = discountType === 'percentage' \n                      ? (subtotal * parseFloat(discount || 0)) / 100\n                      : parseFloat(discount || 0);\n                    return (subtotal - discountAmount).toFixed(2);\n                  })()}\n                </span>\n              </div>\n            </div>\n            \n            <div className=\"text-xl font-bold\" style={{display: 'none'}}>\n              Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: Ø¬.Ù… {items.reduce((sum, item) => sum + item.total_price, 0).toFixed(2)}\n            </div>\n          </div>\n          \n          <button\n            onClick={createInvoice}\n            disabled={isCreatingInvoice}\n            className={`w-full p-3 rounded mt-4 text-lg font-semibold ${\n              isCreatingInvoice \n                ? 'bg-gray-400 text-gray-600 cursor-not-allowed' \n                : 'bg-green-500 text-white hover:bg-green-600'\n            }`}\n          >\n            {isCreatingInvoice ? 'Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©...' : 'Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©'}\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Simple placeholder components for other pages\n// Inventory Component will be replaced with new advanced version above\n\n// Stock Component (Old Inventory functionality for Raw Materials and Finished Products)\nconst Stock = () => {\n  const [rawMaterials, setRawMaterials] = useState([]);\n  const [finishedProducts, setFinishedProducts] = useState([]);\n  const [searchTerm, setSearchTerm] = useState(''); // Ù„Ù„Ø¨Ø­Ø«\n  const [newRawMaterial, setNewRawMaterial] = useState({\n    material_type: 'NBR',\n    inner_diameter: '',\n    outer_diameter: '',\n    height: '',\n    pieces_count: '',\n    cost_per_mm: ''\n  });\n  const [newFinishedProduct, setNewFinishedProduct] = useState({\n    seal_type: 'RSL',\n    material_type: 'NBR',\n    inner_diameter: '',\n    outer_diameter: '',\n    height: '',\n    quantity: '',\n    unit_price: ''\n  });\n\n  const materialTypes = ['NBR', 'BUR', 'BT', 'VT', 'BOOM'];\n  const sealTypes = ['RSL', 'RS', 'RSS', 'RSE', 'B17', 'B3', 'B14', 'B1', 'R15', 'R17', 'W1', 'W4', 'W5', 'W11', 'WBT', 'XR', 'CH', 'VR'];\n\n  // Ø¯Ø§Ù„Ø© ØªØµÙÙŠØ© Ø§Ù„Ø¨Ø­Ø«\n  const filteredRawMaterials = rawMaterials.filter(material => \n    material.material_type.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    material.unit_code.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    material.inner_diameter.toString().includes(searchTerm) ||\n    material.outer_diameter.toString().includes(searchTerm) ||\n    material.height.toString().includes(searchTerm)\n  ).sort((a, b) => {\n    // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\n    const materialPriority = { 'BUR': 1, 'NBR': 2, 'BT': 3, 'BOOM': 4, 'VT': 5 };\n    const aPriority = materialPriority[a.material_type] || 6;\n    const bPriority = materialPriority[b.material_type] || 6;\n    \n    if (aPriority !== bPriority) {\n      return aPriority - bPriority;\n    }\n    // Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)\n    if (a.inner_diameter !== b.inner_diameter) {\n      return a.inner_diameter - b.inner_diameter;\n    }\n    return a.outer_diameter - b.outer_diameter;\n  });\n\n  const filteredFinishedProducts = finishedProducts.filter(product => \n    product.seal_type.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    product.material_type.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    product.inner_diameter.toString().includes(searchTerm) ||\n    product.outer_diameter.toString().includes(searchTerm) ||\n    product.height.toString().includes(searchTerm)\n  ).sort((a, b) => {\n    // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\n    const materialPriority = { 'BUR': 1, 'NBR': 2, 'BT': 3, 'BOOM': 4, 'VT': 5 };\n    const aPriority = materialPriority[a.material_type] || 6;\n    const bPriority = materialPriority[b.material_type] || 6;\n    \n    if (aPriority !== bPriority) {\n      return aPriority - bPriority;\n    }\n    // Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)\n    if (a.inner_diameter !== b.inner_diameter) {\n      return a.inner_diameter - b.inner_diameter;\n    }\n    return a.outer_diameter - b.outer_diameter;\n  });\n\n  useEffect(() => {\n    fetchRawMaterials();\n    fetchFinishedProducts();\n  }, []);\n\n  const fetchRawMaterials = async () => {\n    try {\n      const response = await axios.get(`${API}/raw-materials`);\n      setRawMaterials(response.data);\n    } catch (error) {\n      console.error('Error fetching raw materials:', error);\n    }\n  };\n\n  const fetchFinishedProducts = async () => {\n    try {\n      const response = await axios.get(`${API}/finished-products`);\n      setFinishedProducts(response.data);\n    } catch (error) {\n      console.error('Error fetching finished products:', error);\n    }\n  };\n\n  const addRawMaterial = async () => {\n    if (!newRawMaterial.inner_diameter || !newRawMaterial.outer_diameter || !newRawMaterial.height || !newRawMaterial.pieces_count || !newRawMaterial.cost_per_mm) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      const rawMaterial = {\n        material_type: newRawMaterial.material_type,\n        inner_diameter: parseFloat(newRawMaterial.inner_diameter),\n        outer_diameter: parseFloat(newRawMaterial.outer_diameter),\n        height: parseFloat(newRawMaterial.height),\n        pieces_count: parseInt(newRawMaterial.pieces_count),\n        cost_per_mm: parseFloat(newRawMaterial.cost_per_mm)\n        // unit_code will be generated automatically by backend\n      };\n\n      let response;\n      if (newRawMaterial.id) {\n        // Update existing material\n        response = await axios.put(`${API}/raw-materials/${newRawMaterial.id}`, rawMaterial);\n        alert(`ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­. ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø©: ${response.data.unit_code}`);\n      } else {\n        // Add new material\n        response = await axios.post(`${API}/raw-materials`, rawMaterial);\n        alert(`ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­. ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø©: ${response.data.unit_code}`);\n      }\n\n      fetchRawMaterials();\n      setNewRawMaterial({\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        height: '',\n        pieces_count: '',\n        cost_per_mm: ''\n      });\n    } catch (error) {\n      console.error('Error saving raw material:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const clearAllRawMaterials = async () => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…ØŸ')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/raw-materials/clear-all`);\n      fetchRawMaterials();\n      alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…');\n    } catch (error) {\n      console.error('Error clearing raw materials:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…');\n    }\n  };\n\n  const deleteRawMaterial = async (materialId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…ØŸ')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/raw-materials/${materialId}`);\n      fetchRawMaterials();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…');\n    } catch (error) {\n      console.error('Error deleting raw material:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…');\n    }\n  };\n\n  const editRawMaterial = (material) => {\n    // Fill the form with the material data for editing\n    setNewRawMaterial({\n      id: material.id,\n      material_type: material.material_type,\n      inner_diameter: material.inner_diameter.toString(),\n      outer_diameter: material.outer_diameter.toString(),\n      height: material.height.toString(),\n      pieces_count: material.pieces_count.toString(),\n      cost_per_mm: material.cost_per_mm.toString()\n    });\n  };\n\n  const handleFileImport = async (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    const formData = new FormData();\n    formData.append('file', file);\n\n    try {\n      const response = await axios.post(`${API}/excel/import/raw-materials`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n\n      alert(response.data.message);\n      fetchRawMaterials(); // Refresh the raw materials list\n      event.target.value = ''; // Clear file input\n    } catch (error) {\n      console.error('Error importing file:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const handleFileExport = async () => {\n    try {\n      const response = await axios.get(`${API}/excel/export/raw-materials`, {\n        responseType: 'blob'\n      });\n\n      // Create download link\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', `raw_materials_export_${new Date().toISOString().split('T')[0]}.xlsx`);\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n    } catch (error) {\n      console.error('Error exporting file:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù');\n    }\n  };\n\n  const addFinishedProduct = async () => {\n    if (!newFinishedProduct.inner_diameter || !newFinishedProduct.outer_diameter || !newFinishedProduct.height || !newFinishedProduct.quantity || !newFinishedProduct.unit_price) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      const finishedProduct = {\n        seal_type: newFinishedProduct.seal_type,\n        material_type: newFinishedProduct.material_type,\n        inner_diameter: parseFloat(newFinishedProduct.inner_diameter),\n        outer_diameter: parseFloat(newFinishedProduct.outer_diameter),\n        height: parseFloat(newFinishedProduct.height),\n        quantity: parseInt(newFinishedProduct.quantity),\n        unit_price: parseFloat(newFinishedProduct.unit_price)\n      };\n\n      if (newFinishedProduct.id) {\n        // Update existing product\n        await axios.put(`${API}/finished-products/${newFinishedProduct.id}`, finishedProduct);\n        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¨Ù†Ø¬Ø§Ø­');\n      } else {\n        // Add new product\n        await axios.post(`${API}/finished-products`, finishedProduct);\n        alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¨Ù†Ø¬Ø§Ø­');\n      }\n\n      fetchFinishedProducts();\n      setNewFinishedProduct({\n        seal_type: 'RSL',\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        height: '',\n        quantity: '',\n        unit_price: ''\n      });\n    } catch (error) {\n      console.error('Error saving finished product:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ');\n    }\n  };\n\n  const editFinishedProduct = (product) => {\n    // Fill the form with the product data for editing\n    setNewFinishedProduct({\n      id: product.id,\n      seal_type: product.seal_type,\n      material_type: product.material_type,\n      inner_diameter: product.inner_diameter.toString(),\n      outer_diameter: product.outer_diameter.toString(),\n      height: product.height.toString(),\n      quantity: product.quantity.toString(),\n      unit_price: product.unit_price.toString()\n    });\n  };\n\n  const deleteFinishedProduct = async (productId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØŸ')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/finished-products/${productId}`);\n      fetchFinishedProducts();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ');\n    } catch (error) {\n      console.error('Error deleting finished product:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ');\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <h1 className=\"text-3xl font-bold mb-6\">Ù…Ø®Ø²Ù† Ø¥Ù†ØªØ§Ø¬</h1>\n      \n      {/* Raw Materials Section */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h3 className=\"text-lg font-semibold\">Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…</h3>\n          <div className=\"flex space-x-2 space-x-reverse\">\n            <button\n              onClick={clearAllRawMaterials}\n              className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\"\n            >\n              Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n            </button>\n          </div>\n        </div>\n\n        {/* Import/Export Section */}\n        <div className=\"bg-gray-50 p-4 rounded-lg mb-6\">\n          <h4 className=\"font-medium mb-4\">ğŸ“ Ø§Ø³ØªÙŠØ±Ø§Ø¯ ÙˆØªØµØ¯ÙŠØ± Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…</h4>\n          <div className=\"flex flex-wrap gap-4 items-center\">\n            <div className=\"flex items-center gap-2\">\n              <label className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 cursor-pointer\">\n                ğŸ“¤ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù† Excel\n                <input\n                  type=\"file\"\n                  accept=\".xlsx,.xls\"\n                  onChange={handleFileImport}\n                  className=\"hidden\"\n                />\n              </label>\n              <span className=\"text-sm text-gray-600\">(.xlsx Ø£Ùˆ .xls)</span>\n            </div>\n            \n            <button\n              onClick={handleFileExport}\n              className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n            >\n              ğŸ“¥ ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ Excel\n            </button>\n            \n            <div className=\"text-sm text-gray-600 bg-white p-2 rounded border\">\n              <strong>ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:</strong><br/>\n              material_type, inner_diameter, outer_diameter, height, pieces_count, unit_code, cost_per_mm\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</label>\n            <select\n              value={newRawMaterial.material_type}\n              onChange={(e) => setNewRawMaterial({...newRawMaterial, material_type: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              {materialTypes.map(type => (\n                <option key={type} value={type}>{type}</option>\n              ))}\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</label>\n            <input\n              type=\"number\"\n              value={newRawMaterial.inner_diameter}\n              onChange={(e) => setNewRawMaterial({...newRawMaterial, inner_diameter: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</label>\n            <input\n              type=\"number\"\n              value={newRawMaterial.outer_diameter}\n              onChange={(e) => setNewRawMaterial({...newRawMaterial, outer_diameter: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ (Ù…Ù…)</label>\n            <input\n              type=\"number\"\n              value={newRawMaterial.height}\n              onChange={(e) => setNewRawMaterial({...newRawMaterial, height: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹</label>\n            <input\n              type=\"number\"\n              value={newRawMaterial.pieces_count}\n              onChange={(e) => setNewRawMaterial({...newRawMaterial, pieces_count: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ØªÙƒÙ„ÙØ© Ø§Ù„Ù…Ù„Ù„ÙŠ</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newRawMaterial.cost_per_mm}\n              onChange={(e) => setNewRawMaterial({...newRawMaterial, cost_per_mm: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n        </div>\n        \n        <p className=\"text-sm text-gray-600 mt-4\">\n          Ù…Ù„Ø§Ø­Ø¸Ø©: Ø³ÙŠØªÙ… ØªÙˆÙ„ÙŠØ¯ ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø© ÙˆØ§Ù„Ù…ÙˆØ§ØµÙØ§Øª\n        </p>\n        \n        <button\n          onClick={addRawMaterial}\n          className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mb-4\"\n        >\n          Ø¥Ø¶Ø§ÙØ© Ù…Ø§Ø¯Ø© Ø®Ø§Ù…\n        </button>\n\n        {/* Ø­Ù‚Ù„ Ø§Ù„Ø¨Ø­Ø« */}\n        <div className=\"mb-4\">\n          <input\n            type=\"text\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            placeholder=\"Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù… (Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©ØŒ ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø©ØŒ Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª...)\"\n            className=\"w-full p-3 border border-gray-300 rounded-lg\"\n          />\n        </div>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø§Ø±ØªÙØ§Ø¹</th>\n                <th className=\"border border-gray-300 p-2\">Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹</th>\n                <th className=\"border border-gray-300 p-2\">ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø©</th>\n                <th className=\"border border-gray-300 p-2\">ØªÙƒÙ„ÙØ© Ø§Ù„Ù…Ù„Ù„ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredRawMaterials.map(material => (\n                <tr key={material.id}>\n                  <td className=\"border border-gray-300 p-2\">{material.material_type}</td>\n                  <td className=\"border border-gray-300 p-2\">{material.inner_diameter}</td>\n                  <td className=\"border border-gray-300 p-2\">{material.outer_diameter}</td>\n                  <td className=\"border border-gray-300 p-2\">{material.height}</td>\n                  <td className=\"border border-gray-300 p-2\">{material.pieces_count}</td>\n                  <td className=\"border border-gray-300 p-2\">{material.unit_code}</td>\n                  <td className=\"border border-gray-300 p-2\">{material.cost_per_mm}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex space-x-2 space-x-reverse\">\n                      <button\n                        onClick={() => editRawMaterial(material)}\n                        className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                        title=\"ØªØ­Ø±ÙŠØ±\"\n                      >\n                        âœï¸\n                      </button>\n                      <button\n                        onClick={() => deleteRawMaterial(material.id)}\n                        className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                        title=\"Ø­Ø°Ù\"\n                      >\n                        ğŸ—‘ï¸\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Finished Products Section */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ø§Ù„ØªØ§Ù…</h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„</label>\n            <select\n              value={newFinishedProduct.seal_type}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, seal_type: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              {sealTypes.map(type => (\n                <option key={type} value={type}>{type}</option>\n              ))}\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</label>\n            <select\n              value={newFinishedProduct.material_type}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, material_type: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              {materialTypes.map(type => (\n                <option key={type} value={type}>{type}</option>\n              ))}\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</label>\n            <input\n              type=\"number\"\n              value={newFinishedProduct.inner_diameter}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, inner_diameter: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</label>\n            <input\n              type=\"number\"\n              value={newFinishedProduct.outer_diameter}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, outer_diameter: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø³ÙŠÙ„</label>\n            <input\n              type=\"number\"\n              value={newFinishedProduct.height}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, height: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ÙƒÙ…ÙŠØ©</label>\n            <input\n              type=\"number\"\n              value={newFinishedProduct.quantity}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, quantity: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newFinishedProduct.unit_price}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, unit_price: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n        </div>\n        \n        <button\n          onClick={addFinishedProduct}\n          className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 mb-4\"\n        >\n          Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ù†Ù‡Ø§Ø¦ÙŠ\n        </button>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„</th>\n                <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø§Ø±ØªÙØ§Ø¹</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙƒÙ…ÙŠØ©</th>\n                <th className=\"border border-gray-300 p-2\">Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredFinishedProducts.map(product => (\n                <tr key={product.id}>\n                  <td className=\"border border-gray-300 p-2\">{product.seal_type}</td>\n                  <td className=\"border border-gray-300 p-2\">{product.material_type}</td>\n                  <td className=\"border border-gray-300 p-2\">{product.inner_diameter}</td>\n                  <td className=\"border border-gray-300 p-2\">{product.outer_diameter}</td>\n                  <td className=\"border border-gray-300 p-2\">{product.height}</td>\n                  <td className=\"border border-gray-300 p-2\">{product.quantity}</td>\n                  <td className=\"border border-gray-300 p-2\">{product.unit_price}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex space-x-2 space-x-reverse\">\n                      <button\n                        onClick={() => editFinishedProduct(product)}\n                        className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                        title=\"ØªØ­Ø±ÙŠØ±\"\n                      >\n                        âœï¸\n                      </button>\n                      <button\n                        onClick={() => deleteFinishedProduct(product.id)}\n                        className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                        title=\"Ø­Ø°Ù\"\n                      >\n                        ğŸ—‘ï¸\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Deferred Payments Component\nconst Deferred = () => {\n  const [unpaidInvoices, setUnpaidInvoices] = useState([]);\n  const [customers, setCustomers] = useState([]);\n  const [selectedInvoice, setSelectedInvoice] = useState(null);\n  const [paymentAmount, setPaymentAmount] = useState('');\n  const [paymentMethod, setPaymentMethod] = useState('Ù†Ù‚Ø¯ÙŠ');\n  const [paymentNotes, setPaymentNotes] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  \n  // Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª Ù„ÙƒÙ„ Ø¹Ù…ÙŠÙ„\n  const [customerTotals, setCustomerTotals] = useState({});\n\n  useEffect(() => {\n    fetchUnpaidInvoices();\n    fetchCustomers();\n  }, []);\n\n  useEffect(() => {\n    // Ø­Ø³Ø§Ø¨ Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\n    const totals = {};\n    filteredInvoices.forEach(invoice => {\n      const customerName = invoice.customer_name;\n      if (!totals[customerName]) {\n        totals[customerName] = {\n          totalAmount: 0,\n          invoiceCount: 0\n        };\n      }\n      totals[customerName].totalAmount += invoice.remaining_amount || invoice.total_amount;\n      totals[customerName].invoiceCount += 1;\n    });\n    setCustomerTotals(totals);\n  }, [unpaidInvoices, searchTerm]);\n  \n  // ÙÙ„ØªØ±Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø­Ø³Ø¨ Ø§Ù„Ø¨Ø­Ø«\n  const filteredInvoices = unpaidInvoices.filter(invoice => \n    invoice.customer_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    invoice.invoice_number.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    (invoice.invoice_title && invoice.invoice_title.toLowerCase().includes(searchTerm.toLowerCase()))\n  );\n\n  useEffect(() => {\n    fetchUnpaidInvoices();\n    fetchCustomers();\n  }, []);\n\n  const fetchUnpaidInvoices = async () => {\n    try {\n      const response = await axios.get(`${API}/invoices`);\n      const invoices = response.data.filter(invoice => \n        // ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¢Ø¬Ù„Ø© Ø£Ùˆ Ù„Ù‡Ø§ Ù…Ø¨Ù„Øº Ù…Ø³ØªØ­Ù‚\n        (invoice.payment_method === 'Ø¢Ø¬Ù„' || invoice.remaining_amount > 0) &&\n        (invoice.status === 'ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©' || \n         invoice.status === 'Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹' || \n         invoice.status === 'Ø§Ù†ØªØ¸Ø§Ø±' ||\n         invoice.remaining_amount > 0)\n      );\n      setUnpaidInvoices(invoices);\n    } catch (error) {\n      console.error('Error fetching unpaid invoices:', error);\n    }\n  };\n\n  const fetchCustomers = async () => {\n    try {\n      const response = await axios.get(`${API}/customers`);\n      // Sort customers alphabetically by name\n      const sortedCustomers = (response.data || []).sort((a, b) => \n        a.name.localeCompare(b.name, 'ar')\n      );\n      setCustomers(sortedCustomers);\n    } catch (error) {\n      console.error('Error fetching customers:', error);\n    }\n  };\n\n  const getCustomerName = (customerId) => {\n    const customer = customers.find(c => c.id === customerId);\n    return customer ? customer.name : 'Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…Ø­Ø¯Ø¯';\n  };\n\n  const makePayment = async () => {\n    if (!selectedInvoice || !paymentAmount) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙˆØ¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº');\n      return;\n    }\n\n    if (parseFloat(paymentAmount) > selectedInvoice.remaining_amount) {\n      alert('Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯Ø®Ù„ Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚');\n      return;\n    }\n\n    try {\n      await axios.post(`${API}/payments`, {\n        invoice_id: selectedInvoice.id,\n        amount: parseFloat(paymentAmount),\n        payment_method: paymentMethod,\n        notes: paymentNotes\n      });\n\n      setPaymentAmount('');\n      setPaymentNotes('');\n      setSelectedInvoice(null);\n      fetchUnpaidInvoices();\n      alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø© Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error making payment:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø©');\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n        <div className=\"flex flex-col md:flex-row md:items-center justify-between mb-4\">\n          <h3 className=\"text-xl font-bold text-blue-600 mb-2 md:mb-0\">Ø§Ù„Ø¢Ø¬Ù„ - Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª</h3>\n          <div className=\"flex space-x-2 space-x-reverse\">\n            <button \n              onClick={() => window.print()} \n              className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\">\n              Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n            </button>\n            <select className=\"border border-gray-300 rounded px-3 py-2\">\n              <option>ÙŠÙˆÙ…ÙŠ</option>\n              <option>Ø£Ø³Ø¨ÙˆØ¹ÙŠ</option>\n              <option>Ø´Ù‡Ø±ÙŠ</option>\n              <option>Ø³Ù†ÙˆÙŠ</option>\n            </select>\n          </div>\n        </div>\n        \n        {/* Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« ÙˆØ¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ */}\n        <div className=\"bg-gray-50 p-4 rounded-lg mb-4\">\n          <div className=\"mb-3\">\n            <input\n              type=\"text\"\n              placeholder=\"Ø¨Ø­Ø« Ø¨Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø£Ùˆ Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø£Ùˆ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          {/* Ø¹Ø±Ø¶ Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ */}\n          {Object.keys(customerTotals).length > 0 && (\n            <div className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3\">\n              {Object.entries(customerTotals).map(([customerName, totals]) => (\n                <div key={customerName} className=\"bg-white p-3 rounded border text-center\">\n                  <div className=\"font-semibold text-blue-800 text-sm\">{customerName}</div>\n                  <div className=\"text-xs text-blue-600\">\n                    {totals.invoiceCount} ÙØ§ØªÙˆØ±Ø©\n                  </div>\n                  <div className=\"text-sm font-bold text-green-600\">\n                    {totals.totalAmount.toFixed(2)} Ø¬.Ù…\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n\n      {/* Payment Form */}\n      {selectedInvoice && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n          <h3 className=\"text-lg font-semibold mb-4\">ØªØ³Ø¬ÙŠÙ„ Ø¯ÙØ¹Ø©</h3>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</label>\n              <input\n                type=\"text\"\n                value={selectedInvoice.invoice_number}\n                disabled\n                className=\"w-full p-2 border border-gray-300 rounded bg-gray-100\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø¹Ù…ÙŠÙ„</label>\n              <input\n                type=\"text\"\n                value={selectedInvoice.customer_name}\n                disabled\n                className=\"w-full p-2 border border-gray-300 rounded bg-gray-100\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚</label>\n              <input\n                type=\"text\"\n                value={`Ø¬.Ù… ${selectedInvoice.remaining_amount?.toFixed(2) || '0.00'}`}\n                disabled\n                className=\"w-full p-2 border border-gray-300 rounded bg-gray-100\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ù…Ø¨Ù„Øº Ø§Ù„Ø¯ÙØ¹Ø©</label>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                value={paymentAmount}\n                onChange={(e) => setPaymentAmount(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n                placeholder=\"0.00\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</label>\n              <select\n                value={paymentMethod}\n                onChange={(e) => setPaymentMethod(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              >\n                <option value=\"Ù†Ù‚Ø¯ÙŠ\">Ù†Ù‚Ø¯ÙŠ</option>\n                <option value=\"ÙÙˆØ¯Ø§ÙÙˆÙ† 010\">ÙÙˆØ¯Ø§ÙÙˆÙ† 010</option>\n                <option value=\"ÙƒØ§Ø´ 0100\">ÙƒØ§Ø´ 0100</option>\n                <option value=\"Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ\">Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ</option>\n              </select>\n            </div>\n            \n            <div className=\"md:col-span-2\">\n              <label className=\"block text-sm font-medium mb-1\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>\n              <input\n                type=\"text\"\n                value={paymentNotes}\n                onChange={(e) => setPaymentNotes(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n                placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n              />\n            </div>\n          </div>\n          \n          <div className=\"flex space-x-4 space-x-reverse\">\n            <button\n              onClick={makePayment}\n              className=\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\"\n            >\n              ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø©\n            </button>\n            <button\n              onClick={() => setSelectedInvoice(null)}\n              className=\"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600\"\n            >\n              Ø¥Ù„ØºØ§Ø¡\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Unpaid Invoices */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø§Ù„ÙÙˆØ§ØªÙŠØ± ØºÙŠØ± Ø§Ù„Ù…Ø³Ø¯Ø¯Ø©</h3>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¹Ù…ÙŠÙ„</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø¯ÙÙˆØ¹</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø³ØªØ­Ù‚</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø§Ù„Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredInvoices.map((invoice) => (\n                <tr key={invoice.id}>\n                  <td className=\"border border-gray-300 p-2\">{invoice.invoice_number}</td>\n                  <td className=\"border border-gray-300 p-2\">{invoice.customer_name}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    {new Date(invoice.date).toLocaleDateString('ar-EG')}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {invoice.total_amount?.toFixed(2) || '0.00'}</td>\n                  <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {invoice.paid_amount?.toFixed(2) || '0.00'}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className=\"font-bold text-red-600\">\n                      Ø¬.Ù… {invoice.remaining_amount?.toFixed(2) || '0.00'}\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className={`px-2 py-1 rounded text-sm ${\n                      invoice.status === 'ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©' ? 'bg-red-100 text-red-800' :\n                      invoice.status === 'Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹' ? 'bg-yellow-100 text-yellow-800' :\n                      'bg-green-100 text-green-800'\n                    }`}>\n                      {invoice.status}\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex space-x-2 space-x-reverse\">\n                      <button\n                        onClick={() => setSelectedInvoice(invoice)}\n                        className=\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\"\n                      >\n                        Ø¹Ø±Ø¶ Ø§Ù„Ø¯ÙØ¹Ø§Øª\n                      </button>\n                      <button\n                        onClick={() => setSelectedInvoice(invoice)}\n                        className=\"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600\"\n                      >\n                        Ø¯ÙØ¹\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n          \n          {filteredInvoices.length === 0 && (\n            <div className=\"text-center py-8 text-gray-500\">\n              Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙˆØ§ØªÙŠØ± ØºÙŠØ± Ù…Ø³Ø¯Ø¯Ø©\n            </div>\n          )}\n        </div>\n\n        {/* Summary */}\n        <div className=\"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"bg-red-50 p-4 rounded\">\n            <h4 className=\"font-semibold text-red-800\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø©</h4>\n            <p className=\"text-2xl font-bold text-red-600\">\n              Ø¬.Ù… {filteredInvoices.reduce((sum, inv) => sum + (inv.remaining_amount || 0), 0).toFixed(2)}\n            </p>\n          </div>\n          \n          <div className=\"bg-yellow-50 p-4 rounded\">\n            <h4 className=\"font-semibold text-yellow-800\">Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©</h4>\n            <p className=\"text-2xl font-bold text-yellow-600\">{filteredInvoices.length}</p>\n          </div>\n          \n          <div className=\"bg-blue-50 p-4 rounded\">\n            <h4 className=\"font-semibold text-blue-800\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø£ØµÙ„ÙŠ</h4>\n            <p className=\"text-2xl font-bold text-blue-600\">\n              Ø¬.Ù… {filteredInvoices.reduce((sum, inv) => sum + (inv.total_amount || 0), 0).toFixed(2)}\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Expenses Component\nconst Expenses = () => {\n  const [expenses, setExpenses] = useState([]);\n  const [newExpense, setNewExpense] = useState({\n    description: '',\n    amount: '',\n    category: 'Ø®Ø§Ù…Ø§Øª'\n  });\n\n  const expenseCategories = ['Ø®Ø§Ù…Ø§Øª', 'Ø±ÙˆØ§ØªØ¨', 'ÙƒÙ‡Ø±Ø¨Ø§Ø¡', 'ØµÙŠØ§Ù†Ø©', 'Ø£Ø®Ø±Ù‰'];\n\n  useEffect(() => {\n    fetchExpenses();\n  }, []);\n\n  const fetchExpenses = async () => {\n    try {\n      const response = await axios.get(`${API}/expenses`);\n      setExpenses(response.data);\n    } catch (error) {\n      console.error('Error fetching expenses:', error);\n    }\n  };\n\n  const addExpense = async () => {\n    if (!newExpense.description || !newExpense.amount) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      await axios.post(`${API}/expenses`, {\n        ...newExpense,\n        amount: parseFloat(newExpense.amount)\n      });\n\n      setNewExpense({\n        description: '',\n        amount: '',\n        category: 'Ø®Ø§Ù…Ø§Øª'\n      });\n\n      fetchExpenses();\n      alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ØµØ±ÙˆÙ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error adding expense:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ØµØ±ÙˆÙ');\n    }\n  };\n\n  const deleteExpense = async (expenseId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ØµØ±ÙˆÙØŸ')) return;\n\n    try {\n      await axios.delete(`${API}/expenses/${expenseId}`);\n      fetchExpenses();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ØµØ±ÙˆÙ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting expense:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ØµØ±ÙˆÙ');\n    }\n  };\n\n  const getTotalExpenses = () => {\n    return expenses.reduce((sum, expense) => sum + expense.amount, 0);\n  };\n\n  const getExpensesByCategory = () => {\n    const byCategory = {};\n    expenseCategories.forEach(cat => {\n      byCategory[cat] = expenses\n        .filter(exp => exp.category === cat)\n        .reduce((sum, exp) => sum + exp.amount, 0);\n    });\n    return byCategory;\n  };\n\n  const clearAllExpenses = async () => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§ØªØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) return;\n    \n    try {\n      await axios.delete(`${API}/expenses/clear-all`);\n      fetchExpenses();\n      alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª');\n    } catch (error) {\n      console.error('Error clearing expenses:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-blue-600 mb-4\">Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h2>\n        \n        <div className=\"flex space-x-4 space-x-reverse mb-4\">\n          <button \n            onClick={clearAllExpenses}\n            className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n            Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n          </button>\n          <button \n            onClick={fetchExpenses}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n            Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => window.print()}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n            Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n          <select className=\"border border-gray-300 rounded px-3 py-2\">\n            <option>ÙŠÙˆÙ…ÙŠ</option>\n            <option>Ø£Ø³Ø¨ÙˆØ¹ÙŠ</option>\n            <option>Ø´Ù‡Ø±ÙŠ</option>\n            <option>Ø³Ù†ÙˆÙŠ</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Add New Expense */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ Ø¬Ø¯ÙŠØ¯</h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ÙˆØµÙ Ø§Ù„Ù…ØµØ±ÙˆÙ</label>\n            <input\n              type=\"text\"\n              value={newExpense.description}\n              onChange={(e) => setNewExpense({...newExpense, description: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"Ù…Ø«Ø§Ù„: Ø´Ø±Ø§Ø¡ Ø®Ø§Ù…Ø§ØªØŒ ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ø§Ù„Ù…ØµÙ†Ø¹\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù…Ø¨Ù„Øº</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newExpense.amount}\n              onChange={(e) => setNewExpense({...newExpense, amount: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"0.00\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ÙØ¦Ø©</label>\n            <select\n              value={newExpense.category}\n              onChange={(e) => setNewExpense({...newExpense, category: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              {expenseCategories.map(category => (\n                <option key={category} value={category}>{category}</option>\n              ))}\n            </select>\n          </div>\n        </div>\n        \n        <button\n          onClick={addExpense}\n          className=\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\"\n        >\n          Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ØµØ±ÙˆÙ\n        </button>\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6\">\n        <div className=\"bg-red-50 p-6 rounded-lg\">\n          <h3 className=\"text-lg font-semibold text-red-800 mb-2\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>\n          <p className=\"text-3xl font-bold text-red-600\">\n            Ø¬.Ù… {getTotalExpenses().toFixed(2)}\n          </p>\n        </div>\n        \n        <div className=\"bg-blue-50 p-6 rounded-lg\">\n          <h3 className=\"text-lg font-semibold text-blue-800 mb-2\">Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>\n          <p className=\"text-3xl font-bold text-blue-600\">{expenses.length}</p>\n        </div>\n        \n        <div className=\"bg-yellow-50 p-6 rounded-lg\">\n          <h3 className=\"text-lg font-semibold text-yellow-800 mb-2\">Ù…ØªÙˆØ³Ø· Ø§Ù„Ù…ØµØ±ÙˆÙ</h3>\n          <p className=\"text-3xl font-bold text-yellow-600\">\n            Ø¬.Ù… {expenses.length > 0 ? (getTotalExpenses() / expenses.length).toFixed(2) : '0.00'}\n          </p>\n        </div>\n      </div>\n\n      {/* Expenses by Category */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©</h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\">\n          {Object.entries(getExpensesByCategory()).map(([category, amount]) => (\n            <div key={category} className=\"text-center p-4 border rounded\">\n              <h4 className=\"font-medium text-gray-700\">{category}</h4>\n              <p className=\"text-xl font-bold text-blue-600\">Ø¬.Ù… {amount.toFixed(2)}</p>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Expenses List */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙˆØµÙ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø¨Ù„Øº</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙØ¦Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {expenses.map((expense) => (\n                <tr key={expense.id}>\n                  <td className=\"border border-gray-300 p-2\">{expense.description}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className=\"font-semibold text-red-600\">\n                      Ø¬.Ù… {expense.amount.toFixed(2)}\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className={`px-2 py-1 rounded text-sm ${\n                      expense.category === 'Ø®Ø§Ù…Ø§Øª' ? 'bg-blue-100 text-blue-800' :\n                      expense.category === 'Ø±ÙˆØ§ØªØ¨' ? 'bg-green-100 text-green-800' :\n                      expense.category === 'ÙƒÙ‡Ø±Ø¨Ø§Ø¡' ? 'bg-yellow-100 text-yellow-800' :\n                      expense.category === 'ØµÙŠØ§Ù†Ø©' ? 'bg-purple-100 text-purple-800' :\n                      'bg-gray-100 text-gray-800'\n                    }`}>\n                      {expense.category}\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    {new Date(expense.date).toLocaleDateString('ar-EG')}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <button \n                      onClick={() => deleteExpense(expense.id)}\n                      className=\"bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600\">\n                      Ø­Ø°Ù\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n          \n          {expenses.length === 0 && (\n            <div className=\"text-center py-8 text-gray-500\">\n              Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ØµØ±ÙˆÙØ§Øª Ù…Ø³Ø¬Ù„Ø©\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Revenue Component\nconst Revenue = () => {\n  const [revenueData, setRevenueData] = useState({\n    total_revenue: 0,\n    total_expenses: 0,\n    material_cost: 0,\n    profit: 0\n  });\n  const [period, setPeriod] = useState('daily');\n\n  useEffect(() => {\n    fetchRevenueData();\n  }, [period]);\n\n  const fetchRevenueData = async () => {\n    try {\n      const response = await axios.get(`${API}/reports/revenue?period=${period}`);\n      setRevenueData(response.data);\n    } catch (error) {\n      console.error('Error fetching revenue data:', error);\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-blue-600 mb-4\">Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</h2>\n        \n        <div className=\"flex space-x-4 space-x-reverse mb-4\">\n          <button className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n            Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n          </button>\n          <button \n            onClick={fetchRevenueData}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n            Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => window.print()}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n            Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n          <select \n            value={period}\n            onChange={(e) => setPeriod(e.target.value)}\n            className=\"border border-gray-300 rounded px-3 py-2\">\n            <option value=\"daily\">Ø§Ù„ÙŠÙˆÙ…</option>\n            <option value=\"weekly\">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</option>\n            <option value=\"monthly\">Ø§Ù„Ø´Ù‡Ø±</option>\n            <option value=\"yearly\">Ø§Ù„Ø³Ù†Ø©</option>\n          </select>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {/* Revenue Cards */}\n        <div className=\"bg-green-50 p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold text-green-800 text-center mb-2\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</h3>\n          <p className=\"text-3xl font-bold text-green-600 text-center\">\n            Ø¬.Ù… {revenueData.total_revenue?.toFixed(2) || '0.00'}\n          </p>\n        </div>\n        \n        <div className=\"bg-red-50 p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold text-red-800 text-center mb-2\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>\n          <p className=\"text-3xl font-bold text-red-600 text-center\">\n            Ø¬.Ù… {revenueData.total_expenses?.toFixed(2) || '0.00'}\n          </p>\n        </div>\n        \n        <div className=\"bg-yellow-50 p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold text-yellow-800 text-center mb-2\">ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø§Ù…Ø§Øª</h3>\n          <p className=\"text-3xl font-bold text-yellow-600 text-center\">\n            Ø¬.Ù… {revenueData.material_cost?.toFixed(2) || '0.00'}\n          </p>\n        </div>\n        \n        <div className=\"bg-blue-50 p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold text-blue-800 text-center mb-2\">ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­</h3>\n          <p className={`text-3xl font-bold text-center ${\n            (revenueData.profit || 0) >= 0 ? 'text-blue-600' : 'text-red-600'\n          }`}>\n            Ø¬.Ù… {revenueData.profit?.toFixed(2) || '0.00'}\n          </p>\n        </div>\n      </div>\n\n      {/* Summary Table */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mt-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª - {\n          period === 'daily' ? 'ÙŠÙˆÙ…ÙŠ' :\n          period === 'weekly' ? 'Ø£Ø³Ø¨ÙˆØ¹ÙŠ' :\n          period === 'monthly' ? 'Ø´Ù‡Ø±ÙŠ' : 'Ø³Ù†ÙˆÙŠ'\n        }</h3>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-3\">Ø§Ù„Ø¨ÙŠØ§Ù†</th>\n                <th className=\"border border-gray-300 p-3\">Ø§Ù„Ù…Ø¨Ù„Øº (Ø¬.Ù…)</th>\n                <th className=\"border border-gray-300 p-3\">Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ©</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td className=\"border border-gray-300 p-3 font-semibold\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</td>\n                <td className=\"border border-gray-300 p-3 text-green-600 font-bold\">\n                  {revenueData.total_revenue?.toFixed(2) || '0.00'}\n                </td>\n                <td className=\"border border-gray-300 p-3\">100%</td>\n              </tr>\n              <tr>\n                <td className=\"border border-gray-300 p-3\">ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø§Ù…Ø§Øª</td>\n                <td className=\"border border-gray-300 p-3 text-yellow-600 font-semibold\">\n                  -{revenueData.material_cost?.toFixed(2) || '0.00'}\n                </td>\n                <td className=\"border border-gray-300 p-3\">\n                  {revenueData.total_revenue > 0 \n                    ? ((revenueData.material_cost / revenueData.total_revenue) * 100).toFixed(1) \n                    : '0.0'}%\n                </td>\n              </tr>\n              <tr>\n                <td className=\"border border-gray-300 p-3\">Ù…ØµØ±ÙˆÙØ§Øª Ø£Ø®Ø±Ù‰</td>\n                <td className=\"border border-gray-300 p-3 text-red-600 font-semibold\">\n                  -{((revenueData.total_expenses || 0) - (revenueData.material_cost || 0)).toFixed(2)}\n                </td>\n                <td className=\"border border-gray-300 p-3\">\n                  {revenueData.total_revenue > 0 \n                    ? (((revenueData.total_expenses - revenueData.material_cost) / revenueData.total_revenue) * 100).toFixed(1) \n                    : '0.0'}%\n                </td>\n              </tr>\n              <tr className=\"bg-blue-50\">\n                <td className=\"border border-gray-300 p-3 font-bold\">ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­</td>\n                <td className={`border border-gray-300 p-3 font-bold ${\n                  (revenueData.profit || 0) >= 0 ? 'text-blue-600' : 'text-red-600'\n                }`}>\n                  {revenueData.profit?.toFixed(2) || '0.00'}\n                </td>\n                <td className=\"border border-gray-300 p-3 font-bold\">\n                  {revenueData.total_revenue > 0 \n                    ? ((revenueData.profit / revenueData.total_revenue) * 100).toFixed(1) \n                    : '0.0'}%\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Performance Indicators */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mt-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡</h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"text-center p-4 border rounded\">\n            <h4 className=\"font-medium text-gray-700 mb-2\">Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­</h4>\n            <p className={`text-2xl font-bold ${\n              (revenueData.profit || 0) >= 0 ? 'text-green-600' : 'text-red-600'\n            }`}>\n              {revenueData.total_revenue > 0 \n                ? ((revenueData.profit / revenueData.total_revenue) * 100).toFixed(1) \n                : '0.0'}%\n            </p>\n          </div>\n          \n          <div className=\"text-center p-4 border rounded\">\n            <h4 className=\"font-medium text-gray-700 mb-2\">Ù†Ø³Ø¨Ø© ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø§Ù…Ø§Øª</h4>\n            <p className=\"text-2xl font-bold text-yellow-600\">\n              {revenueData.total_revenue > 0 \n                ? ((revenueData.material_cost / revenueData.total_revenue) * 100).toFixed(1) \n                : '0.0'}%\n            </p>\n          </div>\n          \n          <div className=\"text-center p-4 border rounded\">\n            <h4 className=\"font-medium text-gray-700 mb-2\">Ù†Ø³Ø¨Ø© Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©</h4>\n            <p className=\"text-2xl font-bold text-red-600\">\n              {revenueData.total_revenue > 0 \n                ? ((revenueData.total_expenses / revenueData.total_revenue) * 100).toFixed(1) \n                : '0.0'}%\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Invoices Component\nconst Invoices = () => {\n  const { user } = useAuth();\n  const [invoices, setInvoices] = useState([]);\n  const [customers, setCustomers] = useState([]);\n  const [filterStatus, setFilterStatus] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [editingInvoice, setEditingInvoice] = useState(null);\n  const [editForm, setEditForm] = useState({\n    invoice_title: '',\n    supervisor_name: '',\n    customer_name: '',\n    payment_method: 'Ù†Ù‚Ø¯ÙŠ',\n    discount_type: 'amount',\n    discount_value: 0,\n    items: [],\n    notes: ''\n  });\n  \n  // Password protection states\n  const [showPasswordModal, setShowPasswordModal] = useState(false);\n  const [operationPassword, setOperationPassword] = useState('');\n  const [pendingOperation, setPendingOperation] = useState(null); // {type: 'cancel'|'edit'|'changePayment', data: ...}\n\n  useEffect(() => {\n    fetchInvoices();\n    fetchCustomers();\n  }, []);\n\n  const fetchInvoices = async () => {\n    try {\n      console.log('Fetching invoices...');\n      const response = await axios.get(`${API}/invoices`);\n      console.log('Invoices fetched:', response.data.length, 'invoices');\n      setInvoices(response.data);\n    } catch (error) {\n      console.error('Error fetching invoices:', error);\n      alert('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙˆØ§ØªÙŠØ±: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const fetchCustomers = async () => {\n    try {\n      const response = await axios.get(`${API}/customers`);\n      // Sort customers alphabetically by name\n      const sortedCustomers = (response.data || []).sort((a, b) => \n        a.name.localeCompare(b.name, 'ar')\n      );\n      setCustomers(sortedCustomers);\n    } catch (error) {\n      console.error('Error fetching customers:', error);\n    }\n  };\n\n  // Request password for operation\n  const requestPasswordFor = (operationType, operationData) => {\n    setPendingOperation({ type: operationType, data: operationData });\n    setOperationPassword('');\n    setShowPasswordModal(true);\n  };\n\n  // Execute operation after password verification\n  const executeOperation = async () => {\n    if (!operationPassword) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');\n      return;\n    }\n\n    if (!pendingOperation) {\n      alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ© Ù…Ø¹Ù„Ù‚Ø©');\n      return;\n    }\n\n    try {\n      if (pendingOperation.type === 'cancel') {\n        await executeCancelInvoice(pendingOperation.data, operationPassword);\n      } else if (pendingOperation.type === 'edit') {\n        await executeUpdateInvoice(operationPassword);\n      } else if (pendingOperation.type === 'changePayment') {\n        await executeChangePaymentMethod(pendingOperation.data.invoiceId, pendingOperation.data.newMethod, operationPassword);\n      }\n      \n      setShowPasswordModal(false);\n      setPendingOperation(null);\n      setOperationPassword('');\n    } catch (error) {\n      console.error('Operation error:', error);\n      alert(error.response?.data?.detail || error.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');\n    }\n  };\n\n  // Execute cancel with password\n  const executeCancelInvoice = async (invoiceId, password) => {\n    const response = await axios.delete(`${API}/invoices/${invoiceId}/cancel`, {\n      params: { \n        password: password,\n        username: user?.username\n      }\n    });\n    \n    alert(response.data.message);\n    fetchInvoices();\n  };\n\n  // Execute update with password\n  const executeUpdateInvoice = async (password) => {\n    const response = await axios.put(\n      `${API}/invoices/${editingInvoice}`,\n      editForm,\n      { params: { password: password } }\n    );\n    \n    alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');\n    setEditingInvoice(null);\n    fetchInvoices();\n  };\n\n  // Execute change payment method with password\n  const executeChangePaymentMethod = async (invoiceId, newMethod, password) => {\n    await axios.put(`${API}/invoices/${invoiceId}/change-payment-method`, null, {\n      params: {\n        new_payment_method: newMethod,\n        password: password\n      }\n    });\n    \n    alert('ØªÙ… ØªØºÙŠÙŠØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ø¨Ù†Ø¬Ø§Ø­');\n    fetchInvoices();\n  };\n\n  // Change payment method function\n  const changePaymentMethod = async (invoiceId) => {\n    const paymentMethods = [\n      { value: 'Ù†Ù‚Ø¯ÙŠ', label: 'Ù†Ù‚Ø¯ÙŠ' },\n      { value: 'Ø¢Ø¬Ù„', label: 'Ø¢Ø¬Ù„' },\n      { value: 'ÙÙˆØ¯Ø§ÙÙˆÙ† 010', label: 'ÙÙˆØ¯Ø§ÙÙˆÙ† 010' },\n      { value: 'ÙƒØ§Ø´ 0100', label: 'ÙƒØ§Ø´ 0100' },\n      { value: 'Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ', label: 'Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ' },\n      { value: 'ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ', label: 'ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ' }\n    ];\n\n    const invoice = invoices.find(inv => inv.id === invoiceId);\n    if (!invoice) {\n      alert('Ø§Ù„ÙØ§ØªÙˆØ±Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©');\n      return;\n    }\n\n    // Ù…Ù†Ø¹ ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹\n    if (invoice.paid_amount > 0 && invoice.remaining_amount > 0) {\n      alert('Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­ÙˆÙŠÙ„ Ø·Ø±ÙŠÙ‚Ø© Ø¯ÙØ¹ ÙØ§ØªÙˆØ±Ø© Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹');\n      return;\n    }\n\n    // Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø§ÙØ°Ø© Ø­ÙˆØ§Ø± Ù…Ø®ØµØµØ© Ù„Ù„Ø§Ø®ØªÙŠØ§Ø±\n    const modalHtml = `\n      <div id=\"paymentMethodModal\" style=\"\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0,0,0,0.5);\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        z-index: 1000;\n        direction: rtl;\n      \">\n        <div style=\"\n          background: white;\n          padding: 30px;\n          border-radius: 10px;\n          box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n          min-width: 400px;\n          text-align: center;\n        \">\n          <h3 style=\"margin-bottom: 20px; color: #333;\">ØªØºÙŠÙŠØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</h3>\n          <p style=\"margin-bottom: 15px;\">Ø§Ù„ÙØ§ØªÙˆØ±Ø©: <strong>${invoice.invoice_number}</strong></p>\n          <p style=\"margin-bottom: 20px;\">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø­Ø§Ù„ÙŠØ©: <strong style=\"color: #e74c3c;\">${invoice.payment_method}</strong></p>\n          <div style=\"margin-bottom: 20px;\">\n            <label style=\"display: block; margin-bottom: 10px; font-weight: bold;\">Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:</label>\n            <select id=\"newPaymentMethod\" style=\"\n              width: 100%;\n              padding: 10px;\n              border: 2px solid #ddd;\n              border-radius: 5px;\n              font-size: 16px;\n              direction: rtl;\n            \">\n              <option value=\"\">-- Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ --</option>\n              ${paymentMethods\n                .filter(method => method.value !== invoice.payment_method)\n                .map(method => `<option value=\"${method.value}\">${method.label}</option>`)\n                .join('')}\n            </select>\n          </div>\n          <div style=\"display: flex; gap: 10px; justify-content: center;\">\n            <button id=\"confirmChange\" style=\"\n              background: #27ae60;\n              color: white;\n              border: none;\n              padding: 10px 20px;\n              border-radius: 5px;\n              cursor: pointer;\n              font-size: 16px;\n            \">ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØºÙŠÙŠØ±</button>\n            <button id=\"cancelChange\" style=\"\n              background: #e74c3c;\n              color: white;\n              border: none;\n              padding: 10px 20px;\n              border-radius: 5px;\n              cursor: pointer;\n              font-size: 16px;\n            \">Ø¥Ù„ØºØ§Ø¡</button>\n          </div>\n        </div>\n      </div>\n    `;\n\n    // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø§ÙØ°Ø© Ù„Ù„ØµÙØ­Ø©\n    document.body.insertAdjacentHTML('beforeend', modalHtml);\n\n    // Ø¥Ø¶Ø§ÙØ© Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø£Ø²Ø±Ø§Ø±\n    const modal = document.getElementById('paymentMethodModal');\n    const selectElement = document.getElementById('newPaymentMethod');\n    const confirmBtn = document.getElementById('confirmChange');\n    const cancelBtn = document.getElementById('cancelChange');\n\n    // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©\n    const closeModal = () => {\n      if (modal && modal.parentNode) {\n        modal.parentNode.removeChild(modal);\n      }\n    };\n\n    // Ø²Ø± Ø§Ù„Ø¥Ù„ØºØ§Ø¡\n    cancelBtn.onclick = closeModal;\n\n    // Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø§ÙØ°Ø©\n    modal.onclick = (e) => {\n      if (e.target === modal) {\n        closeModal();\n      }\n    };\n\n    // Ø²Ø± Ø§Ù„ØªØ£ÙƒÙŠØ¯\n    confirmBtn.onclick = async () => {\n      const newMethod = selectElement.value;\n      \n      if (!newMethod) {\n        alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø·Ø±ÙŠÙ‚Ø© Ø¯ÙØ¹ Ø¬Ø¯ÙŠØ¯Ø©');\n        return;\n      }\n\n      if (newMethod === invoice.payment_method) {\n        alert('Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ù‡ÙŠ Ù†ÙØ³Ù‡Ø§ Ø¨Ø§Ù„ÙØ¹Ù„');\n        return;\n      }\n\n      if (!confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­ÙˆÙŠÙ„ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ù…Ù† \"${invoice.payment_method}\" Ø¥Ù„Ù‰ \"${newMethod}\"ØŸ\\n\\nØ³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ø²ÙŠÙ†Ø© ÙˆØ§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.\\n\\nÙŠØªØ·Ù„Ø¨ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù„Ù„ØªØ£ÙƒÙŠØ¯`)) {\n        return;\n      }\n\n      closeModal();\n      // Request password\n      requestPasswordFor('changePayment', { invoiceId, newMethod });\n    };\n  };\n\n  // Cancel invoice function\n  const cancelInvoice = async (invoiceId) => {\n    const invoice = invoices.find(inv => inv.id === invoiceId);\n    if (!invoice) {\n      alert('Ø§Ù„ÙØ§ØªÙˆØ±Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©');\n      return;\n    }\n\n    const confirmMessage = `Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø© ${invoice.invoice_number}ØŸ\\n\\nØ³ÙŠØªÙ…:\\n- Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø®Ø²Ù†\\n- Ø¹Ù…Ù„ Ù…Ø¹Ø§Ù…Ù„Ø© Ø¹ÙƒØ³ÙŠØ© ÙÙŠ Ø§Ù„Ø®Ø²ÙŠÙ†Ø©\\n- Ù†Ù‚Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ù„Ù„Ù…Ø­Ø°ÙˆÙØ©\\n\\nÙŠØªØ·Ù„Ø¨ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù„Ù„ØªØ£ÙƒÙŠØ¯`;\n    \n    if (!confirm(confirmMessage)) {\n      return;\n    }\n\n    // Request password\n    requestPasswordFor('cancel', invoiceId);\n  };\n\n  const startEditInvoice = (invoice) => {\n    setEditingInvoice(invoice.id);\n    setEditForm({\n      invoice_title: invoice.invoice_title || '',\n      supervisor_name: invoice.supervisor_name || '',\n      customer_name: invoice.customer_name || '',\n      payment_method: invoice.payment_method || 'Ù†Ù‚Ø¯ÙŠ',\n      discount_type: invoice.discount_type || 'amount',\n      discount_value: invoice.discount_value || 0,\n      items: invoice.items || [],\n      notes: invoice.notes || ''\n    });\n  };\n\n  const cancelEdit = () => {\n    setEditingInvoice(null);\n    setEditForm({\n      invoice_title: '',\n      supervisor_name: '',\n      customer_name: '',\n      payment_method: 'Ù†Ù‚Ø¯ÙŠ',\n      discount_type: 'amount',\n      discount_value: 0,\n      items: [],\n      notes: ''\n    });\n  };\n\n  const saveInvoiceEdit = async () => {\n    if (!editForm.customer_name.trim()) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„');\n      return;\n    }\n\n    try {\n      console.log('Saving invoice edit for ID:', editingInvoice);\n      console.log('Edit form data:', editForm);\n      \n      // Calculate totals\n      const subtotal = editForm.items.reduce((sum, item) => sum + (item.total_price || 0), 0);\n      let discountAmount = 0;\n      \n      if (editForm.discount_type === 'percentage') {\n        discountAmount = (subtotal * parseFloat(editForm.discount_value || 0)) / 100;\n      } else {\n        discountAmount = parseFloat(editForm.discount_value || 0);\n      }\n      \n      const totalAfterDiscount = subtotal - discountAmount;\n\n      const updatedInvoice = {\n        ...editForm,\n        subtotal: subtotal,\n        discount: discountAmount,\n        total_after_discount: totalAfterDiscount,\n        total_amount: totalAfterDiscount\n      };\n\n      console.log('Sending update to backend:', updatedInvoice);\n      \n      // Store the edit form for password-protected execution\n      setEditForm(updatedInvoice);\n      \n      // Request password\n      requestPasswordFor('edit', null);\n    } catch (error) {\n      console.error('Error updating invoice:', error);\n      console.error('Error response:', error.response?.data);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ§ØªÙˆØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const updateInvoiceStatus = async (invoiceId, newStatus) => {\n    try {\n      await axios.put(`${API}/invoices/${invoiceId}/status`, \n        { status: newStatus }, {\n        headers: { 'Content-Type': 'application/json' }\n      });\n      fetchInvoices();\n      alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©');\n    } catch (error) {\n      console.error('Error updating invoice status:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©');\n    }\n  };\n\n  const printInvoice = (invoice) => {\n    const printContent = `\n      <!DOCTYPE html>\n      <html dir=\"rtl\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <style>\n          body {\n            font-family: Arial, sans-serif;\n            margin: 0;\n            padding: 20px;\n            direction: rtl;\n            font-size: 15px;\n          }\n          .header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            border-bottom: 3px solid #000;\n            padding-bottom: 10px;\n            margin-bottom: 20px;\n          }\n          .company-info {\n            text-align: right;\n          }\n          .company-name {\n            font-size: 32px;\n            font-weight: bold;\n            color: #000;\n            margin: 0;\n          }\n          .company-subtitle {\n            font-size: 20px;\n            margin: 5px 0;\n            color: #666;\n          }\n          .company-details {\n            font-size: 16px;\n            margin: 2px 0;\n            color: #333;\n          }\n          .logo-section {\n            text-align: center;\n            flex: 1;\n          }\n          .invoice-title {\n            font-size: 22px;\n            font-weight: bold;\n            background-color: #ff4444;\n            color: white;\n            padding: 8px 20px;\n            border-radius: 5px;\n            display: inline-block;\n            margin-bottom: 10px;\n          }\n          .invoice-number {\n            font-size: 20px;\n            font-weight: bold;\n            color: #ff4444;\n          }\n          .customer-info {\n            display: flex;\n            justify-content: space-between;\n            margin: 20px 0;\n          }\n          .customer-details {\n            text-align: right;\n          }\n          .date-info {\n            text-align: left;\n          }\n          .products-table {\n            width: 100%;\n            border-collapse: collapse;\n            border: 2px solid #000;\n            margin: 20px 0;\n          }\n          .products-table th,\n          .products-table td {\n            border: 1px solid #000;\n            padding: 8px;\n            text-align: center;\n          }\n          .products-table th {\n            background-color: #f0f0f0;\n            font-weight: bold;\n          }\n          .footer {\n            margin-top: 30px;\n            border-top: 1px solid #ccc;\n            padding-top: 15px;\n            display: flex;\n            justify-content: space-between;\n            font-size: 13px;\n            color: #666;\n          }\n          .total-section {\n            text-align: left;\n            margin-top: 10px;\n          }\n          .total-amount {\n            font-size: 20px;\n            font-weight: bold;\n            border: 2px solid #000;\n            padding: 10px;\n            display: inline-block;\n            background-color: #f9f9f9;\n          }\n          @media print {\n            body { margin: 0; padding: 10px; }\n          }\n        </style>\n      </head>\n      <body>\n        <!-- Header Section -->\n        <div class=\"header\">\n          <div class=\"company-info\">\n            <h1 class=\"company-name\">Ø´Ø±ÙƒØ© Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„</h1>\n            <p class=\"company-subtitle\">ØªØµÙ†ÙŠØ¹ Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£ÙˆÙŠÙ„ Ø³ÙŠÙ„</p>\n            <p class=\"company-details\">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø·Ø§Ø± Ø­ØªÙ‰ Ù¥Ù Ù Ù…Ù„</p>\n            <p class=\"company-details\">Ù‡ÙŠØ¯Ø±ÙˆÙ„ÙŠÙƒ - Ù†ÙŠÙˆÙ…Ø§ØªÙŠÙƒ</p>\n          </div>\n          \n          <div class=\"logo-section\">\n            <img src=\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\" \n                 alt=\"Master Seal Logo\" \n                 style=\"max-width: 120px; max-height: 80px; margin-bottom: 10px;\">\n            <div class=\"invoice-title\">${invoice.invoice_title || 'Ø¹Ø±Ø¶ Ø³Ø¹Ø±'}</div>\n            <div class=\"invoice-number\">${invoice.invoice_number}</div>\n          </div>\n        </div>\n\n        <!-- Customer and Date Info -->\n        <div class=\"customer-info\">\n          <div class=\"customer-details\">\n            <p><strong>Ø§Ù„Ø³Ø§Ø¯Ø©:</strong> ${invoice.customer_name}</p>\n            <p><strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> ${invoice.customer_address || '........................'}</p>\n          </div>\n          <div class=\"date-info\">\n            <p><strong>ØªØ­Ø±ÙŠØ± ÙÙŠ:</strong> ${new Date(invoice.date).toLocaleDateString('ar-EG')}</p>\n            <p><strong>Date:</strong> ${new Date(invoice.date).toLocaleDateString('en-GB')}</p>\n          </div>\n        </div>\n\n        <!-- Products Table -->\n        <table class=\"products-table\">\n          <thead>\n            <tr>\n              <th style=\"width: 60px;\">Ø§Ù„Ù…Ø³Ù„Ø³Ù„<br>Item</th>\n              <th style=\"width: 80px;\">Ø§Ù„ÙƒÙ…ÙŠØ©<br>QTY</th>\n              <th style=\"width: 200px;\">Description<br>Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª</th>\n              <th style=\"width: 100px;\">Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©<br>Unit Price</th>\n              <th style=\"width: 100px;\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ<br>Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${invoice.items.map((item, index) => `\n              <tr>\n                <td>${index + 1}</td>\n                <td>${item.quantity}</td>\n                <td style=\"text-align: right;\">\n                  ${item.local_product_details ? \n                    `${item.local_product_details.product_size} - ${item.local_product_details.product_type}` : \n                    `${item.seal_type} - ${item.material_type}<br>\n                    <small>${item.inner_diameter} Ã— ${item.outer_diameter} Ã— ${item.height} Ù…Ù…${item.wall_height ? ` (Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø©: ${item.wall_height} Ù…Ù…)` : \"\"}</small>`\n                  }\n                </td>\n                <td>Ø¬.Ù… ${item.unit_price.toFixed(2)}</td>\n                <td>Ø¬.Ù… ${item.total_price.toFixed(2)}</td>\n              </tr>\n            `).join('')}\n            <!-- Empty rows for additional items -->\n            ${Array.from({length: Math.max(0, 8 - invoice.items.length)}, (_, i) => `\n              <tr style=\"height: 40px;\">\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n              </tr>\n            `).join('')}\n          </tbody>\n        </table>\n\n        <!-- Total Section -->\n        <div class=\"total-section\">\n          <div style=\"text-align: left; margin-bottom: 10px;\">\n            ${invoice.subtotal ? `\n              <div style=\"margin-bottom: 5px;\">\n                <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ: Ø¬.Ù… ${invoice.subtotal.toFixed(2)}</span>\n              </div>\n            ` : ''}\n            ${invoice.discount && invoice.discount > 0 ? `\n              <div style=\"margin-bottom: 5px; color: #d32f2f;\">\n                <span>Ø§Ù„Ø®ØµÙ…: - Ø¬.Ù… ${invoice.discount.toFixed(2)}</span>\n                ${invoice.discount_type === 'percentage' && invoice.discount_value ? \n                  ` <small>(${invoice.discount_value}%)</small>` : ''}\n              </div>\n              <hr style=\"margin: 5px 0; border: 1px solid #000;\">\n            ` : ''}\n          </div>\n          <div class=\"total-amount\">\n            Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: Ø¬.Ù… ${(invoice.total_after_discount || invoice.total_amount).toFixed(2)}\n          </div>\n        </div>\n\n        <!-- Additional Info -->\n        <div style=\"margin-top: 20px; text-align: center; font-size: 13px;\">\n          <p><strong>Ù…Ù„Ø­ÙˆØ¸Ø©:</strong> ÙÙ‚Ø· ÙˆÙ‚Ø¯Ø±Ù‡</p>\n          <div style=\"height: 30px; border-bottom: 1px solid #000; margin: 10px 40px;\"></div>\n        </div>\n\n        <!-- Footer -->\n        <div class=\"footer\">\n          <div>\n            <p><strong>Ø§Ù„ØªÙˆÙ‚ÙŠØ¹:</strong></p>\n            <p>Ù…ÙˆØ¨Ø§ÙŠÙ„: Ù Ù¡Ù Ù¢Ù Ù¦Ù£Ù Ù¦Ù§Ù§ - Ù Ù¡Ù Ù¦Ù¢Ù£Ù©Ù Ù¨Ù§Ù </p>\n            <p>ØªÙ„ÙŠÙÙˆÙ†: Ù Ù¡Ù Ù¢Ù Ù¦Ù£Ù Ù¦Ù§Ù§</p>\n          </div>\n          <div style=\"text-align: left;\">\n            <p><strong>Ø§Ù„Ù…Ø³ØªÙ„Ù…:</strong></p>\n            <p>Ø§Ù„Ø­Ø±ÙÙŠÙŠÙ† - Ø§Ù„Ø³Ù„Ø§Ù… - Ø£Ù…Ø§Ù… Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª</p>\n            <p>Ù…ÙˆØ¨Ø§ÙŠÙ„: Ù Ù¡Ù Ù¢Ù Ù¦Ù£Ù Ù¦Ù§Ù§ - Ù Ù¡Ù Ù¦Ù¢Ù£Ù©Ù Ù¨Ù§Ù </p>\n          </div>\n        </div>\n\n        <!-- Note -->\n        <div style=\"text-align: center; margin-top: 20px; font-size: 12px; color: #666;\">\n          <p>ÙŠÙ‚Ø± Ø§Ù„Ù…Ø´ØªØ±ÙŠ Ø¨Ø£Ù†Ù‡ Ù‚Ø§Ù… Ø¨Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø¨Ø¶Ø§Ø¹Ø© ÙˆÙ‚Ø¨ÙˆÙ„Ù‡Ø§</p>\n        </div>\n      </body>\n      </html>\n    `;\n    \n    const printWindow = window.open('', '_blank');\n    printWindow.document.write(printContent);\n    printWindow.document.close();\n    printWindow.print();\n  };\n\n  const clearAllInvoices = async () => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ±ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) return;\n    \n    try {\n      await axios.delete(`${API}/invoices/clear-all`);\n      fetchInvoices();\n      alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ±');\n    } catch (error) {\n      console.error('Error clearing invoices:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');\n    }\n  };\n\n  const filteredInvoices = invoices.filter(invoice => {\n    const matchesStatus = filterStatus === '' || invoice.status === filterStatus;\n    const matchesSearch = searchTerm === '' || \n      invoice.invoice_number.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      invoice.customer_name.toLowerCase().includes(searchTerm.toLowerCase());\n    return matchesStatus && matchesSearch;\n  });\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-blue-600 mb-4\">Ø§Ù„ÙÙˆØ§ØªÙŠØ±</h2>\n        \n        <div className=\"flex space-x-4 space-x-reverse mb-4\">\n          <button \n            onClick={clearAllInvoices}\n            className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n            Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n          </button>\n          <button \n            onClick={fetchInvoices}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n            Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => window.print()}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n            Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n          <select className=\"border border-gray-300 rounded px-3 py-2\">\n            <option>ÙŠÙˆÙ…ÙŠ</option>\n            <option>Ø£Ø³Ø¨ÙˆØ¹ÙŠ</option>\n            <option>Ø´Ù‡Ø±ÙŠ</option>\n            <option>Ø³Ù†ÙˆÙŠ</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Filters */}\n      <div className=\"bg-white p-4 rounded-lg shadow-md mb-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø¨Ø­Ø«</label>\n            <input\n              type=\"text\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              placeholder=\"Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø£Ùˆ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„\"\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©</label>\n            <select\n              value={filterStatus}\n              onChange={(e) => setFilterStatus(e.target.value)}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"\">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª</option>\n              <option value=\"Ù…Ø¯ÙÙˆØ¹Ø©\">Ù…Ø¯ÙÙˆØ¹Ø©</option>\n              <option value=\"ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©\">ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©</option>\n              <option value=\"Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹\">Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹</option>\n              <option value=\"Ø§Ù†ØªØ¸Ø§Ø±\">Ø§Ù†ØªØ¸Ø§Ø±</option>\n              <option value=\"ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°\">ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°</option>\n            </select>\n          </div>\n          \n          <div className=\"flex items-end\">\n            <button\n              onClick={() => { setSearchTerm(''); setFilterStatus(''); }}\n              className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n            >\n              Ù…Ø³Ø­ Ø§Ù„ÙÙ„Ø§ØªØ±\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\n        <div className=\"bg-blue-50 p-4 rounded-lg text-center\">\n          <h3 className=\"font-semibold text-blue-800\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙÙˆØ§ØªÙŠØ±</h3>\n          <p className=\"text-2xl font-bold text-blue-600\">{invoices.length}</p>\n        </div>\n        \n        <div className=\"bg-green-50 p-4 rounded-lg text-center\">\n          <h3 className=\"font-semibold text-green-800\">Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø©</h3>\n          <p className=\"text-2xl font-bold text-green-600\">\n            {invoices.filter(inv => inv.status === 'Ù…Ø¯ÙÙˆØ¹Ø©').length}\n          </p>\n        </div>\n        \n        <div className=\"bg-red-50 p-4 rounded-lg text-center\">\n          <h3 className=\"font-semibold text-red-800\">ØºÙŠØ± Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø©</h3>\n          <p className=\"text-2xl font-bold text-red-600\">\n            {invoices.filter(inv => inv.status === 'ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©').length}\n          </p>\n        </div>\n        \n        <div className=\"bg-yellow-50 p-4 rounded-lg text-center\">\n          <h3 className=\"font-semibold text-yellow-800\">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</h3>\n          <p className=\"text-2xl font-bold text-yellow-600\">\n            Ø¬.Ù… {invoices.reduce((sum, inv) => sum + (inv.total_amount || 0), 0).toFixed(2)}\n          </p>\n        </div>\n      </div>\n\n      {/* Invoices Table */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ±</h3>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¹Ù…ÙŠÙ„</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                <th className=\"border border-gray-300 p-2\">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø®ØµÙ…</th>  \n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø§Ù„Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredInvoices.map((invoice) => (\n                <tr key={invoice.id}>\n                  <td className=\"border border-gray-300 p-2 font-semibold\">\n                    {invoice.invoice_number}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">{invoice.customer_name}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    {new Date(invoice.date).toLocaleDateString('ar-EG')}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">{invoice.payment_method}</td>\n                  <td className=\"border border-gray-300 p-2 font-semibold\">\n                    Ø¬.Ù… {invoice.subtotal?.toFixed(2) || (invoice.total_amount?.toFixed(2)) || '0.00'}\n                  </td>\n                  <td className=\"border border-gray-300 p-2 text-red-600\">\n                    {invoice.discount && invoice.discount > 0 ? (\n                      <div>\n                        <span>Ø¬.Ù… {invoice.discount.toFixed(2)}</span>\n                        {invoice.discount_type === 'percentage' && invoice.discount_value && (\n                          <small className=\"block text-xs\">(%{invoice.discount_value})</small>\n                        )}\n                      </div>\n                    ) : (\n                      <span className=\"text-gray-400\">Ù„Ø§ ÙŠÙˆØ¬Ø¯</span>\n                    )}\n                  </td>\n                  <td className=\"border border-gray-300 p-2 font-semibold text-green-600\">\n                    Ø¬.Ù… {(invoice.total_after_discount || invoice.total_amount)?.toFixed(2) || '0.00'}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className={`px-2 py-1 rounded text-sm cursor-pointer ${\n                      invoice.status === 'Ù…Ø¯ÙÙˆØ¹Ø©' ? 'bg-green-100 text-green-800' :\n                      invoice.status === 'ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©' ? 'bg-red-100 text-red-800' :\n                      invoice.status === 'Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹' ? 'bg-yellow-100 text-yellow-800' :\n                      invoice.status === 'Ø§Ù†ØªØ¸Ø§Ø±' ? 'bg-blue-100 text-blue-800' :\n                      invoice.status === 'ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°' ? 'bg-green-100 text-green-800' :\n                      invoice.status === 'ØªÙ… Ø§Ù„ØªØµÙ†ÙŠØ¹' ? 'bg-purple-100 text-purple-800' :\n                      'bg-gray-100 text-gray-800'\n                    }`}>\n                      {invoice.status}\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex flex-wrap gap-1\">\n                      <button\n                        onClick={() => printInvoice(invoice)}\n                        className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                      >\n                        Ø·Ø¨Ø§Ø¹Ø©\n                      </button>\n                      <button\n                        onClick={() => startEditInvoice(invoice)}\n                        className=\"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600\"\n                      >\n                        ØªØ¹Ø¯ÙŠÙ„\n                      </button>\n                      <button\n                        onClick={() => changePaymentMethod(invoice.id)}\n                        className=\"bg-purple-500 text-white px-2 py-1 rounded text-sm hover:bg-purple-600\"\n                        title=\"ØªØºÙŠÙŠØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹\"\n                      >\n                        ğŸ’³ ØªØ­ÙˆÙŠÙ„\n                      </button>\n                      <button\n                        onClick={() => cancelInvoice(invoice.id)}\n                        className=\"bg-red-600 text-white px-2 py-1 rounded text-sm hover:bg-red-700\"\n                        title=\"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙˆØ¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ù…ÙˆØ§Ø¯\"\n                      >\n                        âŒ Ø¥Ù„ØºØ§Ø¡\n                      </button>\n                      {invoice.status === 'Ø§Ù†ØªØ¸Ø§Ø±' && (\n                        <button\n                          onClick={() => updateInvoiceStatus(invoice.id, 'ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°')}\n                          className=\"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600\"\n                        >\n                          ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°\n                        </button>\n                      )}\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n          \n          {filteredInvoices.length === 0 && (\n            <div className=\"text-center py-8 text-gray-500\">\n              Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙˆØ§ØªÙŠØ± ØªØ·Ø§Ø¨Ù‚ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¨Ø­Ø«\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Edit Invoice Modal */}\n      {editingInvoice && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white p-6 rounded-lg shadow-lg w-full max-w-4xl max-h-screen overflow-y-auto\" dir=\"rtl\">\n            <h3 className=\"text-xl font-semibold mb-4\">ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø©</h3>\n            \n            <div className=\"grid grid-cols-2 gap-4 mb-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©</label>\n                <input\n                  type=\"text\"\n                  value={editForm.invoice_title}\n                  onChange={(e) => setEditForm({...editForm, invoice_title: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù</label>\n                <input\n                  type=\"text\"\n                  value={editForm.supervisor_name}\n                  onChange={(e) => setEditForm({...editForm, supervisor_name: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</label>\n                <input\n                  type=\"text\"\n                  value={editForm.customer_name}\n                  onChange={(e) => setEditForm({...editForm, customer_name: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„\"\n                  required\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</label>\n                <select\n                  value={editForm.payment_method}\n                  onChange={(e) => setEditForm({...editForm, payment_method: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                >\n                  <option value=\"Ù†Ù‚Ø¯ÙŠ\">Ù†Ù‚Ø¯ÙŠ</option>\n                  <option value=\"ÙÙˆØ¯Ø§ÙÙˆÙ† 010\">ÙÙˆØ¯Ø§ÙÙˆÙ† 010</option>\n                  <option value=\"ÙƒØ§Ø´ 0100\">ÙƒØ§Ø´ 0100</option>\n                  <option value=\"Ø¢Ø¬Ù„\">Ø¢Ø¬Ù„</option>\n                  <option value=\"Ø§Ù†Ø³ØªØ§ Ø¨Ø§ÙŠ\">Ø§Ù†Ø³ØªØ§ Ø¨Ø§ÙŠ</option>\n                  <option value=\"Yad_Elsawy\">Yad Elsawy</option>\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø®ØµÙ…</label>\n                <select\n                  value={editForm.discount_type}\n                  onChange={(e) => setEditForm({...editForm, discount_type: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                >\n                  <option value=\"amount\">Ù…Ø¨Ù„Øº Ø«Ø§Ø¨Øª</option>\n                  <option value=\"percentage\">Ù†Ø³Ø¨Ø© Ù…Ø¦ÙˆÙŠØ©</option>\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù‚ÙŠÙ…Ø© Ø§Ù„Ø®ØµÙ…</label>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  value={editForm.discount_value}\n                  onChange={(e) => setEditForm({...editForm, discount_value: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder={editForm.discount_type === 'percentage' ? '0-100' : '0.00'}\n                />\n              </div>\n            </div>\n            \n            <div className=\"mb-4\">\n              <label className=\"block text-sm font-medium mb-1\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>\n              <textarea\n                value={editForm.notes}\n                onChange={(e) => setEditForm({...editForm, notes: e.target.value})}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n                rows=\"3\"\n                placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n              />\n            </div>\n            \n            {/* Items Display with Edit capability */}\n            <div className=\"mb-4\">\n              <h4 className=\"text-lg font-medium mb-2\">Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙØ§ØªÙˆØ±Ø©</h4>\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full border-collapse border border-gray-300\">\n                  <thead>\n                    <tr className=\"bg-gray-100\">\n                      <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ù†ØªØ¬</th>\n                      <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙƒÙ…ÙŠØ©</th>\n                      <th className=\"border border-gray-300 p-2\">Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©</th>\n                      <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>\n                      <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {editForm.items.map((item, index) => (\n                      <tr key={index}>\n                        <td className=\"border border-gray-300 p-2\">\n                          {item.product_type === 'local' || item.local_product_details ? (\n                            <input\n                              type=\"text\"\n                              value={item.product_name || `${item.local_product_details?.product_size || ''} - ${item.local_product_details?.product_type || ''}`}\n                              onChange={(e) => {\n                                const newItems = [...editForm.items];\n                                newItems[index].product_name = e.target.value;\n                                setEditForm({...editForm, items: newItems});\n                              }}\n                              className=\"w-full p-1 border border-gray-300 rounded\"\n                              placeholder=\"Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ù†ØªØ¬ - Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬\"\n                            />\n                          ) : (\n                            <div className=\"space-y-1\">\n                              {/* Seal Type */}\n                              <div className=\"flex items-center space-x-2 space-x-reverse\">\n                                <label className=\"text-xs font-medium w-16\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„:</label>\n                                <select\n                                  value={item.seal_type || ''}\n                                  onChange={(e) => {\n                                    const newItems = [...editForm.items];\n                                    newItems[index].seal_type = e.target.value;\n                                    setEditForm({...editForm, items: newItems});\n                                  }}\n                                  className=\"flex-1 p-1 text-xs border border-gray-300 rounded\"\n                                >\n                                  <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„Ù†ÙˆØ¹</option>\n                                  <option value=\"RSL\">RSL</option>\n                                  <option value=\"RS\">RS</option>\n                                  <option value=\"RSS\">RSS</option>\n                                  <option value=\"RSE\">RSE</option>\n                                  <option value=\"B17\">B17</option>\n                                  <option value=\"B3\">B3</option>\n                                  <option value=\"B14\">B14</option>\n                                  <option value=\"B1\">B1</option>\n                                  <option value=\"R15\">R15</option>\n                                  <option value=\"R17\">R17</option>\n                                  <option value=\"W1\">W1</option>\n                                  <option value=\"W4\">W4</option>\n                                  <option value=\"W5\">W5</option>\n                                  <option value=\"W11\">W11</option>\n                                  <option value=\"WBT\">WBT</option>\n                                  <option value=\"XR\">XR</option>\n                                  <option value=\"CH\">CH</option>\n                                  <option value=\"VR\">VR</option>\n                                </select>\n                              </div>\n                              \n                              {/* Material Type */}\n                              <div className=\"flex items-center space-x-2 space-x-reverse\">\n                                <label className=\"text-xs font-medium w-16\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©:</label>\n                                <select\n                                  value={item.material_type || ''}\n                                  onChange={(e) => {\n                                    const newItems = [...editForm.items];\n                                    newItems[index].material_type = e.target.value;\n                                    setEditForm({...editForm, items: newItems});\n                                  }}\n                                  className=\"flex-1 p-1 text-xs border border-gray-300 rounded\"\n                                >\n                                  <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„Ø®Ø§Ù…Ø©</option>\n                                  <option value=\"NBR\">NBR</option>\n                                  <option value=\"BUR\">BUR</option>\n                                  <option value=\"BT\">BT</option>\n                                  <option value=\"VT\">VT</option>\n                                  <option value=\"BOOM\">BOOM</option>\n                                </select>\n                              </div>\n                              \n                              {/* Dimensions */}\n                              <div className=\"flex items-center space-x-1 space-x-reverse\">\n                                <input\n                                  type=\"number\"\n                                  step=\"0.1\"\n                                  value={item.inner_diameter || ''}\n                                  onChange={(e) => {\n                                    const newItems = [...editForm.items];\n                                    newItems[index].inner_diameter = parseFloat(e.target.value) || 0;\n                                    setEditForm({...editForm, items: newItems});\n                                  }}\n                                  placeholder=\"Ø¯Ø§Ø®Ù„ÙŠ\"\n                                  className=\"w-12 p-1 text-xs border border-gray-300 rounded\"\n                                />\n                                <span className=\"text-xs\">Ã—</span>\n                                <input\n                                  type=\"number\"\n                                  step=\"0.1\"\n                                  value={item.outer_diameter || ''}\n                                  onChange={(e) => {\n                                    const newItems = [...editForm.items];\n                                    newItems[index].outer_diameter = parseFloat(e.target.value) || 0;\n                                    setEditForm({...editForm, items: newItems});\n                                  }}\n                                  placeholder=\"Ø®Ø§Ø±Ø¬ÙŠ\"\n                                  className=\"w-12 p-1 text-xs border border-gray-300 rounded\"\n                                />\n                                <span className=\"text-xs\">Ã—</span>\n                                <input\n                                  type=\"number\"\n                                  step=\"0.1\"\n                                  value={item.height || ''}\n                                  onChange={(e) => {\n                                    const newItems = [...editForm.items];\n                                    newItems[index].height = parseFloat(e.target.value) || 0;\n                                    setEditForm({...editForm, items: newItems});\n                                  }}\n                                  placeholder=\"Ø§Ø±ØªÙØ§Ø¹\"\n                                  className=\"w-12 p-1 text-xs border border-gray-300 rounded\"\n                                />\n                              </div>\n                            </div>\n                          )}\n                        </td>\n                        <td className=\"border border-gray-300 p-2\">\n                          <input\n                            type=\"number\"\n                            value={item.quantity}\n                            onChange={(e) => {\n                              const newItems = [...editForm.items];\n                              newItems[index].quantity = parseInt(e.target.value) || 0;\n                              newItems[index].total_price = newItems[index].unit_price * newItems[index].quantity;\n                              setEditForm({...editForm, items: newItems});\n                            }}\n                            className=\"w-full p-1 border border-gray-300 rounded\"\n                          />\n                        </td>\n                        <td className=\"border border-gray-300 p-2\">\n                          <input\n                            type=\"number\"\n                            step=\"0.01\"\n                            value={item.unit_price}\n                            onChange={(e) => {\n                              const newItems = [...editForm.items];\n                              newItems[index].unit_price = parseFloat(e.target.value) || 0;\n                              newItems[index].total_price = newItems[index].unit_price * newItems[index].quantity;\n                              setEditForm({...editForm, items: newItems});\n                            }}\n                            className=\"w-full p-1 border border-gray-300 rounded\"\n                          />\n                        </td>\n                        <td className=\"border border-gray-300 p-2 font-semibold\">\n                          Ø¬.Ù… {(item.total_price || 0).toFixed(2)}\n                        </td>\n                        <td className=\"border border-gray-300 p-2\">\n                          <button\n                            onClick={() => {\n                              const newItems = editForm.items.filter((_, i) => i !== index);\n                              setEditForm({...editForm, items: newItems});\n                            }}\n                            className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                          >\n                            Ø­Ø°Ù\n                          </button>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n              \n              {/* Add Product Button */}\n              <button\n                onClick={() => {\n                  // Add a new empty item for editing\n                  const newItem = {\n                    seal_type: '',\n                    material_type: '',\n                    inner_diameter: '',\n                    outer_diameter: '',\n                    height: '',\n                    quantity: 1,\n                    unit_price: 0,\n                    total_price: 0\n                  };\n                  setEditForm({\n                    ...editForm,\n                    items: [...editForm.items, newItem]\n                  });\n                }}\n                className=\"mt-2 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n              >\n                Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯\n              </button>\n            </div>\n            \n            {/* Action Buttons */}\n            <div className=\"flex justify-end space-x-4 space-x-reverse\">\n              <button\n                onClick={cancelEdit}\n                className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n              >\n                Ø¥Ù„ØºØ§Ø¡\n              </button>\n              <button\n                onClick={saveInvoiceEdit}\n                className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n              >\n                Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n      {/* Password Modal for Invoice Operations */}\n      {showPasswordModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\" dir=\"rtl\">\n          <div className=\"bg-white rounded-lg p-8 max-w-md w-full shadow-2xl\">\n            <h3 className=\"text-2xl font-bold mb-4 text-blue-600\">\n              ğŸ” ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©\n            </h3>\n            \n            <div className=\"mb-4 p-4 bg-blue-50 border-r-4 border-blue-500 rounded\">\n              <p className=\"text-sm text-gray-700\">\n                {pendingOperation?.type === 'cancel' && 'âŒ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©'}\n                {pendingOperation?.type === 'edit' && 'âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø©'}\n                {pendingOperation?.type === 'changePayment' && 'ğŸ’³ ØªØ­ÙˆÙŠÙ„ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹'}\n              </p>\n              <p className=\"text-xs text-gray-600 mt-2\">\n                ÙŠØªØ·Ù„Ø¨ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©\n              </p>\n            </div>\n\n            <div className=\"mb-6\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (1462):\n              </label>\n              <input\n                type=\"password\"\n                value={operationPassword}\n                onChange={(e) => setOperationPassword(e.target.value)}\n                onKeyPress={(e) => e.key === 'Enter' && executeOperation()}\n                placeholder=\"Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\"\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n                autoFocus\n              />\n            </div>\n\n            <div className=\"flex gap-3\">\n              <button\n                onClick={executeOperation}\n                className=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-semibold transition-colors\"\n              >\n                âœ… ØªØ£ÙƒÙŠØ¯\n              </button>\n              <button\n                onClick={() => {\n                  setShowPasswordModal(false);\n                  setPendingOperation(null);\n                  setOperationPassword('');\n                }}\n                className=\"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-3 rounded-lg font-semibold transition-colors\"\n              >\n                âŒ Ø¥Ù„ØºØ§Ø¡\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Deleted Invoices Component\nconst DeletedInvoices = () => {\n  const {user} = useAuth();\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [password, setPassword] = useState('');\n  const [deletedInvoices, setDeletedInvoices] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [showPasswordChange, setShowPasswordChange] = useState(false);\n  const [oldPassword, setOldPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  \n  // Invoice operations password change states\n  const [showInvoiceOpsPasswordChange, setShowInvoiceOpsPasswordChange] = useState(false);\n  const [invoiceOpsOldPassword, setInvoiceOpsOldPassword] = useState('');\n  const [invoiceOpsNewPassword, setInvoiceOpsNewPassword] = useState('');\n\n  // Verify password\n  const verifyPassword = async () => {\n    try {\n      const response = await axios.post(`${API}/deleted-invoices/verify-password`, {\n        password: password\n      });\n      \n      if (response.data.success) {\n        setIsAuthenticated(true);\n        fetchDeletedInvoices();\n      } else {\n        alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©');\n        setPassword('');\n      }\n    } catch (error) {\n      console.error('Error verifying password:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');\n    }\n  };\n\n  // Change password\n  const changePassword = async () => {\n    if (!oldPassword || !newPassword) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ÙˆØ§Ù„Ø¬Ø¯ÙŠØ¯Ø©');\n      return;\n    }\n\n    if (newPassword.length < 4) {\n      alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 4 Ø£Ø±Ù‚Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');\n      return;\n    }\n\n    try {\n      await axios.post(`${API}/deleted-invoices/change-password`, {\n        old_password: oldPassword,\n        new_password: newPassword\n      });\n\n      alert('ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­');\n      setShowPasswordChange(false);\n      setOldPassword('');\n      setNewPassword('');\n    } catch (error) {\n      console.error('Error changing password:', error);\n      alert(error.response?.data?.detail || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');\n    }\n  };\n\n  // Change invoice operations password (1462)\n  const changeInvoiceOpsPassword = async () => {\n    if (!invoiceOpsOldPassword || !invoiceOpsNewPassword) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ÙˆØ§Ù„Ø¬Ø¯ÙŠØ¯Ø©');\n      return;\n    }\n\n    if (invoiceOpsNewPassword.length < 4) {\n      alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 4 Ø£Ø±Ù‚Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');\n      return;\n    }\n\n    try {\n      await axios.post(`${API}/invoice-operations/change-password`, {\n        old_password: invoiceOpsOldPassword,\n        new_password: invoiceOpsNewPassword\n      });\n\n      alert('ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª (Ø¥Ù„ØºØ§Ø¡/ØªØ¹Ø¯ÙŠÙ„/ØªØ­ÙˆÙŠÙ„) Ø¨Ù†Ø¬Ø§Ø­');\n      setShowInvoiceOpsPasswordChange(false);\n      setInvoiceOpsOldPassword('');\n      setInvoiceOpsNewPassword('');\n    } catch (error) {\n      console.error('Error changing invoice ops password:', error);\n      alert(error.response?.data?.detail || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');\n    }\n  };\n\n  const fetchDeletedInvoices = async () => {\n    try {\n      const response = await axios.get(`${API}/deleted-invoices`);\n      setDeletedInvoices(response.data || []);\n    } catch (error) {\n      console.error('Error fetching deleted invoices:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©');\n    }\n  };\n\n  const handleRestore = async (invoiceId, invoiceNumber) => {\n    if (!confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø© ${invoiceNumber}ØŸ\\n\\nÙ…Ù„Ø§Ø­Ø¸Ø©: Ø³ÙŠØªÙ… Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙÙ‚Ø·ØŒ Ù„Ù† ÙŠØªÙ… Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø£Ùˆ Ø§Ù„Ø®Ø²ÙŠÙ†Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹`)) {\n      return;\n    }\n\n    try {\n      const response = await axios.post(`${API}/deleted-invoices/${invoiceId}/restore`, null, {\n        params: { username: user?.username }\n      });\n      alert(response.data.message + '\\n\\n' + (response.data.warning || ''));\n      fetchDeletedInvoices();\n    } catch (error) {\n      console.error('Error restoring invoice:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const handlePermanentDelete = async (invoiceId, invoiceNumber) => {\n    if (!confirm(`âš ï¸ ØªØ­Ø°ÙŠØ±: Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø© ${invoiceNumber} Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ØŸ\\n\\nÙ‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!`)) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/deleted-invoices/${invoiceId}`);\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹');\n      fetchDeletedInvoices();\n    } catch (error) {\n      console.error('Error deleting invoice:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const filteredInvoices = deletedInvoices.filter(invoice => {\n    const searchLower = searchTerm.toLowerCase();\n    return (\n      invoice.invoice_number?.toLowerCase().includes(searchLower) ||\n      invoice.customer_name?.toLowerCase().includes(searchLower) ||\n      invoice.payment_method?.toLowerCase().includes(searchLower)\n    );\n  });\n\n  // If not authenticated, show password screen\n  if (!isAuthenticated) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-500 to-orange-600 p-6\" dir=\"rtl\">\n        <div className=\"bg-white p-8 rounded-lg shadow-2xl max-w-md w-full\">\n          <div className=\"text-center mb-6\">\n            <div className=\"text-6xl mb-4\">ğŸ—‘ï¸</div>\n            <h2 className=\"text-2xl font-bold text-gray-800\">Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©</h2>\n            <p className=\"text-gray-600 mt-2\">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù„Ø¯Ø®ÙˆÙ„</p>\n          </div>\n          \n          <div className=\"space-y-4\">\n            <input\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              onKeyPress={(e) => e.key === 'Enter' && verifyPassword()}\n              placeholder=\"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\"\n              className=\"w-full p-3 border-2 border-gray-300 rounded-lg focus:border-red-500 focus:outline-none text-center text-lg\"\n              autoFocus\n            />\n            \n            <button\n              onClick={verifyPassword}\n              className=\"w-full bg-red-500 text-white py-3 rounded-lg hover:bg-red-600 font-semibold text-lg transition-colors\"\n            >\n              Ø¯Ø®ÙˆÙ„\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Main deleted invoices interface\n  return (\n    <div className=\"p-6 bg-gray-50 min-h-screen\" dir=\"rtl\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-800\">ğŸ—‘ï¸ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©</h1>\n          <p className=\"text-gray-600 mt-1\">Ø¥Ø¯Ø§Ø±Ø© ÙˆØ§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©</p>\n        </div>\n        <div className=\"flex gap-2\">\n          <button\n            onClick={() => setShowPasswordChange(!showPasswordChange)}\n            className=\"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors\"\n            title=\"ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„ØµÙØ­Ø©\"\n          >\n            ğŸ”‘ Ø§Ù„ØµÙØ­Ø©\n          </button>\n          <button\n            onClick={() => setShowInvoiceOpsPasswordChange(!showInvoiceOpsPasswordChange)}\n            className=\"bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors\"\n            title=\"ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª\"\n          >\n            ğŸ” Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª\n          </button>\n          <button\n            onClick={fetchDeletedInvoices}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors\"\n          >\n            ğŸ”„ ØªØ­Ø¯ÙŠØ«\n          </button>\n        </div>\n      </div>\n\n      {/* Password Change Section */}\n      {showPasswordChange && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n          <h3 className=\"text-xl font-semibold mb-4 flex items-center gap-2\">\n            ğŸ”‘ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\n          </h3>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©\n              </label>\n              <input\n                type=\"password\"\n                value={oldPassword}\n                onChange={(e) => setOldPassword(e.target.value)}\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©\n              </label>\n              <input\n                type=\"password\"\n                value={newPassword}\n                onChange={(e) => setNewPassword(e.target.value)}\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n              />\n            </div>\n\n            <div className=\"flex items-end gap-2\">\n              <button\n                onClick={changePassword}\n                className=\"flex-1 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 font-semibold\"\n              >\n                âœ… ØªØ£ÙƒÙŠØ¯\n              </button>\n              <button\n                onClick={() => {\n                  setShowPasswordChange(false);\n                  setOldPassword('');\n                  setNewPassword('');\n                }}\n                className=\"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 font-semibold\"\n              >\n                âŒ Ø¥Ù„ØºØ§Ø¡\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Invoice Operations Password Change Section */}\n      {showInvoiceOpsPasswordChange && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n          <h3 className=\"text-xl font-semibold mb-4 flex items-center gap-2\">\n            ğŸ” ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ÙÙˆØ§ØªÙŠØ±\n          </h3>\n          <p className=\"text-sm text-gray-600 mb-4\">\n            ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ: <strong>Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙÙˆØ§ØªÙŠØ±ØŒ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙÙˆØ§ØªÙŠØ±ØŒ ØªØ­ÙˆÙŠÙ„ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</strong>\n          </p>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© (1462)\n              </label>\n              <input\n                type=\"password\"\n                value={invoiceOpsOldPassword}\n                onChange={(e) => setInvoiceOpsOldPassword(e.target.value)}\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©\n              </label>\n              <input\n                type=\"password\"\n                value={invoiceOpsNewPassword}\n                onChange={(e) => setInvoiceOpsNewPassword(e.target.value)}\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none\"\n              />\n            </div>\n\n            <div className=\"flex items-end gap-2\">\n              <button\n                onClick={changeInvoiceOpsPassword}\n                className=\"flex-1 bg-purple-500 text-white py-3 rounded-lg hover:bg-purple-600 font-semibold\"\n              >\n                âœ… ØªØ£ÙƒÙŠØ¯\n              </button>\n              <button\n                onClick={() => {\n                  setShowInvoiceOpsPasswordChange(false);\n                  setInvoiceOpsOldPassword('');\n                  setInvoiceOpsNewPassword('');\n                }}\n                className=\"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 font-semibold\"\n              >\n                âŒ Ø¥Ù„ØºØ§Ø¡\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Search */}\n      <div className=\"mb-4\">\n        <input\n          type=\"text\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          placeholder=\"Ø§Ù„Ø¨Ø­Ø« (Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©ØŒ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ØŒ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹...)\"\n          className=\"w-full p-2 border border-gray-300 rounded\"\n        />\n      </div>\n\n      {/* Invoices Table */}\n      <div className=\"bg-white rounded-lg shadow-md overflow-x-auto\">\n        <table className=\"min-w-full border-collapse\">\n          <thead>\n            <tr className=\"bg-gray-100\">\n              <th className=\"border border-gray-300 p-2\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>\n              <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n              <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¹Ù…ÙŠÙ„</th>\n              <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>\n              <th className=\"border border-gray-300 p-2\">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</th>\n              <th className=\"border border-gray-300 p-2\">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø°Ù</th>\n              <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n            </tr>\n          </thead>\n          <tbody>\n            {filteredInvoices.length === 0 ? (\n              <tr>\n                <td colSpan=\"7\" className=\"border border-gray-300 p-4 text-center text-gray-500\">\n                  Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙˆØ§ØªÙŠØ± Ù…Ø­Ø°ÙˆÙØ©\n                </td>\n              </tr>\n            ) : (\n              filteredInvoices.map((invoice) => (\n                <tr key={invoice.id} className=\"hover:bg-gray-50\">\n                  <td className=\"border border-gray-300 p-2 font-medium\">\n                    {invoice.invoice_number}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    {new Date(invoice.created_at).toLocaleDateString('ar-EG')}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">{invoice.customer_name}</td>\n                  <td className=\"border border-gray-300 p-2 font-bold\">\n                    {invoice.total_amount?.toFixed(2)} Ø¬.Ù…\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">{invoice.payment_method}</td>\n                  <td className=\"border border-gray-300 p-2 text-sm text-gray-600\">\n                    {new Date(invoice.deleted_at).toLocaleDateString('ar-EG', {\n                      year: 'numeric',\n                      month: 'short',\n                      day: 'numeric',\n                      hour: '2-digit',\n                      minute: '2-digit'\n                    })}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex space-x-2 space-x-reverse justify-center\">\n                      <button\n                        onClick={() => handleRestore(invoice.id, invoice.invoice_number)}\n                        className=\"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600\"\n                      >\n                        â†©ï¸ Ø§Ø³ØªØ¹Ø§Ø¯Ø©\n                      </button>\n                      <button\n                        onClick={() => handlePermanentDelete(invoice.id, invoice.invoice_number)}\n                        className=\"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700\"\n                      >\n                        ğŸ—‘ï¸ Ø­Ø°Ù Ù†Ù‡Ø§Ø¦ÙŠ\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))\n            )}\n          </tbody>\n        </table>\n      </div>\n\n      {/* Summary */}\n      <div className=\"mt-4 p-4 bg-blue-50 rounded-lg\">\n        <p className=\"text-sm text-gray-700\">\n          <strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©:</strong> {filteredInvoices.length}\n        </p>\n        <p className=\"text-xs text-gray-600 mt-2\">\n          ğŸ’¡ <strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø³ØªØ±Ø¬Ø¹Ù‡Ø§ Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù†Ø´Ø·Ø©ØŒ Ù„ÙƒÙ† Ù„Ù† ÙŠØªÙ… Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø£Ùˆ Ø§Ù„Ø®Ø²ÙŠÙ†Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.\n        </p>\n      </div>\n    </div>\n  );\n};\n\n// Customer Statement Component (ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨)\nconst CustomerStatement = () => {\n  const [customers, setCustomers] = useState([]);\n  const [selectedCustomer, setSelectedCustomer] = useState('');\n  const [statement, setStatement] = useState(null);\n  const [fromDate, setFromDate] = useState('');\n  const [toDate, setToDate] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    fetchCustomers();\n  }, []);\n\n  const fetchCustomers = async () => {\n    try {\n      const response = await axios.get(`${API}/customers`);\n      // Sort customers alphabetically by name\n      const sortedCustomers = (response.data || []).sort((a, b) => \n        a.name.localeCompare(b.name, 'ar')\n      );\n      setCustomers(sortedCustomers);\n    } catch (error) {\n      console.error('Error fetching customers:', error);\n    }\n  };\n\n  const fetchStatement = async () => {\n    if (!selectedCustomer) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø¹Ù…ÙŠÙ„');\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const params = {};\n      if (fromDate) params.from_date = fromDate;\n      if (toDate) params.to_date = toDate;\n\n      const response = await axios.get(`${API}/customer-statement/${selectedCustomer}`, { params });\n      setStatement(response.data);\n    } catch (error) {\n      console.error('Error fetching statement:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨: ' + (error.response?.data?.detail || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const printStatement = () => {\n    if (!statement) return;\n\n    const printWindow = window.open('', '', 'width=800,height=600');\n    const customer = statement.customer;\n    const transactions = statement.transactions || [];\n    const summary = statement.summary || {};\n\n    printWindow.document.write(`\n      <!DOCTYPE html>\n      <html dir=\"rtl\">\n      <head>\n        <title>ÙƒØ´Ù Ø­Ø³Ø§Ø¨ - ${customer.name}</title>\n        <style>\n          body {\n            font-family: Arial, sans-serif;\n            padding: 20px;\n            direction: rtl;\n          }\n          .header {\n            text-align: center;\n            margin-bottom: 30px;\n            border-bottom: 2px solid #333;\n            padding-bottom: 10px;\n          }\n          .info-section {\n            margin-bottom: 20px;\n            display: flex;\n            justify-content: space-between;\n          }\n          .info-box {\n            border: 1px solid #ddd;\n            padding: 10px;\n            border-radius: 5px;\n            width: 45%;\n          }\n          table {\n            width: 100%;\n            border-collapse: collapse;\n            margin-bottom: 20px;\n          }\n          th, td {\n            border: 1px solid #ddd;\n            padding: 8px;\n            text-align: center;\n          }\n          th {\n            background-color: #f2f2f2;\n            font-weight: bold;\n          }\n          .summary {\n            margin-top: 20px;\n            border-top: 2px solid #333;\n            padding-top: 10px;\n          }\n          .summary-row {\n            display: flex;\n            justify-content: space-between;\n            padding: 5px 0;\n            font-size: 14px;\n          }\n          .final-balance {\n            font-size: 18px;\n            font-weight: bold;\n            color: ${summary.final_balance >= 0 ? 'green' : 'red'};\n          }\n          @media print {\n            body { padding: 10px; }\n          }\n        </style>\n      </head>\n      <body>\n        <div class=\"header\">\n          <h1>ÙƒØ´Ù Ø­Ø³Ø§Ø¨ Ø¹Ø§Ù…</h1>\n          <p>Ù…Ø±ØªØ¨ Ø¨ØªÙˆØ§Ø±ÙŠØ® Ø§Ù„Ù‚ÙŠÙˆØ¯</p>\n        </div>\n\n        <div class=\"info-section\">\n          <div class=\"info-box\">\n            <p><strong>Ø§Ø³Ù… Ø§Ù„Ø­Ø³Ø§Ø¨:</strong> ${customer.name}</p>\n            <p><strong>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</strong> ${customer.phone || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</p>\n            ${customer.is_also_supplier ? '<p><strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…ÙˆØ±Ø¯ Ø£ÙŠØ¶Ø§Ù‹</p>' : ''}\n          </div>\n          <div class=\"info-box\">\n            <p><strong>Ù…Ù† ØªØ§Ø±ÙŠØ®:</strong> ${statement.period.from_date}</p>\n            <p><strong>Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ®:</strong> ${statement.period.to_date}</p>\n            <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©:</strong> ${new Date().toLocaleDateString('ar-EG')}</p>\n          </div>\n        </div>\n\n        <table>\n          <thead>\n            <tr>\n              <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n              <th>Ù†ÙˆØ¹ Ø§Ù„Ù‚ÙŠØ¯</th>\n              <th>Ø§Ù„Ø¨ÙŠØ§Ù†</th>\n              <th>Ù…Ø¯ÙŠÙ†</th>\n              <th>Ø¯Ø§Ø¦Ù†</th>\n              <th>Ø§Ù„Ø±ØµÙŠØ¯</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${transactions.map(t => `\n              <tr>\n                <td>${new Date(t.date).toLocaleDateString('ar-EG')}</td>\n                <td>${t.type}</td>\n                <td>${t.description}</td>\n                <td>${t.debit > 0 ? t.debit.toFixed(2) : '-'}</td>\n                <td>${t.credit > 0 ? t.credit.toFixed(2) : '-'}</td>\n                <td>${t.balance.toFixed(2)}</td>\n              </tr>\n            `).join('')}\n          </tbody>\n        </table>\n\n        <div class=\"summary\">\n          <div class=\"summary-row\">\n            <span><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø§Ø¦Ù†:</strong></span>\n            <span>${summary.total_credit?.toFixed(2) || '0.00'} Ø¬.Ù…</span>\n          </div>\n          <div class=\"summary-row\">\n            <span><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯ÙŠÙ†:</strong></span>\n            <span>${summary.total_debit?.toFixed(2) || '0.00'} Ø¬.Ù…</span>\n          </div>\n          <div class=\"summary-row final-balance\">\n            <span><strong>Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:</strong></span>\n            <span>${summary.final_balance?.toFixed(2) || '0.00'} Ø¬.Ù…</span>\n          </div>\n        </div>\n\n        <p style=\"margin-top: 30px; text-align: left;\">Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ ÙŠØ¹ØªÙ…Ø¯ØŒØŒØŒ</p>\n      </body>\n      </html>\n    `);\n\n    printWindow.document.close();\n    printWindow.print();\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <h1 className=\"text-3xl font-bold mb-6\">ÙƒØ´Ù Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h1>\n\n      {/* Customer Selection and Filters */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„ *</label>\n            <select\n              value={selectedCustomer}\n              onChange={(e) => setSelectedCustomer(e.target.value)}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"\">-- Ø§Ø®ØªØ± Ø¹Ù…ÙŠÙ„ --</option>\n              {customers.map(customer => (\n                <option key={customer.id} value={customer.id}>\n                  {customer.name}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ù…Ù† ØªØ§Ø±ÙŠØ®</label>\n            <input\n              type=\"date\"\n              value={fromDate}\n              onChange={(e) => setFromDate(e.target.value)}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ®</label>\n            <input\n              type=\"date\"\n              value={toDate}\n              onChange={(e) => setToDate(e.target.value)}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n\n          <div className=\"flex items-end\">\n            <button\n              onClick={fetchStatement}\n              disabled={loading || !selectedCustomer}\n              className={`w-full px-4 py-2 rounded text-white ${\n                loading || !selectedCustomer\n                  ? 'bg-gray-400 cursor-not-allowed'\n                  : 'bg-blue-500 hover:bg-blue-600'\n              }`}\n            >\n              {loading ? 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...' : 'ğŸ“‹ Ø¹Ø±Ø¶ ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨'}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Statement Display */}\n      {statement && (\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\n          {/* Header */}\n          <div className=\"flex justify-between items-center mb-6 pb-4 border-b-2\">\n            <div>\n              <h2 className=\"text-2xl font-bold\">ÙƒØ´Ù Ø­Ø³Ø§Ø¨ Ø¹Ø§Ù…</h2>\n              <p className=\"text-sm text-gray-600\">Ù…Ø±ØªØ¨ Ø¨ØªÙˆØ§Ø±ÙŠØ® Ø§Ù„Ù‚ÙŠÙˆØ¯</p>\n            </div>\n            <button\n              onClick={printStatement}\n              className=\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\"\n            >\n              ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©\n            </button>\n          </div>\n\n          {/* Customer Info */}\n          <div className=\"grid grid-cols-2 gap-4 mb-6\">\n            <div className=\"bg-blue-50 p-4 rounded\">\n              <p className=\"mb-2\"><strong>Ø§Ø³Ù… Ø§Ù„Ø­Ø³Ø§Ø¨:</strong> {statement.customer.name}</p>\n              <p className=\"mb-2\"><strong>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</strong> {statement.customer.phone || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</p>\n              {statement.customer.is_also_supplier && (\n                <p className=\"text-orange-600 font-medium\">âš ï¸ Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…ÙˆØ±Ø¯ Ø£ÙŠØ¶Ø§Ù‹</p>\n              )}\n            </div>\n            <div className=\"bg-gray-50 p-4 rounded\">\n              <p className=\"mb-2\"><strong>Ù…Ù† ØªØ§Ø±ÙŠØ®:</strong> {statement.period.from_date}</p>\n              <p className=\"mb-2\"><strong>Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ®:</strong> {statement.period.to_date}</p>\n              <p className=\"mb-2\"><strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> {new Date().toLocaleDateString('ar-EG')}</p>\n            </div>\n          </div>\n\n          {/* Transactions Table */}\n          <div className=\"overflow-x-auto mb-6\">\n            <table className=\"min-w-full border-collapse border border-gray-300\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                  <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ù‚ÙŠØ¯</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¨ÙŠØ§Ù†</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø±Ø¬Ø¹</th>\n                  <th className=\"border border-gray-300 p-2\">Ù…Ø¯ÙŠÙ†</th>\n                  <th className=\"border border-gray-300 p-2\">Ø¯Ø§Ø¦Ù†</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø±ØµÙŠØ¯</th>\n                </tr>\n              </thead>\n              <tbody>\n                {statement.transactions.length === 0 ? (\n                  <tr>\n                    <td colSpan=\"7\" className=\"border border-gray-300 p-4 text-center text-gray-500\">\n                      Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø§Øª ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©\n                    </td>\n                  </tr>\n                ) : (\n                  statement.transactions.map((trans, index) => (\n                    <tr key={index} className=\"hover:bg-gray-50\">\n                      <td className=\"border border-gray-300 p-2\">\n                        {new Date(trans.date).toLocaleDateString('ar-EG')}\n                      </td>\n                      <td className=\"border border-gray-300 p-2\">{trans.type}</td>\n                      <td className=\"border border-gray-300 p-2 text-right\">{trans.description}</td>\n                      <td className=\"border border-gray-300 p-2\">{trans.reference}</td>\n                      <td className=\"border border-gray-300 p-2 text-red-600 font-medium\">\n                        {trans.debit > 0 ? trans.debit.toFixed(2) : '-'}\n                      </td>\n                      <td className=\"border border-gray-300 p-2 text-green-600 font-medium\">\n                        {trans.credit > 0 ? trans.credit.toFixed(2) : '-'}\n                      </td>\n                      <td className=\"border border-gray-300 p-2 font-bold\">\n                        {trans.balance.toFixed(2)}\n                      </td>\n                    </tr>\n                  ))\n                )}\n              </tbody>\n            </table>\n          </div>\n\n          {/* Summary */}\n          <div className=\"bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-lg border-t-4 border-blue-500\">\n            <div className=\"grid grid-cols-3 gap-4\">\n              <div className=\"text-center\">\n                <p className=\"text-sm text-gray-600 mb-1\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø§Ø¦Ù†</p>\n                <p className=\"text-2xl font-bold text-green-600\">\n                  {statement.summary.total_credit?.toFixed(2)} Ø¬.Ù…\n                </p>\n              </div>\n              <div className=\"text-center\">\n                <p className=\"text-sm text-gray-600 mb-1\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯ÙŠÙ†</p>\n                <p className=\"text-2xl font-bold text-red-600\">\n                  {statement.summary.total_debit?.toFixed(2)} Ø¬.Ù…\n                </p>\n              </div>\n              <div className=\"text-center\">\n                <p className=\"text-sm text-gray-600 mb-1\">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</p>\n                <p className={`text-3xl font-bold ${\n                  statement.summary.final_balance >= 0 ? 'text-green-600' : 'text-red-600'\n                }`}>\n                  {statement.summary.final_balance?.toFixed(2)} Ø¬.Ù…\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Instructions */}\n      {!statement && (\n        <div className=\"bg-blue-50 p-6 rounded-lg border-r-4 border-blue-500\">\n          <h3 className=\"font-bold mb-2\">ğŸ“ ØªØ¹Ù„ÙŠÙ…Ø§Øª:</h3>\n          <ul className=\"list-disc list-inside text-sm text-gray-700 space-y-1\">\n            <li>Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</li>\n            <li>ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ø¯ÙŠØ¯ ÙØªØ±Ø© Ø²Ù…Ù†ÙŠØ© Ù…Ø¹ÙŠÙ†Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</li>\n            <li>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ \"Ø¹Ø±Ø¶ ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨\" Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</li>\n            <li>ÙŠÙ…ÙƒÙ†Ùƒ Ø·Ø¨Ø§Ø¹Ø© ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©</li>\n            <li><strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ø§Ù„ÙÙˆØ§ØªÙŠØ± = Ø¯Ø§Ø¦Ù† (Ù…ÙˆØ¬Ø¨) | Ø§Ù„Ø¯ÙØ¹Ø§Øª ÙˆØ§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª = Ù…Ø¯ÙŠÙ† (Ø³Ø§Ù„Ø¨)</li>\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Customer Account Settlement Component - ØªØµÙÙŠØ© Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…ÙŠÙ„\nconst SettleAccount = () => {\n  const {user} = useAuth();\n  const [customers, setCustomers] = useState([]);\n  const [selectedCustomer, setSelectedCustomer] = useState(null);\n  const [deferredInvoices, setDeferredInvoices] = useState([]);\n  const [amountPaid, setAmountPaid] = useState('');\n  const [paymentMethod, setPaymentMethod] = useState('Ù†Ù‚Ø¯ÙŠ');\n  const [loading, setLoading] = useState(false);\n  const [result, setResult] = useState(null);\n  const [suppliers, setSuppliers] = useState([]);\n  const [isCustomerAlsoSupplier, setIsCustomerAlsoSupplier] = useState(false);\n  const [supplierBalance, setSupplierBalance] = useState(0);\n\n  useEffect(() => {\n    fetchCustomers();\n    fetchSuppliers();\n  }, []);\n\n  const fetchCustomers = async () => {\n    try {\n      const response = await axios.get(`${API}/customers`);\n      const sortedCustomers = (response.data || []).sort((a, b) => \n        a.name.localeCompare(b.name, 'ar')\n      );\n      setCustomers(sortedCustomers);\n    } catch (error) {\n      console.error('Error fetching customers:', error);\n    }\n  };\n\n  const fetchSuppliers = async () => {\n    try {\n      const response = await axios.get(`${API}/suppliers`);\n      setSuppliers(response.data || []);\n    } catch (error) {\n      console.error('Error fetching suppliers:', error);\n    }\n  };\n\n  const fetchCustomerInvoices = async (customerId) => {\n    try {\n      const response = await axios.get(`${API}/invoices`);\n      const customer = customers.find(c => c.id === customerId);\n      \n      if (customer) {\n        const customerInvoices = response.data.filter(inv => \n          inv.customer_name === customer.name && \n          inv.payment_method === 'Ø¢Ø¬Ù„' && \n          inv.remaining_amount > 0\n        ).sort((a, b) => new Date(a.date) - new Date(b.date)); // Sort by date ascending\n        \n        setDeferredInvoices(customerInvoices);\n      }\n    } catch (error) {\n      console.error('Error fetching invoices:', error);\n    }\n  };\n\n  const handleCustomerChange = (customerId) => {\n    setSelectedCustomer(customerId);\n    setResult(null);\n    if (customerId) {\n      fetchCustomerInvoices(customerId);\n      \n      // Check if customer is also supplier\n      const customer = customers.find(c => c.id === customerId);\n      \n      if (customer) {\n        const supplier = suppliers.find(s => s.name === customer.name);\n        \n        if (supplier) {\n          // Support both 'balance' and 'current_balance' fields\n          const balance = supplier.current_balance !== undefined \n            ? supplier.current_balance \n            : (supplier.balance || 0);\n          \n          if (balance > 0) {\n            setIsCustomerAlsoSupplier(true);\n            setSupplierBalance(balance);\n          } else {\n            setIsCustomerAlsoSupplier(false);\n            setSupplierBalance(0);\n          }\n        } else {\n          setIsCustomerAlsoSupplier(false);\n          setSupplierBalance(0);\n        }\n      }\n    } else {\n      setDeferredInvoices([]);\n      setIsCustomerAlsoSupplier(false);\n      setSupplierBalance(0);\n    }\n  };\n\n  const handleSettleAccount = async () => {\n    if (!selectedCustomer) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„');\n      return;\n    }\n\n    if (!amountPaid || parseFloat(amountPaid) <= 0) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');\n      return;\n    }\n\n    if (!confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØµÙÙŠØ© Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ù…Ø¨Ù„Øº ${parseFloat(amountPaid).toFixed(2)} Ø¬.Ù…ØŸ\\n\\nØ³ÙŠØªÙ… ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø¨Ù„Øº Ø¹Ù„Ù‰ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø¢Ø¬Ù„Ø© Ù…Ù† Ø§Ù„Ø£Ù‚Ø¯Ù… Ù„Ù„Ø£Ø­Ø¯Ø«`)) {\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const response = await axios.post(\n        `${API}/customers/${selectedCustomer}/settle-account`,\n        null,\n        {\n          params: {\n            amount_paid: parseFloat(amountPaid),\n            payment_method: paymentMethod,\n            username: user?.username\n          }\n        }\n      );\n\n      setResult(response.data);\n      setAmountPaid('');\n      \n      // Refresh invoices\n      fetchCustomerInvoices(selectedCustomer);\n      \n      // Show detailed result\n      let message = `âœ… ${response.data.message}\\n\\n`;\n      message += `ğŸ’° Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹: ${response.data.total_amount_paid.toFixed(2)} Ø¬.Ù…\\n`;\n      message += `ğŸ“Š ØªÙ… ØªÙˆØ²ÙŠØ¹: ${response.data.amount_distributed.toFixed(2)} Ø¬.Ù…\\n`;\n      \n      if (response.data.remaining_amount > 0) {\n        message += `ğŸ’µ Ù…ØªØ¨Ù‚ÙŠ: ${response.data.remaining_amount.toFixed(2)} Ø¬.Ù…\\n\\n`;\n      }\n      \n      message += `ğŸ“‹ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø© (${response.data.invoices_count}):\\n`;\n      response.data.paid_invoices.forEach(inv => {\n        message += `\\nâ€¢ ${inv.invoice_number}\\n`;\n        message += `  Ø§Ù„Ù…Ø¯ÙÙˆØ¹: ${inv.amount_paid.toFixed(2)} Ø¬.Ù…\\n`;\n        message += `  Ø§Ù„Ø­Ø§Ù„Ø©: ${inv.status}\\n`;\n      });\n      \n      alert(message);\n      \n    } catch (error) {\n      console.error('Error settling account:', error);\n      alert(error.response?.data?.detail || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµÙÙŠØ© Ø§Ù„Ø­Ø³Ø§Ø¨');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Reconcile customer-supplier account\n  const handleReconciliation = async () => {\n    if (!selectedCustomer) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„');\n      return;\n    }\n\n    const settlementAmount = Math.min(supplierBalance, totalRemaining);\n    \n    const confirmMessage = `ğŸ”„ ØªØ³ÙˆÙŠØ© Ø§Ù„Ø­Ø³Ø§Ø¨\\n\\n` +\n      `Ø§Ù„Ø¹Ù…ÙŠÙ„/Ø§Ù„Ù…ÙˆØ±Ø¯: ${customers.find(c => c.id === selectedCustomer)?.name}\\n\\n` +\n      `Ø±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ±Ø¯: ${supplierBalance.toFixed(2)} Ø¬.Ù…\\n` +\n      `Ø¯ÙŠÙˆÙ† Ø§Ù„Ø¹Ù…ÙŠÙ„: ${totalRemaining.toFixed(2)} Ø¬.Ù…\\n\\n` +\n      `Ø³ÙŠØªÙ… ØªØ³ÙˆÙŠØ©: ${settlementAmount.toFixed(2)} Ø¬.Ù…\\n\\n` +\n      `Ø¨Ø¹Ø¯ Ø§Ù„ØªØ³ÙˆÙŠØ©:\\n` +\n      `â€¢ Ø±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ±Ø¯: ${(supplierBalance - settlementAmount).toFixed(2)} Ø¬.Ù…\\n` +\n      `â€¢ Ø¯ÙŠÙˆÙ† Ø§Ù„Ø¹Ù…ÙŠÙ„: ${(totalRemaining - settlementAmount).toFixed(2)} Ø¬.Ù…\\n\\n` +\n      `âš ï¸ Ù…Ù„Ø§Ø­Ø¸Ø©: ØªØ³ÙˆÙŠØ© Ø¯Ø§Ø®Ù„ÙŠØ© Ø¨Ø¯ÙˆÙ† ØªØ£Ø«ÙŠØ± Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø²ÙŠÙ†Ø©\\n\\n` +\n      `Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ`;\n\n    if (!confirm(confirmMessage)) {\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const response = await axios.post(\n        `${API}/customers/${selectedCustomer}/reconcile-with-supplier`,\n        null,\n        {\n          params: {\n            username: user?.username\n          }\n        }\n      );\n\n      // Refresh data\n      fetchCustomerInvoices(selectedCustomer);\n      fetchSuppliers();\n      \n      // Show detailed result\n      let message = `âœ… ${response.data.message}\\n\\n`;\n      message += `ğŸ“Š Ø§Ù„ØªÙØ§ØµÙŠÙ„:\\n`;\n      message += `â€¢ Ø±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ±Ø¯ Ø§Ù„Ø³Ø§Ø¨Ù‚: ${response.data.supplier_previous_balance.toFixed(2)} Ø¬.Ù…\\n`;\n      message += `â€¢ Ø¯ÙŠÙˆÙ† Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©: ${response.data.customer_previous_debt.toFixed(2)} Ø¬.Ù…\\n`;\n      message += `â€¢ Ù…Ø¨Ù„Øº Ø§Ù„ØªØ³ÙˆÙŠØ©: ${response.data.settlement_amount.toFixed(2)} Ø¬.Ù…\\n\\n`;\n      message += `ğŸ“‰ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ³ÙˆÙŠØ©:\\n`;\n      message += `â€¢ Ø±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ±Ø¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯: ${response.data.supplier_new_balance.toFixed(2)} Ø¬.Ù…\\n`;\n      message += `â€¢ Ø¯ÙŠÙˆÙ† Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: ${response.data.customer_remaining_debt.toFixed(2)} Ø¬.Ù…\\n\\n`;\n      message += `ğŸ“‹ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø³ÙˆØ§Ø© (${response.data.invoices_count}):\\n`;\n      response.data.settled_invoices.forEach(inv => {\n        message += `\\nâ€¢ ${inv.invoice_number}\\n`;\n        message += `  Ø§Ù„Ù…Ø¯ÙÙˆØ¹: ${inv.amount_paid.toFixed(2)} Ø¬.Ù…\\n`;\n        message += `  Ø§Ù„Ø­Ø§Ù„Ø©: ${inv.status}\\n`;\n      });\n      message += `\\n${response.data.note}`;\n      \n      alert(message);\n      \n      // Update local state\n      setIsCustomerAlsoSupplier(response.data.supplier_new_balance > 0);\n      setSupplierBalance(response.data.supplier_new_balance);\n      \n    } catch (error) {\n      console.error('Error reconciling account:', error);\n      alert(error.response?.data?.detail || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ³ÙˆÙŠØ©');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const totalRemaining = deferredInvoices.reduce((sum, inv) => sum + inv.remaining_amount, 0);\n\n  return (\n    <div className=\"p-6 bg-gray-50 min-h-screen\" dir=\"rtl\">\n      {/* Header */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h1 className=\"text-3xl font-bold text-gray-800 flex items-center gap-2\">\n          ğŸ’µ ØªØµÙÙŠØ© Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…ÙŠÙ„\n        </h1>\n        <p className=\"text-gray-600 mt-2\">Ø¯ÙØ¹ Ù…Ø¨Ù„Øº Ù„ØªØµÙÙŠØ© ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ø¢Ø¬Ù„Ø©</p>\n      </div>\n\n      {/* Settlement Form */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-xl font-semibold mb-4\">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØµÙÙŠØ©</h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n          {/* Customer Selection */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„ *\n            </label>\n            <select\n              value={selectedCustomer || ''}\n              onChange={(e) => handleCustomerChange(e.target.value)}\n              className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n            >\n              <option value=\"\">-- Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„ --</option>\n              {customers.map(customer => (\n                <option key={customer.id} value={customer.id}>\n                  {customer.name}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          {/* Amount Paid */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹ (Ø¬.Ù…) *\n            </label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={amountPaid}\n              onChange={(e) => setAmountPaid(e.target.value)}\n              placeholder=\"0.00\"\n              className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n            />\n          </div>\n\n          {/* Payment Method */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ *\n            </label>\n            <select\n              value={paymentMethod}\n              onChange={(e) => setPaymentMethod(e.target.value)}\n              className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n            >\n              <option value=\"Ù†Ù‚Ø¯ÙŠ\">Ù†Ù‚Ø¯ÙŠ</option>\n              <option value=\"ÙÙˆØ¯Ø§ÙÙˆÙ† 010\">ÙÙˆØ¯Ø§ÙÙˆÙ† 010</option>\n              <option value=\"ÙƒØ§Ø´ 0100\">ÙƒØ§Ø´ 0100</option>\n              <option value=\"Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ\">Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ</option>\n              <option value=\"ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ\">ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ</option>\n            </select>\n          </div>\n\n          {/* Settle Button */}\n          <div className=\"flex items-end\">\n            <button\n              onClick={handleSettleAccount}\n              disabled={loading || !selectedCustomer || !amountPaid}\n              className={`w-full py-3 rounded-lg font-semibold text-white transition-colors ${\n                loading || !selectedCustomer || !amountPaid\n                  ? 'bg-gray-400 cursor-not-allowed'\n                  : 'bg-green-500 hover:bg-green-600'\n              }`}\n            >\n              {loading ? 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØµÙÙŠØ©...' : 'âœ… ØªØµÙÙŠØ© Ø§Ù„Ø­Ø³Ø§Ø¨'}\n            </button>\n          </div>\n        </div>\n\n        {/* Reconciliation Section - Always visible but disabled if not applicable */}\n        {selectedCustomer && (\n          <div className={`mt-4 p-4 rounded-lg border-2 transition-all ${\n            isCustomerAlsoSupplier && totalRemaining > 0\n              ? 'bg-gradient-to-r from-purple-50 to-blue-50 border-purple-300'\n              : 'bg-gray-50 border-gray-300'\n          }`}>\n            <div className=\"flex justify-between items-center\">\n              <div className=\"flex-1\">\n                <h4 className={`text-lg font-semibold mb-2 ${\n                  isCustomerAlsoSupplier ? 'text-purple-800' : 'text-gray-500'\n                }`}>\n                  ğŸ”„ ØªØ³ÙˆÙŠØ© Ø§Ù„Ø­Ø³Ø§Ø¨ (Ø¹Ù…ÙŠÙ„ ÙˆÙ…ÙˆØ±Ø¯)\n                </h4>\n                {isCustomerAlsoSupplier ? (\n                  <div className=\"text-sm space-y-1\">\n                    <p className=\"text-gray-700\">\n                      <span className=\"font-semibold\">Ø±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ±Ø¯:</span> {supplierBalance.toFixed(2)} Ø¬.Ù…\n                    </p>\n                    <p className=\"text-gray-700\">\n                      <span className=\"font-semibold\">Ø¯ÙŠÙˆÙ† Ø§Ù„Ø¹Ù…ÙŠÙ„:</span> {totalRemaining.toFixed(2)} Ø¬.Ù…\n                    </p>\n                    <p className=\"text-purple-700 font-semibold\">\n                      Ø³ÙŠØªÙ… ØªØ³ÙˆÙŠØ©: {Math.min(supplierBalance, totalRemaining).toFixed(2)} Ø¬.Ù…\n                    </p>\n                  </div>\n                ) : (\n                  <p className=\"text-sm text-gray-500\">\n                    {!isCustomerAlsoSupplier && supplierBalance === 0 \n                      ? 'âš ï¸ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„ÙŠØ³ Ù…ÙˆØ±Ø¯Ø§Ù‹ Ø£Ùˆ Ø±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ±Ø¯ = 0'\n                      : totalRemaining === 0\n                      ? 'âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙˆØ§ØªÙŠØ± Ø¢Ø¬Ù„Ø© Ù…Ø³ØªØ­Ù‚Ø©'\n                      : 'âš ï¸ Ø§Ù„ØªØ³ÙˆÙŠØ© ØºÙŠØ± Ù…ØªØ§Ø­Ø©'}\n                  </p>\n                )}\n              </div>\n              <button\n                onClick={handleReconciliation}\n                disabled={loading || !isCustomerAlsoSupplier || totalRemaining === 0 || supplierBalance === 0}\n                className={`px-6 py-3 rounded-lg font-semibold text-white transition-colors ${\n                  loading || !isCustomerAlsoSupplier || totalRemaining === 0 || supplierBalance === 0\n                    ? 'bg-gray-400 cursor-not-allowed'\n                    : 'bg-purple-600 hover:bg-purple-700'\n                }`}\n                title={\n                  !isCustomerAlsoSupplier \n                    ? 'Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„ÙŠØ³ Ù…ÙˆØ±Ø¯Ø§Ù‹' \n                    : supplierBalance === 0 \n                    ? 'Ø±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ±Ø¯ = 0'\n                    : totalRemaining === 0\n                    ? 'Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙˆØ§ØªÙŠØ± Ø¢Ø¬Ù„Ø©'\n                    : 'ØªØ³ÙˆÙŠØ© Ø§Ù„Ø­Ø³Ø§Ø¨'\n                }\n              >\n                {loading ? 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ³ÙˆÙŠØ©...' : 'ğŸ”„ ØªØ³ÙˆÙŠØ©'}\n              </button>\n            </div>\n            {isCustomerAlsoSupplier && (\n              <p className=\"text-xs text-purple-600 mt-2\">\n                âš ï¸ ØªØ³ÙˆÙŠØ© Ø¯Ø§Ø®Ù„ÙŠØ© Ø¨Ø¯ÙˆÙ† ØªØ£Ø«ÙŠØ± Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø²ÙŠÙ†Ø©\n              </p>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Customer Invoices */}\n      {selectedCustomer && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <div className=\"flex justify-between items-center mb-4\">\n            <h3 className=\"text-xl font-semibold\">\n              Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø¢Ø¬Ù„Ø© ({deferredInvoices.length})\n            </h3>\n            <div className=\"text-right\">\n              <p className=\"text-sm text-gray-600\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ­Ù‚</p>\n              <p className=\"text-2xl font-bold text-red-600\">\n                {totalRemaining.toFixed(2)} Ø¬.Ù…\n              </p>\n            </div>\n          </div>\n\n          {deferredInvoices.length === 0 ? (\n            <div className=\"text-center py-8 text-gray-500\">\n              âœ… Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙˆØ§ØªÙŠØ± Ø¢Ø¬Ù„Ø© Ù…Ø³ØªØ­Ù‚Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full border-collapse\">\n                <thead>\n                  <tr className=\"bg-gray-100\">\n                    <th className=\"border border-gray-300 p-3 text-right\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>\n                    <th className=\"border border-gray-300 p-3 text-right\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                    <th className=\"border border-gray-300 p-3 text-right\">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>\n                    <th className=\"border border-gray-300 p-3 text-right\">Ø§Ù„Ù…Ø¯ÙÙˆØ¹</th>\n                    <th className=\"border border-gray-300 p-3 text-right\">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {deferredInvoices.map((invoice, index) => (\n                    <tr key={invoice.id} className={index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}>\n                      <td className=\"border border-gray-300 p-3 font-semibold\">\n                        {invoice.invoice_number}\n                      </td>\n                      <td className=\"border border-gray-300 p-3\">\n                        {new Date(invoice.date).toLocaleDateString('ar-EG')}\n                      </td>\n                      <td className=\"border border-gray-300 p-3\">\n                        {invoice.total_amount.toFixed(2)} Ø¬.Ù…\n                      </td>\n                      <td className=\"border border-gray-300 p-3 text-green-600\">\n                        {invoice.paid_amount.toFixed(2)} Ø¬.Ù…\n                      </td>\n                      <td className=\"border border-gray-300 p-3 text-red-600 font-bold\">\n                        {invoice.remaining_amount.toFixed(2)} Ø¬.Ù…\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n                <tfoot>\n                  <tr className=\"bg-gray-200 font-bold\">\n                    <td colSpan=\"4\" className=\"border border-gray-300 p-3 text-right\">\n                      Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:\n                    </td>\n                    <td className=\"border border-gray-300 p-3 text-red-600\">\n                      {totalRemaining.toFixed(2)} Ø¬.Ù…\n                    </td>\n                  </tr>\n                </tfoot>\n              </table>\n            </div>\n          )}\n\n          <div className=\"mt-4 p-4 bg-blue-50 rounded-lg border-r-4 border-blue-500\">\n            <p className=\"text-sm text-gray-700\">\n              ğŸ’¡ <strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ø³ÙŠØªÙ… ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹ Ø¹Ù„Ù‰ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø¨ØªØ±ØªÙŠØ¨ Ø§Ù„ØªØ§Ø±ÙŠØ® Ù…Ù† Ø§Ù„Ø£Ù‚Ø¯Ù… Ù„Ù„Ø£Ø­Ø¯Ø«\n            </p>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Work Orders Component\nconst WorkOrders = () => {\n  const [workOrders, setWorkOrders] = useState([]);\n  const [invoices, setInvoices] = useState([]);\n  const [selectedInvoices, setSelectedInvoices] = useState([]);\n  const [newWorkOrder, setNewWorkOrder] = useState({\n    title: '',\n    description: '',\n    priority: 'Ø¹Ø§Ø¯ÙŠ'\n  });\n  const [showAddToExisting, setShowAddToExisting] = useState(false);\n  const [selectedWorkOrderId, setSelectedWorkOrderId] = useState('');\n  const [selectedInvoiceForAdd, setSelectedInvoiceForAdd] = useState('');\n\n  useEffect(() => {\n    fetchWorkOrders();\n    fetchInvoices();\n  }, []);\n\n  const fetchWorkOrders = async () => {\n    try {\n      const response = await axios.get(`${API}/work-orders`);\n      setWorkOrders(response.data);\n    } catch (error) {\n      console.error('Error fetching work orders:', error);\n      setWorkOrders([]); // Set empty array on error\n    }\n  };\n\n  const fetchInvoices = async () => {\n    try {\n      const response = await axios.get(`${API}/invoices`);\n      setInvoices(response.data);\n    } catch (error) {\n      console.error('Error fetching invoices:', error);\n    }\n  };\n\n  const toggleInvoiceSelection = (invoiceId) => {\n    setSelectedInvoices(prev => \n      prev.includes(invoiceId) \n        ? prev.filter(id => id !== invoiceId)\n        : [...prev, invoiceId]\n    );\n  };\n\n  const createWorkOrderFromMultipleInvoices = async () => {\n    if (selectedInvoices.length === 0) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ÙØ§ØªÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');\n      return;\n    }\n\n    if (!newWorkOrder.title.trim()) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„');\n      return;\n    }\n\n    try {\n      // Get selected invoices data\n      const selectedInvoicesData = invoices.filter(inv => selectedInvoices.includes(inv.id));\n      \n      // Clean invoices data (remove MongoDB ObjectIds)\n      const cleanInvoices = selectedInvoicesData.map(inv => {\n        const cleanInv = { ...inv };\n        if (cleanInv._id) delete cleanInv._id;\n        return cleanInv;\n      });\n      \n      // Create work order with multiple invoices\n      const workOrderData = {\n        title: newWorkOrder.title,\n        description: newWorkOrder.description,\n        priority: newWorkOrder.priority,\n        invoices: cleanInvoices,\n        total_amount: cleanInvoices.reduce((sum, inv) => sum + (inv.total_amount || 0), 0),\n        total_items: cleanInvoices.reduce((sum, inv) => sum + (inv.items?.length || 0), 0)\n      };\n\n      const response = await axios.post(`${API}/work-orders/multiple`, workOrderData);\n      \n      if (response.data) {\n        alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ø¨Ù†Ø¬Ø§Ø­');\n        \n        // Reset form\n        setSelectedInvoices([]);\n        setNewWorkOrder({\n          title: '',\n          description: '',\n          priority: 'Ø¹Ø§Ø¯ÙŠ'\n        });\n        \n        // Refresh work orders list\n        await fetchWorkOrders();\n      }\n    } catch (error) {\n      console.error('Error creating work order:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const addInvoiceToExistingWorkOrder = async () => {\n    if (!selectedWorkOrderId || !selectedInvoiceForAdd) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ ÙˆØ§Ù„ÙØ§ØªÙˆØ±Ø©');\n      return;\n    }\n\n    try {\n      const response = await axios.put(`${API}/work-orders/${selectedWorkOrderId}/add-invoice`, null, {\n        params: { invoice_id: selectedInvoiceForAdd }\n      });\n      \n      if (response.data) {\n        alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¥Ù„Ù‰ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ø¨Ù†Ø¬Ø§Ø­');\n        \n        // Reset form\n        setSelectedWorkOrderId('');\n        setSelectedInvoiceForAdd('');\n        setShowAddToExisting(false);\n        \n        // Refresh work orders list\n        await fetchWorkOrders();\n      }\n    } catch (error) {\n      console.error('Error adding invoice to work order:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ§ØªÙˆØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const getInvoiceDetails = (invoiceId) => {\n    return invoices.find(inv => inv.id === invoiceId);\n  };\n\n  const getAvailableInvoices = () => {\n    // Show invoices that are \"ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°\" or \"Ø§Ù†ØªØ¸Ø§Ø±\"\n    return invoices.filter(invoice => \n      invoice.status === 'ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°' || invoice.status === 'Ø§Ù†ØªØ¸Ø§Ø±'\n    );\n  };\n\n  const getAvailableInvoicesForAdd = () => {\n    // Get invoices not already in the selected work order\n    if (!selectedWorkOrderId) return getAvailableInvoices();\n    \n    const selectedWorkOrder = workOrders.find(wo => wo.id === selectedWorkOrderId);\n    if (!selectedWorkOrder) return getAvailableInvoices();\n    \n    const usedInvoiceIds = selectedWorkOrder.invoices?.map(inv => inv.id) || [];\n    \n    return getAvailableInvoices().filter(invoice => \n      !usedInvoiceIds.includes(invoice.id)\n    );\n  };\n\n  const printWorkOrder = (workOrder) => {\n    const workOrderInvoices = workOrder.invoices?.map(invoiceData => \n      invoices.find(inv => inv.id === invoiceData.id) || invoiceData\n    ).filter(inv => inv) || [];\n    \n    const totalAmount = workOrderInvoices.reduce((sum, inv) => sum + (inv.total_amount || 0), 0);\n    const totalItems = workOrderInvoices.reduce((sum, inv) => sum + (inv.items?.length || 0), 0);\n    \n    const printContent = `\n      <div style=\"font-family: Arial, sans-serif; direction: rtl; text-align: right;\">\n        <div style=\"text-align: center; margin-bottom: 20px;\">\n          <h1>Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„</h1>\n          <p>Ø§Ù„Ø­Ø±ÙÙŠÙŠÙ† Ø´Ø§Ø±Ø¹ Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª - 01020630677</p>\n          <h2 style=\"color: #333; margin-top: 20px;\">Ø£Ù…Ø± Ø´ØºÙ„</h2>\n        </div>\n        \n        <div style=\"margin-bottom: 20px;\">\n          <strong>Ø±Ù‚Ù… Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„:</strong> ${workOrder.id}<br>\n          <strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> ${workOrder.title || `Ø£Ù…Ø± Ø´ØºÙ„ #${workOrder.id.slice(-8)}`}<br>\n          <strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${new Date(workOrder.created_at).toLocaleDateString('ar-EG')}<br>\n          <strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> ${workOrder.status || 'Ø¬Ø¯ÙŠØ¯'}<br>\n          <strong>Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ±:</strong> ${workOrderInvoices.length}<br>\n          <strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ù„Øº:</strong> Ø¬.Ù… ${totalAmount.toFixed(2)}\n          ${workOrder.description ? `<br><strong>Ø§Ù„ÙˆØµÙ:</strong> ${workOrder.description}` : ''}\n          ${workOrder.supervisor_name ? `<br><strong>Ø§Ù„Ù…Ø´Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØªØµÙ†ÙŠØ¹:</strong> ${workOrder.supervisor_name}` : ''}\n          ${workOrder.is_daily ? `<br><strong>Ù†ÙˆØ¹ Ø§Ù„Ø£Ù…Ø±:</strong> Ø£Ù…Ø± Ø´ØºÙ„ ÙŠÙˆÙ…ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠ` : ''}\n        </div>\n\n        <h3 style=\"color: #333; margin-bottom: 10px;\">Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø¯Ø±Ø¬Ø©:</h3>\n        <table style=\"width: 100%; border-collapse: collapse; margin-bottom: 20px;\">\n          <thead>\n            <tr style=\"background-color: #f0f0f0;\">\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø§Ù„Ø¹Ù…ÙŠÙ„</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø§Ù„Ù…Ø¨Ù„Øº</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${workOrderInvoices.map(invoice => `\n              <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">${invoice.invoice_number}</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">${invoice.customer_name}</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">${new Date(invoice.date).toLocaleDateString('ar-EG')}</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">Ø¬.Ù… ${invoice.total_amount?.toFixed(2) || '0.00'}</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">${invoice.items?.length || 0}</td>\n              </tr>\n            `).join('')}\n          </tbody>\n        </table>\n\n        <h3 style=\"color: #333; margin-bottom: 10px;\">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</h3>\n        <table style=\"width: 100%; border-collapse: collapse; margin-bottom: 20px;\">\n          <thead>\n            <tr style=\"background-color: #f0f0f0;\">\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø§Ù„Ù…Ù‚Ø§Ø³</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø§Ù„ÙƒÙ…ÙŠØ©</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø§Ù„Ø®Ø§Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø©</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${workOrderInvoices.map(invoice => \n              invoice.items?.map(item => `\n                <tr>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">${invoice.invoice_number}</td>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">${item.local_product_details ? item.local_product_details.product_type : (item.seal_type || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯')}</td>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">${item.local_product_details ? 'Ù…Ø­Ù„ÙŠ' : (item.material_type || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯')}</td>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">${item.local_product_details ? `${item.local_product_details.product_size} - ${item.local_product_details.product_type}` : (item.inner_diameter && item.outer_diameter && item.height ? `${item.inner_diameter} Ã— ${item.outer_diameter} Ã— ${item.height}${item.wall_height ? ` (Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø©: ${item.wall_height})` : ''}` : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯')}</td>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">${item.quantity}</td>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">${item.local_product_details ? 'Ù…Ø­Ù„ÙŠ' : (item.material_used || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯')}</td>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">\n                    ${item.local_product_details ? \n                      'Ù…Ø­Ù„ÙŠ' :\n                      item.material_details ? \n                        (item.material_details.is_finished_product ? \n                          'Ù…Ø®Ø²Ù† Ø§Ù†ØªØ§Ø¬ ØªØ§Ù…' : \n                          `${item.material_details.unit_code} / ${item.material_details.inner_diameter}-${item.material_details.outer_diameter}`\n                        ) : \n                        `${item.material_used || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'} / Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©`\n                    }\n                  </td>\n                </tr>\n              `).join('') || ''\n            ).join('')}\n          </tbody>\n        </table>\n        \n        <div style=\"margin-top: 40px; border-top: 1px solid #ddd; padding-top: 20px;\">\n          <div style=\"float: left;\">\n            <strong>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ØªØµÙ†ÙŠØ¹:</strong><br>\n            <div style=\"margin-top: 10px; height: 50px; border: 1px solid #ddd;\"></div>\n          </div>\n          <div style=\"float: right;\">\n            <strong>ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„:</strong><br>\n            <div style=\"margin-top: 10px; height: 50px; border: 1px solid #ddd; width: 150px;\"></div>\n          </div>\n          <div style=\"clear: both;\"></div>\n        </div>\n      </div>\n    `;\n    \n    const printWindow = window.open('', '_blank');\n    printWindow.document.write(printContent);\n    printWindow.document.close();\n    printWindow.print();\n  };\n\n  const clearAllWorkOrders = async () => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´ØºÙ„ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) return;\n    \n    try {\n      await axios.delete(`${API}/work-orders/clear-all`);\n      fetchWorkOrders();\n      alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´ØºÙ„');\n    } catch (error) {\n      console.error('Error clearing work orders:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');\n    }\n  };\n\n  const deleteWorkOrder = async (workOrderId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ù‡Ø°Ø§ØŸ')) return;\n    \n    try {\n      await axios.delete(`${API}/work-orders/${workOrderId}`);\n      fetchWorkOrders();\n      alert('ØªÙ… Ø­Ø°Ù Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting work order:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„');\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-blue-600 mb-4\">Ø£Ù…Ø± Ø´ØºÙ„</h2>\n        \n        <div className=\"flex space-x-4 space-x-reverse mb-4\">\n          <button \n            onClick={clearAllWorkOrders}\n            className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n            Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n          </button>\n          <button \n            onClick={() => { fetchWorkOrders(); fetchInvoices(); }}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n            Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => window.print()}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n            Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n          <button \n            onClick={() => setShowAddToExisting(!showAddToExisting)}\n            className=\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\">\n            {showAddToExisting ? 'Ø¥Ø®ÙØ§Ø¡' : 'Ø¥Ø¶Ø§ÙØ© ÙØ§ØªÙˆØ±Ø© Ù„Ø£Ù…Ø± Ù…ÙˆØ¬ÙˆØ¯'}\n          </button>\n          <select className=\"border border-gray-300 rounded px-3 py-2\">\n            <option>ÙŠÙˆÙ…ÙŠ</option>\n            <option>Ø£Ø³Ø¨ÙˆØ¹ÙŠ</option>\n            <option>Ø´Ù‡Ø±ÙŠ</option>\n            <option>Ø³Ù†ÙˆÙŠ</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Add Invoice to Existing Work Order */}\n      {showAddToExisting && (\n        <div className=\"bg-yellow-50 p-6 rounded-lg shadow-md mb-6 border border-yellow-200\">\n          <h3 className=\"text-lg font-semibold mb-4 text-yellow-800\">Ø¥Ø¶Ø§ÙØ© ÙØ§ØªÙˆØ±Ø© Ø¥Ù„Ù‰ Ø£Ù…Ø± Ø´ØºÙ„ Ù…ÙˆØ¬ÙˆØ¯</h3>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ø®ØªÙŠØ§Ø± Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„</label>\n              <select\n                value={selectedWorkOrderId}\n                onChange={(e) => setSelectedWorkOrderId(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              >\n                <option value=\"\">Ø§Ø®ØªØ± Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„</option>\n                {workOrders.map(workOrder => (\n                  <option key={workOrder.id} value={workOrder.id}>\n                    {workOrder.title || `Ø£Ù…Ø± Ø´ØºÙ„ #${workOrder.id.slice(-8)}`} \n                    ({workOrder.invoices?.length || 0} ÙØ§ØªÙˆØ±Ø©)\n                  </option>\n                ))}\n              </select>\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØ§ØªÙˆØ±Ø©</label>\n              <select\n                value={selectedInvoiceForAdd}\n                onChange={(e) => setSelectedInvoiceForAdd(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n                disabled={!selectedWorkOrderId}\n              >\n                <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„ÙØ§ØªÙˆØ±Ø©</option>\n                {getAvailableInvoicesForAdd().map(invoice => (\n                  <option key={invoice.id} value={invoice.id}>\n                    {invoice.invoice_number} - {invoice.customer_name} \n                    (Ø¬.Ù… {invoice.total_amount?.toFixed(2) || '0.00'})\n                  </option>\n                ))}\n              </select>\n            </div>\n          </div>\n          \n          <div className=\"flex space-x-4 space-x-reverse\">\n            <button\n              onClick={addInvoiceToExistingWorkOrder}\n              className=\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\"\n              disabled={!selectedWorkOrderId || !selectedInvoiceForAdd}\n            >\n              Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n            </button>\n            <button\n              onClick={() => {\n                setShowAddToExisting(false);\n                setSelectedWorkOrderId('');\n                setSelectedInvoiceForAdd('');\n              }}\n              className=\"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600\"\n            >\n              Ø¥Ù„ØºØ§Ø¡\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Create Work Order from Multiple Invoices */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø´ØºÙ„ Ø¬Ø¯ÙŠØ¯</h3>\n        \n        {/* Work Order Details */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø¹Ù†ÙˆØ§Ù† Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ *</label>\n            <input\n              type=\"text\"\n              value={newWorkOrder.title}\n              onChange={(e) => setNewWorkOrder({...newWorkOrder, title: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"Ù…Ø«Ø§Ù„: Ø£Ù…Ø± Ø´ØºÙ„ Ø±Ù‚Ù… 1 - ÙŠÙ†Ø§ÙŠØ± 2025\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©</label>\n            <select\n              value={newWorkOrder.priority}\n              onChange={(e) => setNewWorkOrder({...newWorkOrder, priority: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"Ø¹Ø§Ø¯ÙŠ\">Ø¹Ø§Ø¯ÙŠ</option>\n              <option value=\"Ù…Ù‡Ù…\">Ù…Ù‡Ù…</option>\n              <option value=\"Ø·Ø§Ø±Ø¦\">Ø·Ø§Ø±Ø¦</option>\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©</label>\n            <div className=\"p-2 bg-gray-100 rounded\">\n              {selectedInvoices.length} ÙØ§ØªÙˆØ±Ø© Ù…Ø­Ø¯Ø¯Ø©\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium mb-1\">ÙˆØµÙ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„</label>\n          <textarea\n            value={newWorkOrder.description}\n            onChange={(e) => setNewWorkOrder({...newWorkOrder, description: e.target.value})}\n            className=\"w-full p-2 border border-gray-300 rounded h-20\"\n            placeholder=\"ÙˆØµÙ Ø¥Ø¶Ø§ÙÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n          />\n        </div>\n        \n        <h4 className=\"font-medium mb-2\">Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙÙˆØ§ØªÙŠØ±:</h4>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4 max-h-60 overflow-y-auto border rounded p-4\">\n          {getAvailableInvoices().map(invoice => (\n            <div \n              key={invoice.id} \n              className={`border rounded-lg p-3 cursor-pointer transition-colors ${\n                selectedInvoices.includes(invoice.id) \n                  ? 'border-blue-500 bg-blue-50' \n                  : 'border-gray-300 hover:bg-gray-50'\n              }`}\n              onClick={() => toggleInvoiceSelection(invoice.id)}\n            >\n              <div className=\"flex items-center mb-2\">\n                <input\n                  type=\"checkbox\"\n                  checked={selectedInvoices.includes(invoice.id)}\n                  onChange={() => {}}\n                  className=\"ml-2\"\n                />\n                <h5 className=\"font-semibold\">{invoice.invoice_number}</h5>\n              </div>\n              <p className=\"text-sm text-gray-600\">Ø§Ù„Ø¹Ù…ÙŠÙ„: {invoice.customer_name}</p>\n              <p className=\"text-sm text-gray-600\">\n                Ø§Ù„ØªØ§Ø±ÙŠØ®: {new Date(invoice.date).toLocaleDateString('ar-EG')}\n              </p>\n              <p className=\"text-sm font-medium\">\n                Ø§Ù„Ù…Ø¨Ù„Øº: Ø¬.Ù… {invoice.total_amount?.toFixed(2) || '0.00'}\n              </p>\n              <p className=\"text-sm\">\n                Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: {invoice.items?.length || 0} ØµÙ†Ù\n              </p>\n              <span className={`inline-block px-2 py-1 rounded text-xs mt-1 ${\n                invoice.status === 'ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°' \n                  ? 'bg-green-100 text-green-800' \n                  : 'bg-blue-100 text-blue-800'\n              }`}>\n                {invoice.status}\n              </span>\n            </div>\n          ))}\n        </div>\n        \n        {getAvailableInvoices().length === 0 && (\n          <div className=\"text-center py-8 text-gray-500\">\n            Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙˆØ§ØªÙŠØ± Ù…ØªØ§Ø­Ø© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø´ØºÙ„\n          </div>\n        )}\n        \n        {selectedInvoices.length > 0 && (\n          <div className=\"mb-4 p-3 bg-blue-100 rounded\">\n            <h5 className=\"font-semibold text-blue-800\">Ù…Ù„Ø®Øµ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„:</h5>\n            <p className=\"text-blue-700\">\n              Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙÙˆØ§ØªÙŠØ±: {selectedInvoices.length} ÙØ§ØªÙˆØ±Ø©\n            </p>\n            <p className=\"text-blue-700\">\n              Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ù„Øº: Ø¬.Ù… {invoices\n                .filter(inv => selectedInvoices.includes(inv.id))\n                .reduce((sum, inv) => sum + (inv.total_amount || 0), 0)\n                .toFixed(2)}\n            </p>\n            <p className=\"text-blue-700\">\n              Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: {invoices\n                .filter(inv => selectedInvoices.includes(inv.id))\n                .reduce((sum, inv) => sum + (inv.items?.length || 0), 0)} ØµÙ†Ù\n            </p>\n          </div>\n        )}\n        \n        <button\n          onClick={createWorkOrderFromMultipleInvoices}\n          className=\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\"\n          disabled={selectedInvoices.length === 0}\n        >\n          Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ ({selectedInvoices.length} ÙØ§ØªÙˆØ±Ø©)\n        </button>\n      </div>\n\n      {/* Work Orders List */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´ØºÙ„ ({workOrders.length})</h3>\n        \n        {workOrders.map(workOrder => {\n          // Handle both single invoice and multiple invoices work orders\n          const workOrderInvoices = workOrder.invoices || (workOrder.invoice_id ? [getInvoiceDetails(workOrder.invoice_id)] : []);\n          \n          return (\n            <div key={workOrder.id} className=\"border rounded-lg p-4 mb-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                <div>\n                  <h4 className=\"font-semibold text-lg\">\n                    {workOrder.title || `Ø£Ù…Ø± Ø´ØºÙ„ #${workOrder.id.slice(-8)}`}\n                  </h4>\n                  <p><strong>Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:</strong> \n                    <span className={`mr-2 px-2 py-1 rounded text-sm ${\n                      workOrder.priority === 'Ø·Ø§Ø±Ø¦' ? 'bg-red-100 text-red-800' :\n                      workOrder.priority === 'Ù…Ù‡Ù…' ? 'bg-yellow-100 text-yellow-800' :\n                      'bg-blue-100 text-blue-800'\n                    }`}>\n                      {workOrder.priority || 'Ø¹Ø§Ø¯ÙŠ'}\n                    </span>\n                  </p>\n                  <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡:</strong> {new Date(workOrder.created_at).toLocaleDateString('ar-EG')}</p>\n                  <p><strong>Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ±:</strong> {workOrderInvoices.filter(inv => inv).length}</p>\n                </div>\n                \n                <div>\n                  <p><strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> \n                    <span className=\"mr-2 px-2 py-1 rounded text-sm bg-blue-100 text-blue-800\">\n                      {workOrder.status || 'Ø¬Ø¯ÙŠØ¯'}\n                    </span>\n                  </p>\n                  <p><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ù„Øº:</strong> \n                    Ø¬.Ù… {workOrder.total_amount?.toFixed(2) || \n                    workOrderInvoices.reduce((sum, inv) => sum + (inv?.total_amount || 0), 0).toFixed(2)}\n                  </p>\n                  {workOrder.description && (\n                    <p><strong>Ø§Ù„ÙˆØµÙ:</strong> {workOrder.description}</p>\n                  )}\n                  {workOrder.supervisor_name && (\n                    <p><strong>Ø§Ù„Ù…Ø´Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØªØµÙ†ÙŠØ¹:</strong> {workOrder.supervisor_name}</p>\n                  )}\n                  {workOrder.is_daily && (\n                    <p><strong>Ù†ÙˆØ¹ Ø§Ù„Ø£Ù…Ø±:</strong> <span className=\"text-green-600\">Ø£Ù…Ø± Ø´ØºÙ„ ÙŠÙˆÙ…ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠ</span></p>\n                  )}\n                </div>\n              </div>\n              \n              {/* Work Order Invoices */}\n              <div className=\"mb-4\">\n                <h5 className=\"font-medium mb-2\">Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø¯Ø±Ø¬Ø©:</h5>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\n                  {workOrderInvoices.filter(invoice => invoice).map((invoice, index) => (\n                    <div key={index} className=\"bg-gray-50 p-3 rounded border\">\n                      <p><strong>Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©:</strong> {invoice.invoice_number}</p>\n                      <p><strong>Ø§Ù„Ø¹Ù…ÙŠÙ„:</strong> {invoice.customer_name}</p>\n                      <p><strong>Ø§Ù„Ù…Ø¨Ù„Øº:</strong> Ø¬.Ù… {invoice.total_amount?.toFixed(2) || '0.00'}</p>\n                      <p><strong>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</strong> {invoice.items?.length || 0} ØµÙ†Ù</p>\n                    </div>\n                  ))}\n                </div>\n              </div>\n              \n              {/* Work Order Items Details */}\n              <div className=\"overflow-x-auto mb-4\">\n                <h5 className=\"font-medium mb-2\">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</h5>\n                <table className=\"w-full border-collapse border border-gray-300\">\n                  <thead>\n                    <tr className=\"bg-gray-100\">\n                      <th className=\"border border-gray-300 p-2\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>\n                      <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„</th>\n                      <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</th>\n                      <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ù‚Ø§Ø³</th>\n                      <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙƒÙ…ÙŠØ©</th>\n                      <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø®Ø§Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©</th>\n                      <th className=\"border border-gray-300 p-2\">ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø©</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {workOrderInvoices.filter(invoice => invoice).map(invoice => \n                      invoice.items?.map((item, itemIndex) => (\n                        <tr key={`${invoice.id}-${itemIndex}`}>\n                          <td className=\"border border-gray-300 p-2\">{invoice.invoice_number}</td>\n                          <td className=\"border border-gray-300 p-2\">{item.seal_type}</td>\n                          <td className=\"border border-gray-300 p-2\">{item.material_type}</td>\n                          <td className=\"border border-gray-300 p-2\">\n                            {item.inner_diameter} Ã— {item.outer_diameter} Ã— {item.height}\n                          </td>\n                          <td className=\"border border-gray-300 p-2\">{item.quantity}</td>\n                          <td className=\"border border-gray-300 p-2\">\n                            {item.material_details ? (\n                              item.material_details.is_finished_product ? (\n                                <span className=\"px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm\">\n                                  Ù…Ù†ØªØ¬ Ø¬Ø§Ù‡Ø²\n                                </span>\n                              ) : (\n                                <span className=\"px-2 py-1 bg-green-100 text-green-800 rounded text-sm\">\n                                  {item.material_details.material_type}\n                                </span>\n                              )\n                            ) : (\n                              <span className=\"px-2 py-1 bg-green-100 text-green-800 rounded text-sm\">\n                                {item.material_used || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}\n                              </span>\n                            )}\n                          </td>\n                          <td className=\"border border-gray-300 p-2\">\n                            <div className=\"font-mono text-sm\">\n                              {item.material_details ? (\n                                item.material_details.is_finished_product ? (\n                                  <div className=\"text-center font-semibold text-blue-600\">\n                                    Ù…Ø®Ø²Ù† Ø§Ù†ØªØ§Ø¬ ØªØ§Ù…\n                                  </div>\n                                ) : (\n                                  <div>\n                                    <div className=\"font-semibold\">\n                                      {item.unit_code_display || item.material_details.unit_code}\n                                    </div>\n                                    <div className=\"text-xs text-gray-600\">\n                                      {item.material_details.inner_diameter} - {item.material_details.outer_diameter}\n                                    </div>\n                                  </div>\n                                )\n                              ) : (\n                                // Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø£Ùˆ Ø¹Ù†Ø¯Ù…Ø§ Ù„Ø§ ØªÙˆØ¬Ø¯ material_details\n                                <div>\n                                  <div className=\"font-semibold\">{item.material_used || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>\n                                  <div className=\"text-xs text-gray-600\">\n                                    Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø®Ø§Ù…Ø© ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©\n                                  </div>\n                                </div>\n                              )}\n                            </div>\n                          </td>\n                        </tr>\n                      )) || []\n                    )}\n                  </tbody>\n                </table>\n              </div>\n              \n              {/* Work Order Actions */}\n              <div className=\"flex space-x-4 space-x-reverse\">\n                <button \n                  onClick={() => printWorkOrder(workOrder)}\n                  className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n                  Ø·Ø¨Ø§Ø¹Ø© Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„\n                </button>\n                <button className=\"bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600\">\n                  ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„Ø©\n                </button>\n                <button \n                  onClick={() => {\n                    setSelectedWorkOrderId(workOrder.id);\n                    setShowAddToExisting(true);\n                  }}\n                  className=\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\">\n                  Ø¥Ø¶Ø§ÙØ© ÙØ§ØªÙˆØ±Ø©\n                </button>\n                <button \n                  onClick={() => deleteWorkOrder(workOrder.id)}\n                  className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n                  Ø­Ø°Ù\n                </button>\n              </div>\n            </div>\n          );\n        })}\n        \n        {workOrders.length === 0 && (\n          <div className=\"text-center py-8 text-gray-500\">\n            Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ÙˆØ§Ù…Ø± Ø´ØºÙ„\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// Treasury Management Component\nconst Treasury = () => {\n  const { user } = useAuth(); // Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ\n  const [accounts, setAccounts] = useState([\n    { id: 'cash', name: 'Ù†Ù‚Ø¯ÙŠ', balance: 0, transactions: [] },\n    { id: 'vodafone_elsawy', name: 'ÙÙˆØ¯Ø§ÙÙˆÙ† 010', balance: 0, transactions: [] },\n    { id: 'vodafone_wael', name: 'ÙƒØ§Ø´ 0100', balance: 0, transactions: [] },\n    { id: 'deferred', name: 'Ø¢Ø¬Ù„', balance: 0, transactions: [] },\n    { id: 'instapay', name: 'Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ', balance: 0, transactions: [] },\n    { id: 'yad_elsawy', name: 'ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ', balance: 0, transactions: [] }\n  ]);\n  \n  const [selectedAccount, setSelectedAccount] = useState('cash');\n  const [showTransferModal, setShowTransferModal] = useState(false);\n  const [transferData, setTransferData] = useState({\n    from: 'cash',\n    to: 'vodafone_elsawy',\n    amount: '',\n    notes: ''\n  });\n  \n  const [manualTransaction, setManualTransaction] = useState({\n    account: 'cash',\n    type: 'income', // income or expense\n    amount: '',\n    description: '',\n    notes: ''\n  });\n  \n  const [showManualForm, setShowManualForm] = useState(false);\n  const [searchTerm, setSearchTerm] = useState(''); // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø­Ø«\n\n  useEffect(() => {\n    fetchTreasuryData();\n  }, []);\n\n  const fetchTreasuryData = async () => {\n    try {\n      // Fetch balances and transactions from backend\n      const balancesResponse = await axios.get(`${API}/treasury/balances`);\n      const transactionsResponse = await axios.get(`${API}/treasury/transactions`);\n      const invoicesResponse = await axios.get(`${API}/invoices`);\n      const expensesResponse = await axios.get(`${API}/expenses`);\n      \n      const balances = balancesResponse.data;\n      const manualTransactions = transactionsResponse.data;\n      const invoices = invoicesResponse.data;\n      const expenses = expensesResponse.data;\n      \n      // Update accounts with balances and transactions\n      const updatedAccounts = accounts.map(account => {\n        let transactions = [];\n        \n        // Add invoice transactions\n        invoices.forEach(invoice => {\n          const paymentMethodMap = {\n            'Ù†Ù‚Ø¯ÙŠ': 'cash',\n            'ÙÙˆØ¯Ø§ÙÙˆÙ† 010': 'vodafone_elsawy', \n            'ÙƒØ§Ø´ 0100': 'vodafone_wael',\n            'Ø¢Ø¬Ù„': 'deferred',\n            'Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ': 'instapay',\n            'ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ': 'yad_elsawy'\n          };\n          \n          if (paymentMethodMap[invoice.payment_method] === account.id) {\n            transactions.push({\n              id: `inv-${invoice.id}`,\n              type: 'income',\n              amount: invoice.total_amount || 0,\n              description: `ÙØ§ØªÙˆØ±Ø© Ø±Ù‚Ù… ${invoice.invoice_number}`,\n              date: invoice.date,\n              reference: `Ø§Ù„Ø¹Ù…ÙŠÙ„: ${invoice.customer_name}`\n            });\n          }\n        });\n        \n        // Add expense transactions (only from cash account)\n        if (account.id === 'cash') {\n          expenses.forEach(expense => {\n            transactions.push({\n              id: `exp-${expense.id}`,\n              type: 'expense',\n              amount: expense.amount || 0,\n              description: expense.description || 'Ù…ØµØ±ÙˆÙ',\n              date: expense.date,\n              category: expense.category\n            });\n          });\n        }\n        \n        // Add manual transactions\n        manualTransactions\n          .filter(transaction => transaction.account_id === account.id)\n          .forEach(transaction => {\n            transactions.push({\n              id: transaction.id,\n              type: transaction.transaction_type,\n              amount: transaction.amount,\n              description: transaction.description,\n              date: transaction.date,\n              reference: transaction.reference\n            });\n          });\n        \n        return {\n          ...account,\n          balance: balances[account.id] || 0,\n          transactions: transactions.sort((a, b) => new Date(b.date) - new Date(a.date))\n        };\n      });\n      \n      setAccounts(updatedAccounts);\n    } catch (error) {\n      console.error('Error fetching treasury data:', error);\n    }\n  };\n\n  const handleTransfer = async () => {\n    if (!transferData.amount || parseFloat(transferData.amount) <= 0) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');\n      return;\n    }\n    \n    const amount = parseFloat(transferData.amount);\n    const fromAccount = accounts.find(acc => acc.id === transferData.from);\n    \n    if (fromAccount.balance < amount) {\n      alert('Ø§Ù„Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙŠ');\n      return;\n    }\n    \n    try {\n      await axios.post(`${API}/treasury/transfer`, {\n        from_account: transferData.from,\n        to_account: transferData.to,\n        amount: amount,\n        notes: transferData.notes\n      });\n      \n      // Refresh data\n      fetchTreasuryData();\n      \n      setShowTransferModal(false);\n      setTransferData({ from: 'cash', to: 'vodafone_elsawy', amount: '', notes: '' });\n      alert('ØªÙ… Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error processing transfer:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­ÙˆÙŠÙ„');\n    }\n  };\n\n  const handleManualTransaction = async () => {\n    if (!manualTransaction.amount || parseFloat(manualTransaction.amount) <= 0) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');\n      return;\n    }\n    \n    const amount = parseFloat(manualTransaction.amount);\n    \n    try {\n      await axios.post(`${API}/treasury/transactions`, {\n        account_id: manualTransaction.account,\n        transaction_type: manualTransaction.type,\n        amount: amount,\n        description: manualTransaction.description,\n        reference: manualTransaction.notes || 'Ø¥Ø¯Ø®Ø§Ù„ ÙŠØ¯ÙˆÙŠ'\n      });\n      \n      // Refresh data\n      fetchTreasuryData();\n      \n      setShowManualForm(false);\n      setManualTransaction({\n        account: 'cash',\n        type: 'income',\n        amount: '',\n        description: '',\n        notes: ''\n      });\n      alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error processing manual transaction:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');\n    }\n  };\n\n  const clearAccount = async (accountId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØµÙÙŠØ± Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) return;\n    \n    const account = accounts.find(acc => acc.id === accountId);\n    if (!account || account.balance === 0) {\n      alert('Ø§Ù„Ø­Ø³Ø§Ø¨ ÙØ§Ø±Øº Ø¨Ø§Ù„ÙØ¹Ù„ Ø£Ùˆ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');\n      return;\n    }\n    \n    try {\n      // If clearing \"ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ\", transfer to main treasury\n      if (accountId === 'yad_elsawy') {\n        // Transfer to main treasury\n        await axios.post(`${API}/main-treasury/transfer-from-yad?amount=${account.balance}&username=${user.username}`);\n      }\n      \n      // Create expense transaction to zero the account\n      await axios.post(`${API}/treasury/transactions`, {\n        account_id: accountId,\n        transaction_type: 'expense',\n        amount: account.balance,\n        description: `ØªØµÙÙŠØ± Ø­Ø³Ø§Ø¨ ${account.name}${accountId === 'yad_elsawy' ? ' (ØªÙ… Ø§Ù„ØªØ±Ø­ÙŠÙ„ Ù„Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©)' : ''}`,\n        reference: 'ØªØµÙÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ù…Ø¯ÙŠØ±'\n      });\n      \n      // Refresh data\n      fetchTreasuryData();\n      \n      if (accountId === 'yad_elsawy') {\n        alert(`ØªÙ… ØªØµÙÙŠØ± Ø­Ø³Ø§Ø¨ ${account.name} Ø¨Ù†Ø¬Ø§Ø­ ÙˆØªØ±Ø­ÙŠÙ„ Ø§Ù„Ù…Ø¨Ù„Øº ${account.balance.toFixed(2)} Ø¬.Ù… Ù„Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©`);\n      } else {\n        alert(`ØªÙ… ØªØµÙÙŠØ± Ø­Ø³Ø§Ø¨ ${account.name} Ø¨Ù†Ø¬Ø§Ø­`);\n      }\n    } catch (error) {\n      console.error('Error clearing account:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµÙÙŠØ± Ø§Ù„Ø­Ø³Ø§Ø¨');\n    }\n  };\n\n  // Delete single transaction - Only for master\n  const deleteTransaction = async (transactionId) => {\n    if (user?.username !== 'master') {\n      alert('ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„Ø§Øª');\n      return;\n    }\n\n    // Ask user about deletion type\n    const choice = confirm(\n      'ğŸ—‘ï¸ Ø­Ø°Ù Ù…Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ø®Ø²ÙŠÙ†Ø©\\n\\n' +\n      'Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø­Ø°Ù:\\n\\n' +\n      'âœ… Ø§Ø¶ØºØ· \"Ù…ÙˆØ§ÙÙ‚\" â†’ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© ÙˆØ¹ÙƒØ³ ØªØ£Ø«ÙŠØ±Ù‡Ø§ (Ø¹ÙƒØ³ÙŠ)\\n' +\n      'âŒ Ø§Ø¶ØºØ· \"Ø¥Ù„ØºØ§Ø¡\" Ø«Ù… \"Ù…ÙˆØ§ÙÙ‚\" â†’ Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„ ÙÙ‚Ø· (Ø¨Ø¯ÙˆÙ† Ø¹ÙƒØ³)\\n\\n' +\n      'Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ø£ÙˆÙ„ (Ø¹ÙƒØ³ÙŠ) ÙŠÙ†ØµØ­ Ø¨Ù‡ Ù„Ø¶Ù…Ø§Ù† Ø¯Ù‚Ø© Ø§Ù„Ø£Ø±ØµØ¯Ø©'\n    );\n\n    if (choice === null) return; // User pressed Escape\n\n    const reverseTransaction = choice;\n\n    // Final confirmation\n    const confirmMsg = reverseTransaction\n      ? 'ØªØ£ÙƒÙŠØ¯: Ø³ÙŠØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© ÙˆØ¹ÙƒØ³ ØªØ£Ø«ÙŠØ±Ù‡Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø³Ø§Ø¨\\n\\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ'\n      : 'ØªØ£ÙƒÙŠØ¯: Ø³ÙŠØªÙ… Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„ ÙÙ‚Ø· Ø¨Ø¯ÙˆÙ† Ø¹ÙƒØ³ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©\\n\\nâš ï¸ Ù‚Ø¯ ÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰ Ø¯Ù‚Ø© Ø§Ù„Ø£Ø±ØµØ¯Ø©\\n\\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ';\n\n    if (!confirm(confirmMsg)) return;\n\n    try {\n      await axios.delete(`${API}/treasury/transactions/${transactionId}`, {\n        params: { \n          username: user.username,\n          reverse_transaction: reverseTransaction\n        }\n      });\n      \n      alert('âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­');\n      fetchTreasuryData();\n    } catch (error) {\n      console.error('Error deleting transaction:', error);\n      alert(error.response?.data?.detail || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©');\n    }\n  };\n\n  // Treasury Reset Function - Only for Elsawy\n  const resetTreasury = async () => {\n    if (user?.username !== 'Elsawy') {\n      alert('ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨ØªÙ†ÙÙŠØ° Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');\n      return;\n    }\n\n    // Triple confirmation for this critical operation\n    const firstConfirm = confirm('âš ï¸ ØªØ­Ø°ÙŠØ±: Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø³ÙŠØ­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø²ÙŠÙ†Ø© ÙˆÙ„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!\\nÙ‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ');\n    if (!firstConfirm) return;\n\n    const secondConfirm = confirm('âš ï¸ ØªØ£ÙƒÙŠØ¯ Ø«Ø§Ù†ÙŠ: Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª ÙˆØ§Ù„Ø£Ø±ØµØ¯Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹!\\nØ§ÙƒØªØ¨ \"Ù†Ø¹Ù…\" Ù„Ù„ØªØ£ÙƒÙŠØ¯:');\n    if (!secondConfirm) return;\n\n    const finalConfirm = prompt('âš ï¸ Ù„Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØŒ Ø§ÙƒØªØ¨ Ø¨Ø§Ù„Ø¶Ø¨Ø·: \"Ø§Ø­Ø°Ù ÙƒÙ„ Ø´ÙŠØ¡\"');\n    if (finalConfirm !== 'Ø§Ø­Ø°Ù ÙƒÙ„ Ø´ÙŠØ¡') {\n      alert('ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');\n      return;\n    }\n\n    try {\n      const response = await axios.post(`${API}/treasury/reset`, null, {\n        params: { username: user.username }\n      });\n\n      alert(`âœ… ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø²ÙŠÙ†Ø© Ø¨Ù†Ø¬Ø§Ø­!\\nØªÙ… Ø­Ø°Ù ${response.data.deleted_treasury_transactions} Ù…Ø¹Ø§Ù…Ù„Ø©`);\n      \n      // Refresh data\n      fetchTreasuryData();\n    } catch (error) {\n      console.error('Error resetting treasury:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ù…Ø³Ø­ Ø§Ù„Ø®Ø²ÙŠÙ†Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const selectedAccountData = accounts.find(acc => acc.id === selectedAccount);\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-blue-600 mb-4\">Ø§Ù„Ø®Ø²ÙŠÙ†Ø© - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ù…ÙˆØ§Ù„</h2>\n        \n        <div className=\"flex space-x-4 space-x-reverse mb-4\">\n          <button \n            onClick={() => setShowTransferModal(true)}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n            ØªØ­ÙˆÙŠÙ„ Ø£Ù…ÙˆØ§Ù„\n          </button>\n          <button \n            onClick={() => setShowManualForm(true)}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n            Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„ÙŠØ© ÙŠØ¯ÙˆÙŠØ©\n          </button>\n          <button \n            onClick={fetchTreasuryData}\n            className=\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\">\n            Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => window.print()}\n            className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\">\n            Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n          {user?.username === 'Elsawy' && (\n            <button \n              onClick={resetTreasury}\n              className=\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 font-bold border-2 border-red-800\">\n              âš ï¸ Ù…Ø³Ø­ Ø§Ù„Ø®Ø²ÙŠÙ†Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„\n            </button>\n          )}\n          {user?.username === 'Elsawy' && selectedAccount === 'yad_elsawy' && selectedAccountData?.balance > 0 && (\n            <button \n              onClick={() => clearAccount(selectedAccount)}\n              className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n              ØªØµÙÙŠØ± Ø­Ø³Ø§Ø¨ ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Accounts Summary */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-6\">\n        {accounts.map(account => (\n          <div \n            key={account.id}\n            className={`p-4 rounded-lg shadow cursor-pointer transition-colors ${\n              selectedAccount === account.id \n                ? 'bg-blue-100 border-2 border-blue-500' \n                : 'bg-white hover:bg-gray-50'\n            }`}\n            onClick={() => setSelectedAccount(account.id)}\n          >\n            <h3 className=\"font-semibold text-gray-800 mb-2\">{account.name}</h3>\n            <p className={`text-2xl font-bold ${\n              account.balance >= 0 ? 'text-green-600' : 'text-red-600'\n            }`}>\n              Ø¬.Ù… {account.balance.toFixed(2)}\n            </p>\n            <p className=\"text-sm text-gray-600 mt-1\">\n              {account.transactions.length} Ø¹Ù…Ù„ÙŠØ©\n            </p>\n          </div>\n        ))}\n      </div>\n\n      {/* Account Details */}\n      {selectedAccountData && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">\n            ØªÙØ§ØµÙŠÙ„ Ø­Ø³Ø§Ø¨: {selectedAccountData.name}\n          </h3>\n          \n          {/* Search Bar */}\n          <div className=\"mb-4\">\n            <input\n              type=\"text\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              placeholder=\"Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª...\"\n              className=\"w-full p-3 border border-gray-300 rounded-lg\"\n            />\n          </div>\n          \n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full border-collapse border border-gray-300\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù†ÙˆØ¹</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙˆØµÙ</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø¨Ù„Øº</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø±Ø¬Ø¹</th>\n                  {user?.username === 'master' && (\n                    <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n                  )}\n                </tr>\n              </thead>\n              <tbody>\n                {selectedAccountData.transactions\n                  .filter(transaction => \n                    transaction.description.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                    (transaction.reference && transaction.reference.toLowerCase().includes(searchTerm.toLowerCase())) ||\n                    (transaction.category && transaction.category.toLowerCase().includes(searchTerm.toLowerCase()))\n                  )\n                  .map((transaction, index) => (\n                  <tr key={transaction.id || index}>\n                    <td className=\"border border-gray-300 p-2\">\n                      {new Date(transaction.date).toLocaleDateString('ar-EG')}\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <span className={`px-2 py-1 rounded text-xs ${\n                        transaction.type === 'income' ? 'bg-green-100 text-green-800' :\n                        transaction.type === 'expense' ? 'bg-red-100 text-red-800' :\n                        transaction.type === 'transfer_in' ? 'bg-blue-100 text-blue-800' :\n                        'bg-orange-100 text-orange-800'\n                      }`}>\n                        {transaction.type === 'income' ? 'Ø¯Ø®Ù„' :\n                         transaction.type === 'expense' ? 'Ù…ØµØ±ÙˆÙ' :\n                         transaction.type === 'transfer_in' ? 'ØªØ­ÙˆÙŠÙ„ ÙˆØ§Ø±Ø¯' : 'ØªØ­ÙˆÙŠÙ„ ØµØ§Ø¯Ø±'}\n                      </span>\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">{transaction.description}</td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <span className={\n                        transaction.type === 'income' || transaction.type === 'transfer_in' \n                          ? 'text-green-600 font-semibold' \n                          : 'text-red-600 font-semibold'\n                      }>\n                        {transaction.type === 'income' || transaction.type === 'transfer_in' ? '+' : '-'}\n                        Ø¬.Ù… {transaction.amount.toFixed(2)}\n                      </span>\n                    </td>\n                    <td className=\"border border-gray-300 p-2 text-sm text-gray-600\">\n                      {transaction.reference || transaction.category || '-'}\n                    </td>\n                    {user?.username === 'master' && (\n                      <td className=\"border border-gray-300 p-2 text-center\">\n                        <button\n                          onClick={() => deleteTransaction(transaction.id)}\n                          className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                          title=\"Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©\"\n                        >\n                          ğŸ—‘ï¸\n                        </button>\n                      </td>\n                    )}\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n            \n            {selectedAccountData.transactions.length === 0 && (\n              <div className=\"text-center py-8 text-gray-500\">\n                Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Transfer Modal */}\n      {showTransferModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4\">\n            <h3 className=\"text-lg font-semibold mb-4\">ØªØ­ÙˆÙŠÙ„ Ø£Ù…ÙˆØ§Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</h3>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù…Ù† Ø­Ø³Ø§Ø¨</label>\n                <select\n                  value={transferData.from}\n                  onChange={(e) => setTransferData({...transferData, from: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                >\n                  {accounts.map(account => (\n                    <option key={account.id} value={account.id}>\n                      {account.name} (Ø¬.Ù… {account.balance.toFixed(2)})\n                    </option>\n                  ))}\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø¥Ù„Ù‰ Ø­Ø³Ø§Ø¨</label>\n                <select\n                  value={transferData.to}\n                  onChange={(e) => setTransferData({...transferData, to: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                >\n                  {accounts.filter(acc => acc.id !== transferData.from).map(account => (\n                    <option key={account.id} value={account.id}>\n                      {account.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù…Ø¨Ù„Øº</label>\n                <input\n                  type=\"number\"\n                  value={transferData.amount}\n                  onChange={(e) => setTransferData({...transferData, amount: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"0.00\"\n                  min=\"0\"\n                  step=\"0.01\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>\n                <input\n                  type=\"text\"\n                  value={transferData.notes}\n                  onChange={(e) => setTransferData({...transferData, notes: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                />\n              </div>\n            </div>\n            \n            <div className=\"flex space-x-4 space-x-reverse mt-6\">\n              <button\n                onClick={handleTransfer}\n                className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n              >\n                ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„\n              </button>\n              <button\n                onClick={() => setShowTransferModal(false)}\n                className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n              >\n                Ø¥Ù„ØºØ§Ø¡\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Manual Transaction Modal */}\n      {showManualForm && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„ÙŠØ© ÙŠØ¯ÙˆÙŠØ©</h3>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø­Ø³Ø§Ø¨</label>\n                <select\n                  value={manualTransaction.account}\n                  onChange={(e) => setManualTransaction({...manualTransaction, account: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                >\n                  {accounts.map(account => (\n                    <option key={account.id} value={account.id}>\n                      {account.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</label>\n                <select\n                  value={manualTransaction.type}\n                  onChange={(e) => setManualTransaction({...manualTransaction, type: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                >\n                  <option value=\"income\">Ø¯Ø®Ù„</option>\n                  <option value=\"expense\">Ù…ØµØ±ÙˆÙ</option>\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù…Ø¨Ù„Øº</label>\n                <input\n                  type=\"number\"\n                  value={manualTransaction.amount}\n                  onChange={(e) => setManualTransaction({...manualTransaction, amount: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"0.00\"\n                  min=\"0\"\n                  step=\"0.01\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ÙˆØµÙ</label>\n                <input\n                  type=\"text\"\n                  value={manualTransaction.description}\n                  onChange={(e) => setManualTransaction({...manualTransaction, description: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"ÙˆØµÙ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>\n                <input\n                  type=\"text\"\n                  value={manualTransaction.notes}\n                  onChange={(e) => setManualTransaction({...manualTransaction, notes: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                />\n              </div>\n            </div>\n            \n            <div className=\"flex space-x-4 space-x-reverse mt-6\">\n              <button\n                onClick={handleManualTransaction}\n                className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n              >\n                Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©\n              </button>\n              <button\n                onClick={() => setShowManualForm(false)}\n                className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n              >\n                Ø¥Ù„ØºØ§Ø¡\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Backup and Restore Component\nconst Backup = () => {\n  const [backups, setBackups] = useState([]);\n  const [driveFiles, setDriveFiles] = useState([]);\n  const [driveStatus, setDriveStatus] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [creating, setCreating] = useState(false);\n  const [activeTab, setActiveTab] = useState('local'); // 'local' or 'drive'\n  const {user} = useAuth();\n  \n  // Bulk deletion states\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [deletePassword, setDeletePassword] = useState('');\n  const [deleteType, setDeleteType] = useState(''); // 'date', 'last-1', 'last-2'\n  const [deleteDate, setDeleteDate] = useState('');\n\n  useEffect(() => {\n    fetchBackups();\n    fetchDriveStatus();\n  }, []);\n\n  const fetchBackups = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.get(`${API}/backup/list`);\n      setBackups(response.data || []);\n    } catch (error) {\n      console.error('Error fetching backups:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchDriveStatus = async () => {\n    try {\n      const response = await axios.get(`${API}/backup/drive/status`);\n      setDriveStatus(response.data);\n    } catch (error) {\n      console.error('Error fetching drive status:', error);\n    }\n  };\n\n  const fetchDriveFiles = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.get(`${API}/backup/drive/list`);\n      setDriveFiles(response.data.files || []);\n    } catch (error) {\n      console.error('Error fetching drive files:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ù…Ù„ÙØ§Øª Google Drive');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Bulk deletion functions\n  const openDeleteModal = (type) => {\n    if (user?.username !== 'Elsawy') {\n      alert('ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨ØªÙ†ÙÙŠØ° Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');\n      return;\n    }\n    setDeleteType(type);\n    setDeletePassword('');\n    setDeleteDate('');\n    setShowDeleteModal(true);\n  };\n\n  const handleBulkDelete = async () => {\n    if (!deletePassword) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');\n      return;\n    }\n\n    if (deleteType === 'date' && !deleteDate) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªØ§Ø±ÙŠØ®');\n      return;\n    }\n\n    const confirmMessage = deleteType === 'date' \n      ? `Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ ÙÙˆØ§ØªÙŠØ± ÙŠÙˆÙ… ${deleteDate}ØŸ\\n\\nâš ï¸ Ø³ÙŠØªÙ…:\\nâ€¢ Ù†Ù‚Ù„ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ù„Ù„Ù…Ø­Ø°ÙˆÙØ©\\nâ€¢ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ù„Ù„Ù…Ø®Ø²Ù†\\nâ€¢ Ø¹ÙƒØ³ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø®Ø²ÙŠÙ†Ø©`\n      : deleteType === 'last-1'\n      ? `Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¢Ø®Ø± ÙØ§ØªÙˆØ±Ø©ØŸ\\n\\nâš ï¸ Ø³ÙŠØªÙ…:\\nâ€¢ Ù†Ù‚Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ù„Ù„Ù…Ø­Ø°ÙˆÙØ©\\nâ€¢ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ù„Ù„Ù…Ø®Ø²Ù†\\nâ€¢ Ø¹ÙƒØ³ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø®Ø²ÙŠÙ†Ø©`\n      : `Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¢Ø®Ø± ÙØ§ØªÙˆØ±ØªÙŠÙ†ØŸ\\n\\nâš ï¸ Ø³ÙŠØªÙ…:\\nâ€¢ Ù†Ù‚Ù„ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ù„Ù„Ù…Ø­Ø°ÙˆÙØ©\\nâ€¢ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ù„Ù„Ù…Ø®Ø²Ù†\\nâ€¢ Ø¹ÙƒØ³ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø®Ø²ÙŠÙ†Ø©`;\n\n    if (!confirm(confirmMessage)) {\n      return;\n    }\n\n    setLoading(true);\n    try {\n      let response;\n      \n      if (deleteType === 'date') {\n        response = await axios.post(`${API}/invoices/bulk-delete-by-date`, null, {\n          params: {\n            date: deleteDate,\n            password: deletePassword,\n            username: user.username\n          }\n        });\n      } else {\n        const count = deleteType === 'last-1' ? 1 : 2;\n        response = await axios.post(`${API}/invoices/bulk-delete-last`, null, {\n          params: {\n            count: count,\n            password: deletePassword,\n            username: user.username\n          }\n        });\n      }\n\n      // Show detailed results\n      const data = response.data;\n      let message = `âœ… ${data.message}\\n\\nØ¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©: ${data.deleted_count}\\n\\n`;\n      \n      if (data.invoices && data.invoices.length > 0) {\n        message += 'Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©:\\n';\n        data.invoices.forEach(inv => {\n          message += `â€¢ ${inv.invoice_number} - ${inv.customer_name} - ${inv.total_amount} Ø¬.Ù…\\n`;\n        });\n      }\n\n      alert(message);\n      setShowDeleteModal(false);\n      setDeletePassword('');\n      setDeleteDate('');\n      \n    } catch (error) {\n      console.error('Error deleting invoices:', error);\n      alert(error.response?.data?.detail || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ÙÙˆØ§ØªÙŠØ±');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const checkBackupStatus = async (backupId, attempts = 0) => {\n    try {\n      const response = await axios.get(`${API}/backup/status/${backupId}`);\n      const status = response.data.status;\n      \n      if (status === 'completed' || status === 'completed_with_drive') {\n        setCreating(false);\n        let message = `âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!\\n\\nØ¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª: ${response.data.total_documents}`;\n        if (status === 'completed_with_drive') {\n          message += '\\n\\nğŸŒ ØªÙ… Ø§Ù„Ø±ÙØ¹ Ø¥Ù„Ù‰ Google Drive Ø¨Ù†Ø¬Ø§Ø­!';\n        }\n        alert(message);\n        fetchBackups();\n        fetchDriveFiles();\n      } else if (status === 'failed') {\n        setCreating(false);\n        alert('âŒ ÙØ´Ù„Øª Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ\\n\\n' + (response.data.error || 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'));\n        fetchBackups();\n      } else if (status === 'in_progress' && attempts < 60) {\n        // Keep checking every 2 seconds for up to 2 minutes\n        setTimeout(() => checkBackupStatus(backupId, attempts + 1), 2000);\n      } else {\n        // Timeout after 2 minutes\n        setCreating(false);\n        alert('â±ï¸ Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©.');\n        fetchBackups();\n      }\n    } catch (error) {\n      console.error('Error checking backup status:', error);\n      if (attempts < 60) {\n        setTimeout(() => checkBackupStatus(backupId, attempts + 1), 2000);\n      } else {\n        setCreating(false);\n        fetchBackups();\n      }\n    }\n  };\n\n  const createBackup = async () => {\n    if (!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ø­Ù„ÙŠØ© Ø§Ù„Ø¢Ù†ØŸ')) {\n      return;\n    }\n\n    setCreating(true);\n    try {\n      const response = await axios.post(`${API}/backup/create`, null, {\n        params: { \n          username: user?.username\n        }\n      });\n      \n      // Start polling for status\n      if (response.data.backup_id) {\n        alert(`â³ ${response.data.message}\\n\\nØ³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡.`);\n        checkBackupStatus(response.data.backup_id);\n      } else {\n        setCreating(false);\n        alert('âŒ ÙØ´Ù„ ÙÙŠ Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ');\n      }\n    } catch (error) {\n      console.error('Error creating backup:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: ' + (error.response?.data?.detail || error.message));\n      setCreating(false);\n    }\n  };\n\n  const downloadBackup = async (backupId, createdAt) => {\n    try {\n      const response = await axios.get(`${API}/backup/download/${backupId}`, {\n        responseType: 'blob'\n      });\n      \n      // Create download link\n      const timestamp = new Date(createdAt).toISOString().replace(/[:.]/g, '-').slice(0, -5);\n      const filename = `backup_${timestamp}.json`;\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', filename);\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n      window.URL.revokeObjectURL(url);\n      \n      alert('âœ… ØªÙ… ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!');\n    } catch (error) {\n      console.error('Error downloading backup:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙ†Ø²ÙŠÙ„: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const handleFileUpload = async (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    // Check file type\n    if (!file.name.endsWith('.json')) {\n      alert('âŒ ÙŠØ¬Ø¨ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù JSON');\n      event.target.value = '';\n      return;\n    }\n\n    // Ask user what to do\n    const action = confirm(\n      `ØªÙ… Ø§Ø®ØªÙŠØ§Ø±: ${file.name}\\n\\n` +\n      `Ø§Ø®ØªØ± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡:\\n\\n` +\n      `âœ… Ù…ÙˆØ§ÙÙ‚ = Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø³Ø®Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© ÙÙ‚Ø· (ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ±Ø¬Ø§Ø¹Ù‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹)\\n` +\n      `âŒ Ø¥Ù„ØºØ§Ø¡ = Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø© (Ø³ÙŠØ­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©)\\n\\n` +\n      `Ù…Ø§Ø°Ø§ ØªØ±ÙŠØ¯ØŸ`\n    );\n\n    if (action) {\n      // Add to list only\n      await uploadBackupFile(file, false);\n    } else {\n      // Ask for confirmation before restore\n      if (confirm(`âš ï¸ ØªØ­Ø°ÙŠØ±!\\n\\nÙ‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø©ØŸ\\n\\nØ³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©!\\n\\nÙ‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!`)) {\n        await uploadBackupFile(file, true);\n      }\n    }\n\n    // Reset input\n    event.target.value = '';\n  };\n\n  const uploadBackupFile = async (file, restoreDirectly) => {\n    setLoading(true);\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n\n      let response;\n      if (restoreDirectly) {\n        // Restore directly\n        response = await axios.post(`${API}/backup/restore-from-file`, formData, {\n          params: { username: user?.username },\n          headers: { 'Content-Type': 'multipart/form-data' }\n        });\n        \n        alert(`âœ… ${response.data.message}\\n\\n` +\n              `Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ù…Ø³ØªØ±Ø¬Ø¹Ø©: ${response.data.collections_restored}\\n` +\n              `Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª: ${response.data.total_documents}\\n\\n` +\n              `Ø³ÙŠØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©...`);\n        \n        setTimeout(() => window.location.reload(), 2000);\n      } else {\n        // Upload to list\n        response = await axios.post(`${API}/backup/upload`, formData, {\n          headers: { 'Content-Type': 'multipart/form-data' }\n        });\n        \n        alert(`âœ… ${response.data.message}\\n\\n` +\n              `ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ù‡Ø°Ù‡ Ø§Ù„Ù†Ø³Ø®Ø© Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©`);\n        \n        fetchBackups();\n      }\n    } catch (error) {\n      console.error('Error uploading backup:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£: ' + (error.response?.data?.detail || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const restoreBackup = async (backupId, createdAt) => {\n    if (!confirm(`âš ï¸ ØªØ­Ø°ÙŠØ± Ø®Ø·ÙŠØ±!\\n\\nÙ‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©ØŸ\\n\\nØ§Ù„ØªØ§Ø±ÙŠØ®: ${new Date(createdAt).toLocaleString('ar-EG')}\\n\\nØ³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙˆØ§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§ Ø¨Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©!\\n\\nÙ‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!`)) {\n      return;\n    }\n\n    // Second confirmation\n    if (!confirm('ØªØ£ÙƒÙŠØ¯ Ù†Ù‡Ø§Ø¦ÙŠ: Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ ØªÙ…Ø§Ù…Ø§Ù‹ØŸ')) {\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const response = await axios.post(`${API}/backup/restore/${backupId}`, null, {\n        params: { username: user?.username }\n      });\n      alert(`âœ… ${response.data.message}\\n\\nØ§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ù…Ø³ØªØ±Ø¬Ø¹Ø©: ${response.data.collections_restored}\\nØ¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª: ${response.data.total_documents}\\n\\nÙŠÙÙ†ØµØ­ Ø¨Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©.`);\n      \n      // Reload page after successful restore\n      if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø¢Ù†ØŸ')) {\n        window.location.reload();\n      }\n    } catch (error) {\n      console.error('Error restoring backup:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: ' + (error.response?.data?.detail || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteBackup = async (backupId, createdAt) => {\n    if (!confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©ØŸ\\n\\nØ§Ù„ØªØ§Ø±ÙŠØ®: ${new Date(createdAt).toLocaleString('ar-EG')}\\n\\nÙ‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!`)) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/backup/${backupId}`);\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');\n      fetchBackups();\n      fetchDriveFiles(); // Refresh Drive files too\n    } catch (error) {\n      console.error('Error deleting backup:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  // Google Drive Functions\n  const uploadToDrive = async (backupId) => {\n    if (!driveStatus?.enabled) {\n      alert('âŒ Google Drive ØºÙŠØ± Ù…ØªØµÙ„!\\n\\nÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Google Drive.');\n      return;\n    }\n\n    try {\n      const response = await axios.post(`${API}/backup/${backupId}/upload-to-drive`);\n      alert(`âœ… ${response.data.message}`);\n      fetchBackups();\n      fetchDriveFiles();\n    } catch (error) {\n      console.error('Error uploading to Drive:', error);\n      let errorMsg = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¹ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©:\\n\\n';\n      \n      if (error.response?.data?.detail) {\n        errorMsg += error.response.data.detail;\n        \n        // Check for storage quota error\n        if (error.response.data.detail.includes('storage quota') || error.response.data.detail.includes('403')) {\n          errorMsg += '\\n\\nğŸ’¡ Ø§Ù„Ø­Ù„:\\n';\n          errorMsg += '1. Ø§ÙØªØ­ Google Drive\\n';\n          errorMsg += '2. Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø¬Ù„Ø¯ \"Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„\"\\n';\n          errorMsg += '3. Ø´Ø§Ø±Ùƒ Ø§Ù„Ù…Ø¬Ù„Ø¯ Ù…Ø¹:\\n   master-seal-backup@master-seal-backup.iam.gserviceaccount.com\\n';\n          errorMsg += '4. Ø§Ø®ØªØ± ØµÙ„Ø§Ø­ÙŠØ© \"Editor\"';\n        }\n      } else {\n        errorMsg += error.message;\n      }\n      \n      alert(errorMsg);\n    }\n  };\n\n  const downloadFromDrive = async (fileId, fileName) => {\n    try {\n      const response = await axios.get(`${API}/backup/drive/download/${fileId}`, {\n        responseType: 'blob'\n      });\n      \n      // Create download link\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', fileName);\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n      \n      alert('âœ… ØªÙ… ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error downloading from Drive:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„Ù: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const restoreFromDrive = async (fileId, fileName) => {\n    if (!confirm(`âš ï¸ ØªØ­Ø°ÙŠØ±!\\n\\nÙ‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ù† Google DriveØŸ\\n\\nÙ…Ù„Ù: ${fileName}\\n\\nØ³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©!`)) {\n      return;\n    }\n\n    if (!confirm('ØªØ£ÙƒÙŠØ¯ Ù†Ù‡Ø§Ø¦ÙŠ: Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ ØªÙ…Ø§Ù…Ø§Ù‹ØŸ')) {\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const response = await axios.post(`${API}/backup/drive/restore/${fileId}`);\n      alert(`âœ… ${response.data.message}\\n\\nØ§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ù…Ø³ØªØ±Ø¬Ø¹Ø©: ${response.data.collections_restored}\\nØ¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª: ${response.data.total_documents}`);\n      \n      if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø¢Ù†ØŸ')) {\n        window.location.reload();\n      }\n    } catch (error) {\n      console.error('Error restoring from Drive:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹: ' + (error.response?.data?.detail || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteFromDrive = async (fileId, fileName) => {\n    if (!confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ù…Ù„Ù Ù…Ù† Google DriveØŸ\\n\\n${fileName}\\n\\nÙ‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!`)) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/backup/drive/${fileId}`);\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù„Ù Ù…Ù† Google Drive Ø¨Ù†Ø¬Ø§Ø­');\n      fetchDriveFiles();\n    } catch (error) {\n      console.error('Error deleting from Drive:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­Ø°Ù: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  // Switch tab and load data\n  const switchTab = (tab) => {\n    setActiveTab(tab);\n    if (tab === 'drive' && driveFiles.length === 0) {\n      fetchDriveFiles();\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-3xl font-bold\">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ</h1>\n        <div className=\"flex space-x-2 space-x-reverse flex-wrap gap-2\">\n          <button\n            onClick={createBackup}\n            disabled={creating}\n            className={`px-6 py-2 rounded text-white ${\n              creating ? 'bg-gray-400 cursor-not-allowed' : 'bg-green-500 hover:bg-green-600'\n            }`}\n          >\n            {creating ? 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡...' : 'ğŸ’¾ Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø©'}\n          </button>\n          <label className=\"bg-purple-500 text-white px-6 py-2 rounded hover:bg-purple-600 cursor-pointer\">\n            ğŸ“¤ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù†Ø³Ø®Ø©\n            <input\n              type=\"file\"\n              accept=\".json\"\n              onChange={handleFileUpload}\n              className=\"hidden\"\n            />\n          </label>\n          <button\n            onClick={fetchBackups}\n            disabled={loading}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n          >\n            ğŸ”„ ØªØ­Ø¯ÙŠØ«\n          </button>\n        </div>\n      </div>\n\n      {/* Auto Backup Info */}\n      <div className=\"bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-lg mb-6 border-r-4 border-blue-500\">\n        <h3 className=\"font-bold mb-2\">ğŸ“… Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</h3>\n        <p className=\"text-sm text-gray-700\">\n          ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ø­Ù„ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙƒÙ„ ÙŠÙˆÙ… ÙÙŠ ØªÙ…Ø§Ù… Ø§Ù„Ø³Ø§Ø¹Ø© 7:00 Ù…Ø³Ø§Ø¡Ù‹. \n          ÙŠÙ…ÙƒÙ†Ùƒ ØªÙ†Ø²ÙŠÙ„ Ø£ÙŠ Ù†Ø³Ø®Ø© ÙˆØ±ÙØ¹Ù‡Ø§ ÙŠØ¯ÙˆÙŠØ§Ù‹ Ø¥Ù„Ù‰ Google Drive Ø£Ùˆ Ø£ÙŠ Ø®Ø¯Ù…Ø© Ø³Ø­Ø§Ø¨ÙŠØ© Ø£Ø®Ø±Ù‰.\n        </p>\n      </div>\n\n      {/* Bulk Invoice Deletion Section - Elsawy Only */}\n      {user?.username === 'Elsawy' && (\n        <div className=\"bg-gradient-to-r from-red-50 to-orange-100 p-6 rounded-lg mb-6 border-r-4 border-red-500\">\n          <h3 className=\"font-bold text-xl mb-4 flex items-center gap-2\">\n            ğŸ—‘ï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ± - Ø­Ø°Ù Ø¬Ù…Ø§Ø¹ÙŠ\n          </h3>\n          <p className=\"text-sm text-gray-700 mb-4\">\n            âš ï¸ <strong>ØªØ­Ø°ÙŠØ±:</strong> Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø°Ù Ø³ÙŠØªÙ… Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ù„Ù„Ù…Ø®Ø²Ù† ÙˆØ¹ÙƒØ³ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø®Ø²ÙŠÙ†Ø© ÙˆÙ†Ù‚Ù„ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ù„Ù„Ù…Ø­Ø°ÙˆÙØ©\n          </p>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            {/* Delete by Date */}\n            <button\n              onClick={() => openDeleteModal('date')}\n              className=\"bg-red-500 hover:bg-red-600 text-white px-6 py-4 rounded-lg font-semibold transition-all flex items-center justify-center gap-2\"\n            >\n              ğŸ“… Ø­Ø°Ù ÙÙˆØ§ØªÙŠØ± ÙŠÙˆÙ… Ù…Ø¹ÙŠÙ†\n            </button>\n\n            {/* Delete Last Invoice */}\n            <button\n              onClick={() => openDeleteModal('last-1')}\n              className=\"bg-orange-500 hover:bg-orange-600 text-white px-6 py-4 rounded-lg font-semibold transition-all flex items-center justify-center gap-2\"\n            >\n              ğŸ”´ Ø­Ø°Ù Ø¢Ø®Ø± ÙØ§ØªÙˆØ±Ø©\n            </button>\n\n            {/* Delete Last 2 Invoices */}\n            <button\n              onClick={() => openDeleteModal('last-2')}\n              className=\"bg-orange-600 hover:bg-orange-700 text-white px-6 py-4 rounded-lg font-semibold transition-all flex items-center justify-center gap-2\"\n            >\n              ğŸ”´ğŸ”´ Ø­Ø°Ù Ø¢Ø®Ø± ÙØ§ØªÙˆØ±ØªÙŠÙ†\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Delete Modal */}\n      {showDeleteModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\" dir=\"rtl\">\n          <div className=\"bg-white rounded-lg p-8 max-w-md w-full shadow-2xl\">\n            <h3 className=\"text-2xl font-bold mb-4 text-red-600\">\n              âš ï¸ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù\n            </h3>\n            \n            <div className=\"mb-4 p-4 bg-yellow-50 border-r-4 border-yellow-500 rounded\">\n              <p className=\"text-sm text-gray-700\">\n                {deleteType === 'date' \n                  ? 'ğŸ—“ï¸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ ÙÙˆØ§ØªÙŠØ± Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ù…Ø­Ø¯Ø¯'\n                  : deleteType === 'last-1'\n                  ? 'ğŸ“‹ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¢Ø®Ø± ÙØ§ØªÙˆØ±Ø©'\n                  : 'ğŸ“‹ğŸ“‹ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¢Ø®Ø± ÙØ§ØªÙˆØ±ØªÙŠÙ†'\n                }\n              </p>\n              <p className=\"text-xs text-gray-600 mt-2\">\n                âœ“ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…ÙˆØ§Ø¯<br/>\n                âœ“ Ø¹ÙƒØ³ Ø§Ù„Ø®Ø²ÙŠÙ†Ø©<br/>\n                âœ“ Ù†Ù‚Ù„ Ù„Ù„Ù…Ø­Ø°ÙˆÙØ©\n              </p>\n            </div>\n\n            {deleteType === 'date' && (\n              <div className=\"mb-4\">\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Ø§Ø®ØªØ± Ø§Ù„ØªØ§Ø±ÙŠØ®:\n                </label>\n                <input\n                  type=\"date\"\n                  value={deleteDate}\n                  onChange={(e) => setDeleteDate(e.target.value)}\n                  className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-red-500 focus:outline-none\"\n                />\n              </div>\n            )}\n\n            <div className=\"mb-6\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (200200):\n              </label>\n              <input\n                type=\"password\"\n                value={deletePassword}\n                onChange={(e) => setDeletePassword(e.target.value)}\n                onKeyPress={(e) => e.key === 'Enter' && handleBulkDelete()}\n                placeholder=\"Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\"\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-red-500 focus:outline-none\"\n                autoFocus\n              />\n            </div>\n\n            <div className=\"flex gap-3\">\n              <button\n                onClick={handleBulkDelete}\n                disabled={loading}\n                className={`flex-1 py-3 rounded-lg font-semibold text-white transition-colors ${\n                  loading ? 'bg-gray-400 cursor-not-allowed' : 'bg-red-600 hover:bg-red-700'\n                }`}\n              >\n                {loading ? 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­Ø°Ù...' : 'âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù'}\n              </button>\n              <button\n                onClick={() => {\n                  setShowDeleteModal(false);\n                  setDeletePassword('');\n                  setDeleteDate('');\n                }}\n                disabled={loading}\n                className=\"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-3 rounded-lg font-semibold transition-colors\"\n              >\n                âŒ Ø¥Ù„ØºØ§Ø¡\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Backups Table */}\n      <div className=\"bg-white rounded-lg shadow-md overflow-x-auto\">\n        {loading && !creating ? (\n          <div className=\"p-8 text-center\">\n            <p className=\"text-gray-500\">â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>\n          </div>\n        ) : backups.length === 0 ? (\n          <div className=\"p-8 text-center\">\n            <p className=\"text-gray-500\">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</p>\n            <p className=\"text-sm text-gray-400 mt-2\">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ \"Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©\" Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø£ÙˆÙ„ Ù†Ø³Ø®Ø©</p>\n          </div>\n        ) : (\n          <table className=\"min-w-full border-collapse\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª</th>\n                <th className=\"border border-gray-300 p-2\">Ø£Ù†Ø´Ø¦Øª Ø¨ÙˆØ§Ø³Ø·Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø§Ù„Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {backups.map((backup) => (\n                <tr key={backup.backup_id} className=\"hover:bg-gray-50\">\n                  <td className=\"border border-gray-300 p-2\">\n                    {new Date(backup.created_at).toLocaleString('ar-EG', {\n                      year: 'numeric',\n                      month: 'long',\n                      day: 'numeric',\n                      hour: '2-digit',\n                      minute: '2-digit'\n                    })}\n                    {backup.is_scheduled && (\n                      <span className=\"block text-xs text-blue-600 mt-1\">ğŸ¤– ØªÙ„Ù‚Ø§Ø¦ÙŠ</span>\n                    )}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">{backup.created_by}</td>\n                  <td className=\"border border-gray-300 p-2 text-center font-medium\">\n                    {backup.total_documents || 0}\n                  </td>\n                  <td className=\"border border-gray-300 p-2 text-center\">\n                    {backup.status === 'in_progress' && (\n                      <span className=\"text-orange-600 animate-pulse\">â³ Ø¬Ø§Ø±ÙŠ...</span>\n                    )}\n                    {backup.status === 'failed' && (\n                      <span className=\"text-red-600\">âŒ ÙØ´Ù„</span>\n                    )}\n                    {(backup.status === 'completed' || backup.status === 'completed_with_drive' || backup.status === 'completed_no_drive') && (\n                      <span className=\"text-green-600\">âœ… Ù…ÙƒØªÙ…Ù„</span>\n                    )}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex space-x-2 space-x-reverse justify-center flex-wrap gap-1\">\n                      <button\n                        onClick={() => downloadBackup(backup.backup_id, backup.created_at)}\n                        className=\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\"\n                        title=\"ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©\"\n                      >\n                        â¬‡ï¸ ØªÙ†Ø²ÙŠÙ„\n                      </button>\n                      <button\n                        onClick={() => restoreBackup(backup.backup_id, backup.created_at)}\n                        disabled={loading || backup.status === 'in_progress'}\n                        className=\"bg-orange-500 text-white px-3 py-1 rounded text-sm hover:bg-orange-600 disabled:bg-gray-400\"\n                        title=\"Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„Ù†Ø³Ø®Ø©\"\n                      >\n                        â†©ï¸ Ø§Ø³ØªØ±Ø¬Ø§Ø¹\n                      </button>\n                      <button\n                        onClick={() => deleteBackup(backup.backup_id, backup.created_at)}\n                        disabled={loading}\n                        className=\"bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600 disabled:bg-gray-400\"\n                        title=\"Ø­Ø°Ù Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©\"\n                      >\n                        ğŸ—‘ï¸ Ø­Ø°Ù\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        )}\n      </div>\n\n      {/* Google Drive Tab */}\n      {activeTab === 'drive' && (\n        <div className=\"bg-white rounded-lg shadow-md overflow-x-auto\">\n          {loading ? (\n            <div className=\"p-8 text-center\">\n              <p className=\"text-gray-500\">â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>\n            </div>\n          ) : !driveStatus?.enabled ? (\n            <div className=\"p-8 text-center\">\n              <p className=\"text-red-500\">âŒ Google Drive ØºÙŠØ± Ù…ØªØµÙ„</p>\n              <p className=\"text-sm text-gray-400 mt-2\">ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Google Drive</p>\n            </div>\n          ) : driveFiles.length === 0 ? (\n            <div className=\"p-8 text-center\">\n              <p className=\"text-gray-500\">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„ÙØ§Øª ÙÙŠ Google Drive</p>\n              <p className=\"text-sm text-gray-400 mt-2\">Ù‚Ù… Ø¨Ø±ÙØ¹ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ù† Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø³Ø§Ø¨Ù‚</p>\n            </div>\n          ) : (\n            <table className=\"min-w-full border-collapse\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"border border-gray-300 p-2\">Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø¬Ù…</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n                </tr>\n              </thead>\n              <tbody>\n                {driveFiles.map((file) => (\n                  <tr key={file.id} className=\"hover:bg-gray-50\">\n                    <td className=\"border border-gray-300 p-2\">\n                      <a\n                        href={file.webViewLink}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"text-blue-600 hover:underline\"\n                      >\n                        {file.name}\n                      </a>\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">\n                      {new Date(file.createdTime).toLocaleString('ar-EG', {\n                        year: 'numeric',\n                        month: 'short',\n                        day: 'numeric',\n                        hour: '2-digit',\n                        minute: '2-digit'\n                      })}\n                    </td>\n                    <td className=\"border border-gray-300 p-2 text-center\">\n                      {file.size ? `${(file.size / 1024).toFixed(2)} KB` : '-'}\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <div className=\"flex space-x-2 space-x-reverse justify-center flex-wrap gap-1\">\n                        <button\n                          onClick={() => downloadFromDrive(file.id, file.name)}\n                          className=\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\"\n                        >\n                          â¬‡ï¸ ØªÙ†Ø²ÙŠÙ„\n                        </button>\n                        <button\n                          onClick={() => restoreFromDrive(file.id, file.name)}\n                          disabled={loading}\n                          className=\"bg-orange-500 text-white px-3 py-1 rounded text-sm hover:bg-orange-600 disabled:bg-gray-400\"\n                        >\n                          â†©ï¸ Ø§Ø³ØªØ±Ø¬Ø§Ø¹\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          )}\n        </div>\n      )}\n\n      {/* Warning */}\n      <div className=\"mt-6 bg-red-50 p-4 rounded-lg border-r-4 border-red-500\">\n        <h3 className=\"font-bold text-red-700 mb-2\">âš ï¸ ØªØ­Ø°ÙŠØ±Ø§Øª Ù…Ù‡Ù…Ø©:</h3>\n        <ul className=\"list-disc list-inside text-sm text-red-700 space-y-1\">\n          <li>Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø³ÙŠØ­Ø°Ù <strong>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</strong></li>\n          <li>ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø­Ø¯ÙŠØ«Ø© Ù‚Ø¨Ù„ Ø§Ù„Ù‚ÙŠØ§Ù… Ø¨Ø£ÙŠ ØªØºÙŠÙŠØ±Ø§Øª ÙƒØ¨ÙŠØ±Ø©</li>\n          <li>Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù„Ù† ÙŠØªÙ… Ø­Ø°ÙÙ‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ - Ø§Ø­Ø°ÙÙ‡Ø§ ÙŠØ¯ÙˆÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø©</li>\n          <li>Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø¨Ø¹Ø¯ ØªÙ†ÙÙŠØ°Ù‡Ø§</li>\n        </ul>\n      </div>\n\n      {/* Tips */}\n      <div className=\"mt-4 bg-green-50 p-4 rounded-lg border-r-4 border-green-500\">\n        <h3 className=\"font-bold text-green-700 mb-2\">ğŸ’¡ Ù†ØµØ§Ø¦Ø­:</h3>\n        <ul className=\"list-disc list-inside text-sm text-green-700 space-y-1\">\n          <li>Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ© ØªØ¹Ù…Ù„ ÙŠÙˆÙ…ÙŠØ§Ù‹ Ø§Ù„Ø³Ø§Ø¹Ø© 7:00 Ù…Ø³Ø§Ø¡Ù‹</li>\n          <li>Ø§Ø³ØªØ®Ø¯Ù… Ø²Ø± \"ØªÙ†Ø²ÙŠÙ„\" Ù„Ø­ÙØ¸ Ø§Ù„Ù†Ø³Ø®Ø© Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ</li>\n          <li>ÙŠÙ…ÙƒÙ†Ùƒ Ø±ÙØ¹ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© ÙŠØ¯ÙˆÙŠØ§Ù‹ Ø¥Ù„Ù‰ Google Drive Ø£Ùˆ Ø£ÙŠ Ø®Ø¯Ù…Ø© Ø³Ø­Ø§Ø¨ÙŠØ©</li>\n          <li>Ø§Ø³ØªØ®Ø¯Ù… Ø²Ø± \"Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù†Ø³Ø®Ø©\" Ù„Ø±ÙØ¹ Ù…Ù„Ù Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ù† Ø¬Ù‡Ø§Ø²Ùƒ</li>\n          <li>Ø§Ø­ØªÙØ¸ Ø¨Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ù† ÙØªØ±Ø§Øª Ù…Ø®ØªÙ„ÙØ© Ù„Ù„Ø£Ù…Ø§Ù†</li>\n          <li>Ø­Ø¬Ù… Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ØµØºÙŠØ± (Ø¹Ø§Ø¯Ø© Ø£Ù‚Ù„ Ù…Ù† 1 MB)</li>\n        </ul>\n      </div>\n      \n      {/* Import Instructions */}\n      <div className=\"mt-4 bg-blue-50 p-4 rounded-lg border-r-4 border-blue-500\">\n        <h3 className=\"font-bold text-blue-700 mb-2\">ğŸ“¤ ÙƒÙŠÙÙŠØ© Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©:</h3>\n        <ol className=\"list-decimal list-inside text-sm text-blue-700 space-y-1\">\n          <li>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± \"Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù†Ø³Ø®Ø©\"</li>\n          <li>Ø§Ø®ØªØ± Ù…Ù„Ù Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© (.json) Ù…Ù† Ø¬Ù‡Ø§Ø²Ùƒ</li>\n          <li>Ø§Ø®ØªØ± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡:\n            <ul className=\"list-disc list-inside mr-6 mt-1\">\n              <li><strong>Ù…ÙˆØ§ÙÙ‚</strong> = Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© ÙÙ‚Ø· (Ø¢Ù…Ù†)</li>\n              <li><strong>Ø¥Ù„ØºØ§Ø¡</strong> = Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ù…Ø¨Ø§Ø´Ø± (ÙŠØ­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©)</li>\n            </ul>\n          </li>\n        </ol>\n      </div>\n    </div>\n  );\n};\n\n// Users Management Component  \nconst Users = () => {\n  const [users, setUsers] = useState([]);\n  const [newUser, setNewUser] = useState({\n    username: '',\n    password: '',\n    role: 'user'\n  });\n  const [editingUser, setEditingUser] = useState(null);\n  const [editForm, setEditForm] = useState({\n    username: '',\n    password: '',\n    role: 'user'\n  });\n  const [companyInfo, setCompanyInfo] = useState({\n    name: 'Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„',\n    address: 'Ø§Ù„Ø­Ø±ÙÙŠÙŠÙ† Ø´Ø§Ø±Ø¹ Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª',\n    phone: '01020630677'\n  });\n  const [editingCompany, setEditingCompany] = useState(false);\n  const [selectedUserPermissions, setSelectedUserPermissions] = useState(null);\n\n  const allPermissions = [\n    { key: 'dashboard', label: 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…' },\n    { key: 'sales', label: 'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª' },\n    { key: 'inventory', label: 'Ø§Ù„Ù…Ø®Ø²ÙˆÙ†' },\n    { key: 'deferred', label: 'Ø§Ù„Ø¢Ø¬Ù„' },\n    { key: 'expenses', label: 'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª' },\n    { key: 'revenue', label: 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª' },\n    { key: 'treasury', label: 'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©' },\n    { key: 'invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ±' },\n    { key: 'work-orders', label: 'Ø£Ù…Ø± Ø´ØºÙ„' },\n    { key: 'pricing', label: 'Ø§Ù„ØªØ³Ø¹ÙŠØ±' },\n    { key: 'users', label: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†' }\n  ];\n\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  const fetchUsers = async () => {\n    try {\n      const response = await axios.get(`${API}/users`);\n      \n      // Check if default users exist in database\n      const dbUsers = response.data || [];\n      const hasElsawy = dbUsers.some(user => user.username === 'Elsawy');\n      const hasRoot = dbUsers.some(user => user.username === 'Root');\n      \n      // Create default users if they don't exist\n      if (!hasElsawy) {\n        await axios.post(`${API}/users`, {\n          username: 'Elsawy',\n          password: '100100',\n          role: 'admin',\n          permissions: allPermissions.map(p => p.key)\n        });\n      }\n      \n      if (!hasRoot) {\n        await axios.post(`${API}/users`, {\n          username: 'Root',\n          password: 'master',\n          role: 'user',\n          permissions: ['dashboard', 'sales', 'inventory', 'deferred', 'expenses', 'treasury', 'work-orders']\n        });\n      }\n      \n      // Fetch users again if we created default users\n      if (!hasElsawy || !hasRoot) {\n        const updatedResponse = await axios.get(`${API}/users`);\n        setUsers(updatedResponse.data || []);\n      } else {\n        setUsers(dbUsers);\n      }\n      \n    } catch (error) {\n      console.error('Error fetching users:', error);\n      // Fall back to empty array for now\n      setUsers([]);\n    }\n  };\n\n  const addUser = async () => {\n    if (!newUser.username || !newUser.password) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');\n      return;\n    }\n\n    try {\n      // Check if username already exists\n      if (users.some(user => user.username === newUser.username)) {\n        alert('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„');\n        return;\n      }\n\n      // Default permissions based on role\n      const defaultPermissions = newUser.role === 'admin' \n        ? allPermissions.map(p => p.key)\n        : ['dashboard', 'sales', 'inventory', 'deferred', 'expenses', 'treasury', 'work-orders', 'pricing'];\n\n      // Let backend generate ID and created_at\n      const user = {\n        username: newUser.username,\n        password: newUser.password,\n        role: newUser.role,\n        permissions: defaultPermissions\n      };\n\n      await axios.post(`${API}/users`, user);\n      fetchUsers();\n      setNewUser({ username: '', password: '', role: 'user' });\n      alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error adding user:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const startEdit = (user) => {\n    setEditingUser(user.id);\n    setEditForm({\n      username: user.username,\n      password: '',\n      role: user.role\n    });\n  };\n\n  const cancelEdit = () => {\n    setEditingUser(null);\n    setEditForm({ username: '', password: '', role: 'user' });\n  };\n\n  const saveEdit = async () => {\n    if (!editForm.username) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');\n      return;\n    }\n\n    // Check if username already exists (excluding current user)\n    if (users.some(user => user.username === editForm.username && user.id !== editingUser)) {\n      alert('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„');\n      return;\n    }\n\n    try {\n      // Find current user to preserve their permissions\n      const currentUser = users.find(u => u.id === editingUser);\n      if (!currentUser) {\n        alert('Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');\n        return;\n      }\n\n      // Update user in backend - preserve existing permissions\n      const updatedUser = {\n        id: editingUser,\n        username: editForm.username,\n        role: editForm.role,\n        password: editForm.password || currentUser.password,\n        permissions: currentUser.permissions || [],\n        created_at: currentUser.created_at\n      };\n      \n      await axios.put(`${API}/users/${editingUser}`, updatedUser);\n      \n      // Fetch updated data from database instead of updating local state\n      fetchUsers();\n\n      setEditingUser(null);\n      setEditForm({ username: '', password: '', role: 'user' });\n      alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error updating user:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const deleteUser = async (userId) => {\n    if (userId === '1' || userId === '2') {\n      alert('Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠÙŠÙ†');\n      return;\n    }\n\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ')) return;\n\n    try {\n      await axios.delete(`${API}/users/${userId}`);\n      fetchUsers();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting user:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');\n    }\n  };\n\n  const resetPassword = async (userId) => {\n    const newPassword = prompt('Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:');\n    if (newPassword && newPassword.trim()) {\n      try {\n        // Find the user to get their current data\n        const user = users.find(u => u.id === userId);\n        if (!user) {\n          alert('Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');\n          return;\n        }\n\n        // Update password in backend\n        const updatedUser = {\n          id: user.id,\n          username: user.username,\n          password: newPassword.trim(),\n          role: user.role,\n          permissions: user.permissions || [],\n          created_at: user.created_at\n        };\n        \n        await axios.put(`${API}/users/${userId}`, updatedUser);\n        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­');\n      } catch (error) {\n        console.error('Error updating password:', error);\n        alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: ' + (error.response?.data?.detail || error.message));\n      }\n    }\n  };\n\n  const openPermissions = (user) => {\n    setSelectedUserPermissions({\n      ...user,\n      tempPermissions: [...(user.permissions || [])]\n    });\n  };\n\n  const togglePermission = (permissionKey) => {\n    setSelectedUserPermissions(prev => {\n      const newPermissions = prev.tempPermissions.includes(permissionKey)\n        ? prev.tempPermissions.filter(p => p !== permissionKey)\n        : [...prev.tempPermissions, permissionKey];\n      \n      return { ...prev, tempPermissions: newPermissions };\n    });\n  };\n\n  const savePermissions = async () => {\n    try {\n      // Update permissions in backend\n      const updatedUser = {\n        id: selectedUserPermissions.id,\n        username: selectedUserPermissions.username,\n        password: selectedUserPermissions.password,\n        role: selectedUserPermissions.role,\n        permissions: selectedUserPermissions.tempPermissions,\n        created_at: selectedUserPermissions.created_at\n      };\n      \n      await axios.put(`${API}/users/${selectedUserPermissions.id}`, updatedUser);\n      \n      // Fetch updated data from database\n      fetchUsers();\n      \n      setSelectedUserPermissions(null);\n      alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error updating permissions:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const saveCompanyInfo = () => {\n    setEditingCompany(false);\n    alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ© Ø¨Ù†Ø¬Ø§Ø­');\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-blue-600 mb-4\">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h2>\n        \n        <div className=\"flex space-x-4 space-x-reverse mb-4\">\n          <button className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n            Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n          </button>\n          <button className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n            Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => window.print()}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n            Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n        </div>\n      </div>\n\n      {/* Company Information */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ©</h3>\n        \n        {editingCompany ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©</label>\n              <input\n                type=\"text\"\n                value={companyInfo.name}\n                onChange={(e) => setCompanyInfo({...companyInfo, name: e.target.value})}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>\n              <input\n                type=\"text\"\n                value={companyInfo.address}\n                onChange={(e) => setCompanyInfo({...companyInfo, address: e.target.value})}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ØªÙ„ÙŠÙÙˆÙ†</label>\n              <input\n                type=\"text\"\n                value={companyInfo.phone}\n                onChange={(e) => setCompanyInfo({...companyInfo, phone: e.target.value})}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              />\n            </div>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©</label>\n              <p className=\"p-2 bg-gray-100 rounded\">{companyInfo.name}</p>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>\n              <p className=\"p-2 bg-gray-100 rounded\">{companyInfo.address}</p>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ØªÙ„ÙŠÙÙˆÙ†</label>\n              <p className=\"p-2 bg-gray-100 rounded\">{companyInfo.phone}</p>\n            </div>\n          </div>\n        )}\n        \n        <div className=\"flex space-x-4 space-x-reverse\">\n          {editingCompany ? (\n            <>\n              <button\n                onClick={saveCompanyInfo}\n                className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n              >\n                Ø­ÙØ¸\n              </button>\n              <button\n                onClick={() => setEditingCompany(false)}\n                className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n              >\n                Ø¥Ù„ØºØ§Ø¡\n              </button>\n            </>\n          ) : (\n            <button\n              onClick={() => setEditingCompany(true)}\n              className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n            >\n              ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ©\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Add New User */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯</h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>\n            <input\n              type=\"text\"\n              value={newUser.username}\n              onChange={(e) => setNewUser({...newUser, username: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>\n            <input\n              type=\"password\"\n              value={newUser.password}\n              onChange={(e) => setNewUser({...newUser, password: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©</label>\n            <select\n              value={newUser.role}\n              onChange={(e) => setNewUser({...newUser, role: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"user\">Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯ÙŠ</option>\n              <option value=\"admin\">Ù…Ø¯ÙŠØ±</option>\n            </select>\n          </div>\n        </div>\n        \n        <button\n          onClick={addUser}\n          className=\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\"\n        >\n          Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\n        </button>\n      </div>\n\n      {/* Users Table */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h3>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©</th>\n                <th className=\"border border-gray-300 p-2\">Ø¹Ø¯Ø¯ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª</th>\n                <th className=\"border border-gray-300 p-2\">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø§Ù„Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {users.map((user) => (\n                <tr key={user.id}>\n                  <td className=\"border border-gray-300 p-2\">\n                    {editingUser === user.id ? (\n                      <input\n                        type=\"text\"\n                        value={editForm.username}\n                        onChange={(e) => setEditForm({...editForm, username: e.target.value})}\n                        className=\"w-full p-1 border border-gray-300 rounded\"\n                      />\n                    ) : (\n                      <span className=\"font-semibold\">{user.username}</span>\n                    )}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    {editingUser === user.id ? (\n                      <select\n                        value={editForm.role}\n                        onChange={(e) => setEditForm({...editForm, role: e.target.value})}\n                        className=\"w-full p-1 border border-gray-300 rounded\"\n                      >\n                        <option value=\"user\">Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯ÙŠ</option>\n                        <option value=\"admin\">Ù…Ø¯ÙŠØ±</option>\n                      </select>\n                    ) : (\n                      <span className={`px-2 py-1 rounded text-sm ${\n                        user.role === 'admin' \n                          ? 'bg-red-100 text-red-800' \n                          : 'bg-blue-100 text-blue-800'\n                      }`}>\n                        {user.role === 'admin' ? 'Ù…Ø¯ÙŠØ±' : 'Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯ÙŠ'}\n                      </span>\n                    )}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className=\"bg-gray-100 px-2 py-1 rounded text-sm\">\n                      {user.permissions?.length || 0} ØµÙ„Ø§Ø­ÙŠØ©\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    {new Date(user.created_at).toLocaleDateString('ar-EG')}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className=\"px-2 py-1 rounded text-sm bg-green-100 text-green-800\">\n                      Ù†Ø´Ø·\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex space-x-2 space-x-reverse flex-wrap\">\n                      {editingUser === user.id ? (\n                        <>\n                          <button \n                            onClick={saveEdit}\n                            className=\"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600 mb-1\">\n                            Ø­ÙØ¸\n                          </button>\n                          <button \n                            onClick={cancelEdit}\n                            className=\"bg-gray-500 text-white px-2 py-1 rounded text-sm hover:bg-gray-600 mb-1\">\n                            Ø¥Ù„ØºØ§Ø¡\n                          </button>\n                        </>\n                      ) : (\n                        <>\n                          <button \n                            onClick={() => startEdit(user)}\n                            className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600 mb-1\">\n                            ØªØ¹Ø¯ÙŠÙ„\n                          </button>\n                          <button \n                            onClick={() => openPermissions(user)}\n                            className=\"bg-purple-500 text-white px-2 py-1 rounded text-sm hover:bg-purple-600 mb-1\">\n                            Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª\n                          </button>\n                          <button \n                            onClick={() => resetPassword(user.id)}\n                            className=\"bg-yellow-500 text-white px-2 py-1 rounded text-sm hover:bg-yellow-600 mb-1\">\n                            ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\n                          </button>\n                          {(user.id !== '1' && user.id !== '2') && (\n                            <button \n                              onClick={() => deleteUser(user.id)}\n                              className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600 mb-1\">\n                              Ø­Ø°Ù\n                            </button>\n                          )}\n                        </>\n                      )}\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Permissions Modal */}\n      {selectedUserPermissions && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 max-w-md w-full mx-4\">\n            <h3 className=\"text-lg font-bold mb-4\">\n              ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: {selectedUserPermissions.username}\n            </h3>\n            \n            <div className=\"space-y-2 mb-4\">\n              {allPermissions.map(permission => (\n                <label key={permission.key} className=\"flex items-center\">\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedUserPermissions.tempPermissions.includes(permission.key)}\n                    onChange={() => togglePermission(permission.key)}\n                    className=\"ml-2\"\n                  />\n                  <span>{permission.label}</span>\n                </label>\n              ))}\n            </div>\n            \n            <div className=\"flex space-x-4 space-x-reverse\">\n              <button\n                onClick={savePermissions}\n                className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n              >\n                Ø­ÙØ¸\n              </button>\n              <button\n                onClick={() => setSelectedUserPermissions(null)}\n                className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n              >\n                Ø¥Ù„ØºØ§Ø¡\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Material Pricing Component\nconst Pricing = () => {\n  const [materialPricings, setMaterialPricings] = useState([]);\n  const [editingPricing, setEditingPricing] = useState(null);\n  const [newPricing, setNewPricing] = useState({\n    material_type: 'NBR',\n    inner_diameter: '',\n    outer_diameter: '',\n    price_per_mm: '',\n    manufacturing_cost_client1: '',\n    manufacturing_cost_client2: '',\n    manufacturing_cost_client3: '',\n    notes: ''\n  });\n\n  const materialTypes = ['NBR', 'BUR', 'BT', 'VT', 'BOOM'];\n\n  useEffect(() => {\n    fetchMaterialPricings();\n  }, []);\n\n  const fetchMaterialPricings = async () => {\n    try {\n      const response = await axios.get(`${API}/material-pricing`);\n      setMaterialPricings(response.data);\n    } catch (error) {\n      console.error('Error fetching material pricings:', error);\n    }\n  };\n\n  const addMaterialPricing = async () => {\n    if (!newPricing.inner_diameter || !newPricing.outer_diameter || !newPricing.price_per_mm) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      if (editingPricing) {\n        // Update existing pricing\n        await axios.put(`${API}/material-pricing/${editingPricing}`, {\n          ...newPricing,\n          inner_diameter: parseFloat(newPricing.inner_diameter),\n          outer_diameter: parseFloat(newPricing.outer_diameter),\n          price_per_mm: parseFloat(newPricing.price_per_mm),\n          manufacturing_cost_client1: parseFloat(newPricing.manufacturing_cost_client1 || 0),\n          manufacturing_cost_client2: parseFloat(newPricing.manufacturing_cost_client2 || 0),\n          manufacturing_cost_client3: parseFloat(newPricing.manufacturing_cost_client3 || 0)\n        });\n        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');\n        setEditingPricing(null);\n      } else {\n        // Add new pricing\n        await axios.post(`${API}/material-pricing`, {\n          ...newPricing,\n          inner_diameter: parseFloat(newPricing.inner_diameter),\n          outer_diameter: parseFloat(newPricing.outer_diameter),\n          price_per_mm: parseFloat(newPricing.price_per_mm),\n          manufacturing_cost_client1: parseFloat(newPricing.manufacturing_cost_client1 || 0),\n          manufacturing_cost_client2: parseFloat(newPricing.manufacturing_cost_client2 || 0),\n          manufacturing_cost_client3: parseFloat(newPricing.manufacturing_cost_client3 || 0)\n        });\n        alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');\n      }\n      \n      fetchMaterialPricings();\n      setNewPricing({\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        price_per_mm: '',\n        manufacturing_cost_client1: '',\n        manufacturing_cost_client2: '',\n        manufacturing_cost_client3: '',\n        notes: ''\n      });\n    } catch (error) {\n      console.error('Error saving material pricing:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const editMaterialPricing = (pricing) => {\n    setNewPricing({\n      material_type: pricing.material_type,\n      inner_diameter: pricing.inner_diameter.toString(),\n      outer_diameter: pricing.outer_diameter.toString(),\n      price_per_mm: pricing.price_per_mm.toString(),\n      manufacturing_cost_client1: pricing.manufacturing_cost_client1.toString(),\n      manufacturing_cost_client2: pricing.manufacturing_cost_client2.toString(),\n      manufacturing_cost_client3: pricing.manufacturing_cost_client3.toString(),\n      notes: pricing.notes || ''\n    });\n    setEditingPricing(pricing.id);\n  };\n\n  const deleteMaterialPricing = async (pricingId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©ØŸ')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/material-pricing/${pricingId}`);\n      fetchMaterialPricings();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting material pricing:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const cancelEdit = () => {\n    setEditingPricing(null);\n    setNewPricing({\n      material_type: 'NBR',\n      inner_diameter: '',\n      outer_diameter: '',\n      price_per_mm: '',\n      manufacturing_cost_client1: '',\n      manufacturing_cost_client2: '',\n      manufacturing_cost_client3: '',\n      notes: ''\n    });\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <h2 className=\"text-2xl font-bold text-blue-600 mb-6\">ğŸ’² Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ³Ø¹ÙŠØ±</h2>\n      \n      {/* Add/Edit Material Pricing Form */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">\n          {editingPricing ? 'ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©' : 'Ø¥Ø¶Ø§ÙØ© ØªØ³Ø¹ÙŠØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©'}\n        </h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</label>\n            <select\n              value={newPricing.material_type}\n              onChange={(e) => setNewPricing({...newPricing, material_type: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              {materialTypes.map(type => (\n                <option key={type} value={type}>{type}</option>\n              ))}\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ (Ù…Ù…)</label>\n            <input\n              type=\"number\"\n              step=\"0.1\"\n              value={newPricing.inner_diameter}\n              onChange={(e) => setNewPricing({...newPricing, inner_diameter: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ (Ù…Ù…)</label>\n            <input\n              type=\"number\"\n              step=\"0.1\"\n              value={newPricing.outer_diameter}\n              onChange={(e) => setNewPricing({...newPricing, outer_diameter: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø³Ø¹Ø± Ø§Ù„Ù…Ù„ÙŠ (Ø¬.Ù…)</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newPricing.price_per_mm}\n              onChange={(e) => setNewPricing({...newPricing, price_per_mm: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"Ø³Ø¹Ø± Ø§Ù„Ù…Ù„ÙŠ Ø§Ù„ÙˆØ§Ø­Ø¯\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ØªÙƒÙ„ÙØ© Ø§Ù„ØªØµÙ†ÙŠØ¹ - Ø¹Ù…ÙŠÙ„ 1 (Ø¬.Ù…)</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newPricing.manufacturing_cost_client1}\n              onChange={(e) => setNewPricing({...newPricing, manufacturing_cost_client1: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"ØªÙƒÙ„ÙØ© Ø§Ù„ØªØµÙ†ÙŠØ¹ Ù„Ù„Ø¹Ù…ÙŠÙ„ 1\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ØªÙƒÙ„ÙØ© Ø§Ù„ØªØµÙ†ÙŠØ¹ - Ø¹Ù…ÙŠÙ„ 2 (Ø¬.Ù…)</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newPricing.manufacturing_cost_client2}\n              onChange={(e) => setNewPricing({...newPricing, manufacturing_cost_client2: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"ØªÙƒÙ„ÙØ© Ø§Ù„ØªØµÙ†ÙŠØ¹ Ù„Ù„Ø¹Ù…ÙŠÙ„ 2\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ØªÙƒÙ„ÙØ© Ø§Ù„ØªØµÙ†ÙŠØ¹ - Ø¹Ù…ÙŠÙ„ 3 (Ø¬.Ù…)</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newPricing.manufacturing_cost_client3}\n              onChange={(e) => setNewPricing({...newPricing, manufacturing_cost_client3: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"ØªÙƒÙ„ÙØ© Ø§Ù„ØªØµÙ†ÙŠØ¹ Ù„Ù„Ø¹Ù…ÙŠÙ„ 3\"\n            />\n          </div>\n          \n          <div className=\"md:col-span-2 lg:col-span-3\">\n            <label className=\"block text-sm font-medium mb-1\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>\n            <textarea\n              value={newPricing.notes}\n              onChange={(e) => setNewPricing({...newPricing, notes: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              rows=\"2\"\n              placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©...\"\n            />\n          </div>\n        </div>\n        \n        <div className=\"flex justify-end space-x-4 space-x-reverse mt-4\">\n          {editingPricing && (\n            <button\n              onClick={cancelEdit}\n              className=\"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600\"\n            >\n              Ø¥Ù„ØºØ§Ø¡\n            </button>\n          )}\n          <button\n            onClick={addMaterialPricing}\n            className=\"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600\"\n          >\n            {editingPricing ? 'ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©' : 'Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©'}\n          </button>\n        </div>\n      </div>\n      \n      {/* Material Pricings Table */}\n      <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h3 className=\"text-lg font-semibold\">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø§Øª</h3>\n        </div>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ (Ø¯Ø§Ø®Ù„ÙŠÃ—Ø®Ø§Ø±Ø¬ÙŠ)</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ø³Ø¹Ø± Ø§Ù„Ù…Ù„ÙŠ</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ø¹Ù…ÙŠÙ„ 1</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ø¹Ù…ÙŠÙ„ 2</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ø¹Ù…ÙŠÙ„ 3</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {materialPricings.map((pricing, index) => (\n                <tr key={pricing.id} className={index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                    {pricing.material_type}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {pricing.inner_diameter}Ã—{pricing.outer_diameter} Ù…Ù…\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {pricing.price_per_mm.toFixed(2)} Ø¬.Ù…\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {pricing.manufacturing_cost_client1.toFixed(2)} Ø¬.Ù…\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {pricing.manufacturing_cost_client2.toFixed(2)} Ø¬.Ù…\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {pricing.manufacturing_cost_client3.toFixed(2)} Ø¬.Ù…\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {pricing.notes || '-'}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                    <button\n                      onClick={() => editMaterialPricing(pricing)}\n                      className=\"text-blue-600 hover:text-blue-900 ml-2\"\n                    >\n                      ØªØ¹Ø¯ÙŠÙ„\n                    </button>\n                    <button\n                      onClick={() => deleteMaterialPricing(pricing.id)}\n                      className=\"text-red-600 hover:text-red-900\"\n                    >\n                      Ø­Ø°Ù\n                    </button>\n                  </td>\n                </tr>\n              ))}\n              \n              {materialPricings.length === 0 && (\n                <tr>\n                  <td colSpan=\"8\" className=\"px-6 py-4 text-center text-gray-500\">\n                    Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ³Ø¹ÙŠØ±Ø§Øª Ù…Ø¶Ø§ÙØ©\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Main Treasury Component - Ø§Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©\nconst MainTreasury = () => {\n  const { user } = useAuth();\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [password, setPassword] = useState('');\n  const [balance, setBalance] = useState(0);\n  const [transactions, setTransactions] = useState([]);\n  const [transactionType, setTransactionType] = useState('deposit');\n  const [amount, setAmount] = useState('');\n  const [description, setDescription] = useState('');\n  const [reference, setReference] = useState('');\n  const [showPasswordChange, setShowPasswordChange] = useState(false);\n  const [oldPassword, setOldPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n\n  // Verify password\n  const verifyPassword = async () => {\n    try {\n      const response = await axios.post(`${API}/main-treasury/verify-password`, {\n        password: password\n      });\n      \n      if (response.data.success) {\n        setIsAuthenticated(true);\n        fetchMainTreasuryData();\n      } else {\n        alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©');\n        setPassword('');\n      }\n    } catch (error) {\n      console.error('Error verifying password:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');\n    }\n  };\n\n  // Fetch main treasury data\n  const fetchMainTreasuryData = async () => {\n    try {\n      const balanceResponse = await axios.get(`${API}/main-treasury/balance`);\n      setBalance(balanceResponse.data.balance);\n\n      const transactionsResponse = await axios.get(`${API}/main-treasury/transactions`);\n      setTransactions(transactionsResponse.data);\n    } catch (error) {\n      console.error('Error fetching main treasury data:', error);\n    }\n  };\n\n  // Handle transaction (deposit or withdrawal)\n  const handleTransaction = async () => {\n    if (!amount || !description) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº ÙˆØ§Ù„ÙˆØµÙ');\n      return;\n    }\n\n    if (parseFloat(amount) <= 0) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');\n      return;\n    }\n\n    try {\n      const endpoint = transactionType === 'deposit' \n        ? `${API}/main-treasury/deposit?username=${user.username}`\n        : `${API}/main-treasury/withdrawal?username=${user.username}`;\n\n      await axios.post(endpoint, {\n        transaction_type: transactionType,\n        amount: parseFloat(amount),\n        description: description,\n        reference: reference || null\n      });\n\n      alert(transactionType === 'deposit' ? 'ØªÙ… Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ Ø¨Ù†Ø¬Ø§Ø­' : 'ØªÙ… Ø§Ù„ØµØ±Ù Ø¨Ù†Ø¬Ø§Ø­');\n      \n      // Reset form\n      setAmount('');\n      setDescription('');\n      setReference('');\n      \n      // Refresh data\n      fetchMainTreasuryData();\n    } catch (error) {\n      console.error('Error performing transaction:', error);\n      alert(error.response?.data?.detail || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');\n    }\n  };\n\n  // Change password\n  const changePassword = async () => {\n    if (!oldPassword || !newPassword) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ÙˆØ§Ù„Ø¬Ø¯ÙŠØ¯Ø©');\n      return;\n    }\n\n    if (newPassword.length < 4) {\n      alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 4 Ø£Ø±Ù‚Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');\n      return;\n    }\n\n    try {\n      await axios.post(`${API}/main-treasury/change-password`, {\n        old_password: oldPassword,\n        new_password: newPassword\n      });\n\n      alert('ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­');\n      setShowPasswordChange(false);\n      setOldPassword('');\n      setNewPassword('');\n    } catch (error) {\n      console.error('Error changing password:', error);\n      alert(error.response?.data?.detail || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');\n    }\n  };\n\n  // If not authenticated, show password screen\n  if (!isAuthenticated) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600 p-6\" dir=\"rtl\">\n        <div className=\"bg-white p-8 rounded-lg shadow-2xl max-w-md w-full\">\n          <div className=\"text-center mb-6\">\n            <div className=\"text-6xl mb-4\">ğŸ”</div>\n            <h2 className=\"text-2xl font-bold text-gray-800\">Ø§Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h2>\n            <p className=\"text-gray-600 mt-2\">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù„Ø¯Ø®ÙˆÙ„</p>\n          </div>\n          \n          <div className=\"space-y-4\">\n            <input\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              onKeyPress={(e) => e.key === 'Enter' && verifyPassword()}\n              placeholder=\"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\"\n              className=\"w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-center text-lg\"\n              autoFocus\n            />\n            \n            <button\n              onClick={verifyPassword}\n              className=\"w-full bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 font-semibold text-lg transition-colors\"\n            >\n              Ø¯Ø®ÙˆÙ„\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Main treasury interface\n  return (\n    <div className=\"p-6 bg-gray-50 min-h-screen\" dir=\"rtl\">\n      {/* Header */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-800 flex items-center gap-2\">\n              ğŸ” Ø§Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©\n            </h1>\n            <p className=\"text-gray-600 mt-2\">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ù„Ø´Ø±ÙƒØ©</p>\n          </div>\n          <div className=\"text-left\">\n            <p className=\"text-sm text-gray-500\">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ</p>\n            <p className=\"text-4xl font-bold text-green-600\">\n              {balance.toFixed(2)} Ø¬.Ù…\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Action Buttons */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\">\n        {/* Deposit/Withdrawal Form */}\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-xl font-semibold mb-4 flex items-center gap-2\">\n            {transactionType === 'deposit' ? 'ğŸ’µ Ø¥ÙŠØ¯Ø§Ø¹' : 'ğŸ’¸ ØµØ±Ù'}\n          </h3>\n          \n          <div className=\"space-y-4\">\n            {/* Transaction Type Toggle */}\n            <div className=\"flex gap-2\">\n              <button\n                onClick={() => setTransactionType('deposit')}\n                className={`flex-1 py-2 rounded-lg font-semibold transition-colors ${\n                  transactionType === 'deposit'\n                    ? 'bg-green-500 text-white'\n                    : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\n                }`}\n              >\n                ğŸ’µ Ø¥ÙŠØ¯Ø§Ø¹\n              </button>\n              <button\n                onClick={() => setTransactionType('withdrawal')}\n                className={`flex-1 py-2 rounded-lg font-semibold transition-colors ${\n                  transactionType === 'withdrawal'\n                    ? 'bg-red-500 text-white'\n                    : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\n                }`}\n              >\n                ğŸ’¸ ØµØ±Ù\n              </button>\n            </div>\n\n            {/* Amount */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Ø§Ù„Ù…Ø¨Ù„Øº (Ø¬.Ù…)\n              </label>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                value={amount}\n                onChange={(e) => setAmount(e.target.value)}\n                placeholder=\"0.00\"\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n              />\n            </div>\n\n            {/* Description */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Ø§Ù„ÙˆØµÙ/Ø§Ù„Ø³Ø¨Ø¨ *\n              </label>\n              <textarea\n                value={description}\n                onChange={(e) => setDescription(e.target.value)}\n                placeholder=\"Ø§ÙƒØªØ¨ Ø³Ø¨Ø¨ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ Ø£Ùˆ Ø§Ù„ØµØ±Ù...\"\n                rows=\"3\"\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n              />\n            </div>\n\n            {/* Reference (Optional) */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Ø§Ù„Ù…Ø±Ø¬Ø¹ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\n              </label>\n              <input\n                type=\"text\"\n                value={reference}\n                onChange={(e) => setReference(e.target.value)}\n                placeholder=\"Ø±Ù‚Ù… Ø§Ù„Ù…Ø³ØªÙ†Ø¯ Ø£Ùˆ Ø§Ù„Ù…Ø±Ø¬Ø¹\"\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n              />\n            </div>\n\n            {/* Submit Button */}\n            <button\n              onClick={handleTransaction}\n              className={`w-full py-3 rounded-lg font-semibold text-white transition-colors ${\n                transactionType === 'deposit'\n                  ? 'bg-green-500 hover:bg-green-600'\n                  : 'bg-red-500 hover:bg-red-600'\n              }`}\n            >\n              {transactionType === 'deposit' ? 'âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹' : 'âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØµØ±Ù'}\n            </button>\n          </div>\n        </div>\n\n        {/* Password Change */}\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-xl font-semibold mb-4 flex items-center gap-2\">\n            ğŸ”‘ Ø¥Ø¯Ø§Ø±Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\n          </h3>\n          \n          {!showPasswordChange ? (\n            <div className=\"text-center py-8\">\n              <p className=\"text-gray-600 mb-4\">ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</p>\n              <button\n                onClick={() => setShowPasswordChange(true)}\n                className=\"bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 font-semibold\"\n              >\n                ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\n              </button>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©\n                </label>\n                <input\n                  type=\"password\"\n                  value={oldPassword}\n                  onChange={(e) => setOldPassword(e.target.value)}\n                  className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©\n                </label>\n                <input\n                  type=\"password\"\n                  value={newPassword}\n                  onChange={(e) => setNewPassword(e.target.value)}\n                  className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n                />\n              </div>\n\n              <div className=\"flex gap-2\">\n                <button\n                  onClick={changePassword}\n                  className=\"flex-1 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 font-semibold\"\n                >\n                  âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØºÙŠÙŠØ±\n                </button>\n                <button\n                  onClick={() => {\n                    setShowPasswordChange(false);\n                    setOldPassword('');\n                    setNewPassword('');\n                  }}\n                  className=\"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 font-semibold\"\n                >\n                  âŒ Ø¥Ù„ØºØ§Ø¡\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Transactions History */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h3 className=\"text-xl font-semibold mb-4 flex items-center gap-2\">\n          ğŸ“‹ Ø³Ø¬Ù„ Ø§Ù„Ø­Ø±ÙƒØ§Øª\n        </h3>\n\n        {transactions.length === 0 ? (\n          <p className=\"text-center text-gray-500 py-8\">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø±ÙƒØ§Øª Ù…Ø³Ø¬Ù„Ø©</p>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full border-collapse\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"border border-gray-300 p-3 text-right\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                  <th className=\"border border-gray-300 p-3 text-right\">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</th>\n                  <th className=\"border border-gray-300 p-3 text-right\">Ø§Ù„Ù…Ø¨Ù„Øº</th>\n                  <th className=\"border border-gray-300 p-3 text-right\">Ø§Ù„ÙˆØµÙ</th>\n                  <th className=\"border border-gray-300 p-3 text-right\">Ø§Ù„Ù…Ø±Ø¬Ø¹</th>\n                  <th className=\"border border-gray-300 p-3 text-right\">Ø§Ù„Ø±ØµÙŠØ¯ Ø¨Ø¹Ø¯</th>\n                  <th className=\"border border-gray-300 p-3 text-right\">Ù†ÙØ° Ø¨ÙˆØ§Ø³Ø·Ø©</th>\n                </tr>\n              </thead>\n              <tbody>\n                {transactions.map((transaction) => (\n                  <tr key={transaction.id} className=\"hover:bg-gray-50\">\n                    <td className=\"border border-gray-300 p-3\">\n                      {new Date(transaction.date).toLocaleDateString('ar-EG', {\n                        year: 'numeric',\n                        month: '2-digit',\n                        day: '2-digit',\n                        hour: '2-digit',\n                        minute: '2-digit'\n                      })}\n                    </td>\n                    <td className=\"border border-gray-300 p-3\">\n                      <span className={`px-3 py-1 rounded-full text-sm font-semibold ${\n                        transaction.transaction_type === 'deposit'\n                          ? 'bg-green-100 text-green-800'\n                          : transaction.transaction_type === 'withdrawal'\n                          ? 'bg-red-100 text-red-800'\n                          : 'bg-blue-100 text-blue-800'\n                      }`}>\n                        {transaction.transaction_type === 'deposit'\n                          ? 'ğŸ’µ Ø¥ÙŠØ¯Ø§Ø¹'\n                          : transaction.transaction_type === 'withdrawal'\n                          ? 'ğŸ’¸ ØµØ±Ù'\n                          : 'â†”ï¸ ØªØ±Ø­ÙŠÙ„'}\n                      </span>\n                    </td>\n                    <td className={`border border-gray-300 p-3 font-bold ${\n                      transaction.transaction_type === 'withdrawal'\n                        ? 'text-red-600'\n                        : 'text-green-600'\n                    }`}>\n                      {transaction.transaction_type === 'withdrawal' ? '-' : '+'}\n                      {transaction.amount.toFixed(2)} Ø¬.Ù…\n                    </td>\n                    <td className=\"border border-gray-300 p-3\">{transaction.description}</td>\n                    <td className=\"border border-gray-300 p-3 text-gray-600\">\n                      {transaction.reference || '-'}\n                    </td>\n                    <td className=\"border border-gray-300 p-3 font-bold text-blue-600\">\n                      {transaction.balance_after.toFixed(2)} Ø¬.Ù…\n                    </td>\n                    <td className=\"border border-gray-300 p-3\">{transaction.performed_by}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// Main App Component\nconst App = () => {\n  const [currentPage, setCurrentPage] = useState('sales'); // Default to sales instead of dashboard\n  const { user } = useAuth();\n\n  if (!user) return <Login />;\n\n  const renderPage = () => {\n    switch (currentPage) {\n      case 'dashboard': \n        // Only Elsawy can access dashboard\n        return user?.username === 'Elsawy' ? <Dashboard /> : <Sales />;\n      case 'sales': return <Sales />;\n      case 'inventory': return <Inventory />;\n      case 'stock': return <Stock />;\n      case 'local': return <Local />;\n      case 'deferred': return <Deferred />;\n      case 'expenses': return <Expenses />;\n      case 'revenue': return <Revenue />;\n      case 'treasury': return <Treasury />;\n      case 'main-treasury': \n        // Only Elsawy can access main treasury\n        return user?.username === 'Elsawy' ? <MainTreasury /> : <Sales />;\n      case 'invoices': return <Invoices />;\n      case 'deleted-invoices': return <DeletedInvoices />;\n      case 'customer-statement': return <CustomerStatement />;\n      case 'settle-account': return <SettleAccount />;\n      case 'work-orders': return <WorkOrders />;\n      case 'pricing': return <Pricing />;\n      case 'backup': return <Backup />;\n      case 'users': return <Users />;\n      default: return <Sales />; // Default to sales instead of dashboard\n    }\n  };\n\n  return (\n    <div className=\"flex h-screen bg-gray-50\" dir=\"rtl\">\n      <Navigation currentPage={currentPage} onPageChange={setCurrentPage} />\n      <main className=\"flex-1 overflow-y-auto bg-gradient-to-br from-gray-50 to-blue-50\">\n        <div className=\"p-6\">\n          {renderPage()}\n        </div>\n      </main>\n    </div>\n  );\n};\n\n// Root App with AuthProvider\nconst AppWithAuth = () => (\n  <AuthProvider>\n    <App />\n  </AuthProvider>\n);\n\nexport default AppWithAuth;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}