{"ast":null,"code":"import _objectSpread from\"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,createContext,useContext}from'react';import'./App.css';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const BACKEND_URL=process.env.REACT_APP_BACKEND_URL;const API=\"\".concat(BACKEND_URL,\"/api\");// Auth Context\nconst AuthContext=/*#__PURE__*/createContext();const useAuth=()=>{const context=useContext(AuthContext);if(!context){throw new Error('useAuth must be used within an AuthProvider');}return context;};const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[isLoading,setIsLoading]=useState(true);useEffect(()=>{const savedUser=localStorage.getItem('user');if(savedUser){setUser(JSON.parse(savedUser));}setIsLoading(false);},[]);const login=async(username,password)=>{try{const response=await axios.post(\"\".concat(API,\"/auth/login\"),null,{params:{username,password}});if(response.data.success){setUser(response.data.user);localStorage.setItem('user',JSON.stringify(response.data.user));return true;}return false;}catch(error){console.error('Login error:',error);return false;}};const logout=()=>{setUser(null);localStorage.removeItem('user');};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-xl\",children:\"\\u062C\\u0627\\u0631\\u064A \\u0627\\u0644\\u062A\\u062D\\u0645\\u064A\\u0644...\"})});}return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,login,logout},children:children});};// Login Component\nconst Login=()=>{const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const{login}=useAuth();const handleSubmit=async e=>{e.preventDefault();setError('');const success=await login(username,password);if(!success){setError('Ø®Ø·Ø£ ÙÙŠ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4\",dir:\"rtl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl p-8 border border-blue-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\",alt:\"Master Seal Logo\",className:\"h-16 w-16 mx-auto rounded-full shadow-lg border-4 border-blue-100\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent\",children:\"\\u0645\\u0627\\u0633\\u062A\\u0631 \\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mt-2\",children:\"\\u0646\\u0638\\u0627\\u0645 \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0634\\u0631\\u0643\\u0629 \\u0627\\u0644\\u0645\\u062A\\u0643\\u0627\\u0645\\u0644\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-1 bg-gradient-to-r from-blue-400 to-blue-600 mx-auto mt-3 rounded-full\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"\\uD83D\\uDC64 \\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,onChange:e=>setUsername(e.target.value),className:\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-3 focus:ring-blue-200 focus:border-blue-400 transition-all duration-200 bg-gray-50 hover:bg-white\",placeholder:\"\\u0627\\u062F\\u062E\\u0644 \\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"\\uD83D\\uDD12 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),className:\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-3 focus:ring-blue-200 focus:border-blue-400 transition-all duration-200 bg-gray-50 hover:bg-white\",placeholder:\"\\u0627\\u062F\\u062E\\u0644 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\",required:true})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-xl text-sm text-center animate-pulse\",children:[\"\\u26A0\\uFE0F \",error]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-gradient-to-r from-blue-600 to-blue-800 text-white py-3 px-6 rounded-xl hover:from-blue-700 hover:to-blue-900 focus:outline-none focus:ring-3 focus:ring-blue-300 transition-all duration-200 font-semibold shadow-lg hover:shadow-xl transform hover:scale-105\",children:\"\\uD83D\\uDE80 \\u062F\\u062E\\u0648\\u0644\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-8 pt-6 border-t border-gray-100\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400\",children:\"\\u0627\\u0644\\u062D\\u0631\\u0641\\u064A\\u064A\\u0646 - \\u0627\\u0644\\u0633\\u0644\\u0627\\u0645 - \\u0623\\u0645\\u0627\\u0645 \\u0627\\u0644\\u0633\\u0648\\u0628\\u0631 \\u062C\\u064A\\u062A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1 font-medium\",children:\"\\uD83D\\uDCDE 01020630677\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 bg-white/60 backdrop-blur-sm rounded-xl p-4 text-center border border-blue-100/50\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"\\u0646\\u0638\\u0627\\u0645 \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0645\\u062A\\u0643\\u0627\\u0645\\u0644 \\u0644\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0645\\u0628\\u064A\\u0639\\u0627\\u062A \\u0648\\u0627\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0648\\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\\u0627\\u062A\"})})]})});};// Navigation Component\nconst Navigation=_ref2=>{let{currentPage,onPageChange}=_ref2;const{user,logout}=useAuth();// Dashboard is only for Elsawy\nconst elsawyPages=[{key:'dashboard',label:'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…',icon:'ğŸ“Š'},{key:'sales',label:'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª',icon:'ğŸ’°'},{key:'inventory',label:'Ø§Ù„Ø¬Ø±Ø¯',icon:'ğŸ“¦'},{key:'stock',label:'Ø§Ù„Ù…Ø®Ø²ÙˆÙ†',icon:'ğŸª'},{key:'local',label:'Ù…Ø­Ù„ÙŠ',icon:'ğŸ­'},{key:'deferred',label:'Ø§Ù„Ø¢Ø¬Ù„',icon:'â³'},{key:'expenses',label:'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª',icon:'ğŸ’¸'},{key:'revenue',label:'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª',icon:'ğŸ“ˆ'},{key:'treasury',label:'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©',icon:'ğŸ¦'},{key:'invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ±',icon:'ğŸ§¾'},{key:'work-orders',label:'Ø£Ù…Ø± Ø´ØºÙ„',icon:'âš™ï¸'},{key:'pricing',label:'Ø§Ù„ØªØ³Ø¹ÙŠØ±',icon:'ğŸ’²'},{key:'users',label:'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',icon:'ğŸ‘¥'}];const adminPages=[{key:'sales',label:'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª',icon:'ğŸ’°'},{key:'inventory',label:'Ø§Ù„Ø¬Ø±Ø¯',icon:'ğŸ“¦'},{key:'stock',label:'Ø§Ù„Ù…Ø®Ø²ÙˆÙ†',icon:'ğŸª'},{key:'local',label:'Ù…Ø­Ù„ÙŠ',icon:'ğŸ­'},{key:'deferred',label:'Ø§Ù„Ø¢Ø¬Ù„',icon:'â³'},{key:'expenses',label:'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª',icon:'ğŸ’¸'},{key:'revenue',label:'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª',icon:'ğŸ“ˆ'},{key:'treasury',label:'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©',icon:'ğŸ¦'},{key:'invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ±',icon:'ğŸ§¾'},{key:'work-orders',label:'Ø£Ù…Ø± Ø´ØºÙ„',icon:'âš™ï¸'},{key:'pricing',label:'Ø§Ù„ØªØ³Ø¹ÙŠØ±',icon:'ğŸ’²'},{key:'users',label:'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',icon:'ğŸ‘¥'}];const userPages=[{key:'sales',label:'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª',icon:'ğŸ’°'},{key:'inventory',label:'Ø§Ù„Ø¬Ø±Ø¯',icon:'ğŸ“¦'},{key:'stock',label:'Ø§Ù„Ù…Ø®Ø²ÙˆÙ†',icon:'ğŸª'},{key:'local',label:'Ù…Ø­Ù„ÙŠ',icon:'ğŸ­'},{key:'deferred',label:'Ø§Ù„Ø¢Ø¬Ù„',icon:'â³'},{key:'expenses',label:'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª',icon:'ğŸ’¸'},{key:'treasury',label:'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©',icon:'ğŸ¦'},{key:'invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ±',icon:'ğŸ§¾'},{key:'work-orders',label:'Ø£Ù…Ø± Ø´ØºÙ„',icon:'âš™ï¸'},{key:'pricing',label:'Ø§Ù„ØªØ³Ø¹ÙŠØ±',icon:'ğŸ’²'}];// Only Elsawy gets dashboard access\nconst pages=(user===null||user===void 0?void 0:user.username)==='Elsawy'?elsawyPages:(user===null||user===void 0?void 0:user.role)==='admin'?adminPages:userPages;return/*#__PURE__*/_jsxs(\"div\",{className:\"w-80 bg-gradient-to-b from-blue-900 via-blue-800 to-blue-900 text-white shadow-2xl\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-blue-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\",alt:\"Master Seal Logo\",className:\"h-12 w-12 rounded-lg shadow-lg\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold text-white\",children:\"\\u0645\\u0627\\u0633\\u062A\\u0631 \\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-200\",children:\"\\u0646\\u0638\\u0627\\u0645 \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0645\\u062A\\u0643\\u0627\\u0645\\u0644\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-blue-800 border-b border-blue-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium\",children:\"\\u0623\\u0647\\u0644\\u0627\\u064B \\u0648\\u0633\\u0647\\u0644\\u0627\\u064B\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-bold text-blue-200\",children:user===null||user===void 0?void 0:user.username})]}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"bg-red-500 hover:bg-red-600 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 shadow-lg hover:shadow-xl\",children:\"\\u062E\\u0631\\u0648\\u062C\"})]})}),/*#__PURE__*/_jsx(\"nav\",{className:\"flex-1 p-4 space-y-2\",children:pages.map(page=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onPageChange(page.key),className:\"w-full flex items-center space-x-3 space-x-reverse p-4 rounded-xl text-right transition-all duration-200 group \".concat(currentPage===page.key?'bg-white text-blue-900 shadow-lg transform scale-105':'hover:bg-blue-700 hover:transform hover:translate-x-2'),children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:page.icon}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:page.label}),currentPage===page.key&&/*#__PURE__*/_jsx(\"div\",{className:\"mr-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-blue-500 rounded-full animate-pulse\"})})]},page.key))}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-t border-blue-700 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-300\",children:\"\\u0627\\u0644\\u062D\\u0631\\u0641\\u064A\\u064A\\u0646 - \\u0627\\u0644\\u0633\\u0644\\u0627\\u0645 - \\u0623\\u0645\\u0627\\u0645 \\u0627\\u0644\\u0633\\u0648\\u0628\\u0631 \\u062C\\u064A\\u062A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-400 mt-1\",children:\"01020630677\"})]})]});};// Inventory Management Component\nconst Inventory=()=>{const[inventoryItems,setInventoryItems]=useState([]);const[inventoryTransactions,setInventoryTransactions]=useState([]);const[lowStockItems,setLowStockItems]=useState([]);const[currentView,setCurrentView]=useState('items');// items, transactions, low-stock, add-item\nconst[editingItem,setEditingItem]=useState(null);// Ù„Ù„ØªØ¹Ø¯ÙŠÙ„\nconst[newItem,setNewItem]=useState({material_type:'NBR',inner_diameter:'',outer_diameter:'',available_pieces:'',// ØªØºÙŠÙŠØ± Ù…Ù† available_height Ø¥Ù„Ù‰ available_pieces\nmin_stock_level:2,// Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ 2 Ù‚Ø·Ø¹Ø©\nnotes:''});const[newTransaction,setNewTransaction]=useState({material_type:'NBR',inner_diameter:'',outer_diameter:'',transaction_type:'in',pieces_change:'',// ØªØºÙŠÙŠØ± Ù…Ù† height_change Ø¥Ù„Ù‰ pieces_change\nreason:'',notes:''});const[searchTerm,setSearchTerm]=useState('');const materialTypes=['NBR','BUR','BT','VT','BOOM'];// Fetch functions\nconst fetchInventoryItems=async()=>{try{const response=await axios.get(\"\".concat(API,\"/inventory\"));setInventoryItems(response.data||[]);}catch(error){console.error('Error fetching inventory items:',error);}};const fetchInventoryTransactions=async()=>{try{const response=await axios.get(\"\".concat(API,\"/inventory-transactions\"));setInventoryTransactions(response.data||[]);}catch(error){console.error('Error fetching inventory transactions:',error);}};const fetchLowStockItems=async()=>{try{const response=await axios.get(\"\".concat(API,\"/inventory/low-stock\"));setLowStockItems(response.data||[]);}catch(error){console.error('Error fetching low stock items:',error);}};useEffect(()=>{fetchInventoryItems();fetchInventoryTransactions();fetchLowStockItems();},[]);// Add or Update inventory item\nconst addInventoryItem=async()=>{if(!newItem.material_type||!newItem.inner_diameter||!newItem.outer_diameter||!newItem.available_pieces){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{if(editingItem){// Update existing item\nawait axios.put(\"\".concat(API,\"/inventory/\").concat(editingItem.id),_objectSpread(_objectSpread({},newItem),{},{inner_diameter:parseFloat(newItem.inner_diameter),outer_diameter:parseFloat(newItem.outer_diameter),available_pieces:parseInt(newItem.available_pieces),min_stock_level:parseInt(newItem.min_stock_level||2)}));alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');setEditingItem(null);}else{// Add new item\nawait axios.post(\"\".concat(API,\"/inventory\"),_objectSpread(_objectSpread({},newItem),{},{inner_diameter:parseFloat(newItem.inner_diameter),outer_diameter:parseFloat(newItem.outer_diameter),available_pieces:parseInt(newItem.available_pieces),min_stock_level:parseInt(newItem.min_stock_level||2)}));alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}fetchInventoryItems();fetchLowStockItems();setCurrentView('items');setNewItem({material_type:'NBR',inner_diameter:'',outer_diameter:'',available_pieces:'',min_stock_level:2,notes:''});}catch(error){var _error$response,_error$response$data;console.error('Error saving inventory item:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯: '+(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||error.message));}};// Add inventory transaction\nconst addInventoryTransaction=async()=>{if(!newTransaction.material_type||!newTransaction.inner_diameter||!newTransaction.outer_diameter||!newTransaction.pieces_change||!newTransaction.reason){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{const transactionData=_objectSpread(_objectSpread({},newTransaction),{},{inner_diameter:parseFloat(newTransaction.inner_diameter),outer_diameter:parseFloat(newTransaction.outer_diameter),pieces_change:newTransaction.transaction_type==='out'?-Math.abs(parseInt(newTransaction.pieces_change)):Math.abs(parseInt(newTransaction.pieces_change))});await axios.post(\"\".concat(API,\"/inventory-transactions\"),transactionData);fetchInventoryItems();fetchInventoryTransactions();fetchLowStockItems();setNewTransaction({material_type:'NBR',inner_diameter:'',outer_diameter:'',transaction_type:'in',pieces_change:'',reason:'',notes:''});alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ù…Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response2,_error$response2$data;console.error('Error adding inventory transaction:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ù…Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ø¬Ø±Ø¯: '+(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.detail)||error.message));}};// Filter and sort items based on search\nconst filteredItems=inventoryItems.filter(item=>{var _item$notes;return item.material_type.toLowerCase().includes(searchTerm.toLowerCase())||item.inner_diameter.toString().includes(searchTerm.toLowerCase())||item.outer_diameter.toString().includes(searchTerm.toLowerCase())||((_item$notes=item.notes)===null||_item$notes===void 0?void 0:_item$notes.toLowerCase().includes(searchTerm.toLowerCase()));}).sort((a,b)=>{// ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\nconst materialPriority={'BUR':1,'NBR':2,'BT':3,'BOOM':4,'VT':5};const aPriority=materialPriority[a.material_type]||6;const bPriority=materialPriority[b.material_type]||6;if(aPriority!==bPriority){return aPriority-bPriority;}// Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)\nif(a.inner_diameter!==b.inner_diameter){return a.inner_diameter-b.inner_diameter;}return a.outer_diameter-b.outer_diameter;});const filteredTransactions=inventoryTransactions.filter(transaction=>{var _transaction$notes;return transaction.reason.toLowerCase().includes(searchTerm.toLowerCase())||transaction.material_type.toLowerCase().includes(searchTerm.toLowerCase())||((_transaction$notes=transaction.notes)===null||_transaction$notes===void 0?void 0:_transaction$notes.toLowerCase().includes(searchTerm.toLowerCase()));}).sort((a,b)=>{// ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\nconst materialPriority={'BUR':1,'NBR':2,'BT':3,'BOOM':4,'VT':5};const aPriority=materialPriority[a.material_type]||6;const bPriority=materialPriority[b.material_type]||6;if(aPriority!==bPriority){return aPriority-bPriority;}// Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ) Ø«Ù… Ø§Ù„ØªØ§Ø±ÙŠØ®\nif(a.inner_diameter!==b.inner_diameter){return a.inner_diameter-b.inner_diameter;}if(a.outer_diameter!==b.outer_diameter){return a.outer_diameter-b.outer_diameter;}return new Date(b.date)-new Date(a.date);// Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹\n});return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('items'),className:\"px-4 py-2 rounded \".concat(currentView==='items'?'bg-blue-500 text-white':'bg-gray-200'),children:\"\\u0639\\u0646\\u0627\\u0635\\u0631 \\u0627\\u0644\\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('transactions'),className:\"px-4 py-2 rounded \".concat(currentView==='transactions'?'bg-blue-500 text-white':'bg-gray-200'),children:\"\\u0645\\u0639\\u0627\\u0645\\u0644\\u0627\\u062A \\u0627\\u0644\\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCurrentView('low-stock'),className:\"px-4 py-2 rounded \".concat(currentView==='low-stock'?'bg-red-500 text-white':'bg-gray-200'),children:[\"\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0645\\u0646\\u062E\\u0641\\u0636 (\",lowStockItems.length,\")\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('excel'),className:\"px-4 py-2 rounded \".concat(currentView==='excel'?'bg-green-500 text-white':'bg-gray-200'),children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0625\\u0643\\u0633\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('add-item'),className:\"px-4 py-2 rounded \".concat(currentView==='add-item'?'bg-green-500 text-white':'bg-gray-200'),children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0639\\u0646\\u0635\\u0631 \\u062C\\u062F\\u064A\\u062F\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"\\u0627\\u0644\\u0628\\u062D\\u062B \\u0641\\u064A \\u0627\\u0644\\u062C\\u0631\\u062F...\",className:\"w-full p-3 border border-gray-300 rounded-lg\"})}),currentView==='items'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0639\\u0646\\u0627\\u0635\\u0631 \\u0627\\u0644\\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0627\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0642\\u0637\\u0639 \\u0627\\u0644\\u0645\\u062A\\u0627\\u062D\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u062F \\u0627\\u0644\\u0623\\u062F\\u0646\\u0649\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredItems.map(item=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:item.material_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.inner_diameter}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.outer_diameter}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold \".concat(item.available_pieces<=item.min_stock_level?'text-red-600':'text-green-600'),children:[item.available_pieces,\" \\u0642\\u0637\\u0639\\u0629\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[item.min_stock_level,\" \\u0642\\u0637\\u0639\\u0629\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm \".concat(item.available_pieces<=item.min_stock_level?'bg-red-100 text-red-800':'bg-green-100 text-green-800'),children:item.available_pieces<=item.min_stock_level?'Ù…Ù†Ø®ÙØ¶':'Ø·Ø¨ÙŠØ¹ÙŠ'})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.notes||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingItem(item);setNewItem({material_type:item.material_type,inner_diameter:item.inner_diameter,outer_diameter:item.outer_diameter,available_pieces:item.available_pieces,min_stock_level:item.min_stock_level,notes:item.notes||''});setCurrentView('add-item');},className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{if(confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ØµØ±ØŸ')){try{await axios.delete(\"\".concat(API,\"/inventory/\").concat(item.id));alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ù†ØµØ± Ø¨Ù†Ø¬Ø§Ø­');fetchInventoryItems();}catch(error){console.error('Error deleting item:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¹Ù†ØµØ±');}}},className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641\"})]})})]},item.id))})]})})]}),currentView==='transactions'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0639\\u0627\\u0645\\u0644\\u0629 \\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsx(\"select\",{value:newTransaction.material_type,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{material_type:e.target.value})),className:\"p-2 border border-gray-300 rounded\",children:materialTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newTransaction.inner_diameter,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{inner_diameter:e.target.value})),placeholder:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newTransaction.outer_diameter,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{outer_diameter:e.target.value})),placeholder:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsxs(\"select\",{value:newTransaction.transaction_type,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{transaction_type:e.target.value})),className:\"p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"in\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0644\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646\"}),/*#__PURE__*/_jsx(\"option\",{value:\"out\",children:\"\\u062E\\u0635\\u0645 \\u0645\\u0646 \\u0627\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"1\",value:newTransaction.pieces_change,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{pieces_change:e.target.value})),placeholder:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0642\\u0637\\u0639\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newTransaction.reason,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{reason:e.target.value})),placeholder:\"\\u0633\\u0628\\u0628 \\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0629\",className:\"p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newTransaction.notes,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{notes:e.target.value})),placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\",className:\"w-full p-2 border border-gray-300 rounded\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:addInventoryTransaction,className:\"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0633\\u062C\\u0644 \\u0645\\u0639\\u0627\\u0645\\u0644\\u0627\\u062A \\u0627\\u0644\\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0627\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0642\\u0627\\u0633\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0642\\u0637\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0645\\u062A\\u0628\\u0642\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0633\\u0628\\u0628\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredTransactions.map(transaction=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(transaction.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.material_type}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[transaction.inner_diameter,\" \\xD7 \",transaction.outer_diameter]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm \".concat(transaction.transaction_type==='in'?'bg-green-100 text-green-800':'bg-red-100 text-red-800'),children:transaction.transaction_type==='in'?'Ø¥Ø¶Ø§ÙØ©':'Ø®ØµÙ…'})}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold \".concat(transaction.pieces_change>0?'text-green-600':'text-red-600'),children:[transaction.pieces_change>0?'+':'',transaction.pieces_change,\" \\u0642\\u0637\\u0639\\u0629\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:[transaction.remaining_pieces,\" \\u0642\\u0637\\u0639\\u0629\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.reason}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.notes||'-'})]},transaction.id))})]})})]})]}),currentView==='low-stock'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold mb-4 text-red-600\",children:[\"\\u0639\\u0646\\u0627\\u0635\\u0631 \\u0628\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0645\\u0646\\u062E\\u0641\\u0636 (\",lowStockItems.length,\")\"]}),lowStockItems.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-green-600 text-center py-8\",children:\"\\u2705 \\u062C\\u0645\\u064A\\u0639 \\u0639\\u0646\\u0627\\u0635\\u0631 \\u0627\\u0644\\u062C\\u0631\\u062F \\u0641\\u064A \\u0627\\u0644\\u0645\\u0633\\u062A\\u0648\\u0649 \\u0627\\u0644\\u0637\\u0628\\u064A\\u0639\\u064A\"}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-red-50\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0627\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0642\\u0627\\u0633\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u062F \\u0627\\u0644\\u0623\\u062F\\u0646\\u0649\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0642\\u0635 \\u0627\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:lowStockItems.map(item=>/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-red-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:item.material_type}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[item.inner_diameter,\" \\xD7 \",item.outer_diameter]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold text-red-600\",children:[item.available_pieces,\" \\u0642\\u0637\\u0639\\u0629\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[item.min_stock_level,\" \\u0642\\u0637\\u0639\\u0629\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold text-red-600\",children:[Math.max(0,item.min_stock_level-item.available_pieces),\" \\u0642\\u0637\\u0639\\u0629\"]})]},item.id))})]})})]}),currentView==='add-item'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:editingItem?'ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯':'Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø¬Ø±Ø¯ Ø¬Ø¯ÙŠØ¯'}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(\"select\",{value:newItem.material_type,onChange:e=>setNewItem(_objectSpread(_objectSpread({},newItem),{},{material_type:e.target.value})),className:\"p-2 border border-gray-300 rounded\",children:materialTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newItem.inner_diameter,onChange:e=>setNewItem(_objectSpread(_objectSpread({},newItem),{},{inner_diameter:e.target.value})),placeholder:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newItem.outer_diameter,onChange:e=>setNewItem(_objectSpread(_objectSpread({},newItem),{},{outer_diameter:e.target.value})),placeholder:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"1\",value:newItem.available_pieces,onChange:e=>setNewItem(_objectSpread(_objectSpread({},newItem),{},{available_pieces:e.target.value})),placeholder:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0642\\u0637\\u0639 \\u0627\\u0644\\u0645\\u062A\\u0627\\u062D\\u0629\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newItem.min_stock_level,onChange:e=>setNewItem(_objectSpread(_objectSpread({},newItem),{},{min_stock_level:e.target.value})),placeholder:\"\\u0627\\u0644\\u062D\\u062F \\u0627\\u0644\\u0623\\u062F\\u0646\\u0649 \\u0644\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newItem.notes,onChange:e=>setNewItem(_objectSpread(_objectSpread({},newItem),{},{notes:e.target.value})),placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\",className:\"p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addInventoryItem,className:\"mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:editingItem?'ØªØ­Ø¯ÙŠØ« Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯':'Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯'}),editingItem&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingItem(null);setNewItem({material_type:'NBR',inner_diameter:'',outer_diameter:'',available_pieces:'',min_stock_level:2,notes:''});setCurrentView('items');},className:\"mt-4 mr-2 bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621 \\u0627\\u0644\\u062A\\u0639\\u062F\\u064A\\u0644\"})]}),currentView==='excel'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0645\\u0644\\u0641\\u0627\\u062A \\u0627\\u0644\\u062C\\u0631\\u062F - Excel\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u062A\\u0635\\u062F\\u064A\\u0631 \\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{try{const response=await axios.get(\"\".concat(API,\"/excel/export/inventory\"),{responseType:'blob'});const url=window.URL.createObjectURL(new Blob([response.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download',\"inventory_export_\".concat(new Date().toISOString().split('T')[0],\".xlsx\"));document.body.appendChild(link);link.click();link.remove();alert('ØªÙ… ØªØµØ¯ÙŠØ± Ù…Ù„Ù Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error exporting inventory:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù');}},className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u062A\\u0635\\u062F\\u064A\\u0631 \\u062C\\u0631\\u062F Excel\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".xlsx,.xls\",onChange:async e=>{const file=e.target.files[0];if(!file)return;const formData=new FormData();formData.append('file',file);try{const response=await axios.post(\"\".concat(API,\"/excel/import/inventory\"),formData,{headers:{'Content-Type':'multipart/form-data'}});alert(\"\\u062A\\u0645 \\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \".concat(response.data.imported_count,\" \\u0639\\u0646\\u0635\\u0631 \\u0628\\u0646\\u062C\\u0627\\u062D\"));if(response.data.errors.length>0){console.warn('Import errors:',response.data.errors);}fetchInventoryItems();}catch(error){console.error('Error importing inventory:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù');}e.target.value='';},className:\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-2\",children:\"\\u0627\\u0644\\u0623\\u0639\\u0645\\u062F\\u0629 \\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628\\u0629: material_type, inner_diameter, outer_diameter, available_pieces\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u062E\\u0627\\u0645 - Excel\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u062A\\u0635\\u062F\\u064A\\u0631 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u062E\\u0627\\u0645\"}),/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{try{const response=await axios.get(\"\".concat(API,\"/excel/export/raw-materials\"),{responseType:'blob'});const url=window.URL.createObjectURL(new Blob([response.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download',\"raw_materials_export_\".concat(new Date().toISOString().split('T')[0],\".xlsx\"));document.body.appendChild(link);link.click();link.remove();alert('ØªÙ… ØªØµØ¯ÙŠØ± Ù…Ù„Ù Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error exporting raw materials:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù');}},className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u062A\\u0635\\u062F\\u064A\\u0631 \\u0645\\u0648\\u0627\\u062F \\u062E\\u0627\\u0645 Excel\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u062E\\u0627\\u0645\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".xlsx,.xls\",onChange:async e=>{const file=e.target.files[0];if(!file)return;const formData=new FormData();formData.append('file',file);try{const response=await axios.post(\"\".concat(API,\"/excel/import/raw-materials\"),formData,{headers:{'Content-Type':'multipart/form-data'}});alert(\"\\u062A\\u0645 \\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \".concat(response.data.imported_count,\" \\u0645\\u0627\\u062F\\u0629 \\u062E\\u0627\\u0645 \\u0628\\u0646\\u062C\\u0627\\u062D\"));if(response.data.errors.length>0){console.warn('Import errors:',response.data.errors);}}catch(error){console.error('Error importing raw materials:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù');}e.target.value='';},className:\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-2\",children:\"\\u0627\\u0644\\u0623\\u0639\\u0645\\u062F\\u0629 \\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628\\u0629: material_type, inner_diameter, outer_diameter, height, pieces_count, unit_code, cost_per_mm\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 p-6 rounded-lg shadow-md md:col-span-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u062A\\u0639\\u0644\\u064A\\u0645\\u0627\\u062A \\u0627\\u0633\\u062A\\u062E\\u062F\\u0627\\u0645 \\u0627\\u0644\\u0625\\u0643\\u0633\\u0644\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u062A\\u0635\\u062F\\u064A\\u0631 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"text-sm text-gray-700 list-disc list-inside space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u064A\\u062A\\u0645 \\u062A\\u0635\\u062F\\u064A\\u0631 \\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0644\\u0645\\u0644\\u0641 \\u064A\\u062D\\u062A\\u0648\\u064A \\u0639\\u0644\\u0649 \\u062A\\u0646\\u0633\\u064A\\u0642 \\u062C\\u0627\\u0647\\u0632 \\u0644\\u0644\\u062A\\u0639\\u062F\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u064A\\u0645\\u0643\\u0646 \\u0641\\u062A\\u062D \\u0627\\u0644\\u0645\\u0644\\u0641 \\u0641\\u064A Excel \\u0623\\u0648 Google Sheets\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"text-sm text-gray-700 list-disc list-inside space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u064A\\u062C\\u0628 \\u0623\\u0646 \\u064A\\u0643\\u0648\\u0646 \\u0627\\u0644\\u0645\\u0644\\u0641 \\u0645\\u0646 \\u0646\\u0648\\u0639 .xlsx \\u0623\\u0648 .xls\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0644\\u0623\\u0639\\u0645\\u062F\\u0629 \\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628\\u0629 \\u064A\\u062C\\u0628 \\u0623\\u0646 \\u062A\\u0643\\u0648\\u0646 \\u0645\\u0648\\u062C\\u0648\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u0645\\u0648\\u062C\\u0648\\u062F\\u0629 \\u0644\\u0646 \\u062A\\u062A\\u0623\\u062B\\u0631 (\\u064A\\u062A\\u0645 \\u0627\\u0644\\u062A\\u062D\\u062F\\u064A\\u062B \\u0623\\u0648 \\u0627\\u0644\\u0625\\u0636\\u0627\\u0641\\u0629)\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0633\\u064A\\u062A\\u0645 \\u0639\\u0631\\u0636 \\u0631\\u0633\\u0627\\u0644\\u0629 \\u062A\\u0623\\u0643\\u064A\\u062F \\u0645\\u0639 \\u0639\\u062F\\u062F \\u0627\\u0644\\u0639\\u0646\\u0627\\u0635\\u0631 \\u0627\\u0644\\u0645\\u0633\\u062A\\u0648\\u0631\\u062F\\u0629\"})]})]})]})]})]})]});};// Local Products Management Component\nconst Local=()=>{const[suppliers,setSuppliers]=useState([]);const[localProducts,setLocalProducts]=useState([]);const[supplierTransactions,setSupplierTransactions]=useState([]);const[currentView,setCurrentView]=useState('suppliers');// suppliers, products, transactions\nconst[newSupplier,setNewSupplier]=useState({name:'',phone:'',address:''});const[newProduct,setNewProduct]=useState({name:'',supplier_id:'',purchase_price:'',selling_price:'',current_stock:0});const[newTransaction,setNewTransaction]=useState({supplier_id:'',transaction_type:'purchase',amount:'',description:'',product_name:'',quantity:'',unit_price:'',payment_method:'cash'});const[selectedSupplier,setSelectedSupplier]=useState('');const[paymentAmount,setPaymentAmount]=useState('');const[paymentMethod,setPaymentMethod]=useState('cash');// Fetch data functions\nconst fetchSuppliers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/suppliers\"));setSuppliers(response.data||[]);}catch(error){console.error('Error fetching suppliers:',error);}};const fetchLocalProducts=async()=>{try{const response=await axios.get(\"\".concat(API,\"/local-products\"));setLocalProducts(response.data||[]);}catch(error){console.error('Error fetching local products:',error);}};const fetchSupplierTransactions=async()=>{try{const response=await axios.get(\"\".concat(API,\"/supplier-transactions\"));setSupplierTransactions(response.data||[]);}catch(error){console.error('Error fetching supplier transactions:',error);}};useEffect(()=>{fetchSuppliers();fetchLocalProducts();fetchSupplierTransactions();},[]);// Add supplier\nconst addSupplier=async()=>{if(!newSupplier.name.trim()){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯');return;}try{if(newSupplier.id){// Update existing supplier\nawait axios.put(\"\".concat(API,\"/suppliers/\").concat(newSupplier.id),{name:newSupplier.name,phone:newSupplier.phone,address:newSupplier.address});alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}else{// Add new supplier\nawait axios.post(\"\".concat(API,\"/suppliers\"),newSupplier);alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}fetchSuppliers();setNewSupplier({name:'',phone:'',address:''});}catch(error){var _error$response3,_error$response3$data;console.error('Error saving supplier:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…ÙˆØ±Ø¯: '+(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.detail)||error.message));}};const editSupplier=supplier=>{// Fill the form with supplier data for editing\nsetNewSupplier({id:supplier.id,name:supplier.name,phone:supplier.phone||'',address:supplier.address||''});};const deleteSupplier=async supplierId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ±Ø¯ØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡.')){return;}try{await axios.delete(\"\".concat(API,\"/suppliers/\").concat(supplierId));fetchSuppliers();fetchLocalProducts();// Refresh products as they might be affected\nalert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response4,_error$response4$data;console.error('Error deleting supplier:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ±Ø¯: '+(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.detail)||error.message));}};// Add local product\nconst addLocalProduct=async()=>{if(!newProduct.name.trim()||!newProduct.supplier_id||!newProduct.purchase_price||!newProduct.selling_price){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{if(newProduct.id){// Update existing product\nawait axios.put(\"\".concat(API,\"/local-products/\").concat(newProduct.id),{name:newProduct.name,supplier_id:newProduct.supplier_id,purchase_price:parseFloat(newProduct.purchase_price),selling_price:parseFloat(newProduct.selling_price),current_stock:parseInt(newProduct.current_stock||0)});alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­');}else{// Add new product\nawait axios.post(\"\".concat(API,\"/local-products\"),_objectSpread(_objectSpread({},newProduct),{},{purchase_price:parseFloat(newProduct.purchase_price),selling_price:parseFloat(newProduct.selling_price),current_stock:parseInt(newProduct.current_stock||0)}));alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­');}fetchLocalProducts();setNewProduct({name:'',supplier_id:'',purchase_price:'',selling_price:'',current_stock:0});}catch(error){var _error$response5,_error$response5$data;console.error('Error saving local product:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬: '+(((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.detail)||error.message));}};const editLocalProduct=product=>{// Fill the form with product data for editing\nsetNewProduct({id:product.id,name:product.name,supplier_id:product.supplier_id,purchase_price:product.purchase_price.toString(),selling_price:product.selling_price.toString(),current_stock:product.current_stock||0});};const deleteLocalProduct=async productId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡.')){return;}try{await axios.delete(\"\".concat(API,\"/local-products/\").concat(productId));fetchLocalProducts();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response6,_error$response6$data;console.error('Error deleting local product:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬: '+(((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.detail)||error.message));}};// Pay supplier\nconst paySupplier=async()=>{if(!selectedSupplier||!paymentAmount){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙˆØ±Ø¯ ÙˆØ¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº');return;}try{await axios.post(\"\".concat(API,\"/supplier-payment?supplier_id=\").concat(selectedSupplier,\"&amount=\").concat(paymentAmount,\"&payment_method=\").concat(paymentMethod));fetchSuppliers();fetchSupplierTransactions();setSelectedSupplier('');setPaymentAmount('');alert('ØªÙ… Ø¯ÙØ¹ Ø§Ù„Ù…Ø¨Ù„Øº Ù„Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error paying supplier:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¯ÙØ¹ Ø§Ù„Ù…Ø¨Ù„Øº');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A \\u0627\\u0644\\u0645\\u062D\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('suppliers'),className:\"px-4 py-2 rounded \".concat(currentView==='suppliers'?'bg-blue-500 text-white':'bg-gray-200'),children:\"\\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\\u064A\\u0646\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('products'),className:\"px-4 py-2 rounded \".concat(currentView==='products'?'bg-blue-500 text-white':'bg-gray-200'),children:\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('transactions'),className:\"px-4 py-2 rounded \".concat(currentView==='transactions'?'bg-blue-500 text-white':'bg-gray-200'),children:\"\\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('payments'),className:\"px-4 py-2 rounded \".concat(currentView==='payments'?'bg-blue-500 text-white':'bg-gray-200'),children:\"\\u0633\\u062F\\u0627\\u062F \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\\u064A\\u0646\"})]})]}),currentView==='suppliers'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0648\\u0631\\u062F \\u062C\\u062F\\u064A\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newSupplier.name,onChange:e=>setNewSupplier(_objectSpread(_objectSpread({},newSupplier),{},{name:e.target.value})),placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newSupplier.phone,onChange:e=>setNewSupplier(_objectSpread(_objectSpread({},newSupplier),{},{phone:e.target.value})),placeholder:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0647\\u0627\\u062A\\u0641 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newSupplier.address,onChange:e=>setNewSupplier(_objectSpread(_objectSpread({},newSupplier),{},{address:e.target.value})),placeholder:\"\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\",className:\"p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addSupplier,className:\"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0642\\u0627\\u0626\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\\u064A\\u0646\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0647\\u0627\\u062A\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0634\\u062A\\u0631\\u064A\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:suppliers.map(supplier=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:supplier.name}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:supplier.phone||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:supplier.address||'-'}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",(supplier.total_purchases||0).toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",(supplier.total_paid||0).toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold \".concat((supplier.balance||0)>0?'text-red-600':'text-green-600'),children:[\"\\u062C.\\u0645 \",(supplier.balance||0).toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editSupplier(supplier),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",title:\"\\u062A\\u062D\\u0631\\u064A\\u0631\",children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteSupplier(supplier.id),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",title:\"\\u062D\\u0630\\u0641\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]})})]},supplier.id))})]})})]})]}),currentView==='products'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0646\\u062A\\u062C \\u0645\\u062D\\u0644\\u064A \\u062C\\u062F\\u064A\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newProduct.name,onChange:e=>setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{name:e.target.value})),placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsxs(\"select\",{value:newProduct.supplier_id,onChange:e=>setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{supplier_id:e.target.value})),className:\"p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),suppliers.map(supplier=>/*#__PURE__*/_jsx(\"option\",{value:supplier.id,children:supplier.name},supplier.id))]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newProduct.purchase_price,onChange:e=>setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{purchase_price:e.target.value})),placeholder:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0634\\u0631\\u0627\\u0621\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newProduct.selling_price,onChange:e=>setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{selling_price:e.target.value})),placeholder:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0628\\u064A\\u0639\",className:\"p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addLocalProduct,className:\"mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0642\\u0627\\u0626\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A \\u0627\\u0644\\u0645\\u062D\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0634\\u0631\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0628\\u064A\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u0627\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:localProducts.map(product=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:product.name}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.supplier_name}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",product.purchase_price.toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",product.selling_price.toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.current_stock||0}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.total_sold||0}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editLocalProduct(product),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",title:\"\\u062A\\u062D\\u0631\\u064A\\u0631\",children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteLocalProduct(product.id),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",title:\"\\u062D\\u0630\\u0641\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]})})]},product.id))})]})})]})]}),currentView==='transactions'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0645\\u0639\\u0627\\u0645\\u0644\\u0627\\u062A \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\\u064A\\u0646\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0648\\u0635\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:supplierTransactions.map(transaction=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(transaction.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.supplier_name}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm \".concat(transaction.transaction_type==='purchase'?'bg-red-100 text-red-800':'bg-green-100 text-green-800'),children:transaction.transaction_type==='purchase'?'Ø´Ø±Ø§Ø¡':'Ø¯ÙØ¹'})}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold \".concat(transaction.transaction_type==='purchase'?'text-red-600':'text-green-600'),children:[\"\\u062C.\\u0645 \",transaction.amount.toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.description}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.product_name||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.quantity||'-'})]},transaction.id))})]})})]}),currentView==='payments'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0633\\u062F\\u0627\\u062F \\u062D\\u0633\\u0627\\u0628\\u0627\\u062A \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\\u064A\\u0646\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"select\",{value:selectedSupplier,onChange:e=>setSelectedSupplier(e.target.value),className:\"p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),suppliers.filter(s=>(s.balance||0)>0).map(supplier=>/*#__PURE__*/_jsxs(\"option\",{value:supplier.id,children:[supplier.name,\" - \\u0645\\u0633\\u062A\\u062D\\u0642: \\u062C.\\u0645 \",(supplier.balance||0).toFixed(2)]},supplier.id))]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:paymentAmount,onChange:e=>setPaymentAmount(e.target.value),placeholder:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsxs(\"select\",{value:paymentMethod,onChange:e=>setPaymentMethod(e.target.value),className:\"p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"cash\",children:\"\\u0646\\u0642\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vodafone_elsawy\",children:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 \\u0643\\u0627\\u0634 \\u0627\\u0644\\u0635\\u0627\\u0648\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vodafone_wael\",children:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 \\u0643\\u0627\\u0634 \\u0648\\u0627\\u0626\\u0644\"}),/*#__PURE__*/_jsx(\"option\",{value:\"instapay\",children:\"\\u0627\\u0646\\u0633\\u062A\\u0627 \\u0628\\u0627\\u064A\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:paySupplier,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u062F\\u0641\\u0639 \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"})]})]});};// Dashboard Component\nconst Dashboard=()=>{const{user}=useAuth();// Only Elsawy can access dashboard\nif((user===null||user===void 0?void 0:user.username)!=='Elsawy'){return/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",dir:\"rtl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u063A\\u064A\\u0631 \\u0645\\u0633\\u0645\\u0648\\u062D!\"}),\" \\u0644\\u0648\\u062D\\u0629 \\u0627\\u0644\\u062A\\u062D\\u0643\\u0645 \\u0645\\u062E\\u0635\\u0635\\u0629 \\u0644\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645 Elsawy \\u0641\\u0642\\u0637.\"]})});}const[stats,setStats]=useState({total_sales:0,total_expenses:0,net_profit:0,total_unpaid:0,invoice_count:0,customer_count:0});useEffect(()=>{fetchStats();},[]);const fetchStats=async()=>{try{const response=await axios.get(\"\".concat(API,\"/dashboard/stats\"));setStats(response.data);}catch(error){console.error('Error fetching stats:',error);}};const clearAllData=async()=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.'))return;try{// Clear all data from backend\nawait axios.delete(\"\".concat(API,\"/customers/clear-all\"));await axios.delete(\"\".concat(API,\"/raw-materials/clear-all\"));await axios.delete(\"\".concat(API,\"/finished-products/clear-all\"));await axios.delete(\"\".concat(API,\"/invoices/clear-all\"));await axios.delete(\"\".concat(API,\"/expenses/clear-all\"));await axios.delete(\"\".concat(API,\"/payments/clear-all\"));await axios.delete(\"\".concat(API,\"/work-orders/clear-all\"));// Refresh dashboard stats\nfetchStats();alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');}catch(error){console.error('Error clearing all data:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');}};const printReport=reportType=>{const currentDate=new Date().toLocaleDateString('ar-EG');let printContent=\"\\n      <div style=\\\"font-family: Arial, sans-serif; direction: rtl; text-align: right;\\\">\\n        <div style=\\\"text-align: center; margin-bottom: 20px;\\\">\\n          <h1>\\u0645\\u0627\\u0633\\u062A\\u0631 \\u0633\\u064A\\u0644</h1>\\n          <p>\\u0627\\u0644\\u062D\\u0631\\u0641\\u064A\\u0627\\u0646 \\u0634\\u0627\\u0631\\u0639 \\u0627\\u0644\\u0633\\u0648\\u0628\\u0631 \\u062C\\u064A\\u062A - 01020630677</p>\\n          <h2>\\u062A\\u0642\\u0631\\u064A\\u0631 \\u0644\\u0648\\u062D\\u0629 \\u0627\\u0644\\u062A\\u062D\\u0643\\u0645</h2>\\n          <p>\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E: \".concat(currentDate,\"</p>\\n        </div>\\n        <table style=\\\"width: 100%; border-collapse: collapse;\\\">\\n          <tr>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\"><strong>\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u064A\\u0639\\u0627\\u062A:</strong></td>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\">\\u062C.\\u0645 \").concat(stats.total_sales.toFixed(2),\"</td>\\n          </tr>\\n          <tr>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\"><strong>\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A:</strong></td>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\">\\u062C.\\u0645 \").concat(stats.total_expenses.toFixed(2),\"</td>\\n          </tr>\\n          <tr>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\"><strong>\\u0635\\u0627\\u0641\\u064A \\u0627\\u0644\\u0631\\u0628\\u062D:</strong></td>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\">\\u062C.\\u0645 \").concat(stats.net_profit.toFixed(2),\"</td>\\n          </tr>\\n          <tr>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\"><strong>\\u0627\\u0644\\u0645\\u0628\\u0627\\u0644\\u063A \\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\\u0629:</strong></td>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\">\\u062C.\\u0645 \").concat(stats.total_unpaid.toFixed(2),\"</td>\\n          </tr>\\n          <tr>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\"><strong>\\u0639\\u062F\\u062F \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631:</strong></td>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\">\").concat(stats.invoice_count,\"</td>\\n          </tr>\\n          <tr>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\"><strong>\\u0639\\u062F\\u062F \\u0627\\u0644\\u0639\\u0645\\u0644\\u0627\\u0621:</strong></td>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\">\").concat(stats.customer_count,\"</td>\\n          </tr>\\n        </table>\\n      </div>\\n    \");const printWindow=window.open('','_blank');printWindow.document.write(printContent);printWindow.document.close();printWindow.print();};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-blue-600 to-blue-800 rounded-xl p-6 text-white shadow-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold mb-2\",children:\"\\u0644\\u0648\\u062D\\u0629 \\u0627\\u0644\\u062A\\u062D\\u0643\\u0645\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-100\",children:[\"\\u0645\\u0631\\u062D\\u0628\\u0627\\u064B \",user===null||user===void 0?void 0:user.username,\" - \\u0625\\u0644\\u064A\\u0643 \\u0646\\u0638\\u0631\\u0629 \\u0639\\u0627\\u0645\\u0629 \\u0639\\u0644\\u0649 \\u0623\\u062F\\u0627\\u0621 \\u0627\\u0644\\u0646\\u0634\\u0627\\u0637\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-6xl opacity-20\",children:\"\\uD83D\\uDCCA\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap space-x-4 space-x-reverse mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:clearAllData,className:\"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105\",children:\"\\uD83D\\uDDD1\\uFE0F \\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchStats,className:\"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105\",children:\"\\uD83D\\uDD04 \\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>printReport('dashboard'),className:\"bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105\",children:\"\\uD83D\\uDDA8\\uFE0F \\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"bg-white text-gray-700 border-0 rounded-lg px-4 py-3 shadow-lg focus:ring-2 focus:ring-blue-300 font-medium\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"\\uD83D\\uDCC5 \\u064A\\u0648\\u0645\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\uD83D\\uDCC6 \\u0623\\u0633\\u0628\\u0648\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\uD83D\\uDCCA \\u0634\\u0647\\u0631\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\uD83D\\uDCC8 \\u0633\\u0646\\u0648\\u064A\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-green-400 to-green-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold opacity-90\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u064A\\u0639\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold mt-2\",children:[\"\\u062C.\\u0645 \",stats.total_sales.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl opacity-30\",children:\"\\uD83D\\uDCB0\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-red-400 to-red-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold opacity-90\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold mt-2\",children:[\"\\u062C.\\u0645 \",stats.total_expenses.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl opacity-30\",children:\"\\uD83D\\uDCB8\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-blue-400 to-blue-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold opacity-90\",children:\"\\u0635\\u0627\\u0641\\u064A \\u0627\\u0644\\u0631\\u0628\\u062D\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold mt-2\",children:[\"\\u062C.\\u0645 \",stats.net_profit.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl opacity-30\",children:\"\\uD83D\\uDCC8\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-orange-400 to-orange-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold opacity-90\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0627\\u0644\\u063A \\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\\u0629\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold mt-2\",children:[\"\\u062C.\\u0645 \",stats.total_unpaid.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl opacity-30\",children:\"\\u23F3\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-purple-400 to-purple-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold opacity-90\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold mt-2\",children:stats.invoice_count})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl opacity-30\",children:\"\\uD83E\\uDDFE\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-teal-400 to-teal-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold opacity-90\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0639\\u0645\\u0644\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold mt-2\",children:stats.customer_count})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl opacity-30\",children:\"\\uD83D\\uDC65\"})]})})]})]});};// Sales Component\nconst Sales=()=>{const[customers,setCustomers]=useState([]);const[newCustomer,setNewCustomer]=useState('');const[selectedCustomer,setSelectedCustomer]=useState('');const[supervisorName,setSupervisorName]=useState('');// Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØªØµÙ†ÙŠØ¹\nconst[invoiceTitle,setInvoiceTitle]=useState('');// Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nconst[currentItem,setCurrentItem]=useState({seal_type:'RSL',material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',quantity:1,unit_price:'',product_type:'manufactured'// manufactured Ø£Ùˆ local\n});// New state for dual measurement inputs\nconst[measurements,setMeasurements]=useState({inner_diameter_mm:'',inner_diameter_inch:'',outer_diameter_mm:'',outer_diameter_inch:'',height_mm:'',height_inch:'',wall_height_mm:'',wall_height_inch:''});const[localProduct,setLocalProduct]=useState({product_size:'',// Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ù†ØªØ¬\nproduct_type:'',// Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬\npurchase_price:'',selling_price:'',supplier:''});const[items,setItems]=useState([]);const[paymentMethod,setPaymentMethod]=useState('Ù†Ù‚Ø¯ÙŠ');const[discount,setDiscount]=useState(0);// Ø§Ù„Ø®ØµÙ…\nconst[discountType,setDiscountType]=useState('amount');// Ù†ÙˆØ¹ Ø§Ù„Ø®ØµÙ…: amount Ø£Ùˆ percentage\nconst[compatibilityResults,setCompatibilityResults]=useState(null);const[selectedMaterial,setSelectedMaterial]=useState(null);const[measurementUnit,setMeasurementUnit]=useState('Ù…Ù…');// Ø¨ÙˆØµØ© Ø£Ùˆ Ù…Ù…\nconst[wallHeight,setWallHeight]=useState('');// Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø© Ù„Ù„Ù€ W types\nconst[clientType,setClientType]=useState(1);// Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù„ØªØ³Ø¹ÙŠØ± (1, 2, 3)\n// Measurement conversion functions\nconst mmToInch=mm=>{if(!mm||mm==='')return'';return(parseFloat(mm)/25.4).toFixed(4);};const inchToMm=inch=>{if(!inch||inch==='')return'';return(parseFloat(inch)*25.4).toFixed(2);};// Handle measurement input changes with auto-conversion\nconst handleMeasurementChange=(field,value,unit)=>{const newMeasurements=_objectSpread({},measurements);if(unit==='mm'){newMeasurements[\"\".concat(field,\"_mm\")]=value;newMeasurements[\"\".concat(field,\"_inch\")]=mmToInch(value);}else{newMeasurements[\"\".concat(field,\"_inch\")]=value;newMeasurements[\"\".concat(field,\"_mm\")]=inchToMm(value);}setMeasurements(newMeasurements);// Update currentItem with mm values (for backend compatibility)\nconst mmValue=parseFloat(newMeasurements[\"\".concat(field,\"_mm\")])||'';setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{[field]:mmValue}));};const sealTypes=['RSL','RS','RSE','B17','B3','B14','B1','R15','R17','W1','W4','W5','W11','WBT','XR','CH','VR'];const materialTypes=['NBR','BUR','BT','VT','BOOM'];useEffect(()=>{fetchCustomers();},[]);const fetchCustomers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/customers\"));setCustomers(response.data);}catch(error){console.error('Error fetching customers:',error);}};// Calculate automatic pricing based on material and client type\nconst calculateAutomaticPrice=async(material,height,clientType)=>{try{const response=await axios.post(\"\".concat(API,\"/calculate-price\"),null,{params:{material_type:material.material_type,inner_diameter:material.inner_diameter,outer_diameter:material.outer_diameter,height:height,client_type:clientType}});return response.data;}catch(error){console.log('No pricing found for this material combination:',error);return null;}};const checkCompatibility=async()=>{if(!currentItem.inner_diameter||!currentItem.outer_diameter||!currentItem.height){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}let innerDiameter=parseFloat(currentItem.inner_diameter);let outerDiameter=parseFloat(currentItem.outer_diameter);let height=parseFloat(currentItem.height);if(isNaN(innerDiameter)||isNaN(outerDiameter)||isNaN(height)){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø£Ø±Ù‚Ø§Ù… ØµØ­ÙŠØ­Ø© Ù„Ù„Ù…Ù‚Ø§Ø³Ø§Øª');return;}// Convert from inches to millimeters if needed\nif(measurementUnit==='Ø¨ÙˆØµØ©'){innerDiameter=innerDiameter*25.4;outerDiameter=outerDiameter*25.4;height=height*25.4;console.log(\"\\u062A\\u062D\\u0648\\u064A\\u0644 \\u0645\\u0646 \\u0628\\u0648\\u0635\\u0629 \\u0625\\u0644\\u0649 \\u0645\\u0644\\u0644\\u064A\\u0645\\u062A\\u0631:\\n        \\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A: \".concat(currentItem.inner_diameter,\" \\u0628\\u0648\\u0635\\u0629 = \").concat(innerDiameter.toFixed(1),\" \\u0645\\u0645\\n        \\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A: \").concat(currentItem.outer_diameter,\" \\u0628\\u0648\\u0635\\u0629 = \").concat(outerDiameter.toFixed(1),\" \\u0645\\u0645\\n        \\u0627\\u0644\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639: \").concat(currentItem.height,\" \\u0628\\u0648\\u0635\\u0629 = \").concat(height.toFixed(1),\" \\u0645\\u0645\"));}try{const response=await axios.post(\"\".concat(API,\"/compatibility-check\"),{seal_type:currentItem.seal_type,material_type:currentItem.material_type,inner_diameter:innerDiameter,outer_diameter:outerDiameter,height:height});setCompatibilityResults(response.data);}catch(error){console.error('Error checking compatibility:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„ØªÙˆØ§ÙÙ‚');}};const addItem=()=>{if(currentItem.product_type==='manufactured'){// Validation for manufactured products - check if at least one measurement is filled\nconst hasInnerDiameter=measurements.inner_diameter_mm||measurements.inner_diameter_inch;const hasOuterDiameter=measurements.outer_diameter_mm||measurements.outer_diameter_inch;const hasHeight=measurements.height_mm||measurements.height_inch;if(!hasInnerDiameter||!hasOuterDiameter||!hasHeight||!currentItem.unit_price){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© (Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª ÙˆØ§Ù„Ø³Ø¹Ø±)');return;}// Use mm values (they're automatically kept in sync by handleMeasurementChange)\nconst innerDiameter=parseFloat(currentItem.inner_diameter);const outerDiameter=parseFloat(currentItem.outer_diameter);const height=parseFloat(currentItem.height);const wallHeightValue=parseFloat(measurements.wall_height_mm)||null;const item=_objectSpread(_objectSpread({},currentItem),{},{inner_diameter:innerDiameter,outer_diameter:outerDiameter,height:height,quantity:parseInt(currentItem.quantity),unit_price:parseFloat(currentItem.unit_price),total_price:parseFloat(currentItem.unit_price)*parseInt(currentItem.quantity),wall_height:wallHeightValue,// Store original display values for both units\ndisplay_measurements:{inner_diameter_mm:measurements.inner_diameter_mm,inner_diameter_inch:measurements.inner_diameter_inch,outer_diameter_mm:measurements.outer_diameter_mm,outer_diameter_inch:measurements.outer_diameter_inch,height_mm:measurements.height_mm,height_inch:measurements.height_inch,wall_height_mm:measurements.wall_height_mm,wall_height_inch:measurements.wall_height_inch},material_used:selectedMaterial?selectedMaterial.unit_code:null,material_details:selectedMaterial?{id:selectedMaterial.id,unit_code:selectedMaterial.unit_code,inner_diameter:selectedMaterial.inner_diameter,outer_diameter:selectedMaterial.outer_diameter,height:selectedMaterial.height,material_type:selectedMaterial.material_type,is_finished_product:selectedMaterial.is_finished_product||false}:{// Ø¥Ø±Ø³Ø§Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø­ØªÙ‰ Ø¨Ø¯ÙˆÙ† Ø§Ø®ØªÙŠØ§Ø± Ù…Ø§Ø¯Ø© Ù…Ø­Ø¯Ø¯Ø©\nmaterial_type:currentItem.material_type,inner_diameter:parseFloat(currentItem.inner_diameter),outer_diameter:parseFloat(currentItem.outer_diameter),is_finished_product:false}});setItems([...items,item]);setCurrentItem({seal_type:'RSL',material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',quantity:1,unit_price:'',product_type:'manufactured'});setMeasurements({inner_diameter_mm:'',inner_diameter_inch:'',outer_diameter_mm:'',outer_diameter_inch:'',height_mm:'',height_inch:'',wall_height_mm:'',wall_height_inch:''});}else{// Validation for local products\nif(!localProduct.product_size||!localProduct.product_type||!localProduct.selling_price||!localProduct.supplier||!localProduct.purchase_price){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠ');return;}const product_name=\"\".concat(localProduct.product_size,\" - \").concat(localProduct.product_type);const item={// Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©ØŒ Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ØµÙ†Ø¹Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† null\nseal_type:null,material_type:null,inner_diameter:null,outer_diameter:null,height:null,product_type:'local',product_name:product_name,product_size:localProduct.product_size,product_type_name:localProduct.product_type,supplier:localProduct.supplier,purchase_price:parseFloat(localProduct.purchase_price),selling_price:parseFloat(localProduct.selling_price),quantity:parseInt(currentItem.quantity),unit_price:parseFloat(localProduct.selling_price),// Use selling price as unit price\ntotal_price:parseFloat(localProduct.selling_price)*parseInt(currentItem.quantity),// Store local product details\nlocal_product_details:{product_size:localProduct.product_size,product_type:localProduct.product_type,supplier:localProduct.supplier,purchase_price:parseFloat(localProduct.purchase_price),selling_price:parseFloat(localProduct.selling_price)}};setItems([...items,item]);setLocalProduct({product_size:'',product_type:'',purchase_price:'',selling_price:'',supplier:''});setCurrentItem({seal_type:'RSL',material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',quantity:1,unit_price:'',product_type:'manufactured'});setMeasurements({inner_diameter_mm:'',inner_diameter_inch:'',outer_diameter_mm:'',outer_diameter_inch:'',height_mm:'',height_inch:'',wall_height_mm:'',wall_height_inch:''});}setCompatibilityResults(null);setSelectedMaterial(null);};const editItem=index=>{var _item$inner_diameter,_item$outer_diameter,_item$height,_item$unit_price,_item$inner_diameter2,_item$outer_diameter2,_item$height2,_item$wall_height;const item=items[index];// Set current item for editing\nsetCurrentItem({seal_type:item.seal_type||'RSL',material_type:item.material_type||'NBR',inner_diameter:((_item$inner_diameter=item.inner_diameter)===null||_item$inner_diameter===void 0?void 0:_item$inner_diameter.toString())||'',outer_diameter:((_item$outer_diameter=item.outer_diameter)===null||_item$outer_diameter===void 0?void 0:_item$outer_diameter.toString())||'',height:((_item$height=item.height)===null||_item$height===void 0?void 0:_item$height.toString())||'',quantity:item.quantity||1,unit_price:((_item$unit_price=item.unit_price)===null||_item$unit_price===void 0?void 0:_item$unit_price.toString())||'',product_type:item.product_type||(item.local_product_details?'local':'manufactured')});// Set measurements for dual input fields (assuming values are in mm from database)\nsetMeasurements({inner_diameter_mm:((_item$inner_diameter2=item.inner_diameter)===null||_item$inner_diameter2===void 0?void 0:_item$inner_diameter2.toString())||'',inner_diameter_inch:mmToInch(item.inner_diameter)||'',outer_diameter_mm:((_item$outer_diameter2=item.outer_diameter)===null||_item$outer_diameter2===void 0?void 0:_item$outer_diameter2.toString())||'',outer_diameter_inch:mmToInch(item.outer_diameter)||'',height_mm:((_item$height2=item.height)===null||_item$height2===void 0?void 0:_item$height2.toString())||'',height_inch:mmToInch(item.height)||'',wall_height_mm:((_item$wall_height=item.wall_height)===null||_item$wall_height===void 0?void 0:_item$wall_height.toString())||'',wall_height_inch:mmToInch(item.wall_height)||''});// Set wall height if exists\nif(item.wall_height){setWallHeight(item.wall_height.toString());}// Set measurement unit if exists\nif(item.measurement_unit){setMeasurementUnit(item.measurement_unit);}// Set local product details if exists\nif(item.local_product_details){var _item$unit_price2;setLocalProduct({product_size:item.local_product_details.product_size||'',product_type:item.local_product_details.product_type||'',purchase_price:'',selling_price:((_item$unit_price2=item.unit_price)===null||_item$unit_price2===void 0?void 0:_item$unit_price2.toString())||'',supplier:''});}// Remove the item being edited\nconst newItems=items.filter((_,i)=>i!==index);setItems(newItems);};const deleteItem=index=>{if(confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ØµØ±ØŸ')){const newItems=items.filter((_,i)=>i!==index);setItems(newItems);}};const[isCreatingInvoice,setIsCreatingInvoice]=useState(false);const createInvoice=async()=>{// Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø± Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nif(isCreatingInvoice){return;}if(!selectedCustomer&&!newCustomer){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø£Ùˆ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯');return;}if(items.length===0){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª Ù„Ù„ÙØ§ØªÙˆØ±Ø©');return;}try{setIsCreatingInvoice(true);// Ø¨Ø¯Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nlet customerId=selectedCustomer;let customerName='';// Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯ Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±\nif(!selectedCustomer&&newCustomer){const customerResponse=await axios.post(\"\".concat(API,\"/customers\"),{name:newCustomer,phone:'',address:''});customerId=customerResponse.data.id;customerName=newCustomer;// ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\nfetchCustomers();}else{const customer=customers.find(c=>c.id===customerId);customerName=customer?customer.name:'';}// Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ ÙˆØ§Ù„Ø®ØµÙ…\nconst subtotal=items.reduce((sum,item)=>sum+item.total_price,0);const discountAmount=discountType==='percentage'?subtotal*parseFloat(discount||0)/100:parseFloat(discount||0);const totalAfterDiscount=subtotal-discountAmount;// Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nconst invoiceData={customer_id:customerId,customer_name:customerName,invoice_title:invoiceTitle,// Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nsupervisor_name:supervisorName,// Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù\nitems:items,payment_method:paymentMethod,subtotal:subtotal,discount:discountAmount,discount_type:discountType,discount_value:parseFloat(discount||0),total_after_discount:totalAfterDiscount,notes:''};const response=await axios.post(\"\".concat(API,\"/invoices?supervisor_name=\").concat(encodeURIComponent(supervisorName)),invoiceData);if(response.data){alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');// Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\nsetItems([]);setSelectedCustomer('');setNewCustomer('');setSupervisorName('');setInvoiceTitle('');// Ù…Ø³Ø­ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nsetPaymentMethod('Ù†Ù‚Ø¯ÙŠ');setDiscount(0);setDiscountType('amount');setClientType(1);// Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„\n// Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nprintInvoice(response.data);}}catch(error){var _error$response7,_error$response7$data;console.error('Error creating invoice:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©: '+(((_error$response7=error.response)===null||_error$response7===void 0?void 0:(_error$response7$data=_error$response7.data)===null||_error$response7$data===void 0?void 0:_error$response7$data.detail)||error.message));}finally{setIsCreatingInvoice(false);// Ø¥Ù†Ù‡Ø§Ø¡ Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡\n}};const printInvoice=invoice=>{const printContent=\"\\n      <!DOCTYPE html>\\n      <html dir=\\\"rtl\\\">\\n      <head>\\n        <meta charset=\\\"UTF-8\\\">\\n        <style>\\n          body {\\n            font-family: Arial, sans-serif;\\n            margin: 0;\\n            padding: 20px;\\n            direction: rtl;\\n            font-size: 15px;\\n          }\\n          .header {\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n            border-bottom: 3px solid #000;\\n            padding-bottom: 10px;\\n            margin-bottom: 20px;\\n          }\\n          .company-info {\\n            text-align: right;\\n          }\\n          .company-name {\\n            font-size: 32px;\\n            font-weight: bold;\\n            color: #000;\\n            margin: 0;\\n          }\\n          .company-subtitle {\\n            font-size: 20px;\\n            margin: 5px 0;\\n            color: #666;\\n          }\\n          .company-details {\\n            font-size: 16px;\\n            margin: 2px 0;\\n            color: #333;\\n          }\\n          .logo-section {\\n            text-align: center;\\n            flex: 1;\\n          }\\n          .invoice-title {\\n            font-size: 20px;\\n            font-weight: bold;\\n            background-color: #ff4444;\\n            color: white;\\n            padding: 8px 20px;\\n            border-radius: 5px;\\n            display: inline-block;\\n            margin-bottom: 10px;\\n          }\\n          .invoice-number {\\n            font-size: 18px;\\n            font-weight: bold;\\n            color: #ff4444;\\n          }\\n          .customer-info {\\n            display: flex;\\n            justify-content: space-between;\\n            margin: 20px 0;\\n          }\\n          .customer-details {\\n            text-align: right;\\n          }\\n          .date-info {\\n            text-align: left;\\n          }\\n          .products-table {\\n            width: 100%;\\n            border-collapse: collapse;\\n            border: 2px solid #000;\\n            margin: 20px 0;\\n          }\\n          .products-table th,\\n          .products-table td {\\n            border: 1px solid #000;\\n            padding: 8px;\\n            text-align: center;\\n          }\\n          .products-table th {\\n            background-color: #f0f0f0;\\n            font-weight: bold;\\n          }\\n          .footer {\\n            margin-top: 30px;\\n            border-top: 1px solid #ccc;\\n            padding-top: 15px;\\n            display: flex;\\n            justify-content: space-between;\\n            font-size: 12px;\\n            color: #666;\\n          }\\n          .total-section {\\n            text-align: left;\\n            margin-top: 10px;\\n          }\\n          .total-amount {\\n            font-size: 18px;\\n            font-weight: bold;\\n            border: 2px solid #000;\\n            padding: 10px;\\n            display: inline-block;\\n            background-color: #f9f9f9;\\n          }\\n          @media print {\\n            body { margin: 0; padding: 10px; }\\n          }\\n        </style>\\n      </head>\\n      <body>\\n        <!-- Header Section -->\\n        <div class=\\\"header\\\">\\n          <div class=\\\"company-info\\\">\\n            <h1 class=\\\"company-name\\\">\\u0634\\u0631\\u0643\\u0629 \\u0645\\u0627\\u0633\\u062A\\u0631 \\u0633\\u064A\\u0644</h1>\\n            <p class=\\\"company-subtitle\\\">\\u062A\\u0635\\u0646\\u064A\\u0639 \\u062C\\u0645\\u064A\\u0639 \\u0623\\u0646\\u0648\\u0627\\u0639 \\u0627\\u0644\\u0623\\u0648\\u064A\\u0644 \\u0633\\u064A\\u0644</p>\\n            <p class=\\\"company-details\\\">\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0623\\u0642\\u0637\\u0627\\u0631 \\u062D\\u062A\\u0649 \\u0665\\u0660\\u0660\\u0645\\u0644</p>\\n            <p class=\\\"company-details\\\">\\u0647\\u064A\\u062F\\u0631\\u0648\\u0644\\u064A\\u0643 - \\u0646\\u064A\\u0648\\u0645\\u0627\\u062A\\u064A\\u0643</p>\\n          </div>\\n          \\n          <div class=\\\"logo-section\\\">\\n            <img src=\\\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\\\" \\n                 alt=\\\"Master Seal Logo\\\" \\n                 style=\\\"max-width: 120px; max-height: 80px; margin-bottom: 10px;\\\">\\n            <div class=\\\"invoice-title\\\">\".concat(invoice.invoice_title||'Ø¹Ø±Ø¶ Ø³Ø¹Ø±',\"</div>\\n            <div class=\\\"invoice-number\\\">\").concat(invoice.invoice_number,\"</div>\\n          </div>\\n        </div>\\n\\n        <!-- Customer and Date Info -->\\n        <div class=\\\"customer-info\\\">\\n          <div class=\\\"customer-details\\\">\\n            <p><strong>\\u0627\\u0644\\u0633\\u0627\\u062F\\u0629:</strong> \").concat(invoice.customer_name,\"</p>\\n            <p><strong>\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646:</strong> \").concat(invoice.customer_address||'........................',\"</p>\\n          </div>\\n          <div class=\\\"date-info\\\">\\n            <p><strong>\\u062A\\u062D\\u0631\\u064A\\u0631 \\u0641\\u064A:</strong> \").concat(new Date(invoice.date).toLocaleDateString('ar-EG'),\"</p>\\n            <p><strong>Date:</strong> \").concat(new Date(invoice.date).toLocaleDateString('en-GB'),\"</p>\\n          </div>\\n        </div>\\n\\n        <!-- Products Table -->\\n        <table class=\\\"products-table\\\">\\n          <thead>\\n            <tr>\\n              <th style=\\\"width: 60px;\\\">\\u0627\\u0644\\u0645\\u0633\\u0644\\u0633\\u0644<br>Item</th>\\n              <th style=\\\"width: 80px;\\\">\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629<br>QTY</th>\\n              <th style=\\\"width: 200px;\\\">Description<br>\\u0627\\u0644\\u0645\\u0648\\u0627\\u0635\\u0641\\u0627\\u062A</th>\\n              <th style=\\\"width: 100px;\\\">\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629<br>Unit Price</th>\\n              <th style=\\\"width: 100px;\\\">\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A<br>Total</th>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            \").concat(invoice.items.map((item,index)=>\"\\n              <tr>\\n                <td>\".concat(index+1,\"</td>\\n                <td>\").concat(item.quantity,\"</td>\\n                <td style=\\\"text-align: right;\\\">\\n                  \").concat(item.local_product_details?\"\".concat(item.local_product_details.product_size,\" - \").concat(item.local_product_details.product_type):\"\".concat(item.seal_type,\" - \").concat(item.material_type,\"<br>\\n                    <small>\").concat(item.inner_diameter,\" \\xD7 \").concat(item.outer_diameter,\" \\xD7 \").concat(item.height,\" \\u0645\\u0645\").concat(item.wall_height?\" (\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629: \".concat(item.wall_height,\" \\u0645\\u0645)\"):\"\",\"</small>\"),\"\\n                </td>\\n                <td>\\u062C.\\u0645 \").concat(item.unit_price.toFixed(2),\"</td>\\n                <td>\\u062C.\\u0645 \").concat(item.total_price.toFixed(2),\"</td>\\n              </tr>\\n            \")).join(''),\"\\n            <!-- Empty rows for additional items -->\\n            \").concat(Array.from({length:Math.max(0,8-invoice.items.length)},(_,i)=>\"\\n              <tr style=\\\"height: 40px;\\\">\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n              </tr>\\n            \").join(''),\"\\n          </tbody>\\n        </table>\\n\\n        <!-- Total Section -->\\n        <div class=\\\"total-section\\\">\\n          <div style=\\\"text-align: left; margin-bottom: 10px;\\\">\\n            \").concat(invoice.subtotal?\"\\n              <div style=\\\"margin-bottom: 5px;\\\">\\n                <span>\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639 \\u0627\\u0644\\u0641\\u0631\\u0639\\u064A: \\u062C.\\u0645 \".concat(invoice.subtotal.toFixed(2),\"</span>\\n              </div>\\n            \"):'',\"\\n            \").concat(invoice.discount&&invoice.discount>0?\"\\n              <div style=\\\"margin-bottom: 5px; color: #d32f2f;\\\">\\n                <span>\\u0627\\u0644\\u062E\\u0635\\u0645: - \\u062C.\\u0645 \".concat(invoice.discount.toFixed(2),\"</span>\\n                \").concat(invoice.discount_type==='percentage'&&invoice.discount_value?\" <small>(\".concat(invoice.discount_value,\"%)</small>\"):'',\"\\n              </div>\\n              <hr style=\\\"margin: 5px 0; border: 1px solid #000;\\\">\\n            \"):'',\"\\n          </div>\\n          <div class=\\\"total-amount\\\">\\n            \\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0646\\u0647\\u0627\\u0626\\u064A: \\u062C.\\u0645 \").concat((invoice.total_after_discount||invoice.total_amount).toFixed(2),\"\\n          </div>\\n        </div>\\n\\n        <!-- Additional Info -->\\n        <div style=\\\"margin-top: 20px; text-align: center; font-size: 12px;\\\">\\n          <p><strong>\\u0645\\u0644\\u062D\\u0648\\u0638\\u0629:</strong> \\u0641\\u0642\\u0637 \\u0648\\u0642\\u062F\\u0631\\u0647</p>\\n          <div style=\\\"height: 30px; border-bottom: 1px solid #000; margin: 10px 40px;\\\"></div>\\n        </div>\\n\\n        <!-- Footer -->\\n        <div class=\\\"footer\\\">\\n          <div>\\n            <p><strong>\\u0627\\u0644\\u062A\\u0648\\u0642\\u064A\\u0639:</strong></p>\\n            <p>\\u0645\\u0648\\u0628\\u0627\\u064A\\u0644: \\u0660\\u0661\\u0660\\u0662\\u0660\\u0666\\u0663\\u0660\\u0666\\u0667\\u0667 - \\u0660\\u0661\\u0660\\u0666\\u0662\\u0663\\u0669\\u0660\\u0668\\u0667\\u0660</p>\\n            <p>\\u062A\\u0644\\u064A\\u0641\\u0648\\u0646: \\u0660\\u0661\\u0660\\u0662\\u0660\\u0666\\u0663\\u0660\\u0666\\u0667\\u0667</p>\\n          </div>\\n          <div style=\\\"text-align: left;\\\">\\n            <p><strong>\\u0627\\u0644\\u0645\\u0633\\u062A\\u0644\\u0645:</strong></p>\\n            <p>\\u0627\\u0644\\u062D\\u0631\\u0641\\u064A\\u064A\\u0646 - \\u0627\\u0644\\u0633\\u0644\\u0627\\u0645 - \\u0623\\u0645\\u0627\\u0645 \\u0627\\u0644\\u0633\\u0648\\u0628\\u0631 \\u062C\\u064A\\u062A</p>\\n            <p>\\u0645\\u0648\\u0628\\u0627\\u064A\\u0644: \\u0660\\u0661\\u0660\\u0662\\u0660\\u0666\\u0663\\u0660\\u0666\\u0667\\u0667 - \\u0660\\u0661\\u0660\\u0666\\u0662\\u0663\\u0669\\u0660\\u0668\\u0667\\u0660</p>\\n          </div>\\n        </div>\\n\\n        <!-- Note -->\\n        <div style=\\\"text-align: center; margin-top: 20px; font-size: 11px; color: #666;\\\">\\n          <p>\\u064A\\u0642\\u0631 \\u0627\\u0644\\u0645\\u0634\\u062A\\u0631\\u064A \\u0628\\u0623\\u0646\\u0647 \\u0642\\u0627\\u0645 \\u0628\\u0645\\u0639\\u0627\\u064A\\u0646\\u0629 \\u0627\\u0644\\u0628\\u0636\\u0627\\u0639\\u0629 \\u0648\\u0642\\u0628\\u0648\\u0644\\u0647\\u0627</p>\\n        </div>\\n      </body>\\n      </html>\\n    \");const printWindow=window.open('','_blank');printWindow.document.write(printContent);printWindow.document.close();printWindow.print();};const clearAllInvoices=async()=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.'))return;try{setItems([]);alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±');}catch(error){alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-6\",children:\"\\u0627\\u0644\\u0645\\u0628\\u064A\\u0639\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"select\",{value:selectedCustomer,onChange:e=>setSelectedCustomer(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),customers.map(customer=>/*#__PURE__*/_jsx(\"option\",{value:customer.id,children:customer.name},customer.id))]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newCustomer,onChange:e=>setNewCustomer(e.target.value),placeholder:\"\\u0627\\u0633\\u0645 \\u0639\\u0645\\u064A\\u0644 \\u062C\\u062F\\u064A\\u062F\",className:\"flex-1 p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0639\\u0645\\u064A\\u0644 \\u062C\\u062F\\u064A\\u062F\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0634\\u0631\\u0641 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:supervisorName,onChange:e=>setSupervisorName(e.target.value),placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0634\\u0631\\u0641 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\",className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:invoiceTitle,onChange:e=>setInvoiceTitle(e.target.value),placeholder:\"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\",className:\"w-full p-2 border border-gray-300 rounded\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsxs(\"select\",{value:currentItem.product_type,onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{product_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"manufactured\",children:\"\\u0645\\u0646\\u062A\\u062C \\u062A\\u0635\\u0646\\u064A\\u0639\"}),/*#__PURE__*/_jsx(\"option\",{value:\"local\",children:\"\\u0645\\u0646\\u062A\\u062C \\u0645\\u062D\\u0644\\u064A\"})]})]}),currentItem.product_type==='manufactured'?/*#__PURE__*/// Manufacturing Product Form\n_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"select\",{value:currentItem.seal_type,onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{seal_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:sealTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"select\",{value:currentItem.material_type,onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{material_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:materialTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0645\\u0644\\u064A\\u0645\\u062A\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:measurements.inner_diameter_mm,onChange:e=>handleMeasurementChange('inner_diameter',e.target.value,'mm'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0645\\u0645\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0628\\u0648\\u0635\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.0001\",value:measurements.inner_diameter_inch,onChange:e=>handleMeasurementChange('inner_diameter',e.target.value,'inch'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0628\\u0648\\u0635\\u0629\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0645\\u0644\\u064A\\u0645\\u062A\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:measurements.outer_diameter_mm,onChange:e=>handleMeasurementChange('outer_diameter',e.target.value,'mm'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0645\\u0645\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0628\\u0648\\u0635\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.0001\",value:measurements.outer_diameter_inch,onChange:e=>handleMeasurementChange('outer_diameter',e.target.value,'inch'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0628\\u0648\\u0635\\u0629\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0645\\u0644\\u064A\\u0645\\u062A\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:measurements.height_mm,onChange:e=>handleMeasurementChange('height',e.target.value,'mm'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0645\\u0645\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0628\\u0648\\u0635\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.0001\",value:measurements.height_inch,onChange:e=>handleMeasurementChange('height',e.target.value,'inch'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0628\\u0648\\u0635\\u0629\"})]})]})]}),currentItem.seal_type&&currentItem.seal_type.startsWith('W')&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0645\\u0644\\u064A\\u0645\\u062A\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:measurements.wall_height_mm,onChange:e=>handleMeasurementChange('wall_height',e.target.value,'mm'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629 \\u0628\\u0627\\u0644\\u0645\\u0644\\u064A\\u0645\\u062A\\u0631\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0628\\u0648\\u0635\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.0001\",value:measurements.wall_height_inch,onChange:e=>handleMeasurementChange('wall_height',e.target.value,'inch'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629 \\u0628\\u0627\\u0644\\u0628\\u0648\\u0635\\u0629\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:currentItem.quantity,onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{quantity:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0644\\u0644\\u062A\\u0633\\u0639\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"select\",{value:clientType,onChange:e=>setClientType(parseInt(e.target.value)),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:1,children:\"\\u0639\\u0645\\u064A\\u0644 1\"}),/*#__PURE__*/_jsx(\"option\",{value:2,children:\"\\u0639\\u0645\\u064A\\u0644 2\"}),/*#__PURE__*/_jsx(\"option\",{value:3,children:\"\\u0639\\u0645\\u064A\\u0644 3\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0633\\u064A\\u0644 \\u0627\\u0644\\u0648\\u0627\\u062D\\u062F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:currentItem.unit_price,onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{unit_price:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:checkCompatibility,className:\"w-full bg-yellow-500 text-white p-2 rounded hover:bg-yellow-600\",children:\"\\u0641\\u062D\\u0635 \\u0627\\u0644\\u062A\\u0648\\u0627\\u0641\\u0642\"})})]})}):/*#__PURE__*/// Local Product Form\n_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0642\\u0627\\u0633 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:localProduct.product_size,onChange:e=>setLocalProduct(_objectSpread(_objectSpread({},localProduct),{},{product_size:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0645\\u0642\\u0627\\u0633 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:localProduct.product_type,onChange:e=>setLocalProduct(_objectSpread(_objectSpread({},localProduct),{},{product_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:localProduct.supplier,onChange:e=>setLocalProduct(_objectSpread(_objectSpread({},localProduct),{},{supplier:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0634\\u0631\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:localProduct.purchase_price,onChange:e=>setLocalProduct(_objectSpread(_objectSpread({},localProduct),{},{purchase_price:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0634\\u0631\\u0627\\u0621\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0628\\u064A\\u0639\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:localProduct.selling_price,onChange:e=>setLocalProduct(_objectSpread(_objectSpread({},localProduct),{},{selling_price:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0628\\u064A\\u0639\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:currentItem.quantity,onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{quantity:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:addItem,className:\"w-full bg-green-500 text-white p-2 rounded hover:bg-green-600 mt-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0644\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"})]})]}),compatibilityResults&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0646\\u062A\\u0627\\u0626\\u062C \\u0641\\u062D\\u0635 \\u0627\\u0644\\u062A\\u0648\\u0627\\u0641\\u0642\"}),compatibilityResults.compatible_materials.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u0627\\u0644\\u062E\\u0627\\u0645\\u0627\\u062A \\u0627\\u0644\\u0645\\u062A\\u0648\\u0627\\u0641\\u0642\\u0629:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:compatibilityResults.compatible_materials.map((material,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 border rounded cursor-pointer transition-colors \".concat((selectedMaterial===null||selectedMaterial===void 0?void 0:selectedMaterial.unit_code)===material.unit_code&&(selectedMaterial===null||selectedMaterial===void 0?void 0:selectedMaterial.inner_diameter)===material.inner_diameter&&(selectedMaterial===null||selectedMaterial===void 0?void 0:selectedMaterial.outer_diameter)===material.outer_diameter&&(selectedMaterial===null||selectedMaterial===void 0?void 0:selectedMaterial.height)===material.height?'border-blue-500 bg-blue-50':material.low_stock?'border-red-300 bg-red-50 hover:bg-red-100':'border-green-300 bg-green-50 hover:bg-green-100'),onClick:async()=>{setSelectedMaterial(material);// Try to get automatic pricing\nconst height=parseFloat(currentItem.height);if(height){const pricing=await calculateAutomaticPrice(material,height,clientType);if(pricing){setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{unit_price:pricing.total_price.toFixed(2)}));// Show pricing details\nalert(\"\\u062A\\u0645 \\u062D\\u0633\\u0627\\u0628 \\u0627\\u0644\\u0633\\u0639\\u0631 \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0627\\u064B:\\n\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0645\\u0644\\u064A: \".concat(pricing.price_per_mm,\" \\u062C.\\u0645\\n\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0644\\u0644\\u064A\\u0645\\u062A\\u0631\\u0627\\u062A: \").concat(pricing.mm_cost.toFixed(2),\" \\u062C.\\u0645\\n\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639 (\\u0639\\u0645\\u064A\\u0644 \").concat(pricing.client_type,\"): \").concat(pricing.manufacturing_cost.toFixed(2),\" \\u062C.\\u0645\\n\\u0627\\u0644\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A: \").concat(pricing.total_price.toFixed(2),\" \\u062C.\\u0645\\n                          \\n\\u064A\\u0645\\u0643\\u0646\\u0643 \\u062A\\u0639\\u062F\\u064A\\u0644 \\u0627\\u0644\\u0633\\u0639\\u0631 \\u0625\\u0630\\u0627 \\u0644\\u0632\\u0645 \\u0627\\u0644\\u0623\\u0645\\u0631.\"));}}},children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0646\\u0648\\u0639:\"}),\" \",material.material_type]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0643\\u0648\\u062F:\"}),\" \",material.unit_code]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0645\\u0642\\u0627\\u0633:\"}),\" \",material.inner_diameter,\" \\xD7 \",material.outer_diameter,\" \\xD7 \",material.height]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0642\\u0637\\u0639:\"}),\" \",material.pieces_count]}),material.warning&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 text-sm\",children:material.warning}),(selectedMaterial===null||selectedMaterial===void 0?void 0:selectedMaterial.unit_code)===material.unit_code&&(selectedMaterial===null||selectedMaterial===void 0?void 0:selectedMaterial.inner_diameter)===material.inner_diameter&&(selectedMaterial===null||selectedMaterial===void 0?void 0:selectedMaterial.outer_diameter)===material.outer_diameter&&(selectedMaterial===null||selectedMaterial===void 0?void 0:selectedMaterial.height)===material.height&&/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-600 font-semibold text-sm mt-2\",children:\"\\u2713 \\u0645\\u062D\\u062F\\u062F \\u0644\\u0644\\u0627\\u0633\\u062A\\u062E\\u062F\\u0627\\u0645\"})]},index))})]}),compatibilityResults.compatible_products.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A \\u0627\\u0644\\u062C\\u0627\\u0647\\u0632\\u0629:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:compatibilityResults.compatible_products.map((product,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 border border-blue-300 bg-blue-50 rounded cursor-pointer hover:bg-blue-100\",onClick:()=>setSelectedMaterial({unit_code:\"FINISHED-\".concat(product.id),material_type:product.material_type,seal_type:product.seal_type,inner_diameter:product.inner_diameter,outer_diameter:product.outer_diameter,height:product.height,is_finished_product:true}),children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0646\\u0648\\u0639:\"}),\" \",product.seal_type,\" - \",product.material_type]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0645\\u0642\\u0627\\u0633:\"}),\" \",product.inner_diameter,\" \\xD7 \",product.outer_diameter,\" \\xD7 \",product.height]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629:\"}),\" \",product.quantity]})]},index))})]}),selectedMaterial&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 p-3 bg-blue-100 rounded\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold text-blue-800\",children:[\"\\u062A\\u0645 \\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629: \",selectedMaterial.unit_code,\" (\",selectedMaterial.material_type,\")\"]})})]}),items.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0623\\u062E\\u064A\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0642\\u0627\\u0633\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0633\\u0639\\u0631\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:items.map((item,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.local_product_details?item.local_product_details.product_type:item.seal_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.local_product_details?'Ù…Ø­Ù„ÙŠ':item.material_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.local_product_details?\"\".concat(item.local_product_details.product_size,\" - \").concat(item.local_product_details.product_type):\"\".concat(item.original_inner_diameter||item.inner_diameter,\" \\xD7 \").concat(item.original_outer_diameter||item.outer_diameter,\" \\xD7 \").concat(item.original_height||item.height).concat(item.original_wall_height?\" (\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629: \".concat(item.original_wall_height,\")\"):item.wall_height?\" (\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629: \".concat(item.wall_height,\")\"):'',\" \").concat(item.measurement_unit||'Ù…Ù…')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.quantity}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",item.unit_price]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",item.total_price]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editItem(index),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",title:\"\\u062A\\u062D\\u0631\\u064A\\u0631\",children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteItem(index),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",title:\"\\u062D\\u0630\\u0641\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]})})]},index))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639\"}),/*#__PURE__*/_jsxs(\"select\",{value:paymentMethod,onChange:e=>setPaymentMethod(e.target.value),className:\"p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u0646\\u0642\\u062F\\u064A\",children:\"\\u0646\\u0642\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0622\\u062C\\u0644\",children:\"\\u0622\\u062C\\u0644\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 \\u0643\\u0627\\u0634 \\u0645\\u062D\\u0645\\u062F \\u0627\\u0644\\u0635\\u0627\\u0648\\u064A\",children:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 \\u0643\\u0627\\u0634 \\u0645\\u062D\\u0645\\u062F \\u0627\\u0644\\u0635\\u0627\\u0648\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 \\u0643\\u0627\\u0634 \\u0648\\u0627\\u0626\\u0644 \\u0645\\u062D\\u0645\\u062F\",children:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 \\u0643\\u0627\\u0634 \\u0648\\u0627\\u0626\\u0644 \\u0645\\u062D\\u0645\\u062F\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0627\\u0646\\u0633\\u062A\\u0627\\u0628\\u0627\\u064A\",children:\"\\u0627\\u0646\\u0633\\u062A\\u0627\\u0628\\u0627\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u064A\\u062F \\u0627\\u0644\\u0635\\u0627\\u0648\\u064A\",children:\"\\u064A\\u062F \\u0627\\u0644\\u0635\\u0627\\u0648\\u064A\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 p-4 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0635\\u0645\"}),/*#__PURE__*/_jsxs(\"select\",{value:discountType,onChange:e=>setDiscountType(e.target.value),className:\"p-2 border border-gray-300 rounded w-full\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"amount\",children:\"\\u0645\\u0628\\u0644\\u063A \\u062B\\u0627\\u0628\\u062A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"percentage\",children:\"\\u0646\\u0633\\u0628\\u0629 \\u0645\\u0626\\u0648\\u064A\\u0629\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium mb-1\",children:[\"\\u0642\\u064A\\u0645\\u0629 \\u0627\\u0644\\u062E\\u0635\\u0645 \",discountType==='percentage'?'(%)':'(Ø¬.Ù…)']}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:discount,onChange:e=>setDiscount(e.target.value),className:\"p-2 border border-gray-300 rounded w-full\",placeholder:\"0\",min:\"0\",step:discountType==='percentage'?'0.1':'0.01'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u062E\\u0635\\u0645\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-white border border-gray-300 rounded w-full\",children:[\"\\u062C.\\u0645 \",(()=>{const subtotal=items.reduce((sum,item)=>sum+item.total_price,0);const discountAmount=discountType==='percentage'?subtotal*parseFloat(discount||0)/100:parseFloat(discount||0);return discountAmount.toFixed(2);})()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 bg-blue-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639 \\u0627\\u0644\\u0641\\u0631\\u0639\\u064A:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg font-semibold\",children:[\"\\u062C.\\u0645 \",items.reduce((sum,item)=>sum+item.total_price,0).toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:\"\\u0627\\u0644\\u062E\\u0635\\u0645:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg font-semibold text-red-600\",children:[\"- \\u062C.\\u0645 \",(()=>{const subtotal=items.reduce((sum,item)=>sum+item.total_price,0);const discountAmount=discountType==='percentage'?subtotal*parseFloat(discount||0)/100:parseFloat(discount||0);return discountAmount.toFixed(2);})()]})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl font-bold\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0646\\u0647\\u0627\\u0626\\u064A:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xl font-bold text-green-600\",children:[\"\\u062C.\\u0645 \",(()=>{const subtotal=items.reduce((sum,item)=>sum+item.total_price,0);const discountAmount=discountType==='percentage'?subtotal*parseFloat(discount||0)/100:parseFloat(discount||0);return(subtotal-discountAmount).toFixed(2);})()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xl font-bold\",style:{display:'none'},children:[\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A: \\u062C.\\u0645 \",items.reduce((sum,item)=>sum+item.total_price,0).toFixed(2)]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:createInvoice,disabled:isCreatingInvoice,className:\"w-full p-3 rounded mt-4 text-lg font-semibold \".concat(isCreatingInvoice?'bg-gray-400 text-gray-600 cursor-not-allowed':'bg-green-500 text-white hover:bg-green-600'),children:isCreatingInvoice?'Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©...':'Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©'})]})]});};// Simple placeholder components for other pages\n// Inventory Component will be replaced with new advanced version above\n// Stock Component (Old Inventory functionality for Raw Materials and Finished Products)\nconst Stock=()=>{const[rawMaterials,setRawMaterials]=useState([]);const[finishedProducts,setFinishedProducts]=useState([]);const[searchTerm,setSearchTerm]=useState('');// Ù„Ù„Ø¨Ø­Ø«\nconst[newRawMaterial,setNewRawMaterial]=useState({material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',pieces_count:'',cost_per_mm:''});const[newFinishedProduct,setNewFinishedProduct]=useState({seal_type:'RSL',material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',quantity:'',unit_price:''});const materialTypes=['NBR','BUR','BT','VT','BOOM'];const sealTypes=['RSL','RS','RSE','B17','B3','B14','B1','R15','R17','W1','W4','W5','W11','WBT','XR','CH','VR'];// Ø¯Ø§Ù„Ø© ØªØµÙÙŠØ© Ø§Ù„Ø¨Ø­Ø«\nconst filteredRawMaterials=rawMaterials.filter(material=>material.material_type.toLowerCase().includes(searchTerm.toLowerCase())||material.unit_code.toLowerCase().includes(searchTerm.toLowerCase())||material.inner_diameter.toString().includes(searchTerm)||material.outer_diameter.toString().includes(searchTerm)||material.height.toString().includes(searchTerm)).sort((a,b)=>{// ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\nconst materialPriority={'BUR':1,'NBR':2,'BT':3,'BOOM':4,'VT':5};const aPriority=materialPriority[a.material_type]||6;const bPriority=materialPriority[b.material_type]||6;if(aPriority!==bPriority){return aPriority-bPriority;}// Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)\nif(a.inner_diameter!==b.inner_diameter){return a.inner_diameter-b.inner_diameter;}return a.outer_diameter-b.outer_diameter;});const filteredFinishedProducts=finishedProducts.filter(product=>product.seal_type.toLowerCase().includes(searchTerm.toLowerCase())||product.material_type.toLowerCase().includes(searchTerm.toLowerCase())||product.inner_diameter.toString().includes(searchTerm)||product.outer_diameter.toString().includes(searchTerm)||product.height.toString().includes(searchTerm)).sort((a,b)=>{// ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\nconst materialPriority={'BUR':1,'NBR':2,'BT':3,'BOOM':4,'VT':5};const aPriority=materialPriority[a.material_type]||6;const bPriority=materialPriority[b.material_type]||6;if(aPriority!==bPriority){return aPriority-bPriority;}// Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)\nif(a.inner_diameter!==b.inner_diameter){return a.inner_diameter-b.inner_diameter;}return a.outer_diameter-b.outer_diameter;});useEffect(()=>{fetchRawMaterials();fetchFinishedProducts();},[]);const fetchRawMaterials=async()=>{try{const response=await axios.get(\"\".concat(API,\"/raw-materials\"));setRawMaterials(response.data);}catch(error){console.error('Error fetching raw materials:',error);}};const fetchFinishedProducts=async()=>{try{const response=await axios.get(\"\".concat(API,\"/finished-products\"));setFinishedProducts(response.data);}catch(error){console.error('Error fetching finished products:',error);}};const addRawMaterial=async()=>{if(!newRawMaterial.inner_diameter||!newRawMaterial.outer_diameter||!newRawMaterial.height||!newRawMaterial.pieces_count||!newRawMaterial.cost_per_mm){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{const rawMaterial={material_type:newRawMaterial.material_type,inner_diameter:parseFloat(newRawMaterial.inner_diameter),outer_diameter:parseFloat(newRawMaterial.outer_diameter),height:parseFloat(newRawMaterial.height),pieces_count:parseInt(newRawMaterial.pieces_count),cost_per_mm:parseFloat(newRawMaterial.cost_per_mm)// unit_code will be generated automatically by backend\n};let response;if(newRawMaterial.id){// Update existing material\nresponse=await axios.put(\"\".concat(API,\"/raw-materials/\").concat(newRawMaterial.id),rawMaterial);alert(\"\\u062A\\u0645 \\u062A\\u062D\\u062F\\u064A\\u062B \\u0627\\u0644\\u0645\\u0627\\u062F\\u0629 \\u0627\\u0644\\u062E\\u0627\\u0645 \\u0628\\u0646\\u062C\\u0627\\u062D. \\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629: \".concat(response.data.unit_code));}else{// Add new material\nresponse=await axios.post(\"\".concat(API,\"/raw-materials\"),rawMaterial);alert(\"\\u062A\\u0645 \\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0627\\u062F\\u0629 \\u0627\\u0644\\u062E\\u0627\\u0645 \\u0628\\u0646\\u062C\\u0627\\u062D. \\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629: \".concat(response.data.unit_code));}fetchRawMaterials();setNewRawMaterial({material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',pieces_count:'',cost_per_mm:''});}catch(error){var _error$response8,_error$response8$data;console.error('Error saving raw material:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…: '+(((_error$response8=error.response)===null||_error$response8===void 0?void 0:(_error$response8$data=_error$response8.data)===null||_error$response8$data===void 0?void 0:_error$response8$data.detail)||error.message));}};const clearAllRawMaterials=async()=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…ØŸ')){return;}try{await axios.delete(\"\".concat(API,\"/raw-materials/clear-all\"));fetchRawMaterials();alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…');}catch(error){console.error('Error clearing raw materials:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…');}};const deleteRawMaterial=async materialId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…ØŸ')){return;}try{await axios.delete(\"\".concat(API,\"/raw-materials/\").concat(materialId));fetchRawMaterials();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…');}catch(error){console.error('Error deleting raw material:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…');}};const editRawMaterial=material=>{// Fill the form with the material data for editing\nsetNewRawMaterial({id:material.id,material_type:material.material_type,inner_diameter:material.inner_diameter.toString(),outer_diameter:material.outer_diameter.toString(),height:material.height.toString(),pieces_count:material.pieces_count.toString(),cost_per_mm:material.cost_per_mm.toString()});};const handleFileImport=async event=>{const file=event.target.files[0];if(!file)return;const formData=new FormData();formData.append('file',file);try{const response=await axios.post(\"\".concat(API,\"/excel/import/raw-materials\"),formData,{headers:{'Content-Type':'multipart/form-data'}});alert(response.data.message);fetchRawMaterials();// Refresh the raw materials list\nevent.target.value='';// Clear file input\n}catch(error){var _error$response9,_error$response9$data;console.error('Error importing file:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù: '+(((_error$response9=error.response)===null||_error$response9===void 0?void 0:(_error$response9$data=_error$response9.data)===null||_error$response9$data===void 0?void 0:_error$response9$data.detail)||error.message));}};const handleFileExport=async()=>{try{const response=await axios.get(\"\".concat(API,\"/excel/export/raw-materials\"),{responseType:'blob'});// Create download link\nconst url=window.URL.createObjectURL(new Blob([response.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download',\"raw_materials_export_\".concat(new Date().toISOString().split('T')[0],\".xlsx\"));document.body.appendChild(link);link.click();document.body.removeChild(link);window.URL.revokeObjectURL(url);}catch(error){console.error('Error exporting file:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù');}};const addFinishedProduct=async()=>{if(!newFinishedProduct.inner_diameter||!newFinishedProduct.outer_diameter||!newFinishedProduct.height||!newFinishedProduct.quantity||!newFinishedProduct.unit_price){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{const finishedProduct={seal_type:newFinishedProduct.seal_type,material_type:newFinishedProduct.material_type,inner_diameter:parseFloat(newFinishedProduct.inner_diameter),outer_diameter:parseFloat(newFinishedProduct.outer_diameter),height:parseFloat(newFinishedProduct.height),quantity:parseInt(newFinishedProduct.quantity),unit_price:parseFloat(newFinishedProduct.unit_price)};if(newFinishedProduct.id){// Update existing product\nawait axios.put(\"\".concat(API,\"/finished-products/\").concat(newFinishedProduct.id),finishedProduct);alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¨Ù†Ø¬Ø§Ø­');}else{// Add new product\nawait axios.post(\"\".concat(API,\"/finished-products\"),finishedProduct);alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¨Ù†Ø¬Ø§Ø­');}fetchFinishedProducts();setNewFinishedProduct({seal_type:'RSL',material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',quantity:'',unit_price:''});}catch(error){console.error('Error saving finished product:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ');}};const editFinishedProduct=product=>{// Fill the form with the product data for editing\nsetNewFinishedProduct({id:product.id,seal_type:product.seal_type,material_type:product.material_type,inner_diameter:product.inner_diameter.toString(),outer_diameter:product.outer_diameter.toString(),height:product.height.toString(),quantity:product.quantity.toString(),unit_price:product.unit_price.toString()});};const deleteFinishedProduct=async productId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØŸ')){return;}try{await axios.delete(\"\".concat(API,\"/finished-products/\").concat(productId));fetchFinishedProducts();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ');}catch(error){console.error('Error deleting finished product:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-6\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:\"\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u062E\\u0627\\u0645\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:/*#__PURE__*/_jsx(\"button\",{onClick:clearAllRawMaterials,className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg mb-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-4\",children:\"\\uD83D\\uDCC1 \\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0648\\u062A\\u0635\\u062F\\u064A\\u0631 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u062E\\u0627\\u0645\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-4 items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 cursor-pointer\",children:[\"\\uD83D\\uDCE4 \\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0645\\u0646 Excel\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".xlsx,.xls\",onChange:handleFileImport,className:\"hidden\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"(.xlsx \\u0623\\u0648 .xls)\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleFileExport,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\uD83D\\uDCE5 \\u062A\\u0635\\u062F\\u064A\\u0631 \\u0625\\u0644\\u0649 Excel\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600 bg-white p-2 rounded border\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u062A\\u0646\\u0633\\u064A\\u0642 \\u0627\\u0644\\u0645\\u0644\\u0641 \\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628:\"}),/*#__PURE__*/_jsx(\"br\",{}),\"material_type, inner_diameter, outer_diameter, height, pieces_count, unit_code, cost_per_mm\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"select\",{value:newRawMaterial.material_type,onChange:e=>setNewRawMaterial(_objectSpread(_objectSpread({},newRawMaterial),{},{material_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:materialTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newRawMaterial.inner_diameter,onChange:e=>setNewRawMaterial(_objectSpread(_objectSpread({},newRawMaterial),{},{inner_diameter:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newRawMaterial.outer_diameter,onChange:e=>setNewRawMaterial(_objectSpread(_objectSpread({},newRawMaterial),{},{outer_diameter:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 (\\u0645\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newRawMaterial.height,onChange:e=>setNewRawMaterial(_objectSpread(_objectSpread({},newRawMaterial),{},{height:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0642\\u0637\\u0639\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newRawMaterial.pieces_count,onChange:e=>setNewRawMaterial(_objectSpread(_objectSpread({},newRawMaterial),{},{pieces_count:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0644\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newRawMaterial.cost_per_mm,onChange:e=>setNewRawMaterial(_objectSpread(_objectSpread({},newRawMaterial),{},{cost_per_mm:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-4\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0629: \\u0633\\u064A\\u062A\\u0645 \\u062A\\u0648\\u0644\\u064A\\u062F \\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629 \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0627\\u064B \\u062D\\u0633\\u0628 \\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629 \\u0648\\u0627\\u0644\\u0645\\u0648\\u0627\\u0635\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:addRawMaterial,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0627\\u062F\\u0629 \\u062E\\u0627\\u0645\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"\\u0628\\u062D\\u062B \\u0641\\u064A \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u062E\\u0627\\u0645 (\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\\u060C \\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629\\u060C \\u0627\\u0644\\u0645\\u0642\\u0627\\u0633\\u0627\\u062A...)\",className:\"w-full p-3 border border-gray-300 rounded-lg\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0642\\u0637\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0644\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredRawMaterials.map(material=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.material_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.inner_diameter}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.outer_diameter}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.height}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.pieces_count}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.unit_code}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.cost_per_mm}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editRawMaterial(material),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",title:\"\\u062A\\u062D\\u0631\\u064A\\u0631\",children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteRawMaterial(material.id),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",title:\"\\u062D\\u0630\\u0641\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]})})]},material.id))})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0627\\u0644\\u0625\\u0646\\u062A\\u0627\\u062C \\u0627\\u0644\\u062A\\u0627\\u0645\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"select\",{value:newFinishedProduct.seal_type,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{seal_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:sealTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"select\",{value:newFinishedProduct.material_type,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{material_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:materialTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newFinishedProduct.inner_diameter,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{inner_diameter:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newFinishedProduct.outer_diameter,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{outer_diameter:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newFinishedProduct.height,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{height:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newFinishedProduct.quantity,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{quantity:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newFinishedProduct.unit_price,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{unit_price:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addFinishedProduct,className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0646\\u062A\\u062C \\u0646\\u0647\\u0627\\u0626\\u064A\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredFinishedProducts.map(product=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.seal_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.material_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.inner_diameter}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.outer_diameter}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.height}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.quantity}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.unit_price}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editFinishedProduct(product),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",title:\"\\u062A\\u062D\\u0631\\u064A\\u0631\",children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteFinishedProduct(product.id),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",title:\"\\u062D\\u0630\\u0641\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]})})]},product.id))})]})})]})]});};// Deferred Payments Component\nconst Deferred=()=>{var _selectedInvoice$rema;const[unpaidInvoices,setUnpaidInvoices]=useState([]);const[customers,setCustomers]=useState([]);const[paymentAmount,setPaymentAmount]=useState('');const[paymentMethod,setPaymentMethod]=useState('Ù†Ù‚Ø¯ÙŠ');const[paymentNotes,setPaymentNotes]=useState('');const[selectedInvoice,setSelectedInvoice]=useState(null);useEffect(()=>{fetchUnpaidInvoices();fetchCustomers();},[]);const fetchUnpaidInvoices=async()=>{try{const response=await axios.get(\"\".concat(API,\"/invoices\"));const invoices=response.data.filter(invoice=>// ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¢Ø¬Ù„Ø© Ø£Ùˆ Ù„Ù‡Ø§ Ù…Ø¨Ù„Øº Ù…Ø³ØªØ­Ù‚\n(invoice.payment_method==='Ø¢Ø¬Ù„'||invoice.remaining_amount>0)&&(invoice.status==='ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©'||invoice.status==='Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹'||invoice.status==='Ø§Ù†ØªØ¸Ø§Ø±'||invoice.remaining_amount>0));setUnpaidInvoices(invoices);}catch(error){console.error('Error fetching unpaid invoices:',error);}};const fetchCustomers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/customers\"));setCustomers(response.data);}catch(error){console.error('Error fetching customers:',error);}};const getCustomerName=customerId=>{const customer=customers.find(c=>c.id===customerId);return customer?customer.name:'Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…Ø­Ø¯Ø¯';};const makePayment=async()=>{if(!selectedInvoice||!paymentAmount){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙˆØ¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº');return;}if(parseFloat(paymentAmount)>selectedInvoice.remaining_amount){alert('Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯Ø®Ù„ Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚');return;}try{await axios.post(\"\".concat(API,\"/payments\"),{invoice_id:selectedInvoice.id,amount:parseFloat(paymentAmount),payment_method:paymentMethod,notes:paymentNotes});setPaymentAmount('');setPaymentNotes('');setSelectedInvoice(null);fetchUnpaidInvoices();alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø© Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error making payment:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø©');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-4\",children:\"\\u0627\\u0644\\u0622\\u062C\\u0644 - \\u0645\\u062A\\u0627\\u0628\\u0639\\u0629 \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchUnpaidInvoices,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"border border-gray-300 rounded px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"\\u064A\\u0648\\u0645\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0623\\u0633\\u0628\\u0648\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0634\\u0647\\u0631\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0633\\u0646\\u0648\\u064A\"})]})]})]}),selectedInvoice&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u062A\\u0633\\u062C\\u064A\\u0644 \\u062F\\u0641\\u0639\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:selectedInvoice.invoice_number,disabled:true,className:\"w-full p-2 border border-gray-300 rounded bg-gray-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:selectedInvoice.customer_name,disabled:true,className:\"w-full p-2 border border-gray-300 rounded bg-gray-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:\"\\u062C.\\u0645 \".concat(((_selectedInvoice$rema=selectedInvoice.remaining_amount)===null||_selectedInvoice$rema===void 0?void 0:_selectedInvoice$rema.toFixed(2))||'0.00'),disabled:true,className:\"w-full p-2 border border-gray-300 rounded bg-gray-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u062F\\u0641\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:paymentAmount,onChange:e=>setPaymentAmount(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"0.00\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639\"}),/*#__PURE__*/_jsxs(\"select\",{value:paymentMethod,onChange:e=>setPaymentMethod(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u0646\\u0642\\u062F\\u064A\",children:\"\\u0646\\u0642\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 \\u0643\\u0627\\u0634 \\u0645\\u062D\\u0645\\u062F \\u0627\\u0644\\u0635\\u0627\\u0648\\u064A\",children:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 \\u0643\\u0627\\u0634 \\u0645\\u062D\\u0645\\u062F \\u0627\\u0644\\u0635\\u0627\\u0648\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 \\u0643\\u0627\\u0634 \\u0648\\u0627\\u0626\\u0644 \\u0645\\u062D\\u0645\\u062F\",children:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 \\u0643\\u0627\\u0634 \\u0648\\u0627\\u0626\\u0644 \\u0645\\u062D\\u0645\\u062F\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0627\\u0646\\u0633\\u062A\\u0627\\u0628\\u0627\\u064A\",children:\"\\u0627\\u0646\\u0633\\u062A\\u0627\\u0628\\u0627\\u064A\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:paymentNotes,onChange:e=>setPaymentNotes(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0625\\u0636\\u0627\\u0641\\u064A\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:makePayment,className:\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\",children:\"\\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u062F\\u0641\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedInvoice(null),className:\"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u063A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u0633\\u062F\\u062F\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:unpaidInvoices.map(invoice=>{var _invoice$total_amount,_invoice$paid_amount,_invoice$remaining_am;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.invoice_number}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.customer_name}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(invoice.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",((_invoice$total_amount=invoice.total_amount)===null||_invoice$total_amount===void 0?void 0:_invoice$total_amount.toFixed(2))||'0.00']}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",((_invoice$paid_amount=invoice.paid_amount)===null||_invoice$paid_amount===void 0?void 0:_invoice$paid_amount.toFixed(2))||'0.00']}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold text-red-600\",children:[\"\\u062C.\\u0645 \",((_invoice$remaining_am=invoice.remaining_amount)===null||_invoice$remaining_am===void 0?void 0:_invoice$remaining_am.toFixed(2))||'0.00']})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm \".concat(invoice.status==='ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©'?'bg-red-100 text-red-800':invoice.status==='Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹'?'bg-yellow-100 text-yellow-800':'bg-green-100 text-green-800'),children:invoice.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedInvoice(invoice),className:\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\",children:\"\\u0639\\u0631\\u0636 \\u0627\\u0644\\u062F\\u0641\\u0639\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedInvoice(invoice),className:\"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600\",children:\"\\u062F\\u0641\\u0639\"})]})})]},invoice.id);})})]}),unpaidInvoices.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u063A\\u064A\\u0631 \\u0645\\u0633\\u062F\\u062F\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 p-4 rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-red-800\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u0627\\u0644\\u063A \\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\\u0629\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-red-600\",children:[\"\\u062C.\\u0645 \",unpaidInvoices.reduce((sum,inv)=>sum+(inv.remaining_amount||0),0).toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 p-4 rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-yellow-800\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u0639\\u0644\\u0642\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-yellow-600\",children:unpaidInvoices.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-4 rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-blue-800\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u0623\\u0635\\u0644\\u064A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-blue-600\",children:[\"\\u062C.\\u0645 \",unpaidInvoices.reduce((sum,inv)=>sum+(inv.total_amount||0),0).toFixed(2)]})]})]})]})]});};// Expenses Component\nconst Expenses=()=>{const[expenses,setExpenses]=useState([]);const[newExpense,setNewExpense]=useState({description:'',amount:'',category:'Ø®Ø§Ù…Ø§Øª'});const expenseCategories=['Ø®Ø§Ù…Ø§Øª','Ø±ÙˆØ§ØªØ¨','ÙƒÙ‡Ø±Ø¨Ø§Ø¡','ØµÙŠØ§Ù†Ø©','Ø£Ø®Ø±Ù‰'];useEffect(()=>{fetchExpenses();},[]);const fetchExpenses=async()=>{try{const response=await axios.get(\"\".concat(API,\"/expenses\"));setExpenses(response.data);}catch(error){console.error('Error fetching expenses:',error);}};const addExpense=async()=>{if(!newExpense.description||!newExpense.amount){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{await axios.post(\"\".concat(API,\"/expenses\"),_objectSpread(_objectSpread({},newExpense),{},{amount:parseFloat(newExpense.amount)}));setNewExpense({description:'',amount:'',category:'Ø®Ø§Ù…Ø§Øª'});fetchExpenses();alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ØµØ±ÙˆÙ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error adding expense:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ØµØ±ÙˆÙ');}};const deleteExpense=async expenseId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ØµØ±ÙˆÙØŸ'))return;try{await axios.delete(\"\".concat(API,\"/expenses/\").concat(expenseId));fetchExpenses();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ØµØ±ÙˆÙ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error deleting expense:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ØµØ±ÙˆÙ');}};const getTotalExpenses=()=>{return expenses.reduce((sum,expense)=>sum+expense.amount,0);};const getExpensesByCategory=()=>{const byCategory={};expenseCategories.forEach(cat=>{byCategory[cat]=expenses.filter(exp=>exp.category===cat).reduce((sum,exp)=>sum+exp.amount,0);});return byCategory;};const clearAllExpenses=async()=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§ØªØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.'))return;try{await axios.delete(\"\".concat(API,\"/expenses/clear-all\"));fetchExpenses();alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª');}catch(error){console.error('Error clearing expenses:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-4\",children:\"\\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:clearAllExpenses,className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchExpenses,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"border border-gray-300 rounded px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"\\u064A\\u0648\\u0645\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0623\\u0633\\u0628\\u0648\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0634\\u0647\\u0631\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0633\\u0646\\u0648\\u064A\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0635\\u0631\\u0648\\u0641 \\u062C\\u062F\\u064A\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0648\\u0635\\u0641 \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newExpense.description,onChange:e=>setNewExpense(_objectSpread(_objectSpread({},newExpense),{},{description:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0645\\u062B\\u0627\\u0644: \\u0634\\u0631\\u0627\\u0621 \\u062E\\u0627\\u0645\\u0627\\u062A\\u060C \\u0643\\u0647\\u0631\\u0628\\u0627\\u0621 \\u0627\\u0644\\u0645\\u0635\\u0646\\u0639\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newExpense.amount,onChange:e=>setNewExpense(_objectSpread(_objectSpread({},newExpense),{},{amount:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"0.00\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0641\\u0626\\u0629\"}),/*#__PURE__*/_jsx(\"select\",{value:newExpense.category,onChange:e=>setNewExpense(_objectSpread(_objectSpread({},newExpense),{},{category:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:expenseCategories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category,children:category},category))})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addExpense,className:\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 p-6 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-red-800 mb-2\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-red-600\",children:[\"\\u062C.\\u0645 \",getTotalExpenses().toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-6 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-blue-800 mb-2\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-blue-600\",children:expenses.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 p-6 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-yellow-800 mb-2\",children:\"\\u0645\\u062A\\u0648\\u0633\\u0637 \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-yellow-600\",children:[\"\\u062C.\\u0645 \",expenses.length>0?(getTotalExpenses()/expenses.length).toFixed(2):'0.00']})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A \\u062D\\u0633\\u0628 \\u0627\\u0644\\u0641\\u0626\\u0629\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\",children:Object.entries(getExpensesByCategory()).map(_ref3=>{let[category,amount]=_ref3;return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 border rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700\",children:category}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl font-bold text-blue-600\",children:[\"\\u062C.\\u0645 \",amount.toFixed(2)]})]},category);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0648\\u0635\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0641\\u0626\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:expenses.map(expense=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:expense.description}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-red-600\",children:[\"\\u062C.\\u0645 \",expense.amount.toFixed(2)]})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm \".concat(expense.category==='Ø®Ø§Ù…Ø§Øª'?'bg-blue-100 text-blue-800':expense.category==='Ø±ÙˆØ§ØªØ¨'?'bg-green-100 text-green-800':expense.category==='ÙƒÙ‡Ø±Ø¨Ø§Ø¡'?'bg-yellow-100 text-yellow-800':expense.category==='ØµÙŠØ§Ù†Ø©'?'bg-purple-100 text-purple-800':'bg-gray-100 text-gray-800'),children:expense.category})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(expense.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteExpense(expense.id),className:\"bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641\"})})]},expense.id))})]}),expenses.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A \\u0645\\u0633\\u062C\\u0644\\u0629\"})]})]})]});};// Revenue Component\nconst Revenue=()=>{var _revenueData$total_re,_revenueData$total_ex,_revenueData$material,_revenueData$profit,_revenueData$total_re2,_revenueData$material2,_revenueData$profit2;const[revenueData,setRevenueData]=useState({total_revenue:0,total_expenses:0,material_cost:0,profit:0});const[period,setPeriod]=useState('daily');useEffect(()=>{fetchRevenueData();},[period]);const fetchRevenueData=async()=>{try{const response=await axios.get(\"\".concat(API,\"/reports/revenue?period=\").concat(period));setRevenueData(response.data);}catch(error){console.error('Error fetching revenue data:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-4\",children:\"\\u0627\\u0644\\u0625\\u064A\\u0631\\u0627\\u062F\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchRevenueData,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"select\",{value:period,onChange:e=>setPeriod(e.target.value),className:\"border border-gray-300 rounded px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"daily\",children:\"\\u0627\\u0644\\u064A\\u0648\\u0645\"}),/*#__PURE__*/_jsx(\"option\",{value:\"weekly\",children:\"\\u0627\\u0644\\u0623\\u0633\\u0628\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"option\",{value:\"monthly\",children:\"\\u0627\\u0644\\u0634\\u0647\\u0631\"}),/*#__PURE__*/_jsx(\"option\",{value:\"yearly\",children:\"\\u0627\\u0644\\u0633\\u0646\\u0629\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-green-800 text-center mb-2\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0625\\u064A\\u0631\\u0627\\u062F\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-green-600 text-center\",children:[\"\\u062C.\\u0645 \",((_revenueData$total_re=revenueData.total_revenue)===null||_revenueData$total_re===void 0?void 0:_revenueData$total_re.toFixed(2))||'0.00']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-red-800 text-center mb-2\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-red-600 text-center\",children:[\"\\u062C.\\u0645 \",((_revenueData$total_ex=revenueData.total_expenses)===null||_revenueData$total_ex===void 0?void 0:_revenueData$total_ex.toFixed(2))||'0.00']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-yellow-800 text-center mb-2\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-yellow-600 text-center\",children:[\"\\u062C.\\u0645 \",((_revenueData$material=revenueData.material_cost)===null||_revenueData$material===void 0?void 0:_revenueData$material.toFixed(2))||'0.00']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-blue-800 text-center mb-2\",children:\"\\u0635\\u0627\\u0641\\u064A \\u0627\\u0644\\u0631\\u0628\\u062D\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-center \".concat((revenueData.profit||0)>=0?'text-blue-600':'text-red-600'),children:[\"\\u062C.\\u0645 \",((_revenueData$profit=revenueData.profit)===null||_revenueData$profit===void 0?void 0:_revenueData$profit.toFixed(2))||'0.00']})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mt-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold mb-4\",children:[\"\\u062A\\u0642\\u0631\\u064A\\u0631 \\u0627\\u0644\\u0625\\u064A\\u0631\\u0627\\u062F\\u0627\\u062A - \",period==='daily'?'ÙŠÙˆÙ…ÙŠ':period==='weekly'?'Ø£Ø³Ø¨ÙˆØ¹ÙŠ':period==='monthly'?'Ø´Ù‡Ø±ÙŠ':'Ø³Ù†ÙˆÙŠ']}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3\",children:\"\\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A (\\u062C.\\u0645)\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3\",children:\"\\u0627\\u0644\\u0646\\u0633\\u0628\\u0629 \\u0627\\u0644\\u0645\\u0626\\u0648\\u064A\\u0629\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3 font-semibold\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0625\\u064A\\u0631\\u0627\\u062F\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3 text-green-600 font-bold\",children:((_revenueData$total_re2=revenueData.total_revenue)===null||_revenueData$total_re2===void 0?void 0:_revenueData$total_re2.toFixed(2))||'0.00'}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3\",children:\"100%\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3 text-yellow-600 font-semibold\",children:[\"-\",((_revenueData$material2=revenueData.material_cost)===null||_revenueData$material2===void 0?void 0:_revenueData$material2.toFixed(2))||'0.00']}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3\",children:[revenueData.total_revenue>0?(revenueData.material_cost/revenueData.total_revenue*100).toFixed(1):'0.0',\"%\"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3\",children:\"\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A \\u0623\\u062E\\u0631\\u0649\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3 text-red-600 font-semibold\",children:[\"-\",((revenueData.total_expenses||0)-(revenueData.material_cost||0)).toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3\",children:[revenueData.total_revenue>0?((revenueData.total_expenses-revenueData.material_cost)/revenueData.total_revenue*100).toFixed(1):'0.0',\"%\"]})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-blue-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3 font-bold\",children:\"\\u0635\\u0627\\u0641\\u064A \\u0627\\u0644\\u0631\\u0628\\u062D\"}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3 font-bold \".concat((revenueData.profit||0)>=0?'text-blue-600':'text-red-600'),children:((_revenueData$profit2=revenueData.profit)===null||_revenueData$profit2===void 0?void 0:_revenueData$profit2.toFixed(2))||'0.00'}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3 font-bold\",children:[revenueData.total_revenue>0?(revenueData.profit/revenueData.total_revenue*100).toFixed(1):'0.0',\"%\"]})]})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mt-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0645\\u0624\\u0634\\u0631\\u0627\\u062A \\u0627\\u0644\\u0623\\u062F\\u0627\\u0621\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 border rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-2\",children:\"\\u0647\\u0627\\u0645\\u0634 \\u0627\\u0644\\u0631\\u0628\\u062D\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold \".concat((revenueData.profit||0)>=0?'text-green-600':'text-red-600'),children:[revenueData.total_revenue>0?(revenueData.profit/revenueData.total_revenue*100).toFixed(1):'0.0',\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 border rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-2\",children:\"\\u0646\\u0633\\u0628\\u0629 \\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-yellow-600\",children:[revenueData.total_revenue>0?(revenueData.material_cost/revenueData.total_revenue*100).toFixed(1):'0.0',\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 border rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-2\",children:\"\\u0646\\u0633\\u0628\\u0629 \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A \\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-red-600\",children:[revenueData.total_revenue>0?(revenueData.total_expenses/revenueData.total_revenue*100).toFixed(1):'0.0',\"%\"]})]})]})]})]});};// Invoices Component\nconst Invoices=()=>{const[invoices,setInvoices]=useState([]);const[customers,setCustomers]=useState([]);const[filterStatus,setFilterStatus]=useState('');const[searchTerm,setSearchTerm]=useState('');const[editingInvoice,setEditingInvoice]=useState(null);const[editForm,setEditForm]=useState({invoice_title:'',supervisor_name:'',customer_name:'',payment_method:'Ù†Ù‚Ø¯ÙŠ',discount_type:'amount',discount_value:0,items:[],notes:''});useEffect(()=>{fetchInvoices();fetchCustomers();},[]);const fetchInvoices=async()=>{try{console.log('Fetching invoices...');const response=await axios.get(\"\".concat(API,\"/invoices\"));console.log('Invoices fetched:',response.data.length,'invoices');setInvoices(response.data);}catch(error){var _error$response10,_error$response10$dat;console.error('Error fetching invoices:',error);alert('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙˆØ§ØªÙŠØ±: '+(((_error$response10=error.response)===null||_error$response10===void 0?void 0:(_error$response10$dat=_error$response10.data)===null||_error$response10$dat===void 0?void 0:_error$response10$dat.detail)||error.message));}};const fetchCustomers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/customers\"));setCustomers(response.data);}catch(error){console.error('Error fetching customers:',error);}};const deleteInvoice=async invoiceId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©ØŸ'))return;try{await axios.delete(\"\".concat(API,\"/invoices/\").concat(invoiceId));fetchInvoices();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error deleting invoice:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø©');}};const startEditInvoice=invoice=>{setEditingInvoice(invoice.id);setEditForm({invoice_title:invoice.invoice_title||'',supervisor_name:invoice.supervisor_name||'',customer_name:invoice.customer_name||'',payment_method:invoice.payment_method||'Ù†Ù‚Ø¯ÙŠ',discount_type:invoice.discount_type||'amount',discount_value:invoice.discount_value||0,items:invoice.items||[],notes:invoice.notes||''});};const cancelEdit=()=>{setEditingInvoice(null);setEditForm({invoice_title:'',supervisor_name:'',customer_name:'',payment_method:'Ù†Ù‚Ø¯ÙŠ',discount_type:'amount',discount_value:0,items:[],notes:''});};const saveInvoiceEdit=async()=>{if(!editForm.customer_name.trim()){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„');return;}try{console.log('Saving invoice edit for ID:',editingInvoice);console.log('Edit form data:',editForm);// Calculate totals\nconst subtotal=editForm.items.reduce((sum,item)=>sum+(item.total_price||0),0);let discountAmount=0;if(editForm.discount_type==='percentage'){discountAmount=subtotal*parseFloat(editForm.discount_value||0)/100;}else{discountAmount=parseFloat(editForm.discount_value||0);}const totalAfterDiscount=subtotal-discountAmount;const updatedInvoice=_objectSpread(_objectSpread({},editForm),{},{subtotal:subtotal,discount:discountAmount,total_after_discount:totalAfterDiscount,total_amount:totalAfterDiscount});console.log('Sending update to backend:',updatedInvoice);const response=await axios.put(\"\".concat(API,\"/invoices/\").concat(editingInvoice),updatedInvoice);console.log('Update response:',response.data);console.log('Fetching invoices after update...');await fetchInvoices();cancelEdit();alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response11,_error$response12,_error$response12$dat;console.error('Error updating invoice:',error);console.error('Error response:',(_error$response11=error.response)===null||_error$response11===void 0?void 0:_error$response11.data);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ§ØªÙˆØ±Ø©: '+(((_error$response12=error.response)===null||_error$response12===void 0?void 0:(_error$response12$dat=_error$response12.data)===null||_error$response12$dat===void 0?void 0:_error$response12$dat.detail)||error.message));}};const updateInvoiceStatus=async(invoiceId,newStatus)=>{try{await axios.put(\"\".concat(API,\"/invoices/\").concat(invoiceId,\"/status\"),{status:newStatus},{headers:{'Content-Type':'application/json'}});fetchInvoices();alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©');}catch(error){console.error('Error updating invoice status:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©');}};const printInvoice=invoice=>{const printContent=\"\\n      <!DOCTYPE html>\\n      <html dir=\\\"rtl\\\">\\n      <head>\\n        <meta charset=\\\"UTF-8\\\">\\n        <style>\\n          body {\\n            font-family: Arial, sans-serif;\\n            margin: 0;\\n            padding: 20px;\\n            direction: rtl;\\n            font-size: 15px;\\n          }\\n          .header {\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n            border-bottom: 3px solid #000;\\n            padding-bottom: 10px;\\n            margin-bottom: 20px;\\n          }\\n          .company-info {\\n            text-align: right;\\n          }\\n          .company-name {\\n            font-size: 32px;\\n            font-weight: bold;\\n            color: #000;\\n            margin: 0;\\n          }\\n          .company-subtitle {\\n            font-size: 20px;\\n            margin: 5px 0;\\n            color: #666;\\n          }\\n          .company-details {\\n            font-size: 16px;\\n            margin: 2px 0;\\n            color: #333;\\n          }\\n          .logo-section {\\n            text-align: center;\\n            flex: 1;\\n          }\\n          .invoice-title {\\n            font-size: 22px;\\n            font-weight: bold;\\n            background-color: #ff4444;\\n            color: white;\\n            padding: 8px 20px;\\n            border-radius: 5px;\\n            display: inline-block;\\n            margin-bottom: 10px;\\n          }\\n          .invoice-number {\\n            font-size: 20px;\\n            font-weight: bold;\\n            color: #ff4444;\\n          }\\n          .customer-info {\\n            display: flex;\\n            justify-content: space-between;\\n            margin: 20px 0;\\n          }\\n          .customer-details {\\n            text-align: right;\\n          }\\n          .date-info {\\n            text-align: left;\\n          }\\n          .products-table {\\n            width: 100%;\\n            border-collapse: collapse;\\n            border: 2px solid #000;\\n            margin: 20px 0;\\n          }\\n          .products-table th,\\n          .products-table td {\\n            border: 1px solid #000;\\n            padding: 8px;\\n            text-align: center;\\n          }\\n          .products-table th {\\n            background-color: #f0f0f0;\\n            font-weight: bold;\\n          }\\n          .footer {\\n            margin-top: 30px;\\n            border-top: 1px solid #ccc;\\n            padding-top: 15px;\\n            display: flex;\\n            justify-content: space-between;\\n            font-size: 13px;\\n            color: #666;\\n          }\\n          .total-section {\\n            text-align: left;\\n            margin-top: 10px;\\n          }\\n          .total-amount {\\n            font-size: 20px;\\n            font-weight: bold;\\n            border: 2px solid #000;\\n            padding: 10px;\\n            display: inline-block;\\n            background-color: #f9f9f9;\\n          }\\n          @media print {\\n            body { margin: 0; padding: 10px; }\\n          }\\n        </style>\\n      </head>\\n      <body>\\n        <!-- Header Section -->\\n        <div class=\\\"header\\\">\\n          <div class=\\\"company-info\\\">\\n            <h1 class=\\\"company-name\\\">\\u0634\\u0631\\u0643\\u0629 \\u0645\\u0627\\u0633\\u062A\\u0631 \\u0633\\u064A\\u0644</h1>\\n            <p class=\\\"company-subtitle\\\">\\u062A\\u0635\\u0646\\u064A\\u0639 \\u062C\\u0645\\u064A\\u0639 \\u0623\\u0646\\u0648\\u0627\\u0639 \\u0627\\u0644\\u0623\\u0648\\u064A\\u0644 \\u0633\\u064A\\u0644</p>\\n            <p class=\\\"company-details\\\">\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0623\\u0642\\u0637\\u0627\\u0631 \\u062D\\u062A\\u0649 \\u0665\\u0660\\u0660\\u0645\\u0644</p>\\n            <p class=\\\"company-details\\\">\\u0647\\u064A\\u062F\\u0631\\u0648\\u0644\\u064A\\u0643 - \\u0646\\u064A\\u0648\\u0645\\u0627\\u062A\\u064A\\u0643</p>\\n          </div>\\n          \\n          <div class=\\\"logo-section\\\">\\n            <img src=\\\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\\\" \\n                 alt=\\\"Master Seal Logo\\\" \\n                 style=\\\"max-width: 120px; max-height: 80px; margin-bottom: 10px;\\\">\\n            <div class=\\\"invoice-title\\\">\".concat(invoice.invoice_title||'Ø¹Ø±Ø¶ Ø³Ø¹Ø±',\"</div>\\n            <div class=\\\"invoice-number\\\">\").concat(invoice.invoice_number,\"</div>\\n          </div>\\n        </div>\\n\\n        <!-- Customer and Date Info -->\\n        <div class=\\\"customer-info\\\">\\n          <div class=\\\"customer-details\\\">\\n            <p><strong>\\u0627\\u0644\\u0633\\u0627\\u062F\\u0629:</strong> \").concat(invoice.customer_name,\"</p>\\n            <p><strong>\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646:</strong> \").concat(invoice.customer_address||'........................',\"</p>\\n          </div>\\n          <div class=\\\"date-info\\\">\\n            <p><strong>\\u062A\\u062D\\u0631\\u064A\\u0631 \\u0641\\u064A:</strong> \").concat(new Date(invoice.date).toLocaleDateString('ar-EG'),\"</p>\\n            <p><strong>Date:</strong> \").concat(new Date(invoice.date).toLocaleDateString('en-GB'),\"</p>\\n          </div>\\n        </div>\\n\\n        <!-- Products Table -->\\n        <table class=\\\"products-table\\\">\\n          <thead>\\n            <tr>\\n              <th style=\\\"width: 60px;\\\">\\u0627\\u0644\\u0645\\u0633\\u0644\\u0633\\u0644<br>Item</th>\\n              <th style=\\\"width: 80px;\\\">\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629<br>QTY</th>\\n              <th style=\\\"width: 200px;\\\">Description<br>\\u0627\\u0644\\u0645\\u0648\\u0627\\u0635\\u0641\\u0627\\u062A</th>\\n              <th style=\\\"width: 100px;\\\">\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629<br>Unit Price</th>\\n              <th style=\\\"width: 100px;\\\">\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A<br>Total</th>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            \").concat(invoice.items.map((item,index)=>\"\\n              <tr>\\n                <td>\".concat(index+1,\"</td>\\n                <td>\").concat(item.quantity,\"</td>\\n                <td style=\\\"text-align: right;\\\">\\n                  \").concat(item.local_product_details?\"\".concat(item.local_product_details.product_size,\" - \").concat(item.local_product_details.product_type):\"\".concat(item.seal_type,\" - \").concat(item.material_type,\"<br>\\n                    <small>\").concat(item.inner_diameter,\" \\xD7 \").concat(item.outer_diameter,\" \\xD7 \").concat(item.height,\" \\u0645\\u0645\").concat(item.wall_height?\" (\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629: \".concat(item.wall_height,\" \\u0645\\u0645)\"):\"\",\"</small>\"),\"\\n                </td>\\n                <td>\\u062C.\\u0645 \").concat(item.unit_price.toFixed(2),\"</td>\\n                <td>\\u062C.\\u0645 \").concat(item.total_price.toFixed(2),\"</td>\\n              </tr>\\n            \")).join(''),\"\\n            <!-- Empty rows for additional items -->\\n            \").concat(Array.from({length:Math.max(0,8-invoice.items.length)},(_,i)=>\"\\n              <tr style=\\\"height: 40px;\\\">\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n              </tr>\\n            \").join(''),\"\\n          </tbody>\\n        </table>\\n\\n        <!-- Total Section -->\\n        <div class=\\\"total-section\\\">\\n          <div style=\\\"text-align: left; margin-bottom: 10px;\\\">\\n            \").concat(invoice.subtotal?\"\\n              <div style=\\\"margin-bottom: 5px;\\\">\\n                <span>\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639 \\u0627\\u0644\\u0641\\u0631\\u0639\\u064A: \\u062C.\\u0645 \".concat(invoice.subtotal.toFixed(2),\"</span>\\n              </div>\\n            \"):'',\"\\n            \").concat(invoice.discount&&invoice.discount>0?\"\\n              <div style=\\\"margin-bottom: 5px; color: #d32f2f;\\\">\\n                <span>\\u0627\\u0644\\u062E\\u0635\\u0645: - \\u062C.\\u0645 \".concat(invoice.discount.toFixed(2),\"</span>\\n                \").concat(invoice.discount_type==='percentage'&&invoice.discount_value?\" <small>(\".concat(invoice.discount_value,\"%)</small>\"):'',\"\\n              </div>\\n              <hr style=\\\"margin: 5px 0; border: 1px solid #000;\\\">\\n            \"):'',\"\\n          </div>\\n          <div class=\\\"total-amount\\\">\\n            \\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0646\\u0647\\u0627\\u0626\\u064A: \\u062C.\\u0645 \").concat((invoice.total_after_discount||invoice.total_amount).toFixed(2),\"\\n          </div>\\n        </div>\\n\\n        <!-- Additional Info -->\\n        <div style=\\\"margin-top: 20px; text-align: center; font-size: 13px;\\\">\\n          <p><strong>\\u0645\\u0644\\u062D\\u0648\\u0638\\u0629:</strong> \\u0641\\u0642\\u0637 \\u0648\\u0642\\u062F\\u0631\\u0647</p>\\n          <div style=\\\"height: 30px; border-bottom: 1px solid #000; margin: 10px 40px;\\\"></div>\\n        </div>\\n\\n        <!-- Footer -->\\n        <div class=\\\"footer\\\">\\n          <div>\\n            <p><strong>\\u0627\\u0644\\u062A\\u0648\\u0642\\u064A\\u0639:</strong></p>\\n            <p>\\u0645\\u0648\\u0628\\u0627\\u064A\\u0644: \\u0660\\u0661\\u0660\\u0662\\u0660\\u0666\\u0663\\u0660\\u0666\\u0667\\u0667 - \\u0660\\u0661\\u0660\\u0666\\u0662\\u0663\\u0669\\u0660\\u0668\\u0667\\u0660</p>\\n            <p>\\u062A\\u0644\\u064A\\u0641\\u0648\\u0646: \\u0660\\u0661\\u0660\\u0662\\u0660\\u0666\\u0663\\u0660\\u0666\\u0667\\u0667</p>\\n          </div>\\n          <div style=\\\"text-align: left;\\\">\\n            <p><strong>\\u0627\\u0644\\u0645\\u0633\\u062A\\u0644\\u0645:</strong></p>\\n            <p>\\u0627\\u0644\\u062D\\u0631\\u0641\\u064A\\u064A\\u0646 - \\u0627\\u0644\\u0633\\u0644\\u0627\\u0645 - \\u0623\\u0645\\u0627\\u0645 \\u0627\\u0644\\u0633\\u0648\\u0628\\u0631 \\u062C\\u064A\\u062A</p>\\n            <p>\\u0645\\u0648\\u0628\\u0627\\u064A\\u0644: \\u0660\\u0661\\u0660\\u0662\\u0660\\u0666\\u0663\\u0660\\u0666\\u0667\\u0667 - \\u0660\\u0661\\u0660\\u0666\\u0662\\u0663\\u0669\\u0660\\u0668\\u0667\\u0660</p>\\n          </div>\\n        </div>\\n\\n        <!-- Note -->\\n        <div style=\\\"text-align: center; margin-top: 20px; font-size: 12px; color: #666;\\\">\\n          <p>\\u064A\\u0642\\u0631 \\u0627\\u0644\\u0645\\u0634\\u062A\\u0631\\u064A \\u0628\\u0623\\u0646\\u0647 \\u0642\\u0627\\u0645 \\u0628\\u0645\\u0639\\u0627\\u064A\\u0646\\u0629 \\u0627\\u0644\\u0628\\u0636\\u0627\\u0639\\u0629 \\u0648\\u0642\\u0628\\u0648\\u0644\\u0647\\u0627</p>\\n        </div>\\n      </body>\\n      </html>\\n    \");const printWindow=window.open('','_blank');printWindow.document.write(printContent);printWindow.document.close();printWindow.print();};const clearAllInvoices=async()=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ±ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.'))return;try{await axios.delete(\"\".concat(API,\"/invoices/clear-all\"));fetchInvoices();alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ±');}catch(error){console.error('Error clearing invoices:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');}};const filteredInvoices=invoices.filter(invoice=>{const matchesStatus=filterStatus===''||invoice.status===filterStatus;const matchesSearch=searchTerm===''||invoice.invoice_number.toLowerCase().includes(searchTerm.toLowerCase())||invoice.customer_name.toLowerCase().includes(searchTerm.toLowerCase());return matchesStatus&&matchesSearch;});return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-4\",children:\"\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:clearAllInvoices,className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchInvoices,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"border border-gray-300 rounded px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"\\u064A\\u0648\\u0645\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0623\\u0633\\u0628\\u0648\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0634\\u0647\\u0631\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0633\\u0646\\u0648\\u064A\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-4 rounded-lg shadow-md mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0628\\u062D\\u062B\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0623\\u0648 \\u0627\\u0633\\u0645 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\",className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0641\\u0644\\u062A\\u0631\\u0629 \\u062D\\u0633\\u0628 \\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsxs(\"select\",{value:filterStatus,onChange:e=>setFilterStatus(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u062D\\u0627\\u0644\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629\",children:\"\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u063A\\u064A\\u0631 \\u0645\\u062F\\u0641\\u0648\\u0639\\u0629\",children:\"\\u063A\\u064A\\u0631 \\u0645\\u062F\\u0641\\u0648\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629 \\u062C\\u0632\\u0626\\u064A\\u0627\\u064B\",children:\"\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629 \\u062C\\u0632\\u0626\\u064A\\u0627\\u064B\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0627\\u0646\\u062A\\u0638\\u0627\\u0631\",children:\"\\u0627\\u0646\\u062A\\u0638\\u0627\\u0631\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u062A\\u0645 \\u0627\\u0644\\u062A\\u0646\\u0641\\u064A\\u0630\",children:\"\\u062A\\u0645 \\u0627\\u0644\\u062A\\u0646\\u0641\\u064A\\u0630\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSearchTerm('');setFilterStatus('');},className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0645\\u0633\\u062D \\u0627\\u0644\\u0641\\u0644\\u0627\\u062A\\u0631\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-4 rounded-lg text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-blue-800\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-blue-600\",children:invoices.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 p-4 rounded-lg text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-green-800\",children:\"\\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-green-600\",children:invoices.filter(inv=>inv.status==='Ù…Ø¯ÙÙˆØ¹Ø©').length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 p-4 rounded-lg text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-red-800\",children:\"\\u063A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-red-600\",children:invoices.filter(inv=>inv.status==='ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©').length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 p-4 rounded-lg text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-yellow-800\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-yellow-600\",children:[\"\\u062C.\\u0645 \",invoices.reduce((sum,inv)=>sum+(inv.total_amount||0),0).toFixed(2)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639 \\u0627\\u0644\\u0641\\u0631\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062E\\u0635\\u0645\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0646\\u0647\\u0627\\u0626\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredInvoices.map(invoice=>{var _invoice$subtotal,_invoice$total_amount2,_ref4;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:invoice.invoice_number}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.customer_name}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(invoice.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.payment_method}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:[\"\\u062C.\\u0645 \",((_invoice$subtotal=invoice.subtotal)===null||_invoice$subtotal===void 0?void 0:_invoice$subtotal.toFixed(2))||((_invoice$total_amount2=invoice.total_amount)===null||_invoice$total_amount2===void 0?void 0:_invoice$total_amount2.toFixed(2))||'0.00']}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-red-600\",children:invoice.discount&&invoice.discount>0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u062C.\\u0645 \",invoice.discount.toFixed(2)]}),invoice.discount_type==='percentage'&&invoice.discount_value&&/*#__PURE__*/_jsxs(\"small\",{className:\"block text-xs\",children:[\"(%\",invoice.discount_value,\")\"]})]}):/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:\"\\u0644\\u0627 \\u064A\\u0648\\u062C\\u062F\"})}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold text-green-600\",children:[\"\\u062C.\\u0645 \",((_ref4=invoice.total_after_discount||invoice.total_amount)===null||_ref4===void 0?void 0:_ref4.toFixed(2))||'0.00']}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm cursor-pointer \".concat(invoice.status==='Ù…Ø¯ÙÙˆØ¹Ø©'?'bg-green-100 text-green-800':invoice.status==='ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©'?'bg-red-100 text-red-800':invoice.status==='Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹'?'bg-yellow-100 text-yellow-800':invoice.status==='Ø§Ù†ØªØ¸Ø§Ø±'?'bg-blue-100 text-blue-800':invoice.status==='ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°'?'bg-green-100 text-green-800':invoice.status==='ØªÙ… Ø§Ù„ØªØµÙ†ÙŠØ¹'?'bg-purple-100 text-purple-800':'bg-gray-100 text-gray-800'),children:invoice.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>printInvoice(invoice),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>startEditInvoice(invoice),className:\"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteInvoice(invoice.id),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641\"}),invoice.status==='Ø§Ù†ØªØ¸Ø§Ø±'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateInvoiceStatus(invoice.id,'ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°'),className:\"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600\",children:\"\\u062A\\u0645 \\u0627\\u0644\\u062A\\u0646\\u0641\\u064A\\u0630\"})]})})]},invoice.id);})})]}),filteredInvoices.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u062A\\u0637\\u0627\\u0628\\u0642 \\u0645\\u0639\\u0627\\u064A\\u064A\\u0631 \\u0627\\u0644\\u0628\\u062D\\u062B\"})]})]}),editingInvoice&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-lg w-full max-w-4xl max-h-screen overflow-y-auto\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-4\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.invoice_title,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{invoice_title:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0634\\u0631\\u0641\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.supervisor_name,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{supervisor_name:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0634\\u0631\\u0641 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.customer_name,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{customer_name:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639\"}),/*#__PURE__*/_jsxs(\"select\",{value:editForm.payment_method,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{payment_method:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u0646\\u0642\\u062F\\u064A\",children:\"\\u0646\\u0642\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 \\u0643\\u0627\\u0634 \\u0627\\u0644\\u0635\\u0627\\u0648\\u064A\",children:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 \\u0643\\u0627\\u0634 \\u0627\\u0644\\u0635\\u0627\\u0648\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 \\u0643\\u0627\\u0634 \\u0648\\u0627\\u0626\\u0644\",children:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 \\u0643\\u0627\\u0634 \\u0648\\u0627\\u0626\\u0644\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0622\\u062C\\u0644\",children:\"\\u0622\\u062C\\u0644\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0627\\u0646\\u0633\\u062A\\u0627 \\u0628\\u0627\\u064A\",children:\"\\u0627\\u0646\\u0633\\u062A\\u0627 \\u0628\\u0627\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Yad_Elsawy\",children:\"Yad Elsawy\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0635\\u0645\"}),/*#__PURE__*/_jsxs(\"select\",{value:editForm.discount_type,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{discount_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"amount\",children:\"\\u0645\\u0628\\u0644\\u063A \\u062B\\u0627\\u0628\\u062A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"percentage\",children:\"\\u0646\\u0633\\u0628\\u0629 \\u0645\\u0626\\u0648\\u064A\\u0629\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0642\\u064A\\u0645\\u0629 \\u0627\\u0644\\u062E\\u0635\\u0645\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:editForm.discount_value,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{discount_value:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:editForm.discount_type==='percentage'?'0-100':'0.00'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"textarea\",{value:editForm.notes,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{notes:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",rows:\"3\",placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0625\\u0636\\u0627\\u0641\\u064A\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium mb-2\",children:\"\\u0639\\u0646\\u0627\\u0635\\u0631 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:editForm.items.map((item,index)=>{var _item$local_product_d,_item$local_product_d2;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.product_type==='local'||item.local_product_details?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:item.product_name||\"\".concat(((_item$local_product_d=item.local_product_details)===null||_item$local_product_d===void 0?void 0:_item$local_product_d.product_size)||'',\" - \").concat(((_item$local_product_d2=item.local_product_details)===null||_item$local_product_d2===void 0?void 0:_item$local_product_d2.product_type)||''),onChange:e=>{const newItems=[...editForm.items];newItems[index].product_name=e.target.value;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},className:\"w-full p-1 border border-gray-300 rounded\",placeholder:\"\\u0645\\u0642\\u0627\\u0633 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C - \\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-medium w-16\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644:\"}),/*#__PURE__*/_jsxs(\"select\",{value:item.seal_type||'',onChange:e=>{const newItems=[...editForm.items];newItems[index].seal_type=e.target.value;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},className:\"flex-1 p-1 text-xs border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0646\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"option\",{value:\"RSL\",children:\"RSL\"}),/*#__PURE__*/_jsx(\"option\",{value:\"RS\",children:\"RS\"}),/*#__PURE__*/_jsx(\"option\",{value:\"RSE\",children:\"RSE\"}),/*#__PURE__*/_jsx(\"option\",{value:\"B17\",children:\"B17\"}),/*#__PURE__*/_jsx(\"option\",{value:\"B3\",children:\"B3\"}),/*#__PURE__*/_jsx(\"option\",{value:\"B14\",children:\"B14\"}),/*#__PURE__*/_jsx(\"option\",{value:\"B1\",children:\"B1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"R15\",children:\"R15\"}),/*#__PURE__*/_jsx(\"option\",{value:\"R17\",children:\"R17\"}),/*#__PURE__*/_jsx(\"option\",{value:\"W1\",children:\"W1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"W4\",children:\"W4\"}),/*#__PURE__*/_jsx(\"option\",{value:\"W5\",children:\"W5\"}),/*#__PURE__*/_jsx(\"option\",{value:\"W11\",children:\"W11\"}),/*#__PURE__*/_jsx(\"option\",{value:\"WBT\",children:\"WBT\"}),/*#__PURE__*/_jsx(\"option\",{value:\"XR\",children:\"XR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"CH\",children:\"CH\"}),/*#__PURE__*/_jsx(\"option\",{value:\"VR\",children:\"VR\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-medium w-16\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629:\"}),/*#__PURE__*/_jsxs(\"select\",{value:item.material_type||'',onChange:e=>{const newItems=[...editForm.items];newItems[index].material_type=e.target.value;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},className:\"flex-1 p-1 text-xs border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"option\",{value:\"NBR\",children:\"NBR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BUR\",children:\"BUR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BT\",children:\"BT\"}),/*#__PURE__*/_jsx(\"option\",{value:\"VT\",children:\"VT\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BOOM\",children:\"BOOM\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:item.inner_diameter||'',onChange:e=>{const newItems=[...editForm.items];newItems[index].inner_diameter=parseFloat(e.target.value)||0;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},placeholder:\"\\u062F\\u0627\\u062E\\u0644\\u064A\",className:\"w-12 p-1 text-xs border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:item.outer_diameter||'',onChange:e=>{const newItems=[...editForm.items];newItems[index].outer_diameter=parseFloat(e.target.value)||0;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},placeholder:\"\\u062E\\u0627\\u0631\\u062C\\u064A\",className:\"w-12 p-1 text-xs border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:item.height||'',onChange:e=>{const newItems=[...editForm.items];newItems[index].height=parseFloat(e.target.value)||0;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},placeholder:\"\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639\",className:\"w-12 p-1 text-xs border border-gray-300 rounded\"})]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:item.quantity,onChange:e=>{const newItems=[...editForm.items];newItems[index].quantity=parseInt(e.target.value)||0;newItems[index].total_price=newItems[index].unit_price*newItems[index].quantity;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},className:\"w-full p-1 border border-gray-300 rounded\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:item.unit_price,onChange:e=>{const newItems=[...editForm.items];newItems[index].unit_price=parseFloat(e.target.value)||0;newItems[index].total_price=newItems[index].unit_price*newItems[index].quantity;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},className:\"w-full p-1 border border-gray-300 rounded\"})}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:[\"\\u062C.\\u0645 \",(item.total_price||0).toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const newItems=editForm.items.filter((_,i)=>i!==index);setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641\"})})]},index);})})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{// Add a new empty item for editing\nconst newItem={seal_type:'',material_type:'',inner_diameter:'',outer_diameter:'',height:'',quantity:1,unit_price:0,total_price:0};setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:[...editForm.items,newItem]}));},className:\"mt-2 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0646\\u062A\\u062C \\u062C\\u062F\\u064A\\u062F\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:cancelEdit,className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"button\",{onClick:saveInvoiceEdit,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u062D\\u0641\\u0638 \\u0627\\u0644\\u062A\\u0639\\u062F\\u064A\\u0644\\u0627\\u062A\"})]})]})})]});};// Work Orders Component\nconst WorkOrders=()=>{const[workOrders,setWorkOrders]=useState([]);const[invoices,setInvoices]=useState([]);const[selectedInvoices,setSelectedInvoices]=useState([]);const[newWorkOrder,setNewWorkOrder]=useState({title:'',description:'',priority:'Ø¹Ø§Ø¯ÙŠ'});const[showAddToExisting,setShowAddToExisting]=useState(false);const[selectedWorkOrderId,setSelectedWorkOrderId]=useState('');const[selectedInvoiceForAdd,setSelectedInvoiceForAdd]=useState('');useEffect(()=>{fetchWorkOrders();fetchInvoices();},[]);const fetchWorkOrders=async()=>{try{const response=await axios.get(\"\".concat(API,\"/work-orders\"));setWorkOrders(response.data);}catch(error){console.error('Error fetching work orders:',error);setWorkOrders([]);// Set empty array on error\n}};const fetchInvoices=async()=>{try{const response=await axios.get(\"\".concat(API,\"/invoices\"));setInvoices(response.data);}catch(error){console.error('Error fetching invoices:',error);}};const toggleInvoiceSelection=invoiceId=>{setSelectedInvoices(prev=>prev.includes(invoiceId)?prev.filter(id=>id!==invoiceId):[...prev,invoiceId]);};const createWorkOrderFromMultipleInvoices=async()=>{if(selectedInvoices.length===0){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ÙØ§ØªÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');return;}if(!newWorkOrder.title.trim()){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„');return;}try{// Get selected invoices data\nconst selectedInvoicesData=invoices.filter(inv=>selectedInvoices.includes(inv.id));// Clean invoices data (remove MongoDB ObjectIds)\nconst cleanInvoices=selectedInvoicesData.map(inv=>{const cleanInv=_objectSpread({},inv);if(cleanInv._id)delete cleanInv._id;return cleanInv;});// Create work order with multiple invoices\nconst workOrderData={title:newWorkOrder.title,description:newWorkOrder.description,priority:newWorkOrder.priority,invoices:cleanInvoices,total_amount:cleanInvoices.reduce((sum,inv)=>sum+(inv.total_amount||0),0),total_items:cleanInvoices.reduce((sum,inv)=>{var _inv$items;return sum+(((_inv$items=inv.items)===null||_inv$items===void 0?void 0:_inv$items.length)||0);},0)};const response=await axios.post(\"\".concat(API,\"/work-orders/multiple\"),workOrderData);if(response.data){alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ø¨Ù†Ø¬Ø§Ø­');// Reset form\nsetSelectedInvoices([]);setNewWorkOrder({title:'',description:'',priority:'Ø¹Ø§Ø¯ÙŠ'});// Refresh work orders list\nawait fetchWorkOrders();}}catch(error){var _error$response13,_error$response13$dat;console.error('Error creating work order:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„: '+(((_error$response13=error.response)===null||_error$response13===void 0?void 0:(_error$response13$dat=_error$response13.data)===null||_error$response13$dat===void 0?void 0:_error$response13$dat.detail)||error.message));}};const addInvoiceToExistingWorkOrder=async()=>{if(!selectedWorkOrderId||!selectedInvoiceForAdd){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ ÙˆØ§Ù„ÙØ§ØªÙˆØ±Ø©');return;}try{const response=await axios.put(\"\".concat(API,\"/work-orders/\").concat(selectedWorkOrderId,\"/add-invoice\"),null,{params:{invoice_id:selectedInvoiceForAdd}});if(response.data){alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¥Ù„Ù‰ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ø¨Ù†Ø¬Ø§Ø­');// Reset form\nsetSelectedWorkOrderId('');setSelectedInvoiceForAdd('');setShowAddToExisting(false);// Refresh work orders list\nawait fetchWorkOrders();}}catch(error){var _error$response14,_error$response14$dat;console.error('Error adding invoice to work order:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ§ØªÙˆØ±Ø©: '+(((_error$response14=error.response)===null||_error$response14===void 0?void 0:(_error$response14$dat=_error$response14.data)===null||_error$response14$dat===void 0?void 0:_error$response14$dat.detail)||error.message));}};const getInvoiceDetails=invoiceId=>{return invoices.find(inv=>inv.id===invoiceId);};const getAvailableInvoices=()=>{// Show invoices that are \"ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°\" or \"Ø§Ù†ØªØ¸Ø§Ø±\"\nreturn invoices.filter(invoice=>invoice.status==='ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°'||invoice.status==='Ø§Ù†ØªØ¸Ø§Ø±');};const getAvailableInvoicesForAdd=()=>{var _selectedWorkOrder$in;// Get invoices not already in the selected work order\nif(!selectedWorkOrderId)return getAvailableInvoices();const selectedWorkOrder=workOrders.find(wo=>wo.id===selectedWorkOrderId);if(!selectedWorkOrder)return getAvailableInvoices();const usedInvoiceIds=((_selectedWorkOrder$in=selectedWorkOrder.invoices)===null||_selectedWorkOrder$in===void 0?void 0:_selectedWorkOrder$in.map(inv=>inv.id))||[];return getAvailableInvoices().filter(invoice=>!usedInvoiceIds.includes(invoice.id));};const printWorkOrder=workOrder=>{var _workOrder$invoices;const workOrderInvoices=((_workOrder$invoices=workOrder.invoices)===null||_workOrder$invoices===void 0?void 0:_workOrder$invoices.map(invoiceData=>invoices.find(inv=>inv.id===invoiceData.id)||invoiceData).filter(inv=>inv))||[];const totalAmount=workOrderInvoices.reduce((sum,inv)=>sum+(inv.total_amount||0),0);const totalItems=workOrderInvoices.reduce((sum,inv)=>{var _inv$items2;return sum+(((_inv$items2=inv.items)===null||_inv$items2===void 0?void 0:_inv$items2.length)||0);},0);const printContent=\"\\n      <div style=\\\"font-family: Arial, sans-serif; direction: rtl; text-align: right;\\\">\\n        <div style=\\\"text-align: center; margin-bottom: 20px;\\\">\\n          <h1>\\u0645\\u0627\\u0633\\u062A\\u0631 \\u0633\\u064A\\u0644</h1>\\n          <p>\\u0627\\u0644\\u062D\\u0631\\u0641\\u064A\\u0627\\u0646 \\u0634\\u0627\\u0631\\u0639 \\u0627\\u0644\\u0633\\u0648\\u0628\\u0631 \\u062C\\u064A\\u062A - 01020630677</p>\\n          <h2 style=\\\"color: #333; margin-top: 20px;\\\">\\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644</h2>\\n        </div>\\n        \\n        <div style=\\\"margin-bottom: 20px;\\\">\\n          <strong>\\u0631\\u0642\\u0645 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644:</strong> \".concat(workOrder.id,\"<br>\\n          <strong>\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646:</strong> \").concat(workOrder.title||\"\\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 #\".concat(workOrder.id.slice(-8)),\"<br>\\n          <strong>\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E:</strong> \").concat(new Date(workOrder.created_at).toLocaleDateString('ar-EG'),\"<br>\\n          <strong>\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629:</strong> \").concat(workOrder.status||'Ø¬Ø¯ÙŠØ¯',\"<br>\\n          <strong>\\u0639\\u062F\\u062F \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631:</strong> \").concat(workOrderInvoices.length,\"<br>\\n          <strong>\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A:</strong> \\u062C.\\u0645 \").concat(totalAmount.toFixed(2),\"\\n          \").concat(workOrder.description?\"<br><strong>\\u0627\\u0644\\u0648\\u0635\\u0641:</strong> \".concat(workOrder.description):'',\"\\n          \").concat(workOrder.supervisor_name?\"<br><strong>\\u0627\\u0644\\u0645\\u0634\\u0631\\u0641 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639:</strong> \".concat(workOrder.supervisor_name):'',\"\\n          \").concat(workOrder.is_daily?\"<br><strong>\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0623\\u0645\\u0631:</strong> \\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 \\u064A\\u0648\\u0645\\u064A \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\":'',\"\\n        </div>\\n\\n        <h3 style=\\\"color: #333; margin-bottom: 10px;\\\">\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062F\\u0631\\u062C\\u0629:</h3>\\n        <table style=\\\"width: 100%; border-collapse: collapse; margin-bottom: 20px;\\\">\\n          <thead>\\n            <tr style=\\\"background-color: #f0f0f0;\\\">\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0639\\u062F\\u062F \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A</th>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            \").concat(workOrderInvoices.map(invoice=>{var _invoice$total_amount3,_invoice$items;return\"\\n              <tr>\\n                <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\".concat(invoice.invoice_number,\"</td>\\n                <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(invoice.customer_name,\"</td>\\n                <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(new Date(invoice.date).toLocaleDateString('ar-EG'),\"</td>\\n                <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u062C.\\u0645 \").concat(((_invoice$total_amount3=invoice.total_amount)===null||_invoice$total_amount3===void 0?void 0:_invoice$total_amount3.toFixed(2))||'0.00',\"</td>\\n                <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(((_invoice$items=invoice.items)===null||_invoice$items===void 0?void 0:_invoice$items.length)||0,\"</td>\\n              </tr>\\n            \");}).join(''),\"\\n          </tbody>\\n        </table>\\n\\n        <h3 style=\\\"color: #333; margin-bottom: 10px;\\\">\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A:</h3>\\n        <table style=\\\"width: 100%; border-collapse: collapse; margin-bottom: 20px;\\\">\\n          <thead>\\n            <tr style=\\\"background-color: #f0f0f0;\\\">\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0627\\u0644\\u0645\\u0642\\u0627\\u0633</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0627\\u0644\\u062E\\u0627\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\\u0629</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629</th>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            \").concat(workOrderInvoices.map(invoice=>{var _invoice$items2;return((_invoice$items2=invoice.items)===null||_invoice$items2===void 0?void 0:_invoice$items2.map(item=>\"\\n                <tr>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\".concat(invoice.invoice_number,\"</td>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(item.local_product_details?item.local_product_details.product_type:item.seal_type||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',\"</td>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(item.local_product_details?'Ù…Ø­Ù„ÙŠ':item.material_type||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',\"</td>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(item.local_product_details?\"\".concat(item.local_product_details.product_size,\" - \").concat(item.local_product_details.product_type):item.inner_diameter&&item.outer_diameter&&item.height?\"\".concat(item.inner_diameter,\" \\xD7 \").concat(item.outer_diameter,\" \\xD7 \").concat(item.height).concat(item.wall_height?\" (\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629: \".concat(item.wall_height,\")\"):''):'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',\"</td>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(item.quantity,\"</td>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(item.local_product_details?'Ù…Ø­Ù„ÙŠ':item.material_used||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',\"</td>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\n                    \").concat(item.local_product_details?'Ù…Ø­Ù„ÙŠ':item.material_details?item.material_details.is_finished_product?'Ù…Ø®Ø²Ù† Ø§Ù†ØªØ§Ø¬ ØªØ§Ù…':\"\".concat(item.material_details.unit_code,\" / \").concat(item.material_details.inner_diameter,\"-\").concat(item.material_details.outer_diameter):\"\".concat(item.material_used||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',\" / \\u0645\\u0639\\u0644\\u0648\\u0645\\u0627\\u062A \\u063A\\u064A\\u0631 \\u0645\\u062A\\u0648\\u0641\\u0631\\u0629\"),\"\\n                  </td>\\n                </tr>\\n              \")).join(''))||'';}).join(''),\"\\n          </tbody>\\n        </table>\\n        \\n        <div style=\\\"margin-top: 40px; border-top: 1px solid #ddd; padding-top: 20px;\\\">\\n          <div style=\\\"float: left;\\\">\\n            <strong>\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639:</strong><br>\\n            <div style=\\\"margin-top: 10px; height: 50px; border: 1px solid #ddd;\\\"></div>\\n          </div>\\n          <div style=\\\"float: right;\\\">\\n            <strong>\\u062A\\u0648\\u0642\\u064A\\u0639 \\u0627\\u0644\\u0645\\u0633\\u0624\\u0648\\u0644:</strong><br>\\n            <div style=\\\"margin-top: 10px; height: 50px; border: 1px solid #ddd; width: 150px;\\\"></div>\\n          </div>\\n          <div style=\\\"clear: both;\\\"></div>\\n        </div>\\n      </div>\\n    \");const printWindow=window.open('','_blank');printWindow.document.write(printContent);printWindow.document.close();printWindow.print();};const clearAllWorkOrders=async()=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´ØºÙ„ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.'))return;try{await axios.delete(\"\".concat(API,\"/work-orders/clear-all\"));fetchWorkOrders();alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´ØºÙ„');}catch(error){console.error('Error clearing work orders:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');}};const deleteWorkOrder=async workOrderId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ù‡Ø°Ø§ØŸ'))return;try{await axios.delete(\"\".concat(API,\"/work-orders/\").concat(workOrderId));fetchWorkOrders();alert('ØªÙ… Ø­Ø°Ù Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error deleting work order:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-4\",children:\"\\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:clearAllWorkOrders,className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{fetchWorkOrders();fetchInvoices();},className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddToExisting(!showAddToExisting),className:\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\",children:showAddToExisting?'Ø¥Ø®ÙØ§Ø¡':'Ø¥Ø¶Ø§ÙØ© ÙØ§ØªÙˆØ±Ø© Ù„Ø£Ù…Ø± Ù…ÙˆØ¬ÙˆØ¯'}),/*#__PURE__*/_jsxs(\"select\",{className:\"border border-gray-300 rounded px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"\\u064A\\u0648\\u0645\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0623\\u0633\\u0628\\u0648\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0634\\u0647\\u0631\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0633\\u0646\\u0648\\u064A\"})]})]})]}),showAddToExisting&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 p-6 rounded-lg shadow-md mb-6 border border-yellow-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4 text-yellow-800\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0625\\u0644\\u0649 \\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 \\u0645\\u0648\\u062C\\u0648\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedWorkOrderId,onChange:e=>setSelectedWorkOrderId(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644\"}),workOrders.map(workOrder=>{var _workOrder$invoices2;return/*#__PURE__*/_jsxs(\"option\",{value:workOrder.id,children:[workOrder.title||\"\\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 #\".concat(workOrder.id.slice(-8)),\"(\",((_workOrder$invoices2=workOrder.invoices)===null||_workOrder$invoices2===void 0?void 0:_workOrder$invoices2.length)||0,\" \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629)\"]},workOrder.id);})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedInvoiceForAdd,onChange:e=>setSelectedInvoiceForAdd(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",disabled:!selectedWorkOrderId,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),getAvailableInvoicesForAdd().map(invoice=>{var _invoice$total_amount4;return/*#__PURE__*/_jsxs(\"option\",{value:invoice.id,children:[invoice.invoice_number,\" - \",invoice.customer_name,\"(\\u062C.\\u0645 \",((_invoice$total_amount4=invoice.total_amount)===null||_invoice$total_amount4===void 0?void 0:_invoice$total_amount4.toFixed(2))||'0.00',\")\"]},invoice.id);})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:addInvoiceToExistingWorkOrder,className:\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\",disabled:!selectedWorkOrderId||!selectedInvoiceForAdd,children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowAddToExisting(false);setSelectedWorkOrderId('');setSelectedInvoiceForAdd('');},className:\"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0646\\u0634\\u0627\\u0621 \\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 \\u062C\\u062F\\u064A\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644 *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newWorkOrder.title,onChange:e=>setNewWorkOrder(_objectSpread(_objectSpread({},newWorkOrder),{},{title:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0645\\u062B\\u0627\\u0644: \\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 \\u0631\\u0642\\u0645 1 - \\u064A\\u0646\\u0627\\u064A\\u0631 2025\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0623\\u0648\\u0644\\u0648\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"select\",{value:newWorkOrder.priority,onChange:e=>setNewWorkOrder(_objectSpread(_objectSpread({},newWorkOrder),{},{priority:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u0639\\u0627\\u062F\\u064A\",children:\"\\u0639\\u0627\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0645\\u0647\\u0645\",children:\"\\u0645\\u0647\\u0645\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0637\\u0627\\u0631\\u0626\",children:\"\\u0637\\u0627\\u0631\\u0626\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062E\\u062A\\u0627\\u0631\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-gray-100 rounded\",children:[selectedInvoices.length,\" \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0645\\u062D\\u062F\\u062F\\u0629\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0648\\u0635\\u0641 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644\"}),/*#__PURE__*/_jsx(\"textarea\",{value:newWorkOrder.description,onChange:e=>setNewWorkOrder(_objectSpread(_objectSpread({},newWorkOrder),{},{description:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded h-20\",placeholder:\"\\u0648\\u0635\\u0641 \\u0625\\u0636\\u0627\\u0641\\u064A (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4 max-h-60 overflow-y-auto border rounded p-4\",children:getAvailableInvoices().map(invoice=>{var _invoice$total_amount5,_invoice$items3;return/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-3 cursor-pointer transition-colors \".concat(selectedInvoices.includes(invoice.id)?'border-blue-500 bg-blue-50':'border-gray-300 hover:bg-gray-50'),onClick:()=>toggleInvoiceSelection(invoice.id),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedInvoices.includes(invoice.id),onChange:()=>{},className:\"ml-2\"}),/*#__PURE__*/_jsx(\"h5\",{className:\"font-semibold\",children:invoice.invoice_number})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644: \",invoice.customer_name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E: \",new Date(invoice.date).toLocaleDateString('ar-EG')]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium\",children:[\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A: \\u062C.\\u0645 \",((_invoice$total_amount5=invoice.total_amount)===null||_invoice$total_amount5===void 0?void 0:_invoice$total_amount5.toFixed(2))||'0.00']}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A: \",((_invoice$items3=invoice.items)===null||_invoice$items3===void 0?void 0:_invoice$items3.length)||0,\" \\u0635\\u0646\\u0641\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-block px-2 py-1 rounded text-xs mt-1 \".concat(invoice.status==='ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°'?'bg-green-100 text-green-800':'bg-blue-100 text-blue-800'),children:invoice.status})]},invoice.id);})}),getAvailableInvoices().length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0645\\u062A\\u0627\\u062D\\u0629 \\u0644\\u0625\\u0646\\u0634\\u0627\\u0621 \\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644\"}),selectedInvoices.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-3 bg-blue-100 rounded\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-semibold text-blue-800\",children:\"\\u0645\\u0644\\u062E\\u0635 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644:\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-700\",children:[\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631: \",selectedInvoices.length,\" \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-700\",children:[\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A: \\u062C.\\u0645 \",invoices.filter(inv=>selectedInvoices.includes(inv.id)).reduce((sum,inv)=>sum+(inv.total_amount||0),0).toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-700\",children:[\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A: \",invoices.filter(inv=>selectedInvoices.includes(inv.id)).reduce((sum,inv)=>{var _inv$items3;return sum+(((_inv$items3=inv.items)===null||_inv$items3===void 0?void 0:_inv$items3.length)||0);},0),\" \\u0635\\u0646\\u0641\"]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:createWorkOrderFromMultipleInvoices,className:\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\",disabled:selectedInvoices.length===0,children:[\"\\u0625\\u0646\\u0634\\u0627\\u0621 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644 (\",selectedInvoices.length,\" \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold mb-4\",children:[\"\\u0623\\u0648\\u0627\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644 (\",workOrders.length,\")\"]}),workOrders.map(workOrder=>{var _workOrder$total_amou;// Handle both single invoice and multiple invoices work orders\nconst workOrderInvoices=workOrder.invoices||(workOrder.invoice_id?[getInvoiceDetails(workOrder.invoice_id)]:[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-lg\",children:workOrder.title||\"\\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 #\".concat(workOrder.id.slice(-8))}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0623\\u0648\\u0644\\u0648\\u064A\\u0629:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mr-2 px-2 py-1 rounded text-sm \".concat(workOrder.priority==='Ø·Ø§Ø±Ø¦'?'bg-red-100 text-red-800':workOrder.priority==='Ù…Ù‡Ù…'?'bg-yellow-100 text-yellow-800':'bg-blue-100 text-blue-800'),children:workOrder.priority||'Ø¹Ø§Ø¯ÙŠ'})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u062A\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u0625\\u0646\\u0634\\u0627\\u0621:\"}),\" \",new Date(workOrder.created_at).toLocaleDateString('ar-EG')]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631:\"}),\" \",workOrderInvoices.filter(inv=>inv).length]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mr-2 px-2 py-1 rounded text-sm bg-blue-100 text-blue-800\",children:workOrder.status||'Ø¬Ø¯ÙŠØ¯'})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A:\"}),\"\\u062C.\\u0645 \",((_workOrder$total_amou=workOrder.total_amount)===null||_workOrder$total_amou===void 0?void 0:_workOrder$total_amou.toFixed(2))||workOrderInvoices.reduce((sum,inv)=>sum+((inv===null||inv===void 0?void 0:inv.total_amount)||0),0).toFixed(2)]}),workOrder.description&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0648\\u0635\\u0641:\"}),\" \",workOrder.description]}),workOrder.supervisor_name&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0645\\u0634\\u0631\\u0641 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639:\"}),\" \",workOrder.supervisor_name]}),workOrder.is_daily&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0623\\u0645\\u0631:\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600\",children:\"\\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 \\u064A\\u0648\\u0645\\u064A \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium mb-2\",children:\"\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062F\\u0631\\u062C\\u0629:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\",children:workOrderInvoices.filter(invoice=>invoice).map((invoice,index)=>{var _invoice$total_amount6,_invoice$items4;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-3 rounded border\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629:\"}),\" \",invoice.invoice_number]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644:\"}),\" \",invoice.customer_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A:\"}),\" \\u062C.\\u0645 \",((_invoice$total_amount6=invoice.total_amount)===null||_invoice$total_amount6===void 0?void 0:_invoice$total_amount6.toFixed(2))||'0.00']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A:\"}),\" \",((_invoice$items4=invoice.items)===null||_invoice$items4===void 0?void 0:_invoice$items4.length)||0,\" \\u0635\\u0646\\u0641\"]})]},index);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto mb-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium mb-2\",children:\"\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A:\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0642\\u0627\\u0633\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062E\\u0627\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:workOrderInvoices.filter(invoice=>invoice).map(invoice=>{var _invoice$items5;return((_invoice$items5=invoice.items)===null||_invoice$items5===void 0?void 0:_invoice$items5.map((item,itemIndex)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.invoice_number}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.seal_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.material_type}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[item.inner_diameter,\" \\xD7 \",item.outer_diameter,\" \\xD7 \",item.height]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.quantity}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.material_details?item.material_details.is_finished_product?/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm\",children:\"\\u0645\\u0646\\u062A\\u062C \\u062C\\u0627\\u0647\\u0632\"}):/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 bg-green-100 text-green-800 rounded text-sm\",children:item.material_details.material_type}):/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 bg-green-100 text-green-800 rounded text-sm\",children:item.material_used||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"font-mono text-sm\",children:item.material_details?item.material_details.is_finished_product?/*#__PURE__*/_jsx(\"div\",{className:\"text-center font-semibold text-blue-600\",children:\"\\u0645\\u062E\\u0632\\u0646 \\u0627\\u0646\\u062A\\u0627\\u062C \\u062A\\u0627\\u0645\"}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold\",children:item.material_details.unit_code}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-600\",children:[item.material_details.inner_diameter,\" - \",item.material_details.outer_diameter]})]}):/*#__PURE__*/// Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø£Ùˆ Ø¹Ù†Ø¯Ù…Ø§ Ù„Ø§ ØªÙˆØ¬Ø¯ material_details\n_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold\",children:item.material_used||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-600\",children:\"\\u0645\\u0639\\u0644\\u0648\\u0645\\u0627\\u062A \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629 \\u063A\\u064A\\u0631 \\u0645\\u062A\\u0648\\u0641\\u0631\\u0629\"})]})})})]},\"\".concat(invoice.id,\"-\").concat(itemIndex))))||[];})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>printWorkOrder(workOrder),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644 \\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedWorkOrderId(workOrder.id);setShowAddToExisting(true);},className:\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteWorkOrder(workOrder.id),className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641\"})]})]},workOrder.id);}),workOrders.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0623\\u0648\\u0627\\u0645\\u0631 \\u0634\\u063A\\u0644\"})]})]});};// Treasury Management Component\nconst Treasury=()=>{const{user}=useAuth();// Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ\nconst[accounts,setAccounts]=useState([{id:'cash',name:'Ù†Ù‚Ø¯ÙŠ',balance:0,transactions:[]},{id:'vodafone_elsawy',name:'ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ Ù…Ø­Ù…Ø¯ Ø§Ù„ØµØ§ÙˆÙŠ',balance:0,transactions:[]},{id:'vodafone_wael',name:'ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ ÙˆØ§Ø¦Ù„ Ù…Ø­Ù…Ø¯',balance:0,transactions:[]},{id:'deferred',name:'Ø¢Ø¬Ù„',balance:0,transactions:[]},{id:'instapay',name:'Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ',balance:0,transactions:[]},{id:'yad_elsawy',name:'ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ',balance:0,transactions:[]}]);const[selectedAccount,setSelectedAccount]=useState('cash');const[showTransferModal,setShowTransferModal]=useState(false);const[transferData,setTransferData]=useState({from:'cash',to:'vodafone_elsawy',amount:'',notes:''});const[manualTransaction,setManualTransaction]=useState({account:'cash',type:'income',// income or expense\namount:'',description:'',notes:''});const[showManualForm,setShowManualForm]=useState(false);const[searchTerm,setSearchTerm]=useState('');// Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø­Ø«\nuseEffect(()=>{fetchTreasuryData();},[]);const fetchTreasuryData=async()=>{try{// Fetch balances and transactions from backend\nconst balancesResponse=await axios.get(\"\".concat(API,\"/treasury/balances\"));const transactionsResponse=await axios.get(\"\".concat(API,\"/treasury/transactions\"));const invoicesResponse=await axios.get(\"\".concat(API,\"/invoices\"));const expensesResponse=await axios.get(\"\".concat(API,\"/expenses\"));const balances=balancesResponse.data;const manualTransactions=transactionsResponse.data;const invoices=invoicesResponse.data;const expenses=expensesResponse.data;// Update accounts with balances and transactions\nconst updatedAccounts=accounts.map(account=>{let transactions=[];// Add invoice transactions\ninvoices.forEach(invoice=>{const paymentMethodMap={'Ù†Ù‚Ø¯ÙŠ':'cash','ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ Ù…Ø­Ù…Ø¯ Ø§Ù„ØµØ§ÙˆÙŠ':'vodafone_elsawy','ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ ÙˆØ§Ø¦Ù„ Ù…Ø­Ù…Ø¯':'vodafone_wael','Ø¢Ø¬Ù„':'deferred','Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ':'instapay','ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ':'yad_elsawy'};if(paymentMethodMap[invoice.payment_method]===account.id){transactions.push({id:\"inv-\".concat(invoice.id),type:'income',amount:invoice.total_amount||0,description:\"\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0631\\u0642\\u0645 \".concat(invoice.invoice_number),date:invoice.date,reference:\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644: \".concat(invoice.customer_name)});}});// Add expense transactions (only from cash account)\nif(account.id==='cash'){expenses.forEach(expense=>{transactions.push({id:\"exp-\".concat(expense.id),type:'expense',amount:expense.amount||0,description:expense.description||'Ù…ØµØ±ÙˆÙ',date:expense.date,category:expense.category});});}// Add manual transactions\nmanualTransactions.filter(transaction=>transaction.account_id===account.id).forEach(transaction=>{transactions.push({id:transaction.id,type:transaction.transaction_type,amount:transaction.amount,description:transaction.description,date:transaction.date,reference:transaction.reference});});return _objectSpread(_objectSpread({},account),{},{balance:balances[account.id]||0,transactions:transactions.sort((a,b)=>new Date(b.date)-new Date(a.date))});});setAccounts(updatedAccounts);}catch(error){console.error('Error fetching treasury data:',error);}};const handleTransfer=async()=>{if(!transferData.amount||parseFloat(transferData.amount)<=0){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');return;}const amount=parseFloat(transferData.amount);const fromAccount=accounts.find(acc=>acc.id===transferData.from);if(fromAccount.balance<amount){alert('Ø§Ù„Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙŠ');return;}try{await axios.post(\"\".concat(API,\"/treasury/transfer\"),{from_account:transferData.from,to_account:transferData.to,amount:amount,notes:transferData.notes});// Refresh data\nfetchTreasuryData();setShowTransferModal(false);setTransferData({from:'cash',to:'vodafone_elsawy',amount:'',notes:''});alert('ØªÙ… Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error processing transfer:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­ÙˆÙŠÙ„');}};const handleManualTransaction=async()=>{if(!manualTransaction.amount||parseFloat(manualTransaction.amount)<=0){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');return;}const amount=parseFloat(manualTransaction.amount);try{await axios.post(\"\".concat(API,\"/treasury/transactions\"),{account_id:manualTransaction.account,transaction_type:manualTransaction.type,amount:amount,description:manualTransaction.description,reference:manualTransaction.notes||'Ø¥Ø¯Ø®Ø§Ù„ ÙŠØ¯ÙˆÙŠ'});// Refresh data\nfetchTreasuryData();setShowManualForm(false);setManualTransaction({account:'cash',type:'income',amount:'',description:'',notes:''});alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error processing manual transaction:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');}};const clearAccount=async accountId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØµÙÙŠØ± Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.'))return;const account=accounts.find(acc=>acc.id===accountId);if(!account||account.balance===0){alert('Ø§Ù„Ø­Ø³Ø§Ø¨ ÙØ§Ø±Øº Ø¨Ø§Ù„ÙØ¹Ù„ Ø£Ùˆ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');return;}try{// Create expense transaction to zero the account\nawait axios.post(\"\".concat(API,\"/treasury/transactions\"),{account_id:accountId,transaction_type:'expense',amount:account.balance,description:\"\\u062A\\u0635\\u0641\\u064A\\u0631 \\u062D\\u0633\\u0627\\u0628 \".concat(account.name),reference:'ØªØµÙÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ù…Ø¯ÙŠØ±'});// Refresh data\nfetchTreasuryData();alert(\"\\u062A\\u0645 \\u062A\\u0635\\u0641\\u064A\\u0631 \\u062D\\u0633\\u0627\\u0628 \".concat(account.name,\" \\u0628\\u0646\\u062C\\u0627\\u062D\"));}catch(error){console.error('Error clearing account:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµÙÙŠØ± Ø§Ù„Ø­Ø³Ø§Ø¨');}};// Treasury Reset Function - Only for Elsawy\nconst resetTreasury=async()=>{if((user===null||user===void 0?void 0:user.username)!=='Elsawy'){alert('ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨ØªÙ†ÙÙŠØ° Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');return;}// Triple confirmation for this critical operation\nconst firstConfirm=confirm('âš ï¸ ØªØ­Ø°ÙŠØ±: Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø³ÙŠØ­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø²ÙŠÙ†Ø© ÙˆÙ„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!\\nÙ‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ');if(!firstConfirm)return;const secondConfirm=confirm('âš ï¸ ØªØ£ÙƒÙŠØ¯ Ø«Ø§Ù†ÙŠ: Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª ÙˆØ§Ù„Ø£Ø±ØµØ¯Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹!\\nØ§ÙƒØªØ¨ \"Ù†Ø¹Ù…\" Ù„Ù„ØªØ£ÙƒÙŠØ¯:');if(!secondConfirm)return;const finalConfirm=prompt('âš ï¸ Ù„Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØŒ Ø§ÙƒØªØ¨ Ø¨Ø§Ù„Ø¶Ø¨Ø·: \"Ø§Ø­Ø°Ù ÙƒÙ„ Ø´ÙŠØ¡\"');if(finalConfirm!=='Ø§Ø­Ø°Ù ÙƒÙ„ Ø´ÙŠØ¡'){alert('ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');return;}try{const response=await axios.post(\"\".concat(API,\"/treasury/reset\"),null,{params:{username:user.username}});alert(\"\\u2705 \\u062A\\u0645 \\u0645\\u0633\\u062D \\u062C\\u0645\\u064A\\u0639 \\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629 \\u0628\\u0646\\u062C\\u0627\\u062D!\\n\\u062A\\u0645 \\u062D\\u0630\\u0641 \".concat(response.data.deleted_treasury_transactions,\" \\u0645\\u0639\\u0627\\u0645\\u0644\\u0629\"));// Refresh data\nfetchTreasuryData();}catch(error){var _error$response15,_error$response15$dat;console.error('Error resetting treasury:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ù…Ø³Ø­ Ø§Ù„Ø®Ø²ÙŠÙ†Ø©: '+(((_error$response15=error.response)===null||_error$response15===void 0?void 0:(_error$response15$dat=_error$response15.data)===null||_error$response15$dat===void 0?void 0:_error$response15$dat.detail)||error.message));}};const selectedAccountData=accounts.find(acc=>acc.id===selectedAccount);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-4\",children:\"\\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629 - \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0623\\u0645\\u0648\\u0627\\u0644\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowTransferModal(true),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u062A\\u062D\\u0648\\u064A\\u0644 \\u0623\\u0645\\u0648\\u0627\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowManualForm(true),className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0639\\u0645\\u0644\\u064A\\u0629 \\u064A\\u062F\\u0648\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchTreasuryData,className:\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),(user===null||user===void 0?void 0:user.username)==='Elsawy'&&/*#__PURE__*/_jsx(\"button\",{onClick:resetTreasury,className:\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 font-bold border-2 border-red-800\",children:\"\\u26A0\\uFE0F \\u0645\\u0633\\u062D \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629 \\u0628\\u0627\\u0644\\u0643\\u0627\\u0645\\u0644\"}),(user===null||user===void 0?void 0:user.username)==='Elsawy'&&selectedAccount==='yad_elsawy'&&(selectedAccountData===null||selectedAccountData===void 0?void 0:selectedAccountData.balance)>0&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>clearAccount(selectedAccount),className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062A\\u0635\\u0641\\u064A\\u0631 \\u062D\\u0633\\u0627\\u0628 \\u064A\\u062F \\u0627\\u0644\\u0635\\u0627\\u0648\\u064A\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-6\",children:accounts.map(account=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 rounded-lg shadow cursor-pointer transition-colors \".concat(selectedAccount===account.id?'bg-blue-100 border-2 border-blue-500':'bg-white hover:bg-gray-50'),onClick:()=>setSelectedAccount(account.id),children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-800 mb-2\",children:account.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold \".concat(account.balance>=0?'text-green-600':'text-red-600'),children:[\"\\u062C.\\u0645 \",account.balance.toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:[account.transactions.length,\" \\u0639\\u0645\\u0644\\u064A\\u0629\"]})]},account.id))}),selectedAccountData&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold mb-4\",children:[\"\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644 \\u062D\\u0633\\u0627\\u0628: \",selectedAccountData.name]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"\\u0627\\u0644\\u0628\\u062D\\u062B \\u0641\\u064A \\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0627\\u062A...\",className:\"w-full p-3 border border-gray-300 rounded-lg\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0646\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0648\\u0635\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0631\\u062C\\u0639\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:selectedAccountData.transactions.filter(transaction=>transaction.description.toLowerCase().includes(searchTerm.toLowerCase())||transaction.reference&&transaction.reference.toLowerCase().includes(searchTerm.toLowerCase())||transaction.category&&transaction.category.toLowerCase().includes(searchTerm.toLowerCase())).map((transaction,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(transaction.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-xs \".concat(transaction.type==='income'?'bg-green-100 text-green-800':transaction.type==='expense'?'bg-red-100 text-red-800':transaction.type==='transfer_in'?'bg-blue-100 text-blue-800':'bg-orange-100 text-orange-800'),children:transaction.type==='income'?'Ø¯Ø®Ù„':transaction.type==='expense'?'Ù…ØµØ±ÙˆÙ':transaction.type==='transfer_in'?'ØªØ­ÙˆÙŠÙ„ ÙˆØ§Ø±Ø¯':'ØªØ­ÙˆÙŠÙ„ ØµØ§Ø¯Ø±'})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.description}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:transaction.type==='income'||transaction.type==='transfer_in'?'text-green-600 font-semibold':'text-red-600 font-semibold',children:[transaction.type==='income'||transaction.type==='transfer_in'?'+':'-',\"\\u062C.\\u0645 \",transaction.amount.toFixed(2)]})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-sm text-gray-600\",children:transaction.reference||transaction.category||'-'})]},transaction.id||index))})]}),selectedAccountData.transactions.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0639\\u0645\\u0644\\u064A\\u0627\\u062A \\u0644\\u0647\\u0630\\u0627 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\"})]})]}),showTransferModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u062A\\u062D\\u0648\\u064A\\u0644 \\u0623\\u0645\\u0648\\u0627\\u0644 \\u0628\\u064A\\u0646 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0646 \\u062D\\u0633\\u0627\\u0628\"}),/*#__PURE__*/_jsx(\"select\",{value:transferData.from,onChange:e=>setTransferData(_objectSpread(_objectSpread({},transferData),{},{from:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:accounts.map(account=>/*#__PURE__*/_jsxs(\"option\",{value:account.id,children:[account.name,\" (\\u062C.\\u0645 \",account.balance.toFixed(2),\")\"]},account.id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0625\\u0644\\u0649 \\u062D\\u0633\\u0627\\u0628\"}),/*#__PURE__*/_jsx(\"select\",{value:transferData.to,onChange:e=>setTransferData(_objectSpread(_objectSpread({},transferData),{},{to:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:accounts.filter(acc=>acc.id!==transferData.from).map(account=>/*#__PURE__*/_jsx(\"option\",{value:account.id,children:account.name},account.id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:transferData.amount,onChange:e=>setTransferData(_objectSpread(_objectSpread({},transferData),{},{amount:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"0.00\",min:\"0\",step:\"0.01\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:transferData.notes,onChange:e=>setTransferData(_objectSpread(_objectSpread({},transferData),{},{notes:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0625\\u0636\\u0627\\u0641\\u064A\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleTransfer,className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u062A\\u0623\\u0643\\u064A\\u062F \\u0627\\u0644\\u062A\\u062D\\u0648\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowTransferModal(false),className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]})}),showManualForm&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0639\\u0645\\u0644\\u064A\\u0629 \\u064A\\u062F\\u0648\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\"}),/*#__PURE__*/_jsx(\"select\",{value:manualTransaction.account,onChange:e=>setManualTransaction(_objectSpread(_objectSpread({},manualTransaction),{},{account:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:accounts.map(account=>/*#__PURE__*/_jsx(\"option\",{value:account.id,children:account.name},account.id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"select\",{value:manualTransaction.type,onChange:e=>setManualTransaction(_objectSpread(_objectSpread({},manualTransaction),{},{type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"income\",children:\"\\u062F\\u062E\\u0644\"}),/*#__PURE__*/_jsx(\"option\",{value:\"expense\",children:\"\\u0645\\u0635\\u0631\\u0648\\u0641\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:manualTransaction.amount,onChange:e=>setManualTransaction(_objectSpread(_objectSpread({},manualTransaction),{},{amount:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"0.00\",min:\"0\",step:\"0.01\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0648\\u0635\\u0641\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:manualTransaction.description,onChange:e=>setManualTransaction(_objectSpread(_objectSpread({},manualTransaction),{},{description:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0648\\u0635\\u0641 \\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:manualTransaction.notes,onChange:e=>setManualTransaction(_objectSpread(_objectSpread({},manualTransaction),{},{notes:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0625\\u0636\\u0627\\u0641\\u064A\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleManualTransaction,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowManualForm(false),className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]})})]});};// Users Management Component  \nconst Users=()=>{const[users,setUsers]=useState([]);const[newUser,setNewUser]=useState({username:'',password:'',role:'user'});const[editingUser,setEditingUser]=useState(null);const[editForm,setEditForm]=useState({username:'',password:'',role:'user'});const[companyInfo,setCompanyInfo]=useState({name:'Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„',address:'Ø§Ù„Ø­Ø±ÙÙŠØ§Ù† Ø´Ø§Ø±Ø¹ Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª',phone:'01020630677'});const[editingCompany,setEditingCompany]=useState(false);const[selectedUserPermissions,setSelectedUserPermissions]=useState(null);const allPermissions=[{key:'dashboard',label:'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…'},{key:'sales',label:'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª'},{key:'inventory',label:'Ø§Ù„Ù…Ø®Ø²ÙˆÙ†'},{key:'deferred',label:'Ø§Ù„Ø¢Ø¬Ù„'},{key:'expenses',label:'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª'},{key:'revenue',label:'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª'},{key:'treasury',label:'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©'},{key:'invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ±'},{key:'work-orders',label:'Ø£Ù…Ø± Ø´ØºÙ„'},{key:'pricing',label:'Ø§Ù„ØªØ³Ø¹ÙŠØ±'},{key:'users',label:'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†'}];useEffect(()=>{fetchUsers();},[]);const fetchUsers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/users\"));// Check if default users exist in database\nconst dbUsers=response.data||[];const hasElsawy=dbUsers.some(user=>user.username==='Elsawy');const hasRoot=dbUsers.some(user=>user.username==='Root');// Create default users if they don't exist\nif(!hasElsawy){await axios.post(\"\".concat(API,\"/users\"),{username:'Elsawy',password:'100100',role:'admin',permissions:allPermissions.map(p=>p.key)});}if(!hasRoot){await axios.post(\"\".concat(API,\"/users\"),{username:'Root',password:'master',role:'user',permissions:['dashboard','sales','inventory','deferred','expenses','treasury','work-orders']});}// Fetch users again if we created default users\nif(!hasElsawy||!hasRoot){const updatedResponse=await axios.get(\"\".concat(API,\"/users\"));setUsers(updatedResponse.data||[]);}else{setUsers(dbUsers);}}catch(error){console.error('Error fetching users:',error);// Fall back to empty array for now\nsetUsers([]);}};const addUser=async()=>{if(!newUser.username||!newUser.password){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');return;}try{// Check if username already exists\nif(users.some(user=>user.username===newUser.username)){alert('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„');return;}// Default permissions based on role\nconst defaultPermissions=newUser.role==='admin'?allPermissions.map(p=>p.key):['dashboard','sales','inventory','deferred','expenses','treasury','work-orders','pricing'];// Let backend generate ID and created_at\nconst user={username:newUser.username,password:newUser.password,role:newUser.role,permissions:defaultPermissions};await axios.post(\"\".concat(API,\"/users\"),user);fetchUsers();setNewUser({username:'',password:'',role:'user'});alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response16,_error$response16$dat;console.error('Error adding user:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: '+(((_error$response16=error.response)===null||_error$response16===void 0?void 0:(_error$response16$dat=_error$response16.data)===null||_error$response16$dat===void 0?void 0:_error$response16$dat.detail)||error.message));}};const startEdit=user=>{setEditingUser(user.id);setEditForm({username:user.username,password:'',role:user.role});};const cancelEdit=()=>{setEditingUser(null);setEditForm({username:'',password:'',role:'user'});};const saveEdit=async()=>{if(!editForm.username){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');return;}// Check if username already exists (excluding current user)\nif(users.some(user=>user.username===editForm.username&&user.id!==editingUser)){alert('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„');return;}try{// Find current user to preserve their permissions\nconst currentUser=users.find(u=>u.id===editingUser);if(!currentUser){alert('Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');return;}// Update user in backend - preserve existing permissions\nconst updatedUser={id:editingUser,username:editForm.username,role:editForm.role,password:editForm.password||currentUser.password,permissions:currentUser.permissions||[],created_at:currentUser.created_at};await axios.put(\"\".concat(API,\"/users/\").concat(editingUser),updatedUser);// Fetch updated data from database instead of updating local state\nfetchUsers();setEditingUser(null);setEditForm({username:'',password:'',role:'user'});alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response17,_error$response17$dat;console.error('Error updating user:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: '+(((_error$response17=error.response)===null||_error$response17===void 0?void 0:(_error$response17$dat=_error$response17.data)===null||_error$response17$dat===void 0?void 0:_error$response17$dat.detail)||error.message));}};const deleteUser=async userId=>{if(userId==='1'||userId==='2'){alert('Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠÙŠÙ†');return;}if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ'))return;try{await axios.delete(\"\".concat(API,\"/users/\").concat(userId));fetchUsers();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error deleting user:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');}};const resetPassword=async userId=>{const newPassword=prompt('Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:');if(newPassword&&newPassword.trim()){try{// Find the user to get their current data\nconst user=users.find(u=>u.id===userId);if(!user){alert('Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');return;}// Update password in backend\nconst updatedUser={id:user.id,username:user.username,password:newPassword.trim(),role:user.role,permissions:user.permissions||[],created_at:user.created_at};await axios.put(\"\".concat(API,\"/users/\").concat(userId),updatedUser);alert('ØªÙ… ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response18,_error$response18$dat;console.error('Error updating password:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: '+(((_error$response18=error.response)===null||_error$response18===void 0?void 0:(_error$response18$dat=_error$response18.data)===null||_error$response18$dat===void 0?void 0:_error$response18$dat.detail)||error.message));}}};const openPermissions=user=>{setSelectedUserPermissions(_objectSpread(_objectSpread({},user),{},{tempPermissions:[...(user.permissions||[])]}));};const togglePermission=permissionKey=>{setSelectedUserPermissions(prev=>{const newPermissions=prev.tempPermissions.includes(permissionKey)?prev.tempPermissions.filter(p=>p!==permissionKey):[...prev.tempPermissions,permissionKey];return _objectSpread(_objectSpread({},prev),{},{tempPermissions:newPermissions});});};const savePermissions=async()=>{try{// Update permissions in backend\nconst updatedUser={id:selectedUserPermissions.id,username:selectedUserPermissions.username,password:selectedUserPermissions.password,role:selectedUserPermissions.role,permissions:selectedUserPermissions.tempPermissions,created_at:selectedUserPermissions.created_at};await axios.put(\"\".concat(API,\"/users/\").concat(selectedUserPermissions.id),updatedUser);// Fetch updated data from database\nfetchUsers();setSelectedUserPermissions(null);alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response19,_error$response19$dat;console.error('Error updating permissions:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª: '+(((_error$response19=error.response)===null||_error$response19===void 0?void 0:(_error$response19$dat=_error$response19.data)===null||_error$response19$dat===void 0?void 0:_error$response19$dat.detail)||error.message));}};const saveCompanyInfo=()=>{setEditingCompany(false);alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ© Ø¨Ù†Ø¬Ø§Ø­');};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-4\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\\u064A\\u0646\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u0634\\u0631\\u0643\\u0629\"}),editingCompany?/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0634\\u0631\\u0643\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:companyInfo.name,onChange:e=>setCompanyInfo(_objectSpread(_objectSpread({},companyInfo),{},{name:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:companyInfo.address,onChange:e=>setCompanyInfo(_objectSpread(_objectSpread({},companyInfo),{},{address:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u062A\\u0644\\u064A\\u0641\\u0648\\u0646\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:companyInfo.phone,onChange:e=>setCompanyInfo(_objectSpread(_objectSpread({},companyInfo),{},{phone:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0634\\u0631\\u0643\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"p-2 bg-gray-100 rounded\",children:companyInfo.name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"p\",{className:\"p-2 bg-gray-100 rounded\",children:companyInfo.address})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u062A\\u0644\\u064A\\u0641\\u0648\\u0646\"}),/*#__PURE__*/_jsx(\"p\",{className:\"p-2 bg-gray-100 rounded\",children:companyInfo.phone})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:editingCompany?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:saveCompanyInfo,className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u062D\\u0641\\u0638\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingCompany(false),className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingCompany(true),className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644 \\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u0634\\u0631\\u0643\\u0629\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0633\\u062A\\u062E\\u062F\\u0645 \\u062C\\u062F\\u064A\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newUser.username,onChange:e=>setNewUser(_objectSpread(_objectSpread({},newUser),{},{username:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:newUser.password,onChange:e=>setNewUser(_objectSpread(_objectSpread({},newUser),{},{password:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0635\\u0644\\u0627\\u062D\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"select\",{value:newUser.role,onChange:e=>setNewUser(_objectSpread(_objectSpread({},newUser),{},{role:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645 \\u0639\\u0627\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"\\u0645\\u062F\\u064A\\u0631\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addUser,className:\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\\u064A\\u0646\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0635\\u0644\\u0627\\u062D\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0635\\u0644\\u0627\\u062D\\u064A\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u062A\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u0625\\u0646\\u0634\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>{var _user$permissions;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:editingUser===user.id?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.username,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{username:e.target.value})),className:\"w-full p-1 border border-gray-300 rounded\"}):/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:user.username})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:editingUser===user.id?/*#__PURE__*/_jsxs(\"select\",{value:editForm.role,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{role:e.target.value})),className:\"w-full p-1 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645 \\u0639\\u0627\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"\\u0645\\u062F\\u064A\\u0631\"})]}):/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm \".concat(user.role==='admin'?'bg-red-100 text-red-800':'bg-blue-100 text-blue-800'),children:user.role==='admin'?'Ù…Ø¯ÙŠØ±':'Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯ÙŠ'})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"bg-gray-100 px-2 py-1 rounded text-sm\",children:[((_user$permissions=user.permissions)===null||_user$permissions===void 0?void 0:_user$permissions.length)||0,\" \\u0635\\u0644\\u0627\\u062D\\u064A\\u0629\"]})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(user.created_at).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm bg-green-100 text-green-800\",children:\"\\u0646\\u0634\\u0637\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-2 space-x-reverse flex-wrap\",children:editingUser===user.id?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:saveEdit,className:\"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600 mb-1\",children:\"\\u062D\\u0641\\u0638\"}),/*#__PURE__*/_jsx(\"button\",{onClick:cancelEdit,className:\"bg-gray-500 text-white px-2 py-1 rounded text-sm hover:bg-gray-600 mb-1\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>startEdit(user),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600 mb-1\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>openPermissions(user),className:\"bg-purple-500 text-white px-2 py-1 rounded text-sm hover:bg-purple-600 mb-1\",children:\"\\u0627\\u0644\\u0635\\u0644\\u0627\\u062D\\u064A\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>resetPassword(user.id),className:\"bg-yellow-500 text-white px-2 py-1 rounded text-sm hover:bg-yellow-600 mb-1\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"}),user.id!=='1'&&user.id!=='2'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteUser(user.id),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600 mb-1\",children:\"\\u062D\\u0630\\u0641\"})]})})})]},user.id);})})]})})]}),selectedUserPermissions&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 max-w-md w-full mx-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-bold mb-4\",children:[\"\\u0635\\u0644\\u0627\\u062D\\u064A\\u0627\\u062A \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645: \",selectedUserPermissions.username]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2 mb-4\",children:allPermissions.map(permission=>/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedUserPermissions.tempPermissions.includes(permission.key),onChange:()=>togglePermission(permission.key),className:\"ml-2\"}),/*#__PURE__*/_jsx(\"span\",{children:permission.label})]},permission.key))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:savePermissions,className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u062D\\u0641\\u0638\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedUserPermissions(null),className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]})})]});};// Material Pricing Component\nconst Pricing=()=>{const[materialPricings,setMaterialPricings]=useState([]);const[editingPricing,setEditingPricing]=useState(null);const[newPricing,setNewPricing]=useState({material_type:'NBR',inner_diameter:'',outer_diameter:'',price_per_mm:'',manufacturing_cost_client1:'',manufacturing_cost_client2:'',manufacturing_cost_client3:'',notes:''});const materialTypes=['NBR','BUR','BT','VT','BOOM'];useEffect(()=>{fetchMaterialPricings();},[]);const fetchMaterialPricings=async()=>{try{const response=await axios.get(\"\".concat(API,\"/material-pricing\"));setMaterialPricings(response.data);}catch(error){console.error('Error fetching material pricings:',error);}};const addMaterialPricing=async()=>{if(!newPricing.inner_diameter||!newPricing.outer_diameter||!newPricing.price_per_mm){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{if(editingPricing){// Update existing pricing\nawait axios.put(\"\".concat(API,\"/material-pricing/\").concat(editingPricing),_objectSpread(_objectSpread({},newPricing),{},{inner_diameter:parseFloat(newPricing.inner_diameter),outer_diameter:parseFloat(newPricing.outer_diameter),price_per_mm:parseFloat(newPricing.price_per_mm),manufacturing_cost_client1:parseFloat(newPricing.manufacturing_cost_client1||0),manufacturing_cost_client2:parseFloat(newPricing.manufacturing_cost_client2||0),manufacturing_cost_client3:parseFloat(newPricing.manufacturing_cost_client3||0)}));alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');setEditingPricing(null);}else{// Add new pricing\nawait axios.post(\"\".concat(API,\"/material-pricing\"),_objectSpread(_objectSpread({},newPricing),{},{inner_diameter:parseFloat(newPricing.inner_diameter),outer_diameter:parseFloat(newPricing.outer_diameter),price_per_mm:parseFloat(newPricing.price_per_mm),manufacturing_cost_client1:parseFloat(newPricing.manufacturing_cost_client1||0),manufacturing_cost_client2:parseFloat(newPricing.manufacturing_cost_client2||0),manufacturing_cost_client3:parseFloat(newPricing.manufacturing_cost_client3||0)}));alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');}fetchMaterialPricings();setNewPricing({material_type:'NBR',inner_diameter:'',outer_diameter:'',price_per_mm:'',manufacturing_cost_client1:'',manufacturing_cost_client2:'',manufacturing_cost_client3:'',notes:''});}catch(error){var _error$response20,_error$response20$dat;console.error('Error saving material pricing:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©: '+(((_error$response20=error.response)===null||_error$response20===void 0?void 0:(_error$response20$dat=_error$response20.data)===null||_error$response20$dat===void 0?void 0:_error$response20$dat.detail)||error.message));}};const editMaterialPricing=pricing=>{setNewPricing({material_type:pricing.material_type,inner_diameter:pricing.inner_diameter.toString(),outer_diameter:pricing.outer_diameter.toString(),price_per_mm:pricing.price_per_mm.toString(),manufacturing_cost_client1:pricing.manufacturing_cost_client1.toString(),manufacturing_cost_client2:pricing.manufacturing_cost_client2.toString(),manufacturing_cost_client3:pricing.manufacturing_cost_client3.toString(),notes:pricing.notes||''});setEditingPricing(pricing.id);};const deleteMaterialPricing=async pricingId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©ØŸ')){return;}try{await axios.delete(\"\".concat(API,\"/material-pricing/\").concat(pricingId));fetchMaterialPricings();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response21,_error$response21$dat;console.error('Error deleting material pricing:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©: '+(((_error$response21=error.response)===null||_error$response21===void 0?void 0:(_error$response21$dat=_error$response21.data)===null||_error$response21$dat===void 0?void 0:_error$response21$dat.detail)||error.message));}};const cancelEdit=()=>{setEditingPricing(null);setNewPricing({material_type:'NBR',inner_diameter:'',outer_diameter:'',price_per_mm:'',manufacturing_cost_client1:'',manufacturing_cost_client2:'',manufacturing_cost_client3:'',notes:''});};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-6\",children:\"\\uD83D\\uDCB2 \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u062A\\u0633\\u0639\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:editingPricing?'ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©':'Ø¥Ø¶Ø§ÙØ© ØªØ³Ø¹ÙŠØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©'}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"select\",{value:newPricing.material_type,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{material_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:materialTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A (\\u0645\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:newPricing.inner_diameter,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{inner_diameter:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A (\\u0645\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:newPricing.outer_diameter,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{outer_diameter:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0645\\u0644\\u064A (\\u062C.\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newPricing.price_per_mm,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{price_per_mm:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0645\\u0644\\u064A \\u0627\\u0644\\u0648\\u0627\\u062D\\u062F\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639 - \\u0639\\u0645\\u064A\\u0644 1 (\\u062C.\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newPricing.manufacturing_cost_client1,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{manufacturing_cost_client1:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639 \\u0644\\u0644\\u0639\\u0645\\u064A\\u0644 1\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639 - \\u0639\\u0645\\u064A\\u0644 2 (\\u062C.\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newPricing.manufacturing_cost_client2,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{manufacturing_cost_client2:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639 \\u0644\\u0644\\u0639\\u0645\\u064A\\u0644 2\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639 - \\u0639\\u0645\\u064A\\u0644 3 (\\u062C.\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newPricing.manufacturing_cost_client3,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{manufacturing_cost_client3:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639 \\u0644\\u0644\\u0639\\u0645\\u064A\\u0644 3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2 lg:col-span-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"textarea\",{value:newPricing.notes,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{notes:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",rows:\"2\",placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0625\\u0636\\u0627\\u0641\\u064A\\u0629...\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4 space-x-reverse mt-4\",children:[editingPricing&&/*#__PURE__*/_jsx(\"button\",{onClick:cancelEdit,className:\"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"button\",{onClick:addMaterialPricing,className:\"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600\",children:editingPricing?'ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©':'Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:\"\\u0642\\u0627\\u0626\\u0645\\u0629 \\u0627\\u0644\\u062A\\u0633\\u0639\\u064A\\u0631\\u0627\\u062A\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0627\\u0644\\u0623\\u0628\\u0639\\u0627\\u062F (\\u062F\\u0627\\u062E\\u0644\\u064A\\xD7\\u062E\\u0627\\u0631\\u062C\\u064A)\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0645\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0639\\u0645\\u064A\\u0644 1\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0639\\u0645\\u064A\\u0644 2\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0639\\u0645\\u064A\\u0644 3\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:[materialPricings.map((pricing,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:index%2===0?'bg-white':'bg-gray-50',children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",children:pricing.material_type}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:[pricing.inner_diameter,\"\\xD7\",pricing.outer_diameter,\" \\u0645\\u0645\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:[pricing.price_per_mm.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:[pricing.manufacturing_cost_client1.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:[pricing.manufacturing_cost_client2.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:[pricing.manufacturing_cost_client3.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:pricing.notes||'-'}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editMaterialPricing(pricing),className:\"text-blue-600 hover:text-blue-900 ml-2\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteMaterialPricing(pricing.id),className:\"text-red-600 hover:text-red-900\",children:\"\\u062D\\u0630\\u0641\"})]})]},pricing.id)),materialPricings.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"8\",className:\"px-6 py-4 text-center text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u062A\\u0633\\u0639\\u064A\\u0631\\u0627\\u062A \\u0645\\u0636\\u0627\\u0641\\u0629\"})})]})]})})]})]});};// Main App Component\nconst App=()=>{const[currentPage,setCurrentPage]=useState('sales');// Default to sales instead of dashboard\nconst{user}=useAuth();if(!user)return/*#__PURE__*/_jsx(Login,{});const renderPage=()=>{switch(currentPage){case'dashboard':// Only Elsawy can access dashboard\nreturn(user===null||user===void 0?void 0:user.username)==='Elsawy'?/*#__PURE__*/_jsx(Dashboard,{}):/*#__PURE__*/_jsx(Sales,{});case'sales':return/*#__PURE__*/_jsx(Sales,{});case'inventory':return/*#__PURE__*/_jsx(Inventory,{});case'stock':return/*#__PURE__*/_jsx(Stock,{});case'local':return/*#__PURE__*/_jsx(Local,{});case'deferred':return/*#__PURE__*/_jsx(Deferred,{});case'expenses':return/*#__PURE__*/_jsx(Expenses,{});case'revenue':return/*#__PURE__*/_jsx(Revenue,{});case'treasury':return/*#__PURE__*/_jsx(Treasury,{});case'invoices':return/*#__PURE__*/_jsx(Invoices,{});case'work-orders':return/*#__PURE__*/_jsx(WorkOrders,{});case'pricing':return/*#__PURE__*/_jsx(Pricing,{});case'users':return/*#__PURE__*/_jsx(Users,{});default:return/*#__PURE__*/_jsx(Sales,{});// Default to sales instead of dashboard\n}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen bg-gray-50\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(Navigation,{currentPage:currentPage,onPageChange:setCurrentPage}),/*#__PURE__*/_jsx(\"main\",{className:\"flex-1 overflow-y-auto bg-gradient-to-br from-gray-50 to-blue-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:renderPage()})})]});};// Root App with AuthProvider\nconst AppWithAuth=()=>/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(App,{})});export default AppWithAuth;","map":{"version":3,"names":["React","useState","useEffect","createContext","useContext","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","API","concat","AuthContext","useAuth","context","Error","AuthProvider","_ref","children","user","setUser","isLoading","setIsLoading","savedUser","localStorage","getItem","JSON","parse","login","username","password","response","post","params","data","success","setItem","stringify","error","console","logout","removeItem","className","Provider","value","Login","setUsername","setPassword","setError","handleSubmit","e","preventDefault","dir","src","alt","onSubmit","type","onChange","target","placeholder","required","Navigation","_ref2","currentPage","onPageChange","elsawyPages","key","label","icon","adminPages","userPages","pages","role","onClick","map","page","Inventory","inventoryItems","setInventoryItems","inventoryTransactions","setInventoryTransactions","lowStockItems","setLowStockItems","currentView","setCurrentView","editingItem","setEditingItem","newItem","setNewItem","material_type","inner_diameter","outer_diameter","available_pieces","min_stock_level","notes","newTransaction","setNewTransaction","transaction_type","pieces_change","reason","searchTerm","setSearchTerm","materialTypes","fetchInventoryItems","get","fetchInventoryTransactions","fetchLowStockItems","addInventoryItem","alert","put","id","_objectSpread","parseFloat","parseInt","_error$response","_error$response$data","detail","message","addInventoryTransaction","transactionData","Math","abs","_error$response2","_error$response2$data","filteredItems","filter","item","_item$notes","toLowerCase","includes","toString","sort","a","b","materialPriority","aPriority","bPriority","filteredTransactions","transaction","_transaction$notes","Date","date","length","confirm","delete","step","toLocaleDateString","remaining_pieces","max","responseType","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","toISOString","split","body","appendChild","click","remove","accept","file","files","formData","FormData","append","headers","imported_count","errors","warn","Local","suppliers","setSuppliers","localProducts","setLocalProducts","supplierTransactions","setSupplierTransactions","newSupplier","setNewSupplier","name","phone","address","newProduct","setNewProduct","supplier_id","purchase_price","selling_price","current_stock","amount","description","product_name","quantity","unit_price","payment_method","selectedSupplier","setSelectedSupplier","paymentAmount","setPaymentAmount","paymentMethod","setPaymentMethod","fetchSuppliers","fetchLocalProducts","fetchSupplierTransactions","addSupplier","trim","_error$response3","_error$response3$data","editSupplier","supplier","deleteSupplier","supplierId","_error$response4","_error$response4$data","addLocalProduct","_error$response5","_error$response5$data","editLocalProduct","product","deleteLocalProduct","productId","_error$response6","_error$response6$data","paySupplier","total_purchases","toFixed","total_paid","balance","title","supplier_name","total_sold","s","Dashboard","stats","setStats","total_sales","total_expenses","net_profit","total_unpaid","invoice_count","customer_count","fetchStats","clearAllData","printReport","reportType","currentDate","printContent","printWindow","open","write","close","print","Sales","customers","setCustomers","newCustomer","setNewCustomer","selectedCustomer","setSelectedCustomer","supervisorName","setSupervisorName","invoiceTitle","setInvoiceTitle","currentItem","setCurrentItem","seal_type","height","product_type","measurements","setMeasurements","inner_diameter_mm","inner_diameter_inch","outer_diameter_mm","outer_diameter_inch","height_mm","height_inch","wall_height_mm","wall_height_inch","localProduct","setLocalProduct","product_size","items","setItems","discount","setDiscount","discountType","setDiscountType","compatibilityResults","setCompatibilityResults","selectedMaterial","setSelectedMaterial","measurementUnit","setMeasurementUnit","wallHeight","setWallHeight","clientType","setClientType","mmToInch","mm","inchToMm","inch","handleMeasurementChange","field","unit","newMeasurements","mmValue","sealTypes","fetchCustomers","calculateAutomaticPrice","material","client_type","log","checkCompatibility","innerDiameter","outerDiameter","isNaN","addItem","hasInnerDiameter","hasOuterDiameter","hasHeight","wallHeightValue","total_price","wall_height","display_measurements","material_used","unit_code","material_details","is_finished_product","product_type_name","local_product_details","editItem","index","_item$inner_diameter","_item$outer_diameter","_item$height","_item$unit_price","_item$inner_diameter2","_item$outer_diameter2","_item$height2","_item$wall_height","measurement_unit","_item$unit_price2","newItems","_","i","deleteItem","isCreatingInvoice","setIsCreatingInvoice","createInvoice","customerId","customerName","customerResponse","customer","find","c","subtotal","reduce","sum","discountAmount","totalAfterDiscount","invoiceData","customer_id","customer_name","invoice_title","supervisor_name","discount_type","discount_value","total_after_discount","encodeURIComponent","printInvoice","_error$response7","_error$response7$data","invoice","invoice_number","customer_address","join","Array","from","total_amount","clearAllInvoices","startsWith","compatible_materials","low_stock","pricing","price_per_mm","mm_cost","manufacturing_cost","pieces_count","warning","compatible_products","original_inner_diameter","original_outer_diameter","original_height","original_wall_height","min","style","display","disabled","Stock","rawMaterials","setRawMaterials","finishedProducts","setFinishedProducts","newRawMaterial","setNewRawMaterial","cost_per_mm","newFinishedProduct","setNewFinishedProduct","filteredRawMaterials","filteredFinishedProducts","fetchRawMaterials","fetchFinishedProducts","addRawMaterial","rawMaterial","_error$response8","_error$response8$data","clearAllRawMaterials","deleteRawMaterial","materialId","editRawMaterial","handleFileImport","event","_error$response9","_error$response9$data","handleFileExport","removeChild","revokeObjectURL","addFinishedProduct","finishedProduct","editFinishedProduct","deleteFinishedProduct","Deferred","_selectedInvoice$rema","unpaidInvoices","setUnpaidInvoices","paymentNotes","setPaymentNotes","selectedInvoice","setSelectedInvoice","fetchUnpaidInvoices","invoices","remaining_amount","status","getCustomerName","makePayment","invoice_id","_invoice$total_amount","_invoice$paid_amount","_invoice$remaining_am","paid_amount","inv","Expenses","expenses","setExpenses","newExpense","setNewExpense","category","expenseCategories","fetchExpenses","addExpense","deleteExpense","expenseId","getTotalExpenses","expense","getExpensesByCategory","byCategory","forEach","cat","exp","clearAllExpenses","Object","entries","_ref3","Revenue","_revenueData$total_re","_revenueData$total_ex","_revenueData$material","_revenueData$profit","_revenueData$total_re2","_revenueData$material2","_revenueData$profit2","revenueData","setRevenueData","total_revenue","material_cost","profit","period","setPeriod","fetchRevenueData","Invoices","setInvoices","filterStatus","setFilterStatus","editingInvoice","setEditingInvoice","editForm","setEditForm","fetchInvoices","_error$response10","_error$response10$dat","deleteInvoice","invoiceId","startEditInvoice","cancelEdit","saveInvoiceEdit","updatedInvoice","_error$response11","_error$response12","_error$response12$dat","updateInvoiceStatus","newStatus","filteredInvoices","matchesStatus","matchesSearch","_invoice$subtotal","_invoice$total_amount2","_ref4","rows","_item$local_product_d","_item$local_product_d2","WorkOrders","workOrders","setWorkOrders","selectedInvoices","setSelectedInvoices","newWorkOrder","setNewWorkOrder","priority","showAddToExisting","setShowAddToExisting","selectedWorkOrderId","setSelectedWorkOrderId","selectedInvoiceForAdd","setSelectedInvoiceForAdd","fetchWorkOrders","toggleInvoiceSelection","prev","createWorkOrderFromMultipleInvoices","selectedInvoicesData","cleanInvoices","cleanInv","_id","workOrderData","total_items","_inv$items","_error$response13","_error$response13$dat","addInvoiceToExistingWorkOrder","_error$response14","_error$response14$dat","getInvoiceDetails","getAvailableInvoices","getAvailableInvoicesForAdd","_selectedWorkOrder$in","selectedWorkOrder","wo","usedInvoiceIds","printWorkOrder","workOrder","_workOrder$invoices","workOrderInvoices","totalAmount","totalItems","_inv$items2","slice","created_at","is_daily","_invoice$total_amount3","_invoice$items","_invoice$items2","clearAllWorkOrders","deleteWorkOrder","workOrderId","_workOrder$invoices2","_invoice$total_amount4","_invoice$total_amount5","_invoice$items3","checked","_inv$items3","_workOrder$total_amou","_invoice$total_amount6","_invoice$items4","_invoice$items5","itemIndex","Treasury","accounts","setAccounts","transactions","selectedAccount","setSelectedAccount","showTransferModal","setShowTransferModal","transferData","setTransferData","to","manualTransaction","setManualTransaction","account","showManualForm","setShowManualForm","fetchTreasuryData","balancesResponse","transactionsResponse","invoicesResponse","expensesResponse","balances","manualTransactions","updatedAccounts","paymentMethodMap","push","reference","account_id","handleTransfer","fromAccount","acc","from_account","to_account","handleManualTransaction","clearAccount","accountId","resetTreasury","firstConfirm","secondConfirm","finalConfirm","prompt","deleted_treasury_transactions","_error$response15","_error$response15$dat","selectedAccountData","Users","users","setUsers","newUser","setNewUser","editingUser","setEditingUser","companyInfo","setCompanyInfo","editingCompany","setEditingCompany","selectedUserPermissions","setSelectedUserPermissions","allPermissions","fetchUsers","dbUsers","hasElsawy","some","hasRoot","permissions","p","updatedResponse","addUser","defaultPermissions","_error$response16","_error$response16$dat","startEdit","saveEdit","currentUser","u","updatedUser","_error$response17","_error$response17$dat","deleteUser","userId","resetPassword","newPassword","_error$response18","_error$response18$dat","openPermissions","tempPermissions","togglePermission","permissionKey","newPermissions","savePermissions","_error$response19","_error$response19$dat","saveCompanyInfo","_user$permissions","permission","Pricing","materialPricings","setMaterialPricings","editingPricing","setEditingPricing","newPricing","setNewPricing","manufacturing_cost_client1","manufacturing_cost_client2","manufacturing_cost_client3","fetchMaterialPricings","addMaterialPricing","_error$response20","_error$response20$dat","editMaterialPricing","deleteMaterialPricing","pricingId","_error$response21","_error$response21$dat","colSpan","App","setCurrentPage","renderPage","AppWithAuth"],"sources":["/app/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, createContext, useContext } from 'react';\nimport './App.css';\nimport axios from 'axios';\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nconst API = `${BACKEND_URL}/api`;\n\n// Auth Context\nconst AuthContext = createContext();\n\nconst useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\nconst AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const savedUser = localStorage.getItem('user');\n    if (savedUser) {\n      setUser(JSON.parse(savedUser));\n    }\n    setIsLoading(false);\n  }, []);\n\n  const login = async (username, password) => {\n    try {\n      const response = await axios.post(`${API}/auth/login`, null, {\n        params: { username, password }\n      });\n      \n      if (response.data.success) {\n        setUser(response.data.user);\n        localStorage.setItem('user', JSON.stringify(response.data.user));\n        return true;\n      }\n      return false;\n    } catch (error) {\n      console.error('Login error:', error);\n      return false;\n    }\n  };\n\n  const logout = () => {\n    setUser(null);\n    localStorage.removeItem('user');\n  };\n\n  if (isLoading) {\n    return <div className=\"flex items-center justify-center min-h-screen\">\n      <div className=\"text-xl\">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>\n    </div>;\n  }\n\n  return (\n    <AuthContext.Provider value={{ user, login, logout }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\n// Login Component\nconst Login = () => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const { login } = useAuth();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    \n    const success = await login(username, password);\n    if (!success) {\n      setError('Ø®Ø·Ø£ ÙÙŠ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4\" dir=\"rtl\">\n      <div className=\"max-w-md w-full\">\n        {/* Login Card */}\n        <div className=\"bg-white rounded-2xl shadow-2xl p-8 border border-blue-100\">\n          {/* Header */}\n          <div className=\"text-center mb-8\">\n            <div className=\"mb-4\">\n              <img \n                src=\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\" \n                alt=\"Master Seal Logo\" \n                className=\"h-16 w-16 mx-auto rounded-full shadow-lg border-4 border-blue-100\"\n              />\n            </div>\n            <h1 className=\"text-3xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent\">Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„</h1>\n            <p className=\"text-gray-500 mt-2\">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„</p>\n            <div className=\"w-16 h-1 bg-gradient-to-r from-blue-400 to-blue-600 mx-auto mt-3 rounded-full\"></div>\n          </div>\n          \n          {/* Login Form */}\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <div className=\"space-y-2\">\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                ğŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\n              </label>\n              <input\n                type=\"text\"\n                value={username}\n                onChange={(e) => setUsername(e.target.value)}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-3 focus:ring-blue-200 focus:border-blue-400 transition-all duration-200 bg-gray-50 hover:bg-white\"\n                placeholder=\"Ø§Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\"\n                required\n              />\n            </div>\n            \n            <div className=\"space-y-2\">\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                ğŸ”’ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\n              </label>\n              <input\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-3 focus:ring-blue-200 focus:border-blue-400 transition-all duration-200 bg-gray-50 hover:bg-white\"\n                placeholder=\"Ø§Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\"\n                required\n              />\n            </div>\n            \n            {error && (\n              <div className=\"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-xl text-sm text-center animate-pulse\">\n                âš ï¸ {error}\n              </div>\n            )}\n            \n            <button\n              type=\"submit\"\n              className=\"w-full bg-gradient-to-r from-blue-600 to-blue-800 text-white py-3 px-6 rounded-xl hover:from-blue-700 hover:to-blue-900 focus:outline-none focus:ring-3 focus:ring-blue-300 transition-all duration-200 font-semibold shadow-lg hover:shadow-xl transform hover:scale-105\"\n            >\n              ğŸš€ Ø¯Ø®ÙˆÙ„\n            </button>\n          </form>\n          \n          {/* Footer */}\n          <div className=\"text-center mt-8 pt-6 border-t border-gray-100\">\n            <p className=\"text-xs text-gray-400\">Ø§Ù„Ø­Ø±ÙÙŠÙŠÙ† - Ø§Ù„Ø³Ù„Ø§Ù… - Ø£Ù…Ø§Ù… Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª</p>\n            <p className=\"text-xs text-gray-500 mt-1 font-medium\">ğŸ“ 01020630677</p>\n          </div>\n        </div>\n        \n        {/* Additional Info Card */}\n        <div className=\"mt-6 bg-white/60 backdrop-blur-sm rounded-xl p-4 text-center border border-blue-100/50\">\n          <p className=\"text-sm text-gray-600\">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…ØªÙƒØ§Ù…Ù„ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙˆØ§Ù„Ù…Ø®Ø²ÙˆÙ† ÙˆØ§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Navigation Component\nconst Navigation = ({ currentPage, onPageChange }) => {\n  const { user, logout } = useAuth();\n  \n  // Dashboard is only for Elsawy\n  const elsawyPages = [\n    { key: 'dashboard', label: 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…', icon: 'ğŸ“Š' },\n    { key: 'sales', label: 'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª', icon: 'ğŸ’°' },\n    { key: 'inventory', label: 'Ø§Ù„Ø¬Ø±Ø¯', icon: 'ğŸ“¦' },\n    { key: 'stock', label: 'Ø§Ù„Ù…Ø®Ø²ÙˆÙ†', icon: 'ğŸª' },\n    { key: 'local', label: 'Ù…Ø­Ù„ÙŠ', icon: 'ğŸ­' },\n    { key: 'deferred', label: 'Ø§Ù„Ø¢Ø¬Ù„', icon: 'â³' },\n    { key: 'expenses', label: 'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª', icon: 'ğŸ’¸' },\n    { key: 'revenue', label: 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª', icon: 'ğŸ“ˆ' },\n    { key: 'treasury', label: 'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©', icon: 'ğŸ¦' },\n    { key: 'invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ±', icon: 'ğŸ§¾' },\n    { key: 'work-orders', label: 'Ø£Ù…Ø± Ø´ØºÙ„', icon: 'âš™ï¸' },\n    { key: 'pricing', label: 'Ø§Ù„ØªØ³Ø¹ÙŠØ±', icon: 'ğŸ’²' },\n    { key: 'users', label: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†', icon: 'ğŸ‘¥' }\n  ];\n  \n  const adminPages = [\n    { key: 'sales', label: 'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª', icon: 'ğŸ’°' },\n    { key: 'inventory', label: 'Ø§Ù„Ø¬Ø±Ø¯', icon: 'ğŸ“¦' },\n    { key: 'stock', label: 'Ø§Ù„Ù…Ø®Ø²ÙˆÙ†', icon: 'ğŸª' },\n    { key: 'local', label: 'Ù…Ø­Ù„ÙŠ', icon: 'ğŸ­' },\n    { key: 'deferred', label: 'Ø§Ù„Ø¢Ø¬Ù„', icon: 'â³' },\n    { key: 'expenses', label: 'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª', icon: 'ğŸ’¸' },\n    { key: 'revenue', label: 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª', icon: 'ğŸ“ˆ' },\n    { key: 'treasury', label: 'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©', icon: 'ğŸ¦' },\n    { key: 'invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ±', icon: 'ğŸ§¾' },\n    { key: 'work-orders', label: 'Ø£Ù…Ø± Ø´ØºÙ„', icon: 'âš™ï¸' },\n    { key: 'pricing', label: 'Ø§Ù„ØªØ³Ø¹ÙŠØ±', icon: 'ğŸ’²' },\n    { key: 'users', label: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†', icon: 'ğŸ‘¥' }\n  ];\n  \n  const userPages = [\n    { key: 'sales', label: 'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª', icon: 'ğŸ’°' },\n    { key: 'inventory', label: 'Ø§Ù„Ø¬Ø±Ø¯', icon: 'ğŸ“¦' },\n    { key: 'stock', label: 'Ø§Ù„Ù…Ø®Ø²ÙˆÙ†', icon: 'ğŸª' },\n    { key: 'local', label: 'Ù…Ø­Ù„ÙŠ', icon: 'ğŸ­' },\n    { key: 'deferred', label: 'Ø§Ù„Ø¢Ø¬Ù„', icon: 'â³' },\n    { key: 'expenses', label: 'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª', icon: 'ğŸ’¸' },\n    { key: 'treasury', label: 'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©', icon: 'ğŸ¦' },\n    { key: 'invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ±', icon: 'ğŸ§¾' },\n    { key: 'work-orders', label: 'Ø£Ù…Ø± Ø´ØºÙ„', icon: 'âš™ï¸' },\n    { key: 'pricing', label: 'Ø§Ù„ØªØ³Ø¹ÙŠØ±', icon: 'ğŸ’²' }\n  ];\n  \n  // Only Elsawy gets dashboard access\n  const pages = user?.username === 'Elsawy' ? elsawyPages : \n               user?.role === 'admin' ? adminPages : userPages;\n\n  return (\n    <div className=\"w-80 bg-gradient-to-b from-blue-900 via-blue-800 to-blue-900 text-white shadow-2xl\">\n      {/* Header */}\n      <div className=\"p-6 border-b border-blue-700\">\n        <div className=\"flex items-center space-x-3 space-x-reverse\">\n          <img \n            src=\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\" \n            alt=\"Master Seal Logo\" \n            className=\"h-12 w-12 rounded-lg shadow-lg\"\n          />\n          <div>\n            <h1 className=\"text-xl font-bold text-white\">Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„</h1>\n            <p className=\"text-xs text-blue-200\">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…ØªÙƒØ§Ù…Ù„</p>\n          </div>\n        </div>\n      </div>\n\n      {/* User Info */}\n      <div className=\"p-4 bg-blue-800 border-b border-blue-700\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <p className=\"text-sm font-medium\">Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ø§Ù‹</p>\n            <p className=\"text-lg font-bold text-blue-200\">{user?.username}</p>\n          </div>\n          <button\n            onClick={logout}\n            className=\"bg-red-500 hover:bg-red-600 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 shadow-lg hover:shadow-xl\"\n          >\n            Ø®Ø±ÙˆØ¬\n          </button>\n        </div>\n      </div>\n      \n      {/* Navigation Menu */}\n      <nav className=\"flex-1 p-4 space-y-2\">\n        {pages.map(page => (\n          <button\n            key={page.key}\n            onClick={() => onPageChange(page.key)}\n            className={`w-full flex items-center space-x-3 space-x-reverse p-4 rounded-xl text-right transition-all duration-200 group ${\n              currentPage === page.key \n                ? 'bg-white text-blue-900 shadow-lg transform scale-105' \n                : 'hover:bg-blue-700 hover:transform hover:translate-x-2'\n            }`}\n          >\n            <span className=\"text-2xl\">{page.icon}</span>\n            <span className=\"font-medium\">{page.label}</span>\n            {currentPage === page.key && (\n              <div className=\"mr-auto\">\n                <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-pulse\"></div>\n              </div>\n            )}\n          </button>\n        ))}\n      </nav>\n\n      {/* Footer */}\n      <div className=\"p-4 border-t border-blue-700 text-center\">\n        <p className=\"text-xs text-blue-300\">Ø§Ù„Ø­Ø±ÙÙŠÙŠÙ† - Ø§Ù„Ø³Ù„Ø§Ù… - Ø£Ù…Ø§Ù… Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª</p>\n        <p className=\"text-xs text-blue-400 mt-1\">01020630677</p>\n      </div>\n    </div>\n  );\n};\n\n// Inventory Management Component\nconst Inventory = () => {\n  const [inventoryItems, setInventoryItems] = useState([]);\n  const [inventoryTransactions, setInventoryTransactions] = useState([]);\n  const [lowStockItems, setLowStockItems] = useState([]);\n  const [currentView, setCurrentView] = useState('items'); // items, transactions, low-stock, add-item\n  const [editingItem, setEditingItem] = useState(null); // Ù„Ù„ØªØ¹Ø¯ÙŠÙ„\n  const [newItem, setNewItem] = useState({\n    material_type: 'NBR',\n    inner_diameter: '',\n    outer_diameter: '',\n    available_pieces: '',  // ØªØºÙŠÙŠØ± Ù…Ù† available_height Ø¥Ù„Ù‰ available_pieces\n    min_stock_level: 2,    // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ 2 Ù‚Ø·Ø¹Ø©\n    notes: ''\n  });\n  const [newTransaction, setNewTransaction] = useState({\n    material_type: 'NBR',\n    inner_diameter: '',\n    outer_diameter: '',\n    transaction_type: 'in',\n    pieces_change: '',     // ØªØºÙŠÙŠØ± Ù…Ù† height_change Ø¥Ù„Ù‰ pieces_change\n    reason: '',\n    notes: ''\n  });\n  const [searchTerm, setSearchTerm] = useState('');\n\n  const materialTypes = ['NBR', 'BUR', 'BT', 'VT', 'BOOM'];\n\n  // Fetch functions\n  const fetchInventoryItems = async () => {\n    try {\n      const response = await axios.get(`${API}/inventory`);\n      setInventoryItems(response.data || []);\n    } catch (error) {\n      console.error('Error fetching inventory items:', error);\n    }\n  };\n\n  const fetchInventoryTransactions = async () => {\n    try {\n      const response = await axios.get(`${API}/inventory-transactions`);\n      setInventoryTransactions(response.data || []);\n    } catch (error) {\n      console.error('Error fetching inventory transactions:', error);\n    }\n  };\n\n  const fetchLowStockItems = async () => {\n    try {\n      const response = await axios.get(`${API}/inventory/low-stock`);\n      setLowStockItems(response.data || []);\n    } catch (error) {\n      console.error('Error fetching low stock items:', error);\n    }\n  };\n\n  useEffect(() => {\n    fetchInventoryItems();\n    fetchInventoryTransactions();\n    fetchLowStockItems();\n  }, []);\n\n  // Add or Update inventory item\n  const addInventoryItem = async () => {\n    if (!newItem.material_type || !newItem.inner_diameter || \n        !newItem.outer_diameter || !newItem.available_pieces) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      if (editingItem) {\n        // Update existing item\n        await axios.put(`${API}/inventory/${editingItem.id}`, {\n          ...newItem,\n          inner_diameter: parseFloat(newItem.inner_diameter),\n          outer_diameter: parseFloat(newItem.outer_diameter),\n          available_pieces: parseInt(newItem.available_pieces),\n          min_stock_level: parseInt(newItem.min_stock_level || 2)\n        });\n        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n        setEditingItem(null);\n      } else {\n        // Add new item\n        await axios.post(`${API}/inventory`, {\n          ...newItem,\n          inner_diameter: parseFloat(newItem.inner_diameter),\n          outer_diameter: parseFloat(newItem.outer_diameter),\n          available_pieces: parseInt(newItem.available_pieces),\n          min_stock_level: parseInt(newItem.min_stock_level || 2)\n        });\n        alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n      }\n      \n      fetchInventoryItems();\n      fetchLowStockItems();\n      setCurrentView('items');\n      setNewItem({\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        available_pieces: '',\n        min_stock_level: 2,\n        notes: ''\n      });\n    } catch (error) {\n      console.error('Error saving inventory item:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  // Add inventory transaction\n  const addInventoryTransaction = async () => {\n    if (!newTransaction.material_type || !newTransaction.inner_diameter || \n        !newTransaction.outer_diameter || !newTransaction.pieces_change || !newTransaction.reason) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      const transactionData = {\n        ...newTransaction,\n        inner_diameter: parseFloat(newTransaction.inner_diameter),\n        outer_diameter: parseFloat(newTransaction.outer_diameter),\n        pieces_change: newTransaction.transaction_type === 'out' \n          ? -Math.abs(parseInt(newTransaction.pieces_change))\n          : Math.abs(parseInt(newTransaction.pieces_change))\n      };\n\n      await axios.post(`${API}/inventory-transactions`, transactionData);\n      \n      fetchInventoryItems();\n      fetchInventoryTransactions();\n      fetchLowStockItems();\n      setNewTransaction({\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        transaction_type: 'in',\n        pieces_change: '',\n        reason: '',\n        notes: ''\n      });\n      alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ù…Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error adding inventory transaction:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ù…Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ø¬Ø±Ø¯: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  // Filter and sort items based on search\n  const filteredItems = inventoryItems.filter(item =>\n    item.material_type.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    item.inner_diameter.toString().includes(searchTerm.toLowerCase()) ||\n    item.outer_diameter.toString().includes(searchTerm.toLowerCase()) ||\n    item.notes?.toLowerCase().includes(searchTerm.toLowerCase())\n  ).sort((a, b) => {\n    // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\n    const materialPriority = { 'BUR': 1, 'NBR': 2, 'BT': 3, 'BOOM': 4, 'VT': 5 };\n    const aPriority = materialPriority[a.material_type] || 6;\n    const bPriority = materialPriority[b.material_type] || 6;\n    \n    if (aPriority !== bPriority) {\n      return aPriority - bPriority;\n    }\n    // Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)\n    if (a.inner_diameter !== b.inner_diameter) {\n      return a.inner_diameter - b.inner_diameter;\n    }\n    return a.outer_diameter - b.outer_diameter;\n  });\n\n  const filteredTransactions = inventoryTransactions.filter(transaction =>\n    transaction.reason.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    transaction.material_type.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    transaction.notes?.toLowerCase().includes(searchTerm.toLowerCase())\n  ).sort((a, b) => {\n    // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\n    const materialPriority = { 'BUR': 1, 'NBR': 2, 'BT': 3, 'BOOM': 4, 'VT': 5 };\n    const aPriority = materialPriority[a.material_type] || 6;\n    const bPriority = materialPriority[b.material_type] || 6;\n    \n    if (aPriority !== bPriority) {\n      return aPriority - bPriority;\n    }\n    // Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ) Ø«Ù… Ø§Ù„ØªØ§Ø±ÙŠØ®\n    if (a.inner_diameter !== b.inner_diameter) {\n      return a.inner_diameter - b.inner_diameter;\n    }\n    if (a.outer_diameter !== b.outer_diameter) {\n      return a.outer_diameter - b.outer_diameter;\n    }\n    return new Date(b.date) - new Date(a.date); // Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹\n  });\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-3xl font-bold\">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ø±Ø¯</h1>\n        <div className=\"flex space-x-4 space-x-reverse\">\n          <button\n            onClick={() => setCurrentView('items')}\n            className={`px-4 py-2 rounded ${currentView === 'items' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¬Ø±Ø¯\n          </button>\n          <button\n            onClick={() => setCurrentView('transactions')}\n            className={`px-4 py-2 rounded ${currentView === 'transactions' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ø¬Ø±Ø¯\n          </button>\n          <button\n            onClick={() => setCurrentView('low-stock')}\n            className={`px-4 py-2 rounded ${currentView === 'low-stock' ? 'bg-red-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ù…Ø®Ø²ÙˆÙ† Ù…Ù†Ø®ÙØ¶ ({lowStockItems.length})\n          </button>\n          <button\n            onClick={() => setCurrentView('excel')}\n            className={`px-4 py-2 rounded ${currentView === 'excel' ? 'bg-green-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥ÙƒØ³Ù„\n          </button>\n          <button\n            onClick={() => setCurrentView('add-item')}\n            className={`px-4 py-2 rounded ${currentView === 'add-item' ? 'bg-green-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø¬Ø¯ÙŠØ¯\n          </button>\n        </div>\n      </div>\n\n      {/* Search Bar */}\n      <div className=\"mb-4\">\n        <input\n          type=\"text\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          placeholder=\"Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¬Ø±Ø¯...\"\n          className=\"w-full p-3 border border-gray-300 rounded-lg\"\n        />\n      </div>\n\n      {/* Inventory Items View */}\n      {currentView === 'items' && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¬Ø±Ø¯</h3>\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full border-collapse border border-gray-300\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø§Ø¯Ø©</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</th>\n                  <th className=\"border border-gray-300 p-2\">Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹ Ø§Ù„Ù…ØªØ§Ø­Ø©</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø§Ù„Ø©</th>\n                  <th className=\"border border-gray-300 p-2\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n                </tr>\n              </thead>\n              <tbody>\n                {filteredItems.map(item => (\n                  <tr key={item.id}>\n                    <td className=\"border border-gray-300 p-2 font-semibold\">{item.material_type}</td>\n                    <td className=\"border border-gray-300 p-2\">{item.inner_diameter}</td>\n                    <td className=\"border border-gray-300 p-2\">{item.outer_diameter}</td>\n                    <td className={`border border-gray-300 p-2 font-semibold ${\n                      item.available_pieces <= item.min_stock_level ? 'text-red-600' : 'text-green-600'\n                    }`}>\n                      {item.available_pieces} Ù‚Ø·Ø¹Ø©\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">{item.min_stock_level} Ù‚Ø·Ø¹Ø©</td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <span className={`px-2 py-1 rounded text-sm ${\n                        item.available_pieces <= item.min_stock_level ? 'bg-red-100 text-red-800' : 'bg-green-100 text-green-800'\n                      }`}>\n                        {item.available_pieces <= item.min_stock_level ? 'Ù…Ù†Ø®ÙØ¶' : 'Ø·Ø¨ÙŠØ¹ÙŠ'}\n                      </span>\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">{item.notes || '-'}</td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <div className=\"flex space-x-2 space-x-reverse\">\n                        <button\n                          onClick={() => {\n                            setEditingItem(item);\n                            setNewItem({\n                              material_type: item.material_type,\n                              inner_diameter: item.inner_diameter,\n                              outer_diameter: item.outer_diameter,\n                              available_pieces: item.available_pieces,\n                              min_stock_level: item.min_stock_level,\n                              notes: item.notes || ''\n                            });\n                            setCurrentView('add-item');\n                          }}\n                          className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                        >\n                          ØªØ¹Ø¯ÙŠÙ„\n                        </button>\n                        <button\n                          onClick={async () => {\n                            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ØµØ±ØŸ')) {\n                              try {\n                                await axios.delete(`${API}/inventory/${item.id}`);\n                                alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ù†ØµØ± Ø¨Ù†Ø¬Ø§Ø­');\n                                fetchInventoryItems();\n                              } catch (error) {\n                                console.error('Error deleting item:', error);\n                                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¹Ù†ØµØ±');\n                              }\n                            }\n                          }}\n                          className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                        >\n                          Ø­Ø°Ù\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {/* Transactions View */}\n      {currentView === 'transactions' && (\n        <div>\n          {/* Add Transaction Form */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø§Ù…Ù„Ø© Ø¬Ø±Ø¯</h3>\n            <div className=\"grid grid-cols-3 gap-4\">\n              <select\n                value={newTransaction.material_type}\n                onChange={(e) => setNewTransaction({...newTransaction, material_type: e.target.value})}\n                className=\"p-2 border border-gray-300 rounded\"\n              >\n                {materialTypes.map(type => (\n                  <option key={type} value={type}>{type}</option>\n                ))}\n              </select>\n              <input\n                type=\"number\"\n                value={newTransaction.inner_diameter}\n                onChange={(e) => setNewTransaction({...newTransaction, inner_diameter: e.target.value})}\n                placeholder=\"Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <input\n                type=\"number\"\n                value={newTransaction.outer_diameter}\n                onChange={(e) => setNewTransaction({...newTransaction, outer_diameter: e.target.value})}\n                placeholder=\"Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <select\n                value={newTransaction.transaction_type}\n                onChange={(e) => setNewTransaction({...newTransaction, transaction_type: e.target.value})}\n                className=\"p-2 border border-gray-300 rounded\"\n              >\n                <option value=\"in\">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…Ø®Ø²ÙˆÙ†</option>\n                <option value=\"out\">Ø®ØµÙ… Ù…Ù† Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</option>\n              </select>\n              <input\n                type=\"number\"\n                step=\"1\"\n                value={newTransaction.pieces_change}\n                onChange={(e) => setNewTransaction({...newTransaction, pieces_change: e.target.value})}\n                placeholder=\"Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <input\n                type=\"text\"\n                value={newTransaction.reason}\n                onChange={(e) => setNewTransaction({...newTransaction, reason: e.target.value})}\n                placeholder=\"Ø³Ø¨Ø¨ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            <div className=\"mt-4\">\n              <input\n                type=\"text\"\n                value={newTransaction.notes}\n                onChange={(e) => setNewTransaction({...newTransaction, notes: e.target.value})}\n                placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            <button\n              onClick={addInventoryTransaction}\n              className=\"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n            >\n              ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©\n            </button>\n          </div>\n\n          {/* Transactions List */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø³Ø¬Ù„ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ø¬Ø±Ø¯</h3>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full border-collapse border border-gray-300\">\n                <thead>\n                  <tr className=\"bg-gray-100\">\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                    <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø§Ø¯Ø©</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª</th>\n                    <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©</th>\n                    <th className=\"border border-gray-300 p-2\">Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø³Ø¨Ø¨</th>\n                    <th className=\"border border-gray-300 p-2\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {filteredTransactions.map(transaction => (\n                    <tr key={transaction.id}>\n                      <td className=\"border border-gray-300 p-2\">\n                        {new Date(transaction.date).toLocaleDateString('ar-EG')}\n                      </td>\n                      <td className=\"border border-gray-300 p-2\">{transaction.material_type}</td>\n                      <td className=\"border border-gray-300 p-2\">\n                        {transaction.inner_diameter} Ã— {transaction.outer_diameter}\n                      </td>\n                      <td className=\"border border-gray-300 p-2\">\n                        <span className={`px-2 py-1 rounded text-sm ${\n                          transaction.transaction_type === 'in' \n                            ? 'bg-green-100 text-green-800' \n                            : 'bg-red-100 text-red-800'\n                        }`}>\n                          {transaction.transaction_type === 'in' ? 'Ø¥Ø¶Ø§ÙØ©' : 'Ø®ØµÙ…'}\n                        </span>\n                      </td>\n                      <td className={`border border-gray-300 p-2 font-semibold ${\n                        transaction.pieces_change > 0 ? 'text-green-600' : 'text-red-600'\n                      }`}>\n                        {transaction.pieces_change > 0 ? '+' : ''}{transaction.pieces_change} Ù‚Ø·Ø¹Ø©\n                      </td>\n                      <td className=\"border border-gray-300 p-2 font-semibold\">\n                        {transaction.remaining_pieces} Ù‚Ø·Ø¹Ø©\n                      </td>\n                      <td className=\"border border-gray-300 p-2\">{transaction.reason}</td>\n                      <td className=\"border border-gray-300 p-2\">{transaction.notes || '-'}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Low Stock Items View */}\n      {currentView === 'low-stock' && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4 text-red-600\">\n            Ø¹Ù†Ø§ØµØ± Ø¨Ù…Ø®Ø²ÙˆÙ† Ù…Ù†Ø®ÙØ¶ ({lowStockItems.length})\n          </h3>\n          {lowStockItems.length === 0 ? (\n            <p className=\"text-green-600 text-center py-8\">\n              âœ… Ø¬Ù…ÙŠØ¹ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¬Ø±Ø¯ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ\n            </p>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full border-collapse border border-gray-300\">\n                <thead>\n                  <tr className=\"bg-red-50\">\n                    <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø§Ø¯Ø©</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰</th>\n                    <th className=\"border border-gray-300 p-2\">Ù†Ù‚Øµ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {lowStockItems.map(item => (\n                    <tr key={item.id} className=\"bg-red-50\">\n                      <td className=\"border border-gray-300 p-2 font-semibold\">{item.material_type}</td>\n                      <td className=\"border border-gray-300 p-2\">\n                        {item.inner_diameter} Ã— {item.outer_diameter}\n                      </td>\n                      <td className=\"border border-gray-300 p-2 font-semibold text-red-600\">\n                        {item.available_pieces} Ù‚Ø·Ø¹Ø©\n                      </td>\n                      <td className=\"border border-gray-300 p-2\">{item.min_stock_level} Ù‚Ø·Ø¹Ø©</td>\n                      <td className=\"border border-gray-300 p-2 font-semibold text-red-600\">\n                        {Math.max(0, item.min_stock_level - item.available_pieces)} Ù‚Ø·Ø¹Ø©\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Add/Edit Item View */}\n      {currentView === 'add-item' && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">\n            {editingItem ? 'ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯' : 'Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø¬Ø±Ø¯ Ø¬Ø¯ÙŠØ¯'}\n          </h3>\n          <div className=\"grid grid-cols-2 gap-4\">\n            <select\n              value={newItem.material_type}\n              onChange={(e) => setNewItem({...newItem, material_type: e.target.value})}\n              className=\"p-2 border border-gray-300 rounded\"\n            >\n              {materialTypes.map(type => (\n                <option key={type} value={type}>{type}</option>\n              ))}\n            </select>\n            <input\n              type=\"number\"\n              value={newItem.inner_diameter}\n              onChange={(e) => setNewItem({...newItem, inner_diameter: e.target.value})}\n              placeholder=\"Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ\"\n              className=\"p-2 border border-gray-300 rounded\"\n            />\n            <input\n              type=\"number\"\n              value={newItem.outer_diameter}\n              onChange={(e) => setNewItem({...newItem, outer_diameter: e.target.value})}\n              placeholder=\"Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ\"\n              className=\"p-2 border border-gray-300 rounded\"\n            />\n            <input\n              type=\"number\"\n              step=\"1\"\n              value={newItem.available_pieces}\n              onChange={(e) => setNewItem({...newItem, available_pieces: e.target.value})}\n              placeholder=\"Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹ Ø§Ù„Ù…ØªØ§Ø­Ø©\"\n              className=\"p-2 border border-gray-300 rounded\"\n            />\n            <input\n              type=\"number\"\n              value={newItem.min_stock_level}\n              onChange={(e) => setNewItem({...newItem, min_stock_level: e.target.value})}\n              placeholder=\"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ù…Ø®Ø²ÙˆÙ†\"\n              className=\"p-2 border border-gray-300 rounded\"\n            />\n            <input\n              type=\"text\"\n              value={newItem.notes}\n              onChange={(e) => setNewItem({...newItem, notes: e.target.value})}\n              placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n              className=\"p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          <button\n            onClick={addInventoryItem}\n            className=\"mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n          >\n            {editingItem ? 'ØªØ­Ø¯ÙŠØ« Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯' : 'Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯'}\n          </button>\n          {editingItem && (\n            <button\n              onClick={() => {\n                setEditingItem(null);\n                setNewItem({\n                  material_type: 'NBR',\n                  inner_diameter: '',\n                  outer_diameter: '',\n                  available_pieces: '',\n                  min_stock_level: 2,\n                  notes: ''\n                });\n                setCurrentView('items');\n              }}\n              className=\"mt-4 mr-2 bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n            >\n              Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„\n            </button>\n          )}\n        </div>\n      )}\n\n      {/* Excel Management View */}\n      {currentView === 'excel' && (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          {/* Inventory Excel Management */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¯Ø§Ø±Ø© Ù…Ù„ÙØ§Øª Ø§Ù„Ø¬Ø±Ø¯ - Excel</h3>\n            \n            {/* Export Inventory */}\n            <div className=\"mb-6\">\n              <h4 className=\"font-medium mb-2\">ØªØµØ¯ÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø±Ø¯</h4>\n              <button\n                onClick={async () => {\n                  try {\n                    const response = await axios.get(`${API}/excel/export/inventory`, {\n                      responseType: 'blob'\n                    });\n                    const url = window.URL.createObjectURL(new Blob([response.data]));\n                    const link = document.createElement('a');\n                    link.href = url;\n                    link.setAttribute('download', `inventory_export_${new Date().toISOString().split('T')[0]}.xlsx`);\n                    document.body.appendChild(link);\n                    link.click();\n                    link.remove();\n                    alert('ØªÙ… ØªØµØ¯ÙŠØ± Ù…Ù„Ù Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n                  } catch (error) {\n                    console.error('Error exporting inventory:', error);\n                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù');\n                  }\n                }}\n                className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n              >\n                ØªØµØ¯ÙŠØ± Ø¬Ø±Ø¯ Excel\n              </button>\n            </div>\n\n            {/* Import Inventory */}\n            <div>\n              <h4 className=\"font-medium mb-2\">Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø±Ø¯</h4>\n              <input\n                type=\"file\"\n                accept=\".xlsx,.xls\"\n                onChange={async (e) => {\n                  const file = e.target.files[0];\n                  if (!file) return;\n                  \n                  const formData = new FormData();\n                  formData.append('file', file);\n                  \n                  try {\n                    const response = await axios.post(`${API}/excel/import/inventory`, formData, {\n                      headers: { 'Content-Type': 'multipart/form-data' }\n                    });\n                    alert(`ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ ${response.data.imported_count} Ø¹Ù†ØµØ± Ø¨Ù†Ø¬Ø§Ø­`);\n                    if (response.data.errors.length > 0) {\n                      console.warn('Import errors:', response.data.errors);\n                    }\n                    fetchInventoryItems();\n                  } catch (error) {\n                    console.error('Error importing inventory:', error);\n                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù');\n                  }\n                  \n                  e.target.value = '';\n                }}\n                className=\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100\"\n              />\n              <p className=\"text-sm text-gray-600 mt-2\">\n                Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©: material_type, inner_diameter, outer_diameter, available_pieces\n              </p>\n            </div>\n          </div>\n\n          {/* Raw Materials Excel Management */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù… - Excel</h3>\n            \n            {/* Export Raw Materials */}\n            <div className=\"mb-6\">\n              <h4 className=\"font-medium mb-2\">ØªØµØ¯ÙŠØ± Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…</h4>\n              <button\n                onClick={async () => {\n                  try {\n                    const response = await axios.get(`${API}/excel/export/raw-materials`, {\n                      responseType: 'blob'\n                    });\n                    const url = window.URL.createObjectURL(new Blob([response.data]));\n                    const link = document.createElement('a');\n                    link.href = url;\n                    link.setAttribute('download', `raw_materials_export_${new Date().toISOString().split('T')[0]}.xlsx`);\n                    document.body.appendChild(link);\n                    link.click();\n                    link.remove();\n                    alert('ØªÙ… ØªØµØ¯ÙŠØ± Ù…Ù„Ù Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­');\n                  } catch (error) {\n                    console.error('Error exporting raw materials:', error);\n                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù');\n                  }\n                }}\n                className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n              >\n                ØªØµØ¯ÙŠØ± Ù…ÙˆØ§Ø¯ Ø®Ø§Ù… Excel\n              </button>\n            </div>\n\n            {/* Import Raw Materials */}\n            <div>\n              <h4 className=\"font-medium mb-2\">Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…</h4>\n              <input\n                type=\"file\"\n                accept=\".xlsx,.xls\"\n                onChange={async (e) => {\n                  const file = e.target.files[0];\n                  if (!file) return;\n                  \n                  const formData = new FormData();\n                  formData.append('file', file);\n                  \n                  try {\n                    const response = await axios.post(`${API}/excel/import/raw-materials`, formData, {\n                      headers: { 'Content-Type': 'multipart/form-data' }\n                    });\n                    alert(`ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ ${response.data.imported_count} Ù…Ø§Ø¯Ø© Ø®Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­`);\n                    if (response.data.errors.length > 0) {\n                      console.warn('Import errors:', response.data.errors);\n                    }\n                  } catch (error) {\n                    console.error('Error importing raw materials:', error);\n                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù');\n                  }\n                  \n                  e.target.value = '';\n                }}\n                className=\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100\"\n              />\n              <p className=\"text-sm text-gray-600 mt-2\">\n                Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©: material_type, inner_diameter, outer_diameter, height, pieces_count, unit_code, cost_per_mm\n              </p>\n            </div>\n          </div>\n\n          {/* Instructions */}\n          <div className=\"bg-yellow-50 p-6 rounded-lg shadow-md md:col-span-2\">\n            <h3 className=\"text-lg font-semibold mb-4\">ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¥ÙƒØ³Ù„</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <h4 className=\"font-medium mb-2\">ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:</h4>\n                <ul className=\"text-sm text-gray-700 list-disc list-inside space-y-1\">\n                  <li>ÙŠØªÙ… ØªØµØ¯ÙŠØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</li>\n                  <li>Ø§Ù„Ù…Ù„Ù ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ØªÙ†Ø³ÙŠÙ‚ Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ¹Ø¯ÙŠÙ„</li>\n                  <li>ÙŠÙ…ÙƒÙ† ÙØªØ­ Ø§Ù„Ù…Ù„Ù ÙÙŠ Excel Ø£Ùˆ Google Sheets</li>\n                </ul>\n              </div>\n              <div>\n                <h4 className=\"font-medium mb-2\">Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:</h4>\n                <ul className=\"text-sm text-gray-700 list-disc list-inside space-y-1\">\n                  <li>ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ù…Ù„Ù Ù…Ù† Ù†ÙˆØ¹ .xlsx Ø£Ùˆ .xls</li>\n                  <li>Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù…ÙˆØ¬ÙˆØ¯Ø©</li>\n                  <li>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© Ù„Ù† ØªØªØ£Ø«Ø± (ÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø£Ùˆ Ø§Ù„Ø¥Ø¶Ø§ÙØ©)</li>\n                  <li>Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯ Ù…Ø¹ Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø³ØªÙˆØ±Ø¯Ø©</li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Local Products Management Component\nconst Local = () => {\n  const [suppliers, setSuppliers] = useState([]);\n  const [localProducts, setLocalProducts] = useState([]);\n  const [supplierTransactions, setSupplierTransactions] = useState([]);\n  const [currentView, setCurrentView] = useState('suppliers'); // suppliers, products, transactions\n  const [newSupplier, setNewSupplier] = useState({ name: '', phone: '', address: '' });\n  const [newProduct, setNewProduct] = useState({ name: '', supplier_id: '', purchase_price: '', selling_price: '', current_stock: 0 });\n  const [newTransaction, setNewTransaction] = useState({ supplier_id: '', transaction_type: 'purchase', amount: '', description: '', product_name: '', quantity: '', unit_price: '', payment_method: 'cash' });\n  const [selectedSupplier, setSelectedSupplier] = useState('');\n  const [paymentAmount, setPaymentAmount] = useState('');\n  const [paymentMethod, setPaymentMethod] = useState('cash');\n\n  // Fetch data functions\n  const fetchSuppliers = async () => {\n    try {\n      const response = await axios.get(`${API}/suppliers`);\n      setSuppliers(response.data || []);\n    } catch (error) {\n      console.error('Error fetching suppliers:', error);\n    }\n  };\n\n  const fetchLocalProducts = async () => {\n    try {\n      const response = await axios.get(`${API}/local-products`);\n      setLocalProducts(response.data || []);\n    } catch (error) {\n      console.error('Error fetching local products:', error);\n    }\n  };\n\n  const fetchSupplierTransactions = async () => {\n    try {\n      const response = await axios.get(`${API}/supplier-transactions`);\n      setSupplierTransactions(response.data || []);\n    } catch (error) {\n      console.error('Error fetching supplier transactions:', error);\n    }\n  };\n\n  useEffect(() => {\n    fetchSuppliers();\n    fetchLocalProducts();\n    fetchSupplierTransactions();\n  }, []);\n\n  // Add supplier\n  const addSupplier = async () => {\n    if (!newSupplier.name.trim()) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯');\n      return;\n    }\n\n    try {\n      if (newSupplier.id) {\n        // Update existing supplier\n        await axios.put(`${API}/suppliers/${newSupplier.id}`, {\n          name: newSupplier.name,\n          phone: newSupplier.phone,\n          address: newSupplier.address\n        });\n        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n      } else {\n        // Add new supplier\n        await axios.post(`${API}/suppliers`, newSupplier);\n        alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n      }\n      \n      fetchSuppliers();\n      setNewSupplier({ name: '', phone: '', address: '' });\n    } catch (error) {\n      console.error('Error saving supplier:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…ÙˆØ±Ø¯: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const editSupplier = (supplier) => {\n    // Fill the form with supplier data for editing\n    setNewSupplier({\n      id: supplier.id,\n      name: supplier.name,\n      phone: supplier.phone || '',\n      address: supplier.address || ''\n    });\n  };\n\n  const deleteSupplier = async (supplierId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ±Ø¯ØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡.')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/suppliers/${supplierId}`);\n      fetchSuppliers();\n      fetchLocalProducts(); // Refresh products as they might be affected\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting supplier:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ±Ø¯: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  // Add local product\n  const addLocalProduct = async () => {\n    if (!newProduct.name.trim() || !newProduct.supplier_id || !newProduct.purchase_price || !newProduct.selling_price) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      if (newProduct.id) {\n        // Update existing product\n        await axios.put(`${API}/local-products/${newProduct.id}`, {\n          name: newProduct.name,\n          supplier_id: newProduct.supplier_id,\n          purchase_price: parseFloat(newProduct.purchase_price),\n          selling_price: parseFloat(newProduct.selling_price),\n          current_stock: parseInt(newProduct.current_stock || 0)\n        });\n        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­');\n      } else {\n        // Add new product\n        await axios.post(`${API}/local-products`, {\n          ...newProduct,\n          purchase_price: parseFloat(newProduct.purchase_price),\n          selling_price: parseFloat(newProduct.selling_price),\n          current_stock: parseInt(newProduct.current_stock || 0)\n        });\n        alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­');\n      }\n      \n      fetchLocalProducts();\n      setNewProduct({ name: '', supplier_id: '', purchase_price: '', selling_price: '', current_stock: 0 });\n    } catch (error) {\n      console.error('Error saving local product:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const editLocalProduct = (product) => {\n    // Fill the form with product data for editing\n    setNewProduct({\n      id: product.id,\n      name: product.name,\n      supplier_id: product.supplier_id,\n      purchase_price: product.purchase_price.toString(),\n      selling_price: product.selling_price.toString(),\n      current_stock: product.current_stock || 0\n    });\n  };\n\n  const deleteLocalProduct = async (productId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡.')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/local-products/${productId}`);\n      fetchLocalProducts();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting local product:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  // Pay supplier\n  const paySupplier = async () => {\n    if (!selectedSupplier || !paymentAmount) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙˆØ±Ø¯ ÙˆØ¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº');\n      return;\n    }\n\n    try {\n      await axios.post(`${API}/supplier-payment?supplier_id=${selectedSupplier}&amount=${paymentAmount}&payment_method=${paymentMethod}`);\n      fetchSuppliers();\n      fetchSupplierTransactions();\n      setSelectedSupplier('');\n      setPaymentAmount('');\n      alert('ØªÙ… Ø¯ÙØ¹ Ø§Ù„Ù…Ø¨Ù„Øº Ù„Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error paying supplier:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¯ÙØ¹ Ø§Ù„Ù…Ø¨Ù„Øº');\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-3xl font-bold\">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©</h1>\n        <div className=\"flex space-x-4 space-x-reverse\">\n          <button\n            onClick={() => setCurrentView('suppliers')}\n            className={`px-4 py-2 rounded ${currentView === 'suppliers' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†\n          </button>\n          <button\n            onClick={() => setCurrentView('products')}\n            className={`px-4 py-2 rounded ${currentView === 'products' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª\n          </button>\n          <button\n            onClick={() => setCurrentView('transactions')}\n            className={`px-4 py-2 rounded ${currentView === 'transactions' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª\n          </button>\n          <button\n            onClick={() => setCurrentView('payments')}\n            className={`px-4 py-2 rounded ${currentView === 'payments' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø³Ø¯Ø§Ø¯ Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†\n          </button>\n        </div>\n      </div>\n\n      {/* Suppliers View */}\n      {currentView === 'suppliers' && (\n        <div>\n          {/* Add New Supplier */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ±Ø¯ Ø¬Ø¯ÙŠØ¯</h3>\n            <div className=\"grid grid-cols-3 gap-4\">\n              <input\n                type=\"text\"\n                value={newSupplier.name}\n                onChange={(e) => setNewSupplier({...newSupplier, name: e.target.value})}\n                placeholder=\"Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <input\n                type=\"text\"\n                value={newSupplier.phone}\n                onChange={(e) => setNewSupplier({...newSupplier, phone: e.target.value})}\n                placeholder=\"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <input\n                type=\"text\"\n                value={newSupplier.address}\n                onChange={(e) => setNewSupplier({...newSupplier, address: e.target.value})}\n                placeholder=\"Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            <button\n              onClick={addSupplier}\n              className=\"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n            >\n              Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ±Ø¯\n            </button>\n          </div>\n\n          {/* Suppliers List */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</h3>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full border-collapse border border-gray-300\">\n                <thead>\n                  <tr className=\"bg-gray-100\">\n                    <th className=\"border border-gray-300 p-2\">Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‡Ø§ØªÙ</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>\n                    <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</th>\n                    <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯ÙÙˆØ¹</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ­Ù‚</th>\n                    <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {suppliers.map(supplier => (\n                    <tr key={supplier.id}>\n                      <td className=\"border border-gray-300 p-2 font-semibold\">{supplier.name}</td>\n                      <td className=\"border border-gray-300 p-2\">{supplier.phone || '-'}</td>\n                      <td className=\"border border-gray-300 p-2\">{supplier.address || '-'}</td>\n                      <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {(supplier.total_purchases || 0).toFixed(2)}</td>\n                      <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {(supplier.total_paid || 0).toFixed(2)}</td>\n                      <td className={`border border-gray-300 p-2 font-semibold ${(supplier.balance || 0) > 0 ? 'text-red-600' : 'text-green-600'}`}>\n                        Ø¬.Ù… {(supplier.balance || 0).toFixed(2)}\n                      </td>\n                      <td className=\"border border-gray-300 p-2\">\n                        <div className=\"flex space-x-2 space-x-reverse\">\n                          <button\n                            onClick={() => editSupplier(supplier)}\n                            className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                            title=\"ØªØ­Ø±ÙŠØ±\"\n                          >\n                            âœï¸\n                          </button>\n                          <button\n                            onClick={() => deleteSupplier(supplier.id)}\n                            className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                            title=\"Ø­Ø°Ù\"\n                          >\n                            ğŸ—‘ï¸\n                          </button>\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Products View */}\n      {currentView === 'products' && (\n        <div>\n          {/* Add New Product */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ù…Ø­Ù„ÙŠ Ø¬Ø¯ÙŠØ¯</h3>\n            <div className=\"grid grid-cols-2 gap-4\">\n              <input\n                type=\"text\"\n                value={newProduct.name}\n                onChange={(e) => setNewProduct({...newProduct, name: e.target.value})}\n                placeholder=\"Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <select\n                value={newProduct.supplier_id}\n                onChange={(e) => setNewProduct({...newProduct, supplier_id: e.target.value})}\n                className=\"p-2 border border-gray-300 rounded\"\n              >\n                <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ±Ø¯</option>\n                {suppliers.map(supplier => (\n                  <option key={supplier.id} value={supplier.id}>{supplier.name}</option>\n                ))}\n              </select>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                value={newProduct.purchase_price}\n                onChange={(e) => setNewProduct({...newProduct, purchase_price: e.target.value})}\n                placeholder=\"Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                value={newProduct.selling_price}\n                onChange={(e) => setNewProduct({...newProduct, selling_price: e.target.value})}\n                placeholder=\"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            <button\n              onClick={addLocalProduct}\n              className=\"mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n            >\n              Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬\n            </button>\n          </div>\n\n          {/* Products List */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©</h3>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full border-collapse border border-gray-300\">\n                <thead>\n                  <tr className=\"bg-gray-100\">\n                    <th className=\"border border-gray-300 p-2\">Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…ÙˆØ±Ø¯</th>\n                    <th className=\"border border-gray-300 p-2\">Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡</th>\n                    <th className=\"border border-gray-300 p-2\">Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ</th>\n                    <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ø§Ø¹</th>\n                    <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {localProducts.map(product => (\n                    <tr key={product.id}>\n                      <td className=\"border border-gray-300 p-2 font-semibold\">{product.name}</td>\n                      <td className=\"border border-gray-300 p-2\">{product.supplier_name}</td>\n                      <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {product.purchase_price.toFixed(2)}</td>\n                      <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {product.selling_price.toFixed(2)}</td>\n                      <td className=\"border border-gray-300 p-2\">{product.current_stock || 0}</td>\n                      <td className=\"border border-gray-300 p-2\">{product.total_sold || 0}</td>\n                      <td className=\"border border-gray-300 p-2\">\n                        <div className=\"flex space-x-2 space-x-reverse\">\n                          <button\n                            onClick={() => editLocalProduct(product)}\n                            className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                            title=\"ØªØ­Ø±ÙŠØ±\"\n                          >\n                            âœï¸\n                          </button>\n                          <button\n                            onClick={() => deleteLocalProduct(product.id)}\n                            className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                            title=\"Ø­Ø°Ù\"\n                          >\n                            ğŸ—‘ï¸\n                          </button>\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Transactions View */}\n      {currentView === 'transactions' && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</h3>\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full border-collapse border border-gray-300\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…ÙˆØ±Ø¯</th>\n                  <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø¨Ù„Øº</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙˆØµÙ</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ù†ØªØ¬</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙƒÙ…ÙŠØ©</th>\n                </tr>\n              </thead>\n              <tbody>\n                {supplierTransactions.map(transaction => (\n                  <tr key={transaction.id}>\n                    <td className=\"border border-gray-300 p-2\">\n                      {new Date(transaction.date).toLocaleDateString('ar-EG')}\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">{transaction.supplier_name}</td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <span className={`px-2 py-1 rounded text-sm ${\n                        transaction.transaction_type === 'purchase' \n                          ? 'bg-red-100 text-red-800' \n                          : 'bg-green-100 text-green-800'\n                      }`}>\n                        {transaction.transaction_type === 'purchase' ? 'Ø´Ø±Ø§Ø¡' : 'Ø¯ÙØ¹'}\n                      </span>\n                    </td>\n                    <td className={`border border-gray-300 p-2 font-semibold ${\n                      transaction.transaction_type === 'purchase' ? 'text-red-600' : 'text-green-600'\n                    }`}>\n                      Ø¬.Ù… {transaction.amount.toFixed(2)}\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">{transaction.description}</td>\n                    <td className=\"border border-gray-300 p-2\">{transaction.product_name || '-'}</td>\n                    <td className=\"border border-gray-300 p-2\">{transaction.quantity || '-'}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {/* Payments View */}\n      {currentView === 'payments' && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ø³Ø¯Ø§Ø¯ Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</h3>\n          <div className=\"grid grid-cols-3 gap-4 mb-6\">\n            <select\n              value={selectedSupplier}\n              onChange={(e) => setSelectedSupplier(e.target.value)}\n              className=\"p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ±Ø¯</option>\n              {suppliers.filter(s => (s.balance || 0) > 0).map(supplier => (\n                <option key={supplier.id} value={supplier.id}>\n                  {supplier.name} - Ù…Ø³ØªØ­Ù‚: Ø¬.Ù… {(supplier.balance || 0).toFixed(2)}\n                </option>\n              ))}\n            </select>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={paymentAmount}\n              onChange={(e) => setPaymentAmount(e.target.value)}\n              placeholder=\"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹\"\n              className=\"p-2 border border-gray-300 rounded\"\n            />\n            <select\n              value={paymentMethod}\n              onChange={(e) => setPaymentMethod(e.target.value)}\n              className=\"p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"cash\">Ù†Ù‚Ø¯ÙŠ</option>\n              <option value=\"vodafone_elsawy\">ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ Ø§Ù„ØµØ§ÙˆÙŠ</option>\n              <option value=\"vodafone_wael\">ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ ÙˆØ§Ø¦Ù„</option>\n              <option value=\"instapay\">Ø§Ù†Ø³ØªØ§ Ø¨Ø§ÙŠ</option>\n            </select>\n          </div>\n          <button\n            onClick={paySupplier}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n          >\n            Ø¯ÙØ¹ Ø§Ù„Ù…Ø¨Ù„Øº\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Dashboard Component\nconst Dashboard = () => {\n  const { user } = useAuth();\n  \n  // Only Elsawy can access dashboard\n  if (user?.username !== 'Elsawy') {\n    return (\n      <div className=\"p-6\" dir=\"rtl\">\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\n          <strong>ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­!</strong> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ù…Ø®ØµØµØ© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Elsawy ÙÙ‚Ø·.\n        </div>\n      </div>\n    );\n  }\n\n  const [stats, setStats] = useState({\n    total_sales: 0,\n    total_expenses: 0,\n    net_profit: 0,\n    total_unpaid: 0,\n    invoice_count: 0,\n    customer_count: 0\n  });\n\n  useEffect(() => {\n    fetchStats();\n  }, []);\n\n  const fetchStats = async () => {\n    try {\n      const response = await axios.get(`${API}/dashboard/stats`);\n      setStats(response.data);\n    } catch (error) {\n      console.error('Error fetching stats:', error);\n    }\n  };\n\n  const clearAllData = async () => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) return;\n    \n    try {\n      // Clear all data from backend\n      await axios.delete(`${API}/customers/clear-all`);\n      await axios.delete(`${API}/raw-materials/clear-all`);\n      await axios.delete(`${API}/finished-products/clear-all`);\n      await axios.delete(`${API}/invoices/clear-all`);\n      await axios.delete(`${API}/expenses/clear-all`);\n      await axios.delete(`${API}/payments/clear-all`);\n      await axios.delete(`${API}/work-orders/clear-all`);\n      \n      // Refresh dashboard stats\n      fetchStats();\n      \n      alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');\n    } catch (error) {\n      console.error('Error clearing all data:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');\n    }\n  };\n\n  const printReport = (reportType) => {\n    const currentDate = new Date().toLocaleDateString('ar-EG');\n    let printContent = `\n      <div style=\"font-family: Arial, sans-serif; direction: rtl; text-align: right;\">\n        <div style=\"text-align: center; margin-bottom: 20px;\">\n          <h1>Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„</h1>\n          <p>Ø§Ù„Ø­Ø±ÙÙŠØ§Ù† Ø´Ø§Ø±Ø¹ Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª - 01020630677</p>\n          <h2>ØªÙ‚Ø±ÙŠØ± Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>\n          <p>Ø§Ù„ØªØ§Ø±ÙŠØ®: ${currentDate}</p>\n        </div>\n        <table style=\"width: 100%; border-collapse: collapse;\">\n          <tr>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\"><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª:</strong></td>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\">Ø¬.Ù… ${stats.total_sales.toFixed(2)}</td>\n          </tr>\n          <tr>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\"><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª:</strong></td>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\">Ø¬.Ù… ${stats.total_expenses.toFixed(2)}</td>\n          </tr>\n          <tr>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\"><strong>ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­:</strong></td>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\">Ø¬.Ù… ${stats.net_profit.toFixed(2)}</td>\n          </tr>\n          <tr>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\"><strong>Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø©:</strong></td>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\">Ø¬.Ù… ${stats.total_unpaid.toFixed(2)}</td>\n          </tr>\n          <tr>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\"><strong>Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ±:</strong></td>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\">${stats.invoice_count}</td>\n          </tr>\n          <tr>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\"><strong>Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡:</strong></td>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\">${stats.customer_count}</td>\n          </tr>\n        </table>\n      </div>\n    `;\n    \n    const printWindow = window.open('', '_blank');\n    printWindow.document.write(printContent);\n    printWindow.document.close();\n    printWindow.print();\n  };\n\n  return (\n    <div className=\"space-y-6\" dir=\"rtl\">\n      {/* Header Section */}\n      <div className=\"bg-gradient-to-r from-blue-600 to-blue-800 rounded-xl p-6 text-white shadow-lg\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-3xl font-bold mb-2\">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>\n            <p className=\"text-blue-100\">Ù…Ø±Ø­Ø¨Ø§Ù‹ {user?.username} - Ø¥Ù„ÙŠÙƒ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù†Ø´Ø§Ø·</p>\n          </div>\n          <div className=\"text-6xl opacity-20\">ğŸ“Š</div>\n        </div>\n        \n        <div className=\"flex flex-wrap space-x-4 space-x-reverse mt-6\">\n          <button \n            onClick={clearAllData}\n            className=\"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105\">\n            ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n          </button>\n          <button \n            onClick={fetchStats}\n            className=\"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105\">\n            ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => printReport('dashboard')}\n            className=\"bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105\">\n            ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n          <select className=\"bg-white text-gray-700 border-0 rounded-lg px-4 py-3 shadow-lg focus:ring-2 focus:ring-blue-300 font-medium\">\n            <option>ğŸ“… ÙŠÙˆÙ…ÙŠ</option>\n            <option>ğŸ“† Ø£Ø³Ø¨ÙˆØ¹ÙŠ</option>\n            <option>ğŸ“Š Ø´Ù‡Ø±ÙŠ</option>\n            <option>ğŸ“ˆ Ø³Ù†ÙˆÙŠ</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {/* Total Sales */}\n        <div className=\"bg-gradient-to-br from-green-400 to-green-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold opacity-90\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</h3>\n              <p className=\"text-3xl font-bold mt-2\">\n                Ø¬.Ù… {stats.total_sales.toFixed(2)}\n              </p>\n            </div>\n            <div className=\"text-5xl opacity-30\">ğŸ’°</div>\n          </div>\n        </div>\n        \n        {/* Total Expenses */}\n        <div className=\"bg-gradient-to-br from-red-400 to-red-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold opacity-90\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>\n              <p className=\"text-3xl font-bold mt-2\">\n                Ø¬.Ù… {stats.total_expenses.toFixed(2)}\n              </p>\n            </div>\n            <div className=\"text-5xl opacity-30\">ğŸ’¸</div>\n          </div>\n        </div>\n        \n        {/* Net Profit */}\n        <div className=\"bg-gradient-to-br from-blue-400 to-blue-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold opacity-90\">ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­</h3>\n              <p className=\"text-3xl font-bold mt-2\">\n                Ø¬.Ù… {stats.net_profit.toFixed(2)}\n              </p>\n            </div>\n            <div className=\"text-5xl opacity-30\">ğŸ“ˆ</div>\n          </div>\n        </div>\n        \n        {/* Unpaid Amount */}\n        <div className=\"bg-gradient-to-br from-orange-400 to-orange-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold opacity-90\">Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø©</h3>\n              <p className=\"text-3xl font-bold mt-2\">\n                Ø¬.Ù… {stats.total_unpaid.toFixed(2)}\n              </p>\n            </div>\n            <div className=\"text-5xl opacity-30\">â³</div>\n          </div>\n        </div>\n        \n        {/* Invoice Count */}\n        <div className=\"bg-gradient-to-br from-purple-400 to-purple-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold opacity-90\">Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ±</h3>\n              <p className=\"text-3xl font-bold mt-2\">\n                {stats.invoice_count}\n              </p>\n            </div>\n            <div className=\"text-5xl opacity-30\">ğŸ§¾</div>\n          </div>\n        </div>\n        \n        {/* Customer Count */}\n        <div className=\"bg-gradient-to-br from-teal-400 to-teal-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold opacity-90\">Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h3>\n              <p className=\"text-3xl font-bold mt-2\">\n                {stats.customer_count}\n              </p>\n            </div>\n            <div className=\"text-5xl opacity-30\">ğŸ‘¥</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Sales Component\nconst Sales = () => {\n  const [customers, setCustomers] = useState([]);\n  const [newCustomer, setNewCustomer] = useState('');\n  const [selectedCustomer, setSelectedCustomer] = useState('');\n  const [supervisorName, setSupervisorName] = useState(''); // Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØªØµÙ†ÙŠØ¹\n  const [invoiceTitle, setInvoiceTitle] = useState(''); // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n  const [currentItem, setCurrentItem] = useState({\n    seal_type: 'RSL',\n    material_type: 'NBR',\n    inner_diameter: '',\n    outer_diameter: '',\n    height: '',\n    quantity: 1,\n    unit_price: '',\n    product_type: 'manufactured' // manufactured Ø£Ùˆ local\n  });\n  // New state for dual measurement inputs\n  const [measurements, setMeasurements] = useState({\n    inner_diameter_mm: '',\n    inner_diameter_inch: '',\n    outer_diameter_mm: '',\n    outer_diameter_inch: '',\n    height_mm: '',\n    height_inch: '',\n    wall_height_mm: '',\n    wall_height_inch: ''\n  });\n  const [localProduct, setLocalProduct] = useState({\n    product_size: '',      // Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ù†ØªØ¬\n    product_type: '',      // Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬\n    purchase_price: '',\n    selling_price: '',\n    supplier: ''\n  });\n  const [items, setItems] = useState([]);\n  const [paymentMethod, setPaymentMethod] = useState('Ù†Ù‚Ø¯ÙŠ');\n  const [discount, setDiscount] = useState(0); // Ø§Ù„Ø®ØµÙ…\n  const [discountType, setDiscountType] = useState('amount'); // Ù†ÙˆØ¹ Ø§Ù„Ø®ØµÙ…: amount Ø£Ùˆ percentage\n  const [compatibilityResults, setCompatibilityResults] = useState(null);\n  const [selectedMaterial, setSelectedMaterial] = useState(null);\n  const [measurementUnit, setMeasurementUnit] = useState('Ù…Ù…'); // Ø¨ÙˆØµØ© Ø£Ùˆ Ù…Ù…\n  const [wallHeight, setWallHeight] = useState(''); // Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø© Ù„Ù„Ù€ W types\n  const [clientType, setClientType] = useState(1); // Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù„ØªØ³Ø¹ÙŠØ± (1, 2, 3)\n\n  // Measurement conversion functions\n  const mmToInch = (mm) => {\n    if (!mm || mm === '') return '';\n    return (parseFloat(mm) / 25.4).toFixed(4);\n  };\n\n  const inchToMm = (inch) => {\n    if (!inch || inch === '') return '';\n    return (parseFloat(inch) * 25.4).toFixed(2);\n  };\n\n  // Handle measurement input changes with auto-conversion\n  const handleMeasurementChange = (field, value, unit) => {\n    const newMeasurements = { ...measurements };\n    \n    if (unit === 'mm') {\n      newMeasurements[`${field}_mm`] = value;\n      newMeasurements[`${field}_inch`] = mmToInch(value);\n    } else {\n      newMeasurements[`${field}_inch`] = value;\n      newMeasurements[`${field}_mm`] = inchToMm(value);\n    }\n    \n    setMeasurements(newMeasurements);\n    \n    // Update currentItem with mm values (for backend compatibility)\n    const mmValue = parseFloat(newMeasurements[`${field}_mm`]) || '';\n    setCurrentItem({\n      ...currentItem,\n      [field]: mmValue\n    });\n  };\n\n  const sealTypes = ['RSL', 'RS', 'RSE', 'B17', 'B3', 'B14', 'B1', 'R15', 'R17', 'W1', 'W4', 'W5', 'W11', 'WBT', 'XR', 'CH', 'VR'];\n  const materialTypes = ['NBR', 'BUR', 'BT', 'VT', 'BOOM'];\n\n  useEffect(() => {\n    fetchCustomers();\n  }, []);\n\n  const fetchCustomers = async () => {\n    try {\n      const response = await axios.get(`${API}/customers`);\n      setCustomers(response.data);\n    } catch (error) {\n      console.error('Error fetching customers:', error);\n    }\n  };\n\n  // Calculate automatic pricing based on material and client type\n  const calculateAutomaticPrice = async (material, height, clientType) => {\n    try {\n      const response = await axios.post(`${API}/calculate-price`, null, {\n        params: {\n          material_type: material.material_type,\n          inner_diameter: material.inner_diameter,\n          outer_diameter: material.outer_diameter,\n          height: height,\n          client_type: clientType\n        }\n      });\n      \n      return response.data;\n    } catch (error) {\n      console.log('No pricing found for this material combination:', error);\n      return null;\n    }\n  };\n\n  const checkCompatibility = async () => {\n    if (!currentItem.inner_diameter || !currentItem.outer_diameter || !currentItem.height) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n    \n    let innerDiameter = parseFloat(currentItem.inner_diameter);\n    let outerDiameter = parseFloat(currentItem.outer_diameter);\n    let height = parseFloat(currentItem.height);\n    \n    if (isNaN(innerDiameter) || isNaN(outerDiameter) || isNaN(height)) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø£Ø±Ù‚Ø§Ù… ØµØ­ÙŠØ­Ø© Ù„Ù„Ù…Ù‚Ø§Ø³Ø§Øª');\n      return;\n    }\n    \n    // Convert from inches to millimeters if needed\n    if (measurementUnit === 'Ø¨ÙˆØµØ©') {\n      innerDiameter = innerDiameter * 25.4;\n      outerDiameter = outerDiameter * 25.4;\n      height = height * 25.4;\n      \n      console.log(`ØªØ­ÙˆÙŠÙ„ Ù…Ù† Ø¨ÙˆØµØ© Ø¥Ù„Ù‰ Ù…Ù„Ù„ÙŠÙ…ØªØ±:\n        Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ: ${currentItem.inner_diameter} Ø¨ÙˆØµØ© = ${innerDiameter.toFixed(1)} Ù…Ù…\n        Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ: ${currentItem.outer_diameter} Ø¨ÙˆØµØ© = ${outerDiameter.toFixed(1)} Ù…Ù…\n        Ø§Ù„Ø§Ø±ØªÙØ§Ø¹: ${currentItem.height} Ø¨ÙˆØµØ© = ${height.toFixed(1)} Ù…Ù…`);\n    }\n    \n    try {\n      const response = await axios.post(`${API}/compatibility-check`, {\n        seal_type: currentItem.seal_type,\n        material_type: currentItem.material_type,\n        inner_diameter: innerDiameter,\n        outer_diameter: outerDiameter,\n        height: height\n      });\n      setCompatibilityResults(response.data);\n    } catch (error) {\n      console.error('Error checking compatibility:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„ØªÙˆØ§ÙÙ‚');\n    }\n  };\n\n  const addItem = () => {\n    if (currentItem.product_type === 'manufactured') {\n      // Validation for manufactured products - check if at least one measurement is filled\n      const hasInnerDiameter = measurements.inner_diameter_mm || measurements.inner_diameter_inch;\n      const hasOuterDiameter = measurements.outer_diameter_mm || measurements.outer_diameter_inch;\n      const hasHeight = measurements.height_mm || measurements.height_inch;\n      \n      if (!hasInnerDiameter || !hasOuterDiameter || !hasHeight || !currentItem.unit_price) {\n        alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© (Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª ÙˆØ§Ù„Ø³Ø¹Ø±)');\n        return;\n      }\n\n      // Use mm values (they're automatically kept in sync by handleMeasurementChange)\n      const innerDiameter = parseFloat(currentItem.inner_diameter);\n      const outerDiameter = parseFloat(currentItem.outer_diameter);\n      const height = parseFloat(currentItem.height);\n      const wallHeightValue = parseFloat(measurements.wall_height_mm) || null;\n\n      const item = {\n        ...currentItem,\n        inner_diameter: innerDiameter,\n        outer_diameter: outerDiameter,\n        height: height,\n        quantity: parseInt(currentItem.quantity),\n        unit_price: parseFloat(currentItem.unit_price),\n        total_price: parseFloat(currentItem.unit_price) * parseInt(currentItem.quantity),\n        wall_height: wallHeightValue,\n        // Store original display values for both units\n        display_measurements: {\n          inner_diameter_mm: measurements.inner_diameter_mm,\n          inner_diameter_inch: measurements.inner_diameter_inch,\n          outer_diameter_mm: measurements.outer_diameter_mm,\n          outer_diameter_inch: measurements.outer_diameter_inch,\n          height_mm: measurements.height_mm,\n          height_inch: measurements.height_inch,\n          wall_height_mm: measurements.wall_height_mm,\n          wall_height_inch: measurements.wall_height_inch\n        },\n        material_used: selectedMaterial ? selectedMaterial.unit_code : null,\n        material_details: selectedMaterial ? {\n          id: selectedMaterial.id,\n          unit_code: selectedMaterial.unit_code,\n          inner_diameter: selectedMaterial.inner_diameter,\n          outer_diameter: selectedMaterial.outer_diameter,\n          height: selectedMaterial.height,\n          material_type: selectedMaterial.material_type,\n          is_finished_product: selectedMaterial.is_finished_product || false\n        } : {\n          // Ø¥Ø±Ø³Ø§Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø­ØªÙ‰ Ø¨Ø¯ÙˆÙ† Ø§Ø®ØªÙŠØ§Ø± Ù…Ø§Ø¯Ø© Ù…Ø­Ø¯Ø¯Ø©\n          material_type: currentItem.material_type,\n          inner_diameter: parseFloat(currentItem.inner_diameter),\n          outer_diameter: parseFloat(currentItem.outer_diameter),\n          is_finished_product: false\n        }\n      };\n\n      setItems([...items, item]);\n      setCurrentItem({\n        seal_type: 'RSL',\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        height: '',\n        quantity: 1,\n        unit_price: '',\n        product_type: 'manufactured'\n      });\n      setMeasurements({\n        inner_diameter_mm: '',\n        inner_diameter_inch: '',\n        outer_diameter_mm: '',\n        outer_diameter_inch: '',\n        height_mm: '',\n        height_inch: '',\n        wall_height_mm: '',\n        wall_height_inch: ''\n      });\n    } else {\n      // Validation for local products\n      if (!localProduct.product_size || !localProduct.product_type || !localProduct.selling_price || !localProduct.supplier || !localProduct.purchase_price) {\n        alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠ');\n        return;\n      }\n\n      const product_name = `${localProduct.product_size} - ${localProduct.product_type}`;\n\n      const item = {\n        // Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©ØŒ Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ØµÙ†Ø¹Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† null\n        seal_type: null,\n        material_type: null, \n        inner_diameter: null,\n        outer_diameter: null,\n        height: null,\n        product_type: 'local',\n        product_name: product_name,\n        product_size: localProduct.product_size,\n        product_type_name: localProduct.product_type,\n        supplier: localProduct.supplier,\n        purchase_price: parseFloat(localProduct.purchase_price),\n        selling_price: parseFloat(localProduct.selling_price),\n        quantity: parseInt(currentItem.quantity),\n        unit_price: parseFloat(localProduct.selling_price), // Use selling price as unit price\n        total_price: parseFloat(localProduct.selling_price) * parseInt(currentItem.quantity),\n        // Store local product details\n        local_product_details: {\n          product_size: localProduct.product_size,\n          product_type: localProduct.product_type,\n          supplier: localProduct.supplier,\n          purchase_price: parseFloat(localProduct.purchase_price),\n          selling_price: parseFloat(localProduct.selling_price)\n        }\n      };\n\n      setItems([...items, item]);\n      setLocalProduct({\n        product_size: '',\n        product_type: '',\n        purchase_price: '',\n        selling_price: '',\n        supplier: ''\n      });\n      setCurrentItem({\n        seal_type: 'RSL',\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        height: '',\n        quantity: 1,\n        unit_price: '',\n        product_type: 'manufactured'\n      });\n      setMeasurements({\n        inner_diameter_mm: '',\n        inner_diameter_inch: '',\n        outer_diameter_mm: '',\n        outer_diameter_inch: '',\n        height_mm: '',\n        height_inch: '',\n        wall_height_mm: '',\n        wall_height_inch: ''\n      });\n    }\n    \n    setCompatibilityResults(null);\n    setSelectedMaterial(null);\n  };\n\n  const editItem = (index) => {\n    const item = items[index];\n    \n    // Set current item for editing\n    setCurrentItem({\n      seal_type: item.seal_type || 'RSL',\n      material_type: item.material_type || 'NBR',\n      inner_diameter: item.inner_diameter?.toString() || '',\n      outer_diameter: item.outer_diameter?.toString() || '',\n      height: item.height?.toString() || '',\n      quantity: item.quantity || 1,\n      unit_price: item.unit_price?.toString() || '',\n      product_type: item.product_type || (item.local_product_details ? 'local' : 'manufactured')\n    });\n    \n    // Set measurements for dual input fields (assuming values are in mm from database)\n    setMeasurements({\n      inner_diameter_mm: item.inner_diameter?.toString() || '',\n      inner_diameter_inch: mmToInch(item.inner_diameter) || '',\n      outer_diameter_mm: item.outer_diameter?.toString() || '',\n      outer_diameter_inch: mmToInch(item.outer_diameter) || '',\n      height_mm: item.height?.toString() || '',\n      height_inch: mmToInch(item.height) || '',\n      wall_height_mm: item.wall_height?.toString() || '',\n      wall_height_inch: mmToInch(item.wall_height) || ''\n    });\n    \n    // Set wall height if exists\n    if (item.wall_height) {\n      setWallHeight(item.wall_height.toString());\n    }\n    \n    // Set measurement unit if exists\n    if (item.measurement_unit) {\n      setMeasurementUnit(item.measurement_unit);\n    }\n    \n    // Set local product details if exists\n    if (item.local_product_details) {\n      setLocalProduct({\n        product_size: item.local_product_details.product_size || '',\n        product_type: item.local_product_details.product_type || '',\n        purchase_price: '',\n        selling_price: item.unit_price?.toString() || '',\n        supplier: ''\n      });\n    }\n    \n    // Remove the item being edited\n    const newItems = items.filter((_, i) => i !== index);\n    setItems(newItems);\n  };\n\n  const deleteItem = (index) => {\n    if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ØµØ±ØŸ')) {\n      const newItems = items.filter((_, i) => i !== index);\n      setItems(newItems);\n    }\n  };\n\n  const [isCreatingInvoice, setIsCreatingInvoice] = useState(false);\n\n  const createInvoice = async () => {\n    // Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø± Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n    if (isCreatingInvoice) {\n      return;\n    }\n\n    if (!selectedCustomer && !newCustomer) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø£Ùˆ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯');\n      return;\n    }\n\n    if (items.length === 0) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª Ù„Ù„ÙØ§ØªÙˆØ±Ø©');\n      return;\n    }\n\n    try {\n      setIsCreatingInvoice(true); // Ø¨Ø¯Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n      \n      let customerId = selectedCustomer;\n      let customerName = '';\n\n      // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯ Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±\n      if (!selectedCustomer && newCustomer) {\n        const customerResponse = await axios.post(`${API}/customers`, {\n          name: newCustomer,\n          phone: '',\n          address: ''\n        });\n        customerId = customerResponse.data.id;\n        customerName = newCustomer;\n        \n        // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\n        fetchCustomers();\n      } else {\n        const customer = customers.find(c => c.id === customerId);\n        customerName = customer ? customer.name : '';\n      }\n\n      // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ ÙˆØ§Ù„Ø®ØµÙ…\n      const subtotal = items.reduce((sum, item) => sum + item.total_price, 0);\n      const discountAmount = discountType === 'percentage' \n        ? (subtotal * parseFloat(discount || 0)) / 100\n        : parseFloat(discount || 0);\n      const totalAfterDiscount = subtotal - discountAmount;\n\n      // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n      const invoiceData = {\n        customer_id: customerId,\n        customer_name: customerName,\n        invoice_title: invoiceTitle, // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n        supervisor_name: supervisorName, // Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù\n        items: items,\n        payment_method: paymentMethod,\n        subtotal: subtotal,\n        discount: discountAmount,\n        discount_type: discountType,\n        discount_value: parseFloat(discount || 0),\n        total_after_discount: totalAfterDiscount,\n        notes: ''\n      };\n\n      const response = await axios.post(`${API}/invoices?supervisor_name=${encodeURIComponent(supervisorName)}`, invoiceData);\n      \n      if (response.data) {\n        alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');\n        \n        // Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\n        setItems([]);\n        setSelectedCustomer('');\n        setNewCustomer('');\n        setSupervisorName('');\n        setInvoiceTitle(''); // Ù…Ø³Ø­ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n        setPaymentMethod('Ù†Ù‚Ø¯ÙŠ');\n        setDiscount(0);\n        setDiscountType('amount');\n        setClientType(1); // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„\n        \n        // Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n        printInvoice(response.data);\n      }\n    } catch (error) {\n      console.error('Error creating invoice:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    } finally {\n      setIsCreatingInvoice(false); // Ø¥Ù†Ù‡Ø§Ø¡ Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡\n    }\n  };\n\n  const printInvoice = (invoice) => {\n    const printContent = `\n      <!DOCTYPE html>\n      <html dir=\"rtl\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <style>\n          body {\n            font-family: Arial, sans-serif;\n            margin: 0;\n            padding: 20px;\n            direction: rtl;\n            font-size: 15px;\n          }\n          .header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            border-bottom: 3px solid #000;\n            padding-bottom: 10px;\n            margin-bottom: 20px;\n          }\n          .company-info {\n            text-align: right;\n          }\n          .company-name {\n            font-size: 32px;\n            font-weight: bold;\n            color: #000;\n            margin: 0;\n          }\n          .company-subtitle {\n            font-size: 20px;\n            margin: 5px 0;\n            color: #666;\n          }\n          .company-details {\n            font-size: 16px;\n            margin: 2px 0;\n            color: #333;\n          }\n          .logo-section {\n            text-align: center;\n            flex: 1;\n          }\n          .invoice-title {\n            font-size: 20px;\n            font-weight: bold;\n            background-color: #ff4444;\n            color: white;\n            padding: 8px 20px;\n            border-radius: 5px;\n            display: inline-block;\n            margin-bottom: 10px;\n          }\n          .invoice-number {\n            font-size: 18px;\n            font-weight: bold;\n            color: #ff4444;\n          }\n          .customer-info {\n            display: flex;\n            justify-content: space-between;\n            margin: 20px 0;\n          }\n          .customer-details {\n            text-align: right;\n          }\n          .date-info {\n            text-align: left;\n          }\n          .products-table {\n            width: 100%;\n            border-collapse: collapse;\n            border: 2px solid #000;\n            margin: 20px 0;\n          }\n          .products-table th,\n          .products-table td {\n            border: 1px solid #000;\n            padding: 8px;\n            text-align: center;\n          }\n          .products-table th {\n            background-color: #f0f0f0;\n            font-weight: bold;\n          }\n          .footer {\n            margin-top: 30px;\n            border-top: 1px solid #ccc;\n            padding-top: 15px;\n            display: flex;\n            justify-content: space-between;\n            font-size: 12px;\n            color: #666;\n          }\n          .total-section {\n            text-align: left;\n            margin-top: 10px;\n          }\n          .total-amount {\n            font-size: 18px;\n            font-weight: bold;\n            border: 2px solid #000;\n            padding: 10px;\n            display: inline-block;\n            background-color: #f9f9f9;\n          }\n          @media print {\n            body { margin: 0; padding: 10px; }\n          }\n        </style>\n      </head>\n      <body>\n        <!-- Header Section -->\n        <div class=\"header\">\n          <div class=\"company-info\">\n            <h1 class=\"company-name\">Ø´Ø±ÙƒØ© Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„</h1>\n            <p class=\"company-subtitle\">ØªØµÙ†ÙŠØ¹ Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£ÙˆÙŠÙ„ Ø³ÙŠÙ„</p>\n            <p class=\"company-details\">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø·Ø§Ø± Ø­ØªÙ‰ Ù¥Ù Ù Ù…Ù„</p>\n            <p class=\"company-details\">Ù‡ÙŠØ¯Ø±ÙˆÙ„ÙŠÙƒ - Ù†ÙŠÙˆÙ…Ø§ØªÙŠÙƒ</p>\n          </div>\n          \n          <div class=\"logo-section\">\n            <img src=\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\" \n                 alt=\"Master Seal Logo\" \n                 style=\"max-width: 120px; max-height: 80px; margin-bottom: 10px;\">\n            <div class=\"invoice-title\">${invoice.invoice_title || 'Ø¹Ø±Ø¶ Ø³Ø¹Ø±'}</div>\n            <div class=\"invoice-number\">${invoice.invoice_number}</div>\n          </div>\n        </div>\n\n        <!-- Customer and Date Info -->\n        <div class=\"customer-info\">\n          <div class=\"customer-details\">\n            <p><strong>Ø§Ù„Ø³Ø§Ø¯Ø©:</strong> ${invoice.customer_name}</p>\n            <p><strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> ${invoice.customer_address || '........................'}</p>\n          </div>\n          <div class=\"date-info\">\n            <p><strong>ØªØ­Ø±ÙŠØ± ÙÙŠ:</strong> ${new Date(invoice.date).toLocaleDateString('ar-EG')}</p>\n            <p><strong>Date:</strong> ${new Date(invoice.date).toLocaleDateString('en-GB')}</p>\n          </div>\n        </div>\n\n        <!-- Products Table -->\n        <table class=\"products-table\">\n          <thead>\n            <tr>\n              <th style=\"width: 60px;\">Ø§Ù„Ù…Ø³Ù„Ø³Ù„<br>Item</th>\n              <th style=\"width: 80px;\">Ø§Ù„ÙƒÙ…ÙŠØ©<br>QTY</th>\n              <th style=\"width: 200px;\">Description<br>Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª</th>\n              <th style=\"width: 100px;\">Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©<br>Unit Price</th>\n              <th style=\"width: 100px;\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ<br>Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${invoice.items.map((item, index) => `\n              <tr>\n                <td>${index + 1}</td>\n                <td>${item.quantity}</td>\n                <td style=\"text-align: right;\">\n                  ${item.local_product_details ? \n                    `${item.local_product_details.product_size} - ${item.local_product_details.product_type}` : \n                    `${item.seal_type} - ${item.material_type}<br>\n                    <small>${item.inner_diameter} Ã— ${item.outer_diameter} Ã— ${item.height} Ù…Ù…${item.wall_height ? ` (Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø©: ${item.wall_height} Ù…Ù…)` : \"\"}</small>`\n                  }\n                </td>\n                <td>Ø¬.Ù… ${item.unit_price.toFixed(2)}</td>\n                <td>Ø¬.Ù… ${item.total_price.toFixed(2)}</td>\n              </tr>\n            `).join('')}\n            <!-- Empty rows for additional items -->\n            ${Array.from({length: Math.max(0, 8 - invoice.items.length)}, (_, i) => `\n              <tr style=\"height: 40px;\">\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n              </tr>\n            `).join('')}\n          </tbody>\n        </table>\n\n        <!-- Total Section -->\n        <div class=\"total-section\">\n          <div style=\"text-align: left; margin-bottom: 10px;\">\n            ${invoice.subtotal ? `\n              <div style=\"margin-bottom: 5px;\">\n                <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ: Ø¬.Ù… ${invoice.subtotal.toFixed(2)}</span>\n              </div>\n            ` : ''}\n            ${invoice.discount && invoice.discount > 0 ? `\n              <div style=\"margin-bottom: 5px; color: #d32f2f;\">\n                <span>Ø§Ù„Ø®ØµÙ…: - Ø¬.Ù… ${invoice.discount.toFixed(2)}</span>\n                ${invoice.discount_type === 'percentage' && invoice.discount_value ? \n                  ` <small>(${invoice.discount_value}%)</small>` : ''}\n              </div>\n              <hr style=\"margin: 5px 0; border: 1px solid #000;\">\n            ` : ''}\n          </div>\n          <div class=\"total-amount\">\n            Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: Ø¬.Ù… ${(invoice.total_after_discount || invoice.total_amount).toFixed(2)}\n          </div>\n        </div>\n\n        <!-- Additional Info -->\n        <div style=\"margin-top: 20px; text-align: center; font-size: 12px;\">\n          <p><strong>Ù…Ù„Ø­ÙˆØ¸Ø©:</strong> ÙÙ‚Ø· ÙˆÙ‚Ø¯Ø±Ù‡</p>\n          <div style=\"height: 30px; border-bottom: 1px solid #000; margin: 10px 40px;\"></div>\n        </div>\n\n        <!-- Footer -->\n        <div class=\"footer\">\n          <div>\n            <p><strong>Ø§Ù„ØªÙˆÙ‚ÙŠØ¹:</strong></p>\n            <p>Ù…ÙˆØ¨Ø§ÙŠÙ„: Ù Ù¡Ù Ù¢Ù Ù¦Ù£Ù Ù¦Ù§Ù§ - Ù Ù¡Ù Ù¦Ù¢Ù£Ù©Ù Ù¨Ù§Ù </p>\n            <p>ØªÙ„ÙŠÙÙˆÙ†: Ù Ù¡Ù Ù¢Ù Ù¦Ù£Ù Ù¦Ù§Ù§</p>\n          </div>\n          <div style=\"text-align: left;\">\n            <p><strong>Ø§Ù„Ù…Ø³ØªÙ„Ù…:</strong></p>\n            <p>Ø§Ù„Ø­Ø±ÙÙŠÙŠÙ† - Ø§Ù„Ø³Ù„Ø§Ù… - Ø£Ù…Ø§Ù… Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª</p>\n            <p>Ù…ÙˆØ¨Ø§ÙŠÙ„: Ù Ù¡Ù Ù¢Ù Ù¦Ù£Ù Ù¦Ù§Ù§ - Ù Ù¡Ù Ù¦Ù¢Ù£Ù©Ù Ù¨Ù§Ù </p>\n          </div>\n        </div>\n\n        <!-- Note -->\n        <div style=\"text-align: center; margin-top: 20px; font-size: 11px; color: #666;\">\n          <p>ÙŠÙ‚Ø± Ø§Ù„Ù…Ø´ØªØ±ÙŠ Ø¨Ø£Ù†Ù‡ Ù‚Ø§Ù… Ø¨Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø¨Ø¶Ø§Ø¹Ø© ÙˆÙ‚Ø¨ÙˆÙ„Ù‡Ø§</p>\n        </div>\n      </body>\n      </html>\n    `;\n    \n    const printWindow = window.open('', '_blank');\n    printWindow.document.write(printContent);\n    printWindow.document.close();\n    printWindow.print();\n  };\n\n  const clearAllInvoices = async () => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) return;\n    \n    try {\n      setItems([]);\n      alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±');\n    } catch (error) {\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <h2 className=\"text-2xl font-bold text-blue-600 mb-6\">Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</h2>\n      \n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Customer Selection */}\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„</h3>\n          \n          <div className=\"space-y-4\">\n            <div>\n              <select\n                value={selectedCustomer}\n                onChange={(e) => setSelectedCustomer(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              >\n                <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„</option>\n                {customers.map(customer => (\n                  <option key={customer.id} value={customer.id}>\n                    {customer.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n            \n            <div className=\"flex space-x-2 space-x-reverse\">\n              <input\n                type=\"text\"\n                value={newCustomer}\n                onChange={(e) => setNewCustomer(e.target.value)}\n                placeholder=\"Ø§Ø³Ù… Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯\"\n                className=\"flex-1 p-2 border border-gray-300 rounded\"\n              />\n              <button className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n                Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯\n              </button>\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØªØµÙ†ÙŠØ¹</label>\n              <input\n                type=\"text\"\n                value={supervisorName}\n                onChange={(e) => setSupervisorName(e.target.value)}\n                placeholder=\"Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©</label>\n              <input\n                type=\"text\"\n                value={invoiceTitle}\n                onChange={(e) => setInvoiceTitle(e.target.value)}\n                placeholder=\"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Product Entry */}\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</h3>\n          \n          {/* Product Type Selection */}\n          <div className=\"mb-4\">\n            <label className=\"block text-sm font-medium mb-2\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬</label>\n            <select\n              value={currentItem.product_type}\n              onChange={(e) => setCurrentItem({...currentItem, product_type: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"manufactured\">Ù…Ù†ØªØ¬ ØªØµÙ†ÙŠØ¹</option>\n              <option value=\"local\">Ù…Ù†ØªØ¬ Ù…Ø­Ù„ÙŠ</option>\n            </select>\n          </div>\n          \n          {/* Conditional Product Forms */}\n          {currentItem.product_type === 'manufactured' ? (\n            // Manufacturing Product Form\n            <>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„</label>\n                  <select\n                    value={currentItem.seal_type}\n                    onChange={(e) => setCurrentItem({...currentItem, seal_type: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  >\n                    {sealTypes.map(type => (\n                      <option key={type} value={type}>{type}</option>\n                    ))}\n                  </select>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</label>\n                  <select\n                    value={currentItem.material_type}\n                    onChange={(e) => setCurrentItem({...currentItem, material_type: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  >\n                    {materialTypes.map(type => (\n                      <option key={type} value={type}>{type}</option>\n                    ))}\n                  </select>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</label>\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">Ù…Ù„ÙŠÙ…ØªØ±</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.01\"\n                        value={measurements.inner_diameter_mm}\n                        onChange={(e) => handleMeasurementChange('inner_diameter', e.target.value, 'mm')}\n                        className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                        placeholder=\"Ù…Ù…\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">Ø¨ÙˆØµØ©</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.0001\"\n                        value={measurements.inner_diameter_inch}\n                        onChange={(e) => handleMeasurementChange('inner_diameter', e.target.value, 'inch')}\n                        className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                        placeholder=\"Ø¨ÙˆØµØ©\"\n                      />\n                    </div>\n                  </div>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</label>\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">Ù…Ù„ÙŠÙ…ØªØ±</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.01\"\n                        value={measurements.outer_diameter_mm}\n                        onChange={(e) => handleMeasurementChange('outer_diameter', e.target.value, 'mm')}\n                        className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                        placeholder=\"Ù…Ù…\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">Ø¨ÙˆØµØ©</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.0001\"\n                        value={measurements.outer_diameter_inch}\n                        onChange={(e) => handleMeasurementChange('outer_diameter', e.target.value, 'inch')}\n                        className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                        placeholder=\"Ø¨ÙˆØµØ©\"\n                      />\n                    </div>\n                  </div>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø³ÙŠÙ„</label>\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">Ù…Ù„ÙŠÙ…ØªØ±</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.01\"\n                        value={measurements.height_mm}\n                        onChange={(e) => handleMeasurementChange('height', e.target.value, 'mm')}\n                        className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                        placeholder=\"Ù…Ù…\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">Ø¨ÙˆØµØ©</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.0001\"\n                        value={measurements.height_inch}\n                        onChange={(e) => handleMeasurementChange('height', e.target.value, 'inch')}\n                        className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                        placeholder=\"Ø¨ÙˆØµØ©\"\n                      />\n                    </div>\n                  </div>\n                </div>\n                \n                {/* Wall Height for W-type seals */}\n                {currentItem.seal_type && currentItem.seal_type.startsWith('W') && (\n                  <div>\n                    <label className=\"block text-sm font-medium mb-1\">Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø©</label>\n                    <div className=\"grid grid-cols-2 gap-2\">\n                      <div>\n                        <label className=\"block text-xs text-gray-600 mb-1\">Ù…Ù„ÙŠÙ…ØªØ±</label>\n                        <input\n                          type=\"number\"\n                          step=\"0.01\"\n                          value={measurements.wall_height_mm}\n                          onChange={(e) => handleMeasurementChange('wall_height', e.target.value, 'mm')}\n                          className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                          placeholder=\"Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø© Ø¨Ø§Ù„Ù…Ù„ÙŠÙ…ØªØ±\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-xs text-gray-600 mb-1\">Ø¨ÙˆØµØ©</label>\n                        <input\n                          type=\"number\"\n                          step=\"0.0001\"\n                          value={measurements.wall_height_inch}\n                          onChange={(e) => handleMeasurementChange('wall_height', e.target.value, 'inch')}\n                          className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                          placeholder=\"Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø© Ø¨Ø§Ù„Ø¨ÙˆØµØ©\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n                )}\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙŠÙ„</label>\n                  <input\n                    type=\"number\"\n                    value={currentItem.quantity}\n                    onChange={(e) => setCurrentItem({...currentItem, quantity: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù„ØªØ³Ø¹ÙŠØ±</label>\n                  <select\n                    value={clientType}\n                    onChange={(e) => setClientType(parseInt(e.target.value))}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  >\n                    <option value={1}>Ø¹Ù…ÙŠÙ„ 1</option>\n                    <option value={2}>Ø¹Ù…ÙŠÙ„ 2</option>\n                    <option value={3}>Ø¹Ù…ÙŠÙ„ 3</option>\n                  </select>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø³Ø¹Ø± Ø§Ù„Ø³ÙŠÙ„ Ø§Ù„ÙˆØ§Ø­Ø¯</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={currentItem.unit_price}\n                    onChange={(e) => setCurrentItem({...currentItem, unit_price: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  />\n                </div>\n                \n                <div className=\"flex items-end\">\n                  <button\n                    onClick={checkCompatibility}\n                    className=\"w-full bg-yellow-500 text-white p-2 rounded hover:bg-yellow-600\"\n                  >\n                    ÙØ­Øµ Ø§Ù„ØªÙˆØ§ÙÙ‚\n                  </button>\n                </div>\n              </div>\n            </>\n          ) : (\n            // Local Product Form\n            <>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ù†ØªØ¬</label>\n                  <input\n                    type=\"text\"\n                    value={localProduct.product_size}\n                    onChange={(e) => setLocalProduct({...localProduct, product_size: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                    placeholder=\"Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ù†ØªØ¬\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬</label>\n                  <input\n                    type=\"text\"\n                    value={localProduct.product_type}\n                    onChange={(e) => setLocalProduct({...localProduct, product_type: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                    placeholder=\"Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù…ÙˆØ±Ø¯</label>\n                  <input\n                    type=\"text\"\n                    value={localProduct.supplier}\n                    onChange={(e) => setLocalProduct({...localProduct, supplier: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                    placeholder=\"Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={localProduct.purchase_price}\n                    onChange={(e) => setLocalProduct({...localProduct, purchase_price: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                    placeholder=\"Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={localProduct.selling_price}\n                    onChange={(e) => setLocalProduct({...localProduct, selling_price: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                    placeholder=\"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ÙƒÙ…ÙŠØ©</label>\n                  <input\n                    type=\"number\"\n                    value={currentItem.quantity}\n                    onChange={(e) => setCurrentItem({...currentItem, quantity: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  />\n                </div>\n              </div>\n            </>\n          )}\n          \n          <button\n            onClick={addItem}\n            className=\"w-full bg-green-500 text-white p-2 rounded hover:bg-green-600 mt-4\"\n          >\n            Ø¥Ø¶Ø§ÙØ© Ù„Ù„ÙØ§ØªÙˆØ±Ø©\n          </button>\n        </div>\n      </div>\n\n      {/* Compatibility Results */}\n      {compatibilityResults && (\n        <div className=\"mt-6 bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ù†ØªØ§Ø¦Ø¬ ÙØ­Øµ Ø§Ù„ØªÙˆØ§ÙÙ‚</h3>\n          \n          {compatibilityResults.compatible_materials.length > 0 && (\n            <div className=\"mb-4\">\n              <h4 className=\"font-medium mb-2\">Ø§Ù„Ø®Ø§Ù…Ø§Øª Ø§Ù„Ù…ØªÙˆØ§ÙÙ‚Ø©:</h4>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {compatibilityResults.compatible_materials.map((material, index) => (\n                  <div\n                    key={index}\n                    className={`p-3 border rounded cursor-pointer transition-colors ${\n                      selectedMaterial?.unit_code === material.unit_code && \n                      selectedMaterial?.inner_diameter === material.inner_diameter &&\n                      selectedMaterial?.outer_diameter === material.outer_diameter &&\n                      selectedMaterial?.height === material.height\n                        ? 'border-blue-500 bg-blue-50' \n                        : material.low_stock \n                          ? 'border-red-300 bg-red-50 hover:bg-red-100' \n                          : 'border-green-300 bg-green-50 hover:bg-green-100'\n                    }`}\n                    onClick={async () => {\n                      setSelectedMaterial(material);\n                      \n                      // Try to get automatic pricing\n                      const height = parseFloat(currentItem.height);\n                      if (height) {\n                        const pricing = await calculateAutomaticPrice(material, height, clientType);\n                        if (pricing) {\n                          setCurrentItem({\n                            ...currentItem,\n                            unit_price: pricing.total_price.toFixed(2)\n                          });\n                          \n                          // Show pricing details\n                          alert(`ØªÙ… Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹:\nØ³Ø¹Ø± Ø§Ù„Ù…Ù„ÙŠ: ${pricing.price_per_mm} Ø¬.Ù…\nØªÙƒÙ„ÙØ© Ø§Ù„Ù…Ù„Ù„ÙŠÙ…ØªØ±Ø§Øª: ${pricing.mm_cost.toFixed(2)} Ø¬.Ù…\nØªÙƒÙ„ÙØ© Ø§Ù„ØªØµÙ†ÙŠØ¹ (Ø¹Ù…ÙŠÙ„ ${pricing.client_type}): ${pricing.manufacturing_cost.toFixed(2)} Ø¬.Ù…\nØ§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${pricing.total_price.toFixed(2)} Ø¬.Ù…\n                          \nÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø³Ø¹Ø± Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±.`);\n                        }\n                      }\n                    }}\n                  >\n                    <p><strong>Ø§Ù„Ù†ÙˆØ¹:</strong> {material.material_type}</p>\n                    <p><strong>Ø§Ù„ÙƒÙˆØ¯:</strong> {material.unit_code}</p>\n                    <p><strong>Ø§Ù„Ù…Ù‚Ø§Ø³:</strong> {material.inner_diameter} Ã— {material.outer_diameter} Ã— {material.height}</p>\n                    <p><strong>Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹:</strong> {material.pieces_count}</p>\n                    {material.warning && <p className=\"text-red-600 text-sm\">{material.warning}</p>}\n                    {selectedMaterial?.unit_code === material.unit_code && \n                     selectedMaterial?.inner_diameter === material.inner_diameter &&\n                     selectedMaterial?.outer_diameter === material.outer_diameter &&\n                     selectedMaterial?.height === material.height && (\n                      <p className=\"text-blue-600 font-semibold text-sm mt-2\">âœ“ Ù…Ø­Ø¯Ø¯ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</p>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n          \n          {compatibilityResults.compatible_products.length > 0 && (\n            <div>\n              <h4 className=\"font-medium mb-2\">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©:</h4>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {compatibilityResults.compatible_products.map((product, index) => (\n                  <div \n                    key={index} \n                    className=\"p-3 border border-blue-300 bg-blue-50 rounded cursor-pointer hover:bg-blue-100\"\n                    onClick={() => setSelectedMaterial({\n                      unit_code: `FINISHED-${product.id}`,\n                      material_type: product.material_type,\n                      seal_type: product.seal_type,\n                      inner_diameter: product.inner_diameter,\n                      outer_diameter: product.outer_diameter,\n                      height: product.height,\n                      is_finished_product: true\n                    })}\n                  >\n                    <p><strong>Ø§Ù„Ù†ÙˆØ¹:</strong> {product.seal_type} - {product.material_type}</p>\n                    <p><strong>Ø§Ù„Ù…Ù‚Ø§Ø³:</strong> {product.inner_diameter} Ã— {product.outer_diameter} Ã— {product.height}</p>\n                    <p><strong>Ø§Ù„ÙƒÙ…ÙŠØ©:</strong> {product.quantity}</p>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {selectedMaterial && (\n            <div className=\"mt-4 p-3 bg-blue-100 rounded\">\n              <p className=\"font-semibold text-blue-800\">\n                ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø®Ø§Ù…Ø©: {selectedMaterial.unit_code} ({selectedMaterial.material_type})\n              </p>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Current Items */}\n      {items.length > 0 && (\n        <div className=\"mt-6 bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø£Ø®ÙŠØ±Ø©</h3>\n          \n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full border-collapse border border-gray-300\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„</th>\n                  <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ù‚Ø§Ø³</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙƒÙ…ÙŠØ©</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø³Ø¹Ø±</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</th>\n                  <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n                </tr>\n              </thead>\n              <tbody>\n                {items.map((item, index) => (\n                  <tr key={index}>\n                    <td className=\"border border-gray-300 p-2\">\n                      {item.local_product_details ? item.local_product_details.product_type : item.seal_type}\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">\n                      {item.local_product_details ? 'Ù…Ø­Ù„ÙŠ' : item.material_type}\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">\n                      {item.local_product_details ? \n                        `${item.local_product_details.product_size} - ${item.local_product_details.product_type}` :\n                        `${item.original_inner_diameter || item.inner_diameter} Ã— ${item.original_outer_diameter || item.outer_diameter} Ã— ${item.original_height || item.height}${item.original_wall_height ? ` (Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø©: ${item.original_wall_height})` : (item.wall_height ? ` (Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø©: ${item.wall_height})` : '')} ${item.measurement_unit || 'Ù…Ù…'}`\n                      }\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">{item.quantity}</td>\n                    <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {item.unit_price}</td>\n                    <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {item.total_price}</td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <div className=\"flex space-x-2 space-x-reverse\">\n                        <button\n                          onClick={() => editItem(index)}\n                          className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                          title=\"ØªØ­Ø±ÙŠØ±\"\n                        >\n                          âœï¸\n                        </button>\n                        <button\n                          onClick={() => deleteItem(index)}\n                          className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                          title=\"Ø­Ø°Ù\"\n                        >\n                          ğŸ—‘ï¸\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n          \n          <div className=\"mt-4 flex justify-between items-center\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</label>\n              <select\n                value={paymentMethod}\n                onChange={(e) => setPaymentMethod(e.target.value)}\n                className=\"p-2 border border-gray-300 rounded\"\n              >\n                <option value=\"Ù†Ù‚Ø¯ÙŠ\">Ù†Ù‚Ø¯ÙŠ</option>\n                <option value=\"Ø¢Ø¬Ù„\">Ø¢Ø¬Ù„</option>\n                <option value=\"ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ Ù…Ø­Ù…Ø¯ Ø§Ù„ØµØ§ÙˆÙŠ\">ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ Ù…Ø­Ù…Ø¯ Ø§Ù„ØµØ§ÙˆÙŠ</option>\n                <option value=\"ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ ÙˆØ§Ø¦Ù„ Ù…Ø­Ù…Ø¯\">ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ ÙˆØ§Ø¦Ù„ Ù…Ø­Ù…Ø¯</option>\n                <option value=\"Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ\">Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ</option>\n                <option value=\"ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ\">ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ</option>\n              </select>\n            </div>\n            \n            {/* Discount Section */}\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 p-4 bg-gray-50 rounded-lg\">\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø®ØµÙ…</label>\n                <select\n                  value={discountType}\n                  onChange={(e) => setDiscountType(e.target.value)}\n                  className=\"p-2 border border-gray-300 rounded w-full\"\n                >\n                  <option value=\"amount\">Ù…Ø¨Ù„Øº Ø«Ø§Ø¨Øª</option>\n                  <option value=\"percentage\">Ù†Ø³Ø¨Ø© Ù…Ø¦ÙˆÙŠØ©</option>\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">\n                  Ù‚ÙŠÙ…Ø© Ø§Ù„Ø®ØµÙ… {discountType === 'percentage' ? '(%)' : '(Ø¬.Ù…)'}\n                </label>\n                <input\n                  type=\"number\"\n                  value={discount}\n                  onChange={(e) => setDiscount(e.target.value)}\n                  className=\"p-2 border border-gray-300 rounded w-full\"\n                  placeholder=\"0\"\n                  min=\"0\"\n                  step={discountType === 'percentage' ? '0.1' : '0.01'}\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù…Ø¨Ù„Øº Ø§Ù„Ø®ØµÙ…</label>\n                <div className=\"p-2 bg-white border border-gray-300 rounded w-full\">\n                  Ø¬.Ù… {(() => {\n                    const subtotal = items.reduce((sum, item) => sum + item.total_price, 0);\n                    const discountAmount = discountType === 'percentage' \n                      ? (subtotal * parseFloat(discount || 0)) / 100\n                      : parseFloat(discount || 0);\n                    return discountAmount.toFixed(2);\n                  })()}\n                </div>\n              </div>\n            </div>\n            \n            {/* Total Section */}\n            <div className=\"mt-4 p-4 bg-blue-50 rounded-lg\">\n              <div className=\"flex justify-between items-center mb-2\">\n                <span className=\"text-lg\">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ:</span>\n                <span className=\"text-lg font-semibold\">\n                  Ø¬.Ù… {items.reduce((sum, item) => sum + item.total_price, 0).toFixed(2)}\n                </span>\n              </div>\n              <div className=\"flex justify-between items-center mb-2\">\n                <span className=\"text-lg\">Ø§Ù„Ø®ØµÙ…:</span>\n                <span className=\"text-lg font-semibold text-red-600\">\n                  - Ø¬.Ù… {(() => {\n                    const subtotal = items.reduce((sum, item) => sum + item.total_price, 0);\n                    const discountAmount = discountType === 'percentage' \n                      ? (subtotal * parseFloat(discount || 0)) / 100\n                      : parseFloat(discount || 0);\n                    return discountAmount.toFixed(2);\n                  })()}\n                </span>\n              </div>\n              <hr className=\"my-2\" />\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-xl font-bold\">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:</span>\n                <span className=\"text-xl font-bold text-green-600\">\n                  Ø¬.Ù… {(() => {\n                    const subtotal = items.reduce((sum, item) => sum + item.total_price, 0);\n                    const discountAmount = discountType === 'percentage' \n                      ? (subtotal * parseFloat(discount || 0)) / 100\n                      : parseFloat(discount || 0);\n                    return (subtotal - discountAmount).toFixed(2);\n                  })()}\n                </span>\n              </div>\n            </div>\n            \n            <div className=\"text-xl font-bold\" style={{display: 'none'}}>\n              Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: Ø¬.Ù… {items.reduce((sum, item) => sum + item.total_price, 0).toFixed(2)}\n            </div>\n          </div>\n          \n          <button\n            onClick={createInvoice}\n            disabled={isCreatingInvoice}\n            className={`w-full p-3 rounded mt-4 text-lg font-semibold ${\n              isCreatingInvoice \n                ? 'bg-gray-400 text-gray-600 cursor-not-allowed' \n                : 'bg-green-500 text-white hover:bg-green-600'\n            }`}\n          >\n            {isCreatingInvoice ? 'Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©...' : 'Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©'}\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Simple placeholder components for other pages\n// Inventory Component will be replaced with new advanced version above\n\n// Stock Component (Old Inventory functionality for Raw Materials and Finished Products)\nconst Stock = () => {\n  const [rawMaterials, setRawMaterials] = useState([]);\n  const [finishedProducts, setFinishedProducts] = useState([]);\n  const [searchTerm, setSearchTerm] = useState(''); // Ù„Ù„Ø¨Ø­Ø«\n  const [newRawMaterial, setNewRawMaterial] = useState({\n    material_type: 'NBR',\n    inner_diameter: '',\n    outer_diameter: '',\n    height: '',\n    pieces_count: '',\n    cost_per_mm: ''\n  });\n  const [newFinishedProduct, setNewFinishedProduct] = useState({\n    seal_type: 'RSL',\n    material_type: 'NBR',\n    inner_diameter: '',\n    outer_diameter: '',\n    height: '',\n    quantity: '',\n    unit_price: ''\n  });\n\n  const materialTypes = ['NBR', 'BUR', 'BT', 'VT', 'BOOM'];\n  const sealTypes = ['RSL', 'RS', 'RSE', 'B17', 'B3', 'B14', 'B1', 'R15', 'R17', 'W1', 'W4', 'W5', 'W11', 'WBT', 'XR', 'CH', 'VR'];\n\n  // Ø¯Ø§Ù„Ø© ØªØµÙÙŠØ© Ø§Ù„Ø¨Ø­Ø«\n  const filteredRawMaterials = rawMaterials.filter(material => \n    material.material_type.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    material.unit_code.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    material.inner_diameter.toString().includes(searchTerm) ||\n    material.outer_diameter.toString().includes(searchTerm) ||\n    material.height.toString().includes(searchTerm)\n  ).sort((a, b) => {\n    // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\n    const materialPriority = { 'BUR': 1, 'NBR': 2, 'BT': 3, 'BOOM': 4, 'VT': 5 };\n    const aPriority = materialPriority[a.material_type] || 6;\n    const bPriority = materialPriority[b.material_type] || 6;\n    \n    if (aPriority !== bPriority) {\n      return aPriority - bPriority;\n    }\n    // Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)\n    if (a.inner_diameter !== b.inner_diameter) {\n      return a.inner_diameter - b.inner_diameter;\n    }\n    return a.outer_diameter - b.outer_diameter;\n  });\n\n  const filteredFinishedProducts = finishedProducts.filter(product => \n    product.seal_type.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    product.material_type.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    product.inner_diameter.toString().includes(searchTerm) ||\n    product.outer_diameter.toString().includes(searchTerm) ||\n    product.height.toString().includes(searchTerm)\n  ).sort((a, b) => {\n    // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\n    const materialPriority = { 'BUR': 1, 'NBR': 2, 'BT': 3, 'BOOM': 4, 'VT': 5 };\n    const aPriority = materialPriority[a.material_type] || 6;\n    const bPriority = materialPriority[b.material_type] || 6;\n    \n    if (aPriority !== bPriority) {\n      return aPriority - bPriority;\n    }\n    // Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)\n    if (a.inner_diameter !== b.inner_diameter) {\n      return a.inner_diameter - b.inner_diameter;\n    }\n    return a.outer_diameter - b.outer_diameter;\n  });\n\n  useEffect(() => {\n    fetchRawMaterials();\n    fetchFinishedProducts();\n  }, []);\n\n  const fetchRawMaterials = async () => {\n    try {\n      const response = await axios.get(`${API}/raw-materials`);\n      setRawMaterials(response.data);\n    } catch (error) {\n      console.error('Error fetching raw materials:', error);\n    }\n  };\n\n  const fetchFinishedProducts = async () => {\n    try {\n      const response = await axios.get(`${API}/finished-products`);\n      setFinishedProducts(response.data);\n    } catch (error) {\n      console.error('Error fetching finished products:', error);\n    }\n  };\n\n  const addRawMaterial = async () => {\n    if (!newRawMaterial.inner_diameter || !newRawMaterial.outer_diameter || !newRawMaterial.height || !newRawMaterial.pieces_count || !newRawMaterial.cost_per_mm) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      const rawMaterial = {\n        material_type: newRawMaterial.material_type,\n        inner_diameter: parseFloat(newRawMaterial.inner_diameter),\n        outer_diameter: parseFloat(newRawMaterial.outer_diameter),\n        height: parseFloat(newRawMaterial.height),\n        pieces_count: parseInt(newRawMaterial.pieces_count),\n        cost_per_mm: parseFloat(newRawMaterial.cost_per_mm)\n        // unit_code will be generated automatically by backend\n      };\n\n      let response;\n      if (newRawMaterial.id) {\n        // Update existing material\n        response = await axios.put(`${API}/raw-materials/${newRawMaterial.id}`, rawMaterial);\n        alert(`ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­. ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø©: ${response.data.unit_code}`);\n      } else {\n        // Add new material\n        response = await axios.post(`${API}/raw-materials`, rawMaterial);\n        alert(`ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­. ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø©: ${response.data.unit_code}`);\n      }\n\n      fetchRawMaterials();\n      setNewRawMaterial({\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        height: '',\n        pieces_count: '',\n        cost_per_mm: ''\n      });\n    } catch (error) {\n      console.error('Error saving raw material:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const clearAllRawMaterials = async () => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…ØŸ')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/raw-materials/clear-all`);\n      fetchRawMaterials();\n      alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…');\n    } catch (error) {\n      console.error('Error clearing raw materials:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…');\n    }\n  };\n\n  const deleteRawMaterial = async (materialId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…ØŸ')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/raw-materials/${materialId}`);\n      fetchRawMaterials();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…');\n    } catch (error) {\n      console.error('Error deleting raw material:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…');\n    }\n  };\n\n  const editRawMaterial = (material) => {\n    // Fill the form with the material data for editing\n    setNewRawMaterial({\n      id: material.id,\n      material_type: material.material_type,\n      inner_diameter: material.inner_diameter.toString(),\n      outer_diameter: material.outer_diameter.toString(),\n      height: material.height.toString(),\n      pieces_count: material.pieces_count.toString(),\n      cost_per_mm: material.cost_per_mm.toString()\n    });\n  };\n\n  const handleFileImport = async (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    const formData = new FormData();\n    formData.append('file', file);\n\n    try {\n      const response = await axios.post(`${API}/excel/import/raw-materials`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n\n      alert(response.data.message);\n      fetchRawMaterials(); // Refresh the raw materials list\n      event.target.value = ''; // Clear file input\n    } catch (error) {\n      console.error('Error importing file:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const handleFileExport = async () => {\n    try {\n      const response = await axios.get(`${API}/excel/export/raw-materials`, {\n        responseType: 'blob'\n      });\n\n      // Create download link\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', `raw_materials_export_${new Date().toISOString().split('T')[0]}.xlsx`);\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n    } catch (error) {\n      console.error('Error exporting file:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù');\n    }\n  };\n\n  const addFinishedProduct = async () => {\n    if (!newFinishedProduct.inner_diameter || !newFinishedProduct.outer_diameter || !newFinishedProduct.height || !newFinishedProduct.quantity || !newFinishedProduct.unit_price) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      const finishedProduct = {\n        seal_type: newFinishedProduct.seal_type,\n        material_type: newFinishedProduct.material_type,\n        inner_diameter: parseFloat(newFinishedProduct.inner_diameter),\n        outer_diameter: parseFloat(newFinishedProduct.outer_diameter),\n        height: parseFloat(newFinishedProduct.height),\n        quantity: parseInt(newFinishedProduct.quantity),\n        unit_price: parseFloat(newFinishedProduct.unit_price)\n      };\n\n      if (newFinishedProduct.id) {\n        // Update existing product\n        await axios.put(`${API}/finished-products/${newFinishedProduct.id}`, finishedProduct);\n        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¨Ù†Ø¬Ø§Ø­');\n      } else {\n        // Add new product\n        await axios.post(`${API}/finished-products`, finishedProduct);\n        alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¨Ù†Ø¬Ø§Ø­');\n      }\n\n      fetchFinishedProducts();\n      setNewFinishedProduct({\n        seal_type: 'RSL',\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        height: '',\n        quantity: '',\n        unit_price: ''\n      });\n    } catch (error) {\n      console.error('Error saving finished product:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ');\n    }\n  };\n\n  const editFinishedProduct = (product) => {\n    // Fill the form with the product data for editing\n    setNewFinishedProduct({\n      id: product.id,\n      seal_type: product.seal_type,\n      material_type: product.material_type,\n      inner_diameter: product.inner_diameter.toString(),\n      outer_diameter: product.outer_diameter.toString(),\n      height: product.height.toString(),\n      quantity: product.quantity.toString(),\n      unit_price: product.unit_price.toString()\n    });\n  };\n\n  const deleteFinishedProduct = async (productId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØŸ')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/finished-products/${productId}`);\n      fetchFinishedProducts();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ');\n    } catch (error) {\n      console.error('Error deleting finished product:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ');\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <h1 className=\"text-3xl font-bold mb-6\">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</h1>\n      \n      {/* Raw Materials Section */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h3 className=\"text-lg font-semibold\">Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…</h3>\n          <div className=\"flex space-x-2 space-x-reverse\">\n            <button\n              onClick={clearAllRawMaterials}\n              className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\"\n            >\n              Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n            </button>\n          </div>\n        </div>\n\n        {/* Import/Export Section */}\n        <div className=\"bg-gray-50 p-4 rounded-lg mb-6\">\n          <h4 className=\"font-medium mb-4\">ğŸ“ Ø§Ø³ØªÙŠØ±Ø§Ø¯ ÙˆØªØµØ¯ÙŠØ± Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…</h4>\n          <div className=\"flex flex-wrap gap-4 items-center\">\n            <div className=\"flex items-center gap-2\">\n              <label className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 cursor-pointer\">\n                ğŸ“¤ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù† Excel\n                <input\n                  type=\"file\"\n                  accept=\".xlsx,.xls\"\n                  onChange={handleFileImport}\n                  className=\"hidden\"\n                />\n              </label>\n              <span className=\"text-sm text-gray-600\">(.xlsx Ø£Ùˆ .xls)</span>\n            </div>\n            \n            <button\n              onClick={handleFileExport}\n              className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n            >\n              ğŸ“¥ ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ Excel\n            </button>\n            \n            <div className=\"text-sm text-gray-600 bg-white p-2 rounded border\">\n              <strong>ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:</strong><br/>\n              material_type, inner_diameter, outer_diameter, height, pieces_count, unit_code, cost_per_mm\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</label>\n            <select\n              value={newRawMaterial.material_type}\n              onChange={(e) => setNewRawMaterial({...newRawMaterial, material_type: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              {materialTypes.map(type => (\n                <option key={type} value={type}>{type}</option>\n              ))}\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</label>\n            <input\n              type=\"number\"\n              value={newRawMaterial.inner_diameter}\n              onChange={(e) => setNewRawMaterial({...newRawMaterial, inner_diameter: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</label>\n            <input\n              type=\"number\"\n              value={newRawMaterial.outer_diameter}\n              onChange={(e) => setNewRawMaterial({...newRawMaterial, outer_diameter: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ (Ù…Ù…)</label>\n            <input\n              type=\"number\"\n              value={newRawMaterial.height}\n              onChange={(e) => setNewRawMaterial({...newRawMaterial, height: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹</label>\n            <input\n              type=\"number\"\n              value={newRawMaterial.pieces_count}\n              onChange={(e) => setNewRawMaterial({...newRawMaterial, pieces_count: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ØªÙƒÙ„ÙØ© Ø§Ù„Ù…Ù„Ù„ÙŠ</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newRawMaterial.cost_per_mm}\n              onChange={(e) => setNewRawMaterial({...newRawMaterial, cost_per_mm: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n        </div>\n        \n        <p className=\"text-sm text-gray-600 mt-4\">\n          Ù…Ù„Ø§Ø­Ø¸Ø©: Ø³ÙŠØªÙ… ØªÙˆÙ„ÙŠØ¯ ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø© ÙˆØ§Ù„Ù…ÙˆØ§ØµÙØ§Øª\n        </p>\n        \n        <button\n          onClick={addRawMaterial}\n          className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mb-4\"\n        >\n          Ø¥Ø¶Ø§ÙØ© Ù…Ø§Ø¯Ø© Ø®Ø§Ù…\n        </button>\n\n        {/* Ø­Ù‚Ù„ Ø§Ù„Ø¨Ø­Ø« */}\n        <div className=\"mb-4\">\n          <input\n            type=\"text\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            placeholder=\"Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù… (Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©ØŒ ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø©ØŒ Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª...)\"\n            className=\"w-full p-3 border border-gray-300 rounded-lg\"\n          />\n        </div>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø§Ø±ØªÙØ§Ø¹</th>\n                <th className=\"border border-gray-300 p-2\">Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹</th>\n                <th className=\"border border-gray-300 p-2\">ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø©</th>\n                <th className=\"border border-gray-300 p-2\">ØªÙƒÙ„ÙØ© Ø§Ù„Ù…Ù„Ù„ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredRawMaterials.map(material => (\n                <tr key={material.id}>\n                  <td className=\"border border-gray-300 p-2\">{material.material_type}</td>\n                  <td className=\"border border-gray-300 p-2\">{material.inner_diameter}</td>\n                  <td className=\"border border-gray-300 p-2\">{material.outer_diameter}</td>\n                  <td className=\"border border-gray-300 p-2\">{material.height}</td>\n                  <td className=\"border border-gray-300 p-2\">{material.pieces_count}</td>\n                  <td className=\"border border-gray-300 p-2\">{material.unit_code}</td>\n                  <td className=\"border border-gray-300 p-2\">{material.cost_per_mm}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex space-x-2 space-x-reverse\">\n                      <button\n                        onClick={() => editRawMaterial(material)}\n                        className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                        title=\"ØªØ­Ø±ÙŠØ±\"\n                      >\n                        âœï¸\n                      </button>\n                      <button\n                        onClick={() => deleteRawMaterial(material.id)}\n                        className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                        title=\"Ø­Ø°Ù\"\n                      >\n                        ğŸ—‘ï¸\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Finished Products Section */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ø§Ù„ØªØ§Ù…</h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„</label>\n            <select\n              value={newFinishedProduct.seal_type}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, seal_type: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              {sealTypes.map(type => (\n                <option key={type} value={type}>{type}</option>\n              ))}\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</label>\n            <select\n              value={newFinishedProduct.material_type}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, material_type: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              {materialTypes.map(type => (\n                <option key={type} value={type}>{type}</option>\n              ))}\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</label>\n            <input\n              type=\"number\"\n              value={newFinishedProduct.inner_diameter}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, inner_diameter: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</label>\n            <input\n              type=\"number\"\n              value={newFinishedProduct.outer_diameter}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, outer_diameter: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø³ÙŠÙ„</label>\n            <input\n              type=\"number\"\n              value={newFinishedProduct.height}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, height: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ÙƒÙ…ÙŠØ©</label>\n            <input\n              type=\"number\"\n              value={newFinishedProduct.quantity}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, quantity: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newFinishedProduct.unit_price}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, unit_price: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n        </div>\n        \n        <button\n          onClick={addFinishedProduct}\n          className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 mb-4\"\n        >\n          Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ù†Ù‡Ø§Ø¦ÙŠ\n        </button>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„</th>\n                <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø§Ø±ØªÙØ§Ø¹</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙƒÙ…ÙŠØ©</th>\n                <th className=\"border border-gray-300 p-2\">Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredFinishedProducts.map(product => (\n                <tr key={product.id}>\n                  <td className=\"border border-gray-300 p-2\">{product.seal_type}</td>\n                  <td className=\"border border-gray-300 p-2\">{product.material_type}</td>\n                  <td className=\"border border-gray-300 p-2\">{product.inner_diameter}</td>\n                  <td className=\"border border-gray-300 p-2\">{product.outer_diameter}</td>\n                  <td className=\"border border-gray-300 p-2\">{product.height}</td>\n                  <td className=\"border border-gray-300 p-2\">{product.quantity}</td>\n                  <td className=\"border border-gray-300 p-2\">{product.unit_price}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex space-x-2 space-x-reverse\">\n                      <button\n                        onClick={() => editFinishedProduct(product)}\n                        className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                        title=\"ØªØ­Ø±ÙŠØ±\"\n                      >\n                        âœï¸\n                      </button>\n                      <button\n                        onClick={() => deleteFinishedProduct(product.id)}\n                        className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                        title=\"Ø­Ø°Ù\"\n                      >\n                        ğŸ—‘ï¸\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Deferred Payments Component\nconst Deferred = () => {\n  const [unpaidInvoices, setUnpaidInvoices] = useState([]);\n  const [customers, setCustomers] = useState([]);\n  const [paymentAmount, setPaymentAmount] = useState('');\n  const [paymentMethod, setPaymentMethod] = useState('Ù†Ù‚Ø¯ÙŠ');\n  const [paymentNotes, setPaymentNotes] = useState('');\n  const [selectedInvoice, setSelectedInvoice] = useState(null);\n\n  useEffect(() => {\n    fetchUnpaidInvoices();\n    fetchCustomers();\n  }, []);\n\n  const fetchUnpaidInvoices = async () => {\n    try {\n      const response = await axios.get(`${API}/invoices`);\n      const invoices = response.data.filter(invoice => \n        // ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¢Ø¬Ù„Ø© Ø£Ùˆ Ù„Ù‡Ø§ Ù…Ø¨Ù„Øº Ù…Ø³ØªØ­Ù‚\n        (invoice.payment_method === 'Ø¢Ø¬Ù„' || invoice.remaining_amount > 0) &&\n        (invoice.status === 'ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©' || \n         invoice.status === 'Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹' || \n         invoice.status === 'Ø§Ù†ØªØ¸Ø§Ø±' ||\n         invoice.remaining_amount > 0)\n      );\n      setUnpaidInvoices(invoices);\n    } catch (error) {\n      console.error('Error fetching unpaid invoices:', error);\n    }\n  };\n\n  const fetchCustomers = async () => {\n    try {\n      const response = await axios.get(`${API}/customers`);\n      setCustomers(response.data);\n    } catch (error) {\n      console.error('Error fetching customers:', error);\n    }\n  };\n\n  const getCustomerName = (customerId) => {\n    const customer = customers.find(c => c.id === customerId);\n    return customer ? customer.name : 'Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…Ø­Ø¯Ø¯';\n  };\n\n  const makePayment = async () => {\n    if (!selectedInvoice || !paymentAmount) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙˆØ¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº');\n      return;\n    }\n\n    if (parseFloat(paymentAmount) > selectedInvoice.remaining_amount) {\n      alert('Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯Ø®Ù„ Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚');\n      return;\n    }\n\n    try {\n      await axios.post(`${API}/payments`, {\n        invoice_id: selectedInvoice.id,\n        amount: parseFloat(paymentAmount),\n        payment_method: paymentMethod,\n        notes: paymentNotes\n      });\n\n      setPaymentAmount('');\n      setPaymentNotes('');\n      setSelectedInvoice(null);\n      fetchUnpaidInvoices();\n      alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø© Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error making payment:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø©');\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-blue-600 mb-4\">Ø§Ù„Ø¢Ø¬Ù„ - Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª</h2>\n        \n        <div className=\"flex space-x-4 space-x-reverse mb-4\">\n          <button className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n            Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n          </button>\n          <button \n            onClick={fetchUnpaidInvoices}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n            Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => window.print()}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n            Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n          <select className=\"border border-gray-300 rounded px-3 py-2\">\n            <option>ÙŠÙˆÙ…ÙŠ</option>\n            <option>Ø£Ø³Ø¨ÙˆØ¹ÙŠ</option>\n            <option>Ø´Ù‡Ø±ÙŠ</option>\n            <option>Ø³Ù†ÙˆÙŠ</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Payment Form */}\n      {selectedInvoice && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n          <h3 className=\"text-lg font-semibold mb-4\">ØªØ³Ø¬ÙŠÙ„ Ø¯ÙØ¹Ø©</h3>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</label>\n              <input\n                type=\"text\"\n                value={selectedInvoice.invoice_number}\n                disabled\n                className=\"w-full p-2 border border-gray-300 rounded bg-gray-100\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø¹Ù…ÙŠÙ„</label>\n              <input\n                type=\"text\"\n                value={selectedInvoice.customer_name}\n                disabled\n                className=\"w-full p-2 border border-gray-300 rounded bg-gray-100\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚</label>\n              <input\n                type=\"text\"\n                value={`Ø¬.Ù… ${selectedInvoice.remaining_amount?.toFixed(2) || '0.00'}`}\n                disabled\n                className=\"w-full p-2 border border-gray-300 rounded bg-gray-100\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ù…Ø¨Ù„Øº Ø§Ù„Ø¯ÙØ¹Ø©</label>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                value={paymentAmount}\n                onChange={(e) => setPaymentAmount(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n                placeholder=\"0.00\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</label>\n              <select\n                value={paymentMethod}\n                onChange={(e) => setPaymentMethod(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              >\n                <option value=\"Ù†Ù‚Ø¯ÙŠ\">Ù†Ù‚Ø¯ÙŠ</option>\n                <option value=\"ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ Ù…Ø­Ù…Ø¯ Ø§Ù„ØµØ§ÙˆÙŠ\">ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ Ù…Ø­Ù…Ø¯ Ø§Ù„ØµØ§ÙˆÙŠ</option>\n                <option value=\"ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ ÙˆØ§Ø¦Ù„ Ù…Ø­Ù…Ø¯\">ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ ÙˆØ§Ø¦Ù„ Ù…Ø­Ù…Ø¯</option>\n                <option value=\"Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ\">Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ</option>\n              </select>\n            </div>\n            \n            <div className=\"md:col-span-2\">\n              <label className=\"block text-sm font-medium mb-1\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>\n              <input\n                type=\"text\"\n                value={paymentNotes}\n                onChange={(e) => setPaymentNotes(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n                placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n              />\n            </div>\n          </div>\n          \n          <div className=\"flex space-x-4 space-x-reverse\">\n            <button\n              onClick={makePayment}\n              className=\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\"\n            >\n              ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø©\n            </button>\n            <button\n              onClick={() => setSelectedInvoice(null)}\n              className=\"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600\"\n            >\n              Ø¥Ù„ØºØ§Ø¡\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Unpaid Invoices */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø§Ù„ÙÙˆØ§ØªÙŠØ± ØºÙŠØ± Ø§Ù„Ù…Ø³Ø¯Ø¯Ø©</h3>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¹Ù…ÙŠÙ„</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø¯ÙÙˆØ¹</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø³ØªØ­Ù‚</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø§Ù„Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {unpaidInvoices.map((invoice) => (\n                <tr key={invoice.id}>\n                  <td className=\"border border-gray-300 p-2\">{invoice.invoice_number}</td>\n                  <td className=\"border border-gray-300 p-2\">{invoice.customer_name}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    {new Date(invoice.date).toLocaleDateString('ar-EG')}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {invoice.total_amount?.toFixed(2) || '0.00'}</td>\n                  <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {invoice.paid_amount?.toFixed(2) || '0.00'}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className=\"font-bold text-red-600\">\n                      Ø¬.Ù… {invoice.remaining_amount?.toFixed(2) || '0.00'}\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className={`px-2 py-1 rounded text-sm ${\n                      invoice.status === 'ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©' ? 'bg-red-100 text-red-800' :\n                      invoice.status === 'Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹' ? 'bg-yellow-100 text-yellow-800' :\n                      'bg-green-100 text-green-800'\n                    }`}>\n                      {invoice.status}\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex space-x-2 space-x-reverse\">\n                      <button\n                        onClick={() => setSelectedInvoice(invoice)}\n                        className=\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\"\n                      >\n                        Ø¹Ø±Ø¶ Ø§Ù„Ø¯ÙØ¹Ø§Øª\n                      </button>\n                      <button\n                        onClick={() => setSelectedInvoice(invoice)}\n                        className=\"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600\"\n                      >\n                        Ø¯ÙØ¹\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n          \n          {unpaidInvoices.length === 0 && (\n            <div className=\"text-center py-8 text-gray-500\">\n              Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙˆØ§ØªÙŠØ± ØºÙŠØ± Ù…Ø³Ø¯Ø¯Ø©\n            </div>\n          )}\n        </div>\n\n        {/* Summary */}\n        <div className=\"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"bg-red-50 p-4 rounded\">\n            <h4 className=\"font-semibold text-red-800\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø©</h4>\n            <p className=\"text-2xl font-bold text-red-600\">\n              Ø¬.Ù… {unpaidInvoices.reduce((sum, inv) => sum + (inv.remaining_amount || 0), 0).toFixed(2)}\n            </p>\n          </div>\n          \n          <div className=\"bg-yellow-50 p-4 rounded\">\n            <h4 className=\"font-semibold text-yellow-800\">Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©</h4>\n            <p className=\"text-2xl font-bold text-yellow-600\">{unpaidInvoices.length}</p>\n          </div>\n          \n          <div className=\"bg-blue-50 p-4 rounded\">\n            <h4 className=\"font-semibold text-blue-800\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø£ØµÙ„ÙŠ</h4>\n            <p className=\"text-2xl font-bold text-blue-600\">\n              Ø¬.Ù… {unpaidInvoices.reduce((sum, inv) => sum + (inv.total_amount || 0), 0).toFixed(2)}\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Expenses Component\nconst Expenses = () => {\n  const [expenses, setExpenses] = useState([]);\n  const [newExpense, setNewExpense] = useState({\n    description: '',\n    amount: '',\n    category: 'Ø®Ø§Ù…Ø§Øª'\n  });\n\n  const expenseCategories = ['Ø®Ø§Ù…Ø§Øª', 'Ø±ÙˆØ§ØªØ¨', 'ÙƒÙ‡Ø±Ø¨Ø§Ø¡', 'ØµÙŠØ§Ù†Ø©', 'Ø£Ø®Ø±Ù‰'];\n\n  useEffect(() => {\n    fetchExpenses();\n  }, []);\n\n  const fetchExpenses = async () => {\n    try {\n      const response = await axios.get(`${API}/expenses`);\n      setExpenses(response.data);\n    } catch (error) {\n      console.error('Error fetching expenses:', error);\n    }\n  };\n\n  const addExpense = async () => {\n    if (!newExpense.description || !newExpense.amount) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      await axios.post(`${API}/expenses`, {\n        ...newExpense,\n        amount: parseFloat(newExpense.amount)\n      });\n\n      setNewExpense({\n        description: '',\n        amount: '',\n        category: 'Ø®Ø§Ù…Ø§Øª'\n      });\n\n      fetchExpenses();\n      alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ØµØ±ÙˆÙ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error adding expense:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ØµØ±ÙˆÙ');\n    }\n  };\n\n  const deleteExpense = async (expenseId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ØµØ±ÙˆÙØŸ')) return;\n\n    try {\n      await axios.delete(`${API}/expenses/${expenseId}`);\n      fetchExpenses();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ØµØ±ÙˆÙ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting expense:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ØµØ±ÙˆÙ');\n    }\n  };\n\n  const getTotalExpenses = () => {\n    return expenses.reduce((sum, expense) => sum + expense.amount, 0);\n  };\n\n  const getExpensesByCategory = () => {\n    const byCategory = {};\n    expenseCategories.forEach(cat => {\n      byCategory[cat] = expenses\n        .filter(exp => exp.category === cat)\n        .reduce((sum, exp) => sum + exp.amount, 0);\n    });\n    return byCategory;\n  };\n\n  const clearAllExpenses = async () => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§ØªØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) return;\n    \n    try {\n      await axios.delete(`${API}/expenses/clear-all`);\n      fetchExpenses();\n      alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª');\n    } catch (error) {\n      console.error('Error clearing expenses:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-blue-600 mb-4\">Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h2>\n        \n        <div className=\"flex space-x-4 space-x-reverse mb-4\">\n          <button \n            onClick={clearAllExpenses}\n            className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n            Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n          </button>\n          <button \n            onClick={fetchExpenses}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n            Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => window.print()}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n            Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n          <select className=\"border border-gray-300 rounded px-3 py-2\">\n            <option>ÙŠÙˆÙ…ÙŠ</option>\n            <option>Ø£Ø³Ø¨ÙˆØ¹ÙŠ</option>\n            <option>Ø´Ù‡Ø±ÙŠ</option>\n            <option>Ø³Ù†ÙˆÙŠ</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Add New Expense */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ Ø¬Ø¯ÙŠØ¯</h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ÙˆØµÙ Ø§Ù„Ù…ØµØ±ÙˆÙ</label>\n            <input\n              type=\"text\"\n              value={newExpense.description}\n              onChange={(e) => setNewExpense({...newExpense, description: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"Ù…Ø«Ø§Ù„: Ø´Ø±Ø§Ø¡ Ø®Ø§Ù…Ø§ØªØŒ ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ø§Ù„Ù…ØµÙ†Ø¹\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù…Ø¨Ù„Øº</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newExpense.amount}\n              onChange={(e) => setNewExpense({...newExpense, amount: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"0.00\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ÙØ¦Ø©</label>\n            <select\n              value={newExpense.category}\n              onChange={(e) => setNewExpense({...newExpense, category: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              {expenseCategories.map(category => (\n                <option key={category} value={category}>{category}</option>\n              ))}\n            </select>\n          </div>\n        </div>\n        \n        <button\n          onClick={addExpense}\n          className=\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\"\n        >\n          Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ØµØ±ÙˆÙ\n        </button>\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6\">\n        <div className=\"bg-red-50 p-6 rounded-lg\">\n          <h3 className=\"text-lg font-semibold text-red-800 mb-2\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>\n          <p className=\"text-3xl font-bold text-red-600\">\n            Ø¬.Ù… {getTotalExpenses().toFixed(2)}\n          </p>\n        </div>\n        \n        <div className=\"bg-blue-50 p-6 rounded-lg\">\n          <h3 className=\"text-lg font-semibold text-blue-800 mb-2\">Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>\n          <p className=\"text-3xl font-bold text-blue-600\">{expenses.length}</p>\n        </div>\n        \n        <div className=\"bg-yellow-50 p-6 rounded-lg\">\n          <h3 className=\"text-lg font-semibold text-yellow-800 mb-2\">Ù…ØªÙˆØ³Ø· Ø§Ù„Ù…ØµØ±ÙˆÙ</h3>\n          <p className=\"text-3xl font-bold text-yellow-600\">\n            Ø¬.Ù… {expenses.length > 0 ? (getTotalExpenses() / expenses.length).toFixed(2) : '0.00'}\n          </p>\n        </div>\n      </div>\n\n      {/* Expenses by Category */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©</h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\">\n          {Object.entries(getExpensesByCategory()).map(([category, amount]) => (\n            <div key={category} className=\"text-center p-4 border rounded\">\n              <h4 className=\"font-medium text-gray-700\">{category}</h4>\n              <p className=\"text-xl font-bold text-blue-600\">Ø¬.Ù… {amount.toFixed(2)}</p>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Expenses List */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙˆØµÙ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø¨Ù„Øº</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙØ¦Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {expenses.map((expense) => (\n                <tr key={expense.id}>\n                  <td className=\"border border-gray-300 p-2\">{expense.description}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className=\"font-semibold text-red-600\">\n                      Ø¬.Ù… {expense.amount.toFixed(2)}\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className={`px-2 py-1 rounded text-sm ${\n                      expense.category === 'Ø®Ø§Ù…Ø§Øª' ? 'bg-blue-100 text-blue-800' :\n                      expense.category === 'Ø±ÙˆØ§ØªØ¨' ? 'bg-green-100 text-green-800' :\n                      expense.category === 'ÙƒÙ‡Ø±Ø¨Ø§Ø¡' ? 'bg-yellow-100 text-yellow-800' :\n                      expense.category === 'ØµÙŠØ§Ù†Ø©' ? 'bg-purple-100 text-purple-800' :\n                      'bg-gray-100 text-gray-800'\n                    }`}>\n                      {expense.category}\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    {new Date(expense.date).toLocaleDateString('ar-EG')}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <button \n                      onClick={() => deleteExpense(expense.id)}\n                      className=\"bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600\">\n                      Ø­Ø°Ù\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n          \n          {expenses.length === 0 && (\n            <div className=\"text-center py-8 text-gray-500\">\n              Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ØµØ±ÙˆÙØ§Øª Ù…Ø³Ø¬Ù„Ø©\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Revenue Component\nconst Revenue = () => {\n  const [revenueData, setRevenueData] = useState({\n    total_revenue: 0,\n    total_expenses: 0,\n    material_cost: 0,\n    profit: 0\n  });\n  const [period, setPeriod] = useState('daily');\n\n  useEffect(() => {\n    fetchRevenueData();\n  }, [period]);\n\n  const fetchRevenueData = async () => {\n    try {\n      const response = await axios.get(`${API}/reports/revenue?period=${period}`);\n      setRevenueData(response.data);\n    } catch (error) {\n      console.error('Error fetching revenue data:', error);\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-blue-600 mb-4\">Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</h2>\n        \n        <div className=\"flex space-x-4 space-x-reverse mb-4\">\n          <button className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n            Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n          </button>\n          <button \n            onClick={fetchRevenueData}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n            Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => window.print()}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n            Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n          <select \n            value={period}\n            onChange={(e) => setPeriod(e.target.value)}\n            className=\"border border-gray-300 rounded px-3 py-2\">\n            <option value=\"daily\">Ø§Ù„ÙŠÙˆÙ…</option>\n            <option value=\"weekly\">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</option>\n            <option value=\"monthly\">Ø§Ù„Ø´Ù‡Ø±</option>\n            <option value=\"yearly\">Ø§Ù„Ø³Ù†Ø©</option>\n          </select>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {/* Revenue Cards */}\n        <div className=\"bg-green-50 p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold text-green-800 text-center mb-2\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</h3>\n          <p className=\"text-3xl font-bold text-green-600 text-center\">\n            Ø¬.Ù… {revenueData.total_revenue?.toFixed(2) || '0.00'}\n          </p>\n        </div>\n        \n        <div className=\"bg-red-50 p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold text-red-800 text-center mb-2\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>\n          <p className=\"text-3xl font-bold text-red-600 text-center\">\n            Ø¬.Ù… {revenueData.total_expenses?.toFixed(2) || '0.00'}\n          </p>\n        </div>\n        \n        <div className=\"bg-yellow-50 p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold text-yellow-800 text-center mb-2\">ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø§Ù…Ø§Øª</h3>\n          <p className=\"text-3xl font-bold text-yellow-600 text-center\">\n            Ø¬.Ù… {revenueData.material_cost?.toFixed(2) || '0.00'}\n          </p>\n        </div>\n        \n        <div className=\"bg-blue-50 p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold text-blue-800 text-center mb-2\">ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­</h3>\n          <p className={`text-3xl font-bold text-center ${\n            (revenueData.profit || 0) >= 0 ? 'text-blue-600' : 'text-red-600'\n          }`}>\n            Ø¬.Ù… {revenueData.profit?.toFixed(2) || '0.00'}\n          </p>\n        </div>\n      </div>\n\n      {/* Summary Table */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mt-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª - {\n          period === 'daily' ? 'ÙŠÙˆÙ…ÙŠ' :\n          period === 'weekly' ? 'Ø£Ø³Ø¨ÙˆØ¹ÙŠ' :\n          period === 'monthly' ? 'Ø´Ù‡Ø±ÙŠ' : 'Ø³Ù†ÙˆÙŠ'\n        }</h3>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-3\">Ø§Ù„Ø¨ÙŠØ§Ù†</th>\n                <th className=\"border border-gray-300 p-3\">Ø§Ù„Ù…Ø¨Ù„Øº (Ø¬.Ù…)</th>\n                <th className=\"border border-gray-300 p-3\">Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ©</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td className=\"border border-gray-300 p-3 font-semibold\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</td>\n                <td className=\"border border-gray-300 p-3 text-green-600 font-bold\">\n                  {revenueData.total_revenue?.toFixed(2) || '0.00'}\n                </td>\n                <td className=\"border border-gray-300 p-3\">100%</td>\n              </tr>\n              <tr>\n                <td className=\"border border-gray-300 p-3\">ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø§Ù…Ø§Øª</td>\n                <td className=\"border border-gray-300 p-3 text-yellow-600 font-semibold\">\n                  -{revenueData.material_cost?.toFixed(2) || '0.00'}\n                </td>\n                <td className=\"border border-gray-300 p-3\">\n                  {revenueData.total_revenue > 0 \n                    ? ((revenueData.material_cost / revenueData.total_revenue) * 100).toFixed(1) \n                    : '0.0'}%\n                </td>\n              </tr>\n              <tr>\n                <td className=\"border border-gray-300 p-3\">Ù…ØµØ±ÙˆÙØ§Øª Ø£Ø®Ø±Ù‰</td>\n                <td className=\"border border-gray-300 p-3 text-red-600 font-semibold\">\n                  -{((revenueData.total_expenses || 0) - (revenueData.material_cost || 0)).toFixed(2)}\n                </td>\n                <td className=\"border border-gray-300 p-3\">\n                  {revenueData.total_revenue > 0 \n                    ? (((revenueData.total_expenses - revenueData.material_cost) / revenueData.total_revenue) * 100).toFixed(1) \n                    : '0.0'}%\n                </td>\n              </tr>\n              <tr className=\"bg-blue-50\">\n                <td className=\"border border-gray-300 p-3 font-bold\">ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­</td>\n                <td className={`border border-gray-300 p-3 font-bold ${\n                  (revenueData.profit || 0) >= 0 ? 'text-blue-600' : 'text-red-600'\n                }`}>\n                  {revenueData.profit?.toFixed(2) || '0.00'}\n                </td>\n                <td className=\"border border-gray-300 p-3 font-bold\">\n                  {revenueData.total_revenue > 0 \n                    ? ((revenueData.profit / revenueData.total_revenue) * 100).toFixed(1) \n                    : '0.0'}%\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Performance Indicators */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mt-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡</h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"text-center p-4 border rounded\">\n            <h4 className=\"font-medium text-gray-700 mb-2\">Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­</h4>\n            <p className={`text-2xl font-bold ${\n              (revenueData.profit || 0) >= 0 ? 'text-green-600' : 'text-red-600'\n            }`}>\n              {revenueData.total_revenue > 0 \n                ? ((revenueData.profit / revenueData.total_revenue) * 100).toFixed(1) \n                : '0.0'}%\n            </p>\n          </div>\n          \n          <div className=\"text-center p-4 border rounded\">\n            <h4 className=\"font-medium text-gray-700 mb-2\">Ù†Ø³Ø¨Ø© ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø§Ù…Ø§Øª</h4>\n            <p className=\"text-2xl font-bold text-yellow-600\">\n              {revenueData.total_revenue > 0 \n                ? ((revenueData.material_cost / revenueData.total_revenue) * 100).toFixed(1) \n                : '0.0'}%\n            </p>\n          </div>\n          \n          <div className=\"text-center p-4 border rounded\">\n            <h4 className=\"font-medium text-gray-700 mb-2\">Ù†Ø³Ø¨Ø© Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©</h4>\n            <p className=\"text-2xl font-bold text-red-600\">\n              {revenueData.total_revenue > 0 \n                ? ((revenueData.total_expenses / revenueData.total_revenue) * 100).toFixed(1) \n                : '0.0'}%\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Invoices Component\nconst Invoices = () => {\n  const [invoices, setInvoices] = useState([]);\n  const [customers, setCustomers] = useState([]);\n  const [filterStatus, setFilterStatus] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [editingInvoice, setEditingInvoice] = useState(null);\n  const [editForm, setEditForm] = useState({\n    invoice_title: '',\n    supervisor_name: '',\n    customer_name: '',\n    payment_method: 'Ù†Ù‚Ø¯ÙŠ',\n    discount_type: 'amount',\n    discount_value: 0,\n    items: [],\n    notes: ''\n  });\n\n  useEffect(() => {\n    fetchInvoices();\n    fetchCustomers();\n  }, []);\n\n  const fetchInvoices = async () => {\n    try {\n      console.log('Fetching invoices...');\n      const response = await axios.get(`${API}/invoices`);\n      console.log('Invoices fetched:', response.data.length, 'invoices');\n      setInvoices(response.data);\n    } catch (error) {\n      console.error('Error fetching invoices:', error);\n      alert('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙˆØ§ØªÙŠØ±: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const fetchCustomers = async () => {\n    try {\n      const response = await axios.get(`${API}/customers`);\n      setCustomers(response.data);\n    } catch (error) {\n      console.error('Error fetching customers:', error);\n    }\n  };\n\n  const deleteInvoice = async (invoiceId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©ØŸ')) return;\n\n    try {\n      await axios.delete(`${API}/invoices/${invoiceId}`);\n      fetchInvoices();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting invoice:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø©');\n    }\n  };\n\n  const startEditInvoice = (invoice) => {\n    setEditingInvoice(invoice.id);\n    setEditForm({\n      invoice_title: invoice.invoice_title || '',\n      supervisor_name: invoice.supervisor_name || '',\n      customer_name: invoice.customer_name || '',\n      payment_method: invoice.payment_method || 'Ù†Ù‚Ø¯ÙŠ',\n      discount_type: invoice.discount_type || 'amount',\n      discount_value: invoice.discount_value || 0,\n      items: invoice.items || [],\n      notes: invoice.notes || ''\n    });\n  };\n\n  const cancelEdit = () => {\n    setEditingInvoice(null);\n    setEditForm({\n      invoice_title: '',\n      supervisor_name: '',\n      customer_name: '',\n      payment_method: 'Ù†Ù‚Ø¯ÙŠ',\n      discount_type: 'amount',\n      discount_value: 0,\n      items: [],\n      notes: ''\n    });\n  };\n\n  const saveInvoiceEdit = async () => {\n    if (!editForm.customer_name.trim()) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„');\n      return;\n    }\n\n    try {\n      console.log('Saving invoice edit for ID:', editingInvoice);\n      console.log('Edit form data:', editForm);\n      \n      // Calculate totals\n      const subtotal = editForm.items.reduce((sum, item) => sum + (item.total_price || 0), 0);\n      let discountAmount = 0;\n      \n      if (editForm.discount_type === 'percentage') {\n        discountAmount = (subtotal * parseFloat(editForm.discount_value || 0)) / 100;\n      } else {\n        discountAmount = parseFloat(editForm.discount_value || 0);\n      }\n      \n      const totalAfterDiscount = subtotal - discountAmount;\n\n      const updatedInvoice = {\n        ...editForm,\n        subtotal: subtotal,\n        discount: discountAmount,\n        total_after_discount: totalAfterDiscount,\n        total_amount: totalAfterDiscount\n      };\n\n      console.log('Sending update to backend:', updatedInvoice);\n      \n      const response = await axios.put(`${API}/invoices/${editingInvoice}`, updatedInvoice);\n      console.log('Update response:', response.data);\n      \n      console.log('Fetching invoices after update...');\n      await fetchInvoices();\n      \n      cancelEdit();\n      alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error updating invoice:', error);\n      console.error('Error response:', error.response?.data);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ§ØªÙˆØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const updateInvoiceStatus = async (invoiceId, newStatus) => {\n    try {\n      await axios.put(`${API}/invoices/${invoiceId}/status`, \n        { status: newStatus }, {\n        headers: { 'Content-Type': 'application/json' }\n      });\n      fetchInvoices();\n      alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©');\n    } catch (error) {\n      console.error('Error updating invoice status:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©');\n    }\n  };\n\n  const printInvoice = (invoice) => {\n    const printContent = `\n      <!DOCTYPE html>\n      <html dir=\"rtl\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <style>\n          body {\n            font-family: Arial, sans-serif;\n            margin: 0;\n            padding: 20px;\n            direction: rtl;\n            font-size: 15px;\n          }\n          .header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            border-bottom: 3px solid #000;\n            padding-bottom: 10px;\n            margin-bottom: 20px;\n          }\n          .company-info {\n            text-align: right;\n          }\n          .company-name {\n            font-size: 32px;\n            font-weight: bold;\n            color: #000;\n            margin: 0;\n          }\n          .company-subtitle {\n            font-size: 20px;\n            margin: 5px 0;\n            color: #666;\n          }\n          .company-details {\n            font-size: 16px;\n            margin: 2px 0;\n            color: #333;\n          }\n          .logo-section {\n            text-align: center;\n            flex: 1;\n          }\n          .invoice-title {\n            font-size: 22px;\n            font-weight: bold;\n            background-color: #ff4444;\n            color: white;\n            padding: 8px 20px;\n            border-radius: 5px;\n            display: inline-block;\n            margin-bottom: 10px;\n          }\n          .invoice-number {\n            font-size: 20px;\n            font-weight: bold;\n            color: #ff4444;\n          }\n          .customer-info {\n            display: flex;\n            justify-content: space-between;\n            margin: 20px 0;\n          }\n          .customer-details {\n            text-align: right;\n          }\n          .date-info {\n            text-align: left;\n          }\n          .products-table {\n            width: 100%;\n            border-collapse: collapse;\n            border: 2px solid #000;\n            margin: 20px 0;\n          }\n          .products-table th,\n          .products-table td {\n            border: 1px solid #000;\n            padding: 8px;\n            text-align: center;\n          }\n          .products-table th {\n            background-color: #f0f0f0;\n            font-weight: bold;\n          }\n          .footer {\n            margin-top: 30px;\n            border-top: 1px solid #ccc;\n            padding-top: 15px;\n            display: flex;\n            justify-content: space-between;\n            font-size: 13px;\n            color: #666;\n          }\n          .total-section {\n            text-align: left;\n            margin-top: 10px;\n          }\n          .total-amount {\n            font-size: 20px;\n            font-weight: bold;\n            border: 2px solid #000;\n            padding: 10px;\n            display: inline-block;\n            background-color: #f9f9f9;\n          }\n          @media print {\n            body { margin: 0; padding: 10px; }\n          }\n        </style>\n      </head>\n      <body>\n        <!-- Header Section -->\n        <div class=\"header\">\n          <div class=\"company-info\">\n            <h1 class=\"company-name\">Ø´Ø±ÙƒØ© Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„</h1>\n            <p class=\"company-subtitle\">ØªØµÙ†ÙŠØ¹ Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£ÙˆÙŠÙ„ Ø³ÙŠÙ„</p>\n            <p class=\"company-details\">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø·Ø§Ø± Ø­ØªÙ‰ Ù¥Ù Ù Ù…Ù„</p>\n            <p class=\"company-details\">Ù‡ÙŠØ¯Ø±ÙˆÙ„ÙŠÙƒ - Ù†ÙŠÙˆÙ…Ø§ØªÙŠÙƒ</p>\n          </div>\n          \n          <div class=\"logo-section\">\n            <img src=\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\" \n                 alt=\"Master Seal Logo\" \n                 style=\"max-width: 120px; max-height: 80px; margin-bottom: 10px;\">\n            <div class=\"invoice-title\">${invoice.invoice_title || 'Ø¹Ø±Ø¶ Ø³Ø¹Ø±'}</div>\n            <div class=\"invoice-number\">${invoice.invoice_number}</div>\n          </div>\n        </div>\n\n        <!-- Customer and Date Info -->\n        <div class=\"customer-info\">\n          <div class=\"customer-details\">\n            <p><strong>Ø§Ù„Ø³Ø§Ø¯Ø©:</strong> ${invoice.customer_name}</p>\n            <p><strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> ${invoice.customer_address || '........................'}</p>\n          </div>\n          <div class=\"date-info\">\n            <p><strong>ØªØ­Ø±ÙŠØ± ÙÙŠ:</strong> ${new Date(invoice.date).toLocaleDateString('ar-EG')}</p>\n            <p><strong>Date:</strong> ${new Date(invoice.date).toLocaleDateString('en-GB')}</p>\n          </div>\n        </div>\n\n        <!-- Products Table -->\n        <table class=\"products-table\">\n          <thead>\n            <tr>\n              <th style=\"width: 60px;\">Ø§Ù„Ù…Ø³Ù„Ø³Ù„<br>Item</th>\n              <th style=\"width: 80px;\">Ø§Ù„ÙƒÙ…ÙŠØ©<br>QTY</th>\n              <th style=\"width: 200px;\">Description<br>Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª</th>\n              <th style=\"width: 100px;\">Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©<br>Unit Price</th>\n              <th style=\"width: 100px;\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ<br>Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${invoice.items.map((item, index) => `\n              <tr>\n                <td>${index + 1}</td>\n                <td>${item.quantity}</td>\n                <td style=\"text-align: right;\">\n                  ${item.local_product_details ? \n                    `${item.local_product_details.product_size} - ${item.local_product_details.product_type}` : \n                    `${item.seal_type} - ${item.material_type}<br>\n                    <small>${item.inner_diameter} Ã— ${item.outer_diameter} Ã— ${item.height} Ù…Ù…${item.wall_height ? ` (Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø©: ${item.wall_height} Ù…Ù…)` : \"\"}</small>`\n                  }\n                </td>\n                <td>Ø¬.Ù… ${item.unit_price.toFixed(2)}</td>\n                <td>Ø¬.Ù… ${item.total_price.toFixed(2)}</td>\n              </tr>\n            `).join('')}\n            <!-- Empty rows for additional items -->\n            ${Array.from({length: Math.max(0, 8 - invoice.items.length)}, (_, i) => `\n              <tr style=\"height: 40px;\">\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n              </tr>\n            `).join('')}\n          </tbody>\n        </table>\n\n        <!-- Total Section -->\n        <div class=\"total-section\">\n          <div style=\"text-align: left; margin-bottom: 10px;\">\n            ${invoice.subtotal ? `\n              <div style=\"margin-bottom: 5px;\">\n                <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ: Ø¬.Ù… ${invoice.subtotal.toFixed(2)}</span>\n              </div>\n            ` : ''}\n            ${invoice.discount && invoice.discount > 0 ? `\n              <div style=\"margin-bottom: 5px; color: #d32f2f;\">\n                <span>Ø§Ù„Ø®ØµÙ…: - Ø¬.Ù… ${invoice.discount.toFixed(2)}</span>\n                ${invoice.discount_type === 'percentage' && invoice.discount_value ? \n                  ` <small>(${invoice.discount_value}%)</small>` : ''}\n              </div>\n              <hr style=\"margin: 5px 0; border: 1px solid #000;\">\n            ` : ''}\n          </div>\n          <div class=\"total-amount\">\n            Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: Ø¬.Ù… ${(invoice.total_after_discount || invoice.total_amount).toFixed(2)}\n          </div>\n        </div>\n\n        <!-- Additional Info -->\n        <div style=\"margin-top: 20px; text-align: center; font-size: 13px;\">\n          <p><strong>Ù…Ù„Ø­ÙˆØ¸Ø©:</strong> ÙÙ‚Ø· ÙˆÙ‚Ø¯Ø±Ù‡</p>\n          <div style=\"height: 30px; border-bottom: 1px solid #000; margin: 10px 40px;\"></div>\n        </div>\n\n        <!-- Footer -->\n        <div class=\"footer\">\n          <div>\n            <p><strong>Ø§Ù„ØªÙˆÙ‚ÙŠØ¹:</strong></p>\n            <p>Ù…ÙˆØ¨Ø§ÙŠÙ„: Ù Ù¡Ù Ù¢Ù Ù¦Ù£Ù Ù¦Ù§Ù§ - Ù Ù¡Ù Ù¦Ù¢Ù£Ù©Ù Ù¨Ù§Ù </p>\n            <p>ØªÙ„ÙŠÙÙˆÙ†: Ù Ù¡Ù Ù¢Ù Ù¦Ù£Ù Ù¦Ù§Ù§</p>\n          </div>\n          <div style=\"text-align: left;\">\n            <p><strong>Ø§Ù„Ù…Ø³ØªÙ„Ù…:</strong></p>\n            <p>Ø§Ù„Ø­Ø±ÙÙŠÙŠÙ† - Ø§Ù„Ø³Ù„Ø§Ù… - Ø£Ù…Ø§Ù… Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª</p>\n            <p>Ù…ÙˆØ¨Ø§ÙŠÙ„: Ù Ù¡Ù Ù¢Ù Ù¦Ù£Ù Ù¦Ù§Ù§ - Ù Ù¡Ù Ù¦Ù¢Ù£Ù©Ù Ù¨Ù§Ù </p>\n          </div>\n        </div>\n\n        <!-- Note -->\n        <div style=\"text-align: center; margin-top: 20px; font-size: 12px; color: #666;\">\n          <p>ÙŠÙ‚Ø± Ø§Ù„Ù…Ø´ØªØ±ÙŠ Ø¨Ø£Ù†Ù‡ Ù‚Ø§Ù… Ø¨Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø¨Ø¶Ø§Ø¹Ø© ÙˆÙ‚Ø¨ÙˆÙ„Ù‡Ø§</p>\n        </div>\n      </body>\n      </html>\n    `;\n    \n    const printWindow = window.open('', '_blank');\n    printWindow.document.write(printContent);\n    printWindow.document.close();\n    printWindow.print();\n  };\n\n  const clearAllInvoices = async () => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ±ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) return;\n    \n    try {\n      await axios.delete(`${API}/invoices/clear-all`);\n      fetchInvoices();\n      alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ±');\n    } catch (error) {\n      console.error('Error clearing invoices:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');\n    }\n  };\n\n  const filteredInvoices = invoices.filter(invoice => {\n    const matchesStatus = filterStatus === '' || invoice.status === filterStatus;\n    const matchesSearch = searchTerm === '' || \n      invoice.invoice_number.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      invoice.customer_name.toLowerCase().includes(searchTerm.toLowerCase());\n    return matchesStatus && matchesSearch;\n  });\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-blue-600 mb-4\">Ø§Ù„ÙÙˆØ§ØªÙŠØ±</h2>\n        \n        <div className=\"flex space-x-4 space-x-reverse mb-4\">\n          <button \n            onClick={clearAllInvoices}\n            className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n            Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n          </button>\n          <button \n            onClick={fetchInvoices}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n            Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => window.print()}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n            Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n          <select className=\"border border-gray-300 rounded px-3 py-2\">\n            <option>ÙŠÙˆÙ…ÙŠ</option>\n            <option>Ø£Ø³Ø¨ÙˆØ¹ÙŠ</option>\n            <option>Ø´Ù‡Ø±ÙŠ</option>\n            <option>Ø³Ù†ÙˆÙŠ</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Filters */}\n      <div className=\"bg-white p-4 rounded-lg shadow-md mb-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø¨Ø­Ø«</label>\n            <input\n              type=\"text\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              placeholder=\"Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø£Ùˆ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„\"\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©</label>\n            <select\n              value={filterStatus}\n              onChange={(e) => setFilterStatus(e.target.value)}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"\">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª</option>\n              <option value=\"Ù…Ø¯ÙÙˆØ¹Ø©\">Ù…Ø¯ÙÙˆØ¹Ø©</option>\n              <option value=\"ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©\">ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©</option>\n              <option value=\"Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹\">Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹</option>\n              <option value=\"Ø§Ù†ØªØ¸Ø§Ø±\">Ø§Ù†ØªØ¸Ø§Ø±</option>\n              <option value=\"ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°\">ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°</option>\n            </select>\n          </div>\n          \n          <div className=\"flex items-end\">\n            <button\n              onClick={() => { setSearchTerm(''); setFilterStatus(''); }}\n              className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n            >\n              Ù…Ø³Ø­ Ø§Ù„ÙÙ„Ø§ØªØ±\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\n        <div className=\"bg-blue-50 p-4 rounded-lg text-center\">\n          <h3 className=\"font-semibold text-blue-800\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙÙˆØ§ØªÙŠØ±</h3>\n          <p className=\"text-2xl font-bold text-blue-600\">{invoices.length}</p>\n        </div>\n        \n        <div className=\"bg-green-50 p-4 rounded-lg text-center\">\n          <h3 className=\"font-semibold text-green-800\">Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø©</h3>\n          <p className=\"text-2xl font-bold text-green-600\">\n            {invoices.filter(inv => inv.status === 'Ù…Ø¯ÙÙˆØ¹Ø©').length}\n          </p>\n        </div>\n        \n        <div className=\"bg-red-50 p-4 rounded-lg text-center\">\n          <h3 className=\"font-semibold text-red-800\">ØºÙŠØ± Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø©</h3>\n          <p className=\"text-2xl font-bold text-red-600\">\n            {invoices.filter(inv => inv.status === 'ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©').length}\n          </p>\n        </div>\n        \n        <div className=\"bg-yellow-50 p-4 rounded-lg text-center\">\n          <h3 className=\"font-semibold text-yellow-800\">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</h3>\n          <p className=\"text-2xl font-bold text-yellow-600\">\n            Ø¬.Ù… {invoices.reduce((sum, inv) => sum + (inv.total_amount || 0), 0).toFixed(2)}\n          </p>\n        </div>\n      </div>\n\n      {/* Invoices Table */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ±</h3>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¹Ù…ÙŠÙ„</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                <th className=\"border border-gray-300 p-2\">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø®ØµÙ…</th>  \n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø§Ù„Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredInvoices.map((invoice) => (\n                <tr key={invoice.id}>\n                  <td className=\"border border-gray-300 p-2 font-semibold\">\n                    {invoice.invoice_number}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">{invoice.customer_name}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    {new Date(invoice.date).toLocaleDateString('ar-EG')}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">{invoice.payment_method}</td>\n                  <td className=\"border border-gray-300 p-2 font-semibold\">\n                    Ø¬.Ù… {invoice.subtotal?.toFixed(2) || (invoice.total_amount?.toFixed(2)) || '0.00'}\n                  </td>\n                  <td className=\"border border-gray-300 p-2 text-red-600\">\n                    {invoice.discount && invoice.discount > 0 ? (\n                      <div>\n                        <span>Ø¬.Ù… {invoice.discount.toFixed(2)}</span>\n                        {invoice.discount_type === 'percentage' && invoice.discount_value && (\n                          <small className=\"block text-xs\">(%{invoice.discount_value})</small>\n                        )}\n                      </div>\n                    ) : (\n                      <span className=\"text-gray-400\">Ù„Ø§ ÙŠÙˆØ¬Ø¯</span>\n                    )}\n                  </td>\n                  <td className=\"border border-gray-300 p-2 font-semibold text-green-600\">\n                    Ø¬.Ù… {(invoice.total_after_discount || invoice.total_amount)?.toFixed(2) || '0.00'}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className={`px-2 py-1 rounded text-sm cursor-pointer ${\n                      invoice.status === 'Ù…Ø¯ÙÙˆØ¹Ø©' ? 'bg-green-100 text-green-800' :\n                      invoice.status === 'ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©' ? 'bg-red-100 text-red-800' :\n                      invoice.status === 'Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹' ? 'bg-yellow-100 text-yellow-800' :\n                      invoice.status === 'Ø§Ù†ØªØ¸Ø§Ø±' ? 'bg-blue-100 text-blue-800' :\n                      invoice.status === 'ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°' ? 'bg-green-100 text-green-800' :\n                      invoice.status === 'ØªÙ… Ø§Ù„ØªØµÙ†ÙŠØ¹' ? 'bg-purple-100 text-purple-800' :\n                      'bg-gray-100 text-gray-800'\n                    }`}>\n                      {invoice.status}\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex space-x-2 space-x-reverse\">\n                      <button\n                        onClick={() => printInvoice(invoice)}\n                        className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                      >\n                        Ø·Ø¨Ø§Ø¹Ø©\n                      </button>\n                      <button\n                        onClick={() => startEditInvoice(invoice)}\n                        className=\"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600\"\n                      >\n                        ØªØ¹Ø¯ÙŠÙ„\n                      </button>\n                      <button\n                        onClick={() => deleteInvoice(invoice.id)}\n                        className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                      >\n                        Ø­Ø°Ù\n                      </button>\n                      {invoice.status === 'Ø§Ù†ØªØ¸Ø§Ø±' && (\n                        <button\n                          onClick={() => updateInvoiceStatus(invoice.id, 'ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°')}\n                          className=\"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600\"\n                        >\n                          ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°\n                        </button>\n                      )}\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n          \n          {filteredInvoices.length === 0 && (\n            <div className=\"text-center py-8 text-gray-500\">\n              Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙˆØ§ØªÙŠØ± ØªØ·Ø§Ø¨Ù‚ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¨Ø­Ø«\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Edit Invoice Modal */}\n      {editingInvoice && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white p-6 rounded-lg shadow-lg w-full max-w-4xl max-h-screen overflow-y-auto\" dir=\"rtl\">\n            <h3 className=\"text-xl font-semibold mb-4\">ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø©</h3>\n            \n            <div className=\"grid grid-cols-2 gap-4 mb-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©</label>\n                <input\n                  type=\"text\"\n                  value={editForm.invoice_title}\n                  onChange={(e) => setEditForm({...editForm, invoice_title: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù</label>\n                <input\n                  type=\"text\"\n                  value={editForm.supervisor_name}\n                  onChange={(e) => setEditForm({...editForm, supervisor_name: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</label>\n                <input\n                  type=\"text\"\n                  value={editForm.customer_name}\n                  onChange={(e) => setEditForm({...editForm, customer_name: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„\"\n                  required\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</label>\n                <select\n                  value={editForm.payment_method}\n                  onChange={(e) => setEditForm({...editForm, payment_method: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                >\n                  <option value=\"Ù†Ù‚Ø¯ÙŠ\">Ù†Ù‚Ø¯ÙŠ</option>\n                  <option value=\"ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ Ø§Ù„ØµØ§ÙˆÙŠ\">ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ Ø§Ù„ØµØ§ÙˆÙŠ</option>\n                  <option value=\"ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ ÙˆØ§Ø¦Ù„\">ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ ÙˆØ§Ø¦Ù„</option>\n                  <option value=\"Ø¢Ø¬Ù„\">Ø¢Ø¬Ù„</option>\n                  <option value=\"Ø§Ù†Ø³ØªØ§ Ø¨Ø§ÙŠ\">Ø§Ù†Ø³ØªØ§ Ø¨Ø§ÙŠ</option>\n                  <option value=\"Yad_Elsawy\">Yad Elsawy</option>\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø®ØµÙ…</label>\n                <select\n                  value={editForm.discount_type}\n                  onChange={(e) => setEditForm({...editForm, discount_type: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                >\n                  <option value=\"amount\">Ù…Ø¨Ù„Øº Ø«Ø§Ø¨Øª</option>\n                  <option value=\"percentage\">Ù†Ø³Ø¨Ø© Ù…Ø¦ÙˆÙŠØ©</option>\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù‚ÙŠÙ…Ø© Ø§Ù„Ø®ØµÙ…</label>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  value={editForm.discount_value}\n                  onChange={(e) => setEditForm({...editForm, discount_value: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder={editForm.discount_type === 'percentage' ? '0-100' : '0.00'}\n                />\n              </div>\n            </div>\n            \n            <div className=\"mb-4\">\n              <label className=\"block text-sm font-medium mb-1\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>\n              <textarea\n                value={editForm.notes}\n                onChange={(e) => setEditForm({...editForm, notes: e.target.value})}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n                rows=\"3\"\n                placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n              />\n            </div>\n            \n            {/* Items Display with Edit capability */}\n            <div className=\"mb-4\">\n              <h4 className=\"text-lg font-medium mb-2\">Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙØ§ØªÙˆØ±Ø©</h4>\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full border-collapse border border-gray-300\">\n                  <thead>\n                    <tr className=\"bg-gray-100\">\n                      <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ù†ØªØ¬</th>\n                      <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙƒÙ…ÙŠØ©</th>\n                      <th className=\"border border-gray-300 p-2\">Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©</th>\n                      <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>\n                      <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {editForm.items.map((item, index) => (\n                      <tr key={index}>\n                        <td className=\"border border-gray-300 p-2\">\n                          {item.product_type === 'local' || item.local_product_details ? (\n                            <input\n                              type=\"text\"\n                              value={item.product_name || `${item.local_product_details?.product_size || ''} - ${item.local_product_details?.product_type || ''}`}\n                              onChange={(e) => {\n                                const newItems = [...editForm.items];\n                                newItems[index].product_name = e.target.value;\n                                setEditForm({...editForm, items: newItems});\n                              }}\n                              className=\"w-full p-1 border border-gray-300 rounded\"\n                              placeholder=\"Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ù†ØªØ¬ - Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬\"\n                            />\n                          ) : (\n                            <div className=\"space-y-1\">\n                              {/* Seal Type */}\n                              <div className=\"flex items-center space-x-2 space-x-reverse\">\n                                <label className=\"text-xs font-medium w-16\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„:</label>\n                                <select\n                                  value={item.seal_type || ''}\n                                  onChange={(e) => {\n                                    const newItems = [...editForm.items];\n                                    newItems[index].seal_type = e.target.value;\n                                    setEditForm({...editForm, items: newItems});\n                                  }}\n                                  className=\"flex-1 p-1 text-xs border border-gray-300 rounded\"\n                                >\n                                  <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„Ù†ÙˆØ¹</option>\n                                  <option value=\"RSL\">RSL</option>\n                                  <option value=\"RS\">RS</option>\n                                  <option value=\"RSE\">RSE</option>\n                                  <option value=\"B17\">B17</option>\n                                  <option value=\"B3\">B3</option>\n                                  <option value=\"B14\">B14</option>\n                                  <option value=\"B1\">B1</option>\n                                  <option value=\"R15\">R15</option>\n                                  <option value=\"R17\">R17</option>\n                                  <option value=\"W1\">W1</option>\n                                  <option value=\"W4\">W4</option>\n                                  <option value=\"W5\">W5</option>\n                                  <option value=\"W11\">W11</option>\n                                  <option value=\"WBT\">WBT</option>\n                                  <option value=\"XR\">XR</option>\n                                  <option value=\"CH\">CH</option>\n                                  <option value=\"VR\">VR</option>\n                                </select>\n                              </div>\n                              \n                              {/* Material Type */}\n                              <div className=\"flex items-center space-x-2 space-x-reverse\">\n                                <label className=\"text-xs font-medium w-16\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©:</label>\n                                <select\n                                  value={item.material_type || ''}\n                                  onChange={(e) => {\n                                    const newItems = [...editForm.items];\n                                    newItems[index].material_type = e.target.value;\n                                    setEditForm({...editForm, items: newItems});\n                                  }}\n                                  className=\"flex-1 p-1 text-xs border border-gray-300 rounded\"\n                                >\n                                  <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„Ø®Ø§Ù…Ø©</option>\n                                  <option value=\"NBR\">NBR</option>\n                                  <option value=\"BUR\">BUR</option>\n                                  <option value=\"BT\">BT</option>\n                                  <option value=\"VT\">VT</option>\n                                  <option value=\"BOOM\">BOOM</option>\n                                </select>\n                              </div>\n                              \n                              {/* Dimensions */}\n                              <div className=\"flex items-center space-x-1 space-x-reverse\">\n                                <input\n                                  type=\"number\"\n                                  step=\"0.1\"\n                                  value={item.inner_diameter || ''}\n                                  onChange={(e) => {\n                                    const newItems = [...editForm.items];\n                                    newItems[index].inner_diameter = parseFloat(e.target.value) || 0;\n                                    setEditForm({...editForm, items: newItems});\n                                  }}\n                                  placeholder=\"Ø¯Ø§Ø®Ù„ÙŠ\"\n                                  className=\"w-12 p-1 text-xs border border-gray-300 rounded\"\n                                />\n                                <span className=\"text-xs\">Ã—</span>\n                                <input\n                                  type=\"number\"\n                                  step=\"0.1\"\n                                  value={item.outer_diameter || ''}\n                                  onChange={(e) => {\n                                    const newItems = [...editForm.items];\n                                    newItems[index].outer_diameter = parseFloat(e.target.value) || 0;\n                                    setEditForm({...editForm, items: newItems});\n                                  }}\n                                  placeholder=\"Ø®Ø§Ø±Ø¬ÙŠ\"\n                                  className=\"w-12 p-1 text-xs border border-gray-300 rounded\"\n                                />\n                                <span className=\"text-xs\">Ã—</span>\n                                <input\n                                  type=\"number\"\n                                  step=\"0.1\"\n                                  value={item.height || ''}\n                                  onChange={(e) => {\n                                    const newItems = [...editForm.items];\n                                    newItems[index].height = parseFloat(e.target.value) || 0;\n                                    setEditForm({...editForm, items: newItems});\n                                  }}\n                                  placeholder=\"Ø§Ø±ØªÙØ§Ø¹\"\n                                  className=\"w-12 p-1 text-xs border border-gray-300 rounded\"\n                                />\n                              </div>\n                            </div>\n                          )}\n                        </td>\n                        <td className=\"border border-gray-300 p-2\">\n                          <input\n                            type=\"number\"\n                            value={item.quantity}\n                            onChange={(e) => {\n                              const newItems = [...editForm.items];\n                              newItems[index].quantity = parseInt(e.target.value) || 0;\n                              newItems[index].total_price = newItems[index].unit_price * newItems[index].quantity;\n                              setEditForm({...editForm, items: newItems});\n                            }}\n                            className=\"w-full p-1 border border-gray-300 rounded\"\n                          />\n                        </td>\n                        <td className=\"border border-gray-300 p-2\">\n                          <input\n                            type=\"number\"\n                            step=\"0.01\"\n                            value={item.unit_price}\n                            onChange={(e) => {\n                              const newItems = [...editForm.items];\n                              newItems[index].unit_price = parseFloat(e.target.value) || 0;\n                              newItems[index].total_price = newItems[index].unit_price * newItems[index].quantity;\n                              setEditForm({...editForm, items: newItems});\n                            }}\n                            className=\"w-full p-1 border border-gray-300 rounded\"\n                          />\n                        </td>\n                        <td className=\"border border-gray-300 p-2 font-semibold\">\n                          Ø¬.Ù… {(item.total_price || 0).toFixed(2)}\n                        </td>\n                        <td className=\"border border-gray-300 p-2\">\n                          <button\n                            onClick={() => {\n                              const newItems = editForm.items.filter((_, i) => i !== index);\n                              setEditForm({...editForm, items: newItems});\n                            }}\n                            className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                          >\n                            Ø­Ø°Ù\n                          </button>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n              \n              {/* Add Product Button */}\n              <button\n                onClick={() => {\n                  // Add a new empty item for editing\n                  const newItem = {\n                    seal_type: '',\n                    material_type: '',\n                    inner_diameter: '',\n                    outer_diameter: '',\n                    height: '',\n                    quantity: 1,\n                    unit_price: 0,\n                    total_price: 0\n                  };\n                  setEditForm({\n                    ...editForm,\n                    items: [...editForm.items, newItem]\n                  });\n                }}\n                className=\"mt-2 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n              >\n                Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯\n              </button>\n            </div>\n            \n            {/* Action Buttons */}\n            <div className=\"flex justify-end space-x-4 space-x-reverse\">\n              <button\n                onClick={cancelEdit}\n                className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n              >\n                Ø¥Ù„ØºØ§Ø¡\n              </button>\n              <button\n                onClick={saveInvoiceEdit}\n                className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n              >\n                Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Work Orders Component\nconst WorkOrders = () => {\n  const [workOrders, setWorkOrders] = useState([]);\n  const [invoices, setInvoices] = useState([]);\n  const [selectedInvoices, setSelectedInvoices] = useState([]);\n  const [newWorkOrder, setNewWorkOrder] = useState({\n    title: '',\n    description: '',\n    priority: 'Ø¹Ø§Ø¯ÙŠ'\n  });\n  const [showAddToExisting, setShowAddToExisting] = useState(false);\n  const [selectedWorkOrderId, setSelectedWorkOrderId] = useState('');\n  const [selectedInvoiceForAdd, setSelectedInvoiceForAdd] = useState('');\n\n  useEffect(() => {\n    fetchWorkOrders();\n    fetchInvoices();\n  }, []);\n\n  const fetchWorkOrders = async () => {\n    try {\n      const response = await axios.get(`${API}/work-orders`);\n      setWorkOrders(response.data);\n    } catch (error) {\n      console.error('Error fetching work orders:', error);\n      setWorkOrders([]); // Set empty array on error\n    }\n  };\n\n  const fetchInvoices = async () => {\n    try {\n      const response = await axios.get(`${API}/invoices`);\n      setInvoices(response.data);\n    } catch (error) {\n      console.error('Error fetching invoices:', error);\n    }\n  };\n\n  const toggleInvoiceSelection = (invoiceId) => {\n    setSelectedInvoices(prev => \n      prev.includes(invoiceId) \n        ? prev.filter(id => id !== invoiceId)\n        : [...prev, invoiceId]\n    );\n  };\n\n  const createWorkOrderFromMultipleInvoices = async () => {\n    if (selectedInvoices.length === 0) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ÙØ§ØªÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');\n      return;\n    }\n\n    if (!newWorkOrder.title.trim()) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„');\n      return;\n    }\n\n    try {\n      // Get selected invoices data\n      const selectedInvoicesData = invoices.filter(inv => selectedInvoices.includes(inv.id));\n      \n      // Clean invoices data (remove MongoDB ObjectIds)\n      const cleanInvoices = selectedInvoicesData.map(inv => {\n        const cleanInv = { ...inv };\n        if (cleanInv._id) delete cleanInv._id;\n        return cleanInv;\n      });\n      \n      // Create work order with multiple invoices\n      const workOrderData = {\n        title: newWorkOrder.title,\n        description: newWorkOrder.description,\n        priority: newWorkOrder.priority,\n        invoices: cleanInvoices,\n        total_amount: cleanInvoices.reduce((sum, inv) => sum + (inv.total_amount || 0), 0),\n        total_items: cleanInvoices.reduce((sum, inv) => sum + (inv.items?.length || 0), 0)\n      };\n\n      const response = await axios.post(`${API}/work-orders/multiple`, workOrderData);\n      \n      if (response.data) {\n        alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ø¨Ù†Ø¬Ø§Ø­');\n        \n        // Reset form\n        setSelectedInvoices([]);\n        setNewWorkOrder({\n          title: '',\n          description: '',\n          priority: 'Ø¹Ø§Ø¯ÙŠ'\n        });\n        \n        // Refresh work orders list\n        await fetchWorkOrders();\n      }\n    } catch (error) {\n      console.error('Error creating work order:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const addInvoiceToExistingWorkOrder = async () => {\n    if (!selectedWorkOrderId || !selectedInvoiceForAdd) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ ÙˆØ§Ù„ÙØ§ØªÙˆØ±Ø©');\n      return;\n    }\n\n    try {\n      const response = await axios.put(`${API}/work-orders/${selectedWorkOrderId}/add-invoice`, null, {\n        params: { invoice_id: selectedInvoiceForAdd }\n      });\n      \n      if (response.data) {\n        alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¥Ù„Ù‰ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ø¨Ù†Ø¬Ø§Ø­');\n        \n        // Reset form\n        setSelectedWorkOrderId('');\n        setSelectedInvoiceForAdd('');\n        setShowAddToExisting(false);\n        \n        // Refresh work orders list\n        await fetchWorkOrders();\n      }\n    } catch (error) {\n      console.error('Error adding invoice to work order:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ§ØªÙˆØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const getInvoiceDetails = (invoiceId) => {\n    return invoices.find(inv => inv.id === invoiceId);\n  };\n\n  const getAvailableInvoices = () => {\n    // Show invoices that are \"ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°\" or \"Ø§Ù†ØªØ¸Ø§Ø±\"\n    return invoices.filter(invoice => \n      invoice.status === 'ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°' || invoice.status === 'Ø§Ù†ØªØ¸Ø§Ø±'\n    );\n  };\n\n  const getAvailableInvoicesForAdd = () => {\n    // Get invoices not already in the selected work order\n    if (!selectedWorkOrderId) return getAvailableInvoices();\n    \n    const selectedWorkOrder = workOrders.find(wo => wo.id === selectedWorkOrderId);\n    if (!selectedWorkOrder) return getAvailableInvoices();\n    \n    const usedInvoiceIds = selectedWorkOrder.invoices?.map(inv => inv.id) || [];\n    \n    return getAvailableInvoices().filter(invoice => \n      !usedInvoiceIds.includes(invoice.id)\n    );\n  };\n\n  const printWorkOrder = (workOrder) => {\n    const workOrderInvoices = workOrder.invoices?.map(invoiceData => \n      invoices.find(inv => inv.id === invoiceData.id) || invoiceData\n    ).filter(inv => inv) || [];\n    \n    const totalAmount = workOrderInvoices.reduce((sum, inv) => sum + (inv.total_amount || 0), 0);\n    const totalItems = workOrderInvoices.reduce((sum, inv) => sum + (inv.items?.length || 0), 0);\n    \n    const printContent = `\n      <div style=\"font-family: Arial, sans-serif; direction: rtl; text-align: right;\">\n        <div style=\"text-align: center; margin-bottom: 20px;\">\n          <h1>Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„</h1>\n          <p>Ø§Ù„Ø­Ø±ÙÙŠØ§Ù† Ø´Ø§Ø±Ø¹ Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª - 01020630677</p>\n          <h2 style=\"color: #333; margin-top: 20px;\">Ø£Ù…Ø± Ø´ØºÙ„</h2>\n        </div>\n        \n        <div style=\"margin-bottom: 20px;\">\n          <strong>Ø±Ù‚Ù… Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„:</strong> ${workOrder.id}<br>\n          <strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> ${workOrder.title || `Ø£Ù…Ø± Ø´ØºÙ„ #${workOrder.id.slice(-8)}`}<br>\n          <strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${new Date(workOrder.created_at).toLocaleDateString('ar-EG')}<br>\n          <strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> ${workOrder.status || 'Ø¬Ø¯ÙŠØ¯'}<br>\n          <strong>Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ±:</strong> ${workOrderInvoices.length}<br>\n          <strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ù„Øº:</strong> Ø¬.Ù… ${totalAmount.toFixed(2)}\n          ${workOrder.description ? `<br><strong>Ø§Ù„ÙˆØµÙ:</strong> ${workOrder.description}` : ''}\n          ${workOrder.supervisor_name ? `<br><strong>Ø§Ù„Ù…Ø´Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØªØµÙ†ÙŠØ¹:</strong> ${workOrder.supervisor_name}` : ''}\n          ${workOrder.is_daily ? `<br><strong>Ù†ÙˆØ¹ Ø§Ù„Ø£Ù…Ø±:</strong> Ø£Ù…Ø± Ø´ØºÙ„ ÙŠÙˆÙ…ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠ` : ''}\n        </div>\n\n        <h3 style=\"color: #333; margin-bottom: 10px;\">Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø¯Ø±Ø¬Ø©:</h3>\n        <table style=\"width: 100%; border-collapse: collapse; margin-bottom: 20px;\">\n          <thead>\n            <tr style=\"background-color: #f0f0f0;\">\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø§Ù„Ø¹Ù…ÙŠÙ„</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø§Ù„Ù…Ø¨Ù„Øº</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${workOrderInvoices.map(invoice => `\n              <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">${invoice.invoice_number}</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">${invoice.customer_name}</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">${new Date(invoice.date).toLocaleDateString('ar-EG')}</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">Ø¬.Ù… ${invoice.total_amount?.toFixed(2) || '0.00'}</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">${invoice.items?.length || 0}</td>\n              </tr>\n            `).join('')}\n          </tbody>\n        </table>\n\n        <h3 style=\"color: #333; margin-bottom: 10px;\">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</h3>\n        <table style=\"width: 100%; border-collapse: collapse; margin-bottom: 20px;\">\n          <thead>\n            <tr style=\"background-color: #f0f0f0;\">\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø§Ù„Ù…Ù‚Ø§Ø³</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø§Ù„ÙƒÙ…ÙŠØ©</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø§Ù„Ø®Ø§Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø©</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${workOrderInvoices.map(invoice => \n              invoice.items?.map(item => `\n                <tr>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">${invoice.invoice_number}</td>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">${item.local_product_details ? item.local_product_details.product_type : (item.seal_type || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯')}</td>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">${item.local_product_details ? 'Ù…Ø­Ù„ÙŠ' : (item.material_type || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯')}</td>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">${item.local_product_details ? `${item.local_product_details.product_size} - ${item.local_product_details.product_type}` : (item.inner_diameter && item.outer_diameter && item.height ? `${item.inner_diameter} Ã— ${item.outer_diameter} Ã— ${item.height}${item.wall_height ? ` (Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø©: ${item.wall_height})` : ''}` : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯')}</td>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">${item.quantity}</td>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">${item.local_product_details ? 'Ù…Ø­Ù„ÙŠ' : (item.material_used || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯')}</td>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">\n                    ${item.local_product_details ? \n                      'Ù…Ø­Ù„ÙŠ' :\n                      item.material_details ? \n                        (item.material_details.is_finished_product ? \n                          'Ù…Ø®Ø²Ù† Ø§Ù†ØªØ§Ø¬ ØªØ§Ù…' : \n                          `${item.material_details.unit_code} / ${item.material_details.inner_diameter}-${item.material_details.outer_diameter}`\n                        ) : \n                        `${item.material_used || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'} / Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©`\n                    }\n                  </td>\n                </tr>\n              `).join('') || ''\n            ).join('')}\n          </tbody>\n        </table>\n        \n        <div style=\"margin-top: 40px; border-top: 1px solid #ddd; padding-top: 20px;\">\n          <div style=\"float: left;\">\n            <strong>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ØªØµÙ†ÙŠØ¹:</strong><br>\n            <div style=\"margin-top: 10px; height: 50px; border: 1px solid #ddd;\"></div>\n          </div>\n          <div style=\"float: right;\">\n            <strong>ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„:</strong><br>\n            <div style=\"margin-top: 10px; height: 50px; border: 1px solid #ddd; width: 150px;\"></div>\n          </div>\n          <div style=\"clear: both;\"></div>\n        </div>\n      </div>\n    `;\n    \n    const printWindow = window.open('', '_blank');\n    printWindow.document.write(printContent);\n    printWindow.document.close();\n    printWindow.print();\n  };\n\n  const clearAllWorkOrders = async () => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´ØºÙ„ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) return;\n    \n    try {\n      await axios.delete(`${API}/work-orders/clear-all`);\n      fetchWorkOrders();\n      alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´ØºÙ„');\n    } catch (error) {\n      console.error('Error clearing work orders:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');\n    }\n  };\n\n  const deleteWorkOrder = async (workOrderId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ù‡Ø°Ø§ØŸ')) return;\n    \n    try {\n      await axios.delete(`${API}/work-orders/${workOrderId}`);\n      fetchWorkOrders();\n      alert('ØªÙ… Ø­Ø°Ù Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting work order:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„');\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-blue-600 mb-4\">Ø£Ù…Ø± Ø´ØºÙ„</h2>\n        \n        <div className=\"flex space-x-4 space-x-reverse mb-4\">\n          <button \n            onClick={clearAllWorkOrders}\n            className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n            Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n          </button>\n          <button \n            onClick={() => { fetchWorkOrders(); fetchInvoices(); }}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n            Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => window.print()}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n            Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n          <button \n            onClick={() => setShowAddToExisting(!showAddToExisting)}\n            className=\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\">\n            {showAddToExisting ? 'Ø¥Ø®ÙØ§Ø¡' : 'Ø¥Ø¶Ø§ÙØ© ÙØ§ØªÙˆØ±Ø© Ù„Ø£Ù…Ø± Ù…ÙˆØ¬ÙˆØ¯'}\n          </button>\n          <select className=\"border border-gray-300 rounded px-3 py-2\">\n            <option>ÙŠÙˆÙ…ÙŠ</option>\n            <option>Ø£Ø³Ø¨ÙˆØ¹ÙŠ</option>\n            <option>Ø´Ù‡Ø±ÙŠ</option>\n            <option>Ø³Ù†ÙˆÙŠ</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Add Invoice to Existing Work Order */}\n      {showAddToExisting && (\n        <div className=\"bg-yellow-50 p-6 rounded-lg shadow-md mb-6 border border-yellow-200\">\n          <h3 className=\"text-lg font-semibold mb-4 text-yellow-800\">Ø¥Ø¶Ø§ÙØ© ÙØ§ØªÙˆØ±Ø© Ø¥Ù„Ù‰ Ø£Ù…Ø± Ø´ØºÙ„ Ù…ÙˆØ¬ÙˆØ¯</h3>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ø®ØªÙŠØ§Ø± Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„</label>\n              <select\n                value={selectedWorkOrderId}\n                onChange={(e) => setSelectedWorkOrderId(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              >\n                <option value=\"\">Ø§Ø®ØªØ± Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„</option>\n                {workOrders.map(workOrder => (\n                  <option key={workOrder.id} value={workOrder.id}>\n                    {workOrder.title || `Ø£Ù…Ø± Ø´ØºÙ„ #${workOrder.id.slice(-8)}`} \n                    ({workOrder.invoices?.length || 0} ÙØ§ØªÙˆØ±Ø©)\n                  </option>\n                ))}\n              </select>\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØ§ØªÙˆØ±Ø©</label>\n              <select\n                value={selectedInvoiceForAdd}\n                onChange={(e) => setSelectedInvoiceForAdd(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n                disabled={!selectedWorkOrderId}\n              >\n                <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„ÙØ§ØªÙˆØ±Ø©</option>\n                {getAvailableInvoicesForAdd().map(invoice => (\n                  <option key={invoice.id} value={invoice.id}>\n                    {invoice.invoice_number} - {invoice.customer_name} \n                    (Ø¬.Ù… {invoice.total_amount?.toFixed(2) || '0.00'})\n                  </option>\n                ))}\n              </select>\n            </div>\n          </div>\n          \n          <div className=\"flex space-x-4 space-x-reverse\">\n            <button\n              onClick={addInvoiceToExistingWorkOrder}\n              className=\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\"\n              disabled={!selectedWorkOrderId || !selectedInvoiceForAdd}\n            >\n              Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n            </button>\n            <button\n              onClick={() => {\n                setShowAddToExisting(false);\n                setSelectedWorkOrderId('');\n                setSelectedInvoiceForAdd('');\n              }}\n              className=\"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600\"\n            >\n              Ø¥Ù„ØºØ§Ø¡\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Create Work Order from Multiple Invoices */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø´ØºÙ„ Ø¬Ø¯ÙŠØ¯</h3>\n        \n        {/* Work Order Details */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø¹Ù†ÙˆØ§Ù† Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ *</label>\n            <input\n              type=\"text\"\n              value={newWorkOrder.title}\n              onChange={(e) => setNewWorkOrder({...newWorkOrder, title: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"Ù…Ø«Ø§Ù„: Ø£Ù…Ø± Ø´ØºÙ„ Ø±Ù‚Ù… 1 - ÙŠÙ†Ø§ÙŠØ± 2025\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©</label>\n            <select\n              value={newWorkOrder.priority}\n              onChange={(e) => setNewWorkOrder({...newWorkOrder, priority: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"Ø¹Ø§Ø¯ÙŠ\">Ø¹Ø§Ø¯ÙŠ</option>\n              <option value=\"Ù…Ù‡Ù…\">Ù…Ù‡Ù…</option>\n              <option value=\"Ø·Ø§Ø±Ø¦\">Ø·Ø§Ø±Ø¦</option>\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©</label>\n            <div className=\"p-2 bg-gray-100 rounded\">\n              {selectedInvoices.length} ÙØ§ØªÙˆØ±Ø© Ù…Ø­Ø¯Ø¯Ø©\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium mb-1\">ÙˆØµÙ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„</label>\n          <textarea\n            value={newWorkOrder.description}\n            onChange={(e) => setNewWorkOrder({...newWorkOrder, description: e.target.value})}\n            className=\"w-full p-2 border border-gray-300 rounded h-20\"\n            placeholder=\"ÙˆØµÙ Ø¥Ø¶Ø§ÙÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n          />\n        </div>\n        \n        <h4 className=\"font-medium mb-2\">Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙÙˆØ§ØªÙŠØ±:</h4>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4 max-h-60 overflow-y-auto border rounded p-4\">\n          {getAvailableInvoices().map(invoice => (\n            <div \n              key={invoice.id} \n              className={`border rounded-lg p-3 cursor-pointer transition-colors ${\n                selectedInvoices.includes(invoice.id) \n                  ? 'border-blue-500 bg-blue-50' \n                  : 'border-gray-300 hover:bg-gray-50'\n              }`}\n              onClick={() => toggleInvoiceSelection(invoice.id)}\n            >\n              <div className=\"flex items-center mb-2\">\n                <input\n                  type=\"checkbox\"\n                  checked={selectedInvoices.includes(invoice.id)}\n                  onChange={() => {}}\n                  className=\"ml-2\"\n                />\n                <h5 className=\"font-semibold\">{invoice.invoice_number}</h5>\n              </div>\n              <p className=\"text-sm text-gray-600\">Ø§Ù„Ø¹Ù…ÙŠÙ„: {invoice.customer_name}</p>\n              <p className=\"text-sm text-gray-600\">\n                Ø§Ù„ØªØ§Ø±ÙŠØ®: {new Date(invoice.date).toLocaleDateString('ar-EG')}\n              </p>\n              <p className=\"text-sm font-medium\">\n                Ø§Ù„Ù…Ø¨Ù„Øº: Ø¬.Ù… {invoice.total_amount?.toFixed(2) || '0.00'}\n              </p>\n              <p className=\"text-sm\">\n                Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: {invoice.items?.length || 0} ØµÙ†Ù\n              </p>\n              <span className={`inline-block px-2 py-1 rounded text-xs mt-1 ${\n                invoice.status === 'ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°' \n                  ? 'bg-green-100 text-green-800' \n                  : 'bg-blue-100 text-blue-800'\n              }`}>\n                {invoice.status}\n              </span>\n            </div>\n          ))}\n        </div>\n        \n        {getAvailableInvoices().length === 0 && (\n          <div className=\"text-center py-8 text-gray-500\">\n            Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙˆØ§ØªÙŠØ± Ù…ØªØ§Ø­Ø© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø´ØºÙ„\n          </div>\n        )}\n        \n        {selectedInvoices.length > 0 && (\n          <div className=\"mb-4 p-3 bg-blue-100 rounded\">\n            <h5 className=\"font-semibold text-blue-800\">Ù…Ù„Ø®Øµ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„:</h5>\n            <p className=\"text-blue-700\">\n              Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙÙˆØ§ØªÙŠØ±: {selectedInvoices.length} ÙØ§ØªÙˆØ±Ø©\n            </p>\n            <p className=\"text-blue-700\">\n              Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ù„Øº: Ø¬.Ù… {invoices\n                .filter(inv => selectedInvoices.includes(inv.id))\n                .reduce((sum, inv) => sum + (inv.total_amount || 0), 0)\n                .toFixed(2)}\n            </p>\n            <p className=\"text-blue-700\">\n              Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: {invoices\n                .filter(inv => selectedInvoices.includes(inv.id))\n                .reduce((sum, inv) => sum + (inv.items?.length || 0), 0)} ØµÙ†Ù\n            </p>\n          </div>\n        )}\n        \n        <button\n          onClick={createWorkOrderFromMultipleInvoices}\n          className=\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\"\n          disabled={selectedInvoices.length === 0}\n        >\n          Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ ({selectedInvoices.length} ÙØ§ØªÙˆØ±Ø©)\n        </button>\n      </div>\n\n      {/* Work Orders List */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´ØºÙ„ ({workOrders.length})</h3>\n        \n        {workOrders.map(workOrder => {\n          // Handle both single invoice and multiple invoices work orders\n          const workOrderInvoices = workOrder.invoices || (workOrder.invoice_id ? [getInvoiceDetails(workOrder.invoice_id)] : []);\n          \n          return (\n            <div key={workOrder.id} className=\"border rounded-lg p-4 mb-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                <div>\n                  <h4 className=\"font-semibold text-lg\">\n                    {workOrder.title || `Ø£Ù…Ø± Ø´ØºÙ„ #${workOrder.id.slice(-8)}`}\n                  </h4>\n                  <p><strong>Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:</strong> \n                    <span className={`mr-2 px-2 py-1 rounded text-sm ${\n                      workOrder.priority === 'Ø·Ø§Ø±Ø¦' ? 'bg-red-100 text-red-800' :\n                      workOrder.priority === 'Ù…Ù‡Ù…' ? 'bg-yellow-100 text-yellow-800' :\n                      'bg-blue-100 text-blue-800'\n                    }`}>\n                      {workOrder.priority || 'Ø¹Ø§Ø¯ÙŠ'}\n                    </span>\n                  </p>\n                  <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡:</strong> {new Date(workOrder.created_at).toLocaleDateString('ar-EG')}</p>\n                  <p><strong>Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ±:</strong> {workOrderInvoices.filter(inv => inv).length}</p>\n                </div>\n                \n                <div>\n                  <p><strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> \n                    <span className=\"mr-2 px-2 py-1 rounded text-sm bg-blue-100 text-blue-800\">\n                      {workOrder.status || 'Ø¬Ø¯ÙŠØ¯'}\n                    </span>\n                  </p>\n                  <p><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ù„Øº:</strong> \n                    Ø¬.Ù… {workOrder.total_amount?.toFixed(2) || \n                    workOrderInvoices.reduce((sum, inv) => sum + (inv?.total_amount || 0), 0).toFixed(2)}\n                  </p>\n                  {workOrder.description && (\n                    <p><strong>Ø§Ù„ÙˆØµÙ:</strong> {workOrder.description}</p>\n                  )}\n                  {workOrder.supervisor_name && (\n                    <p><strong>Ø§Ù„Ù…Ø´Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØªØµÙ†ÙŠØ¹:</strong> {workOrder.supervisor_name}</p>\n                  )}\n                  {workOrder.is_daily && (\n                    <p><strong>Ù†ÙˆØ¹ Ø§Ù„Ø£Ù…Ø±:</strong> <span className=\"text-green-600\">Ø£Ù…Ø± Ø´ØºÙ„ ÙŠÙˆÙ…ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠ</span></p>\n                  )}\n                </div>\n              </div>\n              \n              {/* Work Order Invoices */}\n              <div className=\"mb-4\">\n                <h5 className=\"font-medium mb-2\">Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø¯Ø±Ø¬Ø©:</h5>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\n                  {workOrderInvoices.filter(invoice => invoice).map((invoice, index) => (\n                    <div key={index} className=\"bg-gray-50 p-3 rounded border\">\n                      <p><strong>Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©:</strong> {invoice.invoice_number}</p>\n                      <p><strong>Ø§Ù„Ø¹Ù…ÙŠÙ„:</strong> {invoice.customer_name}</p>\n                      <p><strong>Ø§Ù„Ù…Ø¨Ù„Øº:</strong> Ø¬.Ù… {invoice.total_amount?.toFixed(2) || '0.00'}</p>\n                      <p><strong>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</strong> {invoice.items?.length || 0} ØµÙ†Ù</p>\n                    </div>\n                  ))}\n                </div>\n              </div>\n              \n              {/* Work Order Items Details */}\n              <div className=\"overflow-x-auto mb-4\">\n                <h5 className=\"font-medium mb-2\">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</h5>\n                <table className=\"w-full border-collapse border border-gray-300\">\n                  <thead>\n                    <tr className=\"bg-gray-100\">\n                      <th className=\"border border-gray-300 p-2\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>\n                      <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„</th>\n                      <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</th>\n                      <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ù‚Ø§Ø³</th>\n                      <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙƒÙ…ÙŠØ©</th>\n                      <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø®Ø§Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©</th>\n                      <th className=\"border border-gray-300 p-2\">ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø©</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {workOrderInvoices.filter(invoice => invoice).map(invoice => \n                      invoice.items?.map((item, itemIndex) => (\n                        <tr key={`${invoice.id}-${itemIndex}`}>\n                          <td className=\"border border-gray-300 p-2\">{invoice.invoice_number}</td>\n                          <td className=\"border border-gray-300 p-2\">{item.seal_type}</td>\n                          <td className=\"border border-gray-300 p-2\">{item.material_type}</td>\n                          <td className=\"border border-gray-300 p-2\">\n                            {item.inner_diameter} Ã— {item.outer_diameter} Ã— {item.height}\n                          </td>\n                          <td className=\"border border-gray-300 p-2\">{item.quantity}</td>\n                          <td className=\"border border-gray-300 p-2\">\n                            {item.material_details ? (\n                              item.material_details.is_finished_product ? (\n                                <span className=\"px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm\">\n                                  Ù…Ù†ØªØ¬ Ø¬Ø§Ù‡Ø²\n                                </span>\n                              ) : (\n                                <span className=\"px-2 py-1 bg-green-100 text-green-800 rounded text-sm\">\n                                  {item.material_details.material_type}\n                                </span>\n                              )\n                            ) : (\n                              <span className=\"px-2 py-1 bg-green-100 text-green-800 rounded text-sm\">\n                                {item.material_used || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}\n                              </span>\n                            )}\n                          </td>\n                          <td className=\"border border-gray-300 p-2\">\n                            <div className=\"font-mono text-sm\">\n                              {item.material_details ? (\n                                item.material_details.is_finished_product ? (\n                                  <div className=\"text-center font-semibold text-blue-600\">\n                                    Ù…Ø®Ø²Ù† Ø§Ù†ØªØ§Ø¬ ØªØ§Ù…\n                                  </div>\n                                ) : (\n                                  <div>\n                                    <div className=\"font-semibold\">{item.material_details.unit_code}</div>\n                                    <div className=\"text-xs text-gray-600\">\n                                      {item.material_details.inner_diameter} - {item.material_details.outer_diameter}\n                                    </div>\n                                  </div>\n                                )\n                              ) : (\n                                // Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø£Ùˆ Ø¹Ù†Ø¯Ù…Ø§ Ù„Ø§ ØªÙˆØ¬Ø¯ material_details\n                                <div>\n                                  <div className=\"font-semibold\">{item.material_used || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>\n                                  <div className=\"text-xs text-gray-600\">\n                                    Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø®Ø§Ù…Ø© ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©\n                                  </div>\n                                </div>\n                              )}\n                            </div>\n                          </td>\n                        </tr>\n                      )) || []\n                    )}\n                  </tbody>\n                </table>\n              </div>\n              \n              {/* Work Order Actions */}\n              <div className=\"flex space-x-4 space-x-reverse\">\n                <button \n                  onClick={() => printWorkOrder(workOrder)}\n                  className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n                  Ø·Ø¨Ø§Ø¹Ø© Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„\n                </button>\n                <button className=\"bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600\">\n                  ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„Ø©\n                </button>\n                <button \n                  onClick={() => {\n                    setSelectedWorkOrderId(workOrder.id);\n                    setShowAddToExisting(true);\n                  }}\n                  className=\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\">\n                  Ø¥Ø¶Ø§ÙØ© ÙØ§ØªÙˆØ±Ø©\n                </button>\n                <button \n                  onClick={() => deleteWorkOrder(workOrder.id)}\n                  className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n                  Ø­Ø°Ù\n                </button>\n              </div>\n            </div>\n          );\n        })}\n        \n        {workOrders.length === 0 && (\n          <div className=\"text-center py-8 text-gray-500\">\n            Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ÙˆØ§Ù…Ø± Ø´ØºÙ„\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// Treasury Management Component\nconst Treasury = () => {\n  const { user } = useAuth(); // Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ\n  const [accounts, setAccounts] = useState([\n    { id: 'cash', name: 'Ù†Ù‚Ø¯ÙŠ', balance: 0, transactions: [] },\n    { id: 'vodafone_elsawy', name: 'ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ Ù…Ø­Ù…Ø¯ Ø§Ù„ØµØ§ÙˆÙŠ', balance: 0, transactions: [] },\n    { id: 'vodafone_wael', name: 'ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ ÙˆØ§Ø¦Ù„ Ù…Ø­Ù…Ø¯', balance: 0, transactions: [] },\n    { id: 'deferred', name: 'Ø¢Ø¬Ù„', balance: 0, transactions: [] },\n    { id: 'instapay', name: 'Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ', balance: 0, transactions: [] },\n    { id: 'yad_elsawy', name: 'ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ', balance: 0, transactions: [] }\n  ]);\n  \n  const [selectedAccount, setSelectedAccount] = useState('cash');\n  const [showTransferModal, setShowTransferModal] = useState(false);\n  const [transferData, setTransferData] = useState({\n    from: 'cash',\n    to: 'vodafone_elsawy',\n    amount: '',\n    notes: ''\n  });\n  \n  const [manualTransaction, setManualTransaction] = useState({\n    account: 'cash',\n    type: 'income', // income or expense\n    amount: '',\n    description: '',\n    notes: ''\n  });\n  \n  const [showManualForm, setShowManualForm] = useState(false);\n  const [searchTerm, setSearchTerm] = useState(''); // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø­Ø«\n\n  useEffect(() => {\n    fetchTreasuryData();\n  }, []);\n\n  const fetchTreasuryData = async () => {\n    try {\n      // Fetch balances and transactions from backend\n      const balancesResponse = await axios.get(`${API}/treasury/balances`);\n      const transactionsResponse = await axios.get(`${API}/treasury/transactions`);\n      const invoicesResponse = await axios.get(`${API}/invoices`);\n      const expensesResponse = await axios.get(`${API}/expenses`);\n      \n      const balances = balancesResponse.data;\n      const manualTransactions = transactionsResponse.data;\n      const invoices = invoicesResponse.data;\n      const expenses = expensesResponse.data;\n      \n      // Update accounts with balances and transactions\n      const updatedAccounts = accounts.map(account => {\n        let transactions = [];\n        \n        // Add invoice transactions\n        invoices.forEach(invoice => {\n          const paymentMethodMap = {\n            'Ù†Ù‚Ø¯ÙŠ': 'cash',\n            'ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ Ù…Ø­Ù…Ø¯ Ø§Ù„ØµØ§ÙˆÙŠ': 'vodafone_elsawy', \n            'ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ ÙˆØ§Ø¦Ù„ Ù…Ø­Ù…Ø¯': 'vodafone_wael',\n            'Ø¢Ø¬Ù„': 'deferred',\n            'Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ': 'instapay',\n            'ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ': 'yad_elsawy'\n          };\n          \n          if (paymentMethodMap[invoice.payment_method] === account.id) {\n            transactions.push({\n              id: `inv-${invoice.id}`,\n              type: 'income',\n              amount: invoice.total_amount || 0,\n              description: `ÙØ§ØªÙˆØ±Ø© Ø±Ù‚Ù… ${invoice.invoice_number}`,\n              date: invoice.date,\n              reference: `Ø§Ù„Ø¹Ù…ÙŠÙ„: ${invoice.customer_name}`\n            });\n          }\n        });\n        \n        // Add expense transactions (only from cash account)\n        if (account.id === 'cash') {\n          expenses.forEach(expense => {\n            transactions.push({\n              id: `exp-${expense.id}`,\n              type: 'expense',\n              amount: expense.amount || 0,\n              description: expense.description || 'Ù…ØµØ±ÙˆÙ',\n              date: expense.date,\n              category: expense.category\n            });\n          });\n        }\n        \n        // Add manual transactions\n        manualTransactions\n          .filter(transaction => transaction.account_id === account.id)\n          .forEach(transaction => {\n            transactions.push({\n              id: transaction.id,\n              type: transaction.transaction_type,\n              amount: transaction.amount,\n              description: transaction.description,\n              date: transaction.date,\n              reference: transaction.reference\n            });\n          });\n        \n        return {\n          ...account,\n          balance: balances[account.id] || 0,\n          transactions: transactions.sort((a, b) => new Date(b.date) - new Date(a.date))\n        };\n      });\n      \n      setAccounts(updatedAccounts);\n    } catch (error) {\n      console.error('Error fetching treasury data:', error);\n    }\n  };\n\n  const handleTransfer = async () => {\n    if (!transferData.amount || parseFloat(transferData.amount) <= 0) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');\n      return;\n    }\n    \n    const amount = parseFloat(transferData.amount);\n    const fromAccount = accounts.find(acc => acc.id === transferData.from);\n    \n    if (fromAccount.balance < amount) {\n      alert('Ø§Ù„Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙŠ');\n      return;\n    }\n    \n    try {\n      await axios.post(`${API}/treasury/transfer`, {\n        from_account: transferData.from,\n        to_account: transferData.to,\n        amount: amount,\n        notes: transferData.notes\n      });\n      \n      // Refresh data\n      fetchTreasuryData();\n      \n      setShowTransferModal(false);\n      setTransferData({ from: 'cash', to: 'vodafone_elsawy', amount: '', notes: '' });\n      alert('ØªÙ… Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error processing transfer:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­ÙˆÙŠÙ„');\n    }\n  };\n\n  const handleManualTransaction = async () => {\n    if (!manualTransaction.amount || parseFloat(manualTransaction.amount) <= 0) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');\n      return;\n    }\n    \n    const amount = parseFloat(manualTransaction.amount);\n    \n    try {\n      await axios.post(`${API}/treasury/transactions`, {\n        account_id: manualTransaction.account,\n        transaction_type: manualTransaction.type,\n        amount: amount,\n        description: manualTransaction.description,\n        reference: manualTransaction.notes || 'Ø¥Ø¯Ø®Ø§Ù„ ÙŠØ¯ÙˆÙŠ'\n      });\n      \n      // Refresh data\n      fetchTreasuryData();\n      \n      setShowManualForm(false);\n      setManualTransaction({\n        account: 'cash',\n        type: 'income',\n        amount: '',\n        description: '',\n        notes: ''\n      });\n      alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error processing manual transaction:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');\n    }\n  };\n\n  const clearAccount = async (accountId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØµÙÙŠØ± Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) return;\n    \n    const account = accounts.find(acc => acc.id === accountId);\n    if (!account || account.balance === 0) {\n      alert('Ø§Ù„Ø­Ø³Ø§Ø¨ ÙØ§Ø±Øº Ø¨Ø§Ù„ÙØ¹Ù„ Ø£Ùˆ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');\n      return;\n    }\n    \n    try {\n      // Create expense transaction to zero the account\n      await axios.post(`${API}/treasury/transactions`, {\n        account_id: accountId,\n        transaction_type: 'expense',\n        amount: account.balance,\n        description: `ØªØµÙÙŠØ± Ø­Ø³Ø§Ø¨ ${account.name}`,\n        reference: 'ØªØµÙÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ù…Ø¯ÙŠØ±'\n      });\n      \n      // Refresh data\n      fetchTreasuryData();\n      alert(`ØªÙ… ØªØµÙÙŠØ± Ø­Ø³Ø§Ø¨ ${account.name} Ø¨Ù†Ø¬Ø§Ø­`);\n    } catch (error) {\n      console.error('Error clearing account:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµÙÙŠØ± Ø§Ù„Ø­Ø³Ø§Ø¨');\n    }\n  };\n\n  // Treasury Reset Function - Only for Elsawy\n  const resetTreasury = async () => {\n    if (user?.username !== 'Elsawy') {\n      alert('ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨ØªÙ†ÙÙŠØ° Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');\n      return;\n    }\n\n    // Triple confirmation for this critical operation\n    const firstConfirm = confirm('âš ï¸ ØªØ­Ø°ÙŠØ±: Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø³ÙŠØ­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø²ÙŠÙ†Ø© ÙˆÙ„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!\\nÙ‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ');\n    if (!firstConfirm) return;\n\n    const secondConfirm = confirm('âš ï¸ ØªØ£ÙƒÙŠØ¯ Ø«Ø§Ù†ÙŠ: Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª ÙˆØ§Ù„Ø£Ø±ØµØ¯Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹!\\nØ§ÙƒØªØ¨ \"Ù†Ø¹Ù…\" Ù„Ù„ØªØ£ÙƒÙŠØ¯:');\n    if (!secondConfirm) return;\n\n    const finalConfirm = prompt('âš ï¸ Ù„Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØŒ Ø§ÙƒØªØ¨ Ø¨Ø§Ù„Ø¶Ø¨Ø·: \"Ø§Ø­Ø°Ù ÙƒÙ„ Ø´ÙŠØ¡\"');\n    if (finalConfirm !== 'Ø§Ø­Ø°Ù ÙƒÙ„ Ø´ÙŠØ¡') {\n      alert('ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');\n      return;\n    }\n\n    try {\n      const response = await axios.post(`${API}/treasury/reset`, null, {\n        params: { username: user.username }\n      });\n\n      alert(`âœ… ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø²ÙŠÙ†Ø© Ø¨Ù†Ø¬Ø§Ø­!\\nØªÙ… Ø­Ø°Ù ${response.data.deleted_treasury_transactions} Ù…Ø¹Ø§Ù…Ù„Ø©`);\n      \n      // Refresh data\n      fetchTreasuryData();\n    } catch (error) {\n      console.error('Error resetting treasury:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ù…Ø³Ø­ Ø§Ù„Ø®Ø²ÙŠÙ†Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const selectedAccountData = accounts.find(acc => acc.id === selectedAccount);\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-blue-600 mb-4\">Ø§Ù„Ø®Ø²ÙŠÙ†Ø© - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ù…ÙˆØ§Ù„</h2>\n        \n        <div className=\"flex space-x-4 space-x-reverse mb-4\">\n          <button \n            onClick={() => setShowTransferModal(true)}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n            ØªØ­ÙˆÙŠÙ„ Ø£Ù…ÙˆØ§Ù„\n          </button>\n          <button \n            onClick={() => setShowManualForm(true)}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n            Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„ÙŠØ© ÙŠØ¯ÙˆÙŠØ©\n          </button>\n          <button \n            onClick={fetchTreasuryData}\n            className=\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\">\n            Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => window.print()}\n            className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\">\n            Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n          {user?.username === 'Elsawy' && (\n            <button \n              onClick={resetTreasury}\n              className=\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 font-bold border-2 border-red-800\">\n              âš ï¸ Ù…Ø³Ø­ Ø§Ù„Ø®Ø²ÙŠÙ†Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„\n            </button>\n          )}\n          {user?.username === 'Elsawy' && selectedAccount === 'yad_elsawy' && selectedAccountData?.balance > 0 && (\n            <button \n              onClick={() => clearAccount(selectedAccount)}\n              className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n              ØªØµÙÙŠØ± Ø­Ø³Ø§Ø¨ ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Accounts Summary */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-6\">\n        {accounts.map(account => (\n          <div \n            key={account.id}\n            className={`p-4 rounded-lg shadow cursor-pointer transition-colors ${\n              selectedAccount === account.id \n                ? 'bg-blue-100 border-2 border-blue-500' \n                : 'bg-white hover:bg-gray-50'\n            }`}\n            onClick={() => setSelectedAccount(account.id)}\n          >\n            <h3 className=\"font-semibold text-gray-800 mb-2\">{account.name}</h3>\n            <p className={`text-2xl font-bold ${\n              account.balance >= 0 ? 'text-green-600' : 'text-red-600'\n            }`}>\n              Ø¬.Ù… {account.balance.toFixed(2)}\n            </p>\n            <p className=\"text-sm text-gray-600 mt-1\">\n              {account.transactions.length} Ø¹Ù…Ù„ÙŠØ©\n            </p>\n          </div>\n        ))}\n      </div>\n\n      {/* Account Details */}\n      {selectedAccountData && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">\n            ØªÙØ§ØµÙŠÙ„ Ø­Ø³Ø§Ø¨: {selectedAccountData.name}\n          </h3>\n          \n          {/* Search Bar */}\n          <div className=\"mb-4\">\n            <input\n              type=\"text\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              placeholder=\"Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª...\"\n              className=\"w-full p-3 border border-gray-300 rounded-lg\"\n            />\n          </div>\n          \n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full border-collapse border border-gray-300\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù†ÙˆØ¹</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙˆØµÙ</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø¨Ù„Øº</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø±Ø¬Ø¹</th>\n                </tr>\n              </thead>\n              <tbody>\n                {selectedAccountData.transactions\n                  .filter(transaction => \n                    transaction.description.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                    (transaction.reference && transaction.reference.toLowerCase().includes(searchTerm.toLowerCase())) ||\n                    (transaction.category && transaction.category.toLowerCase().includes(searchTerm.toLowerCase()))\n                  )\n                  .map((transaction, index) => (\n                  <tr key={transaction.id || index}>\n                    <td className=\"border border-gray-300 p-2\">\n                      {new Date(transaction.date).toLocaleDateString('ar-EG')}\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <span className={`px-2 py-1 rounded text-xs ${\n                        transaction.type === 'income' ? 'bg-green-100 text-green-800' :\n                        transaction.type === 'expense' ? 'bg-red-100 text-red-800' :\n                        transaction.type === 'transfer_in' ? 'bg-blue-100 text-blue-800' :\n                        'bg-orange-100 text-orange-800'\n                      }`}>\n                        {transaction.type === 'income' ? 'Ø¯Ø®Ù„' :\n                         transaction.type === 'expense' ? 'Ù…ØµØ±ÙˆÙ' :\n                         transaction.type === 'transfer_in' ? 'ØªØ­ÙˆÙŠÙ„ ÙˆØ§Ø±Ø¯' : 'ØªØ­ÙˆÙŠÙ„ ØµØ§Ø¯Ø±'}\n                      </span>\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">{transaction.description}</td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <span className={\n                        transaction.type === 'income' || transaction.type === 'transfer_in' \n                          ? 'text-green-600 font-semibold' \n                          : 'text-red-600 font-semibold'\n                      }>\n                        {transaction.type === 'income' || transaction.type === 'transfer_in' ? '+' : '-'}\n                        Ø¬.Ù… {transaction.amount.toFixed(2)}\n                      </span>\n                    </td>\n                    <td className=\"border border-gray-300 p-2 text-sm text-gray-600\">\n                      {transaction.reference || transaction.category || '-'}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n            \n            {selectedAccountData.transactions.length === 0 && (\n              <div className=\"text-center py-8 text-gray-500\">\n                Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Transfer Modal */}\n      {showTransferModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4\">\n            <h3 className=\"text-lg font-semibold mb-4\">ØªØ­ÙˆÙŠÙ„ Ø£Ù…ÙˆØ§Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</h3>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù…Ù† Ø­Ø³Ø§Ø¨</label>\n                <select\n                  value={transferData.from}\n                  onChange={(e) => setTransferData({...transferData, from: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                >\n                  {accounts.map(account => (\n                    <option key={account.id} value={account.id}>\n                      {account.name} (Ø¬.Ù… {account.balance.toFixed(2)})\n                    </option>\n                  ))}\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø¥Ù„Ù‰ Ø­Ø³Ø§Ø¨</label>\n                <select\n                  value={transferData.to}\n                  onChange={(e) => setTransferData({...transferData, to: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                >\n                  {accounts.filter(acc => acc.id !== transferData.from).map(account => (\n                    <option key={account.id} value={account.id}>\n                      {account.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù…Ø¨Ù„Øº</label>\n                <input\n                  type=\"number\"\n                  value={transferData.amount}\n                  onChange={(e) => setTransferData({...transferData, amount: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"0.00\"\n                  min=\"0\"\n                  step=\"0.01\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>\n                <input\n                  type=\"text\"\n                  value={transferData.notes}\n                  onChange={(e) => setTransferData({...transferData, notes: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                />\n              </div>\n            </div>\n            \n            <div className=\"flex space-x-4 space-x-reverse mt-6\">\n              <button\n                onClick={handleTransfer}\n                className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n              >\n                ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„\n              </button>\n              <button\n                onClick={() => setShowTransferModal(false)}\n                className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n              >\n                Ø¥Ù„ØºØ§Ø¡\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Manual Transaction Modal */}\n      {showManualForm && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„ÙŠØ© ÙŠØ¯ÙˆÙŠØ©</h3>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø­Ø³Ø§Ø¨</label>\n                <select\n                  value={manualTransaction.account}\n                  onChange={(e) => setManualTransaction({...manualTransaction, account: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                >\n                  {accounts.map(account => (\n                    <option key={account.id} value={account.id}>\n                      {account.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</label>\n                <select\n                  value={manualTransaction.type}\n                  onChange={(e) => setManualTransaction({...manualTransaction, type: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                >\n                  <option value=\"income\">Ø¯Ø®Ù„</option>\n                  <option value=\"expense\">Ù…ØµØ±ÙˆÙ</option>\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù…Ø¨Ù„Øº</label>\n                <input\n                  type=\"number\"\n                  value={manualTransaction.amount}\n                  onChange={(e) => setManualTransaction({...manualTransaction, amount: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"0.00\"\n                  min=\"0\"\n                  step=\"0.01\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ÙˆØµÙ</label>\n                <input\n                  type=\"text\"\n                  value={manualTransaction.description}\n                  onChange={(e) => setManualTransaction({...manualTransaction, description: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"ÙˆØµÙ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>\n                <input\n                  type=\"text\"\n                  value={manualTransaction.notes}\n                  onChange={(e) => setManualTransaction({...manualTransaction, notes: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                />\n              </div>\n            </div>\n            \n            <div className=\"flex space-x-4 space-x-reverse mt-6\">\n              <button\n                onClick={handleManualTransaction}\n                className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n              >\n                Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©\n              </button>\n              <button\n                onClick={() => setShowManualForm(false)}\n                className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n              >\n                Ø¥Ù„ØºØ§Ø¡\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Users Management Component  \nconst Users = () => {\n  const [users, setUsers] = useState([]);\n  const [newUser, setNewUser] = useState({\n    username: '',\n    password: '',\n    role: 'user'\n  });\n  const [editingUser, setEditingUser] = useState(null);\n  const [editForm, setEditForm] = useState({\n    username: '',\n    password: '',\n    role: 'user'\n  });\n  const [companyInfo, setCompanyInfo] = useState({\n    name: 'Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„',\n    address: 'Ø§Ù„Ø­Ø±ÙÙŠØ§Ù† Ø´Ø§Ø±Ø¹ Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª',\n    phone: '01020630677'\n  });\n  const [editingCompany, setEditingCompany] = useState(false);\n  const [selectedUserPermissions, setSelectedUserPermissions] = useState(null);\n\n  const allPermissions = [\n    { key: 'dashboard', label: 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…' },\n    { key: 'sales', label: 'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª' },\n    { key: 'inventory', label: 'Ø§Ù„Ù…Ø®Ø²ÙˆÙ†' },\n    { key: 'deferred', label: 'Ø§Ù„Ø¢Ø¬Ù„' },\n    { key: 'expenses', label: 'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª' },\n    { key: 'revenue', label: 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª' },\n    { key: 'treasury', label: 'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©' },\n    { key: 'invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ±' },\n    { key: 'work-orders', label: 'Ø£Ù…Ø± Ø´ØºÙ„' },\n    { key: 'pricing', label: 'Ø§Ù„ØªØ³Ø¹ÙŠØ±' },\n    { key: 'users', label: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†' }\n  ];\n\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  const fetchUsers = async () => {\n    try {\n      const response = await axios.get(`${API}/users`);\n      \n      // Check if default users exist in database\n      const dbUsers = response.data || [];\n      const hasElsawy = dbUsers.some(user => user.username === 'Elsawy');\n      const hasRoot = dbUsers.some(user => user.username === 'Root');\n      \n      // Create default users if they don't exist\n      if (!hasElsawy) {\n        await axios.post(`${API}/users`, {\n          username: 'Elsawy',\n          password: '100100',\n          role: 'admin',\n          permissions: allPermissions.map(p => p.key)\n        });\n      }\n      \n      if (!hasRoot) {\n        await axios.post(`${API}/users`, {\n          username: 'Root',\n          password: 'master',\n          role: 'user',\n          permissions: ['dashboard', 'sales', 'inventory', 'deferred', 'expenses', 'treasury', 'work-orders']\n        });\n      }\n      \n      // Fetch users again if we created default users\n      if (!hasElsawy || !hasRoot) {\n        const updatedResponse = await axios.get(`${API}/users`);\n        setUsers(updatedResponse.data || []);\n      } else {\n        setUsers(dbUsers);\n      }\n      \n    } catch (error) {\n      console.error('Error fetching users:', error);\n      // Fall back to empty array for now\n      setUsers([]);\n    }\n  };\n\n  const addUser = async () => {\n    if (!newUser.username || !newUser.password) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');\n      return;\n    }\n\n    try {\n      // Check if username already exists\n      if (users.some(user => user.username === newUser.username)) {\n        alert('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„');\n        return;\n      }\n\n      // Default permissions based on role\n      const defaultPermissions = newUser.role === 'admin' \n        ? allPermissions.map(p => p.key)\n        : ['dashboard', 'sales', 'inventory', 'deferred', 'expenses', 'treasury', 'work-orders', 'pricing'];\n\n      // Let backend generate ID and created_at\n      const user = {\n        username: newUser.username,\n        password: newUser.password,\n        role: newUser.role,\n        permissions: defaultPermissions\n      };\n\n      await axios.post(`${API}/users`, user);\n      fetchUsers();\n      setNewUser({ username: '', password: '', role: 'user' });\n      alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error adding user:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const startEdit = (user) => {\n    setEditingUser(user.id);\n    setEditForm({\n      username: user.username,\n      password: '',\n      role: user.role\n    });\n  };\n\n  const cancelEdit = () => {\n    setEditingUser(null);\n    setEditForm({ username: '', password: '', role: 'user' });\n  };\n\n  const saveEdit = async () => {\n    if (!editForm.username) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');\n      return;\n    }\n\n    // Check if username already exists (excluding current user)\n    if (users.some(user => user.username === editForm.username && user.id !== editingUser)) {\n      alert('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„');\n      return;\n    }\n\n    try {\n      // Find current user to preserve their permissions\n      const currentUser = users.find(u => u.id === editingUser);\n      if (!currentUser) {\n        alert('Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');\n        return;\n      }\n\n      // Update user in backend - preserve existing permissions\n      const updatedUser = {\n        id: editingUser,\n        username: editForm.username,\n        role: editForm.role,\n        password: editForm.password || currentUser.password,\n        permissions: currentUser.permissions || [],\n        created_at: currentUser.created_at\n      };\n      \n      await axios.put(`${API}/users/${editingUser}`, updatedUser);\n      \n      // Fetch updated data from database instead of updating local state\n      fetchUsers();\n\n      setEditingUser(null);\n      setEditForm({ username: '', password: '', role: 'user' });\n      alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error updating user:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const deleteUser = async (userId) => {\n    if (userId === '1' || userId === '2') {\n      alert('Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠÙŠÙ†');\n      return;\n    }\n\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ')) return;\n\n    try {\n      await axios.delete(`${API}/users/${userId}`);\n      fetchUsers();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting user:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');\n    }\n  };\n\n  const resetPassword = async (userId) => {\n    const newPassword = prompt('Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:');\n    if (newPassword && newPassword.trim()) {\n      try {\n        // Find the user to get their current data\n        const user = users.find(u => u.id === userId);\n        if (!user) {\n          alert('Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');\n          return;\n        }\n\n        // Update password in backend\n        const updatedUser = {\n          id: user.id,\n          username: user.username,\n          password: newPassword.trim(),\n          role: user.role,\n          permissions: user.permissions || [],\n          created_at: user.created_at\n        };\n        \n        await axios.put(`${API}/users/${userId}`, updatedUser);\n        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­');\n      } catch (error) {\n        console.error('Error updating password:', error);\n        alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: ' + (error.response?.data?.detail || error.message));\n      }\n    }\n  };\n\n  const openPermissions = (user) => {\n    setSelectedUserPermissions({\n      ...user,\n      tempPermissions: [...(user.permissions || [])]\n    });\n  };\n\n  const togglePermission = (permissionKey) => {\n    setSelectedUserPermissions(prev => {\n      const newPermissions = prev.tempPermissions.includes(permissionKey)\n        ? prev.tempPermissions.filter(p => p !== permissionKey)\n        : [...prev.tempPermissions, permissionKey];\n      \n      return { ...prev, tempPermissions: newPermissions };\n    });\n  };\n\n  const savePermissions = async () => {\n    try {\n      // Update permissions in backend\n      const updatedUser = {\n        id: selectedUserPermissions.id,\n        username: selectedUserPermissions.username,\n        password: selectedUserPermissions.password,\n        role: selectedUserPermissions.role,\n        permissions: selectedUserPermissions.tempPermissions,\n        created_at: selectedUserPermissions.created_at\n      };\n      \n      await axios.put(`${API}/users/${selectedUserPermissions.id}`, updatedUser);\n      \n      // Fetch updated data from database\n      fetchUsers();\n      \n      setSelectedUserPermissions(null);\n      alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error updating permissions:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const saveCompanyInfo = () => {\n    setEditingCompany(false);\n    alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ© Ø¨Ù†Ø¬Ø§Ø­');\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-blue-600 mb-4\">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h2>\n        \n        <div className=\"flex space-x-4 space-x-reverse mb-4\">\n          <button className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n            Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n          </button>\n          <button className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n            Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => window.print()}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n            Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n        </div>\n      </div>\n\n      {/* Company Information */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ©</h3>\n        \n        {editingCompany ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©</label>\n              <input\n                type=\"text\"\n                value={companyInfo.name}\n                onChange={(e) => setCompanyInfo({...companyInfo, name: e.target.value})}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>\n              <input\n                type=\"text\"\n                value={companyInfo.address}\n                onChange={(e) => setCompanyInfo({...companyInfo, address: e.target.value})}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ØªÙ„ÙŠÙÙˆÙ†</label>\n              <input\n                type=\"text\"\n                value={companyInfo.phone}\n                onChange={(e) => setCompanyInfo({...companyInfo, phone: e.target.value})}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              />\n            </div>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©</label>\n              <p className=\"p-2 bg-gray-100 rounded\">{companyInfo.name}</p>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>\n              <p className=\"p-2 bg-gray-100 rounded\">{companyInfo.address}</p>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ØªÙ„ÙŠÙÙˆÙ†</label>\n              <p className=\"p-2 bg-gray-100 rounded\">{companyInfo.phone}</p>\n            </div>\n          </div>\n        )}\n        \n        <div className=\"flex space-x-4 space-x-reverse\">\n          {editingCompany ? (\n            <>\n              <button\n                onClick={saveCompanyInfo}\n                className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n              >\n                Ø­ÙØ¸\n              </button>\n              <button\n                onClick={() => setEditingCompany(false)}\n                className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n              >\n                Ø¥Ù„ØºØ§Ø¡\n              </button>\n            </>\n          ) : (\n            <button\n              onClick={() => setEditingCompany(true)}\n              className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n            >\n              ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ©\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Add New User */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯</h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>\n            <input\n              type=\"text\"\n              value={newUser.username}\n              onChange={(e) => setNewUser({...newUser, username: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>\n            <input\n              type=\"password\"\n              value={newUser.password}\n              onChange={(e) => setNewUser({...newUser, password: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©</label>\n            <select\n              value={newUser.role}\n              onChange={(e) => setNewUser({...newUser, role: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"user\">Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯ÙŠ</option>\n              <option value=\"admin\">Ù…Ø¯ÙŠØ±</option>\n            </select>\n          </div>\n        </div>\n        \n        <button\n          onClick={addUser}\n          className=\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\"\n        >\n          Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\n        </button>\n      </div>\n\n      {/* Users Table */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h3>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©</th>\n                <th className=\"border border-gray-300 p-2\">Ø¹Ø¯Ø¯ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª</th>\n                <th className=\"border border-gray-300 p-2\">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø§Ù„Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {users.map((user) => (\n                <tr key={user.id}>\n                  <td className=\"border border-gray-300 p-2\">\n                    {editingUser === user.id ? (\n                      <input\n                        type=\"text\"\n                        value={editForm.username}\n                        onChange={(e) => setEditForm({...editForm, username: e.target.value})}\n                        className=\"w-full p-1 border border-gray-300 rounded\"\n                      />\n                    ) : (\n                      <span className=\"font-semibold\">{user.username}</span>\n                    )}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    {editingUser === user.id ? (\n                      <select\n                        value={editForm.role}\n                        onChange={(e) => setEditForm({...editForm, role: e.target.value})}\n                        className=\"w-full p-1 border border-gray-300 rounded\"\n                      >\n                        <option value=\"user\">Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯ÙŠ</option>\n                        <option value=\"admin\">Ù…Ø¯ÙŠØ±</option>\n                      </select>\n                    ) : (\n                      <span className={`px-2 py-1 rounded text-sm ${\n                        user.role === 'admin' \n                          ? 'bg-red-100 text-red-800' \n                          : 'bg-blue-100 text-blue-800'\n                      }`}>\n                        {user.role === 'admin' ? 'Ù…Ø¯ÙŠØ±' : 'Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯ÙŠ'}\n                      </span>\n                    )}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className=\"bg-gray-100 px-2 py-1 rounded text-sm\">\n                      {user.permissions?.length || 0} ØµÙ„Ø§Ø­ÙŠØ©\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    {new Date(user.created_at).toLocaleDateString('ar-EG')}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className=\"px-2 py-1 rounded text-sm bg-green-100 text-green-800\">\n                      Ù†Ø´Ø·\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex space-x-2 space-x-reverse flex-wrap\">\n                      {editingUser === user.id ? (\n                        <>\n                          <button \n                            onClick={saveEdit}\n                            className=\"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600 mb-1\">\n                            Ø­ÙØ¸\n                          </button>\n                          <button \n                            onClick={cancelEdit}\n                            className=\"bg-gray-500 text-white px-2 py-1 rounded text-sm hover:bg-gray-600 mb-1\">\n                            Ø¥Ù„ØºØ§Ø¡\n                          </button>\n                        </>\n                      ) : (\n                        <>\n                          <button \n                            onClick={() => startEdit(user)}\n                            className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600 mb-1\">\n                            ØªØ¹Ø¯ÙŠÙ„\n                          </button>\n                          <button \n                            onClick={() => openPermissions(user)}\n                            className=\"bg-purple-500 text-white px-2 py-1 rounded text-sm hover:bg-purple-600 mb-1\">\n                            Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª\n                          </button>\n                          <button \n                            onClick={() => resetPassword(user.id)}\n                            className=\"bg-yellow-500 text-white px-2 py-1 rounded text-sm hover:bg-yellow-600 mb-1\">\n                            ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\n                          </button>\n                          {(user.id !== '1' && user.id !== '2') && (\n                            <button \n                              onClick={() => deleteUser(user.id)}\n                              className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600 mb-1\">\n                              Ø­Ø°Ù\n                            </button>\n                          )}\n                        </>\n                      )}\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Permissions Modal */}\n      {selectedUserPermissions && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 max-w-md w-full mx-4\">\n            <h3 className=\"text-lg font-bold mb-4\">\n              ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: {selectedUserPermissions.username}\n            </h3>\n            \n            <div className=\"space-y-2 mb-4\">\n              {allPermissions.map(permission => (\n                <label key={permission.key} className=\"flex items-center\">\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedUserPermissions.tempPermissions.includes(permission.key)}\n                    onChange={() => togglePermission(permission.key)}\n                    className=\"ml-2\"\n                  />\n                  <span>{permission.label}</span>\n                </label>\n              ))}\n            </div>\n            \n            <div className=\"flex space-x-4 space-x-reverse\">\n              <button\n                onClick={savePermissions}\n                className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n              >\n                Ø­ÙØ¸\n              </button>\n              <button\n                onClick={() => setSelectedUserPermissions(null)}\n                className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n              >\n                Ø¥Ù„ØºØ§Ø¡\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Material Pricing Component\nconst Pricing = () => {\n  const [materialPricings, setMaterialPricings] = useState([]);\n  const [editingPricing, setEditingPricing] = useState(null);\n  const [newPricing, setNewPricing] = useState({\n    material_type: 'NBR',\n    inner_diameter: '',\n    outer_diameter: '',\n    price_per_mm: '',\n    manufacturing_cost_client1: '',\n    manufacturing_cost_client2: '',\n    manufacturing_cost_client3: '',\n    notes: ''\n  });\n\n  const materialTypes = ['NBR', 'BUR', 'BT', 'VT', 'BOOM'];\n\n  useEffect(() => {\n    fetchMaterialPricings();\n  }, []);\n\n  const fetchMaterialPricings = async () => {\n    try {\n      const response = await axios.get(`${API}/material-pricing`);\n      setMaterialPricings(response.data);\n    } catch (error) {\n      console.error('Error fetching material pricings:', error);\n    }\n  };\n\n  const addMaterialPricing = async () => {\n    if (!newPricing.inner_diameter || !newPricing.outer_diameter || !newPricing.price_per_mm) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      if (editingPricing) {\n        // Update existing pricing\n        await axios.put(`${API}/material-pricing/${editingPricing}`, {\n          ...newPricing,\n          inner_diameter: parseFloat(newPricing.inner_diameter),\n          outer_diameter: parseFloat(newPricing.outer_diameter),\n          price_per_mm: parseFloat(newPricing.price_per_mm),\n          manufacturing_cost_client1: parseFloat(newPricing.manufacturing_cost_client1 || 0),\n          manufacturing_cost_client2: parseFloat(newPricing.manufacturing_cost_client2 || 0),\n          manufacturing_cost_client3: parseFloat(newPricing.manufacturing_cost_client3 || 0)\n        });\n        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');\n        setEditingPricing(null);\n      } else {\n        // Add new pricing\n        await axios.post(`${API}/material-pricing`, {\n          ...newPricing,\n          inner_diameter: parseFloat(newPricing.inner_diameter),\n          outer_diameter: parseFloat(newPricing.outer_diameter),\n          price_per_mm: parseFloat(newPricing.price_per_mm),\n          manufacturing_cost_client1: parseFloat(newPricing.manufacturing_cost_client1 || 0),\n          manufacturing_cost_client2: parseFloat(newPricing.manufacturing_cost_client2 || 0),\n          manufacturing_cost_client3: parseFloat(newPricing.manufacturing_cost_client3 || 0)\n        });\n        alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');\n      }\n      \n      fetchMaterialPricings();\n      setNewPricing({\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        price_per_mm: '',\n        manufacturing_cost_client1: '',\n        manufacturing_cost_client2: '',\n        manufacturing_cost_client3: '',\n        notes: ''\n      });\n    } catch (error) {\n      console.error('Error saving material pricing:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const editMaterialPricing = (pricing) => {\n    setNewPricing({\n      material_type: pricing.material_type,\n      inner_diameter: pricing.inner_diameter.toString(),\n      outer_diameter: pricing.outer_diameter.toString(),\n      price_per_mm: pricing.price_per_mm.toString(),\n      manufacturing_cost_client1: pricing.manufacturing_cost_client1.toString(),\n      manufacturing_cost_client2: pricing.manufacturing_cost_client2.toString(),\n      manufacturing_cost_client3: pricing.manufacturing_cost_client3.toString(),\n      notes: pricing.notes || ''\n    });\n    setEditingPricing(pricing.id);\n  };\n\n  const deleteMaterialPricing = async (pricingId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©ØŸ')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/material-pricing/${pricingId}`);\n      fetchMaterialPricings();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting material pricing:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const cancelEdit = () => {\n    setEditingPricing(null);\n    setNewPricing({\n      material_type: 'NBR',\n      inner_diameter: '',\n      outer_diameter: '',\n      price_per_mm: '',\n      manufacturing_cost_client1: '',\n      manufacturing_cost_client2: '',\n      manufacturing_cost_client3: '',\n      notes: ''\n    });\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <h2 className=\"text-2xl font-bold text-blue-600 mb-6\">ğŸ’² Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ³Ø¹ÙŠØ±</h2>\n      \n      {/* Add/Edit Material Pricing Form */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">\n          {editingPricing ? 'ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©' : 'Ø¥Ø¶Ø§ÙØ© ØªØ³Ø¹ÙŠØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©'}\n        </h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</label>\n            <select\n              value={newPricing.material_type}\n              onChange={(e) => setNewPricing({...newPricing, material_type: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              {materialTypes.map(type => (\n                <option key={type} value={type}>{type}</option>\n              ))}\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ (Ù…Ù…)</label>\n            <input\n              type=\"number\"\n              step=\"0.1\"\n              value={newPricing.inner_diameter}\n              onChange={(e) => setNewPricing({...newPricing, inner_diameter: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ (Ù…Ù…)</label>\n            <input\n              type=\"number\"\n              step=\"0.1\"\n              value={newPricing.outer_diameter}\n              onChange={(e) => setNewPricing({...newPricing, outer_diameter: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø³Ø¹Ø± Ø§Ù„Ù…Ù„ÙŠ (Ø¬.Ù…)</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newPricing.price_per_mm}\n              onChange={(e) => setNewPricing({...newPricing, price_per_mm: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"Ø³Ø¹Ø± Ø§Ù„Ù…Ù„ÙŠ Ø§Ù„ÙˆØ§Ø­Ø¯\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ØªÙƒÙ„ÙØ© Ø§Ù„ØªØµÙ†ÙŠØ¹ - Ø¹Ù…ÙŠÙ„ 1 (Ø¬.Ù…)</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newPricing.manufacturing_cost_client1}\n              onChange={(e) => setNewPricing({...newPricing, manufacturing_cost_client1: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"ØªÙƒÙ„ÙØ© Ø§Ù„ØªØµÙ†ÙŠØ¹ Ù„Ù„Ø¹Ù…ÙŠÙ„ 1\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ØªÙƒÙ„ÙØ© Ø§Ù„ØªØµÙ†ÙŠØ¹ - Ø¹Ù…ÙŠÙ„ 2 (Ø¬.Ù…)</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newPricing.manufacturing_cost_client2}\n              onChange={(e) => setNewPricing({...newPricing, manufacturing_cost_client2: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"ØªÙƒÙ„ÙØ© Ø§Ù„ØªØµÙ†ÙŠØ¹ Ù„Ù„Ø¹Ù…ÙŠÙ„ 2\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ØªÙƒÙ„ÙØ© Ø§Ù„ØªØµÙ†ÙŠØ¹ - Ø¹Ù…ÙŠÙ„ 3 (Ø¬.Ù…)</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newPricing.manufacturing_cost_client3}\n              onChange={(e) => setNewPricing({...newPricing, manufacturing_cost_client3: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"ØªÙƒÙ„ÙØ© Ø§Ù„ØªØµÙ†ÙŠØ¹ Ù„Ù„Ø¹Ù…ÙŠÙ„ 3\"\n            />\n          </div>\n          \n          <div className=\"md:col-span-2 lg:col-span-3\">\n            <label className=\"block text-sm font-medium mb-1\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>\n            <textarea\n              value={newPricing.notes}\n              onChange={(e) => setNewPricing({...newPricing, notes: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              rows=\"2\"\n              placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©...\"\n            />\n          </div>\n        </div>\n        \n        <div className=\"flex justify-end space-x-4 space-x-reverse mt-4\">\n          {editingPricing && (\n            <button\n              onClick={cancelEdit}\n              className=\"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600\"\n            >\n              Ø¥Ù„ØºØ§Ø¡\n            </button>\n          )}\n          <button\n            onClick={addMaterialPricing}\n            className=\"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600\"\n          >\n            {editingPricing ? 'ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©' : 'Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©'}\n          </button>\n        </div>\n      </div>\n      \n      {/* Material Pricings Table */}\n      <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h3 className=\"text-lg font-semibold\">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø§Øª</h3>\n        </div>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ (Ø¯Ø§Ø®Ù„ÙŠÃ—Ø®Ø§Ø±Ø¬ÙŠ)</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ø³Ø¹Ø± Ø§Ù„Ù…Ù„ÙŠ</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ø¹Ù…ÙŠÙ„ 1</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ø¹Ù…ÙŠÙ„ 2</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ø¹Ù…ÙŠÙ„ 3</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {materialPricings.map((pricing, index) => (\n                <tr key={pricing.id} className={index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                    {pricing.material_type}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {pricing.inner_diameter}Ã—{pricing.outer_diameter} Ù…Ù…\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {pricing.price_per_mm.toFixed(2)} Ø¬.Ù…\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {pricing.manufacturing_cost_client1.toFixed(2)} Ø¬.Ù…\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {pricing.manufacturing_cost_client2.toFixed(2)} Ø¬.Ù…\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {pricing.manufacturing_cost_client3.toFixed(2)} Ø¬.Ù…\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {pricing.notes || '-'}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                    <button\n                      onClick={() => editMaterialPricing(pricing)}\n                      className=\"text-blue-600 hover:text-blue-900 ml-2\"\n                    >\n                      ØªØ¹Ø¯ÙŠÙ„\n                    </button>\n                    <button\n                      onClick={() => deleteMaterialPricing(pricing.id)}\n                      className=\"text-red-600 hover:text-red-900\"\n                    >\n                      Ø­Ø°Ù\n                    </button>\n                  </td>\n                </tr>\n              ))}\n              \n              {materialPricings.length === 0 && (\n                <tr>\n                  <td colSpan=\"8\" className=\"px-6 py-4 text-center text-gray-500\">\n                    Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ³Ø¹ÙŠØ±Ø§Øª Ù…Ø¶Ø§ÙØ©\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Main App Component\nconst App = () => {\n  const [currentPage, setCurrentPage] = useState('sales'); // Default to sales instead of dashboard\n  const { user } = useAuth();\n\n  if (!user) return <Login />;\n\n  const renderPage = () => {\n    switch (currentPage) {\n      case 'dashboard': \n        // Only Elsawy can access dashboard\n        return user?.username === 'Elsawy' ? <Dashboard /> : <Sales />;\n      case 'sales': return <Sales />;\n      case 'inventory': return <Inventory />;\n      case 'stock': return <Stock />;\n      case 'local': return <Local />;\n      case 'deferred': return <Deferred />;\n      case 'expenses': return <Expenses />;\n      case 'revenue': return <Revenue />;\n      case 'treasury': return <Treasury />;\n      case 'invoices': return <Invoices />;\n      case 'work-orders': return <WorkOrders />;\n      case 'pricing': return <Pricing />;\n      case 'users': return <Users />;\n      default: return <Sales />; // Default to sales instead of dashboard\n    }\n  };\n\n  return (\n    <div className=\"flex h-screen bg-gray-50\" dir=\"rtl\">\n      <Navigation currentPage={currentPage} onPageChange={setCurrentPage} />\n      <main className=\"flex-1 overflow-y-auto bg-gradient-to-br from-gray-50 to-blue-50\">\n        <div className=\"p-6\">\n          {renderPage()}\n        </div>\n      </main>\n    </div>\n  );\n};\n\n// Root App with AuthProvider\nconst AppWithAuth = () => (\n  <AuthProvider>\n    <App />\n  </AuthProvider>\n);\n\nexport default AppWithAuth;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}