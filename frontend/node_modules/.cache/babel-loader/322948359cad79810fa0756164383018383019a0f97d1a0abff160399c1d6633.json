{"ast":null,"code":"import _objectSpread from\"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,createContext,useContext}from'react';import'./App.css';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const BACKEND_URL=process.env.REACT_APP_BACKEND_URL;const API=\"\".concat(BACKEND_URL,\"/api\");// Auth Context\nconst AuthContext=/*#__PURE__*/createContext();const useAuth=()=>{const context=useContext(AuthContext);if(!context){throw new Error('useAuth must be used within an AuthProvider');}return context;};const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[isLoading,setIsLoading]=useState(true);useEffect(()=>{const savedUser=localStorage.getItem('user');if(savedUser){setUser(JSON.parse(savedUser));}setIsLoading(false);},[]);const login=async(username,password)=>{try{const response=await axios.post(\"\".concat(API,\"/auth/login\"),null,{params:{username,password}});if(response.data.success){setUser(response.data.user);localStorage.setItem('user',JSON.stringify(response.data.user));return true;}return false;}catch(error){console.error('Login error:',error);return false;}};const logout=()=>{setUser(null);localStorage.removeItem('user');};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-xl\",children:\"\\u062C\\u0627\\u0631\\u064A \\u0627\\u0644\\u062A\\u062D\\u0645\\u064A\\u0644...\"})});}return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,login,logout},children:children});};// Login Component\nconst Login=()=>{const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const{login}=useAuth();const handleSubmit=async e=>{e.preventDefault();setError('');const success=await login(username,password);if(!success){setError('Ø®Ø·Ø£ ÙÙŠ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4\",dir:\"rtl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl p-8 border border-blue-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\",alt:\"Master Seal Logo\",className:\"h-16 w-16 mx-auto rounded-full shadow-lg border-4 border-blue-100\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent\",children:\"\\u0645\\u0627\\u0633\\u062A\\u0631 \\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mt-2\",children:\"\\u0646\\u0638\\u0627\\u0645 \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0634\\u0631\\u0643\\u0629 \\u0627\\u0644\\u0645\\u062A\\u0643\\u0627\\u0645\\u0644\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-1 bg-gradient-to-r from-blue-400 to-blue-600 mx-auto mt-3 rounded-full\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"\\uD83D\\uDC64 \\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,onChange:e=>setUsername(e.target.value),className:\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-3 focus:ring-blue-200 focus:border-blue-400 transition-all duration-200 bg-gray-50 hover:bg-white\",placeholder:\"\\u0627\\u062F\\u062E\\u0644 \\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"\\uD83D\\uDD12 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),className:\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-3 focus:ring-blue-200 focus:border-blue-400 transition-all duration-200 bg-gray-50 hover:bg-white\",placeholder:\"\\u0627\\u062F\\u062E\\u0644 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\",required:true})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-xl text-sm text-center animate-pulse\",children:[\"\\u26A0\\uFE0F \",error]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-gradient-to-r from-blue-600 to-blue-800 text-white py-3 px-6 rounded-xl hover:from-blue-700 hover:to-blue-900 focus:outline-none focus:ring-3 focus:ring-blue-300 transition-all duration-200 font-semibold shadow-lg hover:shadow-xl transform hover:scale-105\",children:\"\\uD83D\\uDE80 \\u062F\\u062E\\u0648\\u0644\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-8 pt-6 border-t border-gray-100\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400\",children:\"\\u0627\\u0644\\u062D\\u0631\\u0641\\u064A\\u064A\\u0646 - \\u0627\\u0644\\u0633\\u0644\\u0627\\u0645 - \\u0623\\u0645\\u0627\\u0645 \\u0627\\u0644\\u0633\\u0648\\u0628\\u0631 \\u062C\\u064A\\u062A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1 font-medium\",children:\"\\uD83D\\uDCDE 01020630677\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 bg-white/60 backdrop-blur-sm rounded-xl p-4 text-center border border-blue-100/50\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"\\u0646\\u0638\\u0627\\u0645 \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0645\\u062A\\u0643\\u0627\\u0645\\u0644 \\u0644\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0645\\u0628\\u064A\\u0639\\u0627\\u062A \\u0648\\u0627\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0648\\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\\u0627\\u062A\"})})]})});};// Navigation Component\nconst Navigation=_ref2=>{let{currentPage,onPageChange}=_ref2;const{user,logout}=useAuth();const[isCollapsed,setIsCollapsed]=useState(false);// Dashboard is only for Elsawy\nconst elsawyPages=[{key:'dashboard',label:'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…',icon:'ğŸ“Š'},{key:'sales',label:'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª',icon:'ğŸ’°'},{key:'inventory',label:'Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø®Ø§Ù…Ø§Øª',icon:'ğŸ“¦'},{key:'stock',label:'Ù…Ø®Ø²Ù† Ø¥Ù†ØªØ§Ø¬',icon:'ğŸª'},{key:'local',label:'Ù…ÙˆØ±Ø¯ÙŠÙ†',icon:'ğŸ­'},{key:'deferred',label:'Ø§Ù„Ø¢Ø¬Ù„',icon:'â³'},{key:'expenses',label:'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª',icon:'ğŸ’¸'},{key:'revenue',label:'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª',icon:'ğŸ“ˆ'},{key:'treasury',label:'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©',icon:'ğŸ¦'},{key:'main-treasury',label:'Ø§Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',icon:'ğŸ”'},{key:'invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ±',icon:'ğŸ§¾'},{key:'deleted-invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©',icon:'ğŸ—‘ï¸'},{key:'customer-statement',label:'ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨',icon:'ğŸ“‹'},{key:'settle-account',label:'ØªØµÙÙŠØ© Ø­Ø³Ø§Ø¨',icon:'ğŸ’µ'},{key:'work-orders',label:'Ø£Ù…Ø± Ø´ØºÙ„',icon:'âš™ï¸'},{key:'pricing',label:'Ø§Ù„ØªØ³Ø¹ÙŠØ±',icon:'ğŸ’²'},{key:'backup',label:'Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ',icon:'ğŸ’¾'},{key:'users',label:'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',icon:'ğŸ‘¥'}];const adminPages=[{key:'sales',label:'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª',icon:'ğŸ’°'},{key:'inventory',label:'Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø®Ø§Ù…Ø§Øª',icon:'ğŸ“¦'},{key:'stock',label:'Ù…Ø®Ø²Ù† Ø¥Ù†ØªØ§Ø¬',icon:'ğŸª'},{key:'local',label:'Ù…ÙˆØ±Ø¯ÙŠÙ†',icon:'ğŸ­'},{key:'deferred',label:'Ø§Ù„Ø¢Ø¬Ù„',icon:'â³'},{key:'expenses',label:'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª',icon:'ğŸ’¸'},{key:'revenue',label:'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª',icon:'ğŸ“ˆ'},{key:'treasury',label:'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©',icon:'ğŸ¦'},{key:'invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ±',icon:'ğŸ§¾'},{key:'deleted-invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©',icon:'ğŸ—‘ï¸'},{key:'customer-statement',label:'ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨',icon:'ğŸ“‹'},{key:'work-orders',label:'Ø£Ù…Ø± Ø´ØºÙ„',icon:'âš™ï¸'},{key:'pricing',label:'Ø§Ù„ØªØ³Ø¹ÙŠØ±',icon:'ğŸ’²'},{key:'backup',label:'Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ',icon:'ğŸ’¾'},{key:'users',label:'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',icon:'ğŸ‘¥'}];const userPages=[{key:'sales',label:'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª',icon:'ğŸ’°'},{key:'inventory',label:'Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø®Ø§Ù…Ø§Øª',icon:'ğŸ“¦'},{key:'stock',label:'Ù…Ø®Ø²Ù† Ø¥Ù†ØªØ§Ø¬',icon:'ğŸª'},{key:'local',label:'Ù…ÙˆØ±Ø¯ÙŠÙ†',icon:'ğŸ­'},{key:'deferred',label:'Ø§Ù„Ø¢Ø¬Ù„',icon:'â³'},{key:'expenses',label:'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª',icon:'ğŸ’¸'},{key:'treasury',label:'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©',icon:'ğŸ¦'},{key:'invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ±',icon:'ğŸ§¾'},{key:'deleted-invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©',icon:'ğŸ—‘ï¸'},{key:'customer-statement',label:'ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨',icon:'ğŸ“‹'},{key:'work-orders',label:'Ø£Ù…Ø± Ø´ØºÙ„',icon:'âš™ï¸'},{key:'pricing',label:'Ø§Ù„ØªØ³Ø¹ÙŠØ±',icon:'ğŸ’²'}];// Only Elsawy gets dashboard access\nconst pages=(user===null||user===void 0?void 0:user.username)==='Elsawy'?elsawyPages:(user===null||user===void 0?void 0:user.role)==='admin'?adminPages:userPages;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-b from-blue-900 via-blue-800 to-blue-900 text-white shadow-2xl transition-all duration-300 relative \".concat(isCollapsed?'w-20':'w-80'),children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsCollapsed(!isCollapsed),className:\"absolute -left-4 top-6 bg-blue-600 hover:bg-blue-700 text-white rounded-full p-2 shadow-lg z-50 transition-all\",title:isCollapsed?'ØªÙˆØ³ÙŠØ¹ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©':'Ø·ÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©',children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xl\",children:isCollapsed?'â—€':'â–¶'})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-blue-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center \".concat(isCollapsed?'justify-center':'space-x-3 space-x-reverse'),children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\",alt:\"Master Seal Logo\",className:\"h-12 w-12 rounded-lg shadow-lg\"}),!isCollapsed&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold text-white\",children:\"\\u0645\\u0627\\u0633\\u062A\\u0631 \\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-200\",children:\"\\u0646\\u0638\\u0627\\u0645 \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0645\\u062A\\u0643\\u0627\\u0645\\u0644\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-blue-800 border-b border-blue-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center \".concat(isCollapsed?'justify-center flex-col space-y-2':'justify-between'),children:[!isCollapsed&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium\",children:\"\\u0623\\u0647\\u0644\\u0627\\u064B \\u0648\\u0633\\u0647\\u0644\\u0627\\u064B\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-bold text-blue-200\",children:user===null||user===void 0?void 0:user.username})]}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"bg-red-500 hover:bg-red-600 rounded-lg text-sm font-medium transition-all duration-200 shadow-lg hover:shadow-xl \".concat(isCollapsed?'p-2':'px-3 py-2'),title:\"\\u062E\\u0631\\u0648\\u062C\",children:isCollapsed?'ğŸšª':'Ø®Ø±ÙˆØ¬'})]})}),/*#__PURE__*/_jsx(\"nav\",{className:\"flex-1 p-4 space-y-2 overflow-y-auto\",style:{maxHeight:'calc(100vh - 300px)'},children:pages.map(page=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onPageChange(page.key),className:\"w-full flex items-center p-4 rounded-xl transition-all duration-200 group \".concat(isCollapsed?'justify-center':'space-x-3 space-x-reverse text-right',\" \").concat(currentPage===page.key?'bg-white text-blue-900 shadow-lg transform scale-105':'hover:bg-blue-700 hover:transform hover:translate-x-2'),title:isCollapsed?page.label:'',children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:page.icon}),!isCollapsed&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:page.label}),currentPage===page.key&&/*#__PURE__*/_jsx(\"div\",{className:\"mr-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-blue-500 rounded-full animate-pulse\"})})]})]},page.key))}),!isCollapsed&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-t border-blue-700 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-300\",children:\"\\u0627\\u0644\\u062D\\u0631\\u0641\\u064A\\u064A\\u0646 - \\u0627\\u0644\\u0633\\u0644\\u0627\\u0645 - \\u0623\\u0645\\u0627\\u0645 \\u0627\\u0644\\u0633\\u0648\\u0628\\u0631 \\u062C\\u064A\\u062A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-400 mt-1\",children:\"01020630677\"})]})]});};// Inventory Management Component\nconst Inventory=()=>{const[inventoryItems,setInventoryItems]=useState([]);const[inventoryTransactions,setInventoryTransactions]=useState([]);const[lowStockItems,setLowStockItems]=useState([]);const[currentView,setCurrentView]=useState('items');// items, transactions, low-stock, add-item\nconst[editingItem,setEditingItem]=useState(null);// Ù„Ù„ØªØ¹Ø¯ÙŠÙ„\nconst[newItem,setNewItem]=useState({material_type:'NBR',inner_diameter:'',outer_diameter:'',available_pieces:'',// ØªØºÙŠÙŠØ± Ù…Ù† available_height Ø¥Ù„Ù‰ available_pieces\nmin_stock_level:2,// Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ 2 Ù‚Ø·Ø¹Ø©\nnotes:''});const[newTransaction,setNewTransaction]=useState({material_type:'NBR',inner_diameter:'',outer_diameter:'',transaction_type:'in',pieces_change:'',// ØªØºÙŠÙŠØ± Ù…Ù† height_change Ø¥Ù„Ù‰ pieces_change\nreason:'',notes:''});const[searchTerm,setSearchTerm]=useState('');const materialTypes=['NBR','BUR','BT','VT','BOOM'];// Fetch functions\nconst fetchInventoryItems=async()=>{try{const response=await axios.get(\"\".concat(API,\"/inventory\"));setInventoryItems(response.data||[]);}catch(error){console.error('Error fetching inventory items:',error);}};const fetchInventoryTransactions=async()=>{try{const response=await axios.get(\"\".concat(API,\"/inventory-transactions\"));setInventoryTransactions(response.data||[]);}catch(error){console.error('Error fetching inventory transactions:',error);}};const fetchLowStockItems=async()=>{try{const response=await axios.get(\"\".concat(API,\"/inventory/low-stock\"));setLowStockItems(response.data||[]);}catch(error){console.error('Error fetching low stock items:',error);}};useEffect(()=>{fetchInventoryItems();fetchInventoryTransactions();fetchLowStockItems();},[]);// Add or Update inventory item\nconst addInventoryItem=async()=>{if(!newItem.material_type||!newItem.inner_diameter||!newItem.outer_diameter||!newItem.available_pieces){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{if(editingItem){// Update existing item\nawait axios.put(\"\".concat(API,\"/inventory/\").concat(editingItem.id),_objectSpread(_objectSpread({},newItem),{},{inner_diameter:parseFloat(newItem.inner_diameter),outer_diameter:parseFloat(newItem.outer_diameter),available_pieces:parseInt(newItem.available_pieces),min_stock_level:parseInt(newItem.min_stock_level||2)}));alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');setEditingItem(null);}else{// Add new item\nawait axios.post(\"\".concat(API,\"/inventory\"),_objectSpread(_objectSpread({},newItem),{},{inner_diameter:parseFloat(newItem.inner_diameter),outer_diameter:parseFloat(newItem.outer_diameter),available_pieces:parseInt(newItem.available_pieces),min_stock_level:parseInt(newItem.min_stock_level||2)}));alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}fetchInventoryItems();fetchLowStockItems();setCurrentView('items');setNewItem({material_type:'NBR',inner_diameter:'',outer_diameter:'',available_pieces:'',min_stock_level:2,notes:''});}catch(error){var _error$response,_error$response$data;console.error('Error saving inventory item:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯: '+(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||error.message));}};// Add inventory transaction\nconst addInventoryTransaction=async()=>{if(!newTransaction.material_type||!newTransaction.inner_diameter||!newTransaction.outer_diameter||!newTransaction.pieces_change||!newTransaction.reason){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{const transactionData=_objectSpread(_objectSpread({},newTransaction),{},{inner_diameter:parseFloat(newTransaction.inner_diameter),outer_diameter:parseFloat(newTransaction.outer_diameter),pieces_change:newTransaction.transaction_type==='out'?-Math.abs(parseInt(newTransaction.pieces_change)):Math.abs(parseInt(newTransaction.pieces_change))});await axios.post(\"\".concat(API,\"/inventory-transactions\"),transactionData);fetchInventoryItems();fetchInventoryTransactions();fetchLowStockItems();setNewTransaction({material_type:'NBR',inner_diameter:'',outer_diameter:'',transaction_type:'in',pieces_change:'',reason:'',notes:''});alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ù…Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response2,_error$response2$data;console.error('Error adding inventory transaction:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ù…Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ø¬Ø±Ø¯: '+(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.detail)||error.message));}};// Filter and sort items based on search\nconst filteredItems=inventoryItems.filter(item=>{var _item$notes;return item.material_type.toLowerCase().includes(searchTerm.toLowerCase())||item.inner_diameter.toString().includes(searchTerm.toLowerCase())||item.outer_diameter.toString().includes(searchTerm.toLowerCase())||((_item$notes=item.notes)===null||_item$notes===void 0?void 0:_item$notes.toLowerCase().includes(searchTerm.toLowerCase()));}).sort((a,b)=>{// ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\nconst materialPriority={'BUR':1,'NBR':2,'BT':3,'BOOM':4,'VT':5};const aPriority=materialPriority[a.material_type]||6;const bPriority=materialPriority[b.material_type]||6;if(aPriority!==bPriority){return aPriority-bPriority;}// Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)\nif(a.inner_diameter!==b.inner_diameter){return a.inner_diameter-b.inner_diameter;}return a.outer_diameter-b.outer_diameter;});const filteredTransactions=inventoryTransactions.filter(transaction=>{var _transaction$notes;return transaction.reason.toLowerCase().includes(searchTerm.toLowerCase())||transaction.material_type.toLowerCase().includes(searchTerm.toLowerCase())||((_transaction$notes=transaction.notes)===null||_transaction$notes===void 0?void 0:_transaction$notes.toLowerCase().includes(searchTerm.toLowerCase()));}).sort((a,b)=>{// ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\nconst materialPriority={'BUR':1,'NBR':2,'BT':3,'BOOM':4,'VT':5};const aPriority=materialPriority[a.material_type]||6;const bPriority=materialPriority[b.material_type]||6;if(aPriority!==bPriority){return aPriority-bPriority;}// Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ) Ø«Ù… Ø§Ù„ØªØ§Ø±ÙŠØ®\nif(a.inner_diameter!==b.inner_diameter){return a.inner_diameter-b.inner_diameter;}if(a.outer_diameter!==b.outer_diameter){return a.outer_diameter-b.outer_diameter;}return new Date(b.date)-new Date(a.date);// Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹\n});return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"\\u0627\\u0644\\u0645\\u062E\\u0632\\u0646 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('items'),className:\"px-4 py-2 rounded \".concat(currentView==='items'?'bg-blue-500 text-white':'bg-gray-200'),children:\"\\u0639\\u0646\\u0627\\u0635\\u0631 \\u0627\\u0644\\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('transactions'),className:\"px-4 py-2 rounded \".concat(currentView==='transactions'?'bg-blue-500 text-white':'bg-gray-200'),children:\"\\u0645\\u0639\\u0627\\u0645\\u0644\\u0627\\u062A \\u0627\\u0644\\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCurrentView('low-stock'),className:\"px-4 py-2 rounded \".concat(currentView==='low-stock'?'bg-red-500 text-white':'bg-gray-200'),children:[\"\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0645\\u0646\\u062E\\u0641\\u0636 (\",lowStockItems.length,\")\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('excel'),className:\"px-4 py-2 rounded \".concat(currentView==='excel'?'bg-green-500 text-white':'bg-gray-200'),children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0625\\u0643\\u0633\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('add-item'),className:\"px-4 py-2 rounded \".concat(currentView==='add-item'?'bg-green-500 text-white':'bg-gray-200'),children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0639\\u0646\\u0635\\u0631 \\u062C\\u062F\\u064A\\u062F\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"\\u0627\\u0644\\u0628\\u062D\\u062B \\u0641\\u064A \\u0627\\u0644\\u062C\\u0631\\u062F...\",className:\"w-full p-3 border border-gray-300 rounded-lg\"})}),currentView==='items'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0639\\u0646\\u0627\\u0635\\u0631 \\u0627\\u0644\\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0627\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0642\\u0637\\u0639 \\u0627\\u0644\\u0645\\u062A\\u0627\\u062D\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u062F \\u0627\\u0644\\u0623\\u062F\\u0646\\u0649\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredItems.map(item=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:item.material_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.inner_diameter}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.outer_diameter}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold \".concat(item.available_pieces<=item.min_stock_level?'text-red-600':'text-green-600'),children:[item.available_pieces,\" \\u0642\\u0637\\u0639\\u0629\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[item.min_stock_level,\" \\u0642\\u0637\\u0639\\u0629\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm \".concat(item.available_pieces<=item.min_stock_level?'bg-red-100 text-red-800':'bg-green-100 text-green-800'),children:item.available_pieces<=item.min_stock_level?'Ù…Ù†Ø®ÙØ¶':'Ø·Ø¨ÙŠØ¹ÙŠ'})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.notes||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingItem(item);setNewItem({material_type:item.material_type,inner_diameter:item.inner_diameter,outer_diameter:item.outer_diameter,available_pieces:item.available_pieces,min_stock_level:item.min_stock_level,notes:item.notes||''});setCurrentView('add-item');},className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{if(confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ØµØ±ØŸ')){try{await axios.delete(\"\".concat(API,\"/inventory/\").concat(item.id));alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ù†ØµØ± Ø¨Ù†Ø¬Ø§Ø­');fetchInventoryItems();}catch(error){console.error('Error deleting item:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¹Ù†ØµØ±');}}},className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641\"})]})})]},item.id))})]})})]}),currentView==='transactions'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0639\\u0627\\u0645\\u0644\\u0629 \\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsx(\"select\",{value:newTransaction.material_type,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{material_type:e.target.value})),className:\"p-2 border border-gray-300 rounded\",children:materialTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newTransaction.inner_diameter,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{inner_diameter:e.target.value})),placeholder:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newTransaction.outer_diameter,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{outer_diameter:e.target.value})),placeholder:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsxs(\"select\",{value:newTransaction.transaction_type,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{transaction_type:e.target.value})),className:\"p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"in\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0644\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646\"}),/*#__PURE__*/_jsx(\"option\",{value:\"out\",children:\"\\u062E\\u0635\\u0645 \\u0645\\u0646 \\u0627\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"1\",value:newTransaction.pieces_change,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{pieces_change:e.target.value})),placeholder:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0642\\u0637\\u0639\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newTransaction.reason,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{reason:e.target.value})),placeholder:\"\\u0633\\u0628\\u0628 \\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0629\",className:\"p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newTransaction.notes,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{notes:e.target.value})),placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\",className:\"w-full p-2 border border-gray-300 rounded\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:addInventoryTransaction,className:\"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0633\\u062C\\u0644 \\u0645\\u0639\\u0627\\u0645\\u0644\\u0627\\u062A \\u0627\\u0644\\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0627\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0642\\u0627\\u0633\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0642\\u0637\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0645\\u062A\\u0628\\u0642\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0633\\u0628\\u0628\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredTransactions.map(transaction=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(transaction.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.material_type}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[transaction.inner_diameter,\" \\xD7 \",transaction.outer_diameter]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm \".concat(transaction.transaction_type==='in'?'bg-green-100 text-green-800':'bg-red-100 text-red-800'),children:transaction.transaction_type==='in'?'Ø¥Ø¶Ø§ÙØ©':'Ø®ØµÙ…'})}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold \".concat(transaction.pieces_change>0?'text-green-600':'text-red-600'),children:[transaction.pieces_change>0?'+':'',transaction.pieces_change,\" \\u0642\\u0637\\u0639\\u0629\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:[transaction.remaining_pieces,\" \\u0642\\u0637\\u0639\\u0629\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.reason}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.notes||'-'})]},transaction.id))})]})})]})]}),currentView==='low-stock'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold mb-4 text-red-600\",children:[\"\\u0639\\u0646\\u0627\\u0635\\u0631 \\u0628\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0645\\u0646\\u062E\\u0641\\u0636 (\",lowStockItems.length,\")\"]}),lowStockItems.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-green-600 text-center py-8\",children:\"\\u2705 \\u062C\\u0645\\u064A\\u0639 \\u0639\\u0646\\u0627\\u0635\\u0631 \\u0627\\u0644\\u062C\\u0631\\u062F \\u0641\\u064A \\u0627\\u0644\\u0645\\u0633\\u062A\\u0648\\u0649 \\u0627\\u0644\\u0637\\u0628\\u064A\\u0639\\u064A\"}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-red-50\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0627\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0642\\u0627\\u0633\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u062F \\u0627\\u0644\\u0623\\u062F\\u0646\\u0649\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0642\\u0635 \\u0627\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:lowStockItems.map(item=>/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-red-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:item.material_type}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[item.inner_diameter,\" \\xD7 \",item.outer_diameter]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold text-red-600\",children:[item.available_pieces,\" \\u0642\\u0637\\u0639\\u0629\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[item.min_stock_level,\" \\u0642\\u0637\\u0639\\u0629\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold text-red-600\",children:[Math.max(0,item.min_stock_level-item.available_pieces),\" \\u0642\\u0637\\u0639\\u0629\"]})]},item.id))})]})})]}),currentView==='add-item'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:editingItem?'ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯':'Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø¬Ø±Ø¯ Ø¬Ø¯ÙŠØ¯'}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(\"select\",{value:newItem.material_type,onChange:e=>setNewItem(_objectSpread(_objectSpread({},newItem),{},{material_type:e.target.value})),className:\"p-2 border border-gray-300 rounded\",children:materialTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newItem.inner_diameter,onChange:e=>setNewItem(_objectSpread(_objectSpread({},newItem),{},{inner_diameter:e.target.value})),placeholder:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newItem.outer_diameter,onChange:e=>setNewItem(_objectSpread(_objectSpread({},newItem),{},{outer_diameter:e.target.value})),placeholder:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"1\",value:newItem.available_pieces,onChange:e=>setNewItem(_objectSpread(_objectSpread({},newItem),{},{available_pieces:e.target.value})),placeholder:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0642\\u0637\\u0639 \\u0627\\u0644\\u0645\\u062A\\u0627\\u062D\\u0629\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newItem.min_stock_level,onChange:e=>setNewItem(_objectSpread(_objectSpread({},newItem),{},{min_stock_level:e.target.value})),placeholder:\"\\u0627\\u0644\\u062D\\u062F \\u0627\\u0644\\u0623\\u062F\\u0646\\u0649 \\u0644\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newItem.notes,onChange:e=>setNewItem(_objectSpread(_objectSpread({},newItem),{},{notes:e.target.value})),placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\",className:\"p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addInventoryItem,className:\"mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:editingItem?'ØªØ­Ø¯ÙŠØ« Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯':'Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯'}),editingItem&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingItem(null);setNewItem({material_type:'NBR',inner_diameter:'',outer_diameter:'',available_pieces:'',min_stock_level:2,notes:''});setCurrentView('items');},className:\"mt-4 mr-2 bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621 \\u0627\\u0644\\u062A\\u0639\\u062F\\u064A\\u0644\"})]}),currentView==='excel'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0645\\u0644\\u0641\\u0627\\u062A \\u0627\\u0644\\u062C\\u0631\\u062F - Excel\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u062A\\u0635\\u062F\\u064A\\u0631 \\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{try{const response=await axios.get(\"\".concat(API,\"/excel/export/inventory\"),{responseType:'blob'});const url=window.URL.createObjectURL(new Blob([response.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download',\"inventory_export_\".concat(new Date().toISOString().split('T')[0],\".xlsx\"));document.body.appendChild(link);link.click();link.remove();alert('ØªÙ… ØªØµØ¯ÙŠØ± Ù…Ù„Ù Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error exporting inventory:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù');}},className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u062A\\u0635\\u062F\\u064A\\u0631 \\u062C\\u0631\\u062F Excel\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".xlsx,.xls\",onChange:async e=>{const file=e.target.files[0];if(!file)return;const formData=new FormData();formData.append('file',file);try{const response=await axios.post(\"\".concat(API,\"/excel/import/inventory\"),formData,{headers:{'Content-Type':'multipart/form-data'}});alert(\"\\u062A\\u0645 \\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \".concat(response.data.imported_count,\" \\u0639\\u0646\\u0635\\u0631 \\u0628\\u0646\\u062C\\u0627\\u062D\"));if(response.data.errors.length>0){console.warn('Import errors:',response.data.errors);}fetchInventoryItems();}catch(error){console.error('Error importing inventory:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù');}e.target.value='';},className:\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-2\",children:\"\\u0627\\u0644\\u0623\\u0639\\u0645\\u062F\\u0629 \\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628\\u0629: material_type, inner_diameter, outer_diameter, available_pieces\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u062E\\u0627\\u0645 - Excel\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u062A\\u0635\\u062F\\u064A\\u0631 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u062E\\u0627\\u0645\"}),/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{try{const response=await axios.get(\"\".concat(API,\"/excel/export/raw-materials\"),{responseType:'blob'});const url=window.URL.createObjectURL(new Blob([response.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download',\"raw_materials_export_\".concat(new Date().toISOString().split('T')[0],\".xlsx\"));document.body.appendChild(link);link.click();link.remove();alert('ØªÙ… ØªØµØ¯ÙŠØ± Ù…Ù„Ù Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error exporting raw materials:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù');}},className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u062A\\u0635\\u062F\\u064A\\u0631 \\u0645\\u0648\\u0627\\u062F \\u062E\\u0627\\u0645 Excel\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u062E\\u0627\\u0645\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".xlsx,.xls\",onChange:async e=>{const file=e.target.files[0];if(!file)return;const formData=new FormData();formData.append('file',file);try{const response=await axios.post(\"\".concat(API,\"/excel/import/raw-materials\"),formData,{headers:{'Content-Type':'multipart/form-data'}});alert(\"\\u062A\\u0645 \\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \".concat(response.data.imported_count,\" \\u0645\\u0627\\u062F\\u0629 \\u062E\\u0627\\u0645 \\u0628\\u0646\\u062C\\u0627\\u062D\"));if(response.data.errors.length>0){console.warn('Import errors:',response.data.errors);}}catch(error){console.error('Error importing raw materials:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù');}e.target.value='';},className:\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-2\",children:\"\\u0627\\u0644\\u0623\\u0639\\u0645\\u062F\\u0629 \\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628\\u0629: material_type, inner_diameter, outer_diameter, height, pieces_count, unit_code, cost_per_mm\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 p-6 rounded-lg shadow-md md:col-span-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u062A\\u0639\\u0644\\u064A\\u0645\\u0627\\u062A \\u0627\\u0633\\u062A\\u062E\\u062F\\u0627\\u0645 \\u0627\\u0644\\u0625\\u0643\\u0633\\u0644\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u062A\\u0635\\u062F\\u064A\\u0631 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"text-sm text-gray-700 list-disc list-inside space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u064A\\u062A\\u0645 \\u062A\\u0635\\u062F\\u064A\\u0631 \\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0644\\u0645\\u0644\\u0641 \\u064A\\u062D\\u062A\\u0648\\u064A \\u0639\\u0644\\u0649 \\u062A\\u0646\\u0633\\u064A\\u0642 \\u062C\\u0627\\u0647\\u0632 \\u0644\\u0644\\u062A\\u0639\\u062F\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u064A\\u0645\\u0643\\u0646 \\u0641\\u062A\\u062D \\u0627\\u0644\\u0645\\u0644\\u0641 \\u0641\\u064A Excel \\u0623\\u0648 Google Sheets\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"text-sm text-gray-700 list-disc list-inside space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u064A\\u062C\\u0628 \\u0623\\u0646 \\u064A\\u0643\\u0648\\u0646 \\u0627\\u0644\\u0645\\u0644\\u0641 \\u0645\\u0646 \\u0646\\u0648\\u0639 .xlsx \\u0623\\u0648 .xls\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0644\\u0623\\u0639\\u0645\\u062F\\u0629 \\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628\\u0629 \\u064A\\u062C\\u0628 \\u0623\\u0646 \\u062A\\u0643\\u0648\\u0646 \\u0645\\u0648\\u062C\\u0648\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u0645\\u0648\\u062C\\u0648\\u062F\\u0629 \\u0644\\u0646 \\u062A\\u062A\\u0623\\u062B\\u0631 (\\u064A\\u062A\\u0645 \\u0627\\u0644\\u062A\\u062D\\u062F\\u064A\\u062B \\u0623\\u0648 \\u0627\\u0644\\u0625\\u0636\\u0627\\u0641\\u0629)\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0633\\u064A\\u062A\\u0645 \\u0639\\u0631\\u0636 \\u0631\\u0633\\u0627\\u0644\\u0629 \\u062A\\u0623\\u0643\\u064A\\u062F \\u0645\\u0639 \\u0639\\u062F\\u062F \\u0627\\u0644\\u0639\\u0646\\u0627\\u0635\\u0631 \\u0627\\u0644\\u0645\\u0633\\u062A\\u0648\\u0631\\u062F\\u0629\"})]})]})]})]})]})]});};// Local Products Management Component\nconst Local=()=>{const[suppliers,setSuppliers]=useState([]);const[localProducts,setLocalProducts]=useState([]);const[supplierTransactions,setSupplierTransactions]=useState([]);const[currentView,setCurrentView]=useState('suppliers');// suppliers, products, transactions\nconst[newSupplier,setNewSupplier]=useState({name:'',phone:'',address:''});const[newProduct,setNewProduct]=useState({name:'',supplier_id:'',purchase_price:'',selling_price:'',current_stock:0});const[newTransaction,setNewTransaction]=useState({supplier_id:'',transaction_type:'purchase',amount:'',description:'',product_name:'',quantity:'',unit_price:'',payment_method:'cash'});const[selectedSupplier,setSelectedSupplier]=useState('');const[paymentAmount,setPaymentAmount]=useState('');const[paymentMethod,setPaymentMethod]=useState('cash');// Fetch data functions\nconst fetchSuppliers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/suppliers\"));setSuppliers(response.data||[]);}catch(error){console.error('Error fetching suppliers:',error);}};const fetchLocalProducts=async()=>{try{const response=await axios.get(\"\".concat(API,\"/local-products\"));setLocalProducts(response.data||[]);}catch(error){console.error('Error fetching local products:',error);}};const fetchSupplierTransactions=async()=>{try{const response=await axios.get(\"\".concat(API,\"/supplier-transactions\"));setSupplierTransactions(response.data||[]);}catch(error){console.error('Error fetching supplier transactions:',error);}};useEffect(()=>{fetchSuppliers();fetchLocalProducts();fetchSupplierTransactions();},[]);// Add supplier\nconst addSupplier=async()=>{if(!newSupplier.name.trim()){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯');return;}try{if(newSupplier.id){// Update existing supplier\nawait axios.put(\"\".concat(API,\"/suppliers/\").concat(newSupplier.id),{name:newSupplier.name,phone:newSupplier.phone,address:newSupplier.address});alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}else{// Add new supplier\nawait axios.post(\"\".concat(API,\"/suppliers\"),newSupplier);alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}fetchSuppliers();setNewSupplier({name:'',phone:'',address:''});}catch(error){var _error$response3,_error$response3$data;console.error('Error saving supplier:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…ÙˆØ±Ø¯: '+(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.detail)||error.message));}};const editSupplier=supplier=>{// Fill the form with supplier data for editing\nsetNewSupplier({id:supplier.id,name:supplier.name,phone:supplier.phone||'',address:supplier.address||''});};const deleteSupplier=async supplierId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ±Ø¯ØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡.')){return;}try{await axios.delete(\"\".concat(API,\"/suppliers/\").concat(supplierId));fetchSuppliers();fetchLocalProducts();// Refresh products as they might be affected\nalert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response4,_error$response4$data;console.error('Error deleting supplier:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ±Ø¯: '+(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.detail)||error.message));}};// Add local product\nconst addLocalProduct=async()=>{if(!newProduct.name.trim()||!newProduct.supplier_id||!newProduct.purchase_price||!newProduct.selling_price){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{if(newProduct.id){// Update existing product\nawait axios.put(\"\".concat(API,\"/local-products/\").concat(newProduct.id),{name:newProduct.name,supplier_id:newProduct.supplier_id,purchase_price:parseFloat(newProduct.purchase_price),selling_price:parseFloat(newProduct.selling_price),current_stock:parseInt(newProduct.current_stock||0)});alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­');}else{// Add new product\nawait axios.post(\"\".concat(API,\"/local-products\"),_objectSpread(_objectSpread({},newProduct),{},{purchase_price:parseFloat(newProduct.purchase_price),selling_price:parseFloat(newProduct.selling_price),current_stock:parseInt(newProduct.current_stock||0)}));alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­');}fetchLocalProducts();setNewProduct({name:'',supplier_id:'',purchase_price:'',selling_price:'',current_stock:0});}catch(error){var _error$response5,_error$response5$data;console.error('Error saving local product:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬: '+(((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.detail)||error.message));}};const editLocalProduct=product=>{// Fill the form with product data for editing\nsetNewProduct({id:product.id,name:product.name,supplier_id:product.supplier_id,purchase_price:product.purchase_price.toString(),selling_price:product.selling_price.toString(),current_stock:product.current_stock||0});};const deleteLocalProduct=async productId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡.')){return;}try{await axios.delete(\"\".concat(API,\"/local-products/\").concat(productId));fetchLocalProducts();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response6,_error$response6$data;console.error('Error deleting local product:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬: '+(((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.detail)||error.message));}};// Pay supplier\nconst paySupplier=async()=>{if(!selectedSupplier||!paymentAmount){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙˆØ±Ø¯ ÙˆØ¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº');return;}try{await axios.post(\"\".concat(API,\"/supplier-payment?supplier_id=\").concat(selectedSupplier,\"&amount=\").concat(paymentAmount,\"&payment_method=\").concat(paymentMethod));fetchSuppliers();fetchSupplierTransactions();setSelectedSupplier('');setPaymentAmount('');alert('ØªÙ… Ø¯ÙØ¹ Ø§Ù„Ù…Ø¨Ù„Øº Ù„Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error paying supplier:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¯ÙØ¹ Ø§Ù„Ù…Ø¨Ù„Øº');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"\\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\\u064A\\u0646\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('suppliers'),className:\"px-4 py-2 rounded \".concat(currentView==='suppliers'?'bg-blue-500 text-white':'bg-gray-200'),children:\"\\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\\u064A\\u0646\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('products'),className:\"px-4 py-2 rounded \".concat(currentView==='products'?'bg-blue-500 text-white':'bg-gray-200'),children:\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('transactions'),className:\"px-4 py-2 rounded \".concat(currentView==='transactions'?'bg-blue-500 text-white':'bg-gray-200'),children:\"\\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('payments'),className:\"px-4 py-2 rounded \".concat(currentView==='payments'?'bg-blue-500 text-white':'bg-gray-200'),children:\"\\u0633\\u062F\\u0627\\u062F \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\\u064A\\u0646\"})]})]}),currentView==='suppliers'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0648\\u0631\\u062F \\u062C\\u062F\\u064A\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newSupplier.name,onChange:e=>setNewSupplier(_objectSpread(_objectSpread({},newSupplier),{},{name:e.target.value})),placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newSupplier.phone,onChange:e=>setNewSupplier(_objectSpread(_objectSpread({},newSupplier),{},{phone:e.target.value})),placeholder:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0647\\u0627\\u062A\\u0641 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newSupplier.address,onChange:e=>setNewSupplier(_objectSpread(_objectSpread({},newSupplier),{},{address:e.target.value})),placeholder:\"\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\",className:\"p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addSupplier,className:\"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0642\\u0627\\u0626\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\\u064A\\u0646\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0647\\u0627\\u062A\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0634\\u062A\\u0631\\u064A\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:suppliers.map(supplier=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:supplier.name}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:supplier.phone||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:supplier.address||'-'}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",(supplier.total_purchases||0).toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",(supplier.total_paid||0).toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold \".concat((supplier.balance||0)>0?'text-red-600':'text-green-600'),children:[\"\\u062C.\\u0645 \",(supplier.balance||0).toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editSupplier(supplier),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",title:\"\\u062A\\u062D\\u0631\\u064A\\u0631\",children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteSupplier(supplier.id),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",title:\"\\u062D\\u0630\\u0641\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]})})]},supplier.id))})]})})]})]}),currentView==='products'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0646\\u062A\\u062C \\u0645\\u062D\\u0644\\u064A \\u062C\\u062F\\u064A\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newProduct.name,onChange:e=>setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{name:e.target.value})),placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsxs(\"select\",{value:newProduct.supplier_id,onChange:e=>setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{supplier_id:e.target.value})),className:\"p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),suppliers.map(supplier=>/*#__PURE__*/_jsx(\"option\",{value:supplier.id,children:supplier.name},supplier.id))]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newProduct.purchase_price,onChange:e=>setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{purchase_price:e.target.value})),placeholder:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0634\\u0631\\u0627\\u0621\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newProduct.selling_price,onChange:e=>setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{selling_price:e.target.value})),placeholder:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0628\\u064A\\u0639\",className:\"p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addLocalProduct,className:\"mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0642\\u0627\\u0626\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A \\u0627\\u0644\\u0645\\u062D\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0634\\u0631\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0628\\u064A\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u0627\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:localProducts.map(product=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:product.name}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.supplier_name}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",product.purchase_price.toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",product.selling_price.toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.current_stock||0}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.total_sold||0}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editLocalProduct(product),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",title:\"\\u062A\\u062D\\u0631\\u064A\\u0631\",children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteLocalProduct(product.id),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",title:\"\\u062D\\u0630\\u0641\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]})})]},product.id))})]})})]})]}),currentView==='transactions'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0645\\u0639\\u0627\\u0645\\u0644\\u0627\\u062A \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\\u064A\\u0646\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0648\\u0635\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:supplierTransactions.map(transaction=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(transaction.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.supplier_name}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm \".concat(transaction.transaction_type==='purchase'?'bg-red-100 text-red-800':'bg-green-100 text-green-800'),children:transaction.transaction_type==='purchase'?'Ø´Ø±Ø§Ø¡':'Ø¯ÙØ¹'})}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold \".concat(transaction.transaction_type==='purchase'?'text-red-600':'text-green-600'),children:[\"\\u062C.\\u0645 \",transaction.amount.toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.description}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.product_name||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.quantity||'-'})]},transaction.id))})]})})]}),currentView==='payments'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0633\\u062F\\u0627\\u062F \\u062D\\u0633\\u0627\\u0628\\u0627\\u062A \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\\u064A\\u0646\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"select\",{value:selectedSupplier,onChange:e=>setSelectedSupplier(e.target.value),className:\"p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),suppliers.filter(s=>(s.balance||0)>0).map(supplier=>/*#__PURE__*/_jsxs(\"option\",{value:supplier.id,children:[supplier.name,\" - \\u0645\\u0633\\u062A\\u062D\\u0642: \\u062C.\\u0645 \",(supplier.balance||0).toFixed(2)]},supplier.id))]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:paymentAmount,onChange:e=>setPaymentAmount(e.target.value),placeholder:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsxs(\"select\",{value:paymentMethod,onChange:e=>setPaymentMethod(e.target.value),className:\"p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"cash\",children:\"\\u0646\\u0642\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vodafone_elsawy\",children:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 010\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vodafone_wael\",children:\"\\u0643\\u0627\\u0634 0100\"}),/*#__PURE__*/_jsx(\"option\",{value:\"instapay\",children:\"\\u0627\\u0646\\u0633\\u062A\\u0627 \\u0628\\u0627\\u064A\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:paySupplier,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u062F\\u0641\\u0639 \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"})]})]});};// Dashboard Component\nconst Dashboard=()=>{const{user}=useAuth();// Only Elsawy can access dashboard\nif((user===null||user===void 0?void 0:user.username)!=='Elsawy'){return/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",dir:\"rtl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u063A\\u064A\\u0631 \\u0645\\u0633\\u0645\\u0648\\u062D!\"}),\" \\u0644\\u0648\\u062D\\u0629 \\u0627\\u0644\\u062A\\u062D\\u0643\\u0645 \\u0645\\u062E\\u0635\\u0635\\u0629 \\u0644\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645 Elsawy \\u0641\\u0642\\u0637.\"]})});}const[stats,setStats]=useState({total_sales:0,total_expenses:0,net_profit:0,total_unpaid:0,invoice_count:0,customer_count:0});useEffect(()=>{fetchStats();},[]);const fetchStats=async()=>{try{const response=await axios.get(\"\".concat(API,\"/dashboard/stats\"));setStats(response.data);}catch(error){console.error('Error fetching stats:',error);}};const clearAllData=async()=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.'))return;try{// Clear all data from backend\nawait axios.delete(\"\".concat(API,\"/customers/clear-all\"));await axios.delete(\"\".concat(API,\"/raw-materials/clear-all\"));await axios.delete(\"\".concat(API,\"/finished-products/clear-all\"));await axios.delete(\"\".concat(API,\"/invoices/clear-all\"));await axios.delete(\"\".concat(API,\"/expenses/clear-all\"));await axios.delete(\"\".concat(API,\"/payments/clear-all\"));await axios.delete(\"\".concat(API,\"/work-orders/clear-all\"));// Refresh dashboard stats\nfetchStats();alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');}catch(error){console.error('Error clearing all data:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');}};const printReport=reportType=>{const currentDate=new Date().toLocaleDateString('ar-EG');let printContent=\"\\n      <div style=\\\"font-family: Arial, sans-serif; direction: rtl; text-align: right;\\\">\\n        <div style=\\\"text-align: center; margin-bottom: 20px;\\\">\\n          <h1>\\u0645\\u0627\\u0633\\u062A\\u0631 \\u0633\\u064A\\u0644</h1>\\n          <p>\\u0627\\u0644\\u062D\\u0631\\u0641\\u064A\\u0627\\u0646 \\u0634\\u0627\\u0631\\u0639 \\u0627\\u0644\\u0633\\u0648\\u0628\\u0631 \\u062C\\u064A\\u062A - 01020630677</p>\\n          <h2>\\u062A\\u0642\\u0631\\u064A\\u0631 \\u0644\\u0648\\u062D\\u0629 \\u0627\\u0644\\u062A\\u062D\\u0643\\u0645</h2>\\n          <p>\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E: \".concat(currentDate,\"</p>\\n        </div>\\n        <table style=\\\"width: 100%; border-collapse: collapse;\\\">\\n          <tr>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\"><strong>\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u064A\\u0639\\u0627\\u062A:</strong></td>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\">\\u062C.\\u0645 \").concat(stats.total_sales.toFixed(2),\"</td>\\n          </tr>\\n          <tr>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\"><strong>\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A:</strong></td>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\">\\u062C.\\u0645 \").concat(stats.total_expenses.toFixed(2),\"</td>\\n          </tr>\\n          <tr>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\"><strong>\\u0635\\u0627\\u0641\\u064A \\u0627\\u0644\\u0631\\u0628\\u062D:</strong></td>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\">\\u062C.\\u0645 \").concat(stats.net_profit.toFixed(2),\"</td>\\n          </tr>\\n          <tr>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\"><strong>\\u0627\\u0644\\u0645\\u0628\\u0627\\u0644\\u063A \\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\\u0629:</strong></td>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\">\\u062C.\\u0645 \").concat(stats.total_unpaid.toFixed(2),\"</td>\\n          </tr>\\n          <tr>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\"><strong>\\u0639\\u062F\\u062F \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631:</strong></td>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\">\").concat(stats.invoice_count,\"</td>\\n          </tr>\\n          <tr>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\"><strong>\\u0639\\u062F\\u062F \\u0627\\u0644\\u0639\\u0645\\u0644\\u0627\\u0621:</strong></td>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\">\").concat(stats.customer_count,\"</td>\\n          </tr>\\n        </table>\\n      </div>\\n    \");const printWindow=window.open('','_blank');printWindow.document.write(printContent);printWindow.document.close();printWindow.print();};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-blue-600 to-blue-800 rounded-xl p-6 text-white shadow-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold mb-2\",children:\"\\u0644\\u0648\\u062D\\u0629 \\u0627\\u0644\\u062A\\u062D\\u0643\\u0645\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-100\",children:[\"\\u0645\\u0631\\u062D\\u0628\\u0627\\u064B \",user===null||user===void 0?void 0:user.username,\" - \\u0625\\u0644\\u064A\\u0643 \\u0646\\u0638\\u0631\\u0629 \\u0639\\u0627\\u0645\\u0629 \\u0639\\u0644\\u0649 \\u0623\\u062F\\u0627\\u0621 \\u0627\\u0644\\u0646\\u0634\\u0627\\u0637\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-6xl opacity-20\",children:\"\\uD83D\\uDCCA\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap space-x-4 space-x-reverse mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:clearAllData,className:\"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105\",children:\"\\uD83D\\uDDD1\\uFE0F \\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchStats,className:\"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105\",children:\"\\uD83D\\uDD04 \\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>printReport('dashboard'),className:\"bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105\",children:\"\\uD83D\\uDDA8\\uFE0F \\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"bg-white text-gray-700 border-0 rounded-lg px-4 py-3 shadow-lg focus:ring-2 focus:ring-blue-300 font-medium\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"\\uD83D\\uDCC5 \\u064A\\u0648\\u0645\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\uD83D\\uDCC6 \\u0623\\u0633\\u0628\\u0648\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\uD83D\\uDCCA \\u0634\\u0647\\u0631\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\uD83D\\uDCC8 \\u0633\\u0646\\u0648\\u064A\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-green-400 to-green-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold opacity-90\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u064A\\u0639\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold mt-2\",children:[\"\\u062C.\\u0645 \",stats.total_sales.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl opacity-30\",children:\"\\uD83D\\uDCB0\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-red-400 to-red-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold opacity-90\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold mt-2\",children:[\"\\u062C.\\u0645 \",stats.total_expenses.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl opacity-30\",children:\"\\uD83D\\uDCB8\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-blue-400 to-blue-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold opacity-90\",children:\"\\u0635\\u0627\\u0641\\u064A \\u0627\\u0644\\u0631\\u0628\\u062D\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold mt-2\",children:[\"\\u062C.\\u0645 \",stats.net_profit.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl opacity-30\",children:\"\\uD83D\\uDCC8\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-orange-400 to-orange-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold opacity-90\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0627\\u0644\\u063A \\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\\u0629\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold mt-2\",children:[\"\\u062C.\\u0645 \",stats.total_unpaid.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl opacity-30\",children:\"\\u23F3\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-purple-400 to-purple-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold opacity-90\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold mt-2\",children:stats.invoice_count})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl opacity-30\",children:\"\\uD83E\\uDDFE\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-teal-400 to-teal-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold opacity-90\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0639\\u0645\\u0644\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold mt-2\",children:stats.customer_count})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl opacity-30\",children:\"\\uD83D\\uDC65\"})]})})]})]});};// Sales Component\nconst Sales=()=>{const[customers,setCustomers]=useState([]);const[newCustomer,setNewCustomer]=useState('');const[selectedCustomer,setSelectedCustomer]=useState('');const[suppliers,setSuppliers]=useState([]);// Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†\nconst[supervisorName,setSupervisorName]=useState('');// Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØªØµÙ†ÙŠØ¹\nconst[invoiceTitle,setInvoiceTitle]=useState('');// Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nconst[currentItem,setCurrentItem]=useState({seal_type:'RSL',material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',quantity:1,unit_price:'',product_type:'manufactured'// manufactured Ø£Ùˆ local\n});// New state for dual measurement inputs\nconst[measurements,setMeasurements]=useState({inner_diameter_mm:'',inner_diameter_inch:'',outer_diameter_mm:'',outer_diameter_inch:'',height_mm:'',height_inch:'',wall_height_mm:'',wall_height_inch:''});const[localProduct,setLocalProduct]=useState({product_size:'',// Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ù†ØªØ¬\nproduct_type:'',// Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬\npurchase_price:'',selling_price:'',supplier:''});const[items,setItems]=useState([]);const[paymentMethod,setPaymentMethod]=useState('Ù†Ù‚Ø¯ÙŠ');const[discount,setDiscount]=useState(0);// Ø§Ù„Ø®ØµÙ…\nconst[discountType,setDiscountType]=useState('amount');// Ù†ÙˆØ¹ Ø§Ù„Ø®ØµÙ…: amount Ø£Ùˆ percentage\nconst[compatibilityResults,setCompatibilityResults]=useState(null);const[selectedMaterial,setSelectedMaterial]=useState(null);const[selectedMaterials,setSelectedMaterials]=useState([]);// Ø®Ø§Ù…Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© Ù…Ø®ØªØ§Ø±Ø©\nconst[measurementUnit,setMeasurementUnit]=useState('Ù…Ù…');// Ø¨ÙˆØµØ© Ø£Ùˆ Ù…Ù…\nconst[wallHeight,setWallHeight]=useState('');// Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø© Ù„Ù„Ù€ W types\nconst[clientType,setClientType]=useState(1);// Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù„ØªØ³Ø¹ÙŠØ± (1, 2, 3)\n// Measurement conversion functions\nconst mmToInch=mm=>{if(!mm||mm==='')return'';return(parseFloat(mm)/25.4).toFixed(4);};const inchToMm=inch=>{if(!inch||inch==='')return'';return(parseFloat(inch)*25.4).toFixed(2);};// Handle measurement input changes with auto-conversion\nconst handleMeasurementChange=(field,value,unit)=>{const newMeasurements=_objectSpread({},measurements);if(unit==='mm'){newMeasurements[\"\".concat(field,\"_mm\")]=value;newMeasurements[\"\".concat(field,\"_inch\")]=mmToInch(value);}else{newMeasurements[\"\".concat(field,\"_inch\")]=value;newMeasurements[\"\".concat(field,\"_mm\")]=inchToMm(value);}setMeasurements(newMeasurements);// Update currentItem with mm values (for backend compatibility)\nconst mmValue=parseFloat(newMeasurements[\"\".concat(field,\"_mm\")])||'';setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{[field]:mmValue}));};const sealTypes=['RSL','RS','RSS','RSE','B17','B3','B14','B1','R15','R17','W1','W4','W5','W11','WBT','XR','CH','VR'];const materialTypes=['NBR','BUR','BT','VT','BOOM'];useEffect(()=>{fetchCustomers();fetchSuppliers();},[]);const fetchCustomers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/customers\"));// Sort customers alphabetically by name\nconst sortedCustomers=(response.data||[]).sort((a,b)=>a.name.localeCompare(b.name,'ar'));setCustomers(sortedCustomers);}catch(error){console.error('Error fetching customers:',error);}};const fetchSuppliers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/suppliers\"));setSuppliers(response.data||[]);}catch(error){console.error('Error fetching suppliers:',error);}};// Calculate automatic pricing based on material and client type\nconst calculateAutomaticPrice=async(material,height,clientType)=>{try{const response=await axios.post(\"\".concat(API,\"/calculate-price\"),null,{params:{material_type:material.material_type,inner_diameter:material.inner_diameter,outer_diameter:material.outer_diameter,height:height,client_type:clientType}});return response.data;}catch(error){console.log('No pricing found for this material combination:',error);return null;}};// Confirm multi-material selection and calculate pricing\nconst confirmMultiMaterialSelection=async()=>{try{// Calculate total pricing for all selected materials\nlet totalPrice=0;const height=parseFloat(currentItem.height);for(const selected of selectedMaterials){const pricing=await calculateAutomaticPrice(selected.material,height,clientType);if(pricing){totalPrice+=pricing.total_price*selected.seals;}}// Update the current item with the calculated price\nsetCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{unit_price:(totalPrice/parseInt(currentItem.quantity)).toFixed(2)}));// Set the first material as the selected material for compatibility\nif(selectedMaterials.length>0){setSelectedMaterial(selectedMaterials[0].material);}alert(\"\\u2705 \\u062A\\u0645 \\u062A\\u0623\\u0643\\u064A\\u062F \\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0627\\u062A \\u0628\\u0646\\u062C\\u0627\\u062D!\\n\\n\\uD83D\\uDCCA \\u0645\\u0644\\u062E\\u0635 \\u0627\\u0644\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631:\\n\".concat(selectedMaterials.map(sel=>\"- \".concat(sel.material.unit_code,\": \").concat(sel.seals,\" \\u0633\\u064A\\u0644\")).join('\\n'),\"\\n\\n\\uD83D\\uDCB0 \\u0627\\u0644\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A: \").concat(totalPrice.toFixed(2),\" \\u062C.\\u0645\\n\\uD83D\\uDCB0 \\u0633\\u0639\\u0631 \\u0627\\u0644\\u0633\\u064A\\u0644 \\u0627\\u0644\\u0648\\u0627\\u062D\\u062F: \").concat((totalPrice/parseInt(currentItem.quantity)).toFixed(2),\" \\u062C.\\u0645\"));}catch(error){console.error('Error confirming multi-material selection:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±');}};const checkCompatibility=async()=>{if(!currentItem.inner_diameter||!currentItem.outer_diameter||!currentItem.height){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}let innerDiameter=parseFloat(currentItem.inner_diameter);let outerDiameter=parseFloat(currentItem.outer_diameter);let height=parseFloat(currentItem.height);if(isNaN(innerDiameter)||isNaN(outerDiameter)||isNaN(height)){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø£Ø±Ù‚Ø§Ù… ØµØ­ÙŠØ­Ø© Ù„Ù„Ù…Ù‚Ø§Ø³Ø§Øª');return;}// Convert from inches to millimeters if needed\nif(measurementUnit==='Ø¨ÙˆØµØ©'){innerDiameter=innerDiameter*25.4;outerDiameter=outerDiameter*25.4;height=height*25.4;console.log(\"\\u062A\\u062D\\u0648\\u064A\\u0644 \\u0645\\u0646 \\u0628\\u0648\\u0635\\u0629 \\u0625\\u0644\\u0649 \\u0645\\u0644\\u0644\\u064A\\u0645\\u062A\\u0631:\\n        \\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A: \".concat(currentItem.inner_diameter,\" \\u0628\\u0648\\u0635\\u0629 = \").concat(innerDiameter.toFixed(1),\" \\u0645\\u0645\\n        \\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A: \").concat(currentItem.outer_diameter,\" \\u0628\\u0648\\u0635\\u0629 = \").concat(outerDiameter.toFixed(1),\" \\u0645\\u0645\\n        \\u0627\\u0644\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639: \").concat(currentItem.height,\" \\u0628\\u0648\\u0635\\u0629 = \").concat(height.toFixed(1),\" \\u0645\\u0645\"));}try{const response=await axios.post(\"\".concat(API,\"/compatibility-check\"),{seal_type:currentItem.seal_type,material_type:currentItem.material_type,inner_diameter:innerDiameter,outer_diameter:outerDiameter,height:height});setCompatibilityResults(response.data);}catch(error){console.error('Error checking compatibility:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„ØªÙˆØ§ÙÙ‚');}};const addItem=()=>{if(currentItem.product_type==='manufactured'){// Validation for manufactured products - check if at least one measurement is filled\nconst hasInnerDiameter=measurements.inner_diameter_mm||measurements.inner_diameter_inch;const hasOuterDiameter=measurements.outer_diameter_mm||measurements.outer_diameter_inch;const hasHeight=measurements.height_mm||measurements.height_inch;if(!hasInnerDiameter||!hasOuterDiameter||!hasHeight||!currentItem.unit_price){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© (Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª ÙˆØ§Ù„Ø³Ø¹Ø±)');return;}// Use mm values (they're automatically kept in sync by handleMeasurementChange)\nconst innerDiameter=parseFloat(currentItem.inner_diameter);const outerDiameter=parseFloat(currentItem.outer_diameter);const height=parseFloat(currentItem.height);const wallHeightValue=parseFloat(measurements.wall_height_mm)||null;const item=_objectSpread(_objectSpread({},currentItem),{},{inner_diameter:innerDiameter,outer_diameter:outerDiameter,height:height,quantity:parseInt(currentItem.quantity),unit_price:parseFloat(currentItem.unit_price),total_price:parseFloat(currentItem.unit_price)*parseInt(currentItem.quantity),wall_height:wallHeightValue,// Store original display values for both units\ndisplay_measurements:{inner_diameter_mm:measurements.inner_diameter_mm,inner_diameter_inch:measurements.inner_diameter_inch,outer_diameter_mm:measurements.outer_diameter_mm,outer_diameter_inch:measurements.outer_diameter_inch,height_mm:measurements.height_mm,height_inch:measurements.height_inch,wall_height_mm:measurements.wall_height_mm,wall_height_inch:measurements.wall_height_inch},material_used:selectedMaterial?selectedMaterial.unit_code:null,material_details:selectedMaterial?{id:selectedMaterial.id,unit_code:selectedMaterial.unit_code,inner_diameter:selectedMaterial.inner_diameter,outer_diameter:selectedMaterial.outer_diameter,height:selectedMaterial.height,material_type:selectedMaterial.material_type,is_finished_product:selectedMaterial.is_finished_product||false}:{// Ø¥Ø±Ø³Ø§Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø­ØªÙ‰ Ø¨Ø¯ÙˆÙ† Ø§Ø®ØªÙŠØ§Ø± Ù…Ø§Ø¯Ø© Ù…Ø­Ø¯Ø¯Ø©\nmaterial_type:currentItem.material_type,inner_diameter:parseFloat(currentItem.inner_diameter),outer_diameter:parseFloat(currentItem.outer_diameter),is_finished_product:false},// Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø®Ø§Ù…Ø§Øª Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©\nselected_materials:selectedMaterials.length>0?selectedMaterials.map(sel=>({unit_code:sel.material.unit_code,material_type:sel.material.material_type,inner_diameter:sel.material.inner_diameter,outer_diameter:sel.material.outer_diameter,height:sel.material.height,seals_count:sel.seals,id:sel.material.id})):null});setItems([...items,item]);setCurrentItem({seal_type:'RSL',material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',quantity:1,unit_price:'',product_type:'manufactured'});setMeasurements({inner_diameter_mm:'',inner_diameter_inch:'',outer_diameter_mm:'',outer_diameter_inch:'',height_mm:'',height_inch:'',wall_height_mm:'',wall_height_inch:''});}else{// Validation for local products\nif(!localProduct.product_size||!localProduct.product_type||!localProduct.selling_price||!localProduct.supplier||!localProduct.purchase_price){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠ');return;}const product_name=\"\".concat(localProduct.product_size,\" - \").concat(localProduct.product_type);const item={// Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©ØŒ Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ØµÙ†Ø¹Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† null\nseal_type:null,material_type:null,inner_diameter:null,outer_diameter:null,height:null,product_type:'local',product_name:product_name,product_size:localProduct.product_size,product_type_name:localProduct.product_type,supplier:localProduct.supplier,purchase_price:parseFloat(localProduct.purchase_price),selling_price:parseFloat(localProduct.selling_price),quantity:parseInt(currentItem.quantity),unit_price:parseFloat(localProduct.selling_price),// Use selling price as unit price\ntotal_price:parseFloat(localProduct.selling_price)*parseInt(currentItem.quantity),// Store local product details\nlocal_product_details:{product_size:localProduct.product_size,product_type:localProduct.product_type,supplier:localProduct.supplier,purchase_price:parseFloat(localProduct.purchase_price),selling_price:parseFloat(localProduct.selling_price)}};setItems([...items,item]);setLocalProduct({product_size:'',product_type:'',purchase_price:'',selling_price:'',supplier:''});setCurrentItem({seal_type:'RSL',material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',quantity:1,unit_price:'',product_type:'manufactured'});setMeasurements({inner_diameter_mm:'',inner_diameter_inch:'',outer_diameter_mm:'',outer_diameter_inch:'',height_mm:'',height_inch:'',wall_height_mm:'',wall_height_inch:''});}setCompatibilityResults(null);setSelectedMaterial(null);setSelectedMaterials([]);// Ù…Ø³Ø­ Ø§Ù„Ø®Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©\n};const editItem=index=>{var _item$inner_diameter,_item$outer_diameter,_item$height,_item$unit_price,_item$inner_diameter2,_item$outer_diameter2,_item$height2,_item$wall_height;const item=items[index];// Set current item for editing\nsetCurrentItem({seal_type:item.seal_type||'RSL',material_type:item.material_type||'NBR',inner_diameter:((_item$inner_diameter=item.inner_diameter)===null||_item$inner_diameter===void 0?void 0:_item$inner_diameter.toString())||'',outer_diameter:((_item$outer_diameter=item.outer_diameter)===null||_item$outer_diameter===void 0?void 0:_item$outer_diameter.toString())||'',height:((_item$height=item.height)===null||_item$height===void 0?void 0:_item$height.toString())||'',quantity:item.quantity||1,unit_price:((_item$unit_price=item.unit_price)===null||_item$unit_price===void 0?void 0:_item$unit_price.toString())||'',product_type:item.product_type||(item.local_product_details?'local':'manufactured')});// Set measurements for dual input fields (assuming values are in mm from database)\nsetMeasurements({inner_diameter_mm:((_item$inner_diameter2=item.inner_diameter)===null||_item$inner_diameter2===void 0?void 0:_item$inner_diameter2.toString())||'',inner_diameter_inch:mmToInch(item.inner_diameter)||'',outer_diameter_mm:((_item$outer_diameter2=item.outer_diameter)===null||_item$outer_diameter2===void 0?void 0:_item$outer_diameter2.toString())||'',outer_diameter_inch:mmToInch(item.outer_diameter)||'',height_mm:((_item$height2=item.height)===null||_item$height2===void 0?void 0:_item$height2.toString())||'',height_inch:mmToInch(item.height)||'',wall_height_mm:((_item$wall_height=item.wall_height)===null||_item$wall_height===void 0?void 0:_item$wall_height.toString())||'',wall_height_inch:mmToInch(item.wall_height)||''});// Set wall height if exists\nif(item.wall_height){setWallHeight(item.wall_height.toString());}// Set measurement unit if exists\nif(item.measurement_unit){setMeasurementUnit(item.measurement_unit);}// Set local product details if exists\nif(item.local_product_details){var _item$unit_price2;setLocalProduct({product_size:item.local_product_details.product_size||'',product_type:item.local_product_details.product_type||'',purchase_price:'',selling_price:((_item$unit_price2=item.unit_price)===null||_item$unit_price2===void 0?void 0:_item$unit_price2.toString())||'',supplier:''});}// Remove the item being edited\nconst newItems=items.filter((_,i)=>i!==index);setItems(newItems);};const deleteItem=index=>{if(confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ØµØ±ØŸ')){const newItems=items.filter((_,i)=>i!==index);setItems(newItems);}};const[isCreatingInvoice,setIsCreatingInvoice]=useState(false);const createInvoice=async()=>{// Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø± Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nif(isCreatingInvoice){return;}if(!selectedCustomer&&!newCustomer){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø£Ùˆ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯');return;}if(items.length===0){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª Ù„Ù„ÙØ§ØªÙˆØ±Ø©');return;}try{setIsCreatingInvoice(true);// Ø¨Ø¯Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nlet customerId=selectedCustomer;let customerName='';// Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯ Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±\nif(!selectedCustomer&&newCustomer){try{const customerResponse=await axios.post(\"\".concat(API,\"/customers\"),{name:newCustomer,phone:'',address:''});customerId=customerResponse.data.id;customerName=newCustomer;// ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\nfetchCustomers();}catch(customerError){var _customerError$respon;// Check if it's a duplicate customer error\nif(((_customerError$respon=customerError.response)===null||_customerError$respon===void 0?void 0:_customerError$respon.status)===409){// Customer exists, ask user what to do\nconst existingCustomer=customers.find(c=>c.name.toLowerCase()===newCustomer.toLowerCase());if(existingCustomer){if(confirm(\"\\u26A0\\uFE0F \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\\"\".concat(newCustomer,\"\\\" \\u0645\\u0648\\u062C\\u0648\\u062F \\u0628\\u0627\\u0644\\u0641\\u0639\\u0644!\\n\\n\\u0647\\u0644 \\u062A\\u0631\\u064A\\u062F \\u0627\\u0633\\u062A\\u062E\\u062F\\u0627\\u0645 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0627\\u0644\\u0645\\u0648\\u062C\\u0648\\u062F\\u061F\"))){customerId=existingCustomer.id;customerName=existingCustomer.name;setSelectedCustomer(existingCustomer.id);setNewCustomer('');}else{setIsCreatingInvoice(false);return;}}else{alert(\"\\u274C \".concat(customerError.response.data.detail,\"\\n\\n\\u064A\\u0631\\u062C\\u0649 \\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0645\\u0646 \\u0627\\u0644\\u0642\\u0627\\u0626\\u0645\\u0629.\"));setIsCreatingInvoice(false);return;}}else{throw customerError;}}}else{const customer=customers.find(c=>c.id===customerId);customerName=customer?customer.name:'';}// Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ ÙˆØ§Ù„Ø®ØµÙ…\nconst subtotal=items.reduce((sum,item)=>sum+item.total_price,0);const discountAmount=discountType==='percentage'?subtotal*parseFloat(discount||0)/100:parseFloat(discount||0);const totalAfterDiscount=subtotal-discountAmount;// Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nconst invoiceData={customer_id:customerId,customer_name:customerName,invoice_title:invoiceTitle,// Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nsupervisor_name:supervisorName,// Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù\nitems:items,payment_method:paymentMethod,subtotal:subtotal,discount:discountAmount,discount_type:discountType,discount_value:parseFloat(discount||0),total_after_discount:totalAfterDiscount,notes:''};const response=await axios.post(\"\".concat(API,\"/invoices?supervisor_name=\").concat(encodeURIComponent(supervisorName)),invoiceData);if(response.data){alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');// Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\nsetItems([]);setSelectedCustomer('');setNewCustomer('');setSupervisorName('');setInvoiceTitle('');// Ù…Ø³Ø­ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nsetPaymentMethod('Ù†Ù‚Ø¯ÙŠ');setDiscount(0);setDiscountType('amount');setClientType(1);// Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„\n// Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nprintInvoice(response.data);}}catch(error){var _error$response7,_error$response7$data;console.error('Error creating invoice:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©: '+(((_error$response7=error.response)===null||_error$response7===void 0?void 0:(_error$response7$data=_error$response7.data)===null||_error$response7$data===void 0?void 0:_error$response7$data.detail)||error.message));}finally{setIsCreatingInvoice(false);// Ø¥Ù†Ù‡Ø§Ø¡ Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡\n}};const printInvoice=invoice=>{const printContent=\"\\n      <!DOCTYPE html>\\n      <html dir=\\\"rtl\\\">\\n      <head>\\n        <meta charset=\\\"UTF-8\\\">\\n        <style>\\n          body {\\n            font-family: Arial, sans-serif;\\n            margin: 0;\\n            padding: 20px;\\n            direction: rtl;\\n            font-size: 15px;\\n          }\\n          .header {\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n            border-bottom: 3px solid #000;\\n            padding-bottom: 10px;\\n            margin-bottom: 20px;\\n          }\\n          .company-info {\\n            text-align: right;\\n          }\\n          .company-name {\\n            font-size: 32px;\\n            font-weight: bold;\\n            color: #000;\\n            margin: 0;\\n          }\\n          .company-subtitle {\\n            font-size: 20px;\\n            margin: 5px 0;\\n            color: #666;\\n          }\\n          .company-details {\\n            font-size: 16px;\\n            margin: 2px 0;\\n            color: #333;\\n          }\\n          .logo-section {\\n            text-align: center;\\n            flex: 1;\\n          }\\n          .invoice-title {\\n            font-size: 20px;\\n            font-weight: bold;\\n            background-color: #ff4444;\\n            color: white;\\n            padding: 8px 20px;\\n            border-radius: 5px;\\n            display: inline-block;\\n            margin-bottom: 10px;\\n          }\\n          .invoice-number {\\n            font-size: 18px;\\n            font-weight: bold;\\n            color: #ff4444;\\n          }\\n          .customer-info {\\n            display: flex;\\n            justify-content: space-between;\\n            margin: 20px 0;\\n          }\\n          .customer-details {\\n            text-align: right;\\n          }\\n          .date-info {\\n            text-align: left;\\n          }\\n          .products-table {\\n            width: 100%;\\n            border-collapse: collapse;\\n            border: 2px solid #000;\\n            margin: 20px 0;\\n          }\\n          .products-table th,\\n          .products-table td {\\n            border: 1px solid #000;\\n            padding: 8px;\\n            text-align: center;\\n          }\\n          .products-table th {\\n            background-color: #f0f0f0;\\n            font-weight: bold;\\n          }\\n          .footer {\\n            margin-top: 30px;\\n            border-top: 1px solid #ccc;\\n            padding-top: 15px;\\n            display: flex;\\n            justify-content: space-between;\\n            font-size: 12px;\\n            color: #666;\\n          }\\n          .total-section {\\n            text-align: left;\\n            margin-top: 10px;\\n          }\\n          .total-amount {\\n            font-size: 18px;\\n            font-weight: bold;\\n            border: 2px solid #000;\\n            padding: 10px;\\n            display: inline-block;\\n            background-color: #f9f9f9;\\n          }\\n          @media print {\\n            body { margin: 0; padding: 10px; }\\n          }\\n        </style>\\n      </head>\\n      <body>\\n        <!-- Header Section -->\\n        <div class=\\\"header\\\">\\n          <div class=\\\"company-info\\\">\\n            <h1 class=\\\"company-name\\\">\\u0634\\u0631\\u0643\\u0629 \\u0645\\u0627\\u0633\\u062A\\u0631 \\u0633\\u064A\\u0644</h1>\\n            <p class=\\\"company-subtitle\\\">\\u062A\\u0635\\u0646\\u064A\\u0639 \\u062C\\u0645\\u064A\\u0639 \\u0623\\u0646\\u0648\\u0627\\u0639 \\u0627\\u0644\\u0623\\u0648\\u064A\\u0644 \\u0633\\u064A\\u0644</p>\\n            <p class=\\\"company-details\\\">\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0623\\u0642\\u0637\\u0627\\u0631 \\u062D\\u062A\\u0649 \\u0665\\u0660\\u0660\\u0645\\u0644</p>\\n            <p class=\\\"company-details\\\">\\u0647\\u064A\\u062F\\u0631\\u0648\\u0644\\u064A\\u0643 - \\u0646\\u064A\\u0648\\u0645\\u0627\\u062A\\u064A\\u0643</p>\\n          </div>\\n          \\n          <div class=\\\"logo-section\\\">\\n            <img src=\\\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\\\" \\n                 alt=\\\"Master Seal Logo\\\" \\n                 style=\\\"max-width: 120px; max-height: 80px; margin-bottom: 10px;\\\">\\n            <div class=\\\"invoice-title\\\">\".concat(invoice.invoice_title||'Ø¹Ø±Ø¶ Ø³Ø¹Ø±',\"</div>\\n            <div class=\\\"invoice-number\\\">\").concat(invoice.invoice_number,\"</div>\\n          </div>\\n        </div>\\n\\n        <!-- Customer and Date Info -->\\n        <div class=\\\"customer-info\\\">\\n          <div class=\\\"customer-details\\\">\\n            <p><strong>\\u0627\\u0644\\u0633\\u0627\\u062F\\u0629:</strong> \").concat(invoice.customer_name,\"</p>\\n            <p><strong>\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646:</strong> \").concat(invoice.customer_address||'........................',\"</p>\\n          </div>\\n          <div class=\\\"date-info\\\">\\n            <p><strong>\\u062A\\u062D\\u0631\\u064A\\u0631 \\u0641\\u064A:</strong> \").concat(new Date(invoice.date).toLocaleDateString('ar-EG'),\"</p>\\n            <p><strong>Date:</strong> \").concat(new Date(invoice.date).toLocaleDateString('en-GB'),\"</p>\\n          </div>\\n        </div>\\n\\n        <!-- Products Table -->\\n        <table class=\\\"products-table\\\">\\n          <thead>\\n            <tr>\\n              <th style=\\\"width: 60px;\\\">\\u0627\\u0644\\u0645\\u0633\\u0644\\u0633\\u0644<br>Item</th>\\n              <th style=\\\"width: 80px;\\\">\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629<br>QTY</th>\\n              <th style=\\\"width: 200px;\\\">Description<br>\\u0627\\u0644\\u0645\\u0648\\u0627\\u0635\\u0641\\u0627\\u062A</th>\\n              <th style=\\\"width: 100px;\\\">\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629<br>Unit Price</th>\\n              <th style=\\\"width: 100px;\\\">\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A<br>Total</th>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            \").concat(invoice.items.map((item,index)=>\"\\n              <tr>\\n                <td>\".concat(index+1,\"</td>\\n                <td>\").concat(item.quantity,\"</td>\\n                <td style=\\\"text-align: right;\\\">\\n                  \").concat(item.local_product_details?\"\".concat(item.local_product_details.product_size,\" - \").concat(item.local_product_details.product_type):\"\".concat(item.seal_type,\" - \").concat(item.material_type,\"<br>\\n                    <small>\").concat(item.inner_diameter,\" \\xD7 \").concat(item.outer_diameter,\" \\xD7 \").concat(item.height,\" \\u0645\\u0645\").concat(item.wall_height?\" (\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629: \".concat(item.wall_height,\" \\u0645\\u0645)\"):\"\",\"</small>\"),\"\\n                </td>\\n                <td>\\u062C.\\u0645 \").concat(item.unit_price.toFixed(2),\"</td>\\n                <td>\\u062C.\\u0645 \").concat(item.total_price.toFixed(2),\"</td>\\n              </tr>\\n            \")).join(''),\"\\n            <!-- Empty rows for additional items -->\\n            \").concat(Array.from({length:Math.max(0,8-invoice.items.length)},(_,i)=>\"\\n              <tr style=\\\"height: 40px;\\\">\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n              </tr>\\n            \").join(''),\"\\n          </tbody>\\n        </table>\\n\\n        <!-- Total Section -->\\n        <div class=\\\"total-section\\\">\\n          <div style=\\\"text-align: left; margin-bottom: 10px;\\\">\\n            \").concat(invoice.subtotal?\"\\n              <div style=\\\"margin-bottom: 5px;\\\">\\n                <span>\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639 \\u0627\\u0644\\u0641\\u0631\\u0639\\u064A: \\u062C.\\u0645 \".concat(invoice.subtotal.toFixed(2),\"</span>\\n              </div>\\n            \"):'',\"\\n            \").concat(invoice.discount&&invoice.discount>0?\"\\n              <div style=\\\"margin-bottom: 5px; color: #d32f2f;\\\">\\n                <span>\\u0627\\u0644\\u062E\\u0635\\u0645: - \\u062C.\\u0645 \".concat(invoice.discount.toFixed(2),\"</span>\\n                \").concat(invoice.discount_type==='percentage'&&invoice.discount_value?\" <small>(\".concat(invoice.discount_value,\"%)</small>\"):'',\"\\n              </div>\\n              <hr style=\\\"margin: 5px 0; border: 1px solid #000;\\\">\\n            \"):'',\"\\n          </div>\\n          <div class=\\\"total-amount\\\">\\n            \\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0646\\u0647\\u0627\\u0626\\u064A: \\u062C.\\u0645 \").concat((invoice.total_after_discount||invoice.total_amount).toFixed(2),\"\\n          </div>\\n        </div>\\n\\n        <!-- Additional Info -->\\n        <div style=\\\"margin-top: 20px; text-align: center; font-size: 12px;\\\">\\n          <p><strong>\\u0645\\u0644\\u062D\\u0648\\u0638\\u0629:</strong> \\u0641\\u0642\\u0637 \\u0648\\u0642\\u062F\\u0631\\u0647</p>\\n          <div style=\\\"height: 30px; border-bottom: 1px solid #000; margin: 10px 40px;\\\"></div>\\n        </div>\\n\\n        <!-- Footer -->\\n        <div class=\\\"footer\\\">\\n          <div>\\n            <p><strong>\\u0627\\u0644\\u062A\\u0648\\u0642\\u064A\\u0639:</strong></p>\\n            <p>\\u0645\\u0648\\u0628\\u0627\\u064A\\u0644: \\u0660\\u0661\\u0660\\u0662\\u0660\\u0666\\u0663\\u0660\\u0666\\u0667\\u0667 - \\u0660\\u0661\\u0660\\u0666\\u0662\\u0663\\u0669\\u0660\\u0668\\u0667\\u0660</p>\\n            <p>\\u062A\\u0644\\u064A\\u0641\\u0648\\u0646: \\u0660\\u0661\\u0660\\u0662\\u0660\\u0666\\u0663\\u0660\\u0666\\u0667\\u0667</p>\\n          </div>\\n          <div style=\\\"text-align: left;\\\">\\n            <p><strong>\\u0627\\u0644\\u0645\\u0633\\u062A\\u0644\\u0645:</strong></p>\\n            <p>\\u0627\\u0644\\u062D\\u0631\\u0641\\u064A\\u064A\\u0646 - \\u0627\\u0644\\u0633\\u0644\\u0627\\u0645 - \\u0623\\u0645\\u0627\\u0645 \\u0627\\u0644\\u0633\\u0648\\u0628\\u0631 \\u062C\\u064A\\u062A</p>\\n            <p>\\u0645\\u0648\\u0628\\u0627\\u064A\\u0644: \\u0660\\u0661\\u0660\\u0662\\u0660\\u0666\\u0663\\u0660\\u0666\\u0667\\u0667 - \\u0660\\u0661\\u0660\\u0666\\u0662\\u0663\\u0669\\u0660\\u0668\\u0667\\u0660</p>\\n          </div>\\n        </div>\\n\\n        <!-- Note -->\\n        <div style=\\\"text-align: center; margin-top: 20px; font-size: 11px; color: #666;\\\">\\n          <p>\\u064A\\u0642\\u0631 \\u0627\\u0644\\u0645\\u0634\\u062A\\u0631\\u064A \\u0628\\u0623\\u0646\\u0647 \\u0642\\u0627\\u0645 \\u0628\\u0645\\u0639\\u0627\\u064A\\u0646\\u0629 \\u0627\\u0644\\u0628\\u0636\\u0627\\u0639\\u0629 \\u0648\\u0642\\u0628\\u0648\\u0644\\u0647\\u0627</p>\\n        </div>\\n      </body>\\n      </html>\\n    \");const printWindow=window.open('','_blank');printWindow.document.write(printContent);printWindow.document.close();printWindow.print();};const clearAllInvoices=async()=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.'))return;try{setItems([]);alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±');}catch(error){alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-6\",children:\"\\u0627\\u0644\\u0645\\u0628\\u064A\\u0639\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"select\",{value:selectedCustomer,onChange:e=>setSelectedCustomer(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),customers.map(customer=>/*#__PURE__*/_jsx(\"option\",{value:customer.id,children:customer.name},customer.id))]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newCustomer,onChange:e=>{const value=e.target.value;setNewCustomer(value);// Check for exact match and auto-select\nconst exactMatch=customers.find(c=>c.name.toLowerCase()===value.toLowerCase());if(exactMatch){// Auto-select the existing customer\nsetSelectedCustomer(exactMatch.id);setNewCustomer('');e.target.style.borderColor='';e.target.style.backgroundColor='';// Show brief confirmation\nconst tempMsg=document.createElement('div');tempMsg.textContent=\"\\u2705 \\u062A\\u0645 \\u0627\\u062E\\u062A\\u064A\\u0627\\u0631: \".concat(exactMatch.name);tempMsg.className='text-xs text-green-600 mt-1';e.target.parentElement.appendChild(tempMsg);setTimeout(()=>tempMsg.remove(),2000);}else{// Check for potential duplicates (partial match)\nconst partialMatch=customers.some(c=>c.name.toLowerCase().includes(value.toLowerCase())&&value.length>2);if(partialMatch&&value){e.target.style.borderColor='orange';e.target.style.backgroundColor='#fff3cd';}else{e.target.style.borderColor='';e.target.style.backgroundColor='';}}},placeholder:\"\\u0627\\u0633\\u0645 \\u0639\\u0645\\u064A\\u0644 \\u062C\\u062F\\u064A\\u062F\",className:\"w-full p-2 border border-gray-300 rounded\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0639\\u0645\\u064A\\u0644 \\u062C\\u062F\\u064A\\u062F\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0634\\u0631\\u0641 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:supervisorName,onChange:e=>setSupervisorName(e.target.value),placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0634\\u0631\\u0641 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\",className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:invoiceTitle,onChange:e=>setInvoiceTitle(e.target.value),placeholder:\"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\",className:\"w-full p-2 border border-gray-300 rounded\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsxs(\"select\",{value:currentItem.product_type,onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{product_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"manufactured\",children:\"\\u0645\\u0646\\u062A\\u062C \\u062A\\u0635\\u0646\\u064A\\u0639\"}),/*#__PURE__*/_jsx(\"option\",{value:\"local\",children:\"\\u0645\\u0646\\u062A\\u062C \\u0645\\u062D\\u0644\\u064A\"})]})]}),currentItem.product_type==='manufactured'?/*#__PURE__*/// Manufacturing Product Form\n_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"select\",{value:currentItem.seal_type,onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{seal_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:sealTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"select\",{value:currentItem.material_type,onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{material_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:materialTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0645\\u0644\\u064A\\u0645\\u062A\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:measurements.inner_diameter_mm,onChange:e=>handleMeasurementChange('inner_diameter',e.target.value,'mm'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0645\\u0645\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0628\\u0648\\u0635\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.0001\",value:measurements.inner_diameter_inch,onChange:e=>handleMeasurementChange('inner_diameter',e.target.value,'inch'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0628\\u0648\\u0635\\u0629\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0645\\u0644\\u064A\\u0645\\u062A\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:measurements.outer_diameter_mm,onChange:e=>handleMeasurementChange('outer_diameter',e.target.value,'mm'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0645\\u0645\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0628\\u0648\\u0635\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.0001\",value:measurements.outer_diameter_inch,onChange:e=>handleMeasurementChange('outer_diameter',e.target.value,'inch'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0628\\u0648\\u0635\\u0629\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0645\\u0644\\u064A\\u0645\\u062A\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:measurements.height_mm,onChange:e=>handleMeasurementChange('height',e.target.value,'mm'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0645\\u0645\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0628\\u0648\\u0635\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.0001\",value:measurements.height_inch,onChange:e=>handleMeasurementChange('height',e.target.value,'inch'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0628\\u0648\\u0635\\u0629\"})]})]})]}),currentItem.seal_type&&currentItem.seal_type.startsWith('W')&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0645\\u0644\\u064A\\u0645\\u062A\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:measurements.wall_height_mm,onChange:e=>handleMeasurementChange('wall_height',e.target.value,'mm'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629 \\u0628\\u0627\\u0644\\u0645\\u0644\\u064A\\u0645\\u062A\\u0631\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0628\\u0648\\u0635\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.0001\",value:measurements.wall_height_inch,onChange:e=>handleMeasurementChange('wall_height',e.target.value,'inch'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629 \\u0628\\u0627\\u0644\\u0628\\u0648\\u0635\\u0629\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:currentItem.quantity,onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{quantity:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0644\\u0644\\u062A\\u0633\\u0639\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"select\",{value:clientType,onChange:e=>setClientType(parseInt(e.target.value)),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:1,children:\"\\u0639\\u0645\\u064A\\u0644 1\"}),/*#__PURE__*/_jsx(\"option\",{value:2,children:\"\\u0639\\u0645\\u064A\\u0644 2\"}),/*#__PURE__*/_jsx(\"option\",{value:3,children:\"\\u0639\\u0645\\u064A\\u0644 3\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0633\\u064A\\u0644 \\u0627\\u0644\\u0648\\u0627\\u062D\\u062F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:currentItem.unit_price,onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{unit_price:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"textarea\",{value:currentItem.notes||'',onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{notes:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",rows:\"2\",placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0625\\u0636\\u0627\\u0641\\u064A\\u0629...\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:checkCompatibility,className:\"w-full bg-yellow-500 text-white p-2 rounded hover:bg-yellow-600\",children:\"\\u0641\\u062D\\u0635 \\u0627\\u0644\\u062A\\u0648\\u0627\\u0641\\u0642\"})})]})}):/*#__PURE__*/// Local Product Form\n_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0642\\u0627\\u0633 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:localProduct.product_size,onChange:e=>setLocalProduct(_objectSpread(_objectSpread({},localProduct),{},{product_size:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0645\\u0642\\u0627\\u0633 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:localProduct.product_type,onChange:e=>setLocalProduct(_objectSpread(_objectSpread({},localProduct),{},{product_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),/*#__PURE__*/_jsxs(\"select\",{value:localProduct.supplier,onChange:e=>setLocalProduct(_objectSpread(_objectSpread({},localProduct),{},{supplier:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),suppliers.map(supplier=>/*#__PURE__*/_jsx(\"option\",{value:supplier.name,children:supplier.name},supplier.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0634\\u0631\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:localProduct.purchase_price,onChange:e=>setLocalProduct(_objectSpread(_objectSpread({},localProduct),{},{purchase_price:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0634\\u0631\\u0627\\u0621\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0628\\u064A\\u0639\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:localProduct.selling_price,onChange:e=>setLocalProduct(_objectSpread(_objectSpread({},localProduct),{},{selling_price:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0628\\u064A\\u0639\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:currentItem.quantity,onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{quantity:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:addItem,className:\"w-full bg-green-500 text-white p-2 rounded hover:bg-green-600 mt-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0644\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"})]})]}),compatibilityResults&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0646\\u062A\\u0627\\u0626\\u062C \\u0641\\u062D\\u0635 \\u0627\\u0644\\u062A\\u0648\\u0627\\u0641\\u0642\"}),compatibilityResults.compatible_materials.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\uD83D\\uDCE6 \\u0646\\u062A\\u0627\\u0626\\u062C \\u0641\\u062D\\u0635 \\u0627\\u0644\\u062A\\u0648\\u0627\\u0641\\u0642\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mb-2\",children:[\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0627\\u062A \\u0648\\u062D\\u062F\\u062F \\u0639\\u062F\\u062F \\u0627\\u0644\\u0633\\u064A\\u0644\\u0627\\u062A \\u0645\\u0646 \\u0643\\u0644 \\u062E\\u0627\\u0645\\u0629 (\\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628: \",currentItem.quantity,\" \\u0633\\u064A\\u0644)\"]}),selectedMaterials.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-3 bg-blue-50 rounded border\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium text-blue-800 mb-2\",children:\"\\u0627\\u0644\\u062E\\u0627\\u0645\\u0627\\u062A \\u0627\\u0644\\u0645\\u062E\\u062A\\u0627\\u0631\\u0629:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:selectedMaterials.map((selected,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between bg-white p-2 rounded border\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm\",children:[selected.material.unit_code,\" - \",selected.material.material_type,selected.material.inner_diameter,\"\\xD7\",selected.material.outer_diameter,\"\\xD7\",selected.material.height]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",max:Math.floor(selected.material.height/(parseFloat(currentItem.height)+2)),value:selected.seals,onChange:e=>{const newSelected=[...selectedMaterials];newSelected[index].seals=parseInt(e.target.value)||0;setSelectedMaterials(newSelected);},className:\"w-16 p-1 border rounded text-center\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const newSelected=selectedMaterials.filter((_,i)=>i!==index);setSelectedMaterials(newSelected);},className:\"text-red-600 hover:text-red-800 text-sm\",children:\"\\u2715\"})]})]},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-sm\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639: \",selectedMaterials.reduce((sum,sel)=>sum+sel.seals,0),\" / \",currentItem.quantity,\" \\u0633\\u064A\\u0644\"]}),selectedMaterials.reduce((sum,sel)=>sum+sel.seals,0)===parseInt(currentItem.quantity)&&/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600 ml-2\",children:\"\\u2713 \\u0645\\u0643\\u062A\\u0645\\u0644\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2 max-h-48 overflow-y-auto\",children:compatibilityResults.compatible_materials.map((material,index)=>{const isSelected=selectedMaterials.some(sel=>sel.material.unit_code===material.unit_code&&sel.material.inner_diameter===material.inner_diameter&&sel.material.outer_diameter===material.outer_diameter);const maxSeals=Math.floor(material.height/(parseFloat(currentItem.height)+2));const remainingSeals=parseInt(currentItem.quantity)-selectedMaterials.reduce((sum,sel)=>sum+sel.seals,0);return/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded border transition-colors \".concat(isSelected?'bg-blue-100 border-blue-300':'bg-gray-50 hover:bg-gray-100'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-blue-600\",children:[material.unit_code,\" - \",material.material_type]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"\\u0627\\u0644\\u0623\\u0628\\u0639\\u0627\\u062F: \",material.inner_diameter,\" \\xD7 \",material.outer_diameter,\" \\xD7 \",material.height,\" \\u0645\\u0645\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-green-600\",children:[\"\\u064A\\u0645\\u0643\\u0646 \\u0625\\u0646\\u062A\\u0627\\u062C: \",maxSeals,\" \\u0633\\u064A\\u0644 \\u0643\\u062D\\u062F \\u0623\\u0642\\u0635\\u0649\"]}),material.score&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[\"\\u0646\\u0633\\u0628\\u0629 \\u0627\\u0644\\u062A\\u0648\\u0627\\u0641\\u0642: \",material.score,\"%\"]})]}),!isSelected&&remainingSeals>0&&maxSeals>0&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const newSelection={material:material,seals:Math.min(maxSeals,remainingSeals)};setSelectedMaterials([...selectedMaterials,newSelection]);},className:\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\",children:\"\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\"}),isSelected&&/*#__PURE__*/_jsx(\"div\",{className:\"text-blue-600 text-sm font-medium\",children:\"\\u2713 \\u0645\\u062E\\u062A\\u0627\\u0631\\u0629\"}),!isSelected&&remainingSeals<=0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-sm\",children:\"\\u0645\\u0643\\u062A\\u0645\\u0644\"})]})},index);})}),selectedMaterials.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const totalSeals=selectedMaterials.reduce((sum,sel)=>sum+sel.seals,0);if(totalSeals!==parseInt(currentItem.quantity)){alert(\"\\u26A0\\uFE0F \\u0645\\u062C\\u0645\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\\u0627\\u062A \\u0627\\u0644\\u0645\\u062E\\u062A\\u0627\\u0631\\u0629 (\".concat(totalSeals,\") \\u0644\\u0627 \\u064A\\u0633\\u0627\\u0648\\u064A \\u0627\\u0644\\u0639\\u062F\\u062F \\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628 (\").concat(currentItem.quantity,\")\"));return;}// ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± ÙˆØ­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø±\nconfirmMultiMaterialSelection();},className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",disabled:selectedMaterials.reduce((sum,sel)=>sum+sel.seals,0)!==parseInt(currentItem.quantity),children:\"\\u062A\\u0623\\u0643\\u064A\\u062F \\u0627\\u0644\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedMaterials([]);},className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621 \\u0627\\u0644\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\"})]})]}),compatibilityResults.compatible_products.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A \\u0627\\u0644\\u062C\\u0627\\u0647\\u0632\\u0629:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:compatibilityResults.compatible_products.map((product,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 border border-blue-300 bg-blue-50 rounded cursor-pointer hover:bg-blue-100\",onClick:()=>setSelectedMaterial({unit_code:\"FINISHED-\".concat(product.id),material_type:product.material_type,seal_type:product.seal_type,inner_diameter:product.inner_diameter,outer_diameter:product.outer_diameter,height:product.height,is_finished_product:true}),children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0646\\u0648\\u0639:\"}),\" \",product.seal_type,\" - \",product.material_type]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0645\\u0642\\u0627\\u0633:\"}),\" \",product.inner_diameter,\" \\xD7 \",product.outer_diameter,\" \\xD7 \",product.height]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629:\"}),\" \",product.quantity]})]},index))})]}),selectedMaterial&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 p-3 bg-blue-100 rounded\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold text-blue-800\",children:[\"\\u062A\\u0645 \\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629: \",selectedMaterial.unit_code,\" (\",selectedMaterial.material_type,\")\"]})})]}),items.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0623\\u062E\\u064A\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0642\\u0627\\u0633\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0633\\u0639\\u0631\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:items.map((item,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.local_product_details?item.local_product_details.product_type:item.seal_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.local_product_details?'Ù…Ø­Ù„ÙŠ':item.material_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.local_product_details?\"\".concat(item.local_product_details.product_size,\" - \").concat(item.local_product_details.product_type):\"\".concat(item.original_inner_diameter||item.inner_diameter,\" \\xD7 \").concat(item.original_outer_diameter||item.outer_diameter,\" \\xD7 \").concat(item.original_height||item.height).concat(item.original_wall_height?\" (\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629: \".concat(item.original_wall_height,\")\"):item.wall_height?\" (\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629: \".concat(item.wall_height,\")\"):'',\" \").concat(item.measurement_unit||'Ù…Ù…')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.quantity}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",item.unit_price]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",item.total_price]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editItem(index),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",title:\"\\u062A\\u062D\\u0631\\u064A\\u0631\",children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteItem(index),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",title:\"\\u062D\\u0630\\u0641\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]})})]},index))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639\"}),/*#__PURE__*/_jsxs(\"select\",{value:paymentMethod,onChange:e=>setPaymentMethod(e.target.value),className:\"p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u0646\\u0642\\u062F\\u064A\",children:\"\\u0646\\u0642\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0622\\u062C\\u0644\",children:\"\\u0622\\u062C\\u0644\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 010\",children:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 010\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0643\\u0627\\u0634 0100\",children:\"\\u0643\\u0627\\u0634 0100\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0627\\u0646\\u0633\\u062A\\u0627\\u0628\\u0627\\u064A\",children:\"\\u0627\\u0646\\u0633\\u062A\\u0627\\u0628\\u0627\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u064A\\u062F \\u0627\\u0644\\u0635\\u0627\\u0648\\u064A\",children:\"\\u064A\\u062F \\u0627\\u0644\\u0635\\u0627\\u0648\\u064A\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 p-4 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0635\\u0645\"}),/*#__PURE__*/_jsxs(\"select\",{value:discountType,onChange:e=>setDiscountType(e.target.value),className:\"p-2 border border-gray-300 rounded w-full\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"amount\",children:\"\\u0645\\u0628\\u0644\\u063A \\u062B\\u0627\\u0628\\u062A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"percentage\",children:\"\\u0646\\u0633\\u0628\\u0629 \\u0645\\u0626\\u0648\\u064A\\u0629\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium mb-1\",children:[\"\\u0642\\u064A\\u0645\\u0629 \\u0627\\u0644\\u062E\\u0635\\u0645 \",discountType==='percentage'?'(%)':'(Ø¬.Ù…)']}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:discount,onChange:e=>setDiscount(e.target.value),className:\"p-2 border border-gray-300 rounded w-full\",placeholder:\"0\",min:\"0\",step:discountType==='percentage'?'0.1':'0.01'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u062E\\u0635\\u0645\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-white border border-gray-300 rounded w-full\",children:[\"\\u062C.\\u0645 \",(()=>{const subtotal=items.reduce((sum,item)=>sum+item.total_price,0);const discountAmount=discountType==='percentage'?subtotal*parseFloat(discount||0)/100:parseFloat(discount||0);return discountAmount.toFixed(2);})()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 bg-blue-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639 \\u0627\\u0644\\u0641\\u0631\\u0639\\u064A:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg font-semibold\",children:[\"\\u062C.\\u0645 \",items.reduce((sum,item)=>sum+item.total_price,0).toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:\"\\u0627\\u0644\\u062E\\u0635\\u0645:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg font-semibold text-red-600\",children:[\"- \\u062C.\\u0645 \",(()=>{const subtotal=items.reduce((sum,item)=>sum+item.total_price,0);const discountAmount=discountType==='percentage'?subtotal*parseFloat(discount||0)/100:parseFloat(discount||0);return discountAmount.toFixed(2);})()]})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl font-bold\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0646\\u0647\\u0627\\u0626\\u064A:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xl font-bold text-green-600\",children:[\"\\u062C.\\u0645 \",(()=>{const subtotal=items.reduce((sum,item)=>sum+item.total_price,0);const discountAmount=discountType==='percentage'?subtotal*parseFloat(discount||0)/100:parseFloat(discount||0);return(subtotal-discountAmount).toFixed(2);})()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xl font-bold\",style:{display:'none'},children:[\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A: \\u062C.\\u0645 \",items.reduce((sum,item)=>sum+item.total_price,0).toFixed(2)]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:createInvoice,disabled:isCreatingInvoice,className:\"w-full p-3 rounded mt-4 text-lg font-semibold \".concat(isCreatingInvoice?'bg-gray-400 text-gray-600 cursor-not-allowed':'bg-green-500 text-white hover:bg-green-600'),children:isCreatingInvoice?'Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©...':'Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©'})]})]});};// Simple placeholder components for other pages\n// Inventory Component will be replaced with new advanced version above\n// Stock Component (Old Inventory functionality for Raw Materials and Finished Products)\nconst Stock=()=>{const[rawMaterials,setRawMaterials]=useState([]);const[finishedProducts,setFinishedProducts]=useState([]);const[searchTerm,setSearchTerm]=useState('');// Ù„Ù„Ø¨Ø­Ø«\nconst[newRawMaterial,setNewRawMaterial]=useState({material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',pieces_count:'',cost_per_mm:''});const[newFinishedProduct,setNewFinishedProduct]=useState({seal_type:'RSL',material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',quantity:'',unit_price:''});const materialTypes=['NBR','BUR','BT','VT','BOOM'];const sealTypes=['RSL','RS','RSS','RSE','B17','B3','B14','B1','R15','R17','W1','W4','W5','W11','WBT','XR','CH','VR'];// Ø¯Ø§Ù„Ø© ØªØµÙÙŠØ© Ø§Ù„Ø¨Ø­Ø«\nconst filteredRawMaterials=rawMaterials.filter(material=>material.material_type.toLowerCase().includes(searchTerm.toLowerCase())||material.unit_code.toLowerCase().includes(searchTerm.toLowerCase())||material.inner_diameter.toString().includes(searchTerm)||material.outer_diameter.toString().includes(searchTerm)||material.height.toString().includes(searchTerm)).sort((a,b)=>{// ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\nconst materialPriority={'BUR':1,'NBR':2,'BT':3,'BOOM':4,'VT':5};const aPriority=materialPriority[a.material_type]||6;const bPriority=materialPriority[b.material_type]||6;if(aPriority!==bPriority){return aPriority-bPriority;}// Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)\nif(a.inner_diameter!==b.inner_diameter){return a.inner_diameter-b.inner_diameter;}return a.outer_diameter-b.outer_diameter;});const filteredFinishedProducts=finishedProducts.filter(product=>product.seal_type.toLowerCase().includes(searchTerm.toLowerCase())||product.material_type.toLowerCase().includes(searchTerm.toLowerCase())||product.inner_diameter.toString().includes(searchTerm)||product.outer_diameter.toString().includes(searchTerm)||product.height.toString().includes(searchTerm)).sort((a,b)=>{// ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\nconst materialPriority={'BUR':1,'NBR':2,'BT':3,'BOOM':4,'VT':5};const aPriority=materialPriority[a.material_type]||6;const bPriority=materialPriority[b.material_type]||6;if(aPriority!==bPriority){return aPriority-bPriority;}// Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)\nif(a.inner_diameter!==b.inner_diameter){return a.inner_diameter-b.inner_diameter;}return a.outer_diameter-b.outer_diameter;});useEffect(()=>{fetchRawMaterials();fetchFinishedProducts();},[]);const fetchRawMaterials=async()=>{try{const response=await axios.get(\"\".concat(API,\"/raw-materials\"));setRawMaterials(response.data);}catch(error){console.error('Error fetching raw materials:',error);}};const fetchFinishedProducts=async()=>{try{const response=await axios.get(\"\".concat(API,\"/finished-products\"));setFinishedProducts(response.data);}catch(error){console.error('Error fetching finished products:',error);}};const addRawMaterial=async()=>{if(!newRawMaterial.inner_diameter||!newRawMaterial.outer_diameter||!newRawMaterial.height||!newRawMaterial.pieces_count||!newRawMaterial.cost_per_mm){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{const rawMaterial={material_type:newRawMaterial.material_type,inner_diameter:parseFloat(newRawMaterial.inner_diameter),outer_diameter:parseFloat(newRawMaterial.outer_diameter),height:parseFloat(newRawMaterial.height),pieces_count:parseInt(newRawMaterial.pieces_count),cost_per_mm:parseFloat(newRawMaterial.cost_per_mm)// unit_code will be generated automatically by backend\n};let response;if(newRawMaterial.id){// Update existing material\nresponse=await axios.put(\"\".concat(API,\"/raw-materials/\").concat(newRawMaterial.id),rawMaterial);alert(\"\\u062A\\u0645 \\u062A\\u062D\\u062F\\u064A\\u062B \\u0627\\u0644\\u0645\\u0627\\u062F\\u0629 \\u0627\\u0644\\u062E\\u0627\\u0645 \\u0628\\u0646\\u062C\\u0627\\u062D. \\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629: \".concat(response.data.unit_code));}else{// Add new material\nresponse=await axios.post(\"\".concat(API,\"/raw-materials\"),rawMaterial);alert(\"\\u062A\\u0645 \\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0627\\u062F\\u0629 \\u0627\\u0644\\u062E\\u0627\\u0645 \\u0628\\u0646\\u062C\\u0627\\u062D. \\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629: \".concat(response.data.unit_code));}fetchRawMaterials();setNewRawMaterial({material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',pieces_count:'',cost_per_mm:''});}catch(error){var _error$response8,_error$response8$data;console.error('Error saving raw material:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…: '+(((_error$response8=error.response)===null||_error$response8===void 0?void 0:(_error$response8$data=_error$response8.data)===null||_error$response8$data===void 0?void 0:_error$response8$data.detail)||error.message));}};const clearAllRawMaterials=async()=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…ØŸ')){return;}try{await axios.delete(\"\".concat(API,\"/raw-materials/clear-all\"));fetchRawMaterials();alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…');}catch(error){console.error('Error clearing raw materials:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…');}};const deleteRawMaterial=async materialId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…ØŸ')){return;}try{await axios.delete(\"\".concat(API,\"/raw-materials/\").concat(materialId));fetchRawMaterials();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…');}catch(error){console.error('Error deleting raw material:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…');}};const editRawMaterial=material=>{// Fill the form with the material data for editing\nsetNewRawMaterial({id:material.id,material_type:material.material_type,inner_diameter:material.inner_diameter.toString(),outer_diameter:material.outer_diameter.toString(),height:material.height.toString(),pieces_count:material.pieces_count.toString(),cost_per_mm:material.cost_per_mm.toString()});};const handleFileImport=async event=>{const file=event.target.files[0];if(!file)return;const formData=new FormData();formData.append('file',file);try{const response=await axios.post(\"\".concat(API,\"/excel/import/raw-materials\"),formData,{headers:{'Content-Type':'multipart/form-data'}});alert(response.data.message);fetchRawMaterials();// Refresh the raw materials list\nevent.target.value='';// Clear file input\n}catch(error){var _error$response9,_error$response9$data;console.error('Error importing file:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù: '+(((_error$response9=error.response)===null||_error$response9===void 0?void 0:(_error$response9$data=_error$response9.data)===null||_error$response9$data===void 0?void 0:_error$response9$data.detail)||error.message));}};const handleFileExport=async()=>{try{const response=await axios.get(\"\".concat(API,\"/excel/export/raw-materials\"),{responseType:'blob'});// Create download link\nconst url=window.URL.createObjectURL(new Blob([response.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download',\"raw_materials_export_\".concat(new Date().toISOString().split('T')[0],\".xlsx\"));document.body.appendChild(link);link.click();document.body.removeChild(link);window.URL.revokeObjectURL(url);}catch(error){console.error('Error exporting file:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù');}};const addFinishedProduct=async()=>{if(!newFinishedProduct.inner_diameter||!newFinishedProduct.outer_diameter||!newFinishedProduct.height||!newFinishedProduct.quantity||!newFinishedProduct.unit_price){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{const finishedProduct={seal_type:newFinishedProduct.seal_type,material_type:newFinishedProduct.material_type,inner_diameter:parseFloat(newFinishedProduct.inner_diameter),outer_diameter:parseFloat(newFinishedProduct.outer_diameter),height:parseFloat(newFinishedProduct.height),quantity:parseInt(newFinishedProduct.quantity),unit_price:parseFloat(newFinishedProduct.unit_price)};if(newFinishedProduct.id){// Update existing product\nawait axios.put(\"\".concat(API,\"/finished-products/\").concat(newFinishedProduct.id),finishedProduct);alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¨Ù†Ø¬Ø§Ø­');}else{// Add new product\nawait axios.post(\"\".concat(API,\"/finished-products\"),finishedProduct);alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¨Ù†Ø¬Ø§Ø­');}fetchFinishedProducts();setNewFinishedProduct({seal_type:'RSL',material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',quantity:'',unit_price:''});}catch(error){console.error('Error saving finished product:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ');}};const editFinishedProduct=product=>{// Fill the form with the product data for editing\nsetNewFinishedProduct({id:product.id,seal_type:product.seal_type,material_type:product.material_type,inner_diameter:product.inner_diameter.toString(),outer_diameter:product.outer_diameter.toString(),height:product.height.toString(),quantity:product.quantity.toString(),unit_price:product.unit_price.toString()});};const deleteFinishedProduct=async productId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØŸ')){return;}try{await axios.delete(\"\".concat(API,\"/finished-products/\").concat(productId));fetchFinishedProducts();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ');}catch(error){console.error('Error deleting finished product:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-6\",children:\"\\u0645\\u062E\\u0632\\u0646 \\u0625\\u0646\\u062A\\u0627\\u062C\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:\"\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u062E\\u0627\\u0645\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:/*#__PURE__*/_jsx(\"button\",{onClick:clearAllRawMaterials,className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg mb-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-4\",children:\"\\uD83D\\uDCC1 \\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0648\\u062A\\u0635\\u062F\\u064A\\u0631 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u062E\\u0627\\u0645\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-4 items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 cursor-pointer\",children:[\"\\uD83D\\uDCE4 \\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0645\\u0646 Excel\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".xlsx,.xls\",onChange:handleFileImport,className:\"hidden\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"(.xlsx \\u0623\\u0648 .xls)\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleFileExport,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\uD83D\\uDCE5 \\u062A\\u0635\\u062F\\u064A\\u0631 \\u0625\\u0644\\u0649 Excel\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600 bg-white p-2 rounded border\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u062A\\u0646\\u0633\\u064A\\u0642 \\u0627\\u0644\\u0645\\u0644\\u0641 \\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628:\"}),/*#__PURE__*/_jsx(\"br\",{}),\"material_type, inner_diameter, outer_diameter, height, pieces_count, unit_code, cost_per_mm\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"select\",{value:newRawMaterial.material_type,onChange:e=>setNewRawMaterial(_objectSpread(_objectSpread({},newRawMaterial),{},{material_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:materialTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newRawMaterial.inner_diameter,onChange:e=>setNewRawMaterial(_objectSpread(_objectSpread({},newRawMaterial),{},{inner_diameter:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newRawMaterial.outer_diameter,onChange:e=>setNewRawMaterial(_objectSpread(_objectSpread({},newRawMaterial),{},{outer_diameter:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 (\\u0645\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newRawMaterial.height,onChange:e=>setNewRawMaterial(_objectSpread(_objectSpread({},newRawMaterial),{},{height:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0642\\u0637\\u0639\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newRawMaterial.pieces_count,onChange:e=>setNewRawMaterial(_objectSpread(_objectSpread({},newRawMaterial),{},{pieces_count:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0644\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newRawMaterial.cost_per_mm,onChange:e=>setNewRawMaterial(_objectSpread(_objectSpread({},newRawMaterial),{},{cost_per_mm:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-4\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0629: \\u0633\\u064A\\u062A\\u0645 \\u062A\\u0648\\u0644\\u064A\\u062F \\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629 \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0627\\u064B \\u062D\\u0633\\u0628 \\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629 \\u0648\\u0627\\u0644\\u0645\\u0648\\u0627\\u0635\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:addRawMaterial,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0627\\u062F\\u0629 \\u062E\\u0627\\u0645\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"\\u0628\\u062D\\u062B \\u0641\\u064A \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u062E\\u0627\\u0645 (\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\\u060C \\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629\\u060C \\u0627\\u0644\\u0645\\u0642\\u0627\\u0633\\u0627\\u062A...)\",className:\"w-full p-3 border border-gray-300 rounded-lg\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0642\\u0637\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0644\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredRawMaterials.map(material=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.material_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.inner_diameter}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.outer_diameter}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.height}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.pieces_count}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.unit_code}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.cost_per_mm}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editRawMaterial(material),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",title:\"\\u062A\\u062D\\u0631\\u064A\\u0631\",children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteRawMaterial(material.id),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",title:\"\\u062D\\u0630\\u0641\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]})})]},material.id))})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0627\\u0644\\u0625\\u0646\\u062A\\u0627\\u062C \\u0627\\u0644\\u062A\\u0627\\u0645\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"select\",{value:newFinishedProduct.seal_type,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{seal_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:sealTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"select\",{value:newFinishedProduct.material_type,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{material_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:materialTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newFinishedProduct.inner_diameter,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{inner_diameter:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newFinishedProduct.outer_diameter,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{outer_diameter:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newFinishedProduct.height,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{height:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newFinishedProduct.quantity,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{quantity:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newFinishedProduct.unit_price,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{unit_price:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addFinishedProduct,className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0646\\u062A\\u062C \\u0646\\u0647\\u0627\\u0626\\u064A\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredFinishedProducts.map(product=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.seal_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.material_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.inner_diameter}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.outer_diameter}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.height}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.quantity}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.unit_price}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editFinishedProduct(product),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",title:\"\\u062A\\u062D\\u0631\\u064A\\u0631\",children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteFinishedProduct(product.id),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",title:\"\\u062D\\u0630\\u0641\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]})})]},product.id))})]})})]})]});};// Deferred Payments Component\nconst Deferred=()=>{var _selectedInvoice$rema;const[unpaidInvoices,setUnpaidInvoices]=useState([]);const[customers,setCustomers]=useState([]);const[selectedInvoice,setSelectedInvoice]=useState(null);const[paymentAmount,setPaymentAmount]=useState('');const[paymentMethod,setPaymentMethod]=useState('Ù†Ù‚Ø¯ÙŠ');const[paymentNotes,setPaymentNotes]=useState('');const[searchTerm,setSearchTerm]=useState('');// Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª Ù„ÙƒÙ„ Ø¹Ù…ÙŠÙ„\nconst[customerTotals,setCustomerTotals]=useState({});useEffect(()=>{fetchUnpaidInvoices();fetchCustomers();},[]);useEffect(()=>{// Ø­Ø³Ø§Ø¨ Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\nconst totals={};filteredInvoices.forEach(invoice=>{const customerName=invoice.customer_name;if(!totals[customerName]){totals[customerName]={totalAmount:0,invoiceCount:0};}totals[customerName].totalAmount+=invoice.remaining_amount||invoice.total_amount;totals[customerName].invoiceCount+=1;});setCustomerTotals(totals);},[unpaidInvoices,searchTerm]);// ÙÙ„ØªØ±Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø­Ø³Ø¨ Ø§Ù„Ø¨Ø­Ø«\nconst filteredInvoices=unpaidInvoices.filter(invoice=>invoice.customer_name.toLowerCase().includes(searchTerm.toLowerCase())||invoice.invoice_number.toLowerCase().includes(searchTerm.toLowerCase())||invoice.invoice_title&&invoice.invoice_title.toLowerCase().includes(searchTerm.toLowerCase()));useEffect(()=>{fetchUnpaidInvoices();fetchCustomers();},[]);const fetchUnpaidInvoices=async()=>{try{const response=await axios.get(\"\".concat(API,\"/invoices\"));const invoices=response.data.filter(invoice=>// ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¢Ø¬Ù„Ø© Ø£Ùˆ Ù„Ù‡Ø§ Ù…Ø¨Ù„Øº Ù…Ø³ØªØ­Ù‚\n(invoice.payment_method==='Ø¢Ø¬Ù„'||invoice.remaining_amount>0)&&(invoice.status==='ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©'||invoice.status==='Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹'||invoice.status==='Ø§Ù†ØªØ¸Ø§Ø±'||invoice.remaining_amount>0));setUnpaidInvoices(invoices);}catch(error){console.error('Error fetching unpaid invoices:',error);}};const fetchCustomers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/customers\"));// Sort customers alphabetically by name\nconst sortedCustomers=(response.data||[]).sort((a,b)=>a.name.localeCompare(b.name,'ar'));setCustomers(sortedCustomers);}catch(error){console.error('Error fetching customers:',error);}};const getCustomerName=customerId=>{const customer=customers.find(c=>c.id===customerId);return customer?customer.name:'Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…Ø­Ø¯Ø¯';};const makePayment=async()=>{if(!selectedInvoice||!paymentAmount){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙˆØ¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº');return;}if(parseFloat(paymentAmount)>selectedInvoice.remaining_amount){alert('Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯Ø®Ù„ Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚');return;}try{await axios.post(\"\".concat(API,\"/payments\"),{invoice_id:selectedInvoice.id,amount:parseFloat(paymentAmount),payment_method:paymentMethod,notes:paymentNotes});setPaymentAmount('');setPaymentNotes('');setSelectedInvoice(null);fetchUnpaidInvoices();alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø© Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error making payment:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø©');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row md:items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-blue-600 mb-2 md:mb-0\",children:\"\\u0627\\u0644\\u0622\\u062C\\u0644 - \\u0645\\u062A\\u0627\\u0628\\u0639\\u0629 \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"border border-gray-300 rounded px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"\\u064A\\u0648\\u0645\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0623\\u0633\\u0628\\u0648\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0634\\u0647\\u0631\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0633\\u0646\\u0648\\u064A\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0628\\u062D\\u062B \\u0628\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0623\\u0648 \\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0623\\u0648 \\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\"})}),Object.keys(customerTotals).length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3\",children:Object.entries(customerTotals).map(_ref3=>{let[customerName,totals]=_ref3;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-3 rounded border text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold text-blue-800 text-sm\",children:customerName}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-blue-600\",children:[totals.invoiceCount,\" \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-bold text-green-600\",children:[totals.totalAmount.toFixed(2),\" \\u062C.\\u0645\"]})]},customerName);})})]}),selectedInvoice&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u062A\\u0633\\u062C\\u064A\\u0644 \\u062F\\u0641\\u0639\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:selectedInvoice.invoice_number,disabled:true,className:\"w-full p-2 border border-gray-300 rounded bg-gray-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:selectedInvoice.customer_name,disabled:true,className:\"w-full p-2 border border-gray-300 rounded bg-gray-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:\"\\u062C.\\u0645 \".concat(((_selectedInvoice$rema=selectedInvoice.remaining_amount)===null||_selectedInvoice$rema===void 0?void 0:_selectedInvoice$rema.toFixed(2))||'0.00'),disabled:true,className:\"w-full p-2 border border-gray-300 rounded bg-gray-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u062F\\u0641\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:paymentAmount,onChange:e=>setPaymentAmount(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"0.00\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639\"}),/*#__PURE__*/_jsxs(\"select\",{value:paymentMethod,onChange:e=>setPaymentMethod(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u0646\\u0642\\u062F\\u064A\",children:\"\\u0646\\u0642\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 010\",children:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 010\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0643\\u0627\\u0634 0100\",children:\"\\u0643\\u0627\\u0634 0100\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0627\\u0646\\u0633\\u062A\\u0627\\u0628\\u0627\\u064A\",children:\"\\u0627\\u0646\\u0633\\u062A\\u0627\\u0628\\u0627\\u064A\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:paymentNotes,onChange:e=>setPaymentNotes(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0625\\u0636\\u0627\\u0641\\u064A\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:makePayment,className:\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\",children:\"\\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u062F\\u0641\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedInvoice(null),className:\"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u063A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u0633\\u062F\\u062F\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredInvoices.map(invoice=>{var _invoice$total_amount,_invoice$paid_amount,_invoice$remaining_am;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.invoice_number}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.customer_name}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(invoice.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",((_invoice$total_amount=invoice.total_amount)===null||_invoice$total_amount===void 0?void 0:_invoice$total_amount.toFixed(2))||'0.00']}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",((_invoice$paid_amount=invoice.paid_amount)===null||_invoice$paid_amount===void 0?void 0:_invoice$paid_amount.toFixed(2))||'0.00']}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold text-red-600\",children:[\"\\u062C.\\u0645 \",((_invoice$remaining_am=invoice.remaining_amount)===null||_invoice$remaining_am===void 0?void 0:_invoice$remaining_am.toFixed(2))||'0.00']})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm \".concat(invoice.status==='ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©'?'bg-red-100 text-red-800':invoice.status==='Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹'?'bg-yellow-100 text-yellow-800':'bg-green-100 text-green-800'),children:invoice.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedInvoice(invoice),className:\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\",children:\"\\u0639\\u0631\\u0636 \\u0627\\u0644\\u062F\\u0641\\u0639\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedInvoice(invoice),className:\"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600\",children:\"\\u062F\\u0641\\u0639\"})]})})]},invoice.id);})})]}),filteredInvoices.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u063A\\u064A\\u0631 \\u0645\\u0633\\u062F\\u062F\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 p-4 rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-red-800\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u0627\\u0644\\u063A \\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\\u0629\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-red-600\",children:[\"\\u062C.\\u0645 \",filteredInvoices.reduce((sum,inv)=>sum+(inv.remaining_amount||0),0).toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 p-4 rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-yellow-800\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u0639\\u0644\\u0642\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-yellow-600\",children:filteredInvoices.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-4 rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-blue-800\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u0623\\u0635\\u0644\\u064A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-blue-600\",children:[\"\\u062C.\\u0645 \",filteredInvoices.reduce((sum,inv)=>sum+(inv.total_amount||0),0).toFixed(2)]})]})]})]})]});};// Expenses Component\nconst Expenses=()=>{const[expenses,setExpenses]=useState([]);const[newExpense,setNewExpense]=useState({description:'',amount:'',category:'Ø®Ø§Ù…Ø§Øª'});const expenseCategories=['Ø®Ø§Ù…Ø§Øª','Ø±ÙˆØ§ØªØ¨','ÙƒÙ‡Ø±Ø¨Ø§Ø¡','ØµÙŠØ§Ù†Ø©','Ø£Ø®Ø±Ù‰'];useEffect(()=>{fetchExpenses();},[]);const fetchExpenses=async()=>{try{const response=await axios.get(\"\".concat(API,\"/expenses\"));setExpenses(response.data);}catch(error){console.error('Error fetching expenses:',error);}};const addExpense=async()=>{if(!newExpense.description||!newExpense.amount){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{await axios.post(\"\".concat(API,\"/expenses\"),_objectSpread(_objectSpread({},newExpense),{},{amount:parseFloat(newExpense.amount)}));setNewExpense({description:'',amount:'',category:'Ø®Ø§Ù…Ø§Øª'});fetchExpenses();alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ØµØ±ÙˆÙ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error adding expense:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ØµØ±ÙˆÙ');}};const deleteExpense=async expenseId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ØµØ±ÙˆÙØŸ'))return;try{await axios.delete(\"\".concat(API,\"/expenses/\").concat(expenseId));fetchExpenses();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ØµØ±ÙˆÙ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error deleting expense:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ØµØ±ÙˆÙ');}};const getTotalExpenses=()=>{return expenses.reduce((sum,expense)=>sum+expense.amount,0);};const getExpensesByCategory=()=>{const byCategory={};expenseCategories.forEach(cat=>{byCategory[cat]=expenses.filter(exp=>exp.category===cat).reduce((sum,exp)=>sum+exp.amount,0);});return byCategory;};const clearAllExpenses=async()=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§ØªØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.'))return;try{await axios.delete(\"\".concat(API,\"/expenses/clear-all\"));fetchExpenses();alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª');}catch(error){console.error('Error clearing expenses:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-4\",children:\"\\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:clearAllExpenses,className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchExpenses,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"border border-gray-300 rounded px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"\\u064A\\u0648\\u0645\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0623\\u0633\\u0628\\u0648\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0634\\u0647\\u0631\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0633\\u0646\\u0648\\u064A\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0635\\u0631\\u0648\\u0641 \\u062C\\u062F\\u064A\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0648\\u0635\\u0641 \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newExpense.description,onChange:e=>setNewExpense(_objectSpread(_objectSpread({},newExpense),{},{description:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0645\\u062B\\u0627\\u0644: \\u0634\\u0631\\u0627\\u0621 \\u062E\\u0627\\u0645\\u0627\\u062A\\u060C \\u0643\\u0647\\u0631\\u0628\\u0627\\u0621 \\u0627\\u0644\\u0645\\u0635\\u0646\\u0639\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newExpense.amount,onChange:e=>setNewExpense(_objectSpread(_objectSpread({},newExpense),{},{amount:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"0.00\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0641\\u0626\\u0629\"}),/*#__PURE__*/_jsx(\"select\",{value:newExpense.category,onChange:e=>setNewExpense(_objectSpread(_objectSpread({},newExpense),{},{category:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:expenseCategories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category,children:category},category))})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addExpense,className:\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 p-6 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-red-800 mb-2\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-red-600\",children:[\"\\u062C.\\u0645 \",getTotalExpenses().toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-6 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-blue-800 mb-2\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-blue-600\",children:expenses.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 p-6 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-yellow-800 mb-2\",children:\"\\u0645\\u062A\\u0648\\u0633\\u0637 \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-yellow-600\",children:[\"\\u062C.\\u0645 \",expenses.length>0?(getTotalExpenses()/expenses.length).toFixed(2):'0.00']})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A \\u062D\\u0633\\u0628 \\u0627\\u0644\\u0641\\u0626\\u0629\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\",children:Object.entries(getExpensesByCategory()).map(_ref4=>{let[category,amount]=_ref4;return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 border rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700\",children:category}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl font-bold text-blue-600\",children:[\"\\u062C.\\u0645 \",amount.toFixed(2)]})]},category);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0648\\u0635\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0641\\u0626\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:expenses.map(expense=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:expense.description}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-red-600\",children:[\"\\u062C.\\u0645 \",expense.amount.toFixed(2)]})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm \".concat(expense.category==='Ø®Ø§Ù…Ø§Øª'?'bg-blue-100 text-blue-800':expense.category==='Ø±ÙˆØ§ØªØ¨'?'bg-green-100 text-green-800':expense.category==='ÙƒÙ‡Ø±Ø¨Ø§Ø¡'?'bg-yellow-100 text-yellow-800':expense.category==='ØµÙŠØ§Ù†Ø©'?'bg-purple-100 text-purple-800':'bg-gray-100 text-gray-800'),children:expense.category})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(expense.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteExpense(expense.id),className:\"bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641\"})})]},expense.id))})]}),expenses.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A \\u0645\\u0633\\u062C\\u0644\\u0629\"})]})]})]});};// Revenue Component\nconst Revenue=()=>{var _revenueData$total_re,_revenueData$total_ex,_revenueData$material,_revenueData$profit,_revenueData$total_re2,_revenueData$material2,_revenueData$profit2;const[revenueData,setRevenueData]=useState({total_revenue:0,total_expenses:0,material_cost:0,profit:0});const[period,setPeriod]=useState('daily');useEffect(()=>{fetchRevenueData();},[period]);const fetchRevenueData=async()=>{try{const response=await axios.get(\"\".concat(API,\"/reports/revenue?period=\").concat(period));setRevenueData(response.data);}catch(error){console.error('Error fetching revenue data:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-4\",children:\"\\u0627\\u0644\\u0625\\u064A\\u0631\\u0627\\u062F\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchRevenueData,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"select\",{value:period,onChange:e=>setPeriod(e.target.value),className:\"border border-gray-300 rounded px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"daily\",children:\"\\u0627\\u0644\\u064A\\u0648\\u0645\"}),/*#__PURE__*/_jsx(\"option\",{value:\"weekly\",children:\"\\u0627\\u0644\\u0623\\u0633\\u0628\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"option\",{value:\"monthly\",children:\"\\u0627\\u0644\\u0634\\u0647\\u0631\"}),/*#__PURE__*/_jsx(\"option\",{value:\"yearly\",children:\"\\u0627\\u0644\\u0633\\u0646\\u0629\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-green-800 text-center mb-2\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0625\\u064A\\u0631\\u0627\\u062F\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-green-600 text-center\",children:[\"\\u062C.\\u0645 \",((_revenueData$total_re=revenueData.total_revenue)===null||_revenueData$total_re===void 0?void 0:_revenueData$total_re.toFixed(2))||'0.00']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-red-800 text-center mb-2\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-red-600 text-center\",children:[\"\\u062C.\\u0645 \",((_revenueData$total_ex=revenueData.total_expenses)===null||_revenueData$total_ex===void 0?void 0:_revenueData$total_ex.toFixed(2))||'0.00']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-yellow-800 text-center mb-2\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-yellow-600 text-center\",children:[\"\\u062C.\\u0645 \",((_revenueData$material=revenueData.material_cost)===null||_revenueData$material===void 0?void 0:_revenueData$material.toFixed(2))||'0.00']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-blue-800 text-center mb-2\",children:\"\\u0635\\u0627\\u0641\\u064A \\u0627\\u0644\\u0631\\u0628\\u062D\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-center \".concat((revenueData.profit||0)>=0?'text-blue-600':'text-red-600'),children:[\"\\u062C.\\u0645 \",((_revenueData$profit=revenueData.profit)===null||_revenueData$profit===void 0?void 0:_revenueData$profit.toFixed(2))||'0.00']})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mt-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold mb-4\",children:[\"\\u062A\\u0642\\u0631\\u064A\\u0631 \\u0627\\u0644\\u0625\\u064A\\u0631\\u0627\\u062F\\u0627\\u062A - \",period==='daily'?'ÙŠÙˆÙ…ÙŠ':period==='weekly'?'Ø£Ø³Ø¨ÙˆØ¹ÙŠ':period==='monthly'?'Ø´Ù‡Ø±ÙŠ':'Ø³Ù†ÙˆÙŠ']}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3\",children:\"\\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A (\\u062C.\\u0645)\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3\",children:\"\\u0627\\u0644\\u0646\\u0633\\u0628\\u0629 \\u0627\\u0644\\u0645\\u0626\\u0648\\u064A\\u0629\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3 font-semibold\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0625\\u064A\\u0631\\u0627\\u062F\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3 text-green-600 font-bold\",children:((_revenueData$total_re2=revenueData.total_revenue)===null||_revenueData$total_re2===void 0?void 0:_revenueData$total_re2.toFixed(2))||'0.00'}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3\",children:\"100%\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3 text-yellow-600 font-semibold\",children:[\"-\",((_revenueData$material2=revenueData.material_cost)===null||_revenueData$material2===void 0?void 0:_revenueData$material2.toFixed(2))||'0.00']}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3\",children:[revenueData.total_revenue>0?(revenueData.material_cost/revenueData.total_revenue*100).toFixed(1):'0.0',\"%\"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3\",children:\"\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A \\u0623\\u062E\\u0631\\u0649\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3 text-red-600 font-semibold\",children:[\"-\",((revenueData.total_expenses||0)-(revenueData.material_cost||0)).toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3\",children:[revenueData.total_revenue>0?((revenueData.total_expenses-revenueData.material_cost)/revenueData.total_revenue*100).toFixed(1):'0.0',\"%\"]})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-blue-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3 font-bold\",children:\"\\u0635\\u0627\\u0641\\u064A \\u0627\\u0644\\u0631\\u0628\\u062D\"}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3 font-bold \".concat((revenueData.profit||0)>=0?'text-blue-600':'text-red-600'),children:((_revenueData$profit2=revenueData.profit)===null||_revenueData$profit2===void 0?void 0:_revenueData$profit2.toFixed(2))||'0.00'}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3 font-bold\",children:[revenueData.total_revenue>0?(revenueData.profit/revenueData.total_revenue*100).toFixed(1):'0.0',\"%\"]})]})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mt-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0645\\u0624\\u0634\\u0631\\u0627\\u062A \\u0627\\u0644\\u0623\\u062F\\u0627\\u0621\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 border rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-2\",children:\"\\u0647\\u0627\\u0645\\u0634 \\u0627\\u0644\\u0631\\u0628\\u062D\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold \".concat((revenueData.profit||0)>=0?'text-green-600':'text-red-600'),children:[revenueData.total_revenue>0?(revenueData.profit/revenueData.total_revenue*100).toFixed(1):'0.0',\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 border rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-2\",children:\"\\u0646\\u0633\\u0628\\u0629 \\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-yellow-600\",children:[revenueData.total_revenue>0?(revenueData.material_cost/revenueData.total_revenue*100).toFixed(1):'0.0',\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 border rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-2\",children:\"\\u0646\\u0633\\u0628\\u0629 \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A \\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-red-600\",children:[revenueData.total_revenue>0?(revenueData.total_expenses/revenueData.total_revenue*100).toFixed(1):'0.0',\"%\"]})]})]})]})]});};// Invoices Component\nconst Invoices=()=>{const[invoices,setInvoices]=useState([]);const[customers,setCustomers]=useState([]);const[filterStatus,setFilterStatus]=useState('');const[searchTerm,setSearchTerm]=useState('');const[editingInvoice,setEditingInvoice]=useState(null);const[editForm,setEditForm]=useState({invoice_title:'',supervisor_name:'',customer_name:'',payment_method:'Ù†Ù‚Ø¯ÙŠ',discount_type:'amount',discount_value:0,items:[],notes:''});// Password protection states\nconst[showPasswordModal,setShowPasswordModal]=useState(false);const[operationPassword,setOperationPassword]=useState('');const[pendingOperation,setPendingOperation]=useState(null);// {type: 'cancel'|'edit'|'changePayment', data: ...}\nuseEffect(()=>{fetchInvoices();fetchCustomers();},[]);const fetchInvoices=async()=>{try{console.log('Fetching invoices...');const response=await axios.get(\"\".concat(API,\"/invoices\"));console.log('Invoices fetched:',response.data.length,'invoices');setInvoices(response.data);}catch(error){var _error$response10,_error$response10$dat;console.error('Error fetching invoices:',error);alert('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙˆØ§ØªÙŠØ±: '+(((_error$response10=error.response)===null||_error$response10===void 0?void 0:(_error$response10$dat=_error$response10.data)===null||_error$response10$dat===void 0?void 0:_error$response10$dat.detail)||error.message));}};const fetchCustomers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/customers\"));// Sort customers alphabetically by name\nconst sortedCustomers=(response.data||[]).sort((a,b)=>a.name.localeCompare(b.name,'ar'));setCustomers(sortedCustomers);}catch(error){console.error('Error fetching customers:',error);}};// Request password for operation\nconst requestPasswordFor=(operationType,operationData)=>{setPendingOperation({type:operationType,data:operationData});setOperationPassword('');setShowPasswordModal(true);};// Execute operation after password verification\nconst executeOperation=async()=>{if(!operationPassword){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');return;}try{if(pendingOperation.type==='cancel'){await executeCancelInvoice(pendingOperation.data,operationPassword);}else if(pendingOperation.type==='edit'){await executeUpdateInvoice(operationPassword);}else if(pendingOperation.type==='changePayment'){await executeChangePaymentMethod(pendingOperation.data.invoiceId,pendingOperation.data.newMethod,operationPassword);}setShowPasswordModal(false);setPendingOperation(null);setOperationPassword('');}catch(error){var _error$response11,_error$response11$dat;console.error('Operation error:',error);alert(((_error$response11=error.response)===null||_error$response11===void 0?void 0:(_error$response11$dat=_error$response11.data)===null||_error$response11$dat===void 0?void 0:_error$response11$dat.detail)||'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');}};// Execute cancel with password\nconst executeCancelInvoice=async(invoiceId,password)=>{const invoice=invoices.find(inv=>inv.id===invoiceId);if(!invoice)return;const response=await axios.delete(\"\".concat(API,\"/invoices/\").concat(invoiceId,\"/cancel\"),{params:{password:password}});alert(response.data.message);fetchInvoices();};// Execute update with password\nconst executeUpdateInvoice=async password=>{const response=await axios.put(\"\".concat(API,\"/invoices/\").concat(editingInvoice),editForm,{params:{password:password}});alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');setEditingInvoice(null);fetchInvoices();};// Execute change payment method with password\nconst executeChangePaymentMethod=async(invoiceId,newMethod,password)=>{await axios.put(\"\".concat(API,\"/invoices/\").concat(invoiceId,\"/change-payment-method\"),null,{params:{new_payment_method:newMethod,password:password}});alert('ØªÙ… ØªØºÙŠÙŠØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ø¨Ù†Ø¬Ø§Ø­');fetchInvoices();};// Change payment method function\nconst changePaymentMethod=async invoiceId=>{const paymentMethods=[{value:'Ù†Ù‚Ø¯ÙŠ',label:'Ù†Ù‚Ø¯ÙŠ'},{value:'Ø¢Ø¬Ù„',label:'Ø¢Ø¬Ù„'},{value:'ÙÙˆØ¯Ø§ÙÙˆÙ† 010',label:'ÙÙˆØ¯Ø§ÙÙˆÙ† 010'},{value:'ÙƒØ§Ø´ 0100',label:'ÙƒØ§Ø´ 0100'},{value:'Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ',label:'Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ'},{value:'ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ',label:'ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ'}];const invoice=invoices.find(inv=>inv.id===invoiceId);if(!invoice){alert('Ø§Ù„ÙØ§ØªÙˆØ±Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©');return;}// Ù…Ù†Ø¹ ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹\nif(invoice.paid_amount>0&&invoice.remaining_amount>0){alert('Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­ÙˆÙŠÙ„ Ø·Ø±ÙŠÙ‚Ø© Ø¯ÙØ¹ ÙØ§ØªÙˆØ±Ø© Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹');return;}// Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø§ÙØ°Ø© Ø­ÙˆØ§Ø± Ù…Ø®ØµØµØ© Ù„Ù„Ø§Ø®ØªÙŠØ§Ø±\nconst modalHtml=\"\\n      <div id=\\\"paymentMethodModal\\\" style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        width: 100%;\\n        height: 100%;\\n        background: rgba(0,0,0,0.5);\\n        display: flex;\\n        justify-content: center;\\n        align-items: center;\\n        z-index: 1000;\\n        direction: rtl;\\n      \\\">\\n        <div style=\\\"\\n          background: white;\\n          padding: 30px;\\n          border-radius: 10px;\\n          box-shadow: 0 4px 6px rgba(0,0,0,0.1);\\n          min-width: 400px;\\n          text-align: center;\\n        \\\">\\n          <h3 style=\\\"margin-bottom: 20px; color: #333;\\\">\\u062A\\u063A\\u064A\\u064A\\u0631 \\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639</h3>\\n          <p style=\\\"margin-bottom: 15px;\\\">\\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629: <strong>\".concat(invoice.invoice_number,\"</strong></p>\\n          <p style=\\\"margin-bottom: 20px;\\\">\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639 \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\\u0629: <strong style=\\\"color: #e74c3c;\\\">\").concat(invoice.payment_method,\"</strong></p>\\n          <div style=\\\"margin-bottom: 20px;\\\">\\n            <label style=\\\"display: block; margin-bottom: 10px; font-weight: bold;\\\">\\u0627\\u062E\\u062A\\u0631 \\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639 \\u0627\\u0644\\u062C\\u062F\\u064A\\u062F\\u0629:</label>\\n            <select id=\\\"newPaymentMethod\\\" style=\\\"\\n              width: 100%;\\n              padding: 10px;\\n              border: 2px solid #ddd;\\n              border-radius: 5px;\\n              font-size: 16px;\\n              direction: rtl;\\n            \\\">\\n              <option value=\\\"\\\">-- \\u0627\\u062E\\u062A\\u0631 \\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639 --</option>\\n              \").concat(paymentMethods.filter(method=>method.value!==invoice.payment_method).map(method=>\"<option value=\\\"\".concat(method.value,\"\\\">\").concat(method.label,\"</option>\")).join(''),\"\\n            </select>\\n          </div>\\n          <div style=\\\"display: flex; gap: 10px; justify-content: center;\\\">\\n            <button id=\\\"confirmChange\\\" style=\\\"\\n              background: #27ae60;\\n              color: white;\\n              border: none;\\n              padding: 10px 20px;\\n              border-radius: 5px;\\n              cursor: pointer;\\n              font-size: 16px;\\n            \\\">\\u062A\\u0623\\u0643\\u064A\\u062F \\u0627\\u0644\\u062A\\u063A\\u064A\\u064A\\u0631</button>\\n            <button id=\\\"cancelChange\\\" style=\\\"\\n              background: #e74c3c;\\n              color: white;\\n              border: none;\\n              padding: 10px 20px;\\n              border-radius: 5px;\\n              cursor: pointer;\\n              font-size: 16px;\\n            \\\">\\u0625\\u0644\\u063A\\u0627\\u0621</button>\\n          </div>\\n        </div>\\n      </div>\\n    \");// Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø§ÙØ°Ø© Ù„Ù„ØµÙØ­Ø©\ndocument.body.insertAdjacentHTML('beforeend',modalHtml);// Ø¥Ø¶Ø§ÙØ© Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø£Ø²Ø±Ø§Ø±\nconst modal=document.getElementById('paymentMethodModal');const selectElement=document.getElementById('newPaymentMethod');const confirmBtn=document.getElementById('confirmChange');const cancelBtn=document.getElementById('cancelChange');// Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©\nconst closeModal=()=>{if(modal&&modal.parentNode){modal.parentNode.removeChild(modal);}};// Ø²Ø± Ø§Ù„Ø¥Ù„ØºØ§Ø¡\ncancelBtn.onclick=closeModal;// Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø§ÙØ°Ø©\nmodal.onclick=e=>{if(e.target===modal){closeModal();}};// Ø²Ø± Ø§Ù„ØªØ£ÙƒÙŠØ¯\nconfirmBtn.onclick=async()=>{const newMethod=selectElement.value;if(!newMethod){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø·Ø±ÙŠÙ‚Ø© Ø¯ÙØ¹ Ø¬Ø¯ÙŠØ¯Ø©');return;}if(newMethod===invoice.payment_method){alert('Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ù‡ÙŠ Ù†ÙØ³Ù‡Ø§ Ø¨Ø§Ù„ÙØ¹Ù„');return;}if(!confirm(\"\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u062A\\u062D\\u0648\\u064A\\u0644 \\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639 \\u0645\\u0646 \\\"\".concat(invoice.payment_method,\"\\\" \\u0625\\u0644\\u0649 \\\"\").concat(newMethod,\"\\\"\\u061F\\n\\n\\u0633\\u064A\\u062A\\u0645 \\u062A\\u062D\\u062F\\u064A\\u062B \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629 \\u0648\\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\\u0627\\u062A \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0627\\u064B.\\n\\n\\u064A\\u062A\\u0637\\u0644\\u0628 \\u0643\\u0644\\u0645\\u0629 \\u0645\\u0631\\u0648\\u0631 \\u0644\\u0644\\u062A\\u0623\\u0643\\u064A\\u062F\"))){return;}closeModal();// Request password\nrequestPasswordFor('changePayment',{invoiceId,newMethod});};};// Cancel invoice function\nconst cancelInvoice=async invoiceId=>{const invoice=invoices.find(inv=>inv.id===invoiceId);if(!invoice){alert('Ø§Ù„ÙØ§ØªÙˆØ±Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©');return;}const confirmMessage=\"\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u0625\\u0644\\u063A\\u0627\\u0621 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \".concat(invoice.invoice_number,\"\\u061F\\n\\n\\u0633\\u064A\\u062A\\u0645:\\n- \\u0625\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\\u0629 \\u0625\\u0644\\u0649 \\u0627\\u0644\\u0645\\u062E\\u0632\\u0646\\n- \\u0639\\u0645\\u0644 \\u0645\\u0639\\u0627\\u0645\\u0644\\u0629 \\u0639\\u0643\\u0633\\u064A\\u0629 \\u0641\\u064A \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629\\n- \\u0646\\u0642\\u0644 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0644\\u0644\\u0645\\u062D\\u0630\\u0648\\u0641\\u0629\\n\\n\\u064A\\u062A\\u0637\\u0644\\u0628 \\u0643\\u0644\\u0645\\u0629 \\u0645\\u0631\\u0648\\u0631 \\u0644\\u0644\\u062A\\u0623\\u0643\\u064A\\u062F\");if(!confirm(confirmMessage)){return;}// Request password\nrequestPasswordFor('cancel',invoiceId);};const startEditInvoice=invoice=>{setEditingInvoice(invoice.id);setEditForm({invoice_title:invoice.invoice_title||'',supervisor_name:invoice.supervisor_name||'',customer_name:invoice.customer_name||'',payment_method:invoice.payment_method||'Ù†Ù‚Ø¯ÙŠ',discount_type:invoice.discount_type||'amount',discount_value:invoice.discount_value||0,items:invoice.items||[],notes:invoice.notes||''});};const cancelEdit=()=>{setEditingInvoice(null);setEditForm({invoice_title:'',supervisor_name:'',customer_name:'',payment_method:'Ù†Ù‚Ø¯ÙŠ',discount_type:'amount',discount_value:0,items:[],notes:''});};const saveInvoiceEdit=async()=>{if(!editForm.customer_name.trim()){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„');return;}try{console.log('Saving invoice edit for ID:',editingInvoice);console.log('Edit form data:',editForm);// Calculate totals\nconst subtotal=editForm.items.reduce((sum,item)=>sum+(item.total_price||0),0);let discountAmount=0;if(editForm.discount_type==='percentage'){discountAmount=subtotal*parseFloat(editForm.discount_value||0)/100;}else{discountAmount=parseFloat(editForm.discount_value||0);}const totalAfterDiscount=subtotal-discountAmount;const updatedInvoice=_objectSpread(_objectSpread({},editForm),{},{subtotal:subtotal,discount:discountAmount,total_after_discount:totalAfterDiscount,total_amount:totalAfterDiscount});console.log('Sending update to backend:',updatedInvoice);// Store the edit form for password-protected execution\nsetEditForm(updatedInvoice);// Request password\nrequestPasswordFor('edit',null);}catch(error){var _error$response12,_error$response13,_error$response13$dat;console.error('Error updating invoice:',error);console.error('Error response:',(_error$response12=error.response)===null||_error$response12===void 0?void 0:_error$response12.data);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ§ØªÙˆØ±Ø©: '+(((_error$response13=error.response)===null||_error$response13===void 0?void 0:(_error$response13$dat=_error$response13.data)===null||_error$response13$dat===void 0?void 0:_error$response13$dat.detail)||error.message));}};const updateInvoiceStatus=async(invoiceId,newStatus)=>{try{await axios.put(\"\".concat(API,\"/invoices/\").concat(invoiceId,\"/status\"),{status:newStatus},{headers:{'Content-Type':'application/json'}});fetchInvoices();alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©');}catch(error){console.error('Error updating invoice status:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©');}};const printInvoice=invoice=>{const printContent=\"\\n      <!DOCTYPE html>\\n      <html dir=\\\"rtl\\\">\\n      <head>\\n        <meta charset=\\\"UTF-8\\\">\\n        <style>\\n          body {\\n            font-family: Arial, sans-serif;\\n            margin: 0;\\n            padding: 20px;\\n            direction: rtl;\\n            font-size: 15px;\\n          }\\n          .header {\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n            border-bottom: 3px solid #000;\\n            padding-bottom: 10px;\\n            margin-bottom: 20px;\\n          }\\n          .company-info {\\n            text-align: right;\\n          }\\n          .company-name {\\n            font-size: 32px;\\n            font-weight: bold;\\n            color: #000;\\n            margin: 0;\\n          }\\n          .company-subtitle {\\n            font-size: 20px;\\n            margin: 5px 0;\\n            color: #666;\\n          }\\n          .company-details {\\n            font-size: 16px;\\n            margin: 2px 0;\\n            color: #333;\\n          }\\n          .logo-section {\\n            text-align: center;\\n            flex: 1;\\n          }\\n          .invoice-title {\\n            font-size: 22px;\\n            font-weight: bold;\\n            background-color: #ff4444;\\n            color: white;\\n            padding: 8px 20px;\\n            border-radius: 5px;\\n            display: inline-block;\\n            margin-bottom: 10px;\\n          }\\n          .invoice-number {\\n            font-size: 20px;\\n            font-weight: bold;\\n            color: #ff4444;\\n          }\\n          .customer-info {\\n            display: flex;\\n            justify-content: space-between;\\n            margin: 20px 0;\\n          }\\n          .customer-details {\\n            text-align: right;\\n          }\\n          .date-info {\\n            text-align: left;\\n          }\\n          .products-table {\\n            width: 100%;\\n            border-collapse: collapse;\\n            border: 2px solid #000;\\n            margin: 20px 0;\\n          }\\n          .products-table th,\\n          .products-table td {\\n            border: 1px solid #000;\\n            padding: 8px;\\n            text-align: center;\\n          }\\n          .products-table th {\\n            background-color: #f0f0f0;\\n            font-weight: bold;\\n          }\\n          .footer {\\n            margin-top: 30px;\\n            border-top: 1px solid #ccc;\\n            padding-top: 15px;\\n            display: flex;\\n            justify-content: space-between;\\n            font-size: 13px;\\n            color: #666;\\n          }\\n          .total-section {\\n            text-align: left;\\n            margin-top: 10px;\\n          }\\n          .total-amount {\\n            font-size: 20px;\\n            font-weight: bold;\\n            border: 2px solid #000;\\n            padding: 10px;\\n            display: inline-block;\\n            background-color: #f9f9f9;\\n          }\\n          @media print {\\n            body { margin: 0; padding: 10px; }\\n          }\\n        </style>\\n      </head>\\n      <body>\\n        <!-- Header Section -->\\n        <div class=\\\"header\\\">\\n          <div class=\\\"company-info\\\">\\n            <h1 class=\\\"company-name\\\">\\u0634\\u0631\\u0643\\u0629 \\u0645\\u0627\\u0633\\u062A\\u0631 \\u0633\\u064A\\u0644</h1>\\n            <p class=\\\"company-subtitle\\\">\\u062A\\u0635\\u0646\\u064A\\u0639 \\u062C\\u0645\\u064A\\u0639 \\u0623\\u0646\\u0648\\u0627\\u0639 \\u0627\\u0644\\u0623\\u0648\\u064A\\u0644 \\u0633\\u064A\\u0644</p>\\n            <p class=\\\"company-details\\\">\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0623\\u0642\\u0637\\u0627\\u0631 \\u062D\\u062A\\u0649 \\u0665\\u0660\\u0660\\u0645\\u0644</p>\\n            <p class=\\\"company-details\\\">\\u0647\\u064A\\u062F\\u0631\\u0648\\u0644\\u064A\\u0643 - \\u0646\\u064A\\u0648\\u0645\\u0627\\u062A\\u064A\\u0643</p>\\n          </div>\\n          \\n          <div class=\\\"logo-section\\\">\\n            <img src=\\\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\\\" \\n                 alt=\\\"Master Seal Logo\\\" \\n                 style=\\\"max-width: 120px; max-height: 80px; margin-bottom: 10px;\\\">\\n            <div class=\\\"invoice-title\\\">\".concat(invoice.invoice_title||'Ø¹Ø±Ø¶ Ø³Ø¹Ø±',\"</div>\\n            <div class=\\\"invoice-number\\\">\").concat(invoice.invoice_number,\"</div>\\n          </div>\\n        </div>\\n\\n        <!-- Customer and Date Info -->\\n        <div class=\\\"customer-info\\\">\\n          <div class=\\\"customer-details\\\">\\n            <p><strong>\\u0627\\u0644\\u0633\\u0627\\u062F\\u0629:</strong> \").concat(invoice.customer_name,\"</p>\\n            <p><strong>\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646:</strong> \").concat(invoice.customer_address||'........................',\"</p>\\n          </div>\\n          <div class=\\\"date-info\\\">\\n            <p><strong>\\u062A\\u062D\\u0631\\u064A\\u0631 \\u0641\\u064A:</strong> \").concat(new Date(invoice.date).toLocaleDateString('ar-EG'),\"</p>\\n            <p><strong>Date:</strong> \").concat(new Date(invoice.date).toLocaleDateString('en-GB'),\"</p>\\n          </div>\\n        </div>\\n\\n        <!-- Products Table -->\\n        <table class=\\\"products-table\\\">\\n          <thead>\\n            <tr>\\n              <th style=\\\"width: 60px;\\\">\\u0627\\u0644\\u0645\\u0633\\u0644\\u0633\\u0644<br>Item</th>\\n              <th style=\\\"width: 80px;\\\">\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629<br>QTY</th>\\n              <th style=\\\"width: 200px;\\\">Description<br>\\u0627\\u0644\\u0645\\u0648\\u0627\\u0635\\u0641\\u0627\\u062A</th>\\n              <th style=\\\"width: 100px;\\\">\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629<br>Unit Price</th>\\n              <th style=\\\"width: 100px;\\\">\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A<br>Total</th>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            \").concat(invoice.items.map((item,index)=>\"\\n              <tr>\\n                <td>\".concat(index+1,\"</td>\\n                <td>\").concat(item.quantity,\"</td>\\n                <td style=\\\"text-align: right;\\\">\\n                  \").concat(item.local_product_details?\"\".concat(item.local_product_details.product_size,\" - \").concat(item.local_product_details.product_type):\"\".concat(item.seal_type,\" - \").concat(item.material_type,\"<br>\\n                    <small>\").concat(item.inner_diameter,\" \\xD7 \").concat(item.outer_diameter,\" \\xD7 \").concat(item.height,\" \\u0645\\u0645\").concat(item.wall_height?\" (\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629: \".concat(item.wall_height,\" \\u0645\\u0645)\"):\"\",\"</small>\"),\"\\n                </td>\\n                <td>\\u062C.\\u0645 \").concat(item.unit_price.toFixed(2),\"</td>\\n                <td>\\u062C.\\u0645 \").concat(item.total_price.toFixed(2),\"</td>\\n              </tr>\\n            \")).join(''),\"\\n            <!-- Empty rows for additional items -->\\n            \").concat(Array.from({length:Math.max(0,8-invoice.items.length)},(_,i)=>\"\\n              <tr style=\\\"height: 40px;\\\">\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n              </tr>\\n            \").join(''),\"\\n          </tbody>\\n        </table>\\n\\n        <!-- Total Section -->\\n        <div class=\\\"total-section\\\">\\n          <div style=\\\"text-align: left; margin-bottom: 10px;\\\">\\n            \").concat(invoice.subtotal?\"\\n              <div style=\\\"margin-bottom: 5px;\\\">\\n                <span>\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639 \\u0627\\u0644\\u0641\\u0631\\u0639\\u064A: \\u062C.\\u0645 \".concat(invoice.subtotal.toFixed(2),\"</span>\\n              </div>\\n            \"):'',\"\\n            \").concat(invoice.discount&&invoice.discount>0?\"\\n              <div style=\\\"margin-bottom: 5px; color: #d32f2f;\\\">\\n                <span>\\u0627\\u0644\\u062E\\u0635\\u0645: - \\u062C.\\u0645 \".concat(invoice.discount.toFixed(2),\"</span>\\n                \").concat(invoice.discount_type==='percentage'&&invoice.discount_value?\" <small>(\".concat(invoice.discount_value,\"%)</small>\"):'',\"\\n              </div>\\n              <hr style=\\\"margin: 5px 0; border: 1px solid #000;\\\">\\n            \"):'',\"\\n          </div>\\n          <div class=\\\"total-amount\\\">\\n            \\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0646\\u0647\\u0627\\u0626\\u064A: \\u062C.\\u0645 \").concat((invoice.total_after_discount||invoice.total_amount).toFixed(2),\"\\n          </div>\\n        </div>\\n\\n        <!-- Additional Info -->\\n        <div style=\\\"margin-top: 20px; text-align: center; font-size: 13px;\\\">\\n          <p><strong>\\u0645\\u0644\\u062D\\u0648\\u0638\\u0629:</strong> \\u0641\\u0642\\u0637 \\u0648\\u0642\\u062F\\u0631\\u0647</p>\\n          <div style=\\\"height: 30px; border-bottom: 1px solid #000; margin: 10px 40px;\\\"></div>\\n        </div>\\n\\n        <!-- Footer -->\\n        <div class=\\\"footer\\\">\\n          <div>\\n            <p><strong>\\u0627\\u0644\\u062A\\u0648\\u0642\\u064A\\u0639:</strong></p>\\n            <p>\\u0645\\u0648\\u0628\\u0627\\u064A\\u0644: \\u0660\\u0661\\u0660\\u0662\\u0660\\u0666\\u0663\\u0660\\u0666\\u0667\\u0667 - \\u0660\\u0661\\u0660\\u0666\\u0662\\u0663\\u0669\\u0660\\u0668\\u0667\\u0660</p>\\n            <p>\\u062A\\u0644\\u064A\\u0641\\u0648\\u0646: \\u0660\\u0661\\u0660\\u0662\\u0660\\u0666\\u0663\\u0660\\u0666\\u0667\\u0667</p>\\n          </div>\\n          <div style=\\\"text-align: left;\\\">\\n            <p><strong>\\u0627\\u0644\\u0645\\u0633\\u062A\\u0644\\u0645:</strong></p>\\n            <p>\\u0627\\u0644\\u062D\\u0631\\u0641\\u064A\\u064A\\u0646 - \\u0627\\u0644\\u0633\\u0644\\u0627\\u0645 - \\u0623\\u0645\\u0627\\u0645 \\u0627\\u0644\\u0633\\u0648\\u0628\\u0631 \\u062C\\u064A\\u062A</p>\\n            <p>\\u0645\\u0648\\u0628\\u0627\\u064A\\u0644: \\u0660\\u0661\\u0660\\u0662\\u0660\\u0666\\u0663\\u0660\\u0666\\u0667\\u0667 - \\u0660\\u0661\\u0660\\u0666\\u0662\\u0663\\u0669\\u0660\\u0668\\u0667\\u0660</p>\\n          </div>\\n        </div>\\n\\n        <!-- Note -->\\n        <div style=\\\"text-align: center; margin-top: 20px; font-size: 12px; color: #666;\\\">\\n          <p>\\u064A\\u0642\\u0631 \\u0627\\u0644\\u0645\\u0634\\u062A\\u0631\\u064A \\u0628\\u0623\\u0646\\u0647 \\u0642\\u0627\\u0645 \\u0628\\u0645\\u0639\\u0627\\u064A\\u0646\\u0629 \\u0627\\u0644\\u0628\\u0636\\u0627\\u0639\\u0629 \\u0648\\u0642\\u0628\\u0648\\u0644\\u0647\\u0627</p>\\n        </div>\\n      </body>\\n      </html>\\n    \");const printWindow=window.open('','_blank');printWindow.document.write(printContent);printWindow.document.close();printWindow.print();};const clearAllInvoices=async()=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ±ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.'))return;try{await axios.delete(\"\".concat(API,\"/invoices/clear-all\"));fetchInvoices();alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ±');}catch(error){console.error('Error clearing invoices:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');}};const filteredInvoices=invoices.filter(invoice=>{const matchesStatus=filterStatus===''||invoice.status===filterStatus;const matchesSearch=searchTerm===''||invoice.invoice_number.toLowerCase().includes(searchTerm.toLowerCase())||invoice.customer_name.toLowerCase().includes(searchTerm.toLowerCase());return matchesStatus&&matchesSearch;});return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-4\",children:\"\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:clearAllInvoices,className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchInvoices,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"border border-gray-300 rounded px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"\\u064A\\u0648\\u0645\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0623\\u0633\\u0628\\u0648\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0634\\u0647\\u0631\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0633\\u0646\\u0648\\u064A\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-4 rounded-lg shadow-md mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0628\\u062D\\u062B\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0623\\u0648 \\u0627\\u0633\\u0645 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\",className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0641\\u0644\\u062A\\u0631\\u0629 \\u062D\\u0633\\u0628 \\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsxs(\"select\",{value:filterStatus,onChange:e=>setFilterStatus(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u062D\\u0627\\u0644\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629\",children:\"\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u063A\\u064A\\u0631 \\u0645\\u062F\\u0641\\u0648\\u0639\\u0629\",children:\"\\u063A\\u064A\\u0631 \\u0645\\u062F\\u0641\\u0648\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629 \\u062C\\u0632\\u0626\\u064A\\u0627\\u064B\",children:\"\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629 \\u062C\\u0632\\u0626\\u064A\\u0627\\u064B\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0627\\u0646\\u062A\\u0638\\u0627\\u0631\",children:\"\\u0627\\u0646\\u062A\\u0638\\u0627\\u0631\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u062A\\u0645 \\u0627\\u0644\\u062A\\u0646\\u0641\\u064A\\u0630\",children:\"\\u062A\\u0645 \\u0627\\u0644\\u062A\\u0646\\u0641\\u064A\\u0630\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSearchTerm('');setFilterStatus('');},className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0645\\u0633\\u062D \\u0627\\u0644\\u0641\\u0644\\u0627\\u062A\\u0631\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-4 rounded-lg text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-blue-800\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-blue-600\",children:invoices.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 p-4 rounded-lg text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-green-800\",children:\"\\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-green-600\",children:invoices.filter(inv=>inv.status==='Ù…Ø¯ÙÙˆØ¹Ø©').length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 p-4 rounded-lg text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-red-800\",children:\"\\u063A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-red-600\",children:invoices.filter(inv=>inv.status==='ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©').length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 p-4 rounded-lg text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-yellow-800\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-yellow-600\",children:[\"\\u062C.\\u0645 \",invoices.reduce((sum,inv)=>sum+(inv.total_amount||0),0).toFixed(2)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639 \\u0627\\u0644\\u0641\\u0631\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062E\\u0635\\u0645\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0646\\u0647\\u0627\\u0626\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredInvoices.map(invoice=>{var _invoice$subtotal,_invoice$total_amount2,_ref5;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:invoice.invoice_number}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.customer_name}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(invoice.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.payment_method}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:[\"\\u062C.\\u0645 \",((_invoice$subtotal=invoice.subtotal)===null||_invoice$subtotal===void 0?void 0:_invoice$subtotal.toFixed(2))||((_invoice$total_amount2=invoice.total_amount)===null||_invoice$total_amount2===void 0?void 0:_invoice$total_amount2.toFixed(2))||'0.00']}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-red-600\",children:invoice.discount&&invoice.discount>0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u062C.\\u0645 \",invoice.discount.toFixed(2)]}),invoice.discount_type==='percentage'&&invoice.discount_value&&/*#__PURE__*/_jsxs(\"small\",{className:\"block text-xs\",children:[\"(%\",invoice.discount_value,\")\"]})]}):/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:\"\\u0644\\u0627 \\u064A\\u0648\\u062C\\u062F\"})}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold text-green-600\",children:[\"\\u062C.\\u0645 \",((_ref5=invoice.total_after_discount||invoice.total_amount)===null||_ref5===void 0?void 0:_ref5.toFixed(2))||'0.00']}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm cursor-pointer \".concat(invoice.status==='Ù…Ø¯ÙÙˆØ¹Ø©'?'bg-green-100 text-green-800':invoice.status==='ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©'?'bg-red-100 text-red-800':invoice.status==='Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹'?'bg-yellow-100 text-yellow-800':invoice.status==='Ø§Ù†ØªØ¸Ø§Ø±'?'bg-blue-100 text-blue-800':invoice.status==='ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°'?'bg-green-100 text-green-800':invoice.status==='ØªÙ… Ø§Ù„ØªØµÙ†ÙŠØ¹'?'bg-purple-100 text-purple-800':'bg-gray-100 text-gray-800'),children:invoice.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>printInvoice(invoice),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>startEditInvoice(invoice),className:\"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>changePaymentMethod(invoice.id),className:\"bg-purple-500 text-white px-2 py-1 rounded text-sm hover:bg-purple-600\",title:\"\\u062A\\u063A\\u064A\\u064A\\u0631 \\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639\",children:\"\\uD83D\\uDCB3 \\u062A\\u062D\\u0648\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>cancelInvoice(invoice.id),className:\"bg-red-600 text-white px-2 py-1 rounded text-sm hover:bg-red-700\",title:\"\\u0625\\u0644\\u063A\\u0627\\u0621 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0648\\u0625\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F\",children:\"\\u274C \\u0625\\u0644\\u063A\\u0627\\u0621\"}),invoice.status==='Ø§Ù†ØªØ¸Ø§Ø±'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateInvoiceStatus(invoice.id,'ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°'),className:\"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600\",children:\"\\u062A\\u0645 \\u0627\\u0644\\u062A\\u0646\\u0641\\u064A\\u0630\"})]})})]},invoice.id);})})]}),filteredInvoices.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u062A\\u0637\\u0627\\u0628\\u0642 \\u0645\\u0639\\u0627\\u064A\\u064A\\u0631 \\u0627\\u0644\\u0628\\u062D\\u062B\"})]})]}),editingInvoice&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-lg w-full max-w-4xl max-h-screen overflow-y-auto\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-4\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.invoice_title,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{invoice_title:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0634\\u0631\\u0641\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.supervisor_name,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{supervisor_name:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0634\\u0631\\u0641 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.customer_name,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{customer_name:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639\"}),/*#__PURE__*/_jsxs(\"select\",{value:editForm.payment_method,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{payment_method:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u0646\\u0642\\u062F\\u064A\",children:\"\\u0646\\u0642\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 010\",children:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 010\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0643\\u0627\\u0634 0100\",children:\"\\u0643\\u0627\\u0634 0100\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0622\\u062C\\u0644\",children:\"\\u0622\\u062C\\u0644\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0627\\u0646\\u0633\\u062A\\u0627 \\u0628\\u0627\\u064A\",children:\"\\u0627\\u0646\\u0633\\u062A\\u0627 \\u0628\\u0627\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Yad_Elsawy\",children:\"Yad Elsawy\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0635\\u0645\"}),/*#__PURE__*/_jsxs(\"select\",{value:editForm.discount_type,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{discount_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"amount\",children:\"\\u0645\\u0628\\u0644\\u063A \\u062B\\u0627\\u0628\\u062A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"percentage\",children:\"\\u0646\\u0633\\u0628\\u0629 \\u0645\\u0626\\u0648\\u064A\\u0629\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0642\\u064A\\u0645\\u0629 \\u0627\\u0644\\u062E\\u0635\\u0645\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:editForm.discount_value,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{discount_value:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:editForm.discount_type==='percentage'?'0-100':'0.00'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"textarea\",{value:editForm.notes,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{notes:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",rows:\"3\",placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0625\\u0636\\u0627\\u0641\\u064A\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium mb-2\",children:\"\\u0639\\u0646\\u0627\\u0635\\u0631 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:editForm.items.map((item,index)=>{var _item$local_product_d,_item$local_product_d2;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.product_type==='local'||item.local_product_details?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:item.product_name||\"\".concat(((_item$local_product_d=item.local_product_details)===null||_item$local_product_d===void 0?void 0:_item$local_product_d.product_size)||'',\" - \").concat(((_item$local_product_d2=item.local_product_details)===null||_item$local_product_d2===void 0?void 0:_item$local_product_d2.product_type)||''),onChange:e=>{const newItems=[...editForm.items];newItems[index].product_name=e.target.value;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},className:\"w-full p-1 border border-gray-300 rounded\",placeholder:\"\\u0645\\u0642\\u0627\\u0633 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C - \\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-medium w-16\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644:\"}),/*#__PURE__*/_jsxs(\"select\",{value:item.seal_type||'',onChange:e=>{const newItems=[...editForm.items];newItems[index].seal_type=e.target.value;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},className:\"flex-1 p-1 text-xs border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0646\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"option\",{value:\"RSL\",children:\"RSL\"}),/*#__PURE__*/_jsx(\"option\",{value:\"RS\",children:\"RS\"}),/*#__PURE__*/_jsx(\"option\",{value:\"RSS\",children:\"RSS\"}),/*#__PURE__*/_jsx(\"option\",{value:\"RSE\",children:\"RSE\"}),/*#__PURE__*/_jsx(\"option\",{value:\"B17\",children:\"B17\"}),/*#__PURE__*/_jsx(\"option\",{value:\"B3\",children:\"B3\"}),/*#__PURE__*/_jsx(\"option\",{value:\"B14\",children:\"B14\"}),/*#__PURE__*/_jsx(\"option\",{value:\"B1\",children:\"B1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"R15\",children:\"R15\"}),/*#__PURE__*/_jsx(\"option\",{value:\"R17\",children:\"R17\"}),/*#__PURE__*/_jsx(\"option\",{value:\"W1\",children:\"W1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"W4\",children:\"W4\"}),/*#__PURE__*/_jsx(\"option\",{value:\"W5\",children:\"W5\"}),/*#__PURE__*/_jsx(\"option\",{value:\"W11\",children:\"W11\"}),/*#__PURE__*/_jsx(\"option\",{value:\"WBT\",children:\"WBT\"}),/*#__PURE__*/_jsx(\"option\",{value:\"XR\",children:\"XR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"CH\",children:\"CH\"}),/*#__PURE__*/_jsx(\"option\",{value:\"VR\",children:\"VR\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-medium w-16\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629:\"}),/*#__PURE__*/_jsxs(\"select\",{value:item.material_type||'',onChange:e=>{const newItems=[...editForm.items];newItems[index].material_type=e.target.value;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},className:\"flex-1 p-1 text-xs border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"option\",{value:\"NBR\",children:\"NBR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BUR\",children:\"BUR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BT\",children:\"BT\"}),/*#__PURE__*/_jsx(\"option\",{value:\"VT\",children:\"VT\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BOOM\",children:\"BOOM\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:item.inner_diameter||'',onChange:e=>{const newItems=[...editForm.items];newItems[index].inner_diameter=parseFloat(e.target.value)||0;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},placeholder:\"\\u062F\\u0627\\u062E\\u0644\\u064A\",className:\"w-12 p-1 text-xs border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:item.outer_diameter||'',onChange:e=>{const newItems=[...editForm.items];newItems[index].outer_diameter=parseFloat(e.target.value)||0;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},placeholder:\"\\u062E\\u0627\\u0631\\u062C\\u064A\",className:\"w-12 p-1 text-xs border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:item.height||'',onChange:e=>{const newItems=[...editForm.items];newItems[index].height=parseFloat(e.target.value)||0;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},placeholder:\"\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639\",className:\"w-12 p-1 text-xs border border-gray-300 rounded\"})]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:item.quantity,onChange:e=>{const newItems=[...editForm.items];newItems[index].quantity=parseInt(e.target.value)||0;newItems[index].total_price=newItems[index].unit_price*newItems[index].quantity;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},className:\"w-full p-1 border border-gray-300 rounded\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:item.unit_price,onChange:e=>{const newItems=[...editForm.items];newItems[index].unit_price=parseFloat(e.target.value)||0;newItems[index].total_price=newItems[index].unit_price*newItems[index].quantity;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},className:\"w-full p-1 border border-gray-300 rounded\"})}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:[\"\\u062C.\\u0645 \",(item.total_price||0).toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const newItems=editForm.items.filter((_,i)=>i!==index);setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641\"})})]},index);})})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{// Add a new empty item for editing\nconst newItem={seal_type:'',material_type:'',inner_diameter:'',outer_diameter:'',height:'',quantity:1,unit_price:0,total_price:0};setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:[...editForm.items,newItem]}));},className:\"mt-2 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0646\\u062A\\u062C \\u062C\\u062F\\u064A\\u062F\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:cancelEdit,className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"button\",{onClick:saveInvoiceEdit,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u062D\\u0641\\u0638 \\u0627\\u0644\\u062A\\u0639\\u062F\\u064A\\u0644\\u0627\\u062A\"})]})]})}),showPasswordModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",dir:\"rtl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-8 max-w-md w-full shadow-2xl\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold mb-4 text-blue-600\",children:\"\\uD83D\\uDD10 \\u062A\\u0623\\u0643\\u064A\\u062F \\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-4 bg-blue-50 border-r-4 border-blue-500 rounded\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-700\",children:[(pendingOperation===null||pendingOperation===void 0?void 0:pendingOperation.type)==='cancel'&&'âŒ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©',(pendingOperation===null||pendingOperation===void 0?void 0:pendingOperation.type)==='edit'&&'âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø©',(pendingOperation===null||pendingOperation===void 0?void 0:pendingOperation.type)==='changePayment'&&'ğŸ’³ ØªØ­ÙˆÙŠÙ„ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹']}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-600 mt-2\",children:\"\\u064A\\u062A\\u0637\\u0644\\u0628 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 \\u0644\\u0644\\u0645\\u062A\\u0627\\u0628\\u0639\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 (1462):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:operationPassword,onChange:e=>setOperationPassword(e.target.value),onKeyPress:e=>e.key==='Enter'&&executeOperation(),placeholder:\"\\u0623\\u062F\\u062E\\u0644 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\",className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\",autoFocus:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:executeOperation,className:\"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-semibold transition-colors\",children:\"\\u2705 \\u062A\\u0623\\u0643\\u064A\\u062F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowPasswordModal(false);setPendingOperation(null);setOperationPassword('');},className:\"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-3 rounded-lg font-semibold transition-colors\",children:\"\\u274C \\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]})})]});};// Deleted Invoices Component\nconst DeletedInvoices=()=>{const{user}=useAuth();const[isAuthenticated,setIsAuthenticated]=useState(false);const[password,setPassword]=useState('');const[deletedInvoices,setDeletedInvoices]=useState([]);const[searchTerm,setSearchTerm]=useState('');const[showPasswordChange,setShowPasswordChange]=useState(false);const[oldPassword,setOldPassword]=useState('');const[newPassword,setNewPassword]=useState('');// Verify password\nconst verifyPassword=async()=>{try{const response=await axios.post(\"\".concat(API,\"/deleted-invoices/verify-password\"),{password:password});if(response.data.success){setIsAuthenticated(true);fetchDeletedInvoices();}else{alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©');setPassword('');}}catch(error){console.error('Error verifying password:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');}};// Change password\nconst changePassword=async()=>{if(!oldPassword||!newPassword){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ÙˆØ§Ù„Ø¬Ø¯ÙŠØ¯Ø©');return;}if(newPassword.length<4){alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 4 Ø£Ø±Ù‚Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');return;}try{await axios.post(\"\".concat(API,\"/deleted-invoices/change-password\"),{old_password:oldPassword,new_password:newPassword});alert('ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­');setShowPasswordChange(false);setOldPassword('');setNewPassword('');}catch(error){var _error$response14,_error$response14$dat;console.error('Error changing password:',error);alert(((_error$response14=error.response)===null||_error$response14===void 0?void 0:(_error$response14$dat=_error$response14.data)===null||_error$response14$dat===void 0?void 0:_error$response14$dat.detail)||'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');}};const fetchDeletedInvoices=async()=>{try{const response=await axios.get(\"\".concat(API,\"/deleted-invoices\"));setDeletedInvoices(response.data||[]);}catch(error){console.error('Error fetching deleted invoices:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©');}};const handleRestore=async(invoiceId,invoiceNumber)=>{if(!confirm(\"\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u0627\\u0633\\u062A\\u0639\\u0627\\u062F\\u0629 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \".concat(invoiceNumber,\"\\u061F\\n\\n\\u0645\\u0644\\u0627\\u062D\\u0638\\u0629: \\u0633\\u064A\\u062A\\u0645 \\u0627\\u0633\\u062A\\u0639\\u0627\\u062F\\u0629 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0641\\u0642\\u0637\\u060C \\u0644\\u0646 \\u064A\\u062A\\u0645 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0623\\u0648 \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629 \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0627\\u064B\"))){return;}try{const response=await axios.post(\"\".concat(API,\"/deleted-invoices/\").concat(invoiceId,\"/restore\"),null,{params:{username:user===null||user===void 0?void 0:user.username}});alert(response.data.message+'\\n\\n'+(response.data.warning||''));fetchDeletedInvoices();}catch(error){var _error$response15,_error$response15$dat;console.error('Error restoring invoice:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©: '+(((_error$response15=error.response)===null||_error$response15===void 0?void 0:(_error$response15$dat=_error$response15.data)===null||_error$response15$dat===void 0?void 0:_error$response15$dat.detail)||error.message));}};const handlePermanentDelete=async(invoiceId,invoiceNumber)=>{if(!confirm(\"\\u26A0\\uFE0F \\u062A\\u062D\\u0630\\u064A\\u0631: \\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u062D\\u0630\\u0641 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \".concat(invoiceNumber,\" \\u0646\\u0647\\u0627\\u0626\\u064A\\u0627\\u064B\\u061F\\n\\n\\u0647\\u0630\\u0627 \\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621 \\u0644\\u0627 \\u064A\\u0645\\u0643\\u0646 \\u0627\\u0644\\u062A\\u0631\\u0627\\u062C\\u0639 \\u0639\\u0646\\u0647!\"))){return;}try{await axios.delete(\"\".concat(API,\"/deleted-invoices/\").concat(invoiceId));alert('ØªÙ… Ø­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹');fetchDeletedInvoices();}catch(error){var _error$response16,_error$response16$dat;console.error('Error deleting invoice:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø©: '+(((_error$response16=error.response)===null||_error$response16===void 0?void 0:(_error$response16$dat=_error$response16.data)===null||_error$response16$dat===void 0?void 0:_error$response16$dat.detail)||error.message));}};const filteredInvoices=deletedInvoices.filter(invoice=>{var _invoice$invoice_numb,_invoice$customer_nam,_invoice$payment_meth;const searchLower=searchTerm.toLowerCase();return((_invoice$invoice_numb=invoice.invoice_number)===null||_invoice$invoice_numb===void 0?void 0:_invoice$invoice_numb.toLowerCase().includes(searchLower))||((_invoice$customer_nam=invoice.customer_name)===null||_invoice$customer_nam===void 0?void 0:_invoice$customer_nam.toLowerCase().includes(searchLower))||((_invoice$payment_meth=invoice.payment_method)===null||_invoice$payment_meth===void 0?void 0:_invoice$payment_meth.toLowerCase().includes(searchLower));});// If not authenticated, show password screen\nif(!isAuthenticated){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-500 to-orange-600 p-6\",dir:\"rtl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-lg shadow-2xl max-w-md w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-6xl mb-4\",children:\"\\uD83D\\uDDD1\\uFE0F\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800\",children:\"\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062D\\u0630\\u0648\\u0641\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2\",children:\"\\u0627\\u0644\\u0631\\u062C\\u0627\\u0621 \\u0625\\u062F\\u062E\\u0627\\u0644 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 \\u0644\\u0644\\u062F\\u062E\\u0648\\u0644\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),onKeyPress:e=>e.key==='Enter'&&verifyPassword(),placeholder:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\",className:\"w-full p-3 border-2 border-gray-300 rounded-lg focus:border-red-500 focus:outline-none text-center text-lg\",autoFocus:true}),/*#__PURE__*/_jsx(\"button\",{onClick:verifyPassword,className:\"w-full bg-red-500 text-white py-3 rounded-lg hover:bg-red-600 font-semibold text-lg transition-colors\",children:\"\\u062F\\u062E\\u0648\\u0644\"})]})]})});}// Main deleted invoices interface\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 bg-gray-50 min-h-screen\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-800\",children:\"\\uD83D\\uDDD1\\uFE0F \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062D\\u0630\\u0648\\u0641\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-1\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0648\\u0627\\u0633\\u062A\\u0639\\u0627\\u062F\\u0629 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062D\\u0630\\u0648\\u0641\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPasswordChange(!showPasswordChange),className:\"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors\",title:\"\\u062A\\u063A\\u064A\\u064A\\u0631 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\",children:\"\\uD83D\\uDD11\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchDeletedInvoices,className:\"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors\",children:\"\\uD83D\\uDD04 \\u062A\\u062D\\u062F\\u064A\\u062B\"})]})]}),showPasswordChange&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-4 flex items-center gap-2\",children:\"\\uD83D\\uDD11 \\u062A\\u063A\\u064A\\u064A\\u0631 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 \\u0627\\u0644\\u0642\\u062F\\u064A\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:oldPassword,onChange:e=>setOldPassword(e.target.value),className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 \\u0627\\u0644\\u062C\\u062F\\u064A\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:newPassword,onChange:e=>setNewPassword(e.target.value),className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-end gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:changePassword,className:\"flex-1 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 font-semibold\",children:\"\\u2705 \\u062A\\u0623\\u0643\\u064A\\u062F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowPasswordChange(false);setOldPassword('');setNewPassword('');},className:\"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 font-semibold\",children:\"\\u274C \\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"\\u0627\\u0644\\u0628\\u062D\\u062B (\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\\u060C \\u0627\\u0633\\u0645 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\\u060C \\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639...)\",className:\"w-full p-2 border border-gray-300 rounded\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-md overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full border-collapse\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u062A\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u062D\\u0630\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredInvoices.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"7\",className:\"border border-gray-300 p-4 text-center text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0645\\u062D\\u0630\\u0648\\u0641\\u0629\"})}):filteredInvoices.map(invoice=>{var _invoice$total_amount3;return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-medium\",children:invoice.invoice_number}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(invoice.created_at).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.customer_name}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-bold\",children:[(_invoice$total_amount3=invoice.total_amount)===null||_invoice$total_amount3===void 0?void 0:_invoice$total_amount3.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.payment_method}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-sm text-gray-600\",children:new Date(invoice.deleted_at).toLocaleDateString('ar-EG',{year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse justify-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRestore(invoice.id,invoice.invoice_number),className:\"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600\",children:\"\\u21A9\\uFE0F \\u0627\\u0633\\u062A\\u0639\\u0627\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePermanentDelete(invoice.id,invoice.invoice_number),className:\"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700\",children:\"\\uD83D\\uDDD1\\uFE0F \\u062D\\u0630\\u0641 \\u0646\\u0647\\u0627\\u0626\\u064A\"})]})})]},invoice.id);})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 bg-blue-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-700\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062D\\u0630\\u0648\\u0641\\u0629:\"}),\" \",filteredInvoices.length]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-600 mt-2\",children:[\"\\uD83D\\uDCA1 \",/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0629:\"}),\" \\u0627\\u0633\\u062A\\u0639\\u0627\\u062F\\u0629 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0633\\u062A\\u0631\\u062C\\u0639\\u0647\\u0627 \\u0625\\u0644\\u0649 \\u0642\\u0627\\u0626\\u0645\\u0629 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0646\\u0634\\u0637\\u0629\\u060C \\u0644\\u0643\\u0646 \\u0644\\u0646 \\u064A\\u062A\\u0645 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0623\\u0648 \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629 \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0627\\u064B.\"]})]})]});};// Customer Statement Component (ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨)\nconst CustomerStatement=()=>{var _statement$summary$to,_statement$summary$to2,_statement$summary$fi;const[customers,setCustomers]=useState([]);const[selectedCustomer,setSelectedCustomer]=useState('');const[statement,setStatement]=useState(null);const[fromDate,setFromDate]=useState('');const[toDate,setToDate]=useState('');const[loading,setLoading]=useState(false);useEffect(()=>{fetchCustomers();},[]);const fetchCustomers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/customers\"));// Sort customers alphabetically by name\nconst sortedCustomers=(response.data||[]).sort((a,b)=>a.name.localeCompare(b.name,'ar'));setCustomers(sortedCustomers);}catch(error){console.error('Error fetching customers:',error);}};const fetchStatement=async()=>{if(!selectedCustomer){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø¹Ù…ÙŠÙ„');return;}setLoading(true);try{const params={};if(fromDate)params.from_date=fromDate;if(toDate)params.to_date=toDate;const response=await axios.get(\"\".concat(API,\"/customer-statement/\").concat(selectedCustomer),{params});setStatement(response.data);}catch(error){var _error$response17,_error$response17$dat;console.error('Error fetching statement:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨: '+(((_error$response17=error.response)===null||_error$response17===void 0?void 0:(_error$response17$dat=_error$response17.data)===null||_error$response17$dat===void 0?void 0:_error$response17$dat.detail)||error.message));}finally{setLoading(false);}};const printStatement=()=>{var _summary$total_credit,_summary$total_debit,_summary$final_balanc;if(!statement)return;const printWindow=window.open('','','width=800,height=600');const customer=statement.customer;const transactions=statement.transactions||[];const summary=statement.summary||{};printWindow.document.write(\"\\n      <!DOCTYPE html>\\n      <html dir=\\\"rtl\\\">\\n      <head>\\n        <title>\\u0643\\u0634\\u0641 \\u062D\\u0633\\u0627\\u0628 - \".concat(customer.name,\"</title>\\n        <style>\\n          body {\\n            font-family: Arial, sans-serif;\\n            padding: 20px;\\n            direction: rtl;\\n          }\\n          .header {\\n            text-align: center;\\n            margin-bottom: 30px;\\n            border-bottom: 2px solid #333;\\n            padding-bottom: 10px;\\n          }\\n          .info-section {\\n            margin-bottom: 20px;\\n            display: flex;\\n            justify-content: space-between;\\n          }\\n          .info-box {\\n            border: 1px solid #ddd;\\n            padding: 10px;\\n            border-radius: 5px;\\n            width: 45%;\\n          }\\n          table {\\n            width: 100%;\\n            border-collapse: collapse;\\n            margin-bottom: 20px;\\n          }\\n          th, td {\\n            border: 1px solid #ddd;\\n            padding: 8px;\\n            text-align: center;\\n          }\\n          th {\\n            background-color: #f2f2f2;\\n            font-weight: bold;\\n          }\\n          .summary {\\n            margin-top: 20px;\\n            border-top: 2px solid #333;\\n            padding-top: 10px;\\n          }\\n          .summary-row {\\n            display: flex;\\n            justify-content: space-between;\\n            padding: 5px 0;\\n            font-size: 14px;\\n          }\\n          .final-balance {\\n            font-size: 18px;\\n            font-weight: bold;\\n            color: \").concat(summary.final_balance>=0?'green':'red',\";\\n          }\\n          @media print {\\n            body { padding: 10px; }\\n          }\\n        </style>\\n      </head>\\n      <body>\\n        <div class=\\\"header\\\">\\n          <h1>\\u0643\\u0634\\u0641 \\u062D\\u0633\\u0627\\u0628 \\u0639\\u0627\\u0645</h1>\\n          <p>\\u0645\\u0631\\u062A\\u0628 \\u0628\\u062A\\u0648\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u0642\\u064A\\u0648\\u062F</p>\\n        </div>\\n\\n        <div class=\\\"info-section\\\">\\n          <div class=\\\"info-box\\\">\\n            <p><strong>\\u0627\\u0633\\u0645 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628:</strong> \").concat(customer.name,\"</p>\\n            <p><strong>\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0647\\u0627\\u062A\\u0641:</strong> \").concat(customer.phone||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',\"</p>\\n            \").concat(customer.is_also_supplier?'<p><strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…ÙˆØ±Ø¯ Ø£ÙŠØ¶Ø§Ù‹</p>':'',\"\\n          </div>\\n          <div class=\\\"info-box\\\">\\n            <p><strong>\\u0645\\u0646 \\u062A\\u0627\\u0631\\u064A\\u062E:</strong> \").concat(statement.period.from_date,\"</p>\\n            <p><strong>\\u0625\\u0644\\u0649 \\u062A\\u0627\\u0631\\u064A\\u062E:</strong> \").concat(statement.period.to_date,\"</p>\\n            <p><strong>\\u062A\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u0637\\u0628\\u0627\\u0639\\u0629:</strong> \").concat(new Date().toLocaleDateString('ar-EG'),\"</p>\\n          </div>\\n        </div>\\n\\n        <table>\\n          <thead>\\n            <tr>\\n              <th>\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E</th>\\n              <th>\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0642\\u064A\\u062F</th>\\n              <th>\\u0627\\u0644\\u0628\\u064A\\u0627\\u0646</th>\\n              <th>\\u0645\\u062F\\u064A\\u0646</th>\\n              <th>\\u062F\\u0627\\u0626\\u0646</th>\\n              <th>\\u0627\\u0644\\u0631\\u0635\\u064A\\u062F</th>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            \").concat(transactions.map(t=>\"\\n              <tr>\\n                <td>\".concat(new Date(t.date).toLocaleDateString('ar-EG'),\"</td>\\n                <td>\").concat(t.type,\"</td>\\n                <td>\").concat(t.description,\"</td>\\n                <td>\").concat(t.debit>0?t.debit.toFixed(2):'-',\"</td>\\n                <td>\").concat(t.credit>0?t.credit.toFixed(2):'-',\"</td>\\n                <td>\").concat(t.balance.toFixed(2),\"</td>\\n              </tr>\\n            \")).join(''),\"\\n          </tbody>\\n        </table>\\n\\n        <div class=\\\"summary\\\">\\n          <div class=\\\"summary-row\\\">\\n            <span><strong>\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u062F\\u0627\\u0626\\u0646:</strong></span>\\n            <span>\").concat(((_summary$total_credit=summary.total_credit)===null||_summary$total_credit===void 0?void 0:_summary$total_credit.toFixed(2))||'0.00',\" \\u062C.\\u0645</span>\\n          </div>\\n          <div class=\\\"summary-row\\\">\\n            <span><strong>\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u062F\\u064A\\u0646:</strong></span>\\n            <span>\").concat(((_summary$total_debit=summary.total_debit)===null||_summary$total_debit===void 0?void 0:_summary$total_debit.toFixed(2))||'0.00',\" \\u062C.\\u0645</span>\\n          </div>\\n          <div class=\\\"summary-row final-balance\\\">\\n            <span><strong>\\u0627\\u0644\\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0646\\u0647\\u0627\\u0626\\u064A:</strong></span>\\n            <span>\").concat(((_summary$final_balanc=summary.final_balance)===null||_summary$final_balanc===void 0?void 0:_summary$final_balanc.toFixed(2))||'0.00',\" \\u062C.\\u0645</span>\\n          </div>\\n        </div>\\n\\n        <p style=\\\"margin-top: 30px; text-align: left;\\\">\\u0627\\u0644\\u0645\\u062D\\u0627\\u0633\\u0628 \\u064A\\u0639\\u062A\\u0645\\u062F\\u060C\\u060C\\u060C</p>\\n      </body>\\n      </html>\\n    \"));printWindow.document.close();printWindow.print();};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-6\",children:\"\\u0643\\u0634\\u0641 \\u062D\\u0633\\u0627\\u0628 \\u0627\\u0644\\u0639\\u0645\\u0644\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 *\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedCustomer,onChange:e=>setSelectedCustomer(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- \\u0627\\u062E\\u062A\\u0631 \\u0639\\u0645\\u064A\\u0644 --\"}),customers.map(customer=>/*#__PURE__*/_jsx(\"option\",{value:customer.id,children:customer.name},customer.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0646 \\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:fromDate,onChange:e=>setFromDate(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0625\\u0644\\u0649 \\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:toDate,onChange:e=>setToDate(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:fetchStatement,disabled:loading||!selectedCustomer,className:\"w-full px-4 py-2 rounded text-white \".concat(loading||!selectedCustomer?'bg-gray-400 cursor-not-allowed':'bg-blue-500 hover:bg-blue-600'),children:loading?'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...':'ğŸ“‹ Ø¹Ø±Ø¶ ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨'})})]})}),statement&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6 pb-4 border-b-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:\"\\u0643\\u0634\\u0641 \\u062D\\u0633\\u0627\\u0628 \\u0639\\u0627\\u0645\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"\\u0645\\u0631\\u062A\\u0628 \\u0628\\u062A\\u0648\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u0642\\u064A\\u0648\\u062F\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:printStatement,className:\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\",children:\"\\uD83D\\uDDA8\\uFE0F \\u0637\\u0628\\u0627\\u0639\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-4 rounded\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628:\"}),\" \",statement.customer.name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0647\\u0627\\u062A\\u0641:\"}),\" \",statement.customer.phone||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯']}),statement.customer.is_also_supplier&&/*#__PURE__*/_jsx(\"p\",{className:\"text-orange-600 font-medium\",children:\"\\u26A0\\uFE0F \\u0647\\u0630\\u0627 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0645\\u0648\\u0631\\u062F \\u0623\\u064A\\u0636\\u0627\\u064B\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0645\\u0646 \\u062A\\u0627\\u0631\\u064A\\u062E:\"}),\" \",statement.period.from_date]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0625\\u0644\\u0649 \\u062A\\u0627\\u0631\\u064A\\u062E:\"}),\" \",statement.period.to_date]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E:\"}),\" \",new Date().toLocaleDateString('ar-EG')]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto mb-6\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0642\\u064A\\u062F\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0631\\u062C\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0645\\u062F\\u064A\\u0646\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u062F\\u0627\\u0626\\u0646\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0631\\u0635\\u064A\\u062F\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:statement.transactions.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"7\",className:\"border border-gray-300 p-4 text-center text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0645\\u0639\\u0627\\u0645\\u0644\\u0627\\u062A \\u0641\\u064A \\u0647\\u0630\\u0647 \\u0627\\u0644\\u0641\\u062A\\u0631\\u0629\"})}):statement.transactions.map((trans,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(trans.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:trans.type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-right\",children:trans.description}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:trans.reference}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-red-600 font-medium\",children:trans.debit>0?trans.debit.toFixed(2):'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-green-600 font-medium\",children:trans.credit>0?trans.credit.toFixed(2):'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-bold\",children:trans.balance.toFixed(2)})]},index))})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-lg border-t-4 border-blue-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-1\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u062F\\u0627\\u0626\\u0646\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-green-600\",children:[(_statement$summary$to=statement.summary.total_credit)===null||_statement$summary$to===void 0?void 0:_statement$summary$to.toFixed(2),\" \\u062C.\\u0645\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-1\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u062F\\u064A\\u0646\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-red-600\",children:[(_statement$summary$to2=statement.summary.total_debit)===null||_statement$summary$to2===void 0?void 0:_statement$summary$to2.toFixed(2),\" \\u062C.\\u0645\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-1\",children:\"\\u0627\\u0644\\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0646\\u0647\\u0627\\u0626\\u064A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold \".concat(statement.summary.final_balance>=0?'text-green-600':'text-red-600'),children:[(_statement$summary$fi=statement.summary.final_balance)===null||_statement$summary$fi===void 0?void 0:_statement$summary$fi.toFixed(2),\" \\u062C.\\u0645\"]})]})]})})]}),!statement&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-6 rounded-lg border-r-4 border-blue-500\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold mb-2\",children:\"\\uD83D\\uDCDD \\u062A\\u0639\\u0644\\u064A\\u0645\\u0627\\u062A:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside text-sm text-gray-700 space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628 \\u0645\\u0646 \\u0627\\u0644\\u0642\\u0627\\u0626\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u064A\\u0645\\u0643\\u0646\\u0643 \\u062A\\u062D\\u062F\\u064A\\u062F \\u0641\\u062A\\u0631\\u0629 \\u0632\\u0645\\u0646\\u064A\\u0629 \\u0645\\u0639\\u064A\\u0646\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0636\\u063A\\u0637 \\u0639\\u0644\\u0649 \\\"\\u0639\\u0631\\u0636 \\u0643\\u0634\\u0641 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\\\" \\u0644\\u0639\\u0631\\u0636 \\u0627\\u0644\\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u064A\\u0645\\u0643\\u0646\\u0643 \\u0637\\u0628\\u0627\\u0639\\u0629 \\u0643\\u0634\\u0641 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628 \\u0628\\u0627\\u0644\\u0636\\u063A\\u0637 \\u0639\\u0644\\u0649 \\u0632\\u0631 \\u0627\\u0644\\u0637\\u0628\\u0627\\u0639\\u0629\"}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0629:\"}),\" \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 = \\u062F\\u0627\\u0626\\u0646 (\\u0645\\u0648\\u062C\\u0628) | \\u0627\\u0644\\u062F\\u0641\\u0639\\u0627\\u062A \\u0648\\u0627\\u0644\\u0645\\u0634\\u062A\\u0631\\u064A\\u0627\\u062A = \\u0645\\u062F\\u064A\\u0646 (\\u0633\\u0627\\u0644\\u0628)\"]})]})]})]});};// Customer Account Settlement Component - ØªØµÙÙŠØ© Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…ÙŠÙ„\nconst SettleAccount=()=>{const{user}=useAuth();const[customers,setCustomers]=useState([]);const[selectedCustomer,setSelectedCustomer]=useState(null);const[deferredInvoices,setDeferredInvoices]=useState([]);const[amountPaid,setAmountPaid]=useState('');const[paymentMethod,setPaymentMethod]=useState('Ù†Ù‚Ø¯ÙŠ');const[loading,setLoading]=useState(false);const[result,setResult]=useState(null);const[suppliers,setSuppliers]=useState([]);const[isCustomerAlsoSupplier,setIsCustomerAlsoSupplier]=useState(false);const[supplierBalance,setSupplierBalance]=useState(0);useEffect(()=>{fetchCustomers();fetchSuppliers();},[]);const fetchCustomers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/customers\"));const sortedCustomers=(response.data||[]).sort((a,b)=>a.name.localeCompare(b.name,'ar'));setCustomers(sortedCustomers);}catch(error){console.error('Error fetching customers:',error);}};const fetchSuppliers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/suppliers\"));setSuppliers(response.data||[]);}catch(error){console.error('Error fetching suppliers:',error);}};const fetchCustomerInvoices=async customerId=>{try{const response=await axios.get(\"\".concat(API,\"/invoices\"));const customer=customers.find(c=>c.id===customerId);if(customer){const customerInvoices=response.data.filter(inv=>inv.customer_name===customer.name&&inv.payment_method==='Ø¢Ø¬Ù„'&&inv.remaining_amount>0).sort((a,b)=>new Date(a.date)-new Date(b.date));// Sort by date ascending\nsetDeferredInvoices(customerInvoices);}}catch(error){console.error('Error fetching invoices:',error);}};const handleCustomerChange=customerId=>{setSelectedCustomer(customerId);setResult(null);if(customerId){fetchCustomerInvoices(customerId);// Check if customer is also supplier\nconst customer=customers.find(c=>c.id===customerId);if(customer){const supplier=suppliers.find(s=>s.name===customer.name);if(supplier&&supplier.current_balance>0){setIsCustomerAlsoSupplier(true);setSupplierBalance(supplier.current_balance);}else{setIsCustomerAlsoSupplier(false);setSupplierBalance(0);}}}else{setDeferredInvoices([]);setIsCustomerAlsoSupplier(false);setSupplierBalance(0);}};const handleSettleAccount=async()=>{if(!selectedCustomer){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„');return;}if(!amountPaid||parseFloat(amountPaid)<=0){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');return;}if(!confirm(\"\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u062A\\u0635\\u0641\\u064A\\u0629 \\u062D\\u0633\\u0627\\u0628 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0628\\u0645\\u0628\\u0644\\u063A \".concat(parseFloat(amountPaid).toFixed(2),\" \\u062C.\\u0645\\u061F\\n\\n\\u0633\\u064A\\u062A\\u0645 \\u062A\\u0648\\u0632\\u064A\\u0639 \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A \\u0639\\u0644\\u0649 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0622\\u062C\\u0644\\u0629 \\u0645\\u0646 \\u0627\\u0644\\u0623\\u0642\\u062F\\u0645 \\u0644\\u0644\\u0623\\u062D\\u062F\\u062B\"))){return;}setLoading(true);try{const response=await axios.post(\"\".concat(API,\"/customers/\").concat(selectedCustomer,\"/settle-account\"),null,{params:{amount_paid:parseFloat(amountPaid),payment_method:paymentMethod,username:user===null||user===void 0?void 0:user.username}});setResult(response.data);setAmountPaid('');// Refresh invoices\nfetchCustomerInvoices(selectedCustomer);// Show detailed result\nlet message=\"\\u2705 \".concat(response.data.message,\"\\n\\n\");message+=\"\\uD83D\\uDCB0 \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639: \".concat(response.data.total_amount_paid.toFixed(2),\" \\u062C.\\u0645\\n\");message+=\"\\uD83D\\uDCCA \\u062A\\u0645 \\u062A\\u0648\\u0632\\u064A\\u0639: \".concat(response.data.amount_distributed.toFixed(2),\" \\u062C.\\u0645\\n\");if(response.data.remaining_amount>0){message+=\"\\uD83D\\uDCB5 \\u0645\\u062A\\u0628\\u0642\\u064A: \".concat(response.data.remaining_amount.toFixed(2),\" \\u062C.\\u0645\\n\\n\");}message+=\"\\uD83D\\uDCCB \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629 (\".concat(response.data.invoices_count,\"):\\n\");response.data.paid_invoices.forEach(inv=>{message+=\"\\n\\u2022 \".concat(inv.invoice_number,\"\\n\");message+=\"  \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639: \".concat(inv.amount_paid.toFixed(2),\" \\u062C.\\u0645\\n\");message+=\"  \\u0627\\u0644\\u062D\\u0627\\u0644\\u0629: \".concat(inv.status,\"\\n\");});alert(message);}catch(error){var _error$response18,_error$response18$dat;console.error('Error settling account:',error);alert(((_error$response18=error.response)===null||_error$response18===void 0?void 0:(_error$response18$dat=_error$response18.data)===null||_error$response18$dat===void 0?void 0:_error$response18$dat.detail)||'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµÙÙŠØ© Ø§Ù„Ø­Ø³Ø§Ø¨');}finally{setLoading(false);}};// Reconcile customer-supplier account\nconst handleReconciliation=async()=>{var _customers$find;if(!selectedCustomer){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„');return;}const settlementAmount=Math.min(supplierBalance,totalRemaining);const confirmMessage=\"\\uD83D\\uDD04 \\u062A\\u0633\\u0648\\u064A\\u0629 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\\n\\n\"+\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644/\\u0627\\u0644\\u0645\\u0648\\u0631\\u062F: \".concat((_customers$find=customers.find(c=>c.id===selectedCustomer))===null||_customers$find===void 0?void 0:_customers$find.name,\"\\n\\n\")+\"\\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F: \".concat(supplierBalance.toFixed(2),\" \\u062C.\\u0645\\n\")+\"\\u062F\\u064A\\u0648\\u0646 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644: \".concat(totalRemaining.toFixed(2),\" \\u062C.\\u0645\\n\\n\")+\"\\u0633\\u064A\\u062A\\u0645 \\u062A\\u0633\\u0648\\u064A\\u0629: \".concat(settlementAmount.toFixed(2),\" \\u062C.\\u0645\\n\\n\")+\"\\u0628\\u0639\\u062F \\u0627\\u0644\\u062A\\u0633\\u0648\\u064A\\u0629:\\n\"+\"\\u2022 \\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F: \".concat((supplierBalance-settlementAmount).toFixed(2),\" \\u062C.\\u0645\\n\")+\"\\u2022 \\u062F\\u064A\\u0648\\u0646 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644: \".concat((totalRemaining-settlementAmount).toFixed(2),\" \\u062C.\\u0645\\n\\n\")+\"\\u26A0\\uFE0F \\u0645\\u0644\\u0627\\u062D\\u0638\\u0629: \\u062A\\u0633\\u0648\\u064A\\u0629 \\u062F\\u0627\\u062E\\u0644\\u064A\\u0629 \\u0628\\u062F\\u0648\\u0646 \\u062A\\u0623\\u062B\\u064A\\u0631 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629\\n\\n\"+\"\\u0647\\u0644 \\u062A\\u0631\\u064A\\u062F \\u0627\\u0644\\u0645\\u062A\\u0627\\u0628\\u0639\\u0629\\u061F\";if(!confirm(confirmMessage)){return;}setLoading(true);try{const response=await axios.post(\"\".concat(API,\"/customers/\").concat(selectedCustomer,\"/reconcile-with-supplier\"),null,{params:{username:user===null||user===void 0?void 0:user.username}});// Refresh data\nfetchCustomerInvoices(selectedCustomer);fetchSuppliers();// Show detailed result\nlet message=\"\\u2705 \".concat(response.data.message,\"\\n\\n\");message+=\"\\uD83D\\uDCCA \\u0627\\u0644\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644:\\n\";message+=\"\\u2022 \\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F \\u0627\\u0644\\u0633\\u0627\\u0628\\u0642: \".concat(response.data.supplier_previous_balance.toFixed(2),\" \\u062C.\\u0645\\n\");message+=\"\\u2022 \\u062F\\u064A\\u0648\\u0646 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0627\\u0644\\u0633\\u0627\\u0628\\u0642\\u0629: \".concat(response.data.customer_previous_debt.toFixed(2),\" \\u062C.\\u0645\\n\");message+=\"\\u2022 \\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u062A\\u0633\\u0648\\u064A\\u0629: \".concat(response.data.settlement_amount.toFixed(2),\" \\u062C.\\u0645\\n\\n\");message+=\"\\uD83D\\uDCC9 \\u0628\\u0639\\u062F \\u0627\\u0644\\u062A\\u0633\\u0648\\u064A\\u0629:\\n\";message+=\"\\u2022 \\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F \\u0627\\u0644\\u062C\\u062F\\u064A\\u062F: \".concat(response.data.supplier_new_balance.toFixed(2),\" \\u062C.\\u0645\\n\");message+=\"\\u2022 \\u062F\\u064A\\u0648\\u0646 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0627\\u0644\\u0645\\u062A\\u0628\\u0642\\u064A\\u0629: \".concat(response.data.customer_remaining_debt.toFixed(2),\" \\u062C.\\u0645\\n\\n\");message+=\"\\uD83D\\uDCCB \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u0633\\u0648\\u0627\\u0629 (\".concat(response.data.invoices_count,\"):\\n\");response.data.settled_invoices.forEach(inv=>{message+=\"\\n\\u2022 \".concat(inv.invoice_number,\"\\n\");message+=\"  \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639: \".concat(inv.amount_paid.toFixed(2),\" \\u062C.\\u0645\\n\");message+=\"  \\u0627\\u0644\\u062D\\u0627\\u0644\\u0629: \".concat(inv.status,\"\\n\");});message+=\"\\n\".concat(response.data.note);alert(message);// Update local state\nsetIsCustomerAlsoSupplier(response.data.supplier_new_balance>0);setSupplierBalance(response.data.supplier_new_balance);}catch(error){var _error$response19,_error$response19$dat;console.error('Error reconciling account:',error);alert(((_error$response19=error.response)===null||_error$response19===void 0?void 0:(_error$response19$dat=_error$response19.data)===null||_error$response19$dat===void 0?void 0:_error$response19$dat.detail)||'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ³ÙˆÙŠØ©');}finally{setLoading(false);}};const totalRemaining=deferredInvoices.reduce((sum,inv)=>sum+inv.remaining_amount,0);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 bg-gray-50 min-h-screen\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-800 flex items-center gap-2\",children:\"\\uD83D\\uDCB5 \\u062A\\u0635\\u0641\\u064A\\u0629 \\u062D\\u0633\\u0627\\u0628 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2\",children:\"\\u062F\\u0641\\u0639 \\u0645\\u0628\\u0644\\u063A \\u0644\\u062A\\u0635\\u0641\\u064A\\u0629 \\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0627\\u0644\\u0622\\u062C\\u0644\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-4\",children:\"\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062A\\u0635\\u0641\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 *\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedCustomer||'',onChange:e=>handleCustomerChange(e.target.value),className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- \\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 --\"}),customers.map(customer=>/*#__PURE__*/_jsx(\"option\",{value:customer.id,children:customer.name},customer.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639 (\\u062C.\\u0645) *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:amountPaid,onChange:e=>setAmountPaid(e.target.value),placeholder:\"0.00\",className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639 *\"}),/*#__PURE__*/_jsxs(\"select\",{value:paymentMethod,onChange:e=>setPaymentMethod(e.target.value),className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u0646\\u0642\\u062F\\u064A\",children:\"\\u0646\\u0642\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 010\",children:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 010\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0643\\u0627\\u0634 0100\",children:\"\\u0643\\u0627\\u0634 0100\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0627\\u0646\\u0633\\u062A\\u0627\\u0628\\u0627\\u064A\",children:\"\\u0627\\u0646\\u0633\\u062A\\u0627\\u0628\\u0627\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u064A\\u062F \\u0627\\u0644\\u0635\\u0627\\u0648\\u064A\",children:\"\\u064A\\u062F \\u0627\\u0644\\u0635\\u0627\\u0648\\u064A\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleSettleAccount,disabled:loading||!selectedCustomer||!amountPaid,className:\"w-full py-3 rounded-lg font-semibold text-white transition-colors \".concat(loading||!selectedCustomer||!amountPaid?'bg-gray-400 cursor-not-allowed':'bg-green-500 hover:bg-green-600'),children:loading?'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØµÙÙŠØ©...':'âœ… ØªØµÙÙŠØ© Ø§Ù„Ø­Ø³Ø§Ø¨'})})]}),isCustomerAlsoSupplier&&selectedCustomer&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg border-2 border-purple-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold text-purple-800 mb-2\",children:\"\\uD83D\\uDD04 \\u062A\\u0633\\u0648\\u064A\\u0629 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628 (\\u0639\\u0645\\u064A\\u0644 \\u0648\\u0645\\u0648\\u0631\\u062F)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm space-y-1\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"\\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F:\"}),\" \",supplierBalance.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"\\u062F\\u064A\\u0648\\u0646 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644:\"}),\" \",totalRemaining.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-purple-700 font-semibold\",children:[\"\\u0633\\u064A\\u062A\\u0645 \\u062A\\u0633\\u0648\\u064A\\u0629: \",Math.min(supplierBalance,totalRemaining).toFixed(2),\" \\u062C.\\u0645\"]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleReconciliation,disabled:loading||totalRemaining===0||supplierBalance===0,className:\"px-6 py-3 rounded-lg font-semibold text-white transition-colors \".concat(loading||totalRemaining===0||supplierBalance===0?'bg-gray-400 cursor-not-allowed':'bg-purple-600 hover:bg-purple-700'),children:loading?'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ³ÙˆÙŠØ©...':'ğŸ”„ ØªØ³ÙˆÙŠØ©'})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-purple-600 mt-2\",children:\"\\u26A0\\uFE0F \\u062A\\u0633\\u0648\\u064A\\u0629 \\u062F\\u0627\\u062E\\u0644\\u064A\\u0629 \\u0628\\u062F\\u0648\\u0646 \\u062A\\u0623\\u062B\\u064A\\u0631 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629\"})]})]}),selectedCustomer&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-semibold\",children:[\"\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0622\\u062C\\u0644\\u0629 (\",deferredInvoices.length,\")\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-red-600\",children:[totalRemaining.toFixed(2),\" \\u062C.\\u0645\"]})]})]}),deferredInvoices.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u2705 \\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0622\\u062C\\u0644\\u0629 \\u0645\\u0633\\u062A\\u062D\\u0642\\u0629 \\u0644\\u0647\\u0630\\u0627 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3 text-right\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3 text-right\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3 text-right\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3 text-right\",children:\"\\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3 text-right\",children:\"\\u0627\\u0644\\u0645\\u062A\\u0628\\u0642\\u064A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:deferredInvoices.map((invoice,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:index%2===0?'bg-white':'bg-gray-50',children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3 font-semibold\",children:invoice.invoice_number}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3\",children:new Date(invoice.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3\",children:[invoice.total_amount.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3 text-green-600\",children:[invoice.paid_amount.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3 text-red-600 font-bold\",children:[invoice.remaining_amount.toFixed(2),\" \\u062C.\\u0645\"]})]},invoice.id))}),/*#__PURE__*/_jsx(\"tfoot\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-200 font-bold\",children:[/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",className:\"border border-gray-300 p-3 text-right\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A:\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3 text-red-600\",children:[totalRemaining.toFixed(2),\" \\u062C.\\u0645\"]})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 p-4 bg-blue-50 rounded-lg border-r-4 border-blue-500\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-700\",children:[\"\\uD83D\\uDCA1 \",/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0629:\"}),\" \\u0633\\u064A\\u062A\\u0645 \\u062A\\u0648\\u0632\\u064A\\u0639 \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0628\\u062A\\u0631\\u062A\\u064A\\u0628 \\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E \\u0645\\u0646 \\u0627\\u0644\\u0623\\u0642\\u062F\\u0645 \\u0644\\u0644\\u0623\\u062D\\u062F\\u062B\"]})})]})]});};// Work Orders Component\nconst WorkOrders=()=>{const[workOrders,setWorkOrders]=useState([]);const[invoices,setInvoices]=useState([]);const[selectedInvoices,setSelectedInvoices]=useState([]);const[newWorkOrder,setNewWorkOrder]=useState({title:'',description:'',priority:'Ø¹Ø§Ø¯ÙŠ'});const[showAddToExisting,setShowAddToExisting]=useState(false);const[selectedWorkOrderId,setSelectedWorkOrderId]=useState('');const[selectedInvoiceForAdd,setSelectedInvoiceForAdd]=useState('');useEffect(()=>{fetchWorkOrders();fetchInvoices();},[]);const fetchWorkOrders=async()=>{try{const response=await axios.get(\"\".concat(API,\"/work-orders\"));setWorkOrders(response.data);}catch(error){console.error('Error fetching work orders:',error);setWorkOrders([]);// Set empty array on error\n}};const fetchInvoices=async()=>{try{const response=await axios.get(\"\".concat(API,\"/invoices\"));setInvoices(response.data);}catch(error){console.error('Error fetching invoices:',error);}};const toggleInvoiceSelection=invoiceId=>{setSelectedInvoices(prev=>prev.includes(invoiceId)?prev.filter(id=>id!==invoiceId):[...prev,invoiceId]);};const createWorkOrderFromMultipleInvoices=async()=>{if(selectedInvoices.length===0){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ÙØ§ØªÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');return;}if(!newWorkOrder.title.trim()){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„');return;}try{// Get selected invoices data\nconst selectedInvoicesData=invoices.filter(inv=>selectedInvoices.includes(inv.id));// Clean invoices data (remove MongoDB ObjectIds)\nconst cleanInvoices=selectedInvoicesData.map(inv=>{const cleanInv=_objectSpread({},inv);if(cleanInv._id)delete cleanInv._id;return cleanInv;});// Create work order with multiple invoices\nconst workOrderData={title:newWorkOrder.title,description:newWorkOrder.description,priority:newWorkOrder.priority,invoices:cleanInvoices,total_amount:cleanInvoices.reduce((sum,inv)=>sum+(inv.total_amount||0),0),total_items:cleanInvoices.reduce((sum,inv)=>{var _inv$items;return sum+(((_inv$items=inv.items)===null||_inv$items===void 0?void 0:_inv$items.length)||0);},0)};const response=await axios.post(\"\".concat(API,\"/work-orders/multiple\"),workOrderData);if(response.data){alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ø¨Ù†Ø¬Ø§Ø­');// Reset form\nsetSelectedInvoices([]);setNewWorkOrder({title:'',description:'',priority:'Ø¹Ø§Ø¯ÙŠ'});// Refresh work orders list\nawait fetchWorkOrders();}}catch(error){var _error$response20,_error$response20$dat;console.error('Error creating work order:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„: '+(((_error$response20=error.response)===null||_error$response20===void 0?void 0:(_error$response20$dat=_error$response20.data)===null||_error$response20$dat===void 0?void 0:_error$response20$dat.detail)||error.message));}};const addInvoiceToExistingWorkOrder=async()=>{if(!selectedWorkOrderId||!selectedInvoiceForAdd){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ ÙˆØ§Ù„ÙØ§ØªÙˆØ±Ø©');return;}try{const response=await axios.put(\"\".concat(API,\"/work-orders/\").concat(selectedWorkOrderId,\"/add-invoice\"),null,{params:{invoice_id:selectedInvoiceForAdd}});if(response.data){alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¥Ù„Ù‰ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ø¨Ù†Ø¬Ø§Ø­');// Reset form\nsetSelectedWorkOrderId('');setSelectedInvoiceForAdd('');setShowAddToExisting(false);// Refresh work orders list\nawait fetchWorkOrders();}}catch(error){var _error$response21,_error$response21$dat;console.error('Error adding invoice to work order:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ§ØªÙˆØ±Ø©: '+(((_error$response21=error.response)===null||_error$response21===void 0?void 0:(_error$response21$dat=_error$response21.data)===null||_error$response21$dat===void 0?void 0:_error$response21$dat.detail)||error.message));}};const getInvoiceDetails=invoiceId=>{return invoices.find(inv=>inv.id===invoiceId);};const getAvailableInvoices=()=>{// Show invoices that are \"ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°\" or \"Ø§Ù†ØªØ¸Ø§Ø±\"\nreturn invoices.filter(invoice=>invoice.status==='ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°'||invoice.status==='Ø§Ù†ØªØ¸Ø§Ø±');};const getAvailableInvoicesForAdd=()=>{var _selectedWorkOrder$in;// Get invoices not already in the selected work order\nif(!selectedWorkOrderId)return getAvailableInvoices();const selectedWorkOrder=workOrders.find(wo=>wo.id===selectedWorkOrderId);if(!selectedWorkOrder)return getAvailableInvoices();const usedInvoiceIds=((_selectedWorkOrder$in=selectedWorkOrder.invoices)===null||_selectedWorkOrder$in===void 0?void 0:_selectedWorkOrder$in.map(inv=>inv.id))||[];return getAvailableInvoices().filter(invoice=>!usedInvoiceIds.includes(invoice.id));};const printWorkOrder=workOrder=>{var _workOrder$invoices;const workOrderInvoices=((_workOrder$invoices=workOrder.invoices)===null||_workOrder$invoices===void 0?void 0:_workOrder$invoices.map(invoiceData=>invoices.find(inv=>inv.id===invoiceData.id)||invoiceData).filter(inv=>inv))||[];const totalAmount=workOrderInvoices.reduce((sum,inv)=>sum+(inv.total_amount||0),0);const totalItems=workOrderInvoices.reduce((sum,inv)=>{var _inv$items2;return sum+(((_inv$items2=inv.items)===null||_inv$items2===void 0?void 0:_inv$items2.length)||0);},0);const printContent=\"\\n      <div style=\\\"font-family: Arial, sans-serif; direction: rtl; text-align: right;\\\">\\n        <div style=\\\"text-align: center; margin-bottom: 20px;\\\">\\n          <h1>\\u0645\\u0627\\u0633\\u062A\\u0631 \\u0633\\u064A\\u0644</h1>\\n          <p>\\u0627\\u0644\\u062D\\u0631\\u0641\\u064A\\u064A\\u0646 \\u0634\\u0627\\u0631\\u0639 \\u0627\\u0644\\u0633\\u0648\\u0628\\u0631 \\u062C\\u064A\\u062A - 01020630677</p>\\n          <h2 style=\\\"color: #333; margin-top: 20px;\\\">\\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644</h2>\\n        </div>\\n        \\n        <div style=\\\"margin-bottom: 20px;\\\">\\n          <strong>\\u0631\\u0642\\u0645 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644:</strong> \".concat(workOrder.id,\"<br>\\n          <strong>\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646:</strong> \").concat(workOrder.title||\"\\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 #\".concat(workOrder.id.slice(-8)),\"<br>\\n          <strong>\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E:</strong> \").concat(new Date(workOrder.created_at).toLocaleDateString('ar-EG'),\"<br>\\n          <strong>\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629:</strong> \").concat(workOrder.status||'Ø¬Ø¯ÙŠØ¯',\"<br>\\n          <strong>\\u0639\\u062F\\u062F \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631:</strong> \").concat(workOrderInvoices.length,\"<br>\\n          <strong>\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A:</strong> \\u062C.\\u0645 \").concat(totalAmount.toFixed(2),\"\\n          \").concat(workOrder.description?\"<br><strong>\\u0627\\u0644\\u0648\\u0635\\u0641:</strong> \".concat(workOrder.description):'',\"\\n          \").concat(workOrder.supervisor_name?\"<br><strong>\\u0627\\u0644\\u0645\\u0634\\u0631\\u0641 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639:</strong> \".concat(workOrder.supervisor_name):'',\"\\n          \").concat(workOrder.is_daily?\"<br><strong>\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0623\\u0645\\u0631:</strong> \\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 \\u064A\\u0648\\u0645\\u064A \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\":'',\"\\n        </div>\\n\\n        <h3 style=\\\"color: #333; margin-bottom: 10px;\\\">\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062F\\u0631\\u062C\\u0629:</h3>\\n        <table style=\\\"width: 100%; border-collapse: collapse; margin-bottom: 20px;\\\">\\n          <thead>\\n            <tr style=\\\"background-color: #f0f0f0;\\\">\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0639\\u062F\\u062F \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A</th>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            \").concat(workOrderInvoices.map(invoice=>{var _invoice$total_amount4,_invoice$items;return\"\\n              <tr>\\n                <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\".concat(invoice.invoice_number,\"</td>\\n                <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(invoice.customer_name,\"</td>\\n                <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(new Date(invoice.date).toLocaleDateString('ar-EG'),\"</td>\\n                <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u062C.\\u0645 \").concat(((_invoice$total_amount4=invoice.total_amount)===null||_invoice$total_amount4===void 0?void 0:_invoice$total_amount4.toFixed(2))||'0.00',\"</td>\\n                <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(((_invoice$items=invoice.items)===null||_invoice$items===void 0?void 0:_invoice$items.length)||0,\"</td>\\n              </tr>\\n            \");}).join(''),\"\\n          </tbody>\\n        </table>\\n\\n        <h3 style=\\\"color: #333; margin-bottom: 10px;\\\">\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A:</h3>\\n        <table style=\\\"width: 100%; border-collapse: collapse; margin-bottom: 20px;\\\">\\n          <thead>\\n            <tr style=\\\"background-color: #f0f0f0;\\\">\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0627\\u0644\\u0645\\u0642\\u0627\\u0633</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0627\\u0644\\u062E\\u0627\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\\u0629</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629</th>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            \").concat(workOrderInvoices.map(invoice=>{var _invoice$items2;return((_invoice$items2=invoice.items)===null||_invoice$items2===void 0?void 0:_invoice$items2.map(item=>\"\\n                <tr>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\".concat(invoice.invoice_number,\"</td>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(item.local_product_details?item.local_product_details.product_type:item.seal_type||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',\"</td>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(item.local_product_details?'Ù…Ø­Ù„ÙŠ':item.material_type||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',\"</td>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(item.local_product_details?\"\".concat(item.local_product_details.product_size,\" - \").concat(item.local_product_details.product_type):item.inner_diameter&&item.outer_diameter&&item.height?\"\".concat(item.inner_diameter,\" \\xD7 \").concat(item.outer_diameter,\" \\xD7 \").concat(item.height).concat(item.wall_height?\" (\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629: \".concat(item.wall_height,\")\"):''):'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',\"</td>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(item.quantity,\"</td>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(item.local_product_details?'Ù…Ø­Ù„ÙŠ':item.material_used||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',\"</td>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\n                    \").concat(item.local_product_details?'Ù…Ø­Ù„ÙŠ':item.material_details?item.material_details.is_finished_product?'Ù…Ø®Ø²Ù† Ø§Ù†ØªØ§Ø¬ ØªØ§Ù…':\"\".concat(item.material_details.unit_code,\" / \").concat(item.material_details.inner_diameter,\"-\").concat(item.material_details.outer_diameter):\"\".concat(item.material_used||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',\" / \\u0645\\u0639\\u0644\\u0648\\u0645\\u0627\\u062A \\u063A\\u064A\\u0631 \\u0645\\u062A\\u0648\\u0641\\u0631\\u0629\"),\"\\n                  </td>\\n                </tr>\\n              \")).join(''))||'';}).join(''),\"\\n          </tbody>\\n        </table>\\n        \\n        <div style=\\\"margin-top: 40px; border-top: 1px solid #ddd; padding-top: 20px;\\\">\\n          <div style=\\\"float: left;\\\">\\n            <strong>\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639:</strong><br>\\n            <div style=\\\"margin-top: 10px; height: 50px; border: 1px solid #ddd;\\\"></div>\\n          </div>\\n          <div style=\\\"float: right;\\\">\\n            <strong>\\u062A\\u0648\\u0642\\u064A\\u0639 \\u0627\\u0644\\u0645\\u0633\\u0624\\u0648\\u0644:</strong><br>\\n            <div style=\\\"margin-top: 10px; height: 50px; border: 1px solid #ddd; width: 150px;\\\"></div>\\n          </div>\\n          <div style=\\\"clear: both;\\\"></div>\\n        </div>\\n      </div>\\n    \");const printWindow=window.open('','_blank');printWindow.document.write(printContent);printWindow.document.close();printWindow.print();};const clearAllWorkOrders=async()=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´ØºÙ„ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.'))return;try{await axios.delete(\"\".concat(API,\"/work-orders/clear-all\"));fetchWorkOrders();alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´ØºÙ„');}catch(error){console.error('Error clearing work orders:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');}};const deleteWorkOrder=async workOrderId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ù‡Ø°Ø§ØŸ'))return;try{await axios.delete(\"\".concat(API,\"/work-orders/\").concat(workOrderId));fetchWorkOrders();alert('ØªÙ… Ø­Ø°Ù Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error deleting work order:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-4\",children:\"\\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:clearAllWorkOrders,className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{fetchWorkOrders();fetchInvoices();},className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddToExisting(!showAddToExisting),className:\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\",children:showAddToExisting?'Ø¥Ø®ÙØ§Ø¡':'Ø¥Ø¶Ø§ÙØ© ÙØ§ØªÙˆØ±Ø© Ù„Ø£Ù…Ø± Ù…ÙˆØ¬ÙˆØ¯'}),/*#__PURE__*/_jsxs(\"select\",{className:\"border border-gray-300 rounded px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"\\u064A\\u0648\\u0645\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0623\\u0633\\u0628\\u0648\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0634\\u0647\\u0631\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0633\\u0646\\u0648\\u064A\"})]})]})]}),showAddToExisting&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 p-6 rounded-lg shadow-md mb-6 border border-yellow-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4 text-yellow-800\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0625\\u0644\\u0649 \\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 \\u0645\\u0648\\u062C\\u0648\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedWorkOrderId,onChange:e=>setSelectedWorkOrderId(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644\"}),workOrders.map(workOrder=>{var _workOrder$invoices2;return/*#__PURE__*/_jsxs(\"option\",{value:workOrder.id,children:[workOrder.title||\"\\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 #\".concat(workOrder.id.slice(-8)),\"(\",((_workOrder$invoices2=workOrder.invoices)===null||_workOrder$invoices2===void 0?void 0:_workOrder$invoices2.length)||0,\" \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629)\"]},workOrder.id);})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedInvoiceForAdd,onChange:e=>setSelectedInvoiceForAdd(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",disabled:!selectedWorkOrderId,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),getAvailableInvoicesForAdd().map(invoice=>{var _invoice$total_amount5;return/*#__PURE__*/_jsxs(\"option\",{value:invoice.id,children:[invoice.invoice_number,\" - \",invoice.customer_name,\"(\\u062C.\\u0645 \",((_invoice$total_amount5=invoice.total_amount)===null||_invoice$total_amount5===void 0?void 0:_invoice$total_amount5.toFixed(2))||'0.00',\")\"]},invoice.id);})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:addInvoiceToExistingWorkOrder,className:\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\",disabled:!selectedWorkOrderId||!selectedInvoiceForAdd,children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowAddToExisting(false);setSelectedWorkOrderId('');setSelectedInvoiceForAdd('');},className:\"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0646\\u0634\\u0627\\u0621 \\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 \\u062C\\u062F\\u064A\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644 *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newWorkOrder.title,onChange:e=>setNewWorkOrder(_objectSpread(_objectSpread({},newWorkOrder),{},{title:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0645\\u062B\\u0627\\u0644: \\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 \\u0631\\u0642\\u0645 1 - \\u064A\\u0646\\u0627\\u064A\\u0631 2025\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0623\\u0648\\u0644\\u0648\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"select\",{value:newWorkOrder.priority,onChange:e=>setNewWorkOrder(_objectSpread(_objectSpread({},newWorkOrder),{},{priority:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u0639\\u0627\\u062F\\u064A\",children:\"\\u0639\\u0627\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0645\\u0647\\u0645\",children:\"\\u0645\\u0647\\u0645\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0637\\u0627\\u0631\\u0626\",children:\"\\u0637\\u0627\\u0631\\u0626\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062E\\u062A\\u0627\\u0631\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-gray-100 rounded\",children:[selectedInvoices.length,\" \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0645\\u062D\\u062F\\u062F\\u0629\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0648\\u0635\\u0641 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644\"}),/*#__PURE__*/_jsx(\"textarea\",{value:newWorkOrder.description,onChange:e=>setNewWorkOrder(_objectSpread(_objectSpread({},newWorkOrder),{},{description:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded h-20\",placeholder:\"\\u0648\\u0635\\u0641 \\u0625\\u0636\\u0627\\u0641\\u064A (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4 max-h-60 overflow-y-auto border rounded p-4\",children:getAvailableInvoices().map(invoice=>{var _invoice$total_amount6,_invoice$items3;return/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-3 cursor-pointer transition-colors \".concat(selectedInvoices.includes(invoice.id)?'border-blue-500 bg-blue-50':'border-gray-300 hover:bg-gray-50'),onClick:()=>toggleInvoiceSelection(invoice.id),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedInvoices.includes(invoice.id),onChange:()=>{},className:\"ml-2\"}),/*#__PURE__*/_jsx(\"h5\",{className:\"font-semibold\",children:invoice.invoice_number})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644: \",invoice.customer_name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E: \",new Date(invoice.date).toLocaleDateString('ar-EG')]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium\",children:[\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A: \\u062C.\\u0645 \",((_invoice$total_amount6=invoice.total_amount)===null||_invoice$total_amount6===void 0?void 0:_invoice$total_amount6.toFixed(2))||'0.00']}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A: \",((_invoice$items3=invoice.items)===null||_invoice$items3===void 0?void 0:_invoice$items3.length)||0,\" \\u0635\\u0646\\u0641\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-block px-2 py-1 rounded text-xs mt-1 \".concat(invoice.status==='ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°'?'bg-green-100 text-green-800':'bg-blue-100 text-blue-800'),children:invoice.status})]},invoice.id);})}),getAvailableInvoices().length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0645\\u062A\\u0627\\u062D\\u0629 \\u0644\\u0625\\u0646\\u0634\\u0627\\u0621 \\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644\"}),selectedInvoices.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-3 bg-blue-100 rounded\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-semibold text-blue-800\",children:\"\\u0645\\u0644\\u062E\\u0635 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644:\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-700\",children:[\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631: \",selectedInvoices.length,\" \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-700\",children:[\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A: \\u062C.\\u0645 \",invoices.filter(inv=>selectedInvoices.includes(inv.id)).reduce((sum,inv)=>sum+(inv.total_amount||0),0).toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-700\",children:[\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A: \",invoices.filter(inv=>selectedInvoices.includes(inv.id)).reduce((sum,inv)=>{var _inv$items3;return sum+(((_inv$items3=inv.items)===null||_inv$items3===void 0?void 0:_inv$items3.length)||0);},0),\" \\u0635\\u0646\\u0641\"]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:createWorkOrderFromMultipleInvoices,className:\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\",disabled:selectedInvoices.length===0,children:[\"\\u0625\\u0646\\u0634\\u0627\\u0621 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644 (\",selectedInvoices.length,\" \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold mb-4\",children:[\"\\u0623\\u0648\\u0627\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644 (\",workOrders.length,\")\"]}),workOrders.map(workOrder=>{var _workOrder$total_amou;// Handle both single invoice and multiple invoices work orders\nconst workOrderInvoices=workOrder.invoices||(workOrder.invoice_id?[getInvoiceDetails(workOrder.invoice_id)]:[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-lg\",children:workOrder.title||\"\\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 #\".concat(workOrder.id.slice(-8))}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0623\\u0648\\u0644\\u0648\\u064A\\u0629:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mr-2 px-2 py-1 rounded text-sm \".concat(workOrder.priority==='Ø·Ø§Ø±Ø¦'?'bg-red-100 text-red-800':workOrder.priority==='Ù…Ù‡Ù…'?'bg-yellow-100 text-yellow-800':'bg-blue-100 text-blue-800'),children:workOrder.priority||'Ø¹Ø§Ø¯ÙŠ'})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u062A\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u0625\\u0646\\u0634\\u0627\\u0621:\"}),\" \",new Date(workOrder.created_at).toLocaleDateString('ar-EG')]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631:\"}),\" \",workOrderInvoices.filter(inv=>inv).length]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mr-2 px-2 py-1 rounded text-sm bg-blue-100 text-blue-800\",children:workOrder.status||'Ø¬Ø¯ÙŠØ¯'})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A:\"}),\"\\u062C.\\u0645 \",((_workOrder$total_amou=workOrder.total_amount)===null||_workOrder$total_amou===void 0?void 0:_workOrder$total_amou.toFixed(2))||workOrderInvoices.reduce((sum,inv)=>sum+((inv===null||inv===void 0?void 0:inv.total_amount)||0),0).toFixed(2)]}),workOrder.description&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0648\\u0635\\u0641:\"}),\" \",workOrder.description]}),workOrder.supervisor_name&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0645\\u0634\\u0631\\u0641 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639:\"}),\" \",workOrder.supervisor_name]}),workOrder.is_daily&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0623\\u0645\\u0631:\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600\",children:\"\\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 \\u064A\\u0648\\u0645\\u064A \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium mb-2\",children:\"\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062F\\u0631\\u062C\\u0629:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\",children:workOrderInvoices.filter(invoice=>invoice).map((invoice,index)=>{var _invoice$total_amount7,_invoice$items4;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-3 rounded border\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629:\"}),\" \",invoice.invoice_number]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644:\"}),\" \",invoice.customer_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A:\"}),\" \\u062C.\\u0645 \",((_invoice$total_amount7=invoice.total_amount)===null||_invoice$total_amount7===void 0?void 0:_invoice$total_amount7.toFixed(2))||'0.00']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A:\"}),\" \",((_invoice$items4=invoice.items)===null||_invoice$items4===void 0?void 0:_invoice$items4.length)||0,\" \\u0635\\u0646\\u0641\"]})]},index);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto mb-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium mb-2\",children:\"\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A:\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0642\\u0627\\u0633\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062E\\u0627\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:workOrderInvoices.filter(invoice=>invoice).map(invoice=>{var _invoice$items5;return((_invoice$items5=invoice.items)===null||_invoice$items5===void 0?void 0:_invoice$items5.map((item,itemIndex)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.invoice_number}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.seal_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.material_type}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[item.inner_diameter,\" \\xD7 \",item.outer_diameter,\" \\xD7 \",item.height]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.quantity}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.material_details?item.material_details.is_finished_product?/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm\",children:\"\\u0645\\u0646\\u062A\\u062C \\u062C\\u0627\\u0647\\u0632\"}):/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 bg-green-100 text-green-800 rounded text-sm\",children:item.material_details.material_type}):/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 bg-green-100 text-green-800 rounded text-sm\",children:item.material_used||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"font-mono text-sm\",children:item.material_details?item.material_details.is_finished_product?/*#__PURE__*/_jsx(\"div\",{className:\"text-center font-semibold text-blue-600\",children:\"\\u0645\\u062E\\u0632\\u0646 \\u0627\\u0646\\u062A\\u0627\\u062C \\u062A\\u0627\\u0645\"}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold\",children:item.unit_code_display||item.material_details.unit_code}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-600\",children:[item.material_details.inner_diameter,\" - \",item.material_details.outer_diameter]})]}):/*#__PURE__*/// Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø£Ùˆ Ø¹Ù†Ø¯Ù…Ø§ Ù„Ø§ ØªÙˆØ¬Ø¯ material_details\n_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold\",children:item.material_used||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-600\",children:\"\\u0645\\u0639\\u0644\\u0648\\u0645\\u0627\\u062A \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629 \\u063A\\u064A\\u0631 \\u0645\\u062A\\u0648\\u0641\\u0631\\u0629\"})]})})})]},\"\".concat(invoice.id,\"-\").concat(itemIndex))))||[];})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>printWorkOrder(workOrder),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644 \\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedWorkOrderId(workOrder.id);setShowAddToExisting(true);},className:\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteWorkOrder(workOrder.id),className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641\"})]})]},workOrder.id);}),workOrders.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0623\\u0648\\u0627\\u0645\\u0631 \\u0634\\u063A\\u0644\"})]})]});};// Treasury Management Component\nconst Treasury=()=>{const{user}=useAuth();// Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ\nconst[accounts,setAccounts]=useState([{id:'cash',name:'Ù†Ù‚Ø¯ÙŠ',balance:0,transactions:[]},{id:'vodafone_elsawy',name:'ÙÙˆØ¯Ø§ÙÙˆÙ† 010',balance:0,transactions:[]},{id:'vodafone_wael',name:'ÙƒØ§Ø´ 0100',balance:0,transactions:[]},{id:'deferred',name:'Ø¢Ø¬Ù„',balance:0,transactions:[]},{id:'instapay',name:'Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ',balance:0,transactions:[]},{id:'yad_elsawy',name:'ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ',balance:0,transactions:[]}]);const[selectedAccount,setSelectedAccount]=useState('cash');const[showTransferModal,setShowTransferModal]=useState(false);const[transferData,setTransferData]=useState({from:'cash',to:'vodafone_elsawy',amount:'',notes:''});const[manualTransaction,setManualTransaction]=useState({account:'cash',type:'income',// income or expense\namount:'',description:'',notes:''});const[showManualForm,setShowManualForm]=useState(false);const[searchTerm,setSearchTerm]=useState('');// Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø­Ø«\nuseEffect(()=>{fetchTreasuryData();},[]);const fetchTreasuryData=async()=>{try{// Fetch balances and transactions from backend\nconst balancesResponse=await axios.get(\"\".concat(API,\"/treasury/balances\"));const transactionsResponse=await axios.get(\"\".concat(API,\"/treasury/transactions\"));const invoicesResponse=await axios.get(\"\".concat(API,\"/invoices\"));const expensesResponse=await axios.get(\"\".concat(API,\"/expenses\"));const balances=balancesResponse.data;const manualTransactions=transactionsResponse.data;const invoices=invoicesResponse.data;const expenses=expensesResponse.data;// Update accounts with balances and transactions\nconst updatedAccounts=accounts.map(account=>{let transactions=[];// Add invoice transactions\ninvoices.forEach(invoice=>{const paymentMethodMap={'Ù†Ù‚Ø¯ÙŠ':'cash','ÙÙˆØ¯Ø§ÙÙˆÙ† 010':'vodafone_elsawy','ÙƒØ§Ø´ 0100':'vodafone_wael','Ø¢Ø¬Ù„':'deferred','Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ':'instapay','ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ':'yad_elsawy'};if(paymentMethodMap[invoice.payment_method]===account.id){transactions.push({id:\"inv-\".concat(invoice.id),type:'income',amount:invoice.total_amount||0,description:\"\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0631\\u0642\\u0645 \".concat(invoice.invoice_number),date:invoice.date,reference:\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644: \".concat(invoice.customer_name)});}});// Add expense transactions (only from cash account)\nif(account.id==='cash'){expenses.forEach(expense=>{transactions.push({id:\"exp-\".concat(expense.id),type:'expense',amount:expense.amount||0,description:expense.description||'Ù…ØµØ±ÙˆÙ',date:expense.date,category:expense.category});});}// Add manual transactions\nmanualTransactions.filter(transaction=>transaction.account_id===account.id).forEach(transaction=>{transactions.push({id:transaction.id,type:transaction.transaction_type,amount:transaction.amount,description:transaction.description,date:transaction.date,reference:transaction.reference});});return _objectSpread(_objectSpread({},account),{},{balance:balances[account.id]||0,transactions:transactions.sort((a,b)=>new Date(b.date)-new Date(a.date))});});setAccounts(updatedAccounts);}catch(error){console.error('Error fetching treasury data:',error);}};const handleTransfer=async()=>{if(!transferData.amount||parseFloat(transferData.amount)<=0){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');return;}const amount=parseFloat(transferData.amount);const fromAccount=accounts.find(acc=>acc.id===transferData.from);if(fromAccount.balance<amount){alert('Ø§Ù„Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙŠ');return;}try{await axios.post(\"\".concat(API,\"/treasury/transfer\"),{from_account:transferData.from,to_account:transferData.to,amount:amount,notes:transferData.notes});// Refresh data\nfetchTreasuryData();setShowTransferModal(false);setTransferData({from:'cash',to:'vodafone_elsawy',amount:'',notes:''});alert('ØªÙ… Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error processing transfer:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­ÙˆÙŠÙ„');}};const handleManualTransaction=async()=>{if(!manualTransaction.amount||parseFloat(manualTransaction.amount)<=0){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');return;}const amount=parseFloat(manualTransaction.amount);try{await axios.post(\"\".concat(API,\"/treasury/transactions\"),{account_id:manualTransaction.account,transaction_type:manualTransaction.type,amount:amount,description:manualTransaction.description,reference:manualTransaction.notes||'Ø¥Ø¯Ø®Ø§Ù„ ÙŠØ¯ÙˆÙŠ'});// Refresh data\nfetchTreasuryData();setShowManualForm(false);setManualTransaction({account:'cash',type:'income',amount:'',description:'',notes:''});alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error processing manual transaction:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');}};const clearAccount=async accountId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØµÙÙŠØ± Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.'))return;const account=accounts.find(acc=>acc.id===accountId);if(!account||account.balance===0){alert('Ø§Ù„Ø­Ø³Ø§Ø¨ ÙØ§Ø±Øº Ø¨Ø§Ù„ÙØ¹Ù„ Ø£Ùˆ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');return;}try{// If clearing \"ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ\", transfer to main treasury\nif(accountId==='yad_elsawy'){// Transfer to main treasury\nawait axios.post(\"\".concat(API,\"/main-treasury/transfer-from-yad?amount=\").concat(account.balance,\"&username=\").concat(user.username));}// Create expense transaction to zero the account\nawait axios.post(\"\".concat(API,\"/treasury/transactions\"),{account_id:accountId,transaction_type:'expense',amount:account.balance,description:\"\\u062A\\u0635\\u0641\\u064A\\u0631 \\u062D\\u0633\\u0627\\u0628 \".concat(account.name).concat(accountId==='yad_elsawy'?' (ØªÙ… Ø§Ù„ØªØ±Ø­ÙŠÙ„ Ù„Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©)':''),reference:'ØªØµÙÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ù…Ø¯ÙŠØ±'});// Refresh data\nfetchTreasuryData();if(accountId==='yad_elsawy'){alert(\"\\u062A\\u0645 \\u062A\\u0635\\u0641\\u064A\\u0631 \\u062D\\u0633\\u0627\\u0628 \".concat(account.name,\" \\u0628\\u0646\\u062C\\u0627\\u062D \\u0648\\u062A\\u0631\\u062D\\u064A\\u0644 \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A \").concat(account.balance.toFixed(2),\" \\u062C.\\u0645 \\u0644\\u0644\\u062E\\u0632\\u0646\\u0629 \\u0627\\u0644\\u0631\\u0626\\u064A\\u0633\\u064A\\u0629\"));}else{alert(\"\\u062A\\u0645 \\u062A\\u0635\\u0641\\u064A\\u0631 \\u062D\\u0633\\u0627\\u0628 \".concat(account.name,\" \\u0628\\u0646\\u062C\\u0627\\u062D\"));}}catch(error){console.error('Error clearing account:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµÙÙŠØ± Ø§Ù„Ø­Ø³Ø§Ø¨');}};// Treasury Reset Function - Only for Elsawy\nconst resetTreasury=async()=>{if((user===null||user===void 0?void 0:user.username)!=='Elsawy'){alert('ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨ØªÙ†ÙÙŠØ° Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');return;}// Triple confirmation for this critical operation\nconst firstConfirm=confirm('âš ï¸ ØªØ­Ø°ÙŠØ±: Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø³ÙŠØ­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø²ÙŠÙ†Ø© ÙˆÙ„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!\\nÙ‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ');if(!firstConfirm)return;const secondConfirm=confirm('âš ï¸ ØªØ£ÙƒÙŠØ¯ Ø«Ø§Ù†ÙŠ: Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª ÙˆØ§Ù„Ø£Ø±ØµØ¯Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹!\\nØ§ÙƒØªØ¨ \"Ù†Ø¹Ù…\" Ù„Ù„ØªØ£ÙƒÙŠØ¯:');if(!secondConfirm)return;const finalConfirm=prompt('âš ï¸ Ù„Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØŒ Ø§ÙƒØªØ¨ Ø¨Ø§Ù„Ø¶Ø¨Ø·: \"Ø§Ø­Ø°Ù ÙƒÙ„ Ø´ÙŠØ¡\"');if(finalConfirm!=='Ø§Ø­Ø°Ù ÙƒÙ„ Ø´ÙŠØ¡'){alert('ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');return;}try{const response=await axios.post(\"\".concat(API,\"/treasury/reset\"),null,{params:{username:user.username}});alert(\"\\u2705 \\u062A\\u0645 \\u0645\\u0633\\u062D \\u062C\\u0645\\u064A\\u0639 \\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629 \\u0628\\u0646\\u062C\\u0627\\u062D!\\n\\u062A\\u0645 \\u062D\\u0630\\u0641 \".concat(response.data.deleted_treasury_transactions,\" \\u0645\\u0639\\u0627\\u0645\\u0644\\u0629\"));// Refresh data\nfetchTreasuryData();}catch(error){var _error$response22,_error$response22$dat;console.error('Error resetting treasury:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ù…Ø³Ø­ Ø§Ù„Ø®Ø²ÙŠÙ†Ø©: '+(((_error$response22=error.response)===null||_error$response22===void 0?void 0:(_error$response22$dat=_error$response22.data)===null||_error$response22$dat===void 0?void 0:_error$response22$dat.detail)||error.message));}};const selectedAccountData=accounts.find(acc=>acc.id===selectedAccount);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-4\",children:\"\\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629 - \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0623\\u0645\\u0648\\u0627\\u0644\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowTransferModal(true),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u062A\\u062D\\u0648\\u064A\\u0644 \\u0623\\u0645\\u0648\\u0627\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowManualForm(true),className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0639\\u0645\\u0644\\u064A\\u0629 \\u064A\\u062F\\u0648\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchTreasuryData,className:\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),(user===null||user===void 0?void 0:user.username)==='Elsawy'&&/*#__PURE__*/_jsx(\"button\",{onClick:resetTreasury,className:\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 font-bold border-2 border-red-800\",children:\"\\u26A0\\uFE0F \\u0645\\u0633\\u062D \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629 \\u0628\\u0627\\u0644\\u0643\\u0627\\u0645\\u0644\"}),(user===null||user===void 0?void 0:user.username)==='Elsawy'&&selectedAccount==='yad_elsawy'&&(selectedAccountData===null||selectedAccountData===void 0?void 0:selectedAccountData.balance)>0&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>clearAccount(selectedAccount),className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062A\\u0635\\u0641\\u064A\\u0631 \\u062D\\u0633\\u0627\\u0628 \\u064A\\u062F \\u0627\\u0644\\u0635\\u0627\\u0648\\u064A\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-6\",children:accounts.map(account=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 rounded-lg shadow cursor-pointer transition-colors \".concat(selectedAccount===account.id?'bg-blue-100 border-2 border-blue-500':'bg-white hover:bg-gray-50'),onClick:()=>setSelectedAccount(account.id),children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-800 mb-2\",children:account.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold \".concat(account.balance>=0?'text-green-600':'text-red-600'),children:[\"\\u062C.\\u0645 \",account.balance.toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:[account.transactions.length,\" \\u0639\\u0645\\u0644\\u064A\\u0629\"]})]},account.id))}),selectedAccountData&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold mb-4\",children:[\"\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644 \\u062D\\u0633\\u0627\\u0628: \",selectedAccountData.name]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"\\u0627\\u0644\\u0628\\u062D\\u062B \\u0641\\u064A \\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0627\\u062A...\",className:\"w-full p-3 border border-gray-300 rounded-lg\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0646\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0648\\u0635\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0631\\u062C\\u0639\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:selectedAccountData.transactions.filter(transaction=>transaction.description.toLowerCase().includes(searchTerm.toLowerCase())||transaction.reference&&transaction.reference.toLowerCase().includes(searchTerm.toLowerCase())||transaction.category&&transaction.category.toLowerCase().includes(searchTerm.toLowerCase())).map((transaction,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(transaction.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-xs \".concat(transaction.type==='income'?'bg-green-100 text-green-800':transaction.type==='expense'?'bg-red-100 text-red-800':transaction.type==='transfer_in'?'bg-blue-100 text-blue-800':'bg-orange-100 text-orange-800'),children:transaction.type==='income'?'Ø¯Ø®Ù„':transaction.type==='expense'?'Ù…ØµØ±ÙˆÙ':transaction.type==='transfer_in'?'ØªØ­ÙˆÙŠÙ„ ÙˆØ§Ø±Ø¯':'ØªØ­ÙˆÙŠÙ„ ØµØ§Ø¯Ø±'})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.description}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:transaction.type==='income'||transaction.type==='transfer_in'?'text-green-600 font-semibold':'text-red-600 font-semibold',children:[transaction.type==='income'||transaction.type==='transfer_in'?'+':'-',\"\\u062C.\\u0645 \",transaction.amount.toFixed(2)]})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-sm text-gray-600\",children:transaction.reference||transaction.category||'-'})]},transaction.id||index))})]}),selectedAccountData.transactions.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0639\\u0645\\u0644\\u064A\\u0627\\u062A \\u0644\\u0647\\u0630\\u0627 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\"})]})]}),showTransferModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u062A\\u062D\\u0648\\u064A\\u0644 \\u0623\\u0645\\u0648\\u0627\\u0644 \\u0628\\u064A\\u0646 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0646 \\u062D\\u0633\\u0627\\u0628\"}),/*#__PURE__*/_jsx(\"select\",{value:transferData.from,onChange:e=>setTransferData(_objectSpread(_objectSpread({},transferData),{},{from:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:accounts.map(account=>/*#__PURE__*/_jsxs(\"option\",{value:account.id,children:[account.name,\" (\\u062C.\\u0645 \",account.balance.toFixed(2),\")\"]},account.id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0625\\u0644\\u0649 \\u062D\\u0633\\u0627\\u0628\"}),/*#__PURE__*/_jsx(\"select\",{value:transferData.to,onChange:e=>setTransferData(_objectSpread(_objectSpread({},transferData),{},{to:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:accounts.filter(acc=>acc.id!==transferData.from).map(account=>/*#__PURE__*/_jsx(\"option\",{value:account.id,children:account.name},account.id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:transferData.amount,onChange:e=>setTransferData(_objectSpread(_objectSpread({},transferData),{},{amount:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"0.00\",min:\"0\",step:\"0.01\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:transferData.notes,onChange:e=>setTransferData(_objectSpread(_objectSpread({},transferData),{},{notes:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0625\\u0636\\u0627\\u0641\\u064A\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleTransfer,className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u062A\\u0623\\u0643\\u064A\\u062F \\u0627\\u0644\\u062A\\u062D\\u0648\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowTransferModal(false),className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]})}),showManualForm&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0639\\u0645\\u0644\\u064A\\u0629 \\u064A\\u062F\\u0648\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\"}),/*#__PURE__*/_jsx(\"select\",{value:manualTransaction.account,onChange:e=>setManualTransaction(_objectSpread(_objectSpread({},manualTransaction),{},{account:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:accounts.map(account=>/*#__PURE__*/_jsx(\"option\",{value:account.id,children:account.name},account.id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"select\",{value:manualTransaction.type,onChange:e=>setManualTransaction(_objectSpread(_objectSpread({},manualTransaction),{},{type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"income\",children:\"\\u062F\\u062E\\u0644\"}),/*#__PURE__*/_jsx(\"option\",{value:\"expense\",children:\"\\u0645\\u0635\\u0631\\u0648\\u0641\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:manualTransaction.amount,onChange:e=>setManualTransaction(_objectSpread(_objectSpread({},manualTransaction),{},{amount:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"0.00\",min:\"0\",step:\"0.01\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0648\\u0635\\u0641\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:manualTransaction.description,onChange:e=>setManualTransaction(_objectSpread(_objectSpread({},manualTransaction),{},{description:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0648\\u0635\\u0641 \\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:manualTransaction.notes,onChange:e=>setManualTransaction(_objectSpread(_objectSpread({},manualTransaction),{},{notes:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0625\\u0636\\u0627\\u0641\\u064A\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleManualTransaction,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowManualForm(false),className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]})})]});};// Backup and Restore Component\nconst Backup=()=>{const[backups,setBackups]=useState([]);const[driveFiles,setDriveFiles]=useState([]);const[driveStatus,setDriveStatus]=useState(null);const[loading,setLoading]=useState(false);const[creating,setCreating]=useState(false);const[activeTab,setActiveTab]=useState('local');// 'local' or 'drive'\nconst{user}=useAuth();// Bulk deletion states\nconst[showDeleteModal,setShowDeleteModal]=useState(false);const[deletePassword,setDeletePassword]=useState('');const[deleteType,setDeleteType]=useState('');// 'date', 'last-1', 'last-2'\nconst[deleteDate,setDeleteDate]=useState('');useEffect(()=>{fetchBackups();fetchDriveStatus();},[]);const fetchBackups=async()=>{setLoading(true);try{const response=await axios.get(\"\".concat(API,\"/backup/list\"));setBackups(response.data||[]);}catch(error){console.error('Error fetching backups:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©');}finally{setLoading(false);}};const fetchDriveStatus=async()=>{try{const response=await axios.get(\"\".concat(API,\"/backup/drive/status\"));setDriveStatus(response.data);}catch(error){console.error('Error fetching drive status:',error);}};const fetchDriveFiles=async()=>{setLoading(true);try{const response=await axios.get(\"\".concat(API,\"/backup/drive/list\"));setDriveFiles(response.data.files||[]);}catch(error){console.error('Error fetching drive files:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ù…Ù„ÙØ§Øª Google Drive');}finally{setLoading(false);}};// Bulk deletion functions\nconst openDeleteModal=type=>{if((user===null||user===void 0?void 0:user.username)!=='Elsawy'){alert('ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨ØªÙ†ÙÙŠØ° Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');return;}setDeleteType(type);setDeletePassword('');setDeleteDate('');setShowDeleteModal(true);};const handleBulkDelete=async()=>{if(!deletePassword){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');return;}if(deleteType==='date'&&!deleteDate){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªØ§Ø±ÙŠØ®');return;}const confirmMessage=deleteType==='date'?\"\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u062D\\u0630\\u0641 \\u062C\\u0645\\u064A\\u0639 \\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u064A\\u0648\\u0645 \".concat(deleteDate,\"\\u061F\\n\\n\\u26A0\\uFE0F \\u0633\\u064A\\u062A\\u0645:\\n\\u2022 \\u0646\\u0642\\u0644 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0644\\u0644\\u0645\\u062D\\u0630\\u0648\\u0641\\u0629\\n\\u2022 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0644\\u0644\\u0645\\u062E\\u0632\\u0646\\n\\u2022 \\u0639\\u0643\\u0633 \\u0639\\u0645\\u0644\\u064A\\u0627\\u062A \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629\"):deleteType==='last-1'?\"\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u062D\\u0630\\u0641 \\u0622\\u062E\\u0631 \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\\u061F\\n\\n\\u26A0\\uFE0F \\u0633\\u064A\\u062A\\u0645:\\n\\u2022 \\u0646\\u0642\\u0644 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0644\\u0644\\u0645\\u062D\\u0630\\u0648\\u0641\\u0629\\n\\u2022 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0644\\u0644\\u0645\\u062E\\u0632\\u0646\\n\\u2022 \\u0639\\u0643\\u0633 \\u0639\\u0645\\u0644\\u064A\\u0627\\u062A \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629\":\"\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u062D\\u0630\\u0641 \\u0622\\u062E\\u0631 \\u0641\\u0627\\u062A\\u0648\\u0631\\u062A\\u064A\\u0646\\u061F\\n\\n\\u26A0\\uFE0F \\u0633\\u064A\\u062A\\u0645:\\n\\u2022 \\u0646\\u0642\\u0644 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0644\\u0644\\u0645\\u062D\\u0630\\u0648\\u0641\\u0629\\n\\u2022 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0644\\u0644\\u0645\\u062E\\u0632\\u0646\\n\\u2022 \\u0639\\u0643\\u0633 \\u0639\\u0645\\u0644\\u064A\\u0627\\u062A \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629\";if(!confirm(confirmMessage)){return;}setLoading(true);try{let response;if(deleteType==='date'){response=await axios.post(\"\".concat(API,\"/invoices/bulk-delete-by-date\"),null,{params:{date:deleteDate,password:deletePassword,username:user.username}});}else{const count=deleteType==='last-1'?1:2;response=await axios.post(\"\".concat(API,\"/invoices/bulk-delete-last\"),null,{params:{count:count,password:deletePassword,username:user.username}});}// Show detailed results\nconst data=response.data;let message=\"\\u2705 \".concat(data.message,\"\\n\\n\\u0639\\u062F\\u062F \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062D\\u0630\\u0648\\u0641\\u0629: \").concat(data.deleted_count,\"\\n\\n\");if(data.invoices&&data.invoices.length>0){message+='Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©:\\n';data.invoices.forEach(inv=>{message+=\"\\u2022 \".concat(inv.invoice_number,\" - \").concat(inv.customer_name,\" - \").concat(inv.total_amount,\" \\u062C.\\u0645\\n\");});}alert(message);setShowDeleteModal(false);setDeletePassword('');setDeleteDate('');}catch(error){var _error$response23,_error$response23$dat;console.error('Error deleting invoices:',error);alert(((_error$response23=error.response)===null||_error$response23===void 0?void 0:(_error$response23$dat=_error$response23.data)===null||_error$response23$dat===void 0?void 0:_error$response23$dat.detail)||'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ÙÙˆØ§ØªÙŠØ±');}finally{setLoading(false);}};const checkBackupStatus=async function(backupId){let attempts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;try{const response=await axios.get(\"\".concat(API,\"/backup/status/\").concat(backupId));const status=response.data.status;if(status==='completed'||status==='completed_with_drive'){setCreating(false);let message=\"\\u2705 \\u062A\\u0645 \\u0625\\u0646\\u0634\\u0627\\u0621 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0628\\u0646\\u062C\\u0627\\u062D!\\n\\n\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0633\\u062A\\u0646\\u062F\\u0627\\u062A: \".concat(response.data.total_documents);if(status==='completed_with_drive'){message+='\\n\\nğŸŒ ØªÙ… Ø§Ù„Ø±ÙØ¹ Ø¥Ù„Ù‰ Google Drive Ø¨Ù†Ø¬Ø§Ø­!';}alert(message);fetchBackups();fetchDriveFiles();}else if(status==='failed'){setCreating(false);alert('âŒ ÙØ´Ù„Øª Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ\\n\\n'+(response.data.error||'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'));fetchBackups();}else if(status==='in_progress'&&attempts<60){// Keep checking every 2 seconds for up to 2 minutes\nsetTimeout(()=>checkBackupStatus(backupId,attempts+1),2000);}else{// Timeout after 2 minutes\nsetCreating(false);alert('â±ï¸ Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©.');fetchBackups();}}catch(error){console.error('Error checking backup status:',error);if(attempts<60){setTimeout(()=>checkBackupStatus(backupId,attempts+1),2000);}else{setCreating(false);fetchBackups();}}};const createBackup=async()=>{if(!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ø­Ù„ÙŠØ© Ø§Ù„Ø¢Ù†ØŸ')){return;}setCreating(true);try{const response=await axios.post(\"\".concat(API,\"/backup/create\"),null,{params:{username:user===null||user===void 0?void 0:user.username}});// Start polling for status\nif(response.data.backup_id){alert(\"\\u23F3 \".concat(response.data.message,\"\\n\\n\\u0633\\u064A\\u062A\\u0645 \\u062A\\u062D\\u062F\\u064A\\u062B \\u0627\\u0644\\u0642\\u0627\\u0626\\u0645\\u0629 \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0627\\u064B \\u0639\\u0646\\u062F \\u0627\\u0644\\u0627\\u0646\\u062A\\u0647\\u0627\\u0621.\"));checkBackupStatus(response.data.backup_id);}else{setCreating(false);alert('âŒ ÙØ´Ù„ ÙÙŠ Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ');}}catch(error){var _error$response24,_error$response24$dat;console.error('Error creating backup:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: '+(((_error$response24=error.response)===null||_error$response24===void 0?void 0:(_error$response24$dat=_error$response24.data)===null||_error$response24$dat===void 0?void 0:_error$response24$dat.detail)||error.message));setCreating(false);}};const downloadBackup=async(backupId,createdAt)=>{try{const response=await axios.get(\"\".concat(API,\"/backup/download/\").concat(backupId),{responseType:'blob'});// Create download link\nconst timestamp=new Date(createdAt).toISOString().replace(/[:.]/g,'-').slice(0,-5);const filename=\"backup_\".concat(timestamp,\".json\");const url=window.URL.createObjectURL(new Blob([response.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download',filename);document.body.appendChild(link);link.click();link.remove();window.URL.revokeObjectURL(url);alert('âœ… ØªÙ… ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!');}catch(error){var _error$response25,_error$response25$dat;console.error('Error downloading backup:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙ†Ø²ÙŠÙ„: '+(((_error$response25=error.response)===null||_error$response25===void 0?void 0:(_error$response25$dat=_error$response25.data)===null||_error$response25$dat===void 0?void 0:_error$response25$dat.detail)||error.message));}};const handleFileUpload=async event=>{const file=event.target.files[0];if(!file)return;// Check file type\nif(!file.name.endsWith('.json')){alert('âŒ ÙŠØ¬Ø¨ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù JSON');event.target.value='';return;}// Ask user what to do\nconst action=confirm(\"\\u062A\\u0645 \\u0627\\u062E\\u062A\\u064A\\u0627\\u0631: \".concat(file.name,\"\\n\\n\")+\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621:\\n\\n\"+\"\\u2705 \\u0645\\u0648\\u0627\\u0641\\u0642 = \\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0644\\u0644\\u0642\\u0627\\u0626\\u0645\\u0629 \\u0641\\u0642\\u0637 (\\u064A\\u0645\\u0643\\u0646\\u0643 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639\\u0647\\u0627 \\u0644\\u0627\\u062D\\u0642\\u0627\\u064B)\\n\"+\"\\u274C \\u0625\\u0644\\u063A\\u0627\\u0621 = \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0645\\u0628\\u0627\\u0634\\u0631\\u0629 (\\u0633\\u064A\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\\u0629)\\n\\n\"+\"\\u0645\\u0627\\u0630\\u0627 \\u062A\\u0631\\u064A\\u062F\\u061F\");if(action){// Add to list only\nawait uploadBackupFile(file,false);}else{// Ask for confirmation before restore\nif(confirm(\"\\u26A0\\uFE0F \\u062A\\u062D\\u0630\\u064A\\u0631!\\n\\n\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0645\\u0628\\u0627\\u0634\\u0631\\u0629\\u061F\\n\\n\\u0633\\u064A\\u062A\\u0645 \\u062D\\u0630\\u0641 \\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\\u0629!\\n\\n\\u0647\\u0630\\u0627 \\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621 \\u0644\\u0627 \\u064A\\u0645\\u0643\\u0646 \\u0627\\u0644\\u062A\\u0631\\u0627\\u062C\\u0639 \\u0639\\u0646\\u0647!\")){await uploadBackupFile(file,true);}}// Reset input\nevent.target.value='';};const uploadBackupFile=async(file,restoreDirectly)=>{setLoading(true);try{const formData=new FormData();formData.append('file',file);let response;if(restoreDirectly){// Restore directly\nresponse=await axios.post(\"\".concat(API,\"/backup/restore-from-file\"),formData,{params:{username:user===null||user===void 0?void 0:user.username},headers:{'Content-Type':'multipart/form-data'}});alert(\"\\u2705 \".concat(response.data.message,\"\\n\\n\")+\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\\u0627\\u062A \\u0627\\u0644\\u0645\\u0633\\u062A\\u0631\\u062C\\u0639\\u0629: \".concat(response.data.collections_restored,\"\\n\")+\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0633\\u062A\\u0646\\u062F\\u0627\\u062A: \".concat(response.data.total_documents,\"\\n\\n\")+\"\\u0633\\u064A\\u062A\\u0645 \\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644 \\u0627\\u0644\\u0635\\u0641\\u062D\\u0629...\");setTimeout(()=>window.location.reload(),2000);}else{// Upload to list\nresponse=await axios.post(\"\".concat(API,\"/backup/upload\"),formData,{headers:{'Content-Type':'multipart/form-data'}});alert(\"\\u2705 \".concat(response.data.message,\"\\n\\n\")+\"\\u064A\\u0645\\u0643\\u0646\\u0643 \\u0627\\u0644\\u0622\\u0646 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0647\\u0630\\u0647 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0645\\u0646 \\u0627\\u0644\\u0642\\u0627\\u0626\\u0645\\u0629\");fetchBackups();}}catch(error){var _error$response26,_error$response26$dat;console.error('Error uploading backup:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£: '+(((_error$response26=error.response)===null||_error$response26===void 0?void 0:(_error$response26$dat=_error$response26.data)===null||_error$response26$dat===void 0?void 0:_error$response26$dat.detail)||error.message));}finally{setLoading(false);}};const restoreBackup=async(backupId,createdAt)=>{if(!confirm(\"\\u26A0\\uFE0F \\u062A\\u062D\\u0630\\u064A\\u0631 \\u062E\\u0637\\u064A\\u0631!\\n\\n\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629\\u061F\\n\\n\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E: \".concat(new Date(createdAt).toLocaleString('ar-EG'),\"\\n\\n\\u0633\\u064A\\u062A\\u0645 \\u062D\\u0630\\u0641 \\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\\u0629 \\u0648\\u0627\\u0633\\u062A\\u0628\\u062F\\u0627\\u0644\\u0647\\u0627 \\u0628\\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629!\\n\\n\\u0647\\u0630\\u0627 \\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621 \\u0644\\u0627 \\u064A\\u0645\\u0643\\u0646 \\u0627\\u0644\\u062A\\u0631\\u0627\\u062C\\u0639 \\u0639\\u0646\\u0647!\"))){return;}// Second confirmation\nif(!confirm('ØªØ£ÙƒÙŠØ¯ Ù†Ù‡Ø§Ø¦ÙŠ: Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ ØªÙ…Ø§Ù…Ø§Ù‹ØŸ')){return;}setLoading(true);try{const response=await axios.post(\"\".concat(API,\"/backup/restore/\").concat(backupId),null,{params:{username:user===null||user===void 0?void 0:user.username}});alert(\"\\u2705 \".concat(response.data.message,\"\\n\\n\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\\u0627\\u062A \\u0627\\u0644\\u0645\\u0633\\u062A\\u0631\\u062C\\u0639\\u0629: \").concat(response.data.collections_restored,\"\\n\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0633\\u062A\\u0646\\u062F\\u0627\\u062A: \").concat(response.data.total_documents,\"\\n\\n\\u064A\\u064F\\u0646\\u0635\\u062D \\u0628\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644 \\u0627\\u0644\\u0635\\u0641\\u062D\\u0629.\"));// Reload page after successful restore\nif(confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø¢Ù†ØŸ')){window.location.reload();}}catch(error){var _error$response27,_error$response27$dat;console.error('Error restoring backup:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: '+(((_error$response27=error.response)===null||_error$response27===void 0?void 0:(_error$response27$dat=_error$response27.data)===null||_error$response27$dat===void 0?void 0:_error$response27$dat.detail)||error.message));}finally{setLoading(false);}};const deleteBackup=async(backupId,createdAt)=>{if(!confirm(\"\\u0647\\u0644 \\u062A\\u0631\\u064A\\u062F \\u062D\\u0630\\u0641 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629\\u061F\\n\\n\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E: \".concat(new Date(createdAt).toLocaleString('ar-EG'),\"\\n\\n\\u0647\\u0630\\u0627 \\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621 \\u0644\\u0627 \\u064A\\u0645\\u0643\\u0646 \\u0627\\u0644\\u062A\\u0631\\u0627\\u062C\\u0639 \\u0639\\u0646\\u0647!\"))){return;}try{await axios.delete(\"\".concat(API,\"/backup/\").concat(backupId));alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');fetchBackups();fetchDriveFiles();// Refresh Drive files too\n}catch(error){var _error$response28,_error$response28$dat;console.error('Error deleting backup:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: '+(((_error$response28=error.response)===null||_error$response28===void 0?void 0:(_error$response28$dat=_error$response28.data)===null||_error$response28$dat===void 0?void 0:_error$response28$dat.detail)||error.message));}};// Google Drive Functions\nconst uploadToDrive=async backupId=>{if(!(driveStatus!==null&&driveStatus!==void 0&&driveStatus.enabled)){alert('âŒ Google Drive ØºÙŠØ± Ù…ØªØµÙ„!\\n\\nÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Google Drive.');return;}try{const response=await axios.post(\"\".concat(API,\"/backup/\").concat(backupId,\"/upload-to-drive\"));alert(\"\\u2705 \".concat(response.data.message));fetchBackups();fetchDriveFiles();}catch(error){var _error$response29,_error$response29$dat;console.error('Error uploading to Drive:',error);let errorMsg='Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¹ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©:\\n\\n';if((_error$response29=error.response)!==null&&_error$response29!==void 0&&(_error$response29$dat=_error$response29.data)!==null&&_error$response29$dat!==void 0&&_error$response29$dat.detail){errorMsg+=error.response.data.detail;// Check for storage quota error\nif(error.response.data.detail.includes('storage quota')||error.response.data.detail.includes('403')){errorMsg+='\\n\\nğŸ’¡ Ø§Ù„Ø­Ù„:\\n';errorMsg+='1. Ø§ÙØªØ­ Google Drive\\n';errorMsg+='2. Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø¬Ù„Ø¯ \"Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„\"\\n';errorMsg+='3. Ø´Ø§Ø±Ùƒ Ø§Ù„Ù…Ø¬Ù„Ø¯ Ù…Ø¹:\\n   master-seal-backup@master-seal-backup.iam.gserviceaccount.com\\n';errorMsg+='4. Ø§Ø®ØªØ± ØµÙ„Ø§Ø­ÙŠØ© \"Editor\"';}}else{errorMsg+=error.message;}alert(errorMsg);}};const downloadFromDrive=async(fileId,fileName)=>{try{const response=await axios.get(\"\".concat(API,\"/backup/drive/download/\").concat(fileId),{responseType:'blob'});// Create download link\nconst url=window.URL.createObjectURL(new Blob([response.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download',fileName);document.body.appendChild(link);link.click();link.remove();alert('âœ… ØªÙ… ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response30,_error$response30$dat;console.error('Error downloading from Drive:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„Ù: '+(((_error$response30=error.response)===null||_error$response30===void 0?void 0:(_error$response30$dat=_error$response30.data)===null||_error$response30$dat===void 0?void 0:_error$response30$dat.detail)||error.message));}};const restoreFromDrive=async(fileId,fileName)=>{if(!confirm(\"\\u26A0\\uFE0F \\u062A\\u062D\\u0630\\u064A\\u0631!\\n\\n\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0645\\u0646 Google Drive\\u061F\\n\\n\\u0645\\u0644\\u0641: \".concat(fileName,\"\\n\\n\\u0633\\u064A\\u062A\\u0645 \\u062D\\u0630\\u0641 \\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\\u0629!\"))){return;}if(!confirm('ØªØ£ÙƒÙŠØ¯ Ù†Ù‡Ø§Ø¦ÙŠ: Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ ØªÙ…Ø§Ù…Ø§Ù‹ØŸ')){return;}setLoading(true);try{const response=await axios.post(\"\".concat(API,\"/backup/drive/restore/\").concat(fileId));alert(\"\\u2705 \".concat(response.data.message,\"\\n\\n\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\\u0627\\u062A \\u0627\\u0644\\u0645\\u0633\\u062A\\u0631\\u062C\\u0639\\u0629: \").concat(response.data.collections_restored,\"\\n\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0633\\u062A\\u0646\\u062F\\u0627\\u062A: \").concat(response.data.total_documents));if(confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø¢Ù†ØŸ')){window.location.reload();}}catch(error){var _error$response31,_error$response31$dat;console.error('Error restoring from Drive:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹: '+(((_error$response31=error.response)===null||_error$response31===void 0?void 0:(_error$response31$dat=_error$response31.data)===null||_error$response31$dat===void 0?void 0:_error$response31$dat.detail)||error.message));}finally{setLoading(false);}};const deleteFromDrive=async(fileId,fileName)=>{if(!confirm(\"\\u0647\\u0644 \\u062A\\u0631\\u064A\\u062F \\u062D\\u0630\\u0641 \\u0627\\u0644\\u0645\\u0644\\u0641 \\u0645\\u0646 Google Drive\\u061F\\n\\n\".concat(fileName,\"\\n\\n\\u0647\\u0630\\u0627 \\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621 \\u0644\\u0627 \\u064A\\u0645\\u0643\\u0646 \\u0627\\u0644\\u062A\\u0631\\u0627\\u062C\\u0639 \\u0639\\u0646\\u0647!\"))){return;}try{await axios.delete(\"\".concat(API,\"/backup/drive/\").concat(fileId));alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù„Ù Ù…Ù† Google Drive Ø¨Ù†Ø¬Ø§Ø­');fetchDriveFiles();}catch(error){var _error$response32,_error$response32$dat;console.error('Error deleting from Drive:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­Ø°Ù: '+(((_error$response32=error.response)===null||_error$response32===void 0?void 0:(_error$response32$dat=_error$response32.data)===null||_error$response32$dat===void 0?void 0:_error$response32$dat.detail)||error.message));}};// Switch tab and load data\nconst switchTab=tab=>{setActiveTab(tab);if(tab==='drive'&&driveFiles.length===0){fetchDriveFiles();}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0646\\u0633\\u062E \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse flex-wrap gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:createBackup,disabled:creating,className:\"px-6 py-2 rounded text-white \".concat(creating?'bg-gray-400 cursor-not-allowed':'bg-green-500 hover:bg-green-600'),children:creating?'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡...':'ğŸ’¾ Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø©'}),/*#__PURE__*/_jsxs(\"label\",{className:\"bg-purple-500 text-white px-6 py-2 rounded hover:bg-purple-600 cursor-pointer\",children:[\"\\uD83D\\uDCE4 \\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0646\\u0633\\u062E\\u0629\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".json\",onChange:handleFileUpload,className:\"hidden\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchBackups,disabled:loading,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\uD83D\\uDD04 \\u062A\\u062D\\u062F\\u064A\\u062B\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-lg mb-6 border-r-4 border-blue-500\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold mb-2\",children:\"\\uD83D\\uDCC5 \\u0627\\u0644\\u0646\\u0633\\u062E \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A \\u0627\\u0644\\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-700\",children:\"\\u064A\\u062A\\u0645 \\u0625\\u0646\\u0634\\u0627\\u0621 \\u0646\\u0633\\u062E\\u0629 \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0645\\u062D\\u0644\\u064A\\u0629 \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0627\\u064B \\u0643\\u0644 \\u064A\\u0648\\u0645 \\u0641\\u064A \\u062A\\u0645\\u0627\\u0645 \\u0627\\u0644\\u0633\\u0627\\u0639\\u0629 7:00 \\u0645\\u0633\\u0627\\u0621\\u064B. \\u064A\\u0645\\u0643\\u0646\\u0643 \\u062A\\u0646\\u0632\\u064A\\u0644 \\u0623\\u064A \\u0646\\u0633\\u062E\\u0629 \\u0648\\u0631\\u0641\\u0639\\u0647\\u0627 \\u064A\\u062F\\u0648\\u064A\\u0627\\u064B \\u0625\\u0644\\u0649 Google Drive \\u0623\\u0648 \\u0623\\u064A \\u062E\\u062F\\u0645\\u0629 \\u0633\\u062D\\u0627\\u0628\\u064A\\u0629 \\u0623\\u062E\\u0631\\u0649.\"})]}),(user===null||user===void 0?void 0:user.username)==='Elsawy'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-red-50 to-orange-100 p-6 rounded-lg mb-6 border-r-4 border-red-500\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-xl mb-4 flex items-center gap-2\",children:\"\\uD83D\\uDDD1\\uFE0F \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 - \\u062D\\u0630\\u0641 \\u062C\\u0645\\u0627\\u0639\\u064A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-700 mb-4\",children:[\"\\u26A0\\uFE0F \",/*#__PURE__*/_jsx(\"strong\",{children:\"\\u062A\\u062D\\u0630\\u064A\\u0631:\"}),\" \\u0639\\u0646\\u062F \\u0627\\u0644\\u062D\\u0630\\u0641 \\u0633\\u064A\\u062A\\u0645 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0644\\u0644\\u0645\\u062E\\u0632\\u0646 \\u0648\\u0639\\u0643\\u0633 \\u0639\\u0645\\u0644\\u064A\\u0627\\u062A \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629 \\u0648\\u0646\\u0642\\u0644 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0644\\u0644\\u0645\\u062D\\u0630\\u0648\\u0641\\u0629\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>openDeleteModal('date'),className:\"bg-red-500 hover:bg-red-600 text-white px-6 py-4 rounded-lg font-semibold transition-all flex items-center justify-center gap-2\",children:\"\\uD83D\\uDCC5 \\u062D\\u0630\\u0641 \\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u064A\\u0648\\u0645 \\u0645\\u0639\\u064A\\u0646\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>openDeleteModal('last-1'),className:\"bg-orange-500 hover:bg-orange-600 text-white px-6 py-4 rounded-lg font-semibold transition-all flex items-center justify-center gap-2\",children:\"\\uD83D\\uDD34 \\u062D\\u0630\\u0641 \\u0622\\u062E\\u0631 \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>openDeleteModal('last-2'),className:\"bg-orange-600 hover:bg-orange-700 text-white px-6 py-4 rounded-lg font-semibold transition-all flex items-center justify-center gap-2\",children:\"\\uD83D\\uDD34\\uD83D\\uDD34 \\u062D\\u0630\\u0641 \\u0622\\u062E\\u0631 \\u0641\\u0627\\u062A\\u0648\\u0631\\u062A\\u064A\\u0646\"})]})]}),showDeleteModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",dir:\"rtl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-8 max-w-md w-full shadow-2xl\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold mb-4 text-red-600\",children:\"\\u26A0\\uFE0F \\u062A\\u0623\\u0643\\u064A\\u062F \\u0627\\u0644\\u062D\\u0630\\u0641\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-4 bg-yellow-50 border-r-4 border-yellow-500 rounded\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-700\",children:deleteType==='date'?'ğŸ—“ï¸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ ÙÙˆØ§ØªÙŠØ± Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ù…Ø­Ø¯Ø¯':deleteType==='last-1'?'ğŸ“‹ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¢Ø®Ø± ÙØ§ØªÙˆØ±Ø©':'ğŸ“‹ğŸ“‹ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¢Ø®Ø± ÙØ§ØªÙˆØ±ØªÙŠÙ†'}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-600 mt-2\",children:[\"\\u2713 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u2713 \\u0639\\u0643\\u0633 \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u2713 \\u0646\\u0642\\u0644 \\u0644\\u0644\\u0645\\u062D\\u0630\\u0648\\u0641\\u0629\"]})]}),deleteType==='date'&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:deleteDate,onChange:e=>setDeleteDate(e.target.value),className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-red-500 focus:outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 (200200):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:deletePassword,onChange:e=>setDeletePassword(e.target.value),onKeyPress:e=>e.key==='Enter'&&handleBulkDelete(),placeholder:\"\\u0623\\u062F\\u062E\\u0644 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\",className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-red-500 focus:outline-none\",autoFocus:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleBulkDelete,disabled:loading,className:\"flex-1 py-3 rounded-lg font-semibold text-white transition-colors \".concat(loading?'bg-gray-400 cursor-not-allowed':'bg-red-600 hover:bg-red-700'),children:loading?'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­Ø°Ù...':'âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowDeleteModal(false);setDeletePassword('');setDeleteDate('');},disabled:loading,className:\"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-3 rounded-lg font-semibold transition-colors\",children:\"\\u274C \\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-md overflow-x-auto\",children:loading&&!creating?/*#__PURE__*/_jsx(\"div\",{className:\"p-8 text-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u23F3 \\u062C\\u0627\\u0631\\u064A \\u0627\\u0644\\u062A\\u062D\\u0645\\u064A\\u0644...\"})}):backups.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0646\\u0633\\u062E \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u062D\\u062A\\u0649 \\u0627\\u0644\\u0622\\u0646\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 mt-2\",children:\"\\u0627\\u0636\\u063A\\u0637 \\u0639\\u0644\\u0649 \\\"\\u0625\\u0646\\u0634\\u0627\\u0621 \\u0646\\u0633\\u062E\\u0629 \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629\\\" \\u0644\\u0625\\u0646\\u0634\\u0627\\u0621 \\u0623\\u0648\\u0644 \\u0646\\u0633\\u062E\\u0629\"})]}):/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full border-collapse\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E \\u0648\\u0627\\u0644\\u0648\\u0642\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0623\\u0646\\u0634\\u0626\\u062A \\u0628\\u0648\\u0627\\u0633\\u0637\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0645\\u0633\\u062A\\u0646\\u062F\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:backups.map(backup=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[new Date(backup.created_at).toLocaleString('ar-EG',{year:'numeric',month:'long',day:'numeric',hour:'2-digit',minute:'2-digit'}),backup.is_scheduled&&/*#__PURE__*/_jsx(\"span\",{className:\"block text-xs text-blue-600 mt-1\",children:\"\\uD83E\\uDD16 \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\"})]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:backup.created_by}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-center font-medium\",children:backup.total_documents||0}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 text-center\",children:[backup.status==='in_progress'&&/*#__PURE__*/_jsx(\"span\",{className:\"text-orange-600 animate-pulse\",children:\"\\u23F3 \\u062C\\u0627\\u0631\\u064A...\"}),backup.status==='failed'&&/*#__PURE__*/_jsx(\"span\",{className:\"text-red-600\",children:\"\\u274C \\u0641\\u0634\\u0644\"}),(backup.status==='completed'||backup.status==='completed_with_drive'||backup.status==='completed_no_drive')&&/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600\",children:\"\\u2705 \\u0645\\u0643\\u062A\\u0645\\u0644\"})]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse justify-center flex-wrap gap-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>downloadBackup(backup.backup_id,backup.created_at),className:\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\",title:\"\\u062A\\u0646\\u0632\\u064A\\u0644 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629\",children:\"\\u2B07\\uFE0F \\u062A\\u0646\\u0632\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>restoreBackup(backup.backup_id,backup.created_at),disabled:loading||backup.status==='in_progress',className:\"bg-orange-500 text-white px-3 py-1 rounded text-sm hover:bg-orange-600 disabled:bg-gray-400\",title:\"\\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0645\\u0646 \\u0647\\u0630\\u0647 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629\",children:\"\\u21A9\\uFE0F \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteBackup(backup.backup_id,backup.created_at),disabled:loading,className:\"bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600 disabled:bg-gray-400\",title:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629\",children:\"\\uD83D\\uDDD1\\uFE0F \\u062D\\u0630\\u0641\"})]})})]},backup.backup_id))})]})}),activeTab==='drive'&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-md overflow-x-auto\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"p-8 text-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u23F3 \\u062C\\u0627\\u0631\\u064A \\u0627\\u0644\\u062A\\u062D\\u0645\\u064A\\u0644...\"})}):!(driveStatus!==null&&driveStatus!==void 0&&driveStatus.enabled)?/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500\",children:\"\\u274C Google Drive \\u063A\\u064A\\u0631 \\u0645\\u062A\\u0635\\u0644\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 mt-2\",children:\"\\u064A\\u0631\\u062C\\u0649 \\u0627\\u0644\\u062A\\u062D\\u0642\\u0642 \\u0645\\u0646 \\u0625\\u0639\\u062F\\u0627\\u062F\\u0627\\u062A Google Drive\"})]}):driveFiles.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0645\\u0644\\u0641\\u0627\\u062A \\u0641\\u064A Google Drive\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 mt-2\",children:\"\\u0642\\u0645 \\u0628\\u0631\\u0641\\u0639 \\u0646\\u0633\\u062E\\u0629 \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0645\\u0646 \\u0627\\u0644\\u062A\\u0628\\u0648\\u064A\\u0628 \\u0627\\u0644\\u0633\\u0627\\u0628\\u0642\"})]}):/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full border-collapse\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0644\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u062C\\u0645\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:driveFiles.map(file=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"a\",{href:file.webViewLink,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-blue-600 hover:underline\",children:file.name})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(file.createdTime).toLocaleString('ar-EG',{year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-center\",children:file.size?\"\".concat((file.size/1024).toFixed(2),\" KB\"):'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse justify-center flex-wrap gap-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>downloadFromDrive(file.id,file.name),className:\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\",children:\"\\u2B07\\uFE0F \\u062A\\u0646\\u0632\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>restoreFromDrive(file.id,file.name),disabled:loading,className:\"bg-orange-500 text-white px-3 py-1 rounded text-sm hover:bg-orange-600 disabled:bg-gray-400\",children:\"\\u21A9\\uFE0F \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639\"})]})})]},file.id))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 bg-red-50 p-4 rounded-lg border-r-4 border-red-500\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-red-700 mb-2\",children:\"\\u26A0\\uFE0F \\u062A\\u062D\\u0630\\u064A\\u0631\\u0627\\u062A \\u0645\\u0647\\u0645\\u0629:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside text-sm text-red-700 space-y-1\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0646\\u0633\\u062E\\u0629 \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0633\\u064A\\u062D\\u0630\\u0641 \",/*#__PURE__*/_jsx(\"strong\",{children:\"\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\\u0629\"})]}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u0625\\u0646\\u0634\\u0627\\u0621 \\u0646\\u0633\\u062E\\u0629 \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u062D\\u062F\\u064A\\u062B\\u0629 \\u0642\\u0628\\u0644 \\u0627\\u0644\\u0642\\u064A\\u0627\\u0645 \\u0628\\u0623\\u064A \\u062A\\u063A\\u064A\\u064A\\u0631\\u0627\\u062A \\u0643\\u0628\\u064A\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0644\\u0646\\u0633\\u062E \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0644\\u0646 \\u064A\\u062A\\u0645 \\u062D\\u0630\\u0641\\u0647\\u0627 \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0627\\u064B - \\u0627\\u062D\\u0630\\u0641\\u0647\\u0627 \\u064A\\u062F\\u0648\\u064A\\u0627\\u064B \\u0639\\u0646\\u062F \\u0627\\u0644\\u062D\\u0627\\u062C\\u0629\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0644\\u0627 \\u064A\\u0645\\u0643\\u0646 \\u0627\\u0644\\u062A\\u0631\\u0627\\u062C\\u0639 \\u0639\\u0646 \\u0639\\u0645\\u0644\\u064A\\u0629 \\u0627\\u0644\\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0628\\u0639\\u062F \\u062A\\u0646\\u0641\\u064A\\u0630\\u0647\\u0627\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 bg-green-50 p-4 rounded-lg border-r-4 border-green-500\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-green-700 mb-2\",children:\"\\uD83D\\uDCA1 \\u0646\\u0635\\u0627\\u0626\\u062D:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside text-sm text-green-700 space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0627\\u0644\\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0629 \\u062A\\u0639\\u0645\\u0644 \\u064A\\u0648\\u0645\\u064A\\u0627\\u064B \\u0627\\u0644\\u0633\\u0627\\u0639\\u0629 7:00 \\u0645\\u0633\\u0627\\u0621\\u064B\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0633\\u062A\\u062E\\u062F\\u0645 \\u0632\\u0631 \\\"\\u062A\\u0646\\u0632\\u064A\\u0644\\\" \\u0644\\u062D\\u0641\\u0638 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0639\\u0644\\u0649 \\u062C\\u0647\\u0627\\u0632\\u0643\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u064A\\u0645\\u0643\\u0646\\u0643 \\u0631\\u0641\\u0639 \\u0627\\u0644\\u0646\\u0633\\u062E \\u0627\\u0644\\u0645\\u062D\\u0641\\u0648\\u0638\\u0629 \\u064A\\u062F\\u0648\\u064A\\u0627\\u064B \\u0625\\u0644\\u0649 Google Drive \\u0623\\u0648 \\u0623\\u064A \\u062E\\u062F\\u0645\\u0629 \\u0633\\u062D\\u0627\\u0628\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0633\\u062A\\u062E\\u062F\\u0645 \\u0632\\u0631 \\\"\\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0646\\u0633\\u062E\\u0629\\\" \\u0644\\u0631\\u0641\\u0639 \\u0645\\u0644\\u0641 \\u0646\\u0633\\u062E\\u0629 \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0645\\u0646 \\u062C\\u0647\\u0627\\u0632\\u0643\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u062D\\u062A\\u0641\\u0638 \\u0628\\u0646\\u0633\\u062E \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0645\\u0646 \\u0641\\u062A\\u0631\\u0627\\u062A \\u0645\\u062E\\u062A\\u0644\\u0641\\u0629 \\u0644\\u0644\\u0623\\u0645\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u062D\\u062C\\u0645 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0635\\u063A\\u064A\\u0631 (\\u0639\\u0627\\u062F\\u0629 \\u0623\\u0642\\u0644 \\u0645\\u0646 1 MB)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 bg-blue-50 p-4 rounded-lg border-r-4 border-blue-500\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-blue-700 mb-2\",children:\"\\uD83D\\uDCE4 \\u0643\\u064A\\u0641\\u064A\\u0629 \\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0646\\u0633\\u062E\\u0629 \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629:\"}),/*#__PURE__*/_jsxs(\"ol\",{className:\"list-decimal list-inside text-sm text-blue-700 space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0636\\u063A\\u0637 \\u0639\\u0644\\u0649 \\u0632\\u0631 \\\"\\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0646\\u0633\\u062E\\u0629\\\"\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u062E\\u062A\\u0631 \\u0645\\u0644\\u0641 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 (.json) \\u0645\\u0646 \\u062C\\u0647\\u0627\\u0632\\u0643\"}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621:\",/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside mr-6 mt-1\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0645\\u0648\\u0627\\u0641\\u0642\"}),\" = \\u0625\\u0636\\u0627\\u0641\\u0629 \\u0644\\u0644\\u0642\\u0627\\u0626\\u0645\\u0629 \\u0641\\u0642\\u0637 (\\u0622\\u0645\\u0646)\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"}),\" = \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0645\\u0628\\u0627\\u0634\\u0631 (\\u064A\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\\u0629)\"]})]})]})]})]})]});};// Users Management Component  \nconst Users=()=>{const[users,setUsers]=useState([]);const[newUser,setNewUser]=useState({username:'',password:'',role:'user'});const[editingUser,setEditingUser]=useState(null);const[editForm,setEditForm]=useState({username:'',password:'',role:'user'});const[companyInfo,setCompanyInfo]=useState({name:'Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„',address:'Ø§Ù„Ø­Ø±ÙÙŠÙŠÙ† Ø´Ø§Ø±Ø¹ Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª',phone:'01020630677'});const[editingCompany,setEditingCompany]=useState(false);const[selectedUserPermissions,setSelectedUserPermissions]=useState(null);const allPermissions=[{key:'dashboard',label:'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…'},{key:'sales',label:'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª'},{key:'inventory',label:'Ø§Ù„Ù…Ø®Ø²ÙˆÙ†'},{key:'deferred',label:'Ø§Ù„Ø¢Ø¬Ù„'},{key:'expenses',label:'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª'},{key:'revenue',label:'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª'},{key:'treasury',label:'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©'},{key:'invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ±'},{key:'work-orders',label:'Ø£Ù…Ø± Ø´ØºÙ„'},{key:'pricing',label:'Ø§Ù„ØªØ³Ø¹ÙŠØ±'},{key:'users',label:'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†'}];useEffect(()=>{fetchUsers();},[]);const fetchUsers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/users\"));// Check if default users exist in database\nconst dbUsers=response.data||[];const hasElsawy=dbUsers.some(user=>user.username==='Elsawy');const hasRoot=dbUsers.some(user=>user.username==='Root');// Create default users if they don't exist\nif(!hasElsawy){await axios.post(\"\".concat(API,\"/users\"),{username:'Elsawy',password:'100100',role:'admin',permissions:allPermissions.map(p=>p.key)});}if(!hasRoot){await axios.post(\"\".concat(API,\"/users\"),{username:'Root',password:'master',role:'user',permissions:['dashboard','sales','inventory','deferred','expenses','treasury','work-orders']});}// Fetch users again if we created default users\nif(!hasElsawy||!hasRoot){const updatedResponse=await axios.get(\"\".concat(API,\"/users\"));setUsers(updatedResponse.data||[]);}else{setUsers(dbUsers);}}catch(error){console.error('Error fetching users:',error);// Fall back to empty array for now\nsetUsers([]);}};const addUser=async()=>{if(!newUser.username||!newUser.password){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');return;}try{// Check if username already exists\nif(users.some(user=>user.username===newUser.username)){alert('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„');return;}// Default permissions based on role\nconst defaultPermissions=newUser.role==='admin'?allPermissions.map(p=>p.key):['dashboard','sales','inventory','deferred','expenses','treasury','work-orders','pricing'];// Let backend generate ID and created_at\nconst user={username:newUser.username,password:newUser.password,role:newUser.role,permissions:defaultPermissions};await axios.post(\"\".concat(API,\"/users\"),user);fetchUsers();setNewUser({username:'',password:'',role:'user'});alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response33,_error$response33$dat;console.error('Error adding user:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: '+(((_error$response33=error.response)===null||_error$response33===void 0?void 0:(_error$response33$dat=_error$response33.data)===null||_error$response33$dat===void 0?void 0:_error$response33$dat.detail)||error.message));}};const startEdit=user=>{setEditingUser(user.id);setEditForm({username:user.username,password:'',role:user.role});};const cancelEdit=()=>{setEditingUser(null);setEditForm({username:'',password:'',role:'user'});};const saveEdit=async()=>{if(!editForm.username){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');return;}// Check if username already exists (excluding current user)\nif(users.some(user=>user.username===editForm.username&&user.id!==editingUser)){alert('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„');return;}try{// Find current user to preserve their permissions\nconst currentUser=users.find(u=>u.id===editingUser);if(!currentUser){alert('Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');return;}// Update user in backend - preserve existing permissions\nconst updatedUser={id:editingUser,username:editForm.username,role:editForm.role,password:editForm.password||currentUser.password,permissions:currentUser.permissions||[],created_at:currentUser.created_at};await axios.put(\"\".concat(API,\"/users/\").concat(editingUser),updatedUser);// Fetch updated data from database instead of updating local state\nfetchUsers();setEditingUser(null);setEditForm({username:'',password:'',role:'user'});alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response34,_error$response34$dat;console.error('Error updating user:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: '+(((_error$response34=error.response)===null||_error$response34===void 0?void 0:(_error$response34$dat=_error$response34.data)===null||_error$response34$dat===void 0?void 0:_error$response34$dat.detail)||error.message));}};const deleteUser=async userId=>{if(userId==='1'||userId==='2'){alert('Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠÙŠÙ†');return;}if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ'))return;try{await axios.delete(\"\".concat(API,\"/users/\").concat(userId));fetchUsers();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error deleting user:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');}};const resetPassword=async userId=>{const newPassword=prompt('Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:');if(newPassword&&newPassword.trim()){try{// Find the user to get their current data\nconst user=users.find(u=>u.id===userId);if(!user){alert('Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');return;}// Update password in backend\nconst updatedUser={id:user.id,username:user.username,password:newPassword.trim(),role:user.role,permissions:user.permissions||[],created_at:user.created_at};await axios.put(\"\".concat(API,\"/users/\").concat(userId),updatedUser);alert('ØªÙ… ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response35,_error$response35$dat;console.error('Error updating password:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: '+(((_error$response35=error.response)===null||_error$response35===void 0?void 0:(_error$response35$dat=_error$response35.data)===null||_error$response35$dat===void 0?void 0:_error$response35$dat.detail)||error.message));}}};const openPermissions=user=>{setSelectedUserPermissions(_objectSpread(_objectSpread({},user),{},{tempPermissions:[...(user.permissions||[])]}));};const togglePermission=permissionKey=>{setSelectedUserPermissions(prev=>{const newPermissions=prev.tempPermissions.includes(permissionKey)?prev.tempPermissions.filter(p=>p!==permissionKey):[...prev.tempPermissions,permissionKey];return _objectSpread(_objectSpread({},prev),{},{tempPermissions:newPermissions});});};const savePermissions=async()=>{try{// Update permissions in backend\nconst updatedUser={id:selectedUserPermissions.id,username:selectedUserPermissions.username,password:selectedUserPermissions.password,role:selectedUserPermissions.role,permissions:selectedUserPermissions.tempPermissions,created_at:selectedUserPermissions.created_at};await axios.put(\"\".concat(API,\"/users/\").concat(selectedUserPermissions.id),updatedUser);// Fetch updated data from database\nfetchUsers();setSelectedUserPermissions(null);alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response36,_error$response36$dat;console.error('Error updating permissions:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª: '+(((_error$response36=error.response)===null||_error$response36===void 0?void 0:(_error$response36$dat=_error$response36.data)===null||_error$response36$dat===void 0?void 0:_error$response36$dat.detail)||error.message));}};const saveCompanyInfo=()=>{setEditingCompany(false);alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ© Ø¨Ù†Ø¬Ø§Ø­');};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-4\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\\u064A\\u0646\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u0634\\u0631\\u0643\\u0629\"}),editingCompany?/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0634\\u0631\\u0643\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:companyInfo.name,onChange:e=>setCompanyInfo(_objectSpread(_objectSpread({},companyInfo),{},{name:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:companyInfo.address,onChange:e=>setCompanyInfo(_objectSpread(_objectSpread({},companyInfo),{},{address:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u062A\\u0644\\u064A\\u0641\\u0648\\u0646\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:companyInfo.phone,onChange:e=>setCompanyInfo(_objectSpread(_objectSpread({},companyInfo),{},{phone:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0634\\u0631\\u0643\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"p-2 bg-gray-100 rounded\",children:companyInfo.name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"p\",{className:\"p-2 bg-gray-100 rounded\",children:companyInfo.address})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u062A\\u0644\\u064A\\u0641\\u0648\\u0646\"}),/*#__PURE__*/_jsx(\"p\",{className:\"p-2 bg-gray-100 rounded\",children:companyInfo.phone})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:editingCompany?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:saveCompanyInfo,className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u062D\\u0641\\u0638\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingCompany(false),className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingCompany(true),className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644 \\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u0634\\u0631\\u0643\\u0629\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0633\\u062A\\u062E\\u062F\\u0645 \\u062C\\u062F\\u064A\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newUser.username,onChange:e=>setNewUser(_objectSpread(_objectSpread({},newUser),{},{username:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:newUser.password,onChange:e=>setNewUser(_objectSpread(_objectSpread({},newUser),{},{password:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0635\\u0644\\u0627\\u062D\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"select\",{value:newUser.role,onChange:e=>setNewUser(_objectSpread(_objectSpread({},newUser),{},{role:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645 \\u0639\\u0627\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"\\u0645\\u062F\\u064A\\u0631\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addUser,className:\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\\u064A\\u0646\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0635\\u0644\\u0627\\u062D\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0635\\u0644\\u0627\\u062D\\u064A\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u062A\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u0625\\u0646\\u0634\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>{var _user$permissions;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:editingUser===user.id?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.username,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{username:e.target.value})),className:\"w-full p-1 border border-gray-300 rounded\"}):/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:user.username})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:editingUser===user.id?/*#__PURE__*/_jsxs(\"select\",{value:editForm.role,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{role:e.target.value})),className:\"w-full p-1 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645 \\u0639\\u0627\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"\\u0645\\u062F\\u064A\\u0631\"})]}):/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm \".concat(user.role==='admin'?'bg-red-100 text-red-800':'bg-blue-100 text-blue-800'),children:user.role==='admin'?'Ù…Ø¯ÙŠØ±':'Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯ÙŠ'})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"bg-gray-100 px-2 py-1 rounded text-sm\",children:[((_user$permissions=user.permissions)===null||_user$permissions===void 0?void 0:_user$permissions.length)||0,\" \\u0635\\u0644\\u0627\\u062D\\u064A\\u0629\"]})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(user.created_at).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm bg-green-100 text-green-800\",children:\"\\u0646\\u0634\\u0637\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-2 space-x-reverse flex-wrap\",children:editingUser===user.id?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:saveEdit,className:\"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600 mb-1\",children:\"\\u062D\\u0641\\u0638\"}),/*#__PURE__*/_jsx(\"button\",{onClick:cancelEdit,className:\"bg-gray-500 text-white px-2 py-1 rounded text-sm hover:bg-gray-600 mb-1\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>startEdit(user),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600 mb-1\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>openPermissions(user),className:\"bg-purple-500 text-white px-2 py-1 rounded text-sm hover:bg-purple-600 mb-1\",children:\"\\u0627\\u0644\\u0635\\u0644\\u0627\\u062D\\u064A\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>resetPassword(user.id),className:\"bg-yellow-500 text-white px-2 py-1 rounded text-sm hover:bg-yellow-600 mb-1\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"}),user.id!=='1'&&user.id!=='2'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteUser(user.id),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600 mb-1\",children:\"\\u062D\\u0630\\u0641\"})]})})})]},user.id);})})]})})]}),selectedUserPermissions&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 max-w-md w-full mx-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-bold mb-4\",children:[\"\\u0635\\u0644\\u0627\\u062D\\u064A\\u0627\\u062A \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645: \",selectedUserPermissions.username]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2 mb-4\",children:allPermissions.map(permission=>/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedUserPermissions.tempPermissions.includes(permission.key),onChange:()=>togglePermission(permission.key),className:\"ml-2\"}),/*#__PURE__*/_jsx(\"span\",{children:permission.label})]},permission.key))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:savePermissions,className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u062D\\u0641\\u0638\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedUserPermissions(null),className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]})})]});};// Material Pricing Component\nconst Pricing=()=>{const[materialPricings,setMaterialPricings]=useState([]);const[editingPricing,setEditingPricing]=useState(null);const[newPricing,setNewPricing]=useState({material_type:'NBR',inner_diameter:'',outer_diameter:'',price_per_mm:'',manufacturing_cost_client1:'',manufacturing_cost_client2:'',manufacturing_cost_client3:'',notes:''});const materialTypes=['NBR','BUR','BT','VT','BOOM'];useEffect(()=>{fetchMaterialPricings();},[]);const fetchMaterialPricings=async()=>{try{const response=await axios.get(\"\".concat(API,\"/material-pricing\"));setMaterialPricings(response.data);}catch(error){console.error('Error fetching material pricings:',error);}};const addMaterialPricing=async()=>{if(!newPricing.inner_diameter||!newPricing.outer_diameter||!newPricing.price_per_mm){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{if(editingPricing){// Update existing pricing\nawait axios.put(\"\".concat(API,\"/material-pricing/\").concat(editingPricing),_objectSpread(_objectSpread({},newPricing),{},{inner_diameter:parseFloat(newPricing.inner_diameter),outer_diameter:parseFloat(newPricing.outer_diameter),price_per_mm:parseFloat(newPricing.price_per_mm),manufacturing_cost_client1:parseFloat(newPricing.manufacturing_cost_client1||0),manufacturing_cost_client2:parseFloat(newPricing.manufacturing_cost_client2||0),manufacturing_cost_client3:parseFloat(newPricing.manufacturing_cost_client3||0)}));alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');setEditingPricing(null);}else{// Add new pricing\nawait axios.post(\"\".concat(API,\"/material-pricing\"),_objectSpread(_objectSpread({},newPricing),{},{inner_diameter:parseFloat(newPricing.inner_diameter),outer_diameter:parseFloat(newPricing.outer_diameter),price_per_mm:parseFloat(newPricing.price_per_mm),manufacturing_cost_client1:parseFloat(newPricing.manufacturing_cost_client1||0),manufacturing_cost_client2:parseFloat(newPricing.manufacturing_cost_client2||0),manufacturing_cost_client3:parseFloat(newPricing.manufacturing_cost_client3||0)}));alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');}fetchMaterialPricings();setNewPricing({material_type:'NBR',inner_diameter:'',outer_diameter:'',price_per_mm:'',manufacturing_cost_client1:'',manufacturing_cost_client2:'',manufacturing_cost_client3:'',notes:''});}catch(error){var _error$response37,_error$response37$dat;console.error('Error saving material pricing:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©: '+(((_error$response37=error.response)===null||_error$response37===void 0?void 0:(_error$response37$dat=_error$response37.data)===null||_error$response37$dat===void 0?void 0:_error$response37$dat.detail)||error.message));}};const editMaterialPricing=pricing=>{setNewPricing({material_type:pricing.material_type,inner_diameter:pricing.inner_diameter.toString(),outer_diameter:pricing.outer_diameter.toString(),price_per_mm:pricing.price_per_mm.toString(),manufacturing_cost_client1:pricing.manufacturing_cost_client1.toString(),manufacturing_cost_client2:pricing.manufacturing_cost_client2.toString(),manufacturing_cost_client3:pricing.manufacturing_cost_client3.toString(),notes:pricing.notes||''});setEditingPricing(pricing.id);};const deleteMaterialPricing=async pricingId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©ØŸ')){return;}try{await axios.delete(\"\".concat(API,\"/material-pricing/\").concat(pricingId));fetchMaterialPricings();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response38,_error$response38$dat;console.error('Error deleting material pricing:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©: '+(((_error$response38=error.response)===null||_error$response38===void 0?void 0:(_error$response38$dat=_error$response38.data)===null||_error$response38$dat===void 0?void 0:_error$response38$dat.detail)||error.message));}};const cancelEdit=()=>{setEditingPricing(null);setNewPricing({material_type:'NBR',inner_diameter:'',outer_diameter:'',price_per_mm:'',manufacturing_cost_client1:'',manufacturing_cost_client2:'',manufacturing_cost_client3:'',notes:''});};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-6\",children:\"\\uD83D\\uDCB2 \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u062A\\u0633\\u0639\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:editingPricing?'ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©':'Ø¥Ø¶Ø§ÙØ© ØªØ³Ø¹ÙŠØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©'}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"select\",{value:newPricing.material_type,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{material_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:materialTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A (\\u0645\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:newPricing.inner_diameter,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{inner_diameter:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A (\\u0645\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:newPricing.outer_diameter,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{outer_diameter:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0645\\u0644\\u064A (\\u062C.\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newPricing.price_per_mm,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{price_per_mm:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0645\\u0644\\u064A \\u0627\\u0644\\u0648\\u0627\\u062D\\u062F\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639 - \\u0639\\u0645\\u064A\\u0644 1 (\\u062C.\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newPricing.manufacturing_cost_client1,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{manufacturing_cost_client1:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639 \\u0644\\u0644\\u0639\\u0645\\u064A\\u0644 1\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639 - \\u0639\\u0645\\u064A\\u0644 2 (\\u062C.\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newPricing.manufacturing_cost_client2,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{manufacturing_cost_client2:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639 \\u0644\\u0644\\u0639\\u0645\\u064A\\u0644 2\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639 - \\u0639\\u0645\\u064A\\u0644 3 (\\u062C.\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newPricing.manufacturing_cost_client3,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{manufacturing_cost_client3:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639 \\u0644\\u0644\\u0639\\u0645\\u064A\\u0644 3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2 lg:col-span-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"textarea\",{value:newPricing.notes,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{notes:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",rows:\"2\",placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0625\\u0636\\u0627\\u0641\\u064A\\u0629...\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4 space-x-reverse mt-4\",children:[editingPricing&&/*#__PURE__*/_jsx(\"button\",{onClick:cancelEdit,className:\"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"button\",{onClick:addMaterialPricing,className:\"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600\",children:editingPricing?'ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©':'Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:\"\\u0642\\u0627\\u0626\\u0645\\u0629 \\u0627\\u0644\\u062A\\u0633\\u0639\\u064A\\u0631\\u0627\\u062A\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0627\\u0644\\u0623\\u0628\\u0639\\u0627\\u062F (\\u062F\\u0627\\u062E\\u0644\\u064A\\xD7\\u062E\\u0627\\u0631\\u062C\\u064A)\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0645\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0639\\u0645\\u064A\\u0644 1\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0639\\u0645\\u064A\\u0644 2\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0639\\u0645\\u064A\\u0644 3\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:[materialPricings.map((pricing,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:index%2===0?'bg-white':'bg-gray-50',children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",children:pricing.material_type}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:[pricing.inner_diameter,\"\\xD7\",pricing.outer_diameter,\" \\u0645\\u0645\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:[pricing.price_per_mm.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:[pricing.manufacturing_cost_client1.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:[pricing.manufacturing_cost_client2.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:[pricing.manufacturing_cost_client3.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:pricing.notes||'-'}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editMaterialPricing(pricing),className:\"text-blue-600 hover:text-blue-900 ml-2\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteMaterialPricing(pricing.id),className:\"text-red-600 hover:text-red-900\",children:\"\\u062D\\u0630\\u0641\"})]})]},pricing.id)),materialPricings.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"8\",className:\"px-6 py-4 text-center text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u062A\\u0633\\u0639\\u064A\\u0631\\u0627\\u062A \\u0645\\u0636\\u0627\\u0641\\u0629\"})})]})]})})]})]});};// Main Treasury Component - Ø§Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©\nconst MainTreasury=()=>{const{user}=useAuth();const[isAuthenticated,setIsAuthenticated]=useState(false);const[password,setPassword]=useState('');const[balance,setBalance]=useState(0);const[transactions,setTransactions]=useState([]);const[transactionType,setTransactionType]=useState('deposit');const[amount,setAmount]=useState('');const[description,setDescription]=useState('');const[reference,setReference]=useState('');const[showPasswordChange,setShowPasswordChange]=useState(false);const[oldPassword,setOldPassword]=useState('');const[newPassword,setNewPassword]=useState('');// Verify password\nconst verifyPassword=async()=>{try{const response=await axios.post(\"\".concat(API,\"/main-treasury/verify-password\"),{password:password});if(response.data.success){setIsAuthenticated(true);fetchMainTreasuryData();}else{alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©');setPassword('');}}catch(error){console.error('Error verifying password:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');}};// Fetch main treasury data\nconst fetchMainTreasuryData=async()=>{try{const balanceResponse=await axios.get(\"\".concat(API,\"/main-treasury/balance\"));setBalance(balanceResponse.data.balance);const transactionsResponse=await axios.get(\"\".concat(API,\"/main-treasury/transactions\"));setTransactions(transactionsResponse.data);}catch(error){console.error('Error fetching main treasury data:',error);}};// Handle transaction (deposit or withdrawal)\nconst handleTransaction=async()=>{if(!amount||!description){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº ÙˆØ§Ù„ÙˆØµÙ');return;}if(parseFloat(amount)<=0){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');return;}try{const endpoint=transactionType==='deposit'?\"\".concat(API,\"/main-treasury/deposit?username=\").concat(user.username):\"\".concat(API,\"/main-treasury/withdrawal?username=\").concat(user.username);await axios.post(endpoint,{transaction_type:transactionType,amount:parseFloat(amount),description:description,reference:reference||null});alert(transactionType==='deposit'?'ØªÙ… Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ Ø¨Ù†Ø¬Ø§Ø­':'ØªÙ… Ø§Ù„ØµØ±Ù Ø¨Ù†Ø¬Ø§Ø­');// Reset form\nsetAmount('');setDescription('');setReference('');// Refresh data\nfetchMainTreasuryData();}catch(error){var _error$response39,_error$response39$dat;console.error('Error performing transaction:',error);alert(((_error$response39=error.response)===null||_error$response39===void 0?void 0:(_error$response39$dat=_error$response39.data)===null||_error$response39$dat===void 0?void 0:_error$response39$dat.detail)||'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');}};// Change password\nconst changePassword=async()=>{if(!oldPassword||!newPassword){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ÙˆØ§Ù„Ø¬Ø¯ÙŠØ¯Ø©');return;}if(newPassword.length<4){alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 4 Ø£Ø±Ù‚Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');return;}try{await axios.post(\"\".concat(API,\"/main-treasury/change-password\"),{old_password:oldPassword,new_password:newPassword});alert('ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­');setShowPasswordChange(false);setOldPassword('');setNewPassword('');}catch(error){var _error$response40,_error$response40$dat;console.error('Error changing password:',error);alert(((_error$response40=error.response)===null||_error$response40===void 0?void 0:(_error$response40$dat=_error$response40.data)===null||_error$response40$dat===void 0?void 0:_error$response40$dat.detail)||'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');}};// If not authenticated, show password screen\nif(!isAuthenticated){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600 p-6\",dir:\"rtl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-lg shadow-2xl max-w-md w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-6xl mb-4\",children:\"\\uD83D\\uDD10\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800\",children:\"\\u0627\\u0644\\u062E\\u0632\\u0646\\u0629 \\u0627\\u0644\\u0631\\u0626\\u064A\\u0633\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2\",children:\"\\u0627\\u0644\\u0631\\u062C\\u0627\\u0621 \\u0625\\u062F\\u062E\\u0627\\u0644 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 \\u0644\\u0644\\u062F\\u062E\\u0648\\u0644\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),onKeyPress:e=>e.key==='Enter'&&verifyPassword(),placeholder:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\",className:\"w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-center text-lg\",autoFocus:true}),/*#__PURE__*/_jsx(\"button\",{onClick:verifyPassword,className:\"w-full bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 font-semibold text-lg transition-colors\",children:\"\\u062F\\u062E\\u0648\\u0644\"})]})]})});}// Main treasury interface\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 bg-gray-50 min-h-screen\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-800 flex items-center gap-2\",children:\"\\uD83D\\uDD10 \\u0627\\u0644\\u062E\\u0632\\u0646\\u0629 \\u0627\\u0644\\u0631\\u0626\\u064A\\u0633\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u062E\\u0632\\u0646\\u0629 \\u0627\\u0644\\u0631\\u0626\\u064A\\u0633\\u064A\\u0629 \\u0644\\u0644\\u0634\\u0631\\u0643\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-left\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"\\u0627\\u0644\\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-4xl font-bold text-green-600\",children:[balance.toFixed(2),\" \\u062C.\\u0645\"]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-4 flex items-center gap-2\",children:transactionType==='deposit'?'ğŸ’µ Ø¥ÙŠØ¯Ø§Ø¹':'ğŸ’¸ ØµØ±Ù'}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTransactionType('deposit'),className:\"flex-1 py-2 rounded-lg font-semibold transition-colors \".concat(transactionType==='deposit'?'bg-green-500 text-white':'bg-gray-200 text-gray-700 hover:bg-gray-300'),children:\"\\uD83D\\uDCB5 \\u0625\\u064A\\u062F\\u0627\\u0639\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTransactionType('withdrawal'),className:\"flex-1 py-2 rounded-lg font-semibold transition-colors \".concat(transactionType==='withdrawal'?'bg-red-500 text-white':'bg-gray-200 text-gray-700 hover:bg-gray-300'),children:\"\\uD83D\\uDCB8 \\u0635\\u0631\\u0641\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A (\\u062C.\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:amount,onChange:e=>setAmount(e.target.value),placeholder:\"0.00\",className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"\\u0627\\u0644\\u0648\\u0635\\u0641/\\u0627\\u0644\\u0633\\u0628\\u0628 *\"}),/*#__PURE__*/_jsx(\"textarea\",{value:description,onChange:e=>setDescription(e.target.value),placeholder:\"\\u0627\\u0643\\u062A\\u0628 \\u0633\\u0628\\u0628 \\u0627\\u0644\\u0625\\u064A\\u062F\\u0627\\u0639 \\u0623\\u0648 \\u0627\\u0644\\u0635\\u0631\\u0641...\",rows:\"3\",className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"\\u0627\\u0644\\u0645\\u0631\\u062C\\u0639 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:reference,onChange:e=>setReference(e.target.value),placeholder:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u0646\\u062F \\u0623\\u0648 \\u0627\\u0644\\u0645\\u0631\\u062C\\u0639\",className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleTransaction,className:\"w-full py-3 rounded-lg font-semibold text-white transition-colors \".concat(transactionType==='deposit'?'bg-green-500 hover:bg-green-600':'bg-red-500 hover:bg-red-600'),children:transactionType==='deposit'?'âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹':'âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØµØ±Ù'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-4 flex items-center gap-2\",children:\"\\uD83D\\uDD11 \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"}),!showPasswordChange?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"\\u062A\\u063A\\u064A\\u064A\\u0631 \\u0643\\u0644\\u0645\\u0629 \\u0645\\u0631\\u0648\\u0631 \\u0627\\u0644\\u062E\\u0632\\u0646\\u0629 \\u0627\\u0644\\u0631\\u0626\\u064A\\u0633\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPasswordChange(true),className:\"bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 font-semibold\",children:\"\\u062A\\u063A\\u064A\\u064A\\u0631 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 \\u0627\\u0644\\u0642\\u062F\\u064A\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:oldPassword,onChange:e=>setOldPassword(e.target.value),className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 \\u0627\\u0644\\u062C\\u062F\\u064A\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:newPassword,onChange:e=>setNewPassword(e.target.value),className:\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:changePassword,className:\"flex-1 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 font-semibold\",children:\"\\u2705 \\u062A\\u0623\\u0643\\u064A\\u062F \\u0627\\u0644\\u062A\\u063A\\u064A\\u064A\\u0631\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowPasswordChange(false);setOldPassword('');setNewPassword('');},className:\"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 font-semibold\",children:\"\\u274C \\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-4 flex items-center gap-2\",children:\"\\uD83D\\uDCCB \\u0633\\u062C\\u0644 \\u0627\\u0644\\u062D\\u0631\\u0643\\u0627\\u062A\"}),transactions.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-500 py-8\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u062D\\u0631\\u0643\\u0627\\u062A \\u0645\\u0633\\u062C\\u0644\\u0629\"}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3 text-right\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3 text-right\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3 text-right\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3 text-right\",children:\"\\u0627\\u0644\\u0648\\u0635\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3 text-right\",children:\"\\u0627\\u0644\\u0645\\u0631\\u062C\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3 text-right\",children:\"\\u0627\\u0644\\u0631\\u0635\\u064A\\u062F \\u0628\\u0639\\u062F\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3 text-right\",children:\"\\u0646\\u0641\\u0630 \\u0628\\u0648\\u0627\\u0633\\u0637\\u0629\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:transactions.map(transaction=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3\",children:new Date(transaction.date).toLocaleDateString('ar-EG',{year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit'})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-sm font-semibold \".concat(transaction.transaction_type==='deposit'?'bg-green-100 text-green-800':transaction.transaction_type==='withdrawal'?'bg-red-100 text-red-800':'bg-blue-100 text-blue-800'),children:transaction.transaction_type==='deposit'?'ğŸ’µ Ø¥ÙŠØ¯Ø§Ø¹':transaction.transaction_type==='withdrawal'?'ğŸ’¸ ØµØ±Ù':'â†”ï¸ ØªØ±Ø­ÙŠÙ„'})}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3 font-bold \".concat(transaction.transaction_type==='withdrawal'?'text-red-600':'text-green-600'),children:[transaction.transaction_type==='withdrawal'?'-':'+',transaction.amount.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3\",children:transaction.description}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3 text-gray-600\",children:transaction.reference||'-'}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3 font-bold text-blue-600\",children:[transaction.balance_after.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3\",children:transaction.performed_by})]},transaction.id))})]})})]})]});};// Main App Component\nconst App=()=>{const[currentPage,setCurrentPage]=useState('sales');// Default to sales instead of dashboard\nconst{user}=useAuth();if(!user)return/*#__PURE__*/_jsx(Login,{});const renderPage=()=>{switch(currentPage){case'dashboard':// Only Elsawy can access dashboard\nreturn(user===null||user===void 0?void 0:user.username)==='Elsawy'?/*#__PURE__*/_jsx(Dashboard,{}):/*#__PURE__*/_jsx(Sales,{});case'sales':return/*#__PURE__*/_jsx(Sales,{});case'inventory':return/*#__PURE__*/_jsx(Inventory,{});case'stock':return/*#__PURE__*/_jsx(Stock,{});case'local':return/*#__PURE__*/_jsx(Local,{});case'deferred':return/*#__PURE__*/_jsx(Deferred,{});case'expenses':return/*#__PURE__*/_jsx(Expenses,{});case'revenue':return/*#__PURE__*/_jsx(Revenue,{});case'treasury':return/*#__PURE__*/_jsx(Treasury,{});case'main-treasury':// Only Elsawy can access main treasury\nreturn(user===null||user===void 0?void 0:user.username)==='Elsawy'?/*#__PURE__*/_jsx(MainTreasury,{}):/*#__PURE__*/_jsx(Sales,{});case'invoices':return/*#__PURE__*/_jsx(Invoices,{});case'deleted-invoices':return/*#__PURE__*/_jsx(DeletedInvoices,{});case'customer-statement':return/*#__PURE__*/_jsx(CustomerStatement,{});case'settle-account':return/*#__PURE__*/_jsx(SettleAccount,{});case'work-orders':return/*#__PURE__*/_jsx(WorkOrders,{});case'pricing':return/*#__PURE__*/_jsx(Pricing,{});case'backup':return/*#__PURE__*/_jsx(Backup,{});case'users':return/*#__PURE__*/_jsx(Users,{});default:return/*#__PURE__*/_jsx(Sales,{});// Default to sales instead of dashboard\n}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen bg-gray-50\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(Navigation,{currentPage:currentPage,onPageChange:setCurrentPage}),/*#__PURE__*/_jsx(\"main\",{className:\"flex-1 overflow-y-auto bg-gradient-to-br from-gray-50 to-blue-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:renderPage()})})]});};// Root App with AuthProvider\nconst AppWithAuth=()=>/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(App,{})});export default AppWithAuth;","map":{"version":3,"names":["React","useState","useEffect","createContext","useContext","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","API","concat","AuthContext","useAuth","context","Error","AuthProvider","_ref","children","user","setUser","isLoading","setIsLoading","savedUser","localStorage","getItem","JSON","parse","login","username","password","response","post","params","data","success","setItem","stringify","error","console","logout","removeItem","className","Provider","value","Login","setUsername","setPassword","setError","handleSubmit","e","preventDefault","dir","src","alt","onSubmit","type","onChange","target","placeholder","required","Navigation","_ref2","currentPage","onPageChange","isCollapsed","setIsCollapsed","elsawyPages","key","label","icon","adminPages","userPages","pages","role","onClick","title","style","maxHeight","map","page","Inventory","inventoryItems","setInventoryItems","inventoryTransactions","setInventoryTransactions","lowStockItems","setLowStockItems","currentView","setCurrentView","editingItem","setEditingItem","newItem","setNewItem","material_type","inner_diameter","outer_diameter","available_pieces","min_stock_level","notes","newTransaction","setNewTransaction","transaction_type","pieces_change","reason","searchTerm","setSearchTerm","materialTypes","fetchInventoryItems","get","fetchInventoryTransactions","fetchLowStockItems","addInventoryItem","alert","put","id","_objectSpread","parseFloat","parseInt","_error$response","_error$response$data","detail","message","addInventoryTransaction","transactionData","Math","abs","_error$response2","_error$response2$data","filteredItems","filter","item","_item$notes","toLowerCase","includes","toString","sort","a","b","materialPriority","aPriority","bPriority","filteredTransactions","transaction","_transaction$notes","Date","date","length","confirm","delete","step","toLocaleDateString","remaining_pieces","max","responseType","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","toISOString","split","body","appendChild","click","remove","accept","file","files","formData","FormData","append","headers","imported_count","errors","warn","Local","suppliers","setSuppliers","localProducts","setLocalProducts","supplierTransactions","setSupplierTransactions","newSupplier","setNewSupplier","name","phone","address","newProduct","setNewProduct","supplier_id","purchase_price","selling_price","current_stock","amount","description","product_name","quantity","unit_price","payment_method","selectedSupplier","setSelectedSupplier","paymentAmount","setPaymentAmount","paymentMethod","setPaymentMethod","fetchSuppliers","fetchLocalProducts","fetchSupplierTransactions","addSupplier","trim","_error$response3","_error$response3$data","editSupplier","supplier","deleteSupplier","supplierId","_error$response4","_error$response4$data","addLocalProduct","_error$response5","_error$response5$data","editLocalProduct","product","deleteLocalProduct","productId","_error$response6","_error$response6$data","paySupplier","total_purchases","toFixed","total_paid","balance","supplier_name","total_sold","s","Dashboard","stats","setStats","total_sales","total_expenses","net_profit","total_unpaid","invoice_count","customer_count","fetchStats","clearAllData","printReport","reportType","currentDate","printContent","printWindow","open","write","close","print","Sales","customers","setCustomers","newCustomer","setNewCustomer","selectedCustomer","setSelectedCustomer","supervisorName","setSupervisorName","invoiceTitle","setInvoiceTitle","currentItem","setCurrentItem","seal_type","height","product_type","measurements","setMeasurements","inner_diameter_mm","inner_diameter_inch","outer_diameter_mm","outer_diameter_inch","height_mm","height_inch","wall_height_mm","wall_height_inch","localProduct","setLocalProduct","product_size","items","setItems","discount","setDiscount","discountType","setDiscountType","compatibilityResults","setCompatibilityResults","selectedMaterial","setSelectedMaterial","selectedMaterials","setSelectedMaterials","measurementUnit","setMeasurementUnit","wallHeight","setWallHeight","clientType","setClientType","mmToInch","mm","inchToMm","inch","handleMeasurementChange","field","unit","newMeasurements","mmValue","sealTypes","fetchCustomers","sortedCustomers","localeCompare","calculateAutomaticPrice","material","client_type","log","confirmMultiMaterialSelection","totalPrice","selected","pricing","total_price","seals","sel","unit_code","join","checkCompatibility","innerDiameter","outerDiameter","isNaN","addItem","hasInnerDiameter","hasOuterDiameter","hasHeight","wallHeightValue","wall_height","display_measurements","material_used","material_details","is_finished_product","selected_materials","seals_count","product_type_name","local_product_details","editItem","index","_item$inner_diameter","_item$outer_diameter","_item$height","_item$unit_price","_item$inner_diameter2","_item$outer_diameter2","_item$height2","_item$wall_height","measurement_unit","_item$unit_price2","newItems","_","i","deleteItem","isCreatingInvoice","setIsCreatingInvoice","createInvoice","customerId","customerName","customerResponse","customerError","_customerError$respon","status","existingCustomer","find","c","customer","subtotal","reduce","sum","discountAmount","totalAfterDiscount","invoiceData","customer_id","customer_name","invoice_title","supervisor_name","discount_type","discount_value","total_after_discount","encodeURIComponent","printInvoice","_error$response7","_error$response7$data","invoice","invoice_number","customer_address","Array","from","total_amount","clearAllInvoices","exactMatch","borderColor","backgroundColor","tempMsg","textContent","parentElement","setTimeout","partialMatch","some","startsWith","rows","compatible_materials","min","floor","newSelected","isSelected","maxSeals","remainingSeals","score","newSelection","totalSeals","disabled","compatible_products","original_inner_diameter","original_outer_diameter","original_height","original_wall_height","display","Stock","rawMaterials","setRawMaterials","finishedProducts","setFinishedProducts","newRawMaterial","setNewRawMaterial","pieces_count","cost_per_mm","newFinishedProduct","setNewFinishedProduct","filteredRawMaterials","filteredFinishedProducts","fetchRawMaterials","fetchFinishedProducts","addRawMaterial","rawMaterial","_error$response8","_error$response8$data","clearAllRawMaterials","deleteRawMaterial","materialId","editRawMaterial","handleFileImport","event","_error$response9","_error$response9$data","handleFileExport","removeChild","revokeObjectURL","addFinishedProduct","finishedProduct","editFinishedProduct","deleteFinishedProduct","Deferred","_selectedInvoice$rema","unpaidInvoices","setUnpaidInvoices","selectedInvoice","setSelectedInvoice","paymentNotes","setPaymentNotes","customerTotals","setCustomerTotals","fetchUnpaidInvoices","totals","filteredInvoices","forEach","totalAmount","invoiceCount","remaining_amount","invoices","getCustomerName","makePayment","invoice_id","Object","keys","entries","_ref3","_invoice$total_amount","_invoice$paid_amount","_invoice$remaining_am","paid_amount","inv","Expenses","expenses","setExpenses","newExpense","setNewExpense","category","expenseCategories","fetchExpenses","addExpense","deleteExpense","expenseId","getTotalExpenses","expense","getExpensesByCategory","byCategory","cat","exp","clearAllExpenses","_ref4","Revenue","_revenueData$total_re","_revenueData$total_ex","_revenueData$material","_revenueData$profit","_revenueData$total_re2","_revenueData$material2","_revenueData$profit2","revenueData","setRevenueData","total_revenue","material_cost","profit","period","setPeriod","fetchRevenueData","Invoices","setInvoices","filterStatus","setFilterStatus","editingInvoice","setEditingInvoice","editForm","setEditForm","showPasswordModal","setShowPasswordModal","operationPassword","setOperationPassword","pendingOperation","setPendingOperation","fetchInvoices","_error$response10","_error$response10$dat","requestPasswordFor","operationType","operationData","executeOperation","executeCancelInvoice","executeUpdateInvoice","executeChangePaymentMethod","invoiceId","newMethod","_error$response11","_error$response11$dat","new_payment_method","changePaymentMethod","paymentMethods","modalHtml","method","insertAdjacentHTML","modal","getElementById","selectElement","confirmBtn","cancelBtn","closeModal","parentNode","onclick","cancelInvoice","confirmMessage","startEditInvoice","cancelEdit","saveInvoiceEdit","updatedInvoice","_error$response12","_error$response13","_error$response13$dat","updateInvoiceStatus","newStatus","matchesStatus","matchesSearch","_invoice$subtotal","_invoice$total_amount2","_ref5","_item$local_product_d","_item$local_product_d2","onKeyPress","autoFocus","DeletedInvoices","isAuthenticated","setIsAuthenticated","deletedInvoices","setDeletedInvoices","showPasswordChange","setShowPasswordChange","oldPassword","setOldPassword","newPassword","setNewPassword","verifyPassword","fetchDeletedInvoices","changePassword","old_password","new_password","_error$response14","_error$response14$dat","handleRestore","invoiceNumber","warning","_error$response15","_error$response15$dat","handlePermanentDelete","_error$response16","_error$response16$dat","_invoice$invoice_numb","_invoice$customer_nam","_invoice$payment_meth","searchLower","colSpan","_invoice$total_amount3","created_at","deleted_at","year","month","day","hour","minute","CustomerStatement","_statement$summary$to","_statement$summary$to2","_statement$summary$fi","statement","setStatement","fromDate","setFromDate","toDate","setToDate","loading","setLoading","fetchStatement","from_date","to_date","_error$response17","_error$response17$dat","printStatement","_summary$total_credit","_summary$total_debit","_summary$final_balanc","transactions","summary","final_balance","is_also_supplier","t","debit","credit","total_credit","total_debit","trans","reference","SettleAccount","deferredInvoices","setDeferredInvoices","amountPaid","setAmountPaid","result","setResult","isCustomerAlsoSupplier","setIsCustomerAlsoSupplier","supplierBalance","setSupplierBalance","fetchCustomerInvoices","customerInvoices","handleCustomerChange","current_balance","handleSettleAccount","amount_paid","total_amount_paid","amount_distributed","invoices_count","paid_invoices","_error$response18","_error$response18$dat","handleReconciliation","_customers$find","settlementAmount","totalRemaining","supplier_previous_balance","customer_previous_debt","settlement_amount","supplier_new_balance","customer_remaining_debt","settled_invoices","note","_error$response19","_error$response19$dat","WorkOrders","workOrders","setWorkOrders","selectedInvoices","setSelectedInvoices","newWorkOrder","setNewWorkOrder","priority","showAddToExisting","setShowAddToExisting","selectedWorkOrderId","setSelectedWorkOrderId","selectedInvoiceForAdd","setSelectedInvoiceForAdd","fetchWorkOrders","toggleInvoiceSelection","prev","createWorkOrderFromMultipleInvoices","selectedInvoicesData","cleanInvoices","cleanInv","_id","workOrderData","total_items","_inv$items","_error$response20","_error$response20$dat","addInvoiceToExistingWorkOrder","_error$response21","_error$response21$dat","getInvoiceDetails","getAvailableInvoices","getAvailableInvoicesForAdd","_selectedWorkOrder$in","selectedWorkOrder","wo","usedInvoiceIds","printWorkOrder","workOrder","_workOrder$invoices","workOrderInvoices","totalItems","_inv$items2","slice","is_daily","_invoice$total_amount4","_invoice$items","_invoice$items2","clearAllWorkOrders","deleteWorkOrder","workOrderId","_workOrder$invoices2","_invoice$total_amount5","_invoice$total_amount6","_invoice$items3","checked","_inv$items3","_workOrder$total_amou","_invoice$total_amount7","_invoice$items4","_invoice$items5","itemIndex","unit_code_display","Treasury","accounts","setAccounts","selectedAccount","setSelectedAccount","showTransferModal","setShowTransferModal","transferData","setTransferData","to","manualTransaction","setManualTransaction","account","showManualForm","setShowManualForm","fetchTreasuryData","balancesResponse","transactionsResponse","invoicesResponse","expensesResponse","balances","manualTransactions","updatedAccounts","paymentMethodMap","push","account_id","handleTransfer","fromAccount","acc","from_account","to_account","handleManualTransaction","clearAccount","accountId","resetTreasury","firstConfirm","secondConfirm","finalConfirm","prompt","deleted_treasury_transactions","_error$response22","_error$response22$dat","selectedAccountData","Backup","backups","setBackups","driveFiles","setDriveFiles","driveStatus","setDriveStatus","creating","setCreating","activeTab","setActiveTab","showDeleteModal","setShowDeleteModal","deletePassword","setDeletePassword","deleteType","setDeleteType","deleteDate","setDeleteDate","fetchBackups","fetchDriveStatus","fetchDriveFiles","openDeleteModal","handleBulkDelete","count","deleted_count","_error$response23","_error$response23$dat","checkBackupStatus","backupId","attempts","arguments","undefined","total_documents","createBackup","backup_id","_error$response24","_error$response24$dat","downloadBackup","createdAt","timestamp","replace","filename","_error$response25","_error$response25$dat","handleFileUpload","endsWith","action","uploadBackupFile","restoreDirectly","collections_restored","location","reload","_error$response26","_error$response26$dat","restoreBackup","toLocaleString","_error$response27","_error$response27$dat","deleteBackup","_error$response28","_error$response28$dat","uploadToDrive","enabled","_error$response29","_error$response29$dat","errorMsg","downloadFromDrive","fileId","fileName","_error$response30","_error$response30$dat","restoreFromDrive","_error$response31","_error$response31$dat","deleteFromDrive","_error$response32","_error$response32$dat","switchTab","tab","backup","is_scheduled","created_by","webViewLink","rel","createdTime","size","Users","users","setUsers","newUser","setNewUser","editingUser","setEditingUser","companyInfo","setCompanyInfo","editingCompany","setEditingCompany","selectedUserPermissions","setSelectedUserPermissions","allPermissions","fetchUsers","dbUsers","hasElsawy","hasRoot","permissions","p","updatedResponse","addUser","defaultPermissions","_error$response33","_error$response33$dat","startEdit","saveEdit","currentUser","u","updatedUser","_error$response34","_error$response34$dat","deleteUser","userId","resetPassword","_error$response35","_error$response35$dat","openPermissions","tempPermissions","togglePermission","permissionKey","newPermissions","savePermissions","_error$response36","_error$response36$dat","saveCompanyInfo","_user$permissions","permission","Pricing","materialPricings","setMaterialPricings","editingPricing","setEditingPricing","newPricing","setNewPricing","price_per_mm","manufacturing_cost_client1","manufacturing_cost_client2","manufacturing_cost_client3","fetchMaterialPricings","addMaterialPricing","_error$response37","_error$response37$dat","editMaterialPricing","deleteMaterialPricing","pricingId","_error$response38","_error$response38$dat","MainTreasury","setBalance","setTransactions","transactionType","setTransactionType","setAmount","setDescription","setReference","fetchMainTreasuryData","balanceResponse","handleTransaction","endpoint","_error$response39","_error$response39$dat","_error$response40","_error$response40$dat","balance_after","performed_by","App","setCurrentPage","renderPage","AppWithAuth"],"sources":["/app/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, createContext, useContext } from 'react';\nimport './App.css';\nimport axios from 'axios';\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nconst API = `${BACKEND_URL}/api`;\n\n// Auth Context\nconst AuthContext = createContext();\n\nconst useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\nconst AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const savedUser = localStorage.getItem('user');\n    if (savedUser) {\n      setUser(JSON.parse(savedUser));\n    }\n    setIsLoading(false);\n  }, []);\n\n  const login = async (username, password) => {\n    try {\n      const response = await axios.post(`${API}/auth/login`, null, {\n        params: { username, password }\n      });\n      \n      if (response.data.success) {\n        setUser(response.data.user);\n        localStorage.setItem('user', JSON.stringify(response.data.user));\n        return true;\n      }\n      return false;\n    } catch (error) {\n      console.error('Login error:', error);\n      return false;\n    }\n  };\n\n  const logout = () => {\n    setUser(null);\n    localStorage.removeItem('user');\n  };\n\n  if (isLoading) {\n    return <div className=\"flex items-center justify-center min-h-screen\">\n      <div className=\"text-xl\">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>\n    </div>;\n  }\n\n  return (\n    <AuthContext.Provider value={{ user, login, logout }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\n// Login Component\nconst Login = () => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const { login } = useAuth();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    \n    const success = await login(username, password);\n    if (!success) {\n      setError('Ø®Ø·Ø£ ÙÙŠ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4\" dir=\"rtl\">\n      <div className=\"max-w-md w-full\">\n        {/* Login Card */}\n        <div className=\"bg-white rounded-2xl shadow-2xl p-8 border border-blue-100\">\n          {/* Header */}\n          <div className=\"text-center mb-8\">\n            <div className=\"mb-4\">\n              <img \n                src=\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\" \n                alt=\"Master Seal Logo\" \n                className=\"h-16 w-16 mx-auto rounded-full shadow-lg border-4 border-blue-100\"\n              />\n            </div>\n            <h1 className=\"text-3xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent\">Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„</h1>\n            <p className=\"text-gray-500 mt-2\">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„</p>\n            <div className=\"w-16 h-1 bg-gradient-to-r from-blue-400 to-blue-600 mx-auto mt-3 rounded-full\"></div>\n          </div>\n          \n          {/* Login Form */}\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <div className=\"space-y-2\">\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                ğŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\n              </label>\n              <input\n                type=\"text\"\n                value={username}\n                onChange={(e) => setUsername(e.target.value)}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-3 focus:ring-blue-200 focus:border-blue-400 transition-all duration-200 bg-gray-50 hover:bg-white\"\n                placeholder=\"Ø§Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\"\n                required\n              />\n            </div>\n            \n            <div className=\"space-y-2\">\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                ğŸ”’ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\n              </label>\n              <input\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-3 focus:ring-blue-200 focus:border-blue-400 transition-all duration-200 bg-gray-50 hover:bg-white\"\n                placeholder=\"Ø§Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\"\n                required\n              />\n            </div>\n            \n            {error && (\n              <div className=\"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-xl text-sm text-center animate-pulse\">\n                âš ï¸ {error}\n              </div>\n            )}\n            \n            <button\n              type=\"submit\"\n              className=\"w-full bg-gradient-to-r from-blue-600 to-blue-800 text-white py-3 px-6 rounded-xl hover:from-blue-700 hover:to-blue-900 focus:outline-none focus:ring-3 focus:ring-blue-300 transition-all duration-200 font-semibold shadow-lg hover:shadow-xl transform hover:scale-105\"\n            >\n              ğŸš€ Ø¯Ø®ÙˆÙ„\n            </button>\n          </form>\n          \n          {/* Footer */}\n          <div className=\"text-center mt-8 pt-6 border-t border-gray-100\">\n            <p className=\"text-xs text-gray-400\">Ø§Ù„Ø­Ø±ÙÙŠÙŠÙ† - Ø§Ù„Ø³Ù„Ø§Ù… - Ø£Ù…Ø§Ù… Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª</p>\n            <p className=\"text-xs text-gray-500 mt-1 font-medium\">ğŸ“ 01020630677</p>\n          </div>\n        </div>\n        \n        {/* Additional Info Card */}\n        <div className=\"mt-6 bg-white/60 backdrop-blur-sm rounded-xl p-4 text-center border border-blue-100/50\">\n          <p className=\"text-sm text-gray-600\">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…ØªÙƒØ§Ù…Ù„ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙˆØ§Ù„Ù…Ø®Ø²ÙˆÙ† ÙˆØ§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Navigation Component\nconst Navigation = ({ currentPage, onPageChange }) => {\n  const { user, logout } = useAuth();\n  const [isCollapsed, setIsCollapsed] = useState(false);\n  \n  // Dashboard is only for Elsawy\n  const elsawyPages = [\n    { key: 'dashboard', label: 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…', icon: 'ğŸ“Š' },\n    { key: 'sales', label: 'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª', icon: 'ğŸ’°' },\n    { key: 'inventory', label: 'Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø®Ø§Ù…Ø§Øª', icon: 'ğŸ“¦' },\n    { key: 'stock', label: 'Ù…Ø®Ø²Ù† Ø¥Ù†ØªØ§Ø¬', icon: 'ğŸª' },\n    { key: 'local', label: 'Ù…ÙˆØ±Ø¯ÙŠÙ†', icon: 'ğŸ­' },\n    { key: 'deferred', label: 'Ø§Ù„Ø¢Ø¬Ù„', icon: 'â³' },\n    { key: 'expenses', label: 'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª', icon: 'ğŸ’¸' },\n    { key: 'revenue', label: 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª', icon: 'ğŸ“ˆ' },\n    { key: 'treasury', label: 'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©', icon: 'ğŸ¦' },\n    { key: 'main-treasury', label: 'Ø§Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©', icon: 'ğŸ”' },\n    { key: 'invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ±', icon: 'ğŸ§¾' },\n    { key: 'deleted-invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©', icon: 'ğŸ—‘ï¸' },\n    { key: 'customer-statement', label: 'ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨', icon: 'ğŸ“‹' },\n    { key: 'settle-account', label: 'ØªØµÙÙŠØ© Ø­Ø³Ø§Ø¨', icon: 'ğŸ’µ' },\n    { key: 'work-orders', label: 'Ø£Ù…Ø± Ø´ØºÙ„', icon: 'âš™ï¸' },\n    { key: 'pricing', label: 'Ø§Ù„ØªØ³Ø¹ÙŠØ±', icon: 'ğŸ’²' },\n    { key: 'backup', label: 'Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ', icon: 'ğŸ’¾' },\n    { key: 'users', label: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†', icon: 'ğŸ‘¥' }\n  ];\n  \n  const adminPages = [\n    { key: 'sales', label: 'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª', icon: 'ğŸ’°' },\n    { key: 'inventory', label: 'Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø®Ø§Ù…Ø§Øª', icon: 'ğŸ“¦' },\n    { key: 'stock', label: 'Ù…Ø®Ø²Ù† Ø¥Ù†ØªØ§Ø¬', icon: 'ğŸª' },\n    { key: 'local', label: 'Ù…ÙˆØ±Ø¯ÙŠÙ†', icon: 'ğŸ­' },\n    { key: 'deferred', label: 'Ø§Ù„Ø¢Ø¬Ù„', icon: 'â³' },\n    { key: 'expenses', label: 'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª', icon: 'ğŸ’¸' },\n    { key: 'revenue', label: 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª', icon: 'ğŸ“ˆ' },\n    { key: 'treasury', label: 'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©', icon: 'ğŸ¦' },\n    { key: 'invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ±', icon: 'ğŸ§¾' },\n    { key: 'deleted-invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©', icon: 'ğŸ—‘ï¸' },\n    { key: 'customer-statement', label: 'ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨', icon: 'ğŸ“‹' },\n    { key: 'work-orders', label: 'Ø£Ù…Ø± Ø´ØºÙ„', icon: 'âš™ï¸' },\n    { key: 'pricing', label: 'Ø§Ù„ØªØ³Ø¹ÙŠØ±', icon: 'ğŸ’²' },\n    { key: 'backup', label: 'Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ', icon: 'ğŸ’¾' },\n    { key: 'users', label: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†', icon: 'ğŸ‘¥' }\n  ];\n  \n  const userPages = [\n    { key: 'sales', label: 'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª', icon: 'ğŸ’°' },\n    { key: 'inventory', label: 'Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø®Ø§Ù…Ø§Øª', icon: 'ğŸ“¦' },\n    { key: 'stock', label: 'Ù…Ø®Ø²Ù† Ø¥Ù†ØªØ§Ø¬', icon: 'ğŸª' },\n    { key: 'local', label: 'Ù…ÙˆØ±Ø¯ÙŠÙ†', icon: 'ğŸ­' },\n    { key: 'deferred', label: 'Ø§Ù„Ø¢Ø¬Ù„', icon: 'â³' },\n    { key: 'expenses', label: 'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª', icon: 'ğŸ’¸' },\n    { key: 'treasury', label: 'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©', icon: 'ğŸ¦' },\n    { key: 'invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ±', icon: 'ğŸ§¾' },\n    { key: 'deleted-invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©', icon: 'ğŸ—‘ï¸' },\n    { key: 'customer-statement', label: 'ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨', icon: 'ğŸ“‹' },\n    { key: 'work-orders', label: 'Ø£Ù…Ø± Ø´ØºÙ„', icon: 'âš™ï¸' },\n    { key: 'pricing', label: 'Ø§Ù„ØªØ³Ø¹ÙŠØ±', icon: 'ğŸ’²' }\n  ];\n  \n  // Only Elsawy gets dashboard access\n  const pages = user?.username === 'Elsawy' ? elsawyPages : \n               user?.role === 'admin' ? adminPages : userPages;\n\n  return (\n    <div \n      className={`bg-gradient-to-b from-blue-900 via-blue-800 to-blue-900 text-white shadow-2xl transition-all duration-300 relative ${\n        isCollapsed ? 'w-20' : 'w-80'\n      }`}\n    >\n      {/* Collapse/Expand Button */}\n      <button\n        onClick={() => setIsCollapsed(!isCollapsed)}\n        className=\"absolute -left-4 top-6 bg-blue-600 hover:bg-blue-700 text-white rounded-full p-2 shadow-lg z-50 transition-all\"\n        title={isCollapsed ? 'ØªÙˆØ³ÙŠØ¹ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©' : 'Ø·ÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©'}\n      >\n        <span className=\"text-xl\">{isCollapsed ? 'â—€' : 'â–¶'}</span>\n      </button>\n\n      {/* Header */}\n      <div className=\"p-6 border-b border-blue-700\">\n        <div className={`flex items-center ${isCollapsed ? 'justify-center' : 'space-x-3 space-x-reverse'}`}>\n          <img \n            src=\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\" \n            alt=\"Master Seal Logo\" \n            className=\"h-12 w-12 rounded-lg shadow-lg\"\n          />\n          {!isCollapsed && (\n            <div>\n              <h1 className=\"text-xl font-bold text-white\">Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„</h1>\n              <p className=\"text-xs text-blue-200\">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…ØªÙƒØ§Ù…Ù„</p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* User Info */}\n      <div className=\"p-4 bg-blue-800 border-b border-blue-700\">\n        <div className={`flex items-center ${isCollapsed ? 'justify-center flex-col space-y-2' : 'justify-between'}`}>\n          {!isCollapsed && (\n            <div>\n              <p className=\"text-sm font-medium\">Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ø§Ù‹</p>\n              <p className=\"text-lg font-bold text-blue-200\">{user?.username}</p>\n            </div>\n          )}\n          <button\n            onClick={logout}\n            className={`bg-red-500 hover:bg-red-600 rounded-lg text-sm font-medium transition-all duration-200 shadow-lg hover:shadow-xl ${\n              isCollapsed ? 'p-2' : 'px-3 py-2'\n            }`}\n            title=\"Ø®Ø±ÙˆØ¬\"\n          >\n            {isCollapsed ? 'ğŸšª' : 'Ø®Ø±ÙˆØ¬'}\n          </button>\n        </div>\n      </div>\n      \n      {/* Navigation Menu */}\n      <nav className=\"flex-1 p-4 space-y-2 overflow-y-auto\" style={{ maxHeight: 'calc(100vh - 300px)' }}>\n        {pages.map(page => (\n          <button\n            key={page.key}\n            onClick={() => onPageChange(page.key)}\n            className={`w-full flex items-center p-4 rounded-xl transition-all duration-200 group ${\n              isCollapsed ? 'justify-center' : 'space-x-3 space-x-reverse text-right'\n            } ${\n              currentPage === page.key \n                ? 'bg-white text-blue-900 shadow-lg transform scale-105' \n                : 'hover:bg-blue-700 hover:transform hover:translate-x-2'\n            }`}\n            title={isCollapsed ? page.label : ''}\n          >\n            <span className=\"text-2xl\">{page.icon}</span>\n            {!isCollapsed && (\n              <>\n                <span className=\"font-medium\">{page.label}</span>\n                {currentPage === page.key && (\n                  <div className=\"mr-auto\">\n                    <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-pulse\"></div>\n                  </div>\n                )}\n              </>\n            )}\n          </button>\n        ))}\n      </nav>\n\n      {/* Footer */}\n      {!isCollapsed && (\n        <div className=\"p-4 border-t border-blue-700 text-center\">\n          <p className=\"text-xs text-blue-300\">Ø§Ù„Ø­Ø±ÙÙŠÙŠÙ† - Ø§Ù„Ø³Ù„Ø§Ù… - Ø£Ù…Ø§Ù… Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª</p>\n          <p className=\"text-xs text-blue-400 mt-1\">01020630677</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Inventory Management Component\nconst Inventory = () => {\n  const [inventoryItems, setInventoryItems] = useState([]);\n  const [inventoryTransactions, setInventoryTransactions] = useState([]);\n  const [lowStockItems, setLowStockItems] = useState([]);\n  const [currentView, setCurrentView] = useState('items'); // items, transactions, low-stock, add-item\n  const [editingItem, setEditingItem] = useState(null); // Ù„Ù„ØªØ¹Ø¯ÙŠÙ„\n  const [newItem, setNewItem] = useState({\n    material_type: 'NBR',\n    inner_diameter: '',\n    outer_diameter: '',\n    available_pieces: '',  // ØªØºÙŠÙŠØ± Ù…Ù† available_height Ø¥Ù„Ù‰ available_pieces\n    min_stock_level: 2,    // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ 2 Ù‚Ø·Ø¹Ø©\n    notes: ''\n  });\n  const [newTransaction, setNewTransaction] = useState({\n    material_type: 'NBR',\n    inner_diameter: '',\n    outer_diameter: '',\n    transaction_type: 'in',\n    pieces_change: '',     // ØªØºÙŠÙŠØ± Ù…Ù† height_change Ø¥Ù„Ù‰ pieces_change\n    reason: '',\n    notes: ''\n  });\n  const [searchTerm, setSearchTerm] = useState('');\n\n  const materialTypes = ['NBR', 'BUR', 'BT', 'VT', 'BOOM'];\n\n  // Fetch functions\n  const fetchInventoryItems = async () => {\n    try {\n      const response = await axios.get(`${API}/inventory`);\n      setInventoryItems(response.data || []);\n    } catch (error) {\n      console.error('Error fetching inventory items:', error);\n    }\n  };\n\n  const fetchInventoryTransactions = async () => {\n    try {\n      const response = await axios.get(`${API}/inventory-transactions`);\n      setInventoryTransactions(response.data || []);\n    } catch (error) {\n      console.error('Error fetching inventory transactions:', error);\n    }\n  };\n\n  const fetchLowStockItems = async () => {\n    try {\n      const response = await axios.get(`${API}/inventory/low-stock`);\n      setLowStockItems(response.data || []);\n    } catch (error) {\n      console.error('Error fetching low stock items:', error);\n    }\n  };\n\n  useEffect(() => {\n    fetchInventoryItems();\n    fetchInventoryTransactions();\n    fetchLowStockItems();\n  }, []);\n\n  // Add or Update inventory item\n  const addInventoryItem = async () => {\n    if (!newItem.material_type || !newItem.inner_diameter || \n        !newItem.outer_diameter || !newItem.available_pieces) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      if (editingItem) {\n        // Update existing item\n        await axios.put(`${API}/inventory/${editingItem.id}`, {\n          ...newItem,\n          inner_diameter: parseFloat(newItem.inner_diameter),\n          outer_diameter: parseFloat(newItem.outer_diameter),\n          available_pieces: parseInt(newItem.available_pieces),\n          min_stock_level: parseInt(newItem.min_stock_level || 2)\n        });\n        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n        setEditingItem(null);\n      } else {\n        // Add new item\n        await axios.post(`${API}/inventory`, {\n          ...newItem,\n          inner_diameter: parseFloat(newItem.inner_diameter),\n          outer_diameter: parseFloat(newItem.outer_diameter),\n          available_pieces: parseInt(newItem.available_pieces),\n          min_stock_level: parseInt(newItem.min_stock_level || 2)\n        });\n        alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n      }\n      \n      fetchInventoryItems();\n      fetchLowStockItems();\n      setCurrentView('items');\n      setNewItem({\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        available_pieces: '',\n        min_stock_level: 2,\n        notes: ''\n      });\n    } catch (error) {\n      console.error('Error saving inventory item:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  // Add inventory transaction\n  const addInventoryTransaction = async () => {\n    if (!newTransaction.material_type || !newTransaction.inner_diameter || \n        !newTransaction.outer_diameter || !newTransaction.pieces_change || !newTransaction.reason) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      const transactionData = {\n        ...newTransaction,\n        inner_diameter: parseFloat(newTransaction.inner_diameter),\n        outer_diameter: parseFloat(newTransaction.outer_diameter),\n        pieces_change: newTransaction.transaction_type === 'out' \n          ? -Math.abs(parseInt(newTransaction.pieces_change))\n          : Math.abs(parseInt(newTransaction.pieces_change))\n      };\n\n      await axios.post(`${API}/inventory-transactions`, transactionData);\n      \n      fetchInventoryItems();\n      fetchInventoryTransactions();\n      fetchLowStockItems();\n      setNewTransaction({\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        transaction_type: 'in',\n        pieces_change: '',\n        reason: '',\n        notes: ''\n      });\n      alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ù…Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error adding inventory transaction:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ù…Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ø¬Ø±Ø¯: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  // Filter and sort items based on search\n  const filteredItems = inventoryItems.filter(item =>\n    item.material_type.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    item.inner_diameter.toString().includes(searchTerm.toLowerCase()) ||\n    item.outer_diameter.toString().includes(searchTerm.toLowerCase()) ||\n    item.notes?.toLowerCase().includes(searchTerm.toLowerCase())\n  ).sort((a, b) => {\n    // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\n    const materialPriority = { 'BUR': 1, 'NBR': 2, 'BT': 3, 'BOOM': 4, 'VT': 5 };\n    const aPriority = materialPriority[a.material_type] || 6;\n    const bPriority = materialPriority[b.material_type] || 6;\n    \n    if (aPriority !== bPriority) {\n      return aPriority - bPriority;\n    }\n    // Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)\n    if (a.inner_diameter !== b.inner_diameter) {\n      return a.inner_diameter - b.inner_diameter;\n    }\n    return a.outer_diameter - b.outer_diameter;\n  });\n\n  const filteredTransactions = inventoryTransactions.filter(transaction =>\n    transaction.reason.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    transaction.material_type.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    transaction.notes?.toLowerCase().includes(searchTerm.toLowerCase())\n  ).sort((a, b) => {\n    // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\n    const materialPriority = { 'BUR': 1, 'NBR': 2, 'BT': 3, 'BOOM': 4, 'VT': 5 };\n    const aPriority = materialPriority[a.material_type] || 6;\n    const bPriority = materialPriority[b.material_type] || 6;\n    \n    if (aPriority !== bPriority) {\n      return aPriority - bPriority;\n    }\n    // Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ) Ø«Ù… Ø§Ù„ØªØ§Ø±ÙŠØ®\n    if (a.inner_diameter !== b.inner_diameter) {\n      return a.inner_diameter - b.inner_diameter;\n    }\n    if (a.outer_diameter !== b.outer_diameter) {\n      return a.outer_diameter - b.outer_diameter;\n    }\n    return new Date(b.date) - new Date(a.date); // Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹\n  });\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-3xl font-bold\">Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø®Ø§Ù…Ø§Øª</h1>\n        <div className=\"flex space-x-4 space-x-reverse\">\n          <button\n            onClick={() => setCurrentView('items')}\n            className={`px-4 py-2 rounded ${currentView === 'items' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¬Ø±Ø¯\n          </button>\n          <button\n            onClick={() => setCurrentView('transactions')}\n            className={`px-4 py-2 rounded ${currentView === 'transactions' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ø¬Ø±Ø¯\n          </button>\n          <button\n            onClick={() => setCurrentView('low-stock')}\n            className={`px-4 py-2 rounded ${currentView === 'low-stock' ? 'bg-red-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ù…Ø®Ø²ÙˆÙ† Ù…Ù†Ø®ÙØ¶ ({lowStockItems.length})\n          </button>\n          <button\n            onClick={() => setCurrentView('excel')}\n            className={`px-4 py-2 rounded ${currentView === 'excel' ? 'bg-green-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥ÙƒØ³Ù„\n          </button>\n          <button\n            onClick={() => setCurrentView('add-item')}\n            className={`px-4 py-2 rounded ${currentView === 'add-item' ? 'bg-green-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø¬Ø¯ÙŠØ¯\n          </button>\n        </div>\n      </div>\n\n      {/* Search Bar */}\n      <div className=\"mb-4\">\n        <input\n          type=\"text\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          placeholder=\"Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¬Ø±Ø¯...\"\n          className=\"w-full p-3 border border-gray-300 rounded-lg\"\n        />\n      </div>\n\n      {/* Inventory Items View */}\n      {currentView === 'items' && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¬Ø±Ø¯</h3>\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full border-collapse border border-gray-300\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø§Ø¯Ø©</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</th>\n                  <th className=\"border border-gray-300 p-2\">Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹ Ø§Ù„Ù…ØªØ§Ø­Ø©</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø§Ù„Ø©</th>\n                  <th className=\"border border-gray-300 p-2\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n                </tr>\n              </thead>\n              <tbody>\n                {filteredItems.map(item => (\n                  <tr key={item.id}>\n                    <td className=\"border border-gray-300 p-2 font-semibold\">{item.material_type}</td>\n                    <td className=\"border border-gray-300 p-2\">{item.inner_diameter}</td>\n                    <td className=\"border border-gray-300 p-2\">{item.outer_diameter}</td>\n                    <td className={`border border-gray-300 p-2 font-semibold ${\n                      item.available_pieces <= item.min_stock_level ? 'text-red-600' : 'text-green-600'\n                    }`}>\n                      {item.available_pieces} Ù‚Ø·Ø¹Ø©\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">{item.min_stock_level} Ù‚Ø·Ø¹Ø©</td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <span className={`px-2 py-1 rounded text-sm ${\n                        item.available_pieces <= item.min_stock_level ? 'bg-red-100 text-red-800' : 'bg-green-100 text-green-800'\n                      }`}>\n                        {item.available_pieces <= item.min_stock_level ? 'Ù…Ù†Ø®ÙØ¶' : 'Ø·Ø¨ÙŠØ¹ÙŠ'}\n                      </span>\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">{item.notes || '-'}</td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <div className=\"flex space-x-2 space-x-reverse\">\n                        <button\n                          onClick={() => {\n                            setEditingItem(item);\n                            setNewItem({\n                              material_type: item.material_type,\n                              inner_diameter: item.inner_diameter,\n                              outer_diameter: item.outer_diameter,\n                              available_pieces: item.available_pieces,\n                              min_stock_level: item.min_stock_level,\n                              notes: item.notes || ''\n                            });\n                            setCurrentView('add-item');\n                          }}\n                          className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                        >\n                          ØªØ¹Ø¯ÙŠÙ„\n                        </button>\n                        <button\n                          onClick={async () => {\n                            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ØµØ±ØŸ')) {\n                              try {\n                                await axios.delete(`${API}/inventory/${item.id}`);\n                                alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ù†ØµØ± Ø¨Ù†Ø¬Ø§Ø­');\n                                fetchInventoryItems();\n                              } catch (error) {\n                                console.error('Error deleting item:', error);\n                                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¹Ù†ØµØ±');\n                              }\n                            }\n                          }}\n                          className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                        >\n                          Ø­Ø°Ù\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {/* Transactions View */}\n      {currentView === 'transactions' && (\n        <div>\n          {/* Add Transaction Form */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø§Ù…Ù„Ø© Ø¬Ø±Ø¯</h3>\n            <div className=\"grid grid-cols-3 gap-4\">\n              <select\n                value={newTransaction.material_type}\n                onChange={(e) => setNewTransaction({...newTransaction, material_type: e.target.value})}\n                className=\"p-2 border border-gray-300 rounded\"\n              >\n                {materialTypes.map(type => (\n                  <option key={type} value={type}>{type}</option>\n                ))}\n              </select>\n              <input\n                type=\"number\"\n                value={newTransaction.inner_diameter}\n                onChange={(e) => setNewTransaction({...newTransaction, inner_diameter: e.target.value})}\n                placeholder=\"Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <input\n                type=\"number\"\n                value={newTransaction.outer_diameter}\n                onChange={(e) => setNewTransaction({...newTransaction, outer_diameter: e.target.value})}\n                placeholder=\"Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <select\n                value={newTransaction.transaction_type}\n                onChange={(e) => setNewTransaction({...newTransaction, transaction_type: e.target.value})}\n                className=\"p-2 border border-gray-300 rounded\"\n              >\n                <option value=\"in\">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…Ø®Ø²ÙˆÙ†</option>\n                <option value=\"out\">Ø®ØµÙ… Ù…Ù† Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</option>\n              </select>\n              <input\n                type=\"number\"\n                step=\"1\"\n                value={newTransaction.pieces_change}\n                onChange={(e) => setNewTransaction({...newTransaction, pieces_change: e.target.value})}\n                placeholder=\"Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <input\n                type=\"text\"\n                value={newTransaction.reason}\n                onChange={(e) => setNewTransaction({...newTransaction, reason: e.target.value})}\n                placeholder=\"Ø³Ø¨Ø¨ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            <div className=\"mt-4\">\n              <input\n                type=\"text\"\n                value={newTransaction.notes}\n                onChange={(e) => setNewTransaction({...newTransaction, notes: e.target.value})}\n                placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            <button\n              onClick={addInventoryTransaction}\n              className=\"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n            >\n              ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©\n            </button>\n          </div>\n\n          {/* Transactions List */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø³Ø¬Ù„ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ø¬Ø±Ø¯</h3>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full border-collapse border border-gray-300\">\n                <thead>\n                  <tr className=\"bg-gray-100\">\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                    <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø§Ø¯Ø©</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª</th>\n                    <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©</th>\n                    <th className=\"border border-gray-300 p-2\">Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø³Ø¨Ø¨</th>\n                    <th className=\"border border-gray-300 p-2\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {filteredTransactions.map(transaction => (\n                    <tr key={transaction.id}>\n                      <td className=\"border border-gray-300 p-2\">\n                        {new Date(transaction.date).toLocaleDateString('ar-EG')}\n                      </td>\n                      <td className=\"border border-gray-300 p-2\">{transaction.material_type}</td>\n                      <td className=\"border border-gray-300 p-2\">\n                        {transaction.inner_diameter} Ã— {transaction.outer_diameter}\n                      </td>\n                      <td className=\"border border-gray-300 p-2\">\n                        <span className={`px-2 py-1 rounded text-sm ${\n                          transaction.transaction_type === 'in' \n                            ? 'bg-green-100 text-green-800' \n                            : 'bg-red-100 text-red-800'\n                        }`}>\n                          {transaction.transaction_type === 'in' ? 'Ø¥Ø¶Ø§ÙØ©' : 'Ø®ØµÙ…'}\n                        </span>\n                      </td>\n                      <td className={`border border-gray-300 p-2 font-semibold ${\n                        transaction.pieces_change > 0 ? 'text-green-600' : 'text-red-600'\n                      }`}>\n                        {transaction.pieces_change > 0 ? '+' : ''}{transaction.pieces_change} Ù‚Ø·Ø¹Ø©\n                      </td>\n                      <td className=\"border border-gray-300 p-2 font-semibold\">\n                        {transaction.remaining_pieces} Ù‚Ø·Ø¹Ø©\n                      </td>\n                      <td className=\"border border-gray-300 p-2\">{transaction.reason}</td>\n                      <td className=\"border border-gray-300 p-2\">{transaction.notes || '-'}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Low Stock Items View */}\n      {currentView === 'low-stock' && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4 text-red-600\">\n            Ø¹Ù†Ø§ØµØ± Ø¨Ù…Ø®Ø²ÙˆÙ† Ù…Ù†Ø®ÙØ¶ ({lowStockItems.length})\n          </h3>\n          {lowStockItems.length === 0 ? (\n            <p className=\"text-green-600 text-center py-8\">\n              âœ… Ø¬Ù…ÙŠØ¹ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¬Ø±Ø¯ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ\n            </p>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full border-collapse border border-gray-300\">\n                <thead>\n                  <tr className=\"bg-red-50\">\n                    <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø§Ø¯Ø©</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰</th>\n                    <th className=\"border border-gray-300 p-2\">Ù†Ù‚Øµ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {lowStockItems.map(item => (\n                    <tr key={item.id} className=\"bg-red-50\">\n                      <td className=\"border border-gray-300 p-2 font-semibold\">{item.material_type}</td>\n                      <td className=\"border border-gray-300 p-2\">\n                        {item.inner_diameter} Ã— {item.outer_diameter}\n                      </td>\n                      <td className=\"border border-gray-300 p-2 font-semibold text-red-600\">\n                        {item.available_pieces} Ù‚Ø·Ø¹Ø©\n                      </td>\n                      <td className=\"border border-gray-300 p-2\">{item.min_stock_level} Ù‚Ø·Ø¹Ø©</td>\n                      <td className=\"border border-gray-300 p-2 font-semibold text-red-600\">\n                        {Math.max(0, item.min_stock_level - item.available_pieces)} Ù‚Ø·Ø¹Ø©\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Add/Edit Item View */}\n      {currentView === 'add-item' && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">\n            {editingItem ? 'ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯' : 'Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø¬Ø±Ø¯ Ø¬Ø¯ÙŠØ¯'}\n          </h3>\n          <div className=\"grid grid-cols-2 gap-4\">\n            <select\n              value={newItem.material_type}\n              onChange={(e) => setNewItem({...newItem, material_type: e.target.value})}\n              className=\"p-2 border border-gray-300 rounded\"\n            >\n              {materialTypes.map(type => (\n                <option key={type} value={type}>{type}</option>\n              ))}\n            </select>\n            <input\n              type=\"number\"\n              value={newItem.inner_diameter}\n              onChange={(e) => setNewItem({...newItem, inner_diameter: e.target.value})}\n              placeholder=\"Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ\"\n              className=\"p-2 border border-gray-300 rounded\"\n            />\n            <input\n              type=\"number\"\n              value={newItem.outer_diameter}\n              onChange={(e) => setNewItem({...newItem, outer_diameter: e.target.value})}\n              placeholder=\"Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ\"\n              className=\"p-2 border border-gray-300 rounded\"\n            />\n            <input\n              type=\"number\"\n              step=\"1\"\n              value={newItem.available_pieces}\n              onChange={(e) => setNewItem({...newItem, available_pieces: e.target.value})}\n              placeholder=\"Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹ Ø§Ù„Ù…ØªØ§Ø­Ø©\"\n              className=\"p-2 border border-gray-300 rounded\"\n            />\n            <input\n              type=\"number\"\n              value={newItem.min_stock_level}\n              onChange={(e) => setNewItem({...newItem, min_stock_level: e.target.value})}\n              placeholder=\"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ù…Ø®Ø²ÙˆÙ†\"\n              className=\"p-2 border border-gray-300 rounded\"\n            />\n            <input\n              type=\"text\"\n              value={newItem.notes}\n              onChange={(e) => setNewItem({...newItem, notes: e.target.value})}\n              placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n              className=\"p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          <button\n            onClick={addInventoryItem}\n            className=\"mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n          >\n            {editingItem ? 'ØªØ­Ø¯ÙŠØ« Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯' : 'Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯'}\n          </button>\n          {editingItem && (\n            <button\n              onClick={() => {\n                setEditingItem(null);\n                setNewItem({\n                  material_type: 'NBR',\n                  inner_diameter: '',\n                  outer_diameter: '',\n                  available_pieces: '',\n                  min_stock_level: 2,\n                  notes: ''\n                });\n                setCurrentView('items');\n              }}\n              className=\"mt-4 mr-2 bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n            >\n              Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„\n            </button>\n          )}\n        </div>\n      )}\n\n      {/* Excel Management View */}\n      {currentView === 'excel' && (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          {/* Inventory Excel Management */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¯Ø§Ø±Ø© Ù…Ù„ÙØ§Øª Ø§Ù„Ø¬Ø±Ø¯ - Excel</h3>\n            \n            {/* Export Inventory */}\n            <div className=\"mb-6\">\n              <h4 className=\"font-medium mb-2\">ØªØµØ¯ÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø±Ø¯</h4>\n              <button\n                onClick={async () => {\n                  try {\n                    const response = await axios.get(`${API}/excel/export/inventory`, {\n                      responseType: 'blob'\n                    });\n                    const url = window.URL.createObjectURL(new Blob([response.data]));\n                    const link = document.createElement('a');\n                    link.href = url;\n                    link.setAttribute('download', `inventory_export_${new Date().toISOString().split('T')[0]}.xlsx`);\n                    document.body.appendChild(link);\n                    link.click();\n                    link.remove();\n                    alert('ØªÙ… ØªØµØ¯ÙŠØ± Ù…Ù„Ù Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n                  } catch (error) {\n                    console.error('Error exporting inventory:', error);\n                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù');\n                  }\n                }}\n                className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n              >\n                ØªØµØ¯ÙŠØ± Ø¬Ø±Ø¯ Excel\n              </button>\n            </div>\n\n            {/* Import Inventory */}\n            <div>\n              <h4 className=\"font-medium mb-2\">Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø±Ø¯</h4>\n              <input\n                type=\"file\"\n                accept=\".xlsx,.xls\"\n                onChange={async (e) => {\n                  const file = e.target.files[0];\n                  if (!file) return;\n                  \n                  const formData = new FormData();\n                  formData.append('file', file);\n                  \n                  try {\n                    const response = await axios.post(`${API}/excel/import/inventory`, formData, {\n                      headers: { 'Content-Type': 'multipart/form-data' }\n                    });\n                    alert(`ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ ${response.data.imported_count} Ø¹Ù†ØµØ± Ø¨Ù†Ø¬Ø§Ø­`);\n                    if (response.data.errors.length > 0) {\n                      console.warn('Import errors:', response.data.errors);\n                    }\n                    fetchInventoryItems();\n                  } catch (error) {\n                    console.error('Error importing inventory:', error);\n                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù');\n                  }\n                  \n                  e.target.value = '';\n                }}\n                className=\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100\"\n              />\n              <p className=\"text-sm text-gray-600 mt-2\">\n                Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©: material_type, inner_diameter, outer_diameter, available_pieces\n              </p>\n            </div>\n          </div>\n\n          {/* Raw Materials Excel Management */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù… - Excel</h3>\n            \n            {/* Export Raw Materials */}\n            <div className=\"mb-6\">\n              <h4 className=\"font-medium mb-2\">ØªØµØ¯ÙŠØ± Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…</h4>\n              <button\n                onClick={async () => {\n                  try {\n                    const response = await axios.get(`${API}/excel/export/raw-materials`, {\n                      responseType: 'blob'\n                    });\n                    const url = window.URL.createObjectURL(new Blob([response.data]));\n                    const link = document.createElement('a');\n                    link.href = url;\n                    link.setAttribute('download', `raw_materials_export_${new Date().toISOString().split('T')[0]}.xlsx`);\n                    document.body.appendChild(link);\n                    link.click();\n                    link.remove();\n                    alert('ØªÙ… ØªØµØ¯ÙŠØ± Ù…Ù„Ù Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­');\n                  } catch (error) {\n                    console.error('Error exporting raw materials:', error);\n                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù');\n                  }\n                }}\n                className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n              >\n                ØªØµØ¯ÙŠØ± Ù…ÙˆØ§Ø¯ Ø®Ø§Ù… Excel\n              </button>\n            </div>\n\n            {/* Import Raw Materials */}\n            <div>\n              <h4 className=\"font-medium mb-2\">Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…</h4>\n              <input\n                type=\"file\"\n                accept=\".xlsx,.xls\"\n                onChange={async (e) => {\n                  const file = e.target.files[0];\n                  if (!file) return;\n                  \n                  const formData = new FormData();\n                  formData.append('file', file);\n                  \n                  try {\n                    const response = await axios.post(`${API}/excel/import/raw-materials`, formData, {\n                      headers: { 'Content-Type': 'multipart/form-data' }\n                    });\n                    alert(`ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ ${response.data.imported_count} Ù…Ø§Ø¯Ø© Ø®Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­`);\n                    if (response.data.errors.length > 0) {\n                      console.warn('Import errors:', response.data.errors);\n                    }\n                  } catch (error) {\n                    console.error('Error importing raw materials:', error);\n                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù');\n                  }\n                  \n                  e.target.value = '';\n                }}\n                className=\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100\"\n              />\n              <p className=\"text-sm text-gray-600 mt-2\">\n                Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©: material_type, inner_diameter, outer_diameter, height, pieces_count, unit_code, cost_per_mm\n              </p>\n            </div>\n          </div>\n\n          {/* Instructions */}\n          <div className=\"bg-yellow-50 p-6 rounded-lg shadow-md md:col-span-2\">\n            <h3 className=\"text-lg font-semibold mb-4\">ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¥ÙƒØ³Ù„</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <h4 className=\"font-medium mb-2\">ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:</h4>\n                <ul className=\"text-sm text-gray-700 list-disc list-inside space-y-1\">\n                  <li>ÙŠØªÙ… ØªØµØ¯ÙŠØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</li>\n                  <li>Ø§Ù„Ù…Ù„Ù ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ØªÙ†Ø³ÙŠÙ‚ Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ¹Ø¯ÙŠÙ„</li>\n                  <li>ÙŠÙ…ÙƒÙ† ÙØªØ­ Ø§Ù„Ù…Ù„Ù ÙÙŠ Excel Ø£Ùˆ Google Sheets</li>\n                </ul>\n              </div>\n              <div>\n                <h4 className=\"font-medium mb-2\">Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:</h4>\n                <ul className=\"text-sm text-gray-700 list-disc list-inside space-y-1\">\n                  <li>ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ù…Ù„Ù Ù…Ù† Ù†ÙˆØ¹ .xlsx Ø£Ùˆ .xls</li>\n                  <li>Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù…ÙˆØ¬ÙˆØ¯Ø©</li>\n                  <li>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© Ù„Ù† ØªØªØ£Ø«Ø± (ÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø£Ùˆ Ø§Ù„Ø¥Ø¶Ø§ÙØ©)</li>\n                  <li>Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯ Ù…Ø¹ Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø³ØªÙˆØ±Ø¯Ø©</li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Local Products Management Component\nconst Local = () => {\n  const [suppliers, setSuppliers] = useState([]);\n  const [localProducts, setLocalProducts] = useState([]);\n  const [supplierTransactions, setSupplierTransactions] = useState([]);\n  const [currentView, setCurrentView] = useState('suppliers'); // suppliers, products, transactions\n  const [newSupplier, setNewSupplier] = useState({ name: '', phone: '', address: '' });\n  const [newProduct, setNewProduct] = useState({ name: '', supplier_id: '', purchase_price: '', selling_price: '', current_stock: 0 });\n  const [newTransaction, setNewTransaction] = useState({ supplier_id: '', transaction_type: 'purchase', amount: '', description: '', product_name: '', quantity: '', unit_price: '', payment_method: 'cash' });\n  const [selectedSupplier, setSelectedSupplier] = useState('');\n  const [paymentAmount, setPaymentAmount] = useState('');\n  const [paymentMethod, setPaymentMethod] = useState('cash');\n\n  // Fetch data functions\n  const fetchSuppliers = async () => {\n    try {\n      const response = await axios.get(`${API}/suppliers`);\n      setSuppliers(response.data || []);\n    } catch (error) {\n      console.error('Error fetching suppliers:', error);\n    }\n  };\n\n  const fetchLocalProducts = async () => {\n    try {\n      const response = await axios.get(`${API}/local-products`);\n      setLocalProducts(response.data || []);\n    } catch (error) {\n      console.error('Error fetching local products:', error);\n    }\n  };\n\n  const fetchSupplierTransactions = async () => {\n    try {\n      const response = await axios.get(`${API}/supplier-transactions`);\n      setSupplierTransactions(response.data || []);\n    } catch (error) {\n      console.error('Error fetching supplier transactions:', error);\n    }\n  };\n\n  useEffect(() => {\n    fetchSuppliers();\n    fetchLocalProducts();\n    fetchSupplierTransactions();\n  }, []);\n\n  // Add supplier\n  const addSupplier = async () => {\n    if (!newSupplier.name.trim()) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯');\n      return;\n    }\n\n    try {\n      if (newSupplier.id) {\n        // Update existing supplier\n        await axios.put(`${API}/suppliers/${newSupplier.id}`, {\n          name: newSupplier.name,\n          phone: newSupplier.phone,\n          address: newSupplier.address\n        });\n        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n      } else {\n        // Add new supplier\n        await axios.post(`${API}/suppliers`, newSupplier);\n        alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n      }\n      \n      fetchSuppliers();\n      setNewSupplier({ name: '', phone: '', address: '' });\n    } catch (error) {\n      console.error('Error saving supplier:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…ÙˆØ±Ø¯: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const editSupplier = (supplier) => {\n    // Fill the form with supplier data for editing\n    setNewSupplier({\n      id: supplier.id,\n      name: supplier.name,\n      phone: supplier.phone || '',\n      address: supplier.address || ''\n    });\n  };\n\n  const deleteSupplier = async (supplierId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ±Ø¯ØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡.')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/suppliers/${supplierId}`);\n      fetchSuppliers();\n      fetchLocalProducts(); // Refresh products as they might be affected\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting supplier:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ±Ø¯: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  // Add local product\n  const addLocalProduct = async () => {\n    if (!newProduct.name.trim() || !newProduct.supplier_id || !newProduct.purchase_price || !newProduct.selling_price) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      if (newProduct.id) {\n        // Update existing product\n        await axios.put(`${API}/local-products/${newProduct.id}`, {\n          name: newProduct.name,\n          supplier_id: newProduct.supplier_id,\n          purchase_price: parseFloat(newProduct.purchase_price),\n          selling_price: parseFloat(newProduct.selling_price),\n          current_stock: parseInt(newProduct.current_stock || 0)\n        });\n        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­');\n      } else {\n        // Add new product\n        await axios.post(`${API}/local-products`, {\n          ...newProduct,\n          purchase_price: parseFloat(newProduct.purchase_price),\n          selling_price: parseFloat(newProduct.selling_price),\n          current_stock: parseInt(newProduct.current_stock || 0)\n        });\n        alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­');\n      }\n      \n      fetchLocalProducts();\n      setNewProduct({ name: '', supplier_id: '', purchase_price: '', selling_price: '', current_stock: 0 });\n    } catch (error) {\n      console.error('Error saving local product:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const editLocalProduct = (product) => {\n    // Fill the form with product data for editing\n    setNewProduct({\n      id: product.id,\n      name: product.name,\n      supplier_id: product.supplier_id,\n      purchase_price: product.purchase_price.toString(),\n      selling_price: product.selling_price.toString(),\n      current_stock: product.current_stock || 0\n    });\n  };\n\n  const deleteLocalProduct = async (productId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡.')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/local-products/${productId}`);\n      fetchLocalProducts();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting local product:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  // Pay supplier\n  const paySupplier = async () => {\n    if (!selectedSupplier || !paymentAmount) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙˆØ±Ø¯ ÙˆØ¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº');\n      return;\n    }\n\n    try {\n      await axios.post(`${API}/supplier-payment?supplier_id=${selectedSupplier}&amount=${paymentAmount}&payment_method=${paymentMethod}`);\n      fetchSuppliers();\n      fetchSupplierTransactions();\n      setSelectedSupplier('');\n      setPaymentAmount('');\n      alert('ØªÙ… Ø¯ÙØ¹ Ø§Ù„Ù…Ø¨Ù„Øº Ù„Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error paying supplier:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¯ÙØ¹ Ø§Ù„Ù…Ø¨Ù„Øº');\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-3xl font-bold\">Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</h1>\n        <div className=\"flex space-x-4 space-x-reverse\">\n          <button\n            onClick={() => setCurrentView('suppliers')}\n            className={`px-4 py-2 rounded ${currentView === 'suppliers' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†\n          </button>\n          <button\n            onClick={() => setCurrentView('products')}\n            className={`px-4 py-2 rounded ${currentView === 'products' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª\n          </button>\n          <button\n            onClick={() => setCurrentView('transactions')}\n            className={`px-4 py-2 rounded ${currentView === 'transactions' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª\n          </button>\n          <button\n            onClick={() => setCurrentView('payments')}\n            className={`px-4 py-2 rounded ${currentView === 'payments' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø³Ø¯Ø§Ø¯ Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†\n          </button>\n        </div>\n      </div>\n\n      {/* Suppliers View */}\n      {currentView === 'suppliers' && (\n        <div>\n          {/* Add New Supplier */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ±Ø¯ Ø¬Ø¯ÙŠØ¯</h3>\n            <div className=\"grid grid-cols-3 gap-4\">\n              <input\n                type=\"text\"\n                value={newSupplier.name}\n                onChange={(e) => setNewSupplier({...newSupplier, name: e.target.value})}\n                placeholder=\"Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <input\n                type=\"text\"\n                value={newSupplier.phone}\n                onChange={(e) => setNewSupplier({...newSupplier, phone: e.target.value})}\n                placeholder=\"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <input\n                type=\"text\"\n                value={newSupplier.address}\n                onChange={(e) => setNewSupplier({...newSupplier, address: e.target.value})}\n                placeholder=\"Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            <button\n              onClick={addSupplier}\n              className=\"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n            >\n              Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ±Ø¯\n            </button>\n          </div>\n\n          {/* Suppliers List */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</h3>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full border-collapse border border-gray-300\">\n                <thead>\n                  <tr className=\"bg-gray-100\">\n                    <th className=\"border border-gray-300 p-2\">Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‡Ø§ØªÙ</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>\n                    <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</th>\n                    <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯ÙÙˆØ¹</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ­Ù‚</th>\n                    <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {suppliers.map(supplier => (\n                    <tr key={supplier.id}>\n                      <td className=\"border border-gray-300 p-2 font-semibold\">{supplier.name}</td>\n                      <td className=\"border border-gray-300 p-2\">{supplier.phone || '-'}</td>\n                      <td className=\"border border-gray-300 p-2\">{supplier.address || '-'}</td>\n                      <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {(supplier.total_purchases || 0).toFixed(2)}</td>\n                      <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {(supplier.total_paid || 0).toFixed(2)}</td>\n                      <td className={`border border-gray-300 p-2 font-semibold ${(supplier.balance || 0) > 0 ? 'text-red-600' : 'text-green-600'}`}>\n                        Ø¬.Ù… {(supplier.balance || 0).toFixed(2)}\n                      </td>\n                      <td className=\"border border-gray-300 p-2\">\n                        <div className=\"flex space-x-2 space-x-reverse\">\n                          <button\n                            onClick={() => editSupplier(supplier)}\n                            className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                            title=\"ØªØ­Ø±ÙŠØ±\"\n                          >\n                            âœï¸\n                          </button>\n                          <button\n                            onClick={() => deleteSupplier(supplier.id)}\n                            className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                            title=\"Ø­Ø°Ù\"\n                          >\n                            ğŸ—‘ï¸\n                          </button>\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Products View */}\n      {currentView === 'products' && (\n        <div>\n          {/* Add New Product */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ù…Ø­Ù„ÙŠ Ø¬Ø¯ÙŠØ¯</h3>\n            <div className=\"grid grid-cols-2 gap-4\">\n              <input\n                type=\"text\"\n                value={newProduct.name}\n                onChange={(e) => setNewProduct({...newProduct, name: e.target.value})}\n                placeholder=\"Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <select\n                value={newProduct.supplier_id}\n                onChange={(e) => setNewProduct({...newProduct, supplier_id: e.target.value})}\n                className=\"p-2 border border-gray-300 rounded\"\n              >\n                <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ±Ø¯</option>\n                {suppliers.map(supplier => (\n                  <option key={supplier.id} value={supplier.id}>{supplier.name}</option>\n                ))}\n              </select>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                value={newProduct.purchase_price}\n                onChange={(e) => setNewProduct({...newProduct, purchase_price: e.target.value})}\n                placeholder=\"Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                value={newProduct.selling_price}\n                onChange={(e) => setNewProduct({...newProduct, selling_price: e.target.value})}\n                placeholder=\"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            <button\n              onClick={addLocalProduct}\n              className=\"mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n            >\n              Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬\n            </button>\n          </div>\n\n          {/* Products List */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©</h3>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full border-collapse border border-gray-300\">\n                <thead>\n                  <tr className=\"bg-gray-100\">\n                    <th className=\"border border-gray-300 p-2\">Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…ÙˆØ±Ø¯</th>\n                    <th className=\"border border-gray-300 p-2\">Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡</th>\n                    <th className=\"border border-gray-300 p-2\">Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ</th>\n                    <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ø§Ø¹</th>\n                    <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {localProducts.map(product => (\n                    <tr key={product.id}>\n                      <td className=\"border border-gray-300 p-2 font-semibold\">{product.name}</td>\n                      <td className=\"border border-gray-300 p-2\">{product.supplier_name}</td>\n                      <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {product.purchase_price.toFixed(2)}</td>\n                      <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {product.selling_price.toFixed(2)}</td>\n                      <td className=\"border border-gray-300 p-2\">{product.current_stock || 0}</td>\n                      <td className=\"border border-gray-300 p-2\">{product.total_sold || 0}</td>\n                      <td className=\"border border-gray-300 p-2\">\n                        <div className=\"flex space-x-2 space-x-reverse\">\n                          <button\n                            onClick={() => editLocalProduct(product)}\n                            className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                            title=\"ØªØ­Ø±ÙŠØ±\"\n                          >\n                            âœï¸\n                          </button>\n                          <button\n                            onClick={() => deleteLocalProduct(product.id)}\n                            className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                            title=\"Ø­Ø°Ù\"\n                          >\n                            ğŸ—‘ï¸\n                          </button>\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Transactions View */}\n      {currentView === 'transactions' && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</h3>\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full border-collapse border border-gray-300\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…ÙˆØ±Ø¯</th>\n                  <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø¨Ù„Øº</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙˆØµÙ</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ù†ØªØ¬</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙƒÙ…ÙŠØ©</th>\n                </tr>\n              </thead>\n              <tbody>\n                {supplierTransactions.map(transaction => (\n                  <tr key={transaction.id}>\n                    <td className=\"border border-gray-300 p-2\">\n                      {new Date(transaction.date).toLocaleDateString('ar-EG')}\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">{transaction.supplier_name}</td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <span className={`px-2 py-1 rounded text-sm ${\n                        transaction.transaction_type === 'purchase' \n                          ? 'bg-red-100 text-red-800' \n                          : 'bg-green-100 text-green-800'\n                      }`}>\n                        {transaction.transaction_type === 'purchase' ? 'Ø´Ø±Ø§Ø¡' : 'Ø¯ÙØ¹'}\n                      </span>\n                    </td>\n                    <td className={`border border-gray-300 p-2 font-semibold ${\n                      transaction.transaction_type === 'purchase' ? 'text-red-600' : 'text-green-600'\n                    }`}>\n                      Ø¬.Ù… {transaction.amount.toFixed(2)}\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">{transaction.description}</td>\n                    <td className=\"border border-gray-300 p-2\">{transaction.product_name || '-'}</td>\n                    <td className=\"border border-gray-300 p-2\">{transaction.quantity || '-'}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {/* Payments View */}\n      {currentView === 'payments' && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ø³Ø¯Ø§Ø¯ Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</h3>\n          <div className=\"grid grid-cols-3 gap-4 mb-6\">\n            <select\n              value={selectedSupplier}\n              onChange={(e) => setSelectedSupplier(e.target.value)}\n              className=\"p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ±Ø¯</option>\n              {suppliers.filter(s => (s.balance || 0) > 0).map(supplier => (\n                <option key={supplier.id} value={supplier.id}>\n                  {supplier.name} - Ù…Ø³ØªØ­Ù‚: Ø¬.Ù… {(supplier.balance || 0).toFixed(2)}\n                </option>\n              ))}\n            </select>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={paymentAmount}\n              onChange={(e) => setPaymentAmount(e.target.value)}\n              placeholder=\"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹\"\n              className=\"p-2 border border-gray-300 rounded\"\n            />\n            <select\n              value={paymentMethod}\n              onChange={(e) => setPaymentMethod(e.target.value)}\n              className=\"p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"cash\">Ù†Ù‚Ø¯ÙŠ</option>\n              <option value=\"vodafone_elsawy\">ÙÙˆØ¯Ø§ÙÙˆÙ† 010</option>\n              <option value=\"vodafone_wael\">ÙƒØ§Ø´ 0100</option>\n              <option value=\"instapay\">Ø§Ù†Ø³ØªØ§ Ø¨Ø§ÙŠ</option>\n            </select>\n          </div>\n          <button\n            onClick={paySupplier}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n          >\n            Ø¯ÙØ¹ Ø§Ù„Ù…Ø¨Ù„Øº\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Dashboard Component\nconst Dashboard = () => {\n  const { user } = useAuth();\n  \n  // Only Elsawy can access dashboard\n  if (user?.username !== 'Elsawy') {\n    return (\n      <div className=\"p-6\" dir=\"rtl\">\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\n          <strong>ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­!</strong> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ù…Ø®ØµØµØ© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Elsawy ÙÙ‚Ø·.\n        </div>\n      </div>\n    );\n  }\n\n  const [stats, setStats] = useState({\n    total_sales: 0,\n    total_expenses: 0,\n    net_profit: 0,\n    total_unpaid: 0,\n    invoice_count: 0,\n    customer_count: 0\n  });\n\n  useEffect(() => {\n    fetchStats();\n  }, []);\n\n  const fetchStats = async () => {\n    try {\n      const response = await axios.get(`${API}/dashboard/stats`);\n      setStats(response.data);\n    } catch (error) {\n      console.error('Error fetching stats:', error);\n    }\n  };\n\n  const clearAllData = async () => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) return;\n    \n    try {\n      // Clear all data from backend\n      await axios.delete(`${API}/customers/clear-all`);\n      await axios.delete(`${API}/raw-materials/clear-all`);\n      await axios.delete(`${API}/finished-products/clear-all`);\n      await axios.delete(`${API}/invoices/clear-all`);\n      await axios.delete(`${API}/expenses/clear-all`);\n      await axios.delete(`${API}/payments/clear-all`);\n      await axios.delete(`${API}/work-orders/clear-all`);\n      \n      // Refresh dashboard stats\n      fetchStats();\n      \n      alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');\n    } catch (error) {\n      console.error('Error clearing all data:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');\n    }\n  };\n\n  const printReport = (reportType) => {\n    const currentDate = new Date().toLocaleDateString('ar-EG');\n    let printContent = `\n      <div style=\"font-family: Arial, sans-serif; direction: rtl; text-align: right;\">\n        <div style=\"text-align: center; margin-bottom: 20px;\">\n          <h1>Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„</h1>\n          <p>Ø§Ù„Ø­Ø±ÙÙŠØ§Ù† Ø´Ø§Ø±Ø¹ Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª - 01020630677</p>\n          <h2>ØªÙ‚Ø±ÙŠØ± Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>\n          <p>Ø§Ù„ØªØ§Ø±ÙŠØ®: ${currentDate}</p>\n        </div>\n        <table style=\"width: 100%; border-collapse: collapse;\">\n          <tr>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\"><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª:</strong></td>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\">Ø¬.Ù… ${stats.total_sales.toFixed(2)}</td>\n          </tr>\n          <tr>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\"><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª:</strong></td>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\">Ø¬.Ù… ${stats.total_expenses.toFixed(2)}</td>\n          </tr>\n          <tr>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\"><strong>ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­:</strong></td>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\">Ø¬.Ù… ${stats.net_profit.toFixed(2)}</td>\n          </tr>\n          <tr>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\"><strong>Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø©:</strong></td>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\">Ø¬.Ù… ${stats.total_unpaid.toFixed(2)}</td>\n          </tr>\n          <tr>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\"><strong>Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ±:</strong></td>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\">${stats.invoice_count}</td>\n          </tr>\n          <tr>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\"><strong>Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡:</strong></td>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\">${stats.customer_count}</td>\n          </tr>\n        </table>\n      </div>\n    `;\n    \n    const printWindow = window.open('', '_blank');\n    printWindow.document.write(printContent);\n    printWindow.document.close();\n    printWindow.print();\n  };\n\n  return (\n    <div className=\"space-y-6\" dir=\"rtl\">\n      {/* Header Section */}\n      <div className=\"bg-gradient-to-r from-blue-600 to-blue-800 rounded-xl p-6 text-white shadow-lg\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-3xl font-bold mb-2\">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>\n            <p className=\"text-blue-100\">Ù…Ø±Ø­Ø¨Ø§Ù‹ {user?.username} - Ø¥Ù„ÙŠÙƒ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù†Ø´Ø§Ø·</p>\n          </div>\n          <div className=\"text-6xl opacity-20\">ğŸ“Š</div>\n        </div>\n        \n        <div className=\"flex flex-wrap space-x-4 space-x-reverse mt-6\">\n          <button \n            onClick={clearAllData}\n            className=\"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105\">\n            ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n          </button>\n          <button \n            onClick={fetchStats}\n            className=\"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105\">\n            ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => printReport('dashboard')}\n            className=\"bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105\">\n            ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n          <select className=\"bg-white text-gray-700 border-0 rounded-lg px-4 py-3 shadow-lg focus:ring-2 focus:ring-blue-300 font-medium\">\n            <option>ğŸ“… ÙŠÙˆÙ…ÙŠ</option>\n            <option>ğŸ“† Ø£Ø³Ø¨ÙˆØ¹ÙŠ</option>\n            <option>ğŸ“Š Ø´Ù‡Ø±ÙŠ</option>\n            <option>ğŸ“ˆ Ø³Ù†ÙˆÙŠ</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {/* Total Sales */}\n        <div className=\"bg-gradient-to-br from-green-400 to-green-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold opacity-90\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</h3>\n              <p className=\"text-3xl font-bold mt-2\">\n                Ø¬.Ù… {stats.total_sales.toFixed(2)}\n              </p>\n            </div>\n            <div className=\"text-5xl opacity-30\">ğŸ’°</div>\n          </div>\n        </div>\n        \n        {/* Total Expenses */}\n        <div className=\"bg-gradient-to-br from-red-400 to-red-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold opacity-90\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>\n              <p className=\"text-3xl font-bold mt-2\">\n                Ø¬.Ù… {stats.total_expenses.toFixed(2)}\n              </p>\n            </div>\n            <div className=\"text-5xl opacity-30\">ğŸ’¸</div>\n          </div>\n        </div>\n        \n        {/* Net Profit */}\n        <div className=\"bg-gradient-to-br from-blue-400 to-blue-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold opacity-90\">ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­</h3>\n              <p className=\"text-3xl font-bold mt-2\">\n                Ø¬.Ù… {stats.net_profit.toFixed(2)}\n              </p>\n            </div>\n            <div className=\"text-5xl opacity-30\">ğŸ“ˆ</div>\n          </div>\n        </div>\n        \n        {/* Unpaid Amount */}\n        <div className=\"bg-gradient-to-br from-orange-400 to-orange-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold opacity-90\">Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø©</h3>\n              <p className=\"text-3xl font-bold mt-2\">\n                Ø¬.Ù… {stats.total_unpaid.toFixed(2)}\n              </p>\n            </div>\n            <div className=\"text-5xl opacity-30\">â³</div>\n          </div>\n        </div>\n        \n        {/* Invoice Count */}\n        <div className=\"bg-gradient-to-br from-purple-400 to-purple-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold opacity-90\">Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ±</h3>\n              <p className=\"text-3xl font-bold mt-2\">\n                {stats.invoice_count}\n              </p>\n            </div>\n            <div className=\"text-5xl opacity-30\">ğŸ§¾</div>\n          </div>\n        </div>\n        \n        {/* Customer Count */}\n        <div className=\"bg-gradient-to-br from-teal-400 to-teal-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold opacity-90\">Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h3>\n              <p className=\"text-3xl font-bold mt-2\">\n                {stats.customer_count}\n              </p>\n            </div>\n            <div className=\"text-5xl opacity-30\">ğŸ‘¥</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Sales Component\nconst Sales = () => {\n  const [customers, setCustomers] = useState([]);\n  const [newCustomer, setNewCustomer] = useState('');\n  const [selectedCustomer, setSelectedCustomer] = useState('');\n  const [suppliers, setSuppliers] = useState([]); // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†\n  const [supervisorName, setSupervisorName] = useState(''); // Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØªØµÙ†ÙŠØ¹\n  const [invoiceTitle, setInvoiceTitle] = useState(''); // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n  const [currentItem, setCurrentItem] = useState({\n    seal_type: 'RSL',\n    material_type: 'NBR',\n    inner_diameter: '',\n    outer_diameter: '',\n    height: '',\n    quantity: 1,\n    unit_price: '',\n    product_type: 'manufactured' // manufactured Ø£Ùˆ local\n  });\n  // New state for dual measurement inputs\n  const [measurements, setMeasurements] = useState({\n    inner_diameter_mm: '',\n    inner_diameter_inch: '',\n    outer_diameter_mm: '',\n    outer_diameter_inch: '',\n    height_mm: '',\n    height_inch: '',\n    wall_height_mm: '',\n    wall_height_inch: ''\n  });\n  const [localProduct, setLocalProduct] = useState({\n    product_size: '',      // Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ù†ØªØ¬\n    product_type: '',      // Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬\n    purchase_price: '',\n    selling_price: '',\n    supplier: ''\n  });\n  const [items, setItems] = useState([]);\n  const [paymentMethod, setPaymentMethod] = useState('Ù†Ù‚Ø¯ÙŠ');\n  const [discount, setDiscount] = useState(0); // Ø§Ù„Ø®ØµÙ…\n  const [discountType, setDiscountType] = useState('amount'); // Ù†ÙˆØ¹ Ø§Ù„Ø®ØµÙ…: amount Ø£Ùˆ percentage\n  const [compatibilityResults, setCompatibilityResults] = useState(null);\n  const [selectedMaterial, setSelectedMaterial] = useState(null);\n  const [selectedMaterials, setSelectedMaterials] = useState([]); // Ø®Ø§Ù…Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© Ù…Ø®ØªØ§Ø±Ø©\n  const [measurementUnit, setMeasurementUnit] = useState('Ù…Ù…'); // Ø¨ÙˆØµØ© Ø£Ùˆ Ù…Ù…\n  const [wallHeight, setWallHeight] = useState(''); // Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø© Ù„Ù„Ù€ W types\n  const [clientType, setClientType] = useState(1); // Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù„ØªØ³Ø¹ÙŠØ± (1, 2, 3)\n\n  // Measurement conversion functions\n  const mmToInch = (mm) => {\n    if (!mm || mm === '') return '';\n    return (parseFloat(mm) / 25.4).toFixed(4);\n  };\n\n  const inchToMm = (inch) => {\n    if (!inch || inch === '') return '';\n    return (parseFloat(inch) * 25.4).toFixed(2);\n  };\n\n  // Handle measurement input changes with auto-conversion\n  const handleMeasurementChange = (field, value, unit) => {\n    const newMeasurements = { ...measurements };\n    \n    if (unit === 'mm') {\n      newMeasurements[`${field}_mm`] = value;\n      newMeasurements[`${field}_inch`] = mmToInch(value);\n    } else {\n      newMeasurements[`${field}_inch`] = value;\n      newMeasurements[`${field}_mm`] = inchToMm(value);\n    }\n    \n    setMeasurements(newMeasurements);\n    \n    // Update currentItem with mm values (for backend compatibility)\n    const mmValue = parseFloat(newMeasurements[`${field}_mm`]) || '';\n    setCurrentItem({\n      ...currentItem,\n      [field]: mmValue\n    });\n  };\n\n  const sealTypes = ['RSL', 'RS', 'RSS', 'RSE', 'B17', 'B3', 'B14', 'B1', 'R15', 'R17', 'W1', 'W4', 'W5', 'W11', 'WBT', 'XR', 'CH', 'VR'];\n  const materialTypes = ['NBR', 'BUR', 'BT', 'VT', 'BOOM'];\n\n  useEffect(() => {\n    fetchCustomers();\n    fetchSuppliers();\n  }, []);\n\n  const fetchCustomers = async () => {\n    try {\n      const response = await axios.get(`${API}/customers`);\n      // Sort customers alphabetically by name\n      const sortedCustomers = (response.data || []).sort((a, b) => \n        a.name.localeCompare(b.name, 'ar')\n      );\n      setCustomers(sortedCustomers);\n    } catch (error) {\n      console.error('Error fetching customers:', error);\n    }\n  };\n\n  const fetchSuppliers = async () => {\n    try {\n      const response = await axios.get(`${API}/suppliers`);\n      setSuppliers(response.data || []);\n    } catch (error) {\n      console.error('Error fetching suppliers:', error);\n    }\n  };\n\n  // Calculate automatic pricing based on material and client type\n  const calculateAutomaticPrice = async (material, height, clientType) => {\n    try {\n      const response = await axios.post(`${API}/calculate-price`, null, {\n        params: {\n          material_type: material.material_type,\n          inner_diameter: material.inner_diameter,\n          outer_diameter: material.outer_diameter,\n          height: height,\n          client_type: clientType\n        }\n      });\n      \n      return response.data;\n    } catch (error) {\n      console.log('No pricing found for this material combination:', error);\n      return null;\n    }\n  };\n\n  // Confirm multi-material selection and calculate pricing\n  const confirmMultiMaterialSelection = async () => {\n    try {\n      // Calculate total pricing for all selected materials\n      let totalPrice = 0;\n      const height = parseFloat(currentItem.height);\n      \n      for (const selected of selectedMaterials) {\n        const pricing = await calculateAutomaticPrice(selected.material, height, clientType);\n        if (pricing) {\n          totalPrice += pricing.total_price * selected.seals;\n        }\n      }\n      \n      // Update the current item with the calculated price\n      setCurrentItem({\n        ...currentItem,\n        unit_price: (totalPrice / parseInt(currentItem.quantity)).toFixed(2)\n      });\n      \n      // Set the first material as the selected material for compatibility\n      if (selectedMaterials.length > 0) {\n        setSelectedMaterial(selectedMaterials[0].material);\n      }\n      \n      alert(`âœ… ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø®Ø§Ù…Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!\n\nğŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±:\n${selectedMaterials.map(sel => `- ${sel.material.unit_code}: ${sel.seals} Ø³ÙŠÙ„`).join('\\n')}\n\nğŸ’° Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${totalPrice.toFixed(2)} Ø¬.Ù…\nğŸ’° Ø³Ø¹Ø± Ø§Ù„Ø³ÙŠÙ„ Ø§Ù„ÙˆØ§Ø­Ø¯: ${(totalPrice / parseInt(currentItem.quantity)).toFixed(2)} Ø¬.Ù…`);\n      \n    } catch (error) {\n      console.error('Error confirming multi-material selection:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±');\n    }\n  };\n\n  const checkCompatibility = async () => {\n    if (!currentItem.inner_diameter || !currentItem.outer_diameter || !currentItem.height) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n    \n    let innerDiameter = parseFloat(currentItem.inner_diameter);\n    let outerDiameter = parseFloat(currentItem.outer_diameter);\n    let height = parseFloat(currentItem.height);\n    \n    if (isNaN(innerDiameter) || isNaN(outerDiameter) || isNaN(height)) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø£Ø±Ù‚Ø§Ù… ØµØ­ÙŠØ­Ø© Ù„Ù„Ù…Ù‚Ø§Ø³Ø§Øª');\n      return;\n    }\n    \n    // Convert from inches to millimeters if needed\n    if (measurementUnit === 'Ø¨ÙˆØµØ©') {\n      innerDiameter = innerDiameter * 25.4;\n      outerDiameter = outerDiameter * 25.4;\n      height = height * 25.4;\n      \n      console.log(`ØªØ­ÙˆÙŠÙ„ Ù…Ù† Ø¨ÙˆØµØ© Ø¥Ù„Ù‰ Ù…Ù„Ù„ÙŠÙ…ØªØ±:\n        Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ: ${currentItem.inner_diameter} Ø¨ÙˆØµØ© = ${innerDiameter.toFixed(1)} Ù…Ù…\n        Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ: ${currentItem.outer_diameter} Ø¨ÙˆØµØ© = ${outerDiameter.toFixed(1)} Ù…Ù…\n        Ø§Ù„Ø§Ø±ØªÙØ§Ø¹: ${currentItem.height} Ø¨ÙˆØµØ© = ${height.toFixed(1)} Ù…Ù…`);\n    }\n    \n    try {\n      const response = await axios.post(`${API}/compatibility-check`, {\n        seal_type: currentItem.seal_type,\n        material_type: currentItem.material_type,\n        inner_diameter: innerDiameter,\n        outer_diameter: outerDiameter,\n        height: height\n      });\n      setCompatibilityResults(response.data);\n    } catch (error) {\n      console.error('Error checking compatibility:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„ØªÙˆØ§ÙÙ‚');\n    }\n  };\n\n  const addItem = () => {\n    if (currentItem.product_type === 'manufactured') {\n      // Validation for manufactured products - check if at least one measurement is filled\n      const hasInnerDiameter = measurements.inner_diameter_mm || measurements.inner_diameter_inch;\n      const hasOuterDiameter = measurements.outer_diameter_mm || measurements.outer_diameter_inch;\n      const hasHeight = measurements.height_mm || measurements.height_inch;\n      \n      if (!hasInnerDiameter || !hasOuterDiameter || !hasHeight || !currentItem.unit_price) {\n        alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© (Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª ÙˆØ§Ù„Ø³Ø¹Ø±)');\n        return;\n      }\n\n      // Use mm values (they're automatically kept in sync by handleMeasurementChange)\n      const innerDiameter = parseFloat(currentItem.inner_diameter);\n      const outerDiameter = parseFloat(currentItem.outer_diameter);\n      const height = parseFloat(currentItem.height);\n      const wallHeightValue = parseFloat(measurements.wall_height_mm) || null;\n\n      const item = {\n        ...currentItem,\n        inner_diameter: innerDiameter,\n        outer_diameter: outerDiameter,\n        height: height,\n        quantity: parseInt(currentItem.quantity),\n        unit_price: parseFloat(currentItem.unit_price),\n        total_price: parseFloat(currentItem.unit_price) * parseInt(currentItem.quantity),\n        wall_height: wallHeightValue,\n        // Store original display values for both units\n        display_measurements: {\n          inner_diameter_mm: measurements.inner_diameter_mm,\n          inner_diameter_inch: measurements.inner_diameter_inch,\n          outer_diameter_mm: measurements.outer_diameter_mm,\n          outer_diameter_inch: measurements.outer_diameter_inch,\n          height_mm: measurements.height_mm,\n          height_inch: measurements.height_inch,\n          wall_height_mm: measurements.wall_height_mm,\n          wall_height_inch: measurements.wall_height_inch\n        },\n        material_used: selectedMaterial ? selectedMaterial.unit_code : null,\n        material_details: selectedMaterial ? {\n          id: selectedMaterial.id,\n          unit_code: selectedMaterial.unit_code,\n          inner_diameter: selectedMaterial.inner_diameter,\n          outer_diameter: selectedMaterial.outer_diameter,\n          height: selectedMaterial.height,\n          material_type: selectedMaterial.material_type,\n          is_finished_product: selectedMaterial.is_finished_product || false\n        } : {\n          // Ø¥Ø±Ø³Ø§Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø­ØªÙ‰ Ø¨Ø¯ÙˆÙ† Ø§Ø®ØªÙŠØ§Ø± Ù…Ø§Ø¯Ø© Ù…Ø­Ø¯Ø¯Ø©\n          material_type: currentItem.material_type,\n          inner_diameter: parseFloat(currentItem.inner_diameter),\n          outer_diameter: parseFloat(currentItem.outer_diameter),\n          is_finished_product: false\n        },\n        // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø®Ø§Ù…Ø§Øª Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©\n        selected_materials: selectedMaterials.length > 0 ? selectedMaterials.map(sel => ({\n          unit_code: sel.material.unit_code,\n          material_type: sel.material.material_type,\n          inner_diameter: sel.material.inner_diameter,\n          outer_diameter: sel.material.outer_diameter,\n          height: sel.material.height,\n          seals_count: sel.seals,\n          id: sel.material.id\n        })) : null\n      };\n\n      setItems([...items, item]);\n      setCurrentItem({\n        seal_type: 'RSL',\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        height: '',\n        quantity: 1,\n        unit_price: '',\n        product_type: 'manufactured'\n      });\n      setMeasurements({\n        inner_diameter_mm: '',\n        inner_diameter_inch: '',\n        outer_diameter_mm: '',\n        outer_diameter_inch: '',\n        height_mm: '',\n        height_inch: '',\n        wall_height_mm: '',\n        wall_height_inch: ''\n      });\n    } else {\n      // Validation for local products\n      if (!localProduct.product_size || !localProduct.product_type || !localProduct.selling_price || !localProduct.supplier || !localProduct.purchase_price) {\n        alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠ');\n        return;\n      }\n\n      const product_name = `${localProduct.product_size} - ${localProduct.product_type}`;\n\n      const item = {\n        // Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©ØŒ Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ØµÙ†Ø¹Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† null\n        seal_type: null,\n        material_type: null, \n        inner_diameter: null,\n        outer_diameter: null,\n        height: null,\n        product_type: 'local',\n        product_name: product_name,\n        product_size: localProduct.product_size,\n        product_type_name: localProduct.product_type,\n        supplier: localProduct.supplier,\n        purchase_price: parseFloat(localProduct.purchase_price),\n        selling_price: parseFloat(localProduct.selling_price),\n        quantity: parseInt(currentItem.quantity),\n        unit_price: parseFloat(localProduct.selling_price), // Use selling price as unit price\n        total_price: parseFloat(localProduct.selling_price) * parseInt(currentItem.quantity),\n        // Store local product details\n        local_product_details: {\n          product_size: localProduct.product_size,\n          product_type: localProduct.product_type,\n          supplier: localProduct.supplier,\n          purchase_price: parseFloat(localProduct.purchase_price),\n          selling_price: parseFloat(localProduct.selling_price)\n        }\n      };\n\n      setItems([...items, item]);\n      setLocalProduct({\n        product_size: '',\n        product_type: '',\n        purchase_price: '',\n        selling_price: '',\n        supplier: ''\n      });\n      setCurrentItem({\n        seal_type: 'RSL',\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        height: '',\n        quantity: 1,\n        unit_price: '',\n        product_type: 'manufactured'\n      });\n      setMeasurements({\n        inner_diameter_mm: '',\n        inner_diameter_inch: '',\n        outer_diameter_mm: '',\n        outer_diameter_inch: '',\n        height_mm: '',\n        height_inch: '',\n        wall_height_mm: '',\n        wall_height_inch: ''\n      });\n    }\n    \n    setCompatibilityResults(null);\n    setSelectedMaterial(null);\n    setSelectedMaterials([]); // Ù…Ø³Ø­ Ø§Ù„Ø®Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©\n  };\n\n  const editItem = (index) => {\n    const item = items[index];\n    \n    // Set current item for editing\n    setCurrentItem({\n      seal_type: item.seal_type || 'RSL',\n      material_type: item.material_type || 'NBR',\n      inner_diameter: item.inner_diameter?.toString() || '',\n      outer_diameter: item.outer_diameter?.toString() || '',\n      height: item.height?.toString() || '',\n      quantity: item.quantity || 1,\n      unit_price: item.unit_price?.toString() || '',\n      product_type: item.product_type || (item.local_product_details ? 'local' : 'manufactured')\n    });\n    \n    // Set measurements for dual input fields (assuming values are in mm from database)\n    setMeasurements({\n      inner_diameter_mm: item.inner_diameter?.toString() || '',\n      inner_diameter_inch: mmToInch(item.inner_diameter) || '',\n      outer_diameter_mm: item.outer_diameter?.toString() || '',\n      outer_diameter_inch: mmToInch(item.outer_diameter) || '',\n      height_mm: item.height?.toString() || '',\n      height_inch: mmToInch(item.height) || '',\n      wall_height_mm: item.wall_height?.toString() || '',\n      wall_height_inch: mmToInch(item.wall_height) || ''\n    });\n    \n    // Set wall height if exists\n    if (item.wall_height) {\n      setWallHeight(item.wall_height.toString());\n    }\n    \n    // Set measurement unit if exists\n    if (item.measurement_unit) {\n      setMeasurementUnit(item.measurement_unit);\n    }\n    \n    // Set local product details if exists\n    if (item.local_product_details) {\n      setLocalProduct({\n        product_size: item.local_product_details.product_size || '',\n        product_type: item.local_product_details.product_type || '',\n        purchase_price: '',\n        selling_price: item.unit_price?.toString() || '',\n        supplier: ''\n      });\n    }\n    \n    // Remove the item being edited\n    const newItems = items.filter((_, i) => i !== index);\n    setItems(newItems);\n  };\n\n  const deleteItem = (index) => {\n    if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ØµØ±ØŸ')) {\n      const newItems = items.filter((_, i) => i !== index);\n      setItems(newItems);\n    }\n  };\n\n  const [isCreatingInvoice, setIsCreatingInvoice] = useState(false);\n\n  const createInvoice = async () => {\n    // Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø± Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n    if (isCreatingInvoice) {\n      return;\n    }\n\n    if (!selectedCustomer && !newCustomer) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø£Ùˆ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯');\n      return;\n    }\n\n    if (items.length === 0) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª Ù„Ù„ÙØ§ØªÙˆØ±Ø©');\n      return;\n    }\n\n    try {\n      setIsCreatingInvoice(true); // Ø¨Ø¯Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n      \n      let customerId = selectedCustomer;\n      let customerName = '';\n\n      // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯ Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±\n      if (!selectedCustomer && newCustomer) {\n        try {\n          const customerResponse = await axios.post(`${API}/customers`, {\n            name: newCustomer,\n            phone: '',\n            address: ''\n          });\n          customerId = customerResponse.data.id;\n          customerName = newCustomer;\n          \n          // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\n          fetchCustomers();\n        } catch (customerError) {\n          // Check if it's a duplicate customer error\n          if (customerError.response?.status === 409) {\n            // Customer exists, ask user what to do\n            const existingCustomer = customers.find(c => c.name.toLowerCase() === newCustomer.toLowerCase());\n            if (existingCustomer) {\n              if (confirm(`âš ï¸ Ø§Ù„Ø¹Ù…ÙŠÙ„ \"${newCustomer}\" Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„!\\n\\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ØŸ`)) {\n                customerId = existingCustomer.id;\n                customerName = existingCustomer.name;\n                setSelectedCustomer(existingCustomer.id);\n                setNewCustomer('');\n              } else {\n                setIsCreatingInvoice(false);\n                return;\n              }\n            } else {\n              alert(`âŒ ${customerError.response.data.detail}\\n\\nÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©.`);\n              setIsCreatingInvoice(false);\n              return;\n            }\n          } else {\n            throw customerError;\n          }\n        }\n      } else {\n        const customer = customers.find(c => c.id === customerId);\n        customerName = customer ? customer.name : '';\n      }\n\n      // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ ÙˆØ§Ù„Ø®ØµÙ…\n      const subtotal = items.reduce((sum, item) => sum + item.total_price, 0);\n      const discountAmount = discountType === 'percentage' \n        ? (subtotal * parseFloat(discount || 0)) / 100\n        : parseFloat(discount || 0);\n      const totalAfterDiscount = subtotal - discountAmount;\n\n      // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n      const invoiceData = {\n        customer_id: customerId,\n        customer_name: customerName,\n        invoice_title: invoiceTitle, // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n        supervisor_name: supervisorName, // Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù\n        items: items,\n        payment_method: paymentMethod,\n        subtotal: subtotal,\n        discount: discountAmount,\n        discount_type: discountType,\n        discount_value: parseFloat(discount || 0),\n        total_after_discount: totalAfterDiscount,\n        notes: ''\n      };\n\n      const response = await axios.post(`${API}/invoices?supervisor_name=${encodeURIComponent(supervisorName)}`, invoiceData);\n      \n      if (response.data) {\n        alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');\n        \n        // Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\n        setItems([]);\n        setSelectedCustomer('');\n        setNewCustomer('');\n        setSupervisorName('');\n        setInvoiceTitle(''); // Ù…Ø³Ø­ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n        setPaymentMethod('Ù†Ù‚Ø¯ÙŠ');\n        setDiscount(0);\n        setDiscountType('amount');\n        setClientType(1); // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„\n        \n        // Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n        printInvoice(response.data);\n      }\n    } catch (error) {\n      console.error('Error creating invoice:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    } finally {\n      setIsCreatingInvoice(false); // Ø¥Ù†Ù‡Ø§Ø¡ Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡\n    }\n  };\n\n  const printInvoice = (invoice) => {\n    const printContent = `\n      <!DOCTYPE html>\n      <html dir=\"rtl\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <style>\n          body {\n            font-family: Arial, sans-serif;\n            margin: 0;\n            padding: 20px;\n            direction: rtl;\n            font-size: 15px;\n          }\n          .header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            border-bottom: 3px solid #000;\n            padding-bottom: 10px;\n            margin-bottom: 20px;\n          }\n          .company-info {\n            text-align: right;\n          }\n          .company-name {\n            font-size: 32px;\n            font-weight: bold;\n            color: #000;\n            margin: 0;\n          }\n          .company-subtitle {\n            font-size: 20px;\n            margin: 5px 0;\n            color: #666;\n          }\n          .company-details {\n            font-size: 16px;\n            margin: 2px 0;\n            color: #333;\n          }\n          .logo-section {\n            text-align: center;\n            flex: 1;\n          }\n          .invoice-title {\n            font-size: 20px;\n            font-weight: bold;\n            background-color: #ff4444;\n            color: white;\n            padding: 8px 20px;\n            border-radius: 5px;\n            display: inline-block;\n            margin-bottom: 10px;\n          }\n          .invoice-number {\n            font-size: 18px;\n            font-weight: bold;\n            color: #ff4444;\n          }\n          .customer-info {\n            display: flex;\n            justify-content: space-between;\n            margin: 20px 0;\n          }\n          .customer-details {\n            text-align: right;\n          }\n          .date-info {\n            text-align: left;\n          }\n          .products-table {\n            width: 100%;\n            border-collapse: collapse;\n            border: 2px solid #000;\n            margin: 20px 0;\n          }\n          .products-table th,\n          .products-table td {\n            border: 1px solid #000;\n            padding: 8px;\n            text-align: center;\n          }\n          .products-table th {\n            background-color: #f0f0f0;\n            font-weight: bold;\n          }\n          .footer {\n            margin-top: 30px;\n            border-top: 1px solid #ccc;\n            padding-top: 15px;\n            display: flex;\n            justify-content: space-between;\n            font-size: 12px;\n            color: #666;\n          }\n          .total-section {\n            text-align: left;\n            margin-top: 10px;\n          }\n          .total-amount {\n            font-size: 18px;\n            font-weight: bold;\n            border: 2px solid #000;\n            padding: 10px;\n            display: inline-block;\n            background-color: #f9f9f9;\n          }\n          @media print {\n            body { margin: 0; padding: 10px; }\n          }\n        </style>\n      </head>\n      <body>\n        <!-- Header Section -->\n        <div class=\"header\">\n          <div class=\"company-info\">\n            <h1 class=\"company-name\">Ø´Ø±ÙƒØ© Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„</h1>\n            <p class=\"company-subtitle\">ØªØµÙ†ÙŠØ¹ Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£ÙˆÙŠÙ„ Ø³ÙŠÙ„</p>\n            <p class=\"company-details\">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø·Ø§Ø± Ø­ØªÙ‰ Ù¥Ù Ù Ù…Ù„</p>\n            <p class=\"company-details\">Ù‡ÙŠØ¯Ø±ÙˆÙ„ÙŠÙƒ - Ù†ÙŠÙˆÙ…Ø§ØªÙŠÙƒ</p>\n          </div>\n          \n          <div class=\"logo-section\">\n            <img src=\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\" \n                 alt=\"Master Seal Logo\" \n                 style=\"max-width: 120px; max-height: 80px; margin-bottom: 10px;\">\n            <div class=\"invoice-title\">${invoice.invoice_title || 'Ø¹Ø±Ø¶ Ø³Ø¹Ø±'}</div>\n            <div class=\"invoice-number\">${invoice.invoice_number}</div>\n          </div>\n        </div>\n\n        <!-- Customer and Date Info -->\n        <div class=\"customer-info\">\n          <div class=\"customer-details\">\n            <p><strong>Ø§Ù„Ø³Ø§Ø¯Ø©:</strong> ${invoice.customer_name}</p>\n            <p><strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> ${invoice.customer_address || '........................'}</p>\n          </div>\n          <div class=\"date-info\">\n            <p><strong>ØªØ­Ø±ÙŠØ± ÙÙŠ:</strong> ${new Date(invoice.date).toLocaleDateString('ar-EG')}</p>\n            <p><strong>Date:</strong> ${new Date(invoice.date).toLocaleDateString('en-GB')}</p>\n          </div>\n        </div>\n\n        <!-- Products Table -->\n        <table class=\"products-table\">\n          <thead>\n            <tr>\n              <th style=\"width: 60px;\">Ø§Ù„Ù…Ø³Ù„Ø³Ù„<br>Item</th>\n              <th style=\"width: 80px;\">Ø§Ù„ÙƒÙ…ÙŠØ©<br>QTY</th>\n              <th style=\"width: 200px;\">Description<br>Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª</th>\n              <th style=\"width: 100px;\">Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©<br>Unit Price</th>\n              <th style=\"width: 100px;\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ<br>Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${invoice.items.map((item, index) => `\n              <tr>\n                <td>${index + 1}</td>\n                <td>${item.quantity}</td>\n                <td style=\"text-align: right;\">\n                  ${item.local_product_details ? \n                    `${item.local_product_details.product_size} - ${item.local_product_details.product_type}` : \n                    `${item.seal_type} - ${item.material_type}<br>\n                    <small>${item.inner_diameter} Ã— ${item.outer_diameter} Ã— ${item.height} Ù…Ù…${item.wall_height ? ` (Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø©: ${item.wall_height} Ù…Ù…)` : \"\"}</small>`\n                  }\n                </td>\n                <td>Ø¬.Ù… ${item.unit_price.toFixed(2)}</td>\n                <td>Ø¬.Ù… ${item.total_price.toFixed(2)}</td>\n              </tr>\n            `).join('')}\n            <!-- Empty rows for additional items -->\n            ${Array.from({length: Math.max(0, 8 - invoice.items.length)}, (_, i) => `\n              <tr style=\"height: 40px;\">\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n              </tr>\n            `).join('')}\n          </tbody>\n        </table>\n\n        <!-- Total Section -->\n        <div class=\"total-section\">\n          <div style=\"text-align: left; margin-bottom: 10px;\">\n            ${invoice.subtotal ? `\n              <div style=\"margin-bottom: 5px;\">\n                <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ: Ø¬.Ù… ${invoice.subtotal.toFixed(2)}</span>\n              </div>\n            ` : ''}\n            ${invoice.discount && invoice.discount > 0 ? `\n              <div style=\"margin-bottom: 5px; color: #d32f2f;\">\n                <span>Ø§Ù„Ø®ØµÙ…: - Ø¬.Ù… ${invoice.discount.toFixed(2)}</span>\n                ${invoice.discount_type === 'percentage' && invoice.discount_value ? \n                  ` <small>(${invoice.discount_value}%)</small>` : ''}\n              </div>\n              <hr style=\"margin: 5px 0; border: 1px solid #000;\">\n            ` : ''}\n          </div>\n          <div class=\"total-amount\">\n            Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: Ø¬.Ù… ${(invoice.total_after_discount || invoice.total_amount).toFixed(2)}\n          </div>\n        </div>\n\n        <!-- Additional Info -->\n        <div style=\"margin-top: 20px; text-align: center; font-size: 12px;\">\n          <p><strong>Ù…Ù„Ø­ÙˆØ¸Ø©:</strong> ÙÙ‚Ø· ÙˆÙ‚Ø¯Ø±Ù‡</p>\n          <div style=\"height: 30px; border-bottom: 1px solid #000; margin: 10px 40px;\"></div>\n        </div>\n\n        <!-- Footer -->\n        <div class=\"footer\">\n          <div>\n            <p><strong>Ø§Ù„ØªÙˆÙ‚ÙŠØ¹:</strong></p>\n            <p>Ù…ÙˆØ¨Ø§ÙŠÙ„: Ù Ù¡Ù Ù¢Ù Ù¦Ù£Ù Ù¦Ù§Ù§ - Ù Ù¡Ù Ù¦Ù¢Ù£Ù©Ù Ù¨Ù§Ù </p>\n            <p>ØªÙ„ÙŠÙÙˆÙ†: Ù Ù¡Ù Ù¢Ù Ù¦Ù£Ù Ù¦Ù§Ù§</p>\n          </div>\n          <div style=\"text-align: left;\">\n            <p><strong>Ø§Ù„Ù…Ø³ØªÙ„Ù…:</strong></p>\n            <p>Ø§Ù„Ø­Ø±ÙÙŠÙŠÙ† - Ø§Ù„Ø³Ù„Ø§Ù… - Ø£Ù…Ø§Ù… Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª</p>\n            <p>Ù…ÙˆØ¨Ø§ÙŠÙ„: Ù Ù¡Ù Ù¢Ù Ù¦Ù£Ù Ù¦Ù§Ù§ - Ù Ù¡Ù Ù¦Ù¢Ù£Ù©Ù Ù¨Ù§Ù </p>\n          </div>\n        </div>\n\n        <!-- Note -->\n        <div style=\"text-align: center; margin-top: 20px; font-size: 11px; color: #666;\">\n          <p>ÙŠÙ‚Ø± Ø§Ù„Ù…Ø´ØªØ±ÙŠ Ø¨Ø£Ù†Ù‡ Ù‚Ø§Ù… Ø¨Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø¨Ø¶Ø§Ø¹Ø© ÙˆÙ‚Ø¨ÙˆÙ„Ù‡Ø§</p>\n        </div>\n      </body>\n      </html>\n    `;\n    \n    const printWindow = window.open('', '_blank');\n    printWindow.document.write(printContent);\n    printWindow.document.close();\n    printWindow.print();\n  };\n\n  const clearAllInvoices = async () => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) return;\n    \n    try {\n      setItems([]);\n      alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±');\n    } catch (error) {\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <h2 className=\"text-2xl font-bold text-blue-600 mb-6\">Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</h2>\n      \n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Customer Selection */}\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„</h3>\n          \n          <div className=\"space-y-4\">\n            <div>\n              <select\n                value={selectedCustomer}\n                onChange={(e) => setSelectedCustomer(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              >\n                <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„</option>\n                {customers.map(customer => (\n                  <option key={customer.id} value={customer.id}>\n                    {customer.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n            \n            <div className=\"flex space-x-2 space-x-reverse\">\n              <div className=\"flex-1\">\n                <input\n                  type=\"text\"\n                  value={newCustomer}\n                  onChange={(e) => {\n                    const value = e.target.value;\n                    setNewCustomer(value);\n                    \n                    // Check for exact match and auto-select\n                    const exactMatch = customers.find(c => c.name.toLowerCase() === value.toLowerCase());\n                    if (exactMatch) {\n                      // Auto-select the existing customer\n                      setSelectedCustomer(exactMatch.id);\n                      setNewCustomer('');\n                      e.target.style.borderColor = '';\n                      e.target.style.backgroundColor = '';\n                      // Show brief confirmation\n                      const tempMsg = document.createElement('div');\n                      tempMsg.textContent = `âœ… ØªÙ… Ø§Ø®ØªÙŠØ§Ø±: ${exactMatch.name}`;\n                      tempMsg.className = 'text-xs text-green-600 mt-1';\n                      e.target.parentElement.appendChild(tempMsg);\n                      setTimeout(() => tempMsg.remove(), 2000);\n                    } else {\n                      // Check for potential duplicates (partial match)\n                      const partialMatch = customers.some(c => c.name.toLowerCase().includes(value.toLowerCase()) && value.length > 2);\n                      if (partialMatch && value) {\n                        e.target.style.borderColor = 'orange';\n                        e.target.style.backgroundColor = '#fff3cd';\n                      } else {\n                        e.target.style.borderColor = '';\n                        e.target.style.backgroundColor = '';\n                      }\n                    }\n                  }}\n                  placeholder=\"Ø§Ø³Ù… Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯\"\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                />\n              </div>\n              <button className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n                Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯\n              </button>\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØªØµÙ†ÙŠØ¹</label>\n              <input\n                type=\"text\"\n                value={supervisorName}\n                onChange={(e) => setSupervisorName(e.target.value)}\n                placeholder=\"Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©</label>\n              <input\n                type=\"text\"\n                value={invoiceTitle}\n                onChange={(e) => setInvoiceTitle(e.target.value)}\n                placeholder=\"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Product Entry */}\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</h3>\n          \n          {/* Product Type Selection */}\n          <div className=\"mb-4\">\n            <label className=\"block text-sm font-medium mb-2\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬</label>\n            <select\n              value={currentItem.product_type}\n              onChange={(e) => setCurrentItem({...currentItem, product_type: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"manufactured\">Ù…Ù†ØªØ¬ ØªØµÙ†ÙŠØ¹</option>\n              <option value=\"local\">Ù…Ù†ØªØ¬ Ù…Ø­Ù„ÙŠ</option>\n            </select>\n          </div>\n          \n          {/* Conditional Product Forms */}\n          {currentItem.product_type === 'manufactured' ? (\n            // Manufacturing Product Form\n            <>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„</label>\n                  <select\n                    value={currentItem.seal_type}\n                    onChange={(e) => setCurrentItem({...currentItem, seal_type: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  >\n                    {sealTypes.map(type => (\n                      <option key={type} value={type}>{type}</option>\n                    ))}\n                  </select>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</label>\n                  <select\n                    value={currentItem.material_type}\n                    onChange={(e) => setCurrentItem({...currentItem, material_type: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  >\n                    {materialTypes.map(type => (\n                      <option key={type} value={type}>{type}</option>\n                    ))}\n                  </select>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</label>\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">Ù…Ù„ÙŠÙ…ØªØ±</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.01\"\n                        value={measurements.inner_diameter_mm}\n                        onChange={(e) => handleMeasurementChange('inner_diameter', e.target.value, 'mm')}\n                        className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                        placeholder=\"Ù…Ù…\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">Ø¨ÙˆØµØ©</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.0001\"\n                        value={measurements.inner_diameter_inch}\n                        onChange={(e) => handleMeasurementChange('inner_diameter', e.target.value, 'inch')}\n                        className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                        placeholder=\"Ø¨ÙˆØµØ©\"\n                      />\n                    </div>\n                  </div>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</label>\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">Ù…Ù„ÙŠÙ…ØªØ±</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.01\"\n                        value={measurements.outer_diameter_mm}\n                        onChange={(e) => handleMeasurementChange('outer_diameter', e.target.value, 'mm')}\n                        className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                        placeholder=\"Ù…Ù…\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">Ø¨ÙˆØµØ©</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.0001\"\n                        value={measurements.outer_diameter_inch}\n                        onChange={(e) => handleMeasurementChange('outer_diameter', e.target.value, 'inch')}\n                        className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                        placeholder=\"Ø¨ÙˆØµØ©\"\n                      />\n                    </div>\n                  </div>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø³ÙŠÙ„</label>\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">Ù…Ù„ÙŠÙ…ØªØ±</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.01\"\n                        value={measurements.height_mm}\n                        onChange={(e) => handleMeasurementChange('height', e.target.value, 'mm')}\n                        className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                        placeholder=\"Ù…Ù…\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">Ø¨ÙˆØµØ©</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.0001\"\n                        value={measurements.height_inch}\n                        onChange={(e) => handleMeasurementChange('height', e.target.value, 'inch')}\n                        className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                        placeholder=\"Ø¨ÙˆØµØ©\"\n                      />\n                    </div>\n                  </div>\n                </div>\n                \n                {/* Wall Height for W-type seals */}\n                {currentItem.seal_type && currentItem.seal_type.startsWith('W') && (\n                  <div>\n                    <label className=\"block text-sm font-medium mb-1\">Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø©</label>\n                    <div className=\"grid grid-cols-2 gap-2\">\n                      <div>\n                        <label className=\"block text-xs text-gray-600 mb-1\">Ù…Ù„ÙŠÙ…ØªØ±</label>\n                        <input\n                          type=\"number\"\n                          step=\"0.01\"\n                          value={measurements.wall_height_mm}\n                          onChange={(e) => handleMeasurementChange('wall_height', e.target.value, 'mm')}\n                          className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                          placeholder=\"Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø© Ø¨Ø§Ù„Ù…Ù„ÙŠÙ…ØªØ±\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-xs text-gray-600 mb-1\">Ø¨ÙˆØµØ©</label>\n                        <input\n                          type=\"number\"\n                          step=\"0.0001\"\n                          value={measurements.wall_height_inch}\n                          onChange={(e) => handleMeasurementChange('wall_height', e.target.value, 'inch')}\n                          className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                          placeholder=\"Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø© Ø¨Ø§Ù„Ø¨ÙˆØµØ©\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n                )}\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙŠÙ„</label>\n                  <input\n                    type=\"number\"\n                    value={currentItem.quantity}\n                    onChange={(e) => setCurrentItem({...currentItem, quantity: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù„ØªØ³Ø¹ÙŠØ±</label>\n                  <select\n                    value={clientType}\n                    onChange={(e) => setClientType(parseInt(e.target.value))}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  >\n                    <option value={1}>Ø¹Ù…ÙŠÙ„ 1</option>\n                    <option value={2}>Ø¹Ù…ÙŠÙ„ 2</option>\n                    <option value={3}>Ø¹Ù…ÙŠÙ„ 3</option>\n                  </select>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø³Ø¹Ø± Ø§Ù„Ø³ÙŠÙ„ Ø§Ù„ÙˆØ§Ø­Ø¯</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={currentItem.unit_price}\n                    onChange={(e) => setCurrentItem({...currentItem, unit_price: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>\n                  <textarea\n                    value={currentItem.notes || ''}\n                    onChange={(e) => setCurrentItem({...currentItem, notes: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                    rows=\"2\"\n                    placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©...\"\n                  />\n                </div>\n                \n                <div className=\"flex items-end\">\n                  <button\n                    onClick={checkCompatibility}\n                    className=\"w-full bg-yellow-500 text-white p-2 rounded hover:bg-yellow-600\"\n                  >\n                    ÙØ­Øµ Ø§Ù„ØªÙˆØ§ÙÙ‚\n                  </button>\n                </div>\n              </div>\n            </>\n          ) : (\n            // Local Product Form\n            <>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ù†ØªØ¬</label>\n                  <input\n                    type=\"text\"\n                    value={localProduct.product_size}\n                    onChange={(e) => setLocalProduct({...localProduct, product_size: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                    placeholder=\"Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ù†ØªØ¬\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬</label>\n                  <input\n                    type=\"text\"\n                    value={localProduct.product_type}\n                    onChange={(e) => setLocalProduct({...localProduct, product_type: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                    placeholder=\"Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù…ÙˆØ±Ø¯</label>\n                  <select\n                    value={localProduct.supplier}\n                    onChange={(e) => setLocalProduct({...localProduct, supplier: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  >\n                    <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ±Ø¯</option>\n                    {suppliers.map(supplier => (\n                      <option key={supplier.id} value={supplier.name}>\n                        {supplier.name}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={localProduct.purchase_price}\n                    onChange={(e) => setLocalProduct({...localProduct, purchase_price: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                    placeholder=\"Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={localProduct.selling_price}\n                    onChange={(e) => setLocalProduct({...localProduct, selling_price: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                    placeholder=\"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ÙƒÙ…ÙŠØ©</label>\n                  <input\n                    type=\"number\"\n                    value={currentItem.quantity}\n                    onChange={(e) => setCurrentItem({...currentItem, quantity: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  />\n                </div>\n              </div>\n            </>\n          )}\n          \n          <button\n            onClick={addItem}\n            className=\"w-full bg-green-500 text-white p-2 rounded hover:bg-green-600 mt-4\"\n          >\n            Ø¥Ø¶Ø§ÙØ© Ù„Ù„ÙØ§ØªÙˆØ±Ø©\n          </button>\n        </div>\n      </div>\n\n      {/* Compatibility Results */}\n      {compatibilityResults && (\n        <div className=\"mt-6 bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ù†ØªØ§Ø¦Ø¬ ÙØ­Øµ Ø§Ù„ØªÙˆØ§ÙÙ‚</h3>\n          \n          {compatibilityResults.compatible_materials.length > 0 && (\n            <div className=\"mb-4\">\n              <h4 className=\"font-medium mb-2\">ğŸ“¦ Ù†ØªØ§Ø¦Ø¬ ÙØ­Øµ Ø§Ù„ØªÙˆØ§ÙÙ‚</h4>\n              <p className=\"text-sm text-gray-600 mb-2\">Ø§Ø®ØªØ± Ø§Ù„Ø®Ø§Ù…Ø§Øª ÙˆØ­Ø¯Ø¯ Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙŠÙ„Ø§Øª Ù…Ù† ÙƒÙ„ Ø®Ø§Ù…Ø© (Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: {currentItem.quantity} Ø³ÙŠÙ„)</p>\n              \n              {/* Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© */}\n              {selectedMaterials.length > 0 && (\n                <div className=\"mb-4 p-3 bg-blue-50 rounded border\">\n                  <h5 className=\"font-medium text-blue-800 mb-2\">Ø§Ù„Ø®Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©:</h5>\n                  <div className=\"space-y-2\">\n                    {selectedMaterials.map((selected, index) => (\n                      <div key={index} className=\"flex items-center justify-between bg-white p-2 rounded border\">\n                        <span className=\"text-sm\">\n                          {selected.material.unit_code} - {selected.material.material_type} \n                          {selected.material.inner_diameter}Ã—{selected.material.outer_diameter}Ã—{selected.material.height}\n                        </span>\n                        <div className=\"flex items-center space-x-2 space-x-reverse\">\n                          <input\n                            type=\"number\"\n                            min=\"1\"\n                            max={Math.floor(selected.material.height / (parseFloat(currentItem.height) + 2))}\n                            value={selected.seals}\n                            onChange={(e) => {\n                              const newSelected = [...selectedMaterials];\n                              newSelected[index].seals = parseInt(e.target.value) || 0;\n                              setSelectedMaterials(newSelected);\n                            }}\n                            className=\"w-16 p-1 border rounded text-center\"\n                          />\n                          <span className=\"text-xs\">Ø³ÙŠÙ„</span>\n                          <button\n                            onClick={() => {\n                              const newSelected = selectedMaterials.filter((_, i) => i !== index);\n                              setSelectedMaterials(newSelected);\n                            }}\n                            className=\"text-red-600 hover:text-red-800 text-sm\"\n                          >\n                            âœ•\n                          </button>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                  <div className=\"mt-2 text-sm\">\n                    <span className=\"font-medium\">\n                      Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: {selectedMaterials.reduce((sum, sel) => sum + sel.seals, 0)} / {currentItem.quantity} Ø³ÙŠÙ„\n                    </span>\n                    {selectedMaterials.reduce((sum, sel) => sum + sel.seals, 0) === parseInt(currentItem.quantity) && (\n                      <span className=\"text-green-600 ml-2\">âœ“ Ù…ÙƒØªÙ…Ù„</span>\n                    )}\n                  </div>\n                </div>\n              )}\n              \n              <div className=\"space-y-2 max-h-48 overflow-y-auto\">\n                {compatibilityResults.compatible_materials.map((material, index) => {\n                  const isSelected = selectedMaterials.some(sel => \n                    sel.material.unit_code === material.unit_code && \n                    sel.material.inner_diameter === material.inner_diameter &&\n                    sel.material.outer_diameter === material.outer_diameter\n                  );\n                  const maxSeals = Math.floor(material.height / (parseFloat(currentItem.height) + 2));\n                  const remainingSeals = parseInt(currentItem.quantity) - selectedMaterials.reduce((sum, sel) => sum + sel.seals, 0);\n                  \n                  return (\n                    <div key={index} \n                         className={`p-3 rounded border transition-colors ${\n                           isSelected ? 'bg-blue-100 border-blue-300' : 'bg-gray-50 hover:bg-gray-100'\n                         }`}>\n                      <div className=\"flex justify-between items-start\">\n                        <div className=\"flex-1\">\n                          <p className=\"font-medium text-blue-600\">\n                            {material.unit_code} - {material.material_type}\n                          </p>\n                          <p className=\"text-sm text-gray-600\">\n                            Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯: {material.inner_diameter} Ã— {material.outer_diameter} Ã— {material.height} Ù…Ù…\n                          </p>\n                          <p className=\"text-xs text-green-600\">\n                            ÙŠÙ…ÙƒÙ† Ø¥Ù†ØªØ§Ø¬: {maxSeals} Ø³ÙŠÙ„ ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰\n                          </p>\n                          {material.score && (\n                            <p className=\"text-xs text-gray-500\">Ù†Ø³Ø¨Ø© Ø§Ù„ØªÙˆØ§ÙÙ‚: {material.score}%</p>\n                          )}\n                        </div>\n                        {!isSelected && remainingSeals > 0 && maxSeals > 0 && (\n                          <button\n                            onClick={() => {\n                              const newSelection = {\n                                material: material,\n                                seals: Math.min(maxSeals, remainingSeals)\n                              };\n                              setSelectedMaterials([...selectedMaterials, newSelection]);\n                            }}\n                            className=\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\"\n                          >\n                            Ø§Ø®ØªÙŠØ§Ø±\n                          </button>\n                        )}\n                        {isSelected && (\n                          <div className=\"text-blue-600 text-sm font-medium\">\n                            âœ“ Ù…Ø®ØªØ§Ø±Ø©\n                          </div>\n                        )}\n                        {!isSelected && remainingSeals <= 0 && (\n                          <div className=\"text-gray-400 text-sm\">\n                            Ù…ÙƒØªÙ…Ù„\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n              \n              {/* Ø²Ø± ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± */}\n              {selectedMaterials.length > 0 && (\n                <div className=\"mt-4 flex space-x-2 space-x-reverse\">\n                  <button\n                    onClick={() => {\n                      const totalSeals = selectedMaterials.reduce((sum, sel) => sum + sel.seals, 0);\n                      if (totalSeals !== parseInt(currentItem.quantity)) {\n                        alert(`âš ï¸ Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© (${totalSeals}) Ù„Ø§ ÙŠØ³Ø§ÙˆÙŠ Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ (${currentItem.quantity})`);\n                        return;\n                      }\n                      \n                      // ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± ÙˆØ­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø±\n                      confirmMultiMaterialSelection();\n                    }}\n                    className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n                    disabled={selectedMaterials.reduce((sum, sel) => sum + sel.seals, 0) !== parseInt(currentItem.quantity)}\n                  >\n                    ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±\n                  </button>\n                  <button\n                    onClick={() => {\n                      setSelectedMaterials([]);\n                    }}\n                    className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n                  >\n                    Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±\n                  </button>\n                </div>\n              )}\n            </div>\n          )}\n          \n          {compatibilityResults.compatible_products.length > 0 && (\n            <div>\n              <h4 className=\"font-medium mb-2\">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©:</h4>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {compatibilityResults.compatible_products.map((product, index) => (\n                  <div \n                    key={index} \n                    className=\"p-3 border border-blue-300 bg-blue-50 rounded cursor-pointer hover:bg-blue-100\"\n                    onClick={() => setSelectedMaterial({\n                      unit_code: `FINISHED-${product.id}`,\n                      material_type: product.material_type,\n                      seal_type: product.seal_type,\n                      inner_diameter: product.inner_diameter,\n                      outer_diameter: product.outer_diameter,\n                      height: product.height,\n                      is_finished_product: true\n                    })}\n                  >\n                    <p><strong>Ø§Ù„Ù†ÙˆØ¹:</strong> {product.seal_type} - {product.material_type}</p>\n                    <p><strong>Ø§Ù„Ù…Ù‚Ø§Ø³:</strong> {product.inner_diameter} Ã— {product.outer_diameter} Ã— {product.height}</p>\n                    <p><strong>Ø§Ù„ÙƒÙ…ÙŠØ©:</strong> {product.quantity}</p>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {selectedMaterial && (\n            <div className=\"mt-4 p-3 bg-blue-100 rounded\">\n              <p className=\"font-semibold text-blue-800\">\n                ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø®Ø§Ù…Ø©: {selectedMaterial.unit_code} ({selectedMaterial.material_type})\n              </p>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Current Items */}\n      {items.length > 0 && (\n        <div className=\"mt-6 bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø£Ø®ÙŠØ±Ø©</h3>\n          \n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full border-collapse border border-gray-300\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„</th>\n                  <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ù‚Ø§Ø³</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙƒÙ…ÙŠØ©</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø³Ø¹Ø±</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</th>\n                  <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n                </tr>\n              </thead>\n              <tbody>\n                {items.map((item, index) => (\n                  <tr key={index}>\n                    <td className=\"border border-gray-300 p-2\">\n                      {item.local_product_details ? item.local_product_details.product_type : item.seal_type}\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">\n                      {item.local_product_details ? 'Ù…Ø­Ù„ÙŠ' : item.material_type}\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">\n                      {item.local_product_details ? \n                        `${item.local_product_details.product_size} - ${item.local_product_details.product_type}` :\n                        `${item.original_inner_diameter || item.inner_diameter} Ã— ${item.original_outer_diameter || item.outer_diameter} Ã— ${item.original_height || item.height}${item.original_wall_height ? ` (Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø©: ${item.original_wall_height})` : (item.wall_height ? ` (Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø©: ${item.wall_height})` : '')} ${item.measurement_unit || 'Ù…Ù…'}`\n                      }\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">{item.quantity}</td>\n                    <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {item.unit_price}</td>\n                    <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {item.total_price}</td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <div className=\"flex space-x-2 space-x-reverse\">\n                        <button\n                          onClick={() => editItem(index)}\n                          className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                          title=\"ØªØ­Ø±ÙŠØ±\"\n                        >\n                          âœï¸\n                        </button>\n                        <button\n                          onClick={() => deleteItem(index)}\n                          className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                          title=\"Ø­Ø°Ù\"\n                        >\n                          ğŸ—‘ï¸\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n          \n          <div className=\"mt-4 flex justify-between items-center\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</label>\n              <select\n                value={paymentMethod}\n                onChange={(e) => setPaymentMethod(e.target.value)}\n                className=\"p-2 border border-gray-300 rounded\"\n              >\n                <option value=\"Ù†Ù‚Ø¯ÙŠ\">Ù†Ù‚Ø¯ÙŠ</option>\n                <option value=\"Ø¢Ø¬Ù„\">Ø¢Ø¬Ù„</option>\n                <option value=\"ÙÙˆØ¯Ø§ÙÙˆÙ† 010\">ÙÙˆØ¯Ø§ÙÙˆÙ† 010</option>\n                <option value=\"ÙƒØ§Ø´ 0100\">ÙƒØ§Ø´ 0100</option>\n                <option value=\"Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ\">Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ</option>\n                <option value=\"ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ\">ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ</option>\n              </select>\n            </div>\n            \n            {/* Discount Section */}\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 p-4 bg-gray-50 rounded-lg\">\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø®ØµÙ…</label>\n                <select\n                  value={discountType}\n                  onChange={(e) => setDiscountType(e.target.value)}\n                  className=\"p-2 border border-gray-300 rounded w-full\"\n                >\n                  <option value=\"amount\">Ù…Ø¨Ù„Øº Ø«Ø§Ø¨Øª</option>\n                  <option value=\"percentage\">Ù†Ø³Ø¨Ø© Ù…Ø¦ÙˆÙŠØ©</option>\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">\n                  Ù‚ÙŠÙ…Ø© Ø§Ù„Ø®ØµÙ… {discountType === 'percentage' ? '(%)' : '(Ø¬.Ù…)'}\n                </label>\n                <input\n                  type=\"number\"\n                  value={discount}\n                  onChange={(e) => setDiscount(e.target.value)}\n                  className=\"p-2 border border-gray-300 rounded w-full\"\n                  placeholder=\"0\"\n                  min=\"0\"\n                  step={discountType === 'percentage' ? '0.1' : '0.01'}\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù…Ø¨Ù„Øº Ø§Ù„Ø®ØµÙ…</label>\n                <div className=\"p-2 bg-white border border-gray-300 rounded w-full\">\n                  Ø¬.Ù… {(() => {\n                    const subtotal = items.reduce((sum, item) => sum + item.total_price, 0);\n                    const discountAmount = discountType === 'percentage' \n                      ? (subtotal * parseFloat(discount || 0)) / 100\n                      : parseFloat(discount || 0);\n                    return discountAmount.toFixed(2);\n                  })()}\n                </div>\n              </div>\n            </div>\n            \n            {/* Total Section */}\n            <div className=\"mt-4 p-4 bg-blue-50 rounded-lg\">\n              <div className=\"flex justify-between items-center mb-2\">\n                <span className=\"text-lg\">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ:</span>\n                <span className=\"text-lg font-semibold\">\n                  Ø¬.Ù… {items.reduce((sum, item) => sum + item.total_price, 0).toFixed(2)}\n                </span>\n              </div>\n              <div className=\"flex justify-between items-center mb-2\">\n                <span className=\"text-lg\">Ø§Ù„Ø®ØµÙ…:</span>\n                <span className=\"text-lg font-semibold text-red-600\">\n                  - Ø¬.Ù… {(() => {\n                    const subtotal = items.reduce((sum, item) => sum + item.total_price, 0);\n                    const discountAmount = discountType === 'percentage' \n                      ? (subtotal * parseFloat(discount || 0)) / 100\n                      : parseFloat(discount || 0);\n                    return discountAmount.toFixed(2);\n                  })()}\n                </span>\n              </div>\n              <hr className=\"my-2\" />\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-xl font-bold\">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:</span>\n                <span className=\"text-xl font-bold text-green-600\">\n                  Ø¬.Ù… {(() => {\n                    const subtotal = items.reduce((sum, item) => sum + item.total_price, 0);\n                    const discountAmount = discountType === 'percentage' \n                      ? (subtotal * parseFloat(discount || 0)) / 100\n                      : parseFloat(discount || 0);\n                    return (subtotal - discountAmount).toFixed(2);\n                  })()}\n                </span>\n              </div>\n            </div>\n            \n            <div className=\"text-xl font-bold\" style={{display: 'none'}}>\n              Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: Ø¬.Ù… {items.reduce((sum, item) => sum + item.total_price, 0).toFixed(2)}\n            </div>\n          </div>\n          \n          <button\n            onClick={createInvoice}\n            disabled={isCreatingInvoice}\n            className={`w-full p-3 rounded mt-4 text-lg font-semibold ${\n              isCreatingInvoice \n                ? 'bg-gray-400 text-gray-600 cursor-not-allowed' \n                : 'bg-green-500 text-white hover:bg-green-600'\n            }`}\n          >\n            {isCreatingInvoice ? 'Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©...' : 'Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©'}\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Simple placeholder components for other pages\n// Inventory Component will be replaced with new advanced version above\n\n// Stock Component (Old Inventory functionality for Raw Materials and Finished Products)\nconst Stock = () => {\n  const [rawMaterials, setRawMaterials] = useState([]);\n  const [finishedProducts, setFinishedProducts] = useState([]);\n  const [searchTerm, setSearchTerm] = useState(''); // Ù„Ù„Ø¨Ø­Ø«\n  const [newRawMaterial, setNewRawMaterial] = useState({\n    material_type: 'NBR',\n    inner_diameter: '',\n    outer_diameter: '',\n    height: '',\n    pieces_count: '',\n    cost_per_mm: ''\n  });\n  const [newFinishedProduct, setNewFinishedProduct] = useState({\n    seal_type: 'RSL',\n    material_type: 'NBR',\n    inner_diameter: '',\n    outer_diameter: '',\n    height: '',\n    quantity: '',\n    unit_price: ''\n  });\n\n  const materialTypes = ['NBR', 'BUR', 'BT', 'VT', 'BOOM'];\n  const sealTypes = ['RSL', 'RS', 'RSS', 'RSE', 'B17', 'B3', 'B14', 'B1', 'R15', 'R17', 'W1', 'W4', 'W5', 'W11', 'WBT', 'XR', 'CH', 'VR'];\n\n  // Ø¯Ø§Ù„Ø© ØªØµÙÙŠØ© Ø§Ù„Ø¨Ø­Ø«\n  const filteredRawMaterials = rawMaterials.filter(material => \n    material.material_type.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    material.unit_code.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    material.inner_diameter.toString().includes(searchTerm) ||\n    material.outer_diameter.toString().includes(searchTerm) ||\n    material.height.toString().includes(searchTerm)\n  ).sort((a, b) => {\n    // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\n    const materialPriority = { 'BUR': 1, 'NBR': 2, 'BT': 3, 'BOOM': 4, 'VT': 5 };\n    const aPriority = materialPriority[a.material_type] || 6;\n    const bPriority = materialPriority[b.material_type] || 6;\n    \n    if (aPriority !== bPriority) {\n      return aPriority - bPriority;\n    }\n    // Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)\n    if (a.inner_diameter !== b.inner_diameter) {\n      return a.inner_diameter - b.inner_diameter;\n    }\n    return a.outer_diameter - b.outer_diameter;\n  });\n\n  const filteredFinishedProducts = finishedProducts.filter(product => \n    product.seal_type.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    product.material_type.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    product.inner_diameter.toString().includes(searchTerm) ||\n    product.outer_diameter.toString().includes(searchTerm) ||\n    product.height.toString().includes(searchTerm)\n  ).sort((a, b) => {\n    // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\n    const materialPriority = { 'BUR': 1, 'NBR': 2, 'BT': 3, 'BOOM': 4, 'VT': 5 };\n    const aPriority = materialPriority[a.material_type] || 6;\n    const bPriority = materialPriority[b.material_type] || 6;\n    \n    if (aPriority !== bPriority) {\n      return aPriority - bPriority;\n    }\n    // Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)\n    if (a.inner_diameter !== b.inner_diameter) {\n      return a.inner_diameter - b.inner_diameter;\n    }\n    return a.outer_diameter - b.outer_diameter;\n  });\n\n  useEffect(() => {\n    fetchRawMaterials();\n    fetchFinishedProducts();\n  }, []);\n\n  const fetchRawMaterials = async () => {\n    try {\n      const response = await axios.get(`${API}/raw-materials`);\n      setRawMaterials(response.data);\n    } catch (error) {\n      console.error('Error fetching raw materials:', error);\n    }\n  };\n\n  const fetchFinishedProducts = async () => {\n    try {\n      const response = await axios.get(`${API}/finished-products`);\n      setFinishedProducts(response.data);\n    } catch (error) {\n      console.error('Error fetching finished products:', error);\n    }\n  };\n\n  const addRawMaterial = async () => {\n    if (!newRawMaterial.inner_diameter || !newRawMaterial.outer_diameter || !newRawMaterial.height || !newRawMaterial.pieces_count || !newRawMaterial.cost_per_mm) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      const rawMaterial = {\n        material_type: newRawMaterial.material_type,\n        inner_diameter: parseFloat(newRawMaterial.inner_diameter),\n        outer_diameter: parseFloat(newRawMaterial.outer_diameter),\n        height: parseFloat(newRawMaterial.height),\n        pieces_count: parseInt(newRawMaterial.pieces_count),\n        cost_per_mm: parseFloat(newRawMaterial.cost_per_mm)\n        // unit_code will be generated automatically by backend\n      };\n\n      let response;\n      if (newRawMaterial.id) {\n        // Update existing material\n        response = await axios.put(`${API}/raw-materials/${newRawMaterial.id}`, rawMaterial);\n        alert(`ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­. ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø©: ${response.data.unit_code}`);\n      } else {\n        // Add new material\n        response = await axios.post(`${API}/raw-materials`, rawMaterial);\n        alert(`ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­. ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø©: ${response.data.unit_code}`);\n      }\n\n      fetchRawMaterials();\n      setNewRawMaterial({\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        height: '',\n        pieces_count: '',\n        cost_per_mm: ''\n      });\n    } catch (error) {\n      console.error('Error saving raw material:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const clearAllRawMaterials = async () => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…ØŸ')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/raw-materials/clear-all`);\n      fetchRawMaterials();\n      alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…');\n    } catch (error) {\n      console.error('Error clearing raw materials:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…');\n    }\n  };\n\n  const deleteRawMaterial = async (materialId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…ØŸ')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/raw-materials/${materialId}`);\n      fetchRawMaterials();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…');\n    } catch (error) {\n      console.error('Error deleting raw material:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…');\n    }\n  };\n\n  const editRawMaterial = (material) => {\n    // Fill the form with the material data for editing\n    setNewRawMaterial({\n      id: material.id,\n      material_type: material.material_type,\n      inner_diameter: material.inner_diameter.toString(),\n      outer_diameter: material.outer_diameter.toString(),\n      height: material.height.toString(),\n      pieces_count: material.pieces_count.toString(),\n      cost_per_mm: material.cost_per_mm.toString()\n    });\n  };\n\n  const handleFileImport = async (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    const formData = new FormData();\n    formData.append('file', file);\n\n    try {\n      const response = await axios.post(`${API}/excel/import/raw-materials`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n\n      alert(response.data.message);\n      fetchRawMaterials(); // Refresh the raw materials list\n      event.target.value = ''; // Clear file input\n    } catch (error) {\n      console.error('Error importing file:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const handleFileExport = async () => {\n    try {\n      const response = await axios.get(`${API}/excel/export/raw-materials`, {\n        responseType: 'blob'\n      });\n\n      // Create download link\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', `raw_materials_export_${new Date().toISOString().split('T')[0]}.xlsx`);\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n    } catch (error) {\n      console.error('Error exporting file:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù');\n    }\n  };\n\n  const addFinishedProduct = async () => {\n    if (!newFinishedProduct.inner_diameter || !newFinishedProduct.outer_diameter || !newFinishedProduct.height || !newFinishedProduct.quantity || !newFinishedProduct.unit_price) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      const finishedProduct = {\n        seal_type: newFinishedProduct.seal_type,\n        material_type: newFinishedProduct.material_type,\n        inner_diameter: parseFloat(newFinishedProduct.inner_diameter),\n        outer_diameter: parseFloat(newFinishedProduct.outer_diameter),\n        height: parseFloat(newFinishedProduct.height),\n        quantity: parseInt(newFinishedProduct.quantity),\n        unit_price: parseFloat(newFinishedProduct.unit_price)\n      };\n\n      if (newFinishedProduct.id) {\n        // Update existing product\n        await axios.put(`${API}/finished-products/${newFinishedProduct.id}`, finishedProduct);\n        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¨Ù†Ø¬Ø§Ø­');\n      } else {\n        // Add new product\n        await axios.post(`${API}/finished-products`, finishedProduct);\n        alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¨Ù†Ø¬Ø§Ø­');\n      }\n\n      fetchFinishedProducts();\n      setNewFinishedProduct({\n        seal_type: 'RSL',\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        height: '',\n        quantity: '',\n        unit_price: ''\n      });\n    } catch (error) {\n      console.error('Error saving finished product:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ');\n    }\n  };\n\n  const editFinishedProduct = (product) => {\n    // Fill the form with the product data for editing\n    setNewFinishedProduct({\n      id: product.id,\n      seal_type: product.seal_type,\n      material_type: product.material_type,\n      inner_diameter: product.inner_diameter.toString(),\n      outer_diameter: product.outer_diameter.toString(),\n      height: product.height.toString(),\n      quantity: product.quantity.toString(),\n      unit_price: product.unit_price.toString()\n    });\n  };\n\n  const deleteFinishedProduct = async (productId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØŸ')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/finished-products/${productId}`);\n      fetchFinishedProducts();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ');\n    } catch (error) {\n      console.error('Error deleting finished product:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ');\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <h1 className=\"text-3xl font-bold mb-6\">Ù…Ø®Ø²Ù† Ø¥Ù†ØªØ§Ø¬</h1>\n      \n      {/* Raw Materials Section */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h3 className=\"text-lg font-semibold\">Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…</h3>\n          <div className=\"flex space-x-2 space-x-reverse\">\n            <button\n              onClick={clearAllRawMaterials}\n              className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\"\n            >\n              Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n            </button>\n          </div>\n        </div>\n\n        {/* Import/Export Section */}\n        <div className=\"bg-gray-50 p-4 rounded-lg mb-6\">\n          <h4 className=\"font-medium mb-4\">ğŸ“ Ø§Ø³ØªÙŠØ±Ø§Ø¯ ÙˆØªØµØ¯ÙŠØ± Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…</h4>\n          <div className=\"flex flex-wrap gap-4 items-center\">\n            <div className=\"flex items-center gap-2\">\n              <label className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 cursor-pointer\">\n                ğŸ“¤ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù† Excel\n                <input\n                  type=\"file\"\n                  accept=\".xlsx,.xls\"\n                  onChange={handleFileImport}\n                  className=\"hidden\"\n                />\n              </label>\n              <span className=\"text-sm text-gray-600\">(.xlsx Ø£Ùˆ .xls)</span>\n            </div>\n            \n            <button\n              onClick={handleFileExport}\n              className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n            >\n              ğŸ“¥ ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ Excel\n            </button>\n            \n            <div className=\"text-sm text-gray-600 bg-white p-2 rounded border\">\n              <strong>ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:</strong><br/>\n              material_type, inner_diameter, outer_diameter, height, pieces_count, unit_code, cost_per_mm\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</label>\n            <select\n              value={newRawMaterial.material_type}\n              onChange={(e) => setNewRawMaterial({...newRawMaterial, material_type: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              {materialTypes.map(type => (\n                <option key={type} value={type}>{type}</option>\n              ))}\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</label>\n            <input\n              type=\"number\"\n              value={newRawMaterial.inner_diameter}\n              onChange={(e) => setNewRawMaterial({...newRawMaterial, inner_diameter: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</label>\n            <input\n              type=\"number\"\n              value={newRawMaterial.outer_diameter}\n              onChange={(e) => setNewRawMaterial({...newRawMaterial, outer_diameter: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ (Ù…Ù…)</label>\n            <input\n              type=\"number\"\n              value={newRawMaterial.height}\n              onChange={(e) => setNewRawMaterial({...newRawMaterial, height: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹</label>\n            <input\n              type=\"number\"\n              value={newRawMaterial.pieces_count}\n              onChange={(e) => setNewRawMaterial({...newRawMaterial, pieces_count: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ØªÙƒÙ„ÙØ© Ø§Ù„Ù…Ù„Ù„ÙŠ</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newRawMaterial.cost_per_mm}\n              onChange={(e) => setNewRawMaterial({...newRawMaterial, cost_per_mm: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n        </div>\n        \n        <p className=\"text-sm text-gray-600 mt-4\">\n          Ù…Ù„Ø§Ø­Ø¸Ø©: Ø³ÙŠØªÙ… ØªÙˆÙ„ÙŠØ¯ ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø© ÙˆØ§Ù„Ù…ÙˆØ§ØµÙØ§Øª\n        </p>\n        \n        <button\n          onClick={addRawMaterial}\n          className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mb-4\"\n        >\n          Ø¥Ø¶Ø§ÙØ© Ù…Ø§Ø¯Ø© Ø®Ø§Ù…\n        </button>\n\n        {/* Ø­Ù‚Ù„ Ø§Ù„Ø¨Ø­Ø« */}\n        <div className=\"mb-4\">\n          <input\n            type=\"text\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            placeholder=\"Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù… (Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©ØŒ ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø©ØŒ Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª...)\"\n            className=\"w-full p-3 border border-gray-300 rounded-lg\"\n          />\n        </div>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø§Ø±ØªÙØ§Ø¹</th>\n                <th className=\"border border-gray-300 p-2\">Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹</th>\n                <th className=\"border border-gray-300 p-2\">ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø©</th>\n                <th className=\"border border-gray-300 p-2\">ØªÙƒÙ„ÙØ© Ø§Ù„Ù…Ù„Ù„ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredRawMaterials.map(material => (\n                <tr key={material.id}>\n                  <td className=\"border border-gray-300 p-2\">{material.material_type}</td>\n                  <td className=\"border border-gray-300 p-2\">{material.inner_diameter}</td>\n                  <td className=\"border border-gray-300 p-2\">{material.outer_diameter}</td>\n                  <td className=\"border border-gray-300 p-2\">{material.height}</td>\n                  <td className=\"border border-gray-300 p-2\">{material.pieces_count}</td>\n                  <td className=\"border border-gray-300 p-2\">{material.unit_code}</td>\n                  <td className=\"border border-gray-300 p-2\">{material.cost_per_mm}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex space-x-2 space-x-reverse\">\n                      <button\n                        onClick={() => editRawMaterial(material)}\n                        className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                        title=\"ØªØ­Ø±ÙŠØ±\"\n                      >\n                        âœï¸\n                      </button>\n                      <button\n                        onClick={() => deleteRawMaterial(material.id)}\n                        className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                        title=\"Ø­Ø°Ù\"\n                      >\n                        ğŸ—‘ï¸\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Finished Products Section */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ø§Ù„ØªØ§Ù…</h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„</label>\n            <select\n              value={newFinishedProduct.seal_type}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, seal_type: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              {sealTypes.map(type => (\n                <option key={type} value={type}>{type}</option>\n              ))}\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</label>\n            <select\n              value={newFinishedProduct.material_type}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, material_type: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              {materialTypes.map(type => (\n                <option key={type} value={type}>{type}</option>\n              ))}\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</label>\n            <input\n              type=\"number\"\n              value={newFinishedProduct.inner_diameter}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, inner_diameter: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</label>\n            <input\n              type=\"number\"\n              value={newFinishedProduct.outer_diameter}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, outer_diameter: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø³ÙŠÙ„</label>\n            <input\n              type=\"number\"\n              value={newFinishedProduct.height}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, height: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ÙƒÙ…ÙŠØ©</label>\n            <input\n              type=\"number\"\n              value={newFinishedProduct.quantity}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, quantity: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newFinishedProduct.unit_price}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, unit_price: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n        </div>\n        \n        <button\n          onClick={addFinishedProduct}\n          className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 mb-4\"\n        >\n          Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ù†Ù‡Ø§Ø¦ÙŠ\n        </button>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„</th>\n                <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø§Ø±ØªÙØ§Ø¹</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙƒÙ…ÙŠØ©</th>\n                <th className=\"border border-gray-300 p-2\">Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredFinishedProducts.map(product => (\n                <tr key={product.id}>\n                  <td className=\"border border-gray-300 p-2\">{product.seal_type}</td>\n                  <td className=\"border border-gray-300 p-2\">{product.material_type}</td>\n                  <td className=\"border border-gray-300 p-2\">{product.inner_diameter}</td>\n                  <td className=\"border border-gray-300 p-2\">{product.outer_diameter}</td>\n                  <td className=\"border border-gray-300 p-2\">{product.height}</td>\n                  <td className=\"border border-gray-300 p-2\">{product.quantity}</td>\n                  <td className=\"border border-gray-300 p-2\">{product.unit_price}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex space-x-2 space-x-reverse\">\n                      <button\n                        onClick={() => editFinishedProduct(product)}\n                        className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                        title=\"ØªØ­Ø±ÙŠØ±\"\n                      >\n                        âœï¸\n                      </button>\n                      <button\n                        onClick={() => deleteFinishedProduct(product.id)}\n                        className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                        title=\"Ø­Ø°Ù\"\n                      >\n                        ğŸ—‘ï¸\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Deferred Payments Component\nconst Deferred = () => {\n  const [unpaidInvoices, setUnpaidInvoices] = useState([]);\n  const [customers, setCustomers] = useState([]);\n  const [selectedInvoice, setSelectedInvoice] = useState(null);\n  const [paymentAmount, setPaymentAmount] = useState('');\n  const [paymentMethod, setPaymentMethod] = useState('Ù†Ù‚Ø¯ÙŠ');\n  const [paymentNotes, setPaymentNotes] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  \n  // Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª Ù„ÙƒÙ„ Ø¹Ù…ÙŠÙ„\n  const [customerTotals, setCustomerTotals] = useState({});\n\n  useEffect(() => {\n    fetchUnpaidInvoices();\n    fetchCustomers();\n  }, []);\n\n  useEffect(() => {\n    // Ø­Ø³Ø§Ø¨ Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\n    const totals = {};\n    filteredInvoices.forEach(invoice => {\n      const customerName = invoice.customer_name;\n      if (!totals[customerName]) {\n        totals[customerName] = {\n          totalAmount: 0,\n          invoiceCount: 0\n        };\n      }\n      totals[customerName].totalAmount += invoice.remaining_amount || invoice.total_amount;\n      totals[customerName].invoiceCount += 1;\n    });\n    setCustomerTotals(totals);\n  }, [unpaidInvoices, searchTerm]);\n  \n  // ÙÙ„ØªØ±Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø­Ø³Ø¨ Ø§Ù„Ø¨Ø­Ø«\n  const filteredInvoices = unpaidInvoices.filter(invoice => \n    invoice.customer_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    invoice.invoice_number.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    (invoice.invoice_title && invoice.invoice_title.toLowerCase().includes(searchTerm.toLowerCase()))\n  );\n\n  useEffect(() => {\n    fetchUnpaidInvoices();\n    fetchCustomers();\n  }, []);\n\n  const fetchUnpaidInvoices = async () => {\n    try {\n      const response = await axios.get(`${API}/invoices`);\n      const invoices = response.data.filter(invoice => \n        // ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¢Ø¬Ù„Ø© Ø£Ùˆ Ù„Ù‡Ø§ Ù…Ø¨Ù„Øº Ù…Ø³ØªØ­Ù‚\n        (invoice.payment_method === 'Ø¢Ø¬Ù„' || invoice.remaining_amount > 0) &&\n        (invoice.status === 'ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©' || \n         invoice.status === 'Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹' || \n         invoice.status === 'Ø§Ù†ØªØ¸Ø§Ø±' ||\n         invoice.remaining_amount > 0)\n      );\n      setUnpaidInvoices(invoices);\n    } catch (error) {\n      console.error('Error fetching unpaid invoices:', error);\n    }\n  };\n\n  const fetchCustomers = async () => {\n    try {\n      const response = await axios.get(`${API}/customers`);\n      // Sort customers alphabetically by name\n      const sortedCustomers = (response.data || []).sort((a, b) => \n        a.name.localeCompare(b.name, 'ar')\n      );\n      setCustomers(sortedCustomers);\n    } catch (error) {\n      console.error('Error fetching customers:', error);\n    }\n  };\n\n  const getCustomerName = (customerId) => {\n    const customer = customers.find(c => c.id === customerId);\n    return customer ? customer.name : 'Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…Ø­Ø¯Ø¯';\n  };\n\n  const makePayment = async () => {\n    if (!selectedInvoice || !paymentAmount) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙˆØ¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº');\n      return;\n    }\n\n    if (parseFloat(paymentAmount) > selectedInvoice.remaining_amount) {\n      alert('Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯Ø®Ù„ Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚');\n      return;\n    }\n\n    try {\n      await axios.post(`${API}/payments`, {\n        invoice_id: selectedInvoice.id,\n        amount: parseFloat(paymentAmount),\n        payment_method: paymentMethod,\n        notes: paymentNotes\n      });\n\n      setPaymentAmount('');\n      setPaymentNotes('');\n      setSelectedInvoice(null);\n      fetchUnpaidInvoices();\n      alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø© Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error making payment:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø©');\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n        <div className=\"flex flex-col md:flex-row md:items-center justify-between mb-4\">\n          <h3 className=\"text-xl font-bold text-blue-600 mb-2 md:mb-0\">Ø§Ù„Ø¢Ø¬Ù„ - Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª</h3>\n          <div className=\"flex space-x-2 space-x-reverse\">\n            <button \n              onClick={() => window.print()} \n              className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\">\n              Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n            </button>\n            <select className=\"border border-gray-300 rounded px-3 py-2\">\n              <option>ÙŠÙˆÙ…ÙŠ</option>\n              <option>Ø£Ø³Ø¨ÙˆØ¹ÙŠ</option>\n              <option>Ø´Ù‡Ø±ÙŠ</option>\n              <option>Ø³Ù†ÙˆÙŠ</option>\n            </select>\n          </div>\n        </div>\n        \n        {/* Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« ÙˆØ¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ */}\n        <div className=\"bg-gray-50 p-4 rounded-lg mb-4\">\n          <div className=\"mb-3\">\n            <input\n              type=\"text\"\n              placeholder=\"Ø¨Ø­Ø« Ø¨Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø£Ùˆ Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø£Ùˆ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          {/* Ø¹Ø±Ø¶ Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ */}\n          {Object.keys(customerTotals).length > 0 && (\n            <div className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3\">\n              {Object.entries(customerTotals).map(([customerName, totals]) => (\n                <div key={customerName} className=\"bg-white p-3 rounded border text-center\">\n                  <div className=\"font-semibold text-blue-800 text-sm\">{customerName}</div>\n                  <div className=\"text-xs text-blue-600\">\n                    {totals.invoiceCount} ÙØ§ØªÙˆØ±Ø©\n                  </div>\n                  <div className=\"text-sm font-bold text-green-600\">\n                    {totals.totalAmount.toFixed(2)} Ø¬.Ù…\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n\n      {/* Payment Form */}\n      {selectedInvoice && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n          <h3 className=\"text-lg font-semibold mb-4\">ØªØ³Ø¬ÙŠÙ„ Ø¯ÙØ¹Ø©</h3>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</label>\n              <input\n                type=\"text\"\n                value={selectedInvoice.invoice_number}\n                disabled\n                className=\"w-full p-2 border border-gray-300 rounded bg-gray-100\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø¹Ù…ÙŠÙ„</label>\n              <input\n                type=\"text\"\n                value={selectedInvoice.customer_name}\n                disabled\n                className=\"w-full p-2 border border-gray-300 rounded bg-gray-100\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚</label>\n              <input\n                type=\"text\"\n                value={`Ø¬.Ù… ${selectedInvoice.remaining_amount?.toFixed(2) || '0.00'}`}\n                disabled\n                className=\"w-full p-2 border border-gray-300 rounded bg-gray-100\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ù…Ø¨Ù„Øº Ø§Ù„Ø¯ÙØ¹Ø©</label>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                value={paymentAmount}\n                onChange={(e) => setPaymentAmount(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n                placeholder=\"0.00\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</label>\n              <select\n                value={paymentMethod}\n                onChange={(e) => setPaymentMethod(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              >\n                <option value=\"Ù†Ù‚Ø¯ÙŠ\">Ù†Ù‚Ø¯ÙŠ</option>\n                <option value=\"ÙÙˆØ¯Ø§ÙÙˆÙ† 010\">ÙÙˆØ¯Ø§ÙÙˆÙ† 010</option>\n                <option value=\"ÙƒØ§Ø´ 0100\">ÙƒØ§Ø´ 0100</option>\n                <option value=\"Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ\">Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ</option>\n              </select>\n            </div>\n            \n            <div className=\"md:col-span-2\">\n              <label className=\"block text-sm font-medium mb-1\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>\n              <input\n                type=\"text\"\n                value={paymentNotes}\n                onChange={(e) => setPaymentNotes(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n                placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n              />\n            </div>\n          </div>\n          \n          <div className=\"flex space-x-4 space-x-reverse\">\n            <button\n              onClick={makePayment}\n              className=\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\"\n            >\n              ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø©\n            </button>\n            <button\n              onClick={() => setSelectedInvoice(null)}\n              className=\"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600\"\n            >\n              Ø¥Ù„ØºØ§Ø¡\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Unpaid Invoices */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø§Ù„ÙÙˆØ§ØªÙŠØ± ØºÙŠØ± Ø§Ù„Ù…Ø³Ø¯Ø¯Ø©</h3>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¹Ù…ÙŠÙ„</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø¯ÙÙˆØ¹</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø³ØªØ­Ù‚</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø§Ù„Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredInvoices.map((invoice) => (\n                <tr key={invoice.id}>\n                  <td className=\"border border-gray-300 p-2\">{invoice.invoice_number}</td>\n                  <td className=\"border border-gray-300 p-2\">{invoice.customer_name}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    {new Date(invoice.date).toLocaleDateString('ar-EG')}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {invoice.total_amount?.toFixed(2) || '0.00'}</td>\n                  <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {invoice.paid_amount?.toFixed(2) || '0.00'}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className=\"font-bold text-red-600\">\n                      Ø¬.Ù… {invoice.remaining_amount?.toFixed(2) || '0.00'}\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className={`px-2 py-1 rounded text-sm ${\n                      invoice.status === 'ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©' ? 'bg-red-100 text-red-800' :\n                      invoice.status === 'Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹' ? 'bg-yellow-100 text-yellow-800' :\n                      'bg-green-100 text-green-800'\n                    }`}>\n                      {invoice.status}\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex space-x-2 space-x-reverse\">\n                      <button\n                        onClick={() => setSelectedInvoice(invoice)}\n                        className=\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\"\n                      >\n                        Ø¹Ø±Ø¶ Ø§Ù„Ø¯ÙØ¹Ø§Øª\n                      </button>\n                      <button\n                        onClick={() => setSelectedInvoice(invoice)}\n                        className=\"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600\"\n                      >\n                        Ø¯ÙØ¹\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n          \n          {filteredInvoices.length === 0 && (\n            <div className=\"text-center py-8 text-gray-500\">\n              Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙˆØ§ØªÙŠØ± ØºÙŠØ± Ù…Ø³Ø¯Ø¯Ø©\n            </div>\n          )}\n        </div>\n\n        {/* Summary */}\n        <div className=\"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"bg-red-50 p-4 rounded\">\n            <h4 className=\"font-semibold text-red-800\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø©</h4>\n            <p className=\"text-2xl font-bold text-red-600\">\n              Ø¬.Ù… {filteredInvoices.reduce((sum, inv) => sum + (inv.remaining_amount || 0), 0).toFixed(2)}\n            </p>\n          </div>\n          \n          <div className=\"bg-yellow-50 p-4 rounded\">\n            <h4 className=\"font-semibold text-yellow-800\">Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©</h4>\n            <p className=\"text-2xl font-bold text-yellow-600\">{filteredInvoices.length}</p>\n          </div>\n          \n          <div className=\"bg-blue-50 p-4 rounded\">\n            <h4 className=\"font-semibold text-blue-800\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø£ØµÙ„ÙŠ</h4>\n            <p className=\"text-2xl font-bold text-blue-600\">\n              Ø¬.Ù… {filteredInvoices.reduce((sum, inv) => sum + (inv.total_amount || 0), 0).toFixed(2)}\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Expenses Component\nconst Expenses = () => {\n  const [expenses, setExpenses] = useState([]);\n  const [newExpense, setNewExpense] = useState({\n    description: '',\n    amount: '',\n    category: 'Ø®Ø§Ù…Ø§Øª'\n  });\n\n  const expenseCategories = ['Ø®Ø§Ù…Ø§Øª', 'Ø±ÙˆØ§ØªØ¨', 'ÙƒÙ‡Ø±Ø¨Ø§Ø¡', 'ØµÙŠØ§Ù†Ø©', 'Ø£Ø®Ø±Ù‰'];\n\n  useEffect(() => {\n    fetchExpenses();\n  }, []);\n\n  const fetchExpenses = async () => {\n    try {\n      const response = await axios.get(`${API}/expenses`);\n      setExpenses(response.data);\n    } catch (error) {\n      console.error('Error fetching expenses:', error);\n    }\n  };\n\n  const addExpense = async () => {\n    if (!newExpense.description || !newExpense.amount) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      await axios.post(`${API}/expenses`, {\n        ...newExpense,\n        amount: parseFloat(newExpense.amount)\n      });\n\n      setNewExpense({\n        description: '',\n        amount: '',\n        category: 'Ø®Ø§Ù…Ø§Øª'\n      });\n\n      fetchExpenses();\n      alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ØµØ±ÙˆÙ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error adding expense:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ØµØ±ÙˆÙ');\n    }\n  };\n\n  const deleteExpense = async (expenseId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ØµØ±ÙˆÙØŸ')) return;\n\n    try {\n      await axios.delete(`${API}/expenses/${expenseId}`);\n      fetchExpenses();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ØµØ±ÙˆÙ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting expense:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ØµØ±ÙˆÙ');\n    }\n  };\n\n  const getTotalExpenses = () => {\n    return expenses.reduce((sum, expense) => sum + expense.amount, 0);\n  };\n\n  const getExpensesByCategory = () => {\n    const byCategory = {};\n    expenseCategories.forEach(cat => {\n      byCategory[cat] = expenses\n        .filter(exp => exp.category === cat)\n        .reduce((sum, exp) => sum + exp.amount, 0);\n    });\n    return byCategory;\n  };\n\n  const clearAllExpenses = async () => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§ØªØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) return;\n    \n    try {\n      await axios.delete(`${API}/expenses/clear-all`);\n      fetchExpenses();\n      alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª');\n    } catch (error) {\n      console.error('Error clearing expenses:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-blue-600 mb-4\">Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h2>\n        \n        <div className=\"flex space-x-4 space-x-reverse mb-4\">\n          <button \n            onClick={clearAllExpenses}\n            className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n            Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n          </button>\n          <button \n            onClick={fetchExpenses}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n            Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => window.print()}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n            Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n          <select className=\"border border-gray-300 rounded px-3 py-2\">\n            <option>ÙŠÙˆÙ…ÙŠ</option>\n            <option>Ø£Ø³Ø¨ÙˆØ¹ÙŠ</option>\n            <option>Ø´Ù‡Ø±ÙŠ</option>\n            <option>Ø³Ù†ÙˆÙŠ</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Add New Expense */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ Ø¬Ø¯ÙŠØ¯</h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ÙˆØµÙ Ø§Ù„Ù…ØµØ±ÙˆÙ</label>\n            <input\n              type=\"text\"\n              value={newExpense.description}\n              onChange={(e) => setNewExpense({...newExpense, description: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"Ù…Ø«Ø§Ù„: Ø´Ø±Ø§Ø¡ Ø®Ø§Ù…Ø§ØªØŒ ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ø§Ù„Ù…ØµÙ†Ø¹\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù…Ø¨Ù„Øº</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newExpense.amount}\n              onChange={(e) => setNewExpense({...newExpense, amount: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"0.00\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ÙØ¦Ø©</label>\n            <select\n              value={newExpense.category}\n              onChange={(e) => setNewExpense({...newExpense, category: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              {expenseCategories.map(category => (\n                <option key={category} value={category}>{category}</option>\n              ))}\n            </select>\n          </div>\n        </div>\n        \n        <button\n          onClick={addExpense}\n          className=\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\"\n        >\n          Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ØµØ±ÙˆÙ\n        </button>\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6\">\n        <div className=\"bg-red-50 p-6 rounded-lg\">\n          <h3 className=\"text-lg font-semibold text-red-800 mb-2\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>\n          <p className=\"text-3xl font-bold text-red-600\">\n            Ø¬.Ù… {getTotalExpenses().toFixed(2)}\n          </p>\n        </div>\n        \n        <div className=\"bg-blue-50 p-6 rounded-lg\">\n          <h3 className=\"text-lg font-semibold text-blue-800 mb-2\">Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>\n          <p className=\"text-3xl font-bold text-blue-600\">{expenses.length}</p>\n        </div>\n        \n        <div className=\"bg-yellow-50 p-6 rounded-lg\">\n          <h3 className=\"text-lg font-semibold text-yellow-800 mb-2\">Ù…ØªÙˆØ³Ø· Ø§Ù„Ù…ØµØ±ÙˆÙ</h3>\n          <p className=\"text-3xl font-bold text-yellow-600\">\n            Ø¬.Ù… {expenses.length > 0 ? (getTotalExpenses() / expenses.length).toFixed(2) : '0.00'}\n          </p>\n        </div>\n      </div>\n\n      {/* Expenses by Category */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©</h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\">\n          {Object.entries(getExpensesByCategory()).map(([category, amount]) => (\n            <div key={category} className=\"text-center p-4 border rounded\">\n              <h4 className=\"font-medium text-gray-700\">{category}</h4>\n              <p className=\"text-xl font-bold text-blue-600\">Ø¬.Ù… {amount.toFixed(2)}</p>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Expenses List */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙˆØµÙ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø¨Ù„Øº</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙØ¦Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {expenses.map((expense) => (\n                <tr key={expense.id}>\n                  <td className=\"border border-gray-300 p-2\">{expense.description}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className=\"font-semibold text-red-600\">\n                      Ø¬.Ù… {expense.amount.toFixed(2)}\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className={`px-2 py-1 rounded text-sm ${\n                      expense.category === 'Ø®Ø§Ù…Ø§Øª' ? 'bg-blue-100 text-blue-800' :\n                      expense.category === 'Ø±ÙˆØ§ØªØ¨' ? 'bg-green-100 text-green-800' :\n                      expense.category === 'ÙƒÙ‡Ø±Ø¨Ø§Ø¡' ? 'bg-yellow-100 text-yellow-800' :\n                      expense.category === 'ØµÙŠØ§Ù†Ø©' ? 'bg-purple-100 text-purple-800' :\n                      'bg-gray-100 text-gray-800'\n                    }`}>\n                      {expense.category}\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    {new Date(expense.date).toLocaleDateString('ar-EG')}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <button \n                      onClick={() => deleteExpense(expense.id)}\n                      className=\"bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600\">\n                      Ø­Ø°Ù\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n          \n          {expenses.length === 0 && (\n            <div className=\"text-center py-8 text-gray-500\">\n              Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ØµØ±ÙˆÙØ§Øª Ù…Ø³Ø¬Ù„Ø©\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Revenue Component\nconst Revenue = () => {\n  const [revenueData, setRevenueData] = useState({\n    total_revenue: 0,\n    total_expenses: 0,\n    material_cost: 0,\n    profit: 0\n  });\n  const [period, setPeriod] = useState('daily');\n\n  useEffect(() => {\n    fetchRevenueData();\n  }, [period]);\n\n  const fetchRevenueData = async () => {\n    try {\n      const response = await axios.get(`${API}/reports/revenue?period=${period}`);\n      setRevenueData(response.data);\n    } catch (error) {\n      console.error('Error fetching revenue data:', error);\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-blue-600 mb-4\">Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</h2>\n        \n        <div className=\"flex space-x-4 space-x-reverse mb-4\">\n          <button className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n            Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n          </button>\n          <button \n            onClick={fetchRevenueData}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n            Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => window.print()}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n            Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n          <select \n            value={period}\n            onChange={(e) => setPeriod(e.target.value)}\n            className=\"border border-gray-300 rounded px-3 py-2\">\n            <option value=\"daily\">Ø§Ù„ÙŠÙˆÙ…</option>\n            <option value=\"weekly\">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</option>\n            <option value=\"monthly\">Ø§Ù„Ø´Ù‡Ø±</option>\n            <option value=\"yearly\">Ø§Ù„Ø³Ù†Ø©</option>\n          </select>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {/* Revenue Cards */}\n        <div className=\"bg-green-50 p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold text-green-800 text-center mb-2\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</h3>\n          <p className=\"text-3xl font-bold text-green-600 text-center\">\n            Ø¬.Ù… {revenueData.total_revenue?.toFixed(2) || '0.00'}\n          </p>\n        </div>\n        \n        <div className=\"bg-red-50 p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold text-red-800 text-center mb-2\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>\n          <p className=\"text-3xl font-bold text-red-600 text-center\">\n            Ø¬.Ù… {revenueData.total_expenses?.toFixed(2) || '0.00'}\n          </p>\n        </div>\n        \n        <div className=\"bg-yellow-50 p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold text-yellow-800 text-center mb-2\">ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø§Ù…Ø§Øª</h3>\n          <p className=\"text-3xl font-bold text-yellow-600 text-center\">\n            Ø¬.Ù… {revenueData.material_cost?.toFixed(2) || '0.00'}\n          </p>\n        </div>\n        \n        <div className=\"bg-blue-50 p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold text-blue-800 text-center mb-2\">ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­</h3>\n          <p className={`text-3xl font-bold text-center ${\n            (revenueData.profit || 0) >= 0 ? 'text-blue-600' : 'text-red-600'\n          }`}>\n            Ø¬.Ù… {revenueData.profit?.toFixed(2) || '0.00'}\n          </p>\n        </div>\n      </div>\n\n      {/* Summary Table */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mt-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª - {\n          period === 'daily' ? 'ÙŠÙˆÙ…ÙŠ' :\n          period === 'weekly' ? 'Ø£Ø³Ø¨ÙˆØ¹ÙŠ' :\n          period === 'monthly' ? 'Ø´Ù‡Ø±ÙŠ' : 'Ø³Ù†ÙˆÙŠ'\n        }</h3>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-3\">Ø§Ù„Ø¨ÙŠØ§Ù†</th>\n                <th className=\"border border-gray-300 p-3\">Ø§Ù„Ù…Ø¨Ù„Øº (Ø¬.Ù…)</th>\n                <th className=\"border border-gray-300 p-3\">Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ©</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td className=\"border border-gray-300 p-3 font-semibold\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</td>\n                <td className=\"border border-gray-300 p-3 text-green-600 font-bold\">\n                  {revenueData.total_revenue?.toFixed(2) || '0.00'}\n                </td>\n                <td className=\"border border-gray-300 p-3\">100%</td>\n              </tr>\n              <tr>\n                <td className=\"border border-gray-300 p-3\">ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø§Ù…Ø§Øª</td>\n                <td className=\"border border-gray-300 p-3 text-yellow-600 font-semibold\">\n                  -{revenueData.material_cost?.toFixed(2) || '0.00'}\n                </td>\n                <td className=\"border border-gray-300 p-3\">\n                  {revenueData.total_revenue > 0 \n                    ? ((revenueData.material_cost / revenueData.total_revenue) * 100).toFixed(1) \n                    : '0.0'}%\n                </td>\n              </tr>\n              <tr>\n                <td className=\"border border-gray-300 p-3\">Ù…ØµØ±ÙˆÙØ§Øª Ø£Ø®Ø±Ù‰</td>\n                <td className=\"border border-gray-300 p-3 text-red-600 font-semibold\">\n                  -{((revenueData.total_expenses || 0) - (revenueData.material_cost || 0)).toFixed(2)}\n                </td>\n                <td className=\"border border-gray-300 p-3\">\n                  {revenueData.total_revenue > 0 \n                    ? (((revenueData.total_expenses - revenueData.material_cost) / revenueData.total_revenue) * 100).toFixed(1) \n                    : '0.0'}%\n                </td>\n              </tr>\n              <tr className=\"bg-blue-50\">\n                <td className=\"border border-gray-300 p-3 font-bold\">ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­</td>\n                <td className={`border border-gray-300 p-3 font-bold ${\n                  (revenueData.profit || 0) >= 0 ? 'text-blue-600' : 'text-red-600'\n                }`}>\n                  {revenueData.profit?.toFixed(2) || '0.00'}\n                </td>\n                <td className=\"border border-gray-300 p-3 font-bold\">\n                  {revenueData.total_revenue > 0 \n                    ? ((revenueData.profit / revenueData.total_revenue) * 100).toFixed(1) \n                    : '0.0'}%\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Performance Indicators */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mt-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡</h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"text-center p-4 border rounded\">\n            <h4 className=\"font-medium text-gray-700 mb-2\">Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­</h4>\n            <p className={`text-2xl font-bold ${\n              (revenueData.profit || 0) >= 0 ? 'text-green-600' : 'text-red-600'\n            }`}>\n              {revenueData.total_revenue > 0 \n                ? ((revenueData.profit / revenueData.total_revenue) * 100).toFixed(1) \n                : '0.0'}%\n            </p>\n          </div>\n          \n          <div className=\"text-center p-4 border rounded\">\n            <h4 className=\"font-medium text-gray-700 mb-2\">Ù†Ø³Ø¨Ø© ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø§Ù…Ø§Øª</h4>\n            <p className=\"text-2xl font-bold text-yellow-600\">\n              {revenueData.total_revenue > 0 \n                ? ((revenueData.material_cost / revenueData.total_revenue) * 100).toFixed(1) \n                : '0.0'}%\n            </p>\n          </div>\n          \n          <div className=\"text-center p-4 border rounded\">\n            <h4 className=\"font-medium text-gray-700 mb-2\">Ù†Ø³Ø¨Ø© Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©</h4>\n            <p className=\"text-2xl font-bold text-red-600\">\n              {revenueData.total_revenue > 0 \n                ? ((revenueData.total_expenses / revenueData.total_revenue) * 100).toFixed(1) \n                : '0.0'}%\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Invoices Component\nconst Invoices = () => {\n  const [invoices, setInvoices] = useState([]);\n  const [customers, setCustomers] = useState([]);\n  const [filterStatus, setFilterStatus] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [editingInvoice, setEditingInvoice] = useState(null);\n  const [editForm, setEditForm] = useState({\n    invoice_title: '',\n    supervisor_name: '',\n    customer_name: '',\n    payment_method: 'Ù†Ù‚Ø¯ÙŠ',\n    discount_type: 'amount',\n    discount_value: 0,\n    items: [],\n    notes: ''\n  });\n  \n  // Password protection states\n  const [showPasswordModal, setShowPasswordModal] = useState(false);\n  const [operationPassword, setOperationPassword] = useState('');\n  const [pendingOperation, setPendingOperation] = useState(null); // {type: 'cancel'|'edit'|'changePayment', data: ...}\n\n  useEffect(() => {\n    fetchInvoices();\n    fetchCustomers();\n  }, []);\n\n  const fetchInvoices = async () => {\n    try {\n      console.log('Fetching invoices...');\n      const response = await axios.get(`${API}/invoices`);\n      console.log('Invoices fetched:', response.data.length, 'invoices');\n      setInvoices(response.data);\n    } catch (error) {\n      console.error('Error fetching invoices:', error);\n      alert('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙˆØ§ØªÙŠØ±: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const fetchCustomers = async () => {\n    try {\n      const response = await axios.get(`${API}/customers`);\n      // Sort customers alphabetically by name\n      const sortedCustomers = (response.data || []).sort((a, b) => \n        a.name.localeCompare(b.name, 'ar')\n      );\n      setCustomers(sortedCustomers);\n    } catch (error) {\n      console.error('Error fetching customers:', error);\n    }\n  };\n\n  // Request password for operation\n  const requestPasswordFor = (operationType, operationData) => {\n    setPendingOperation({ type: operationType, data: operationData });\n    setOperationPassword('');\n    setShowPasswordModal(true);\n  };\n\n  // Execute operation after password verification\n  const executeOperation = async () => {\n    if (!operationPassword) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');\n      return;\n    }\n\n    try {\n      if (pendingOperation.type === 'cancel') {\n        await executeCancelInvoice(pendingOperation.data, operationPassword);\n      } else if (pendingOperation.type === 'edit') {\n        await executeUpdateInvoice(operationPassword);\n      } else if (pendingOperation.type === 'changePayment') {\n        await executeChangePaymentMethod(pendingOperation.data.invoiceId, pendingOperation.data.newMethod, operationPassword);\n      }\n      \n      setShowPasswordModal(false);\n      setPendingOperation(null);\n      setOperationPassword('');\n    } catch (error) {\n      console.error('Operation error:', error);\n      alert(error.response?.data?.detail || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');\n    }\n  };\n\n  // Execute cancel with password\n  const executeCancelInvoice = async (invoiceId, password) => {\n    const invoice = invoices.find(inv => inv.id === invoiceId);\n    if (!invoice) return;\n\n    const response = await axios.delete(`${API}/invoices/${invoiceId}/cancel`, {\n      params: { password: password }\n    });\n    \n    alert(response.data.message);\n    fetchInvoices();\n  };\n\n  // Execute update with password\n  const executeUpdateInvoice = async (password) => {\n    const response = await axios.put(\n      `${API}/invoices/${editingInvoice}`,\n      editForm,\n      { params: { password: password } }\n    );\n    \n    alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');\n    setEditingInvoice(null);\n    fetchInvoices();\n  };\n\n  // Execute change payment method with password\n  const executeChangePaymentMethod = async (invoiceId, newMethod, password) => {\n    await axios.put(`${API}/invoices/${invoiceId}/change-payment-method`, null, {\n      params: {\n        new_payment_method: newMethod,\n        password: password\n      }\n    });\n    \n    alert('ØªÙ… ØªØºÙŠÙŠØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ø¨Ù†Ø¬Ø§Ø­');\n    fetchInvoices();\n  };\n\n  // Change payment method function\n  const changePaymentMethod = async (invoiceId) => {\n    const paymentMethods = [\n      { value: 'Ù†Ù‚Ø¯ÙŠ', label: 'Ù†Ù‚Ø¯ÙŠ' },\n      { value: 'Ø¢Ø¬Ù„', label: 'Ø¢Ø¬Ù„' },\n      { value: 'ÙÙˆØ¯Ø§ÙÙˆÙ† 010', label: 'ÙÙˆØ¯Ø§ÙÙˆÙ† 010' },\n      { value: 'ÙƒØ§Ø´ 0100', label: 'ÙƒØ§Ø´ 0100' },\n      { value: 'Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ', label: 'Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ' },\n      { value: 'ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ', label: 'ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ' }\n    ];\n\n    const invoice = invoices.find(inv => inv.id === invoiceId);\n    if (!invoice) {\n      alert('Ø§Ù„ÙØ§ØªÙˆØ±Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©');\n      return;\n    }\n\n    // Ù…Ù†Ø¹ ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹\n    if (invoice.paid_amount > 0 && invoice.remaining_amount > 0) {\n      alert('Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­ÙˆÙŠÙ„ Ø·Ø±ÙŠÙ‚Ø© Ø¯ÙØ¹ ÙØ§ØªÙˆØ±Ø© Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹');\n      return;\n    }\n\n    // Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø§ÙØ°Ø© Ø­ÙˆØ§Ø± Ù…Ø®ØµØµØ© Ù„Ù„Ø§Ø®ØªÙŠØ§Ø±\n    const modalHtml = `\n      <div id=\"paymentMethodModal\" style=\"\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0,0,0,0.5);\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        z-index: 1000;\n        direction: rtl;\n      \">\n        <div style=\"\n          background: white;\n          padding: 30px;\n          border-radius: 10px;\n          box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n          min-width: 400px;\n          text-align: center;\n        \">\n          <h3 style=\"margin-bottom: 20px; color: #333;\">ØªØºÙŠÙŠØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</h3>\n          <p style=\"margin-bottom: 15px;\">Ø§Ù„ÙØ§ØªÙˆØ±Ø©: <strong>${invoice.invoice_number}</strong></p>\n          <p style=\"margin-bottom: 20px;\">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø­Ø§Ù„ÙŠØ©: <strong style=\"color: #e74c3c;\">${invoice.payment_method}</strong></p>\n          <div style=\"margin-bottom: 20px;\">\n            <label style=\"display: block; margin-bottom: 10px; font-weight: bold;\">Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:</label>\n            <select id=\"newPaymentMethod\" style=\"\n              width: 100%;\n              padding: 10px;\n              border: 2px solid #ddd;\n              border-radius: 5px;\n              font-size: 16px;\n              direction: rtl;\n            \">\n              <option value=\"\">-- Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ --</option>\n              ${paymentMethods\n                .filter(method => method.value !== invoice.payment_method)\n                .map(method => `<option value=\"${method.value}\">${method.label}</option>`)\n                .join('')}\n            </select>\n          </div>\n          <div style=\"display: flex; gap: 10px; justify-content: center;\">\n            <button id=\"confirmChange\" style=\"\n              background: #27ae60;\n              color: white;\n              border: none;\n              padding: 10px 20px;\n              border-radius: 5px;\n              cursor: pointer;\n              font-size: 16px;\n            \">ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØºÙŠÙŠØ±</button>\n            <button id=\"cancelChange\" style=\"\n              background: #e74c3c;\n              color: white;\n              border: none;\n              padding: 10px 20px;\n              border-radius: 5px;\n              cursor: pointer;\n              font-size: 16px;\n            \">Ø¥Ù„ØºØ§Ø¡</button>\n          </div>\n        </div>\n      </div>\n    `;\n\n    // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø§ÙØ°Ø© Ù„Ù„ØµÙØ­Ø©\n    document.body.insertAdjacentHTML('beforeend', modalHtml);\n\n    // Ø¥Ø¶Ø§ÙØ© Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø£Ø²Ø±Ø§Ø±\n    const modal = document.getElementById('paymentMethodModal');\n    const selectElement = document.getElementById('newPaymentMethod');\n    const confirmBtn = document.getElementById('confirmChange');\n    const cancelBtn = document.getElementById('cancelChange');\n\n    // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©\n    const closeModal = () => {\n      if (modal && modal.parentNode) {\n        modal.parentNode.removeChild(modal);\n      }\n    };\n\n    // Ø²Ø± Ø§Ù„Ø¥Ù„ØºØ§Ø¡\n    cancelBtn.onclick = closeModal;\n\n    // Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø§ÙØ°Ø©\n    modal.onclick = (e) => {\n      if (e.target === modal) {\n        closeModal();\n      }\n    };\n\n    // Ø²Ø± Ø§Ù„ØªØ£ÙƒÙŠØ¯\n    confirmBtn.onclick = async () => {\n      const newMethod = selectElement.value;\n      \n      if (!newMethod) {\n        alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø·Ø±ÙŠÙ‚Ø© Ø¯ÙØ¹ Ø¬Ø¯ÙŠØ¯Ø©');\n        return;\n      }\n\n      if (newMethod === invoice.payment_method) {\n        alert('Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ù‡ÙŠ Ù†ÙØ³Ù‡Ø§ Ø¨Ø§Ù„ÙØ¹Ù„');\n        return;\n      }\n\n      if (!confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­ÙˆÙŠÙ„ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ù…Ù† \"${invoice.payment_method}\" Ø¥Ù„Ù‰ \"${newMethod}\"ØŸ\\n\\nØ³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ø²ÙŠÙ†Ø© ÙˆØ§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.\\n\\nÙŠØªØ·Ù„Ø¨ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù„Ù„ØªØ£ÙƒÙŠØ¯`)) {\n        return;\n      }\n\n      closeModal();\n      // Request password\n      requestPasswordFor('changePayment', { invoiceId, newMethod });\n    };\n  };\n\n  // Cancel invoice function\n  const cancelInvoice = async (invoiceId) => {\n    const invoice = invoices.find(inv => inv.id === invoiceId);\n    if (!invoice) {\n      alert('Ø§Ù„ÙØ§ØªÙˆØ±Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©');\n      return;\n    }\n\n    const confirmMessage = `Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø© ${invoice.invoice_number}ØŸ\\n\\nØ³ÙŠØªÙ…:\\n- Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø®Ø²Ù†\\n- Ø¹Ù…Ù„ Ù…Ø¹Ø§Ù…Ù„Ø© Ø¹ÙƒØ³ÙŠØ© ÙÙŠ Ø§Ù„Ø®Ø²ÙŠÙ†Ø©\\n- Ù†Ù‚Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ù„Ù„Ù…Ø­Ø°ÙˆÙØ©\\n\\nÙŠØªØ·Ù„Ø¨ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù„Ù„ØªØ£ÙƒÙŠØ¯`;\n    \n    if (!confirm(confirmMessage)) {\n      return;\n    }\n\n    // Request password\n    requestPasswordFor('cancel', invoiceId);\n  };\n\n  const startEditInvoice = (invoice) => {\n    setEditingInvoice(invoice.id);\n    setEditForm({\n      invoice_title: invoice.invoice_title || '',\n      supervisor_name: invoice.supervisor_name || '',\n      customer_name: invoice.customer_name || '',\n      payment_method: invoice.payment_method || 'Ù†Ù‚Ø¯ÙŠ',\n      discount_type: invoice.discount_type || 'amount',\n      discount_value: invoice.discount_value || 0,\n      items: invoice.items || [],\n      notes: invoice.notes || ''\n    });\n  };\n\n  const cancelEdit = () => {\n    setEditingInvoice(null);\n    setEditForm({\n      invoice_title: '',\n      supervisor_name: '',\n      customer_name: '',\n      payment_method: 'Ù†Ù‚Ø¯ÙŠ',\n      discount_type: 'amount',\n      discount_value: 0,\n      items: [],\n      notes: ''\n    });\n  };\n\n  const saveInvoiceEdit = async () => {\n    if (!editForm.customer_name.trim()) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„');\n      return;\n    }\n\n    try {\n      console.log('Saving invoice edit for ID:', editingInvoice);\n      console.log('Edit form data:', editForm);\n      \n      // Calculate totals\n      const subtotal = editForm.items.reduce((sum, item) => sum + (item.total_price || 0), 0);\n      let discountAmount = 0;\n      \n      if (editForm.discount_type === 'percentage') {\n        discountAmount = (subtotal * parseFloat(editForm.discount_value || 0)) / 100;\n      } else {\n        discountAmount = parseFloat(editForm.discount_value || 0);\n      }\n      \n      const totalAfterDiscount = subtotal - discountAmount;\n\n      const updatedInvoice = {\n        ...editForm,\n        subtotal: subtotal,\n        discount: discountAmount,\n        total_after_discount: totalAfterDiscount,\n        total_amount: totalAfterDiscount\n      };\n\n      console.log('Sending update to backend:', updatedInvoice);\n      \n      // Store the edit form for password-protected execution\n      setEditForm(updatedInvoice);\n      \n      // Request password\n      requestPasswordFor('edit', null);\n    } catch (error) {\n      console.error('Error updating invoice:', error);\n      console.error('Error response:', error.response?.data);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ§ØªÙˆØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const updateInvoiceStatus = async (invoiceId, newStatus) => {\n    try {\n      await axios.put(`${API}/invoices/${invoiceId}/status`, \n        { status: newStatus }, {\n        headers: { 'Content-Type': 'application/json' }\n      });\n      fetchInvoices();\n      alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©');\n    } catch (error) {\n      console.error('Error updating invoice status:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©');\n    }\n  };\n\n  const printInvoice = (invoice) => {\n    const printContent = `\n      <!DOCTYPE html>\n      <html dir=\"rtl\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <style>\n          body {\n            font-family: Arial, sans-serif;\n            margin: 0;\n            padding: 20px;\n            direction: rtl;\n            font-size: 15px;\n          }\n          .header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            border-bottom: 3px solid #000;\n            padding-bottom: 10px;\n            margin-bottom: 20px;\n          }\n          .company-info {\n            text-align: right;\n          }\n          .company-name {\n            font-size: 32px;\n            font-weight: bold;\n            color: #000;\n            margin: 0;\n          }\n          .company-subtitle {\n            font-size: 20px;\n            margin: 5px 0;\n            color: #666;\n          }\n          .company-details {\n            font-size: 16px;\n            margin: 2px 0;\n            color: #333;\n          }\n          .logo-section {\n            text-align: center;\n            flex: 1;\n          }\n          .invoice-title {\n            font-size: 22px;\n            font-weight: bold;\n            background-color: #ff4444;\n            color: white;\n            padding: 8px 20px;\n            border-radius: 5px;\n            display: inline-block;\n            margin-bottom: 10px;\n          }\n          .invoice-number {\n            font-size: 20px;\n            font-weight: bold;\n            color: #ff4444;\n          }\n          .customer-info {\n            display: flex;\n            justify-content: space-between;\n            margin: 20px 0;\n          }\n          .customer-details {\n            text-align: right;\n          }\n          .date-info {\n            text-align: left;\n          }\n          .products-table {\n            width: 100%;\n            border-collapse: collapse;\n            border: 2px solid #000;\n            margin: 20px 0;\n          }\n          .products-table th,\n          .products-table td {\n            border: 1px solid #000;\n            padding: 8px;\n            text-align: center;\n          }\n          .products-table th {\n            background-color: #f0f0f0;\n            font-weight: bold;\n          }\n          .footer {\n            margin-top: 30px;\n            border-top: 1px solid #ccc;\n            padding-top: 15px;\n            display: flex;\n            justify-content: space-between;\n            font-size: 13px;\n            color: #666;\n          }\n          .total-section {\n            text-align: left;\n            margin-top: 10px;\n          }\n          .total-amount {\n            font-size: 20px;\n            font-weight: bold;\n            border: 2px solid #000;\n            padding: 10px;\n            display: inline-block;\n            background-color: #f9f9f9;\n          }\n          @media print {\n            body { margin: 0; padding: 10px; }\n          }\n        </style>\n      </head>\n      <body>\n        <!-- Header Section -->\n        <div class=\"header\">\n          <div class=\"company-info\">\n            <h1 class=\"company-name\">Ø´Ø±ÙƒØ© Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„</h1>\n            <p class=\"company-subtitle\">ØªØµÙ†ÙŠØ¹ Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£ÙˆÙŠÙ„ Ø³ÙŠÙ„</p>\n            <p class=\"company-details\">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø·Ø§Ø± Ø­ØªÙ‰ Ù¥Ù Ù Ù…Ù„</p>\n            <p class=\"company-details\">Ù‡ÙŠØ¯Ø±ÙˆÙ„ÙŠÙƒ - Ù†ÙŠÙˆÙ…Ø§ØªÙŠÙƒ</p>\n          </div>\n          \n          <div class=\"logo-section\">\n            <img src=\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\" \n                 alt=\"Master Seal Logo\" \n                 style=\"max-width: 120px; max-height: 80px; margin-bottom: 10px;\">\n            <div class=\"invoice-title\">${invoice.invoice_title || 'Ø¹Ø±Ø¶ Ø³Ø¹Ø±'}</div>\n            <div class=\"invoice-number\">${invoice.invoice_number}</div>\n          </div>\n        </div>\n\n        <!-- Customer and Date Info -->\n        <div class=\"customer-info\">\n          <div class=\"customer-details\">\n            <p><strong>Ø§Ù„Ø³Ø§Ø¯Ø©:</strong> ${invoice.customer_name}</p>\n            <p><strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> ${invoice.customer_address || '........................'}</p>\n          </div>\n          <div class=\"date-info\">\n            <p><strong>ØªØ­Ø±ÙŠØ± ÙÙŠ:</strong> ${new Date(invoice.date).toLocaleDateString('ar-EG')}</p>\n            <p><strong>Date:</strong> ${new Date(invoice.date).toLocaleDateString('en-GB')}</p>\n          </div>\n        </div>\n\n        <!-- Products Table -->\n        <table class=\"products-table\">\n          <thead>\n            <tr>\n              <th style=\"width: 60px;\">Ø§Ù„Ù…Ø³Ù„Ø³Ù„<br>Item</th>\n              <th style=\"width: 80px;\">Ø§Ù„ÙƒÙ…ÙŠØ©<br>QTY</th>\n              <th style=\"width: 200px;\">Description<br>Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª</th>\n              <th style=\"width: 100px;\">Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©<br>Unit Price</th>\n              <th style=\"width: 100px;\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ<br>Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${invoice.items.map((item, index) => `\n              <tr>\n                <td>${index + 1}</td>\n                <td>${item.quantity}</td>\n                <td style=\"text-align: right;\">\n                  ${item.local_product_details ? \n                    `${item.local_product_details.product_size} - ${item.local_product_details.product_type}` : \n                    `${item.seal_type} - ${item.material_type}<br>\n                    <small>${item.inner_diameter} Ã— ${item.outer_diameter} Ã— ${item.height} Ù…Ù…${item.wall_height ? ` (Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø©: ${item.wall_height} Ù…Ù…)` : \"\"}</small>`\n                  }\n                </td>\n                <td>Ø¬.Ù… ${item.unit_price.toFixed(2)}</td>\n                <td>Ø¬.Ù… ${item.total_price.toFixed(2)}</td>\n              </tr>\n            `).join('')}\n            <!-- Empty rows for additional items -->\n            ${Array.from({length: Math.max(0, 8 - invoice.items.length)}, (_, i) => `\n              <tr style=\"height: 40px;\">\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n              </tr>\n            `).join('')}\n          </tbody>\n        </table>\n\n        <!-- Total Section -->\n        <div class=\"total-section\">\n          <div style=\"text-align: left; margin-bottom: 10px;\">\n            ${invoice.subtotal ? `\n              <div style=\"margin-bottom: 5px;\">\n                <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ: Ø¬.Ù… ${invoice.subtotal.toFixed(2)}</span>\n              </div>\n            ` : ''}\n            ${invoice.discount && invoice.discount > 0 ? `\n              <div style=\"margin-bottom: 5px; color: #d32f2f;\">\n                <span>Ø§Ù„Ø®ØµÙ…: - Ø¬.Ù… ${invoice.discount.toFixed(2)}</span>\n                ${invoice.discount_type === 'percentage' && invoice.discount_value ? \n                  ` <small>(${invoice.discount_value}%)</small>` : ''}\n              </div>\n              <hr style=\"margin: 5px 0; border: 1px solid #000;\">\n            ` : ''}\n          </div>\n          <div class=\"total-amount\">\n            Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: Ø¬.Ù… ${(invoice.total_after_discount || invoice.total_amount).toFixed(2)}\n          </div>\n        </div>\n\n        <!-- Additional Info -->\n        <div style=\"margin-top: 20px; text-align: center; font-size: 13px;\">\n          <p><strong>Ù…Ù„Ø­ÙˆØ¸Ø©:</strong> ÙÙ‚Ø· ÙˆÙ‚Ø¯Ø±Ù‡</p>\n          <div style=\"height: 30px; border-bottom: 1px solid #000; margin: 10px 40px;\"></div>\n        </div>\n\n        <!-- Footer -->\n        <div class=\"footer\">\n          <div>\n            <p><strong>Ø§Ù„ØªÙˆÙ‚ÙŠØ¹:</strong></p>\n            <p>Ù…ÙˆØ¨Ø§ÙŠÙ„: Ù Ù¡Ù Ù¢Ù Ù¦Ù£Ù Ù¦Ù§Ù§ - Ù Ù¡Ù Ù¦Ù¢Ù£Ù©Ù Ù¨Ù§Ù </p>\n            <p>ØªÙ„ÙŠÙÙˆÙ†: Ù Ù¡Ù Ù¢Ù Ù¦Ù£Ù Ù¦Ù§Ù§</p>\n          </div>\n          <div style=\"text-align: left;\">\n            <p><strong>Ø§Ù„Ù…Ø³ØªÙ„Ù…:</strong></p>\n            <p>Ø§Ù„Ø­Ø±ÙÙŠÙŠÙ† - Ø§Ù„Ø³Ù„Ø§Ù… - Ø£Ù…Ø§Ù… Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª</p>\n            <p>Ù…ÙˆØ¨Ø§ÙŠÙ„: Ù Ù¡Ù Ù¢Ù Ù¦Ù£Ù Ù¦Ù§Ù§ - Ù Ù¡Ù Ù¦Ù¢Ù£Ù©Ù Ù¨Ù§Ù </p>\n          </div>\n        </div>\n\n        <!-- Note -->\n        <div style=\"text-align: center; margin-top: 20px; font-size: 12px; color: #666;\">\n          <p>ÙŠÙ‚Ø± Ø§Ù„Ù…Ø´ØªØ±ÙŠ Ø¨Ø£Ù†Ù‡ Ù‚Ø§Ù… Ø¨Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø¨Ø¶Ø§Ø¹Ø© ÙˆÙ‚Ø¨ÙˆÙ„Ù‡Ø§</p>\n        </div>\n      </body>\n      </html>\n    `;\n    \n    const printWindow = window.open('', '_blank');\n    printWindow.document.write(printContent);\n    printWindow.document.close();\n    printWindow.print();\n  };\n\n  const clearAllInvoices = async () => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ±ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) return;\n    \n    try {\n      await axios.delete(`${API}/invoices/clear-all`);\n      fetchInvoices();\n      alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ±');\n    } catch (error) {\n      console.error('Error clearing invoices:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');\n    }\n  };\n\n  const filteredInvoices = invoices.filter(invoice => {\n    const matchesStatus = filterStatus === '' || invoice.status === filterStatus;\n    const matchesSearch = searchTerm === '' || \n      invoice.invoice_number.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      invoice.customer_name.toLowerCase().includes(searchTerm.toLowerCase());\n    return matchesStatus && matchesSearch;\n  });\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-blue-600 mb-4\">Ø§Ù„ÙÙˆØ§ØªÙŠØ±</h2>\n        \n        <div className=\"flex space-x-4 space-x-reverse mb-4\">\n          <button \n            onClick={clearAllInvoices}\n            className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n            Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n          </button>\n          <button \n            onClick={fetchInvoices}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n            Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => window.print()}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n            Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n          <select className=\"border border-gray-300 rounded px-3 py-2\">\n            <option>ÙŠÙˆÙ…ÙŠ</option>\n            <option>Ø£Ø³Ø¨ÙˆØ¹ÙŠ</option>\n            <option>Ø´Ù‡Ø±ÙŠ</option>\n            <option>Ø³Ù†ÙˆÙŠ</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Filters */}\n      <div className=\"bg-white p-4 rounded-lg shadow-md mb-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø¨Ø­Ø«</label>\n            <input\n              type=\"text\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              placeholder=\"Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø£Ùˆ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„\"\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©</label>\n            <select\n              value={filterStatus}\n              onChange={(e) => setFilterStatus(e.target.value)}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"\">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª</option>\n              <option value=\"Ù…Ø¯ÙÙˆØ¹Ø©\">Ù…Ø¯ÙÙˆØ¹Ø©</option>\n              <option value=\"ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©\">ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©</option>\n              <option value=\"Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹\">Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹</option>\n              <option value=\"Ø§Ù†ØªØ¸Ø§Ø±\">Ø§Ù†ØªØ¸Ø§Ø±</option>\n              <option value=\"ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°\">ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°</option>\n            </select>\n          </div>\n          \n          <div className=\"flex items-end\">\n            <button\n              onClick={() => { setSearchTerm(''); setFilterStatus(''); }}\n              className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n            >\n              Ù…Ø³Ø­ Ø§Ù„ÙÙ„Ø§ØªØ±\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\n        <div className=\"bg-blue-50 p-4 rounded-lg text-center\">\n          <h3 className=\"font-semibold text-blue-800\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙÙˆØ§ØªÙŠØ±</h3>\n          <p className=\"text-2xl font-bold text-blue-600\">{invoices.length}</p>\n        </div>\n        \n        <div className=\"bg-green-50 p-4 rounded-lg text-center\">\n          <h3 className=\"font-semibold text-green-800\">Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø©</h3>\n          <p className=\"text-2xl font-bold text-green-600\">\n            {invoices.filter(inv => inv.status === 'Ù…Ø¯ÙÙˆØ¹Ø©').length}\n          </p>\n        </div>\n        \n        <div className=\"bg-red-50 p-4 rounded-lg text-center\">\n          <h3 className=\"font-semibold text-red-800\">ØºÙŠØ± Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø©</h3>\n          <p className=\"text-2xl font-bold text-red-600\">\n            {invoices.filter(inv => inv.status === 'ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©').length}\n          </p>\n        </div>\n        \n        <div className=\"bg-yellow-50 p-4 rounded-lg text-center\">\n          <h3 className=\"font-semibold text-yellow-800\">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</h3>\n          <p className=\"text-2xl font-bold text-yellow-600\">\n            Ø¬.Ù… {invoices.reduce((sum, inv) => sum + (inv.total_amount || 0), 0).toFixed(2)}\n          </p>\n        </div>\n      </div>\n\n      {/* Invoices Table */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ±</h3>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¹Ù…ÙŠÙ„</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                <th className=\"border border-gray-300 p-2\">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø®ØµÙ…</th>  \n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø§Ù„Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredInvoices.map((invoice) => (\n                <tr key={invoice.id}>\n                  <td className=\"border border-gray-300 p-2 font-semibold\">\n                    {invoice.invoice_number}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">{invoice.customer_name}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    {new Date(invoice.date).toLocaleDateString('ar-EG')}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">{invoice.payment_method}</td>\n                  <td className=\"border border-gray-300 p-2 font-semibold\">\n                    Ø¬.Ù… {invoice.subtotal?.toFixed(2) || (invoice.total_amount?.toFixed(2)) || '0.00'}\n                  </td>\n                  <td className=\"border border-gray-300 p-2 text-red-600\">\n                    {invoice.discount && invoice.discount > 0 ? (\n                      <div>\n                        <span>Ø¬.Ù… {invoice.discount.toFixed(2)}</span>\n                        {invoice.discount_type === 'percentage' && invoice.discount_value && (\n                          <small className=\"block text-xs\">(%{invoice.discount_value})</small>\n                        )}\n                      </div>\n                    ) : (\n                      <span className=\"text-gray-400\">Ù„Ø§ ÙŠÙˆØ¬Ø¯</span>\n                    )}\n                  </td>\n                  <td className=\"border border-gray-300 p-2 font-semibold text-green-600\">\n                    Ø¬.Ù… {(invoice.total_after_discount || invoice.total_amount)?.toFixed(2) || '0.00'}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className={`px-2 py-1 rounded text-sm cursor-pointer ${\n                      invoice.status === 'Ù…Ø¯ÙÙˆØ¹Ø©' ? 'bg-green-100 text-green-800' :\n                      invoice.status === 'ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©' ? 'bg-red-100 text-red-800' :\n                      invoice.status === 'Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹' ? 'bg-yellow-100 text-yellow-800' :\n                      invoice.status === 'Ø§Ù†ØªØ¸Ø§Ø±' ? 'bg-blue-100 text-blue-800' :\n                      invoice.status === 'ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°' ? 'bg-green-100 text-green-800' :\n                      invoice.status === 'ØªÙ… Ø§Ù„ØªØµÙ†ÙŠØ¹' ? 'bg-purple-100 text-purple-800' :\n                      'bg-gray-100 text-gray-800'\n                    }`}>\n                      {invoice.status}\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex flex-wrap gap-1\">\n                      <button\n                        onClick={() => printInvoice(invoice)}\n                        className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                      >\n                        Ø·Ø¨Ø§Ø¹Ø©\n                      </button>\n                      <button\n                        onClick={() => startEditInvoice(invoice)}\n                        className=\"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600\"\n                      >\n                        ØªØ¹Ø¯ÙŠÙ„\n                      </button>\n                      <button\n                        onClick={() => changePaymentMethod(invoice.id)}\n                        className=\"bg-purple-500 text-white px-2 py-1 rounded text-sm hover:bg-purple-600\"\n                        title=\"ØªØºÙŠÙŠØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹\"\n                      >\n                        ğŸ’³ ØªØ­ÙˆÙŠÙ„\n                      </button>\n                      <button\n                        onClick={() => cancelInvoice(invoice.id)}\n                        className=\"bg-red-600 text-white px-2 py-1 rounded text-sm hover:bg-red-700\"\n                        title=\"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙˆØ¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ù…ÙˆØ§Ø¯\"\n                      >\n                        âŒ Ø¥Ù„ØºØ§Ø¡\n                      </button>\n                      {invoice.status === 'Ø§Ù†ØªØ¸Ø§Ø±' && (\n                        <button\n                          onClick={() => updateInvoiceStatus(invoice.id, 'ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°')}\n                          className=\"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600\"\n                        >\n                          ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°\n                        </button>\n                      )}\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n          \n          {filteredInvoices.length === 0 && (\n            <div className=\"text-center py-8 text-gray-500\">\n              Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙˆØ§ØªÙŠØ± ØªØ·Ø§Ø¨Ù‚ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¨Ø­Ø«\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Edit Invoice Modal */}\n      {editingInvoice && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white p-6 rounded-lg shadow-lg w-full max-w-4xl max-h-screen overflow-y-auto\" dir=\"rtl\">\n            <h3 className=\"text-xl font-semibold mb-4\">ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø©</h3>\n            \n            <div className=\"grid grid-cols-2 gap-4 mb-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©</label>\n                <input\n                  type=\"text\"\n                  value={editForm.invoice_title}\n                  onChange={(e) => setEditForm({...editForm, invoice_title: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù</label>\n                <input\n                  type=\"text\"\n                  value={editForm.supervisor_name}\n                  onChange={(e) => setEditForm({...editForm, supervisor_name: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</label>\n                <input\n                  type=\"text\"\n                  value={editForm.customer_name}\n                  onChange={(e) => setEditForm({...editForm, customer_name: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„\"\n                  required\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</label>\n                <select\n                  value={editForm.payment_method}\n                  onChange={(e) => setEditForm({...editForm, payment_method: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                >\n                  <option value=\"Ù†Ù‚Ø¯ÙŠ\">Ù†Ù‚Ø¯ÙŠ</option>\n                  <option value=\"ÙÙˆØ¯Ø§ÙÙˆÙ† 010\">ÙÙˆØ¯Ø§ÙÙˆÙ† 010</option>\n                  <option value=\"ÙƒØ§Ø´ 0100\">ÙƒØ§Ø´ 0100</option>\n                  <option value=\"Ø¢Ø¬Ù„\">Ø¢Ø¬Ù„</option>\n                  <option value=\"Ø§Ù†Ø³ØªØ§ Ø¨Ø§ÙŠ\">Ø§Ù†Ø³ØªØ§ Ø¨Ø§ÙŠ</option>\n                  <option value=\"Yad_Elsawy\">Yad Elsawy</option>\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø®ØµÙ…</label>\n                <select\n                  value={editForm.discount_type}\n                  onChange={(e) => setEditForm({...editForm, discount_type: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                >\n                  <option value=\"amount\">Ù…Ø¨Ù„Øº Ø«Ø§Ø¨Øª</option>\n                  <option value=\"percentage\">Ù†Ø³Ø¨Ø© Ù…Ø¦ÙˆÙŠØ©</option>\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù‚ÙŠÙ…Ø© Ø§Ù„Ø®ØµÙ…</label>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  value={editForm.discount_value}\n                  onChange={(e) => setEditForm({...editForm, discount_value: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder={editForm.discount_type === 'percentage' ? '0-100' : '0.00'}\n                />\n              </div>\n            </div>\n            \n            <div className=\"mb-4\">\n              <label className=\"block text-sm font-medium mb-1\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>\n              <textarea\n                value={editForm.notes}\n                onChange={(e) => setEditForm({...editForm, notes: e.target.value})}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n                rows=\"3\"\n                placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n              />\n            </div>\n            \n            {/* Items Display with Edit capability */}\n            <div className=\"mb-4\">\n              <h4 className=\"text-lg font-medium mb-2\">Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙØ§ØªÙˆØ±Ø©</h4>\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full border-collapse border border-gray-300\">\n                  <thead>\n                    <tr className=\"bg-gray-100\">\n                      <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ù†ØªØ¬</th>\n                      <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙƒÙ…ÙŠØ©</th>\n                      <th className=\"border border-gray-300 p-2\">Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©</th>\n                      <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>\n                      <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {editForm.items.map((item, index) => (\n                      <tr key={index}>\n                        <td className=\"border border-gray-300 p-2\">\n                          {item.product_type === 'local' || item.local_product_details ? (\n                            <input\n                              type=\"text\"\n                              value={item.product_name || `${item.local_product_details?.product_size || ''} - ${item.local_product_details?.product_type || ''}`}\n                              onChange={(e) => {\n                                const newItems = [...editForm.items];\n                                newItems[index].product_name = e.target.value;\n                                setEditForm({...editForm, items: newItems});\n                              }}\n                              className=\"w-full p-1 border border-gray-300 rounded\"\n                              placeholder=\"Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ù†ØªØ¬ - Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬\"\n                            />\n                          ) : (\n                            <div className=\"space-y-1\">\n                              {/* Seal Type */}\n                              <div className=\"flex items-center space-x-2 space-x-reverse\">\n                                <label className=\"text-xs font-medium w-16\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„:</label>\n                                <select\n                                  value={item.seal_type || ''}\n                                  onChange={(e) => {\n                                    const newItems = [...editForm.items];\n                                    newItems[index].seal_type = e.target.value;\n                                    setEditForm({...editForm, items: newItems});\n                                  }}\n                                  className=\"flex-1 p-1 text-xs border border-gray-300 rounded\"\n                                >\n                                  <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„Ù†ÙˆØ¹</option>\n                                  <option value=\"RSL\">RSL</option>\n                                  <option value=\"RS\">RS</option>\n                                  <option value=\"RSS\">RSS</option>\n                                  <option value=\"RSE\">RSE</option>\n                                  <option value=\"B17\">B17</option>\n                                  <option value=\"B3\">B3</option>\n                                  <option value=\"B14\">B14</option>\n                                  <option value=\"B1\">B1</option>\n                                  <option value=\"R15\">R15</option>\n                                  <option value=\"R17\">R17</option>\n                                  <option value=\"W1\">W1</option>\n                                  <option value=\"W4\">W4</option>\n                                  <option value=\"W5\">W5</option>\n                                  <option value=\"W11\">W11</option>\n                                  <option value=\"WBT\">WBT</option>\n                                  <option value=\"XR\">XR</option>\n                                  <option value=\"CH\">CH</option>\n                                  <option value=\"VR\">VR</option>\n                                </select>\n                              </div>\n                              \n                              {/* Material Type */}\n                              <div className=\"flex items-center space-x-2 space-x-reverse\">\n                                <label className=\"text-xs font-medium w-16\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©:</label>\n                                <select\n                                  value={item.material_type || ''}\n                                  onChange={(e) => {\n                                    const newItems = [...editForm.items];\n                                    newItems[index].material_type = e.target.value;\n                                    setEditForm({...editForm, items: newItems});\n                                  }}\n                                  className=\"flex-1 p-1 text-xs border border-gray-300 rounded\"\n                                >\n                                  <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„Ø®Ø§Ù…Ø©</option>\n                                  <option value=\"NBR\">NBR</option>\n                                  <option value=\"BUR\">BUR</option>\n                                  <option value=\"BT\">BT</option>\n                                  <option value=\"VT\">VT</option>\n                                  <option value=\"BOOM\">BOOM</option>\n                                </select>\n                              </div>\n                              \n                              {/* Dimensions */}\n                              <div className=\"flex items-center space-x-1 space-x-reverse\">\n                                <input\n                                  type=\"number\"\n                                  step=\"0.1\"\n                                  value={item.inner_diameter || ''}\n                                  onChange={(e) => {\n                                    const newItems = [...editForm.items];\n                                    newItems[index].inner_diameter = parseFloat(e.target.value) || 0;\n                                    setEditForm({...editForm, items: newItems});\n                                  }}\n                                  placeholder=\"Ø¯Ø§Ø®Ù„ÙŠ\"\n                                  className=\"w-12 p-1 text-xs border border-gray-300 rounded\"\n                                />\n                                <span className=\"text-xs\">Ã—</span>\n                                <input\n                                  type=\"number\"\n                                  step=\"0.1\"\n                                  value={item.outer_diameter || ''}\n                                  onChange={(e) => {\n                                    const newItems = [...editForm.items];\n                                    newItems[index].outer_diameter = parseFloat(e.target.value) || 0;\n                                    setEditForm({...editForm, items: newItems});\n                                  }}\n                                  placeholder=\"Ø®Ø§Ø±Ø¬ÙŠ\"\n                                  className=\"w-12 p-1 text-xs border border-gray-300 rounded\"\n                                />\n                                <span className=\"text-xs\">Ã—</span>\n                                <input\n                                  type=\"number\"\n                                  step=\"0.1\"\n                                  value={item.height || ''}\n                                  onChange={(e) => {\n                                    const newItems = [...editForm.items];\n                                    newItems[index].height = parseFloat(e.target.value) || 0;\n                                    setEditForm({...editForm, items: newItems});\n                                  }}\n                                  placeholder=\"Ø§Ø±ØªÙØ§Ø¹\"\n                                  className=\"w-12 p-1 text-xs border border-gray-300 rounded\"\n                                />\n                              </div>\n                            </div>\n                          )}\n                        </td>\n                        <td className=\"border border-gray-300 p-2\">\n                          <input\n                            type=\"number\"\n                            value={item.quantity}\n                            onChange={(e) => {\n                              const newItems = [...editForm.items];\n                              newItems[index].quantity = parseInt(e.target.value) || 0;\n                              newItems[index].total_price = newItems[index].unit_price * newItems[index].quantity;\n                              setEditForm({...editForm, items: newItems});\n                            }}\n                            className=\"w-full p-1 border border-gray-300 rounded\"\n                          />\n                        </td>\n                        <td className=\"border border-gray-300 p-2\">\n                          <input\n                            type=\"number\"\n                            step=\"0.01\"\n                            value={item.unit_price}\n                            onChange={(e) => {\n                              const newItems = [...editForm.items];\n                              newItems[index].unit_price = parseFloat(e.target.value) || 0;\n                              newItems[index].total_price = newItems[index].unit_price * newItems[index].quantity;\n                              setEditForm({...editForm, items: newItems});\n                            }}\n                            className=\"w-full p-1 border border-gray-300 rounded\"\n                          />\n                        </td>\n                        <td className=\"border border-gray-300 p-2 font-semibold\">\n                          Ø¬.Ù… {(item.total_price || 0).toFixed(2)}\n                        </td>\n                        <td className=\"border border-gray-300 p-2\">\n                          <button\n                            onClick={() => {\n                              const newItems = editForm.items.filter((_, i) => i !== index);\n                              setEditForm({...editForm, items: newItems});\n                            }}\n                            className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                          >\n                            Ø­Ø°Ù\n                          </button>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n              \n              {/* Add Product Button */}\n              <button\n                onClick={() => {\n                  // Add a new empty item for editing\n                  const newItem = {\n                    seal_type: '',\n                    material_type: '',\n                    inner_diameter: '',\n                    outer_diameter: '',\n                    height: '',\n                    quantity: 1,\n                    unit_price: 0,\n                    total_price: 0\n                  };\n                  setEditForm({\n                    ...editForm,\n                    items: [...editForm.items, newItem]\n                  });\n                }}\n                className=\"mt-2 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n              >\n                Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯\n              </button>\n            </div>\n            \n            {/* Action Buttons */}\n            <div className=\"flex justify-end space-x-4 space-x-reverse\">\n              <button\n                onClick={cancelEdit}\n                className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n              >\n                Ø¥Ù„ØºØ§Ø¡\n              </button>\n              <button\n                onClick={saveInvoiceEdit}\n                className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n              >\n                Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n      {/* Password Modal for Invoice Operations */}\n      {showPasswordModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\" dir=\"rtl\">\n          <div className=\"bg-white rounded-lg p-8 max-w-md w-full shadow-2xl\">\n            <h3 className=\"text-2xl font-bold mb-4 text-blue-600\">\n              ğŸ” ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©\n            </h3>\n            \n            <div className=\"mb-4 p-4 bg-blue-50 border-r-4 border-blue-500 rounded\">\n              <p className=\"text-sm text-gray-700\">\n                {pendingOperation?.type === 'cancel' && 'âŒ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©'}\n                {pendingOperation?.type === 'edit' && 'âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø©'}\n                {pendingOperation?.type === 'changePayment' && 'ğŸ’³ ØªØ­ÙˆÙŠÙ„ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹'}\n              </p>\n              <p className=\"text-xs text-gray-600 mt-2\">\n                ÙŠØªØ·Ù„Ø¨ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©\n              </p>\n            </div>\n\n            <div className=\"mb-6\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (1462):\n              </label>\n              <input\n                type=\"password\"\n                value={operationPassword}\n                onChange={(e) => setOperationPassword(e.target.value)}\n                onKeyPress={(e) => e.key === 'Enter' && executeOperation()}\n                placeholder=\"Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\"\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n                autoFocus\n              />\n            </div>\n\n            <div className=\"flex gap-3\">\n              <button\n                onClick={executeOperation}\n                className=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-semibold transition-colors\"\n              >\n                âœ… ØªØ£ÙƒÙŠØ¯\n              </button>\n              <button\n                onClick={() => {\n                  setShowPasswordModal(false);\n                  setPendingOperation(null);\n                  setOperationPassword('');\n                }}\n                className=\"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-3 rounded-lg font-semibold transition-colors\"\n              >\n                âŒ Ø¥Ù„ØºØ§Ø¡\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Deleted Invoices Component\nconst DeletedInvoices = () => {\n  const {user} = useAuth();\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [password, setPassword] = useState('');\n  const [deletedInvoices, setDeletedInvoices] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [showPasswordChange, setShowPasswordChange] = useState(false);\n  const [oldPassword, setOldPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n\n  // Verify password\n  const verifyPassword = async () => {\n    try {\n      const response = await axios.post(`${API}/deleted-invoices/verify-password`, {\n        password: password\n      });\n      \n      if (response.data.success) {\n        setIsAuthenticated(true);\n        fetchDeletedInvoices();\n      } else {\n        alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©');\n        setPassword('');\n      }\n    } catch (error) {\n      console.error('Error verifying password:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');\n    }\n  };\n\n  // Change password\n  const changePassword = async () => {\n    if (!oldPassword || !newPassword) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ÙˆØ§Ù„Ø¬Ø¯ÙŠØ¯Ø©');\n      return;\n    }\n\n    if (newPassword.length < 4) {\n      alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 4 Ø£Ø±Ù‚Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');\n      return;\n    }\n\n    try {\n      await axios.post(`${API}/deleted-invoices/change-password`, {\n        old_password: oldPassword,\n        new_password: newPassword\n      });\n\n      alert('ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­');\n      setShowPasswordChange(false);\n      setOldPassword('');\n      setNewPassword('');\n    } catch (error) {\n      console.error('Error changing password:', error);\n      alert(error.response?.data?.detail || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');\n    }\n  };\n\n  const fetchDeletedInvoices = async () => {\n    try {\n      const response = await axios.get(`${API}/deleted-invoices`);\n      setDeletedInvoices(response.data || []);\n    } catch (error) {\n      console.error('Error fetching deleted invoices:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©');\n    }\n  };\n\n  const handleRestore = async (invoiceId, invoiceNumber) => {\n    if (!confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø© ${invoiceNumber}ØŸ\\n\\nÙ…Ù„Ø§Ø­Ø¸Ø©: Ø³ÙŠØªÙ… Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙÙ‚Ø·ØŒ Ù„Ù† ÙŠØªÙ… Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø£Ùˆ Ø§Ù„Ø®Ø²ÙŠÙ†Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹`)) {\n      return;\n    }\n\n    try {\n      const response = await axios.post(`${API}/deleted-invoices/${invoiceId}/restore`, null, {\n        params: { username: user?.username }\n      });\n      alert(response.data.message + '\\n\\n' + (response.data.warning || ''));\n      fetchDeletedInvoices();\n    } catch (error) {\n      console.error('Error restoring invoice:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const handlePermanentDelete = async (invoiceId, invoiceNumber) => {\n    if (!confirm(`âš ï¸ ØªØ­Ø°ÙŠØ±: Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø© ${invoiceNumber} Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ØŸ\\n\\nÙ‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!`)) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/deleted-invoices/${invoiceId}`);\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹');\n      fetchDeletedInvoices();\n    } catch (error) {\n      console.error('Error deleting invoice:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const filteredInvoices = deletedInvoices.filter(invoice => {\n    const searchLower = searchTerm.toLowerCase();\n    return (\n      invoice.invoice_number?.toLowerCase().includes(searchLower) ||\n      invoice.customer_name?.toLowerCase().includes(searchLower) ||\n      invoice.payment_method?.toLowerCase().includes(searchLower)\n    );\n  });\n\n  // If not authenticated, show password screen\n  if (!isAuthenticated) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-500 to-orange-600 p-6\" dir=\"rtl\">\n        <div className=\"bg-white p-8 rounded-lg shadow-2xl max-w-md w-full\">\n          <div className=\"text-center mb-6\">\n            <div className=\"text-6xl mb-4\">ğŸ—‘ï¸</div>\n            <h2 className=\"text-2xl font-bold text-gray-800\">Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©</h2>\n            <p className=\"text-gray-600 mt-2\">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù„Ø¯Ø®ÙˆÙ„</p>\n          </div>\n          \n          <div className=\"space-y-4\">\n            <input\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              onKeyPress={(e) => e.key === 'Enter' && verifyPassword()}\n              placeholder=\"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\"\n              className=\"w-full p-3 border-2 border-gray-300 rounded-lg focus:border-red-500 focus:outline-none text-center text-lg\"\n              autoFocus\n            />\n            \n            <button\n              onClick={verifyPassword}\n              className=\"w-full bg-red-500 text-white py-3 rounded-lg hover:bg-red-600 font-semibold text-lg transition-colors\"\n            >\n              Ø¯Ø®ÙˆÙ„\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Main deleted invoices interface\n  return (\n    <div className=\"p-6 bg-gray-50 min-h-screen\" dir=\"rtl\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-800\">ğŸ—‘ï¸ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©</h1>\n          <p className=\"text-gray-600 mt-1\">Ø¥Ø¯Ø§Ø±Ø© ÙˆØ§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©</p>\n        </div>\n        <div className=\"flex gap-2\">\n          <button\n            onClick={() => setShowPasswordChange(!showPasswordChange)}\n            className=\"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors\"\n            title=\"ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\"\n          >\n            ğŸ”‘\n          </button>\n          <button\n            onClick={fetchDeletedInvoices}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors\"\n          >\n            ğŸ”„ ØªØ­Ø¯ÙŠØ«\n          </button>\n        </div>\n      </div>\n\n      {/* Password Change Section */}\n      {showPasswordChange && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n          <h3 className=\"text-xl font-semibold mb-4 flex items-center gap-2\">\n            ğŸ”‘ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\n          </h3>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©\n              </label>\n              <input\n                type=\"password\"\n                value={oldPassword}\n                onChange={(e) => setOldPassword(e.target.value)}\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©\n              </label>\n              <input\n                type=\"password\"\n                value={newPassword}\n                onChange={(e) => setNewPassword(e.target.value)}\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n              />\n            </div>\n\n            <div className=\"flex items-end gap-2\">\n              <button\n                onClick={changePassword}\n                className=\"flex-1 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 font-semibold\"\n              >\n                âœ… ØªØ£ÙƒÙŠØ¯\n              </button>\n              <button\n                onClick={() => {\n                  setShowPasswordChange(false);\n                  setOldPassword('');\n                  setNewPassword('');\n                }}\n                className=\"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 font-semibold\"\n              >\n                âŒ Ø¥Ù„ØºØ§Ø¡\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Search */}\n      <div className=\"mb-4\">\n        <input\n          type=\"text\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          placeholder=\"Ø§Ù„Ø¨Ø­Ø« (Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©ØŒ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ØŒ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹...)\"\n          className=\"w-full p-2 border border-gray-300 rounded\"\n        />\n      </div>\n\n      {/* Invoices Table */}\n      <div className=\"bg-white rounded-lg shadow-md overflow-x-auto\">\n        <table className=\"min-w-full border-collapse\">\n          <thead>\n            <tr className=\"bg-gray-100\">\n              <th className=\"border border-gray-300 p-2\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>\n              <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n              <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¹Ù…ÙŠÙ„</th>\n              <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>\n              <th className=\"border border-gray-300 p-2\">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</th>\n              <th className=\"border border-gray-300 p-2\">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø°Ù</th>\n              <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n            </tr>\n          </thead>\n          <tbody>\n            {filteredInvoices.length === 0 ? (\n              <tr>\n                <td colSpan=\"7\" className=\"border border-gray-300 p-4 text-center text-gray-500\">\n                  Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙˆØ§ØªÙŠØ± Ù…Ø­Ø°ÙˆÙØ©\n                </td>\n              </tr>\n            ) : (\n              filteredInvoices.map((invoice) => (\n                <tr key={invoice.id} className=\"hover:bg-gray-50\">\n                  <td className=\"border border-gray-300 p-2 font-medium\">\n                    {invoice.invoice_number}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    {new Date(invoice.created_at).toLocaleDateString('ar-EG')}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">{invoice.customer_name}</td>\n                  <td className=\"border border-gray-300 p-2 font-bold\">\n                    {invoice.total_amount?.toFixed(2)} Ø¬.Ù…\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">{invoice.payment_method}</td>\n                  <td className=\"border border-gray-300 p-2 text-sm text-gray-600\">\n                    {new Date(invoice.deleted_at).toLocaleDateString('ar-EG', {\n                      year: 'numeric',\n                      month: 'short',\n                      day: 'numeric',\n                      hour: '2-digit',\n                      minute: '2-digit'\n                    })}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex space-x-2 space-x-reverse justify-center\">\n                      <button\n                        onClick={() => handleRestore(invoice.id, invoice.invoice_number)}\n                        className=\"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600\"\n                      >\n                        â†©ï¸ Ø§Ø³ØªØ¹Ø§Ø¯Ø©\n                      </button>\n                      <button\n                        onClick={() => handlePermanentDelete(invoice.id, invoice.invoice_number)}\n                        className=\"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700\"\n                      >\n                        ğŸ—‘ï¸ Ø­Ø°Ù Ù†Ù‡Ø§Ø¦ÙŠ\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))\n            )}\n          </tbody>\n        </table>\n      </div>\n\n      {/* Summary */}\n      <div className=\"mt-4 p-4 bg-blue-50 rounded-lg\">\n        <p className=\"text-sm text-gray-700\">\n          <strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©:</strong> {filteredInvoices.length}\n        </p>\n        <p className=\"text-xs text-gray-600 mt-2\">\n          ğŸ’¡ <strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø³ØªØ±Ø¬Ø¹Ù‡Ø§ Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù†Ø´Ø·Ø©ØŒ Ù„ÙƒÙ† Ù„Ù† ÙŠØªÙ… Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø£Ùˆ Ø§Ù„Ø®Ø²ÙŠÙ†Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.\n        </p>\n      </div>\n    </div>\n  );\n};\n\n// Customer Statement Component (ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨)\nconst CustomerStatement = () => {\n  const [customers, setCustomers] = useState([]);\n  const [selectedCustomer, setSelectedCustomer] = useState('');\n  const [statement, setStatement] = useState(null);\n  const [fromDate, setFromDate] = useState('');\n  const [toDate, setToDate] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    fetchCustomers();\n  }, []);\n\n  const fetchCustomers = async () => {\n    try {\n      const response = await axios.get(`${API}/customers`);\n      // Sort customers alphabetically by name\n      const sortedCustomers = (response.data || []).sort((a, b) => \n        a.name.localeCompare(b.name, 'ar')\n      );\n      setCustomers(sortedCustomers);\n    } catch (error) {\n      console.error('Error fetching customers:', error);\n    }\n  };\n\n  const fetchStatement = async () => {\n    if (!selectedCustomer) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø¹Ù…ÙŠÙ„');\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const params = {};\n      if (fromDate) params.from_date = fromDate;\n      if (toDate) params.to_date = toDate;\n\n      const response = await axios.get(`${API}/customer-statement/${selectedCustomer}`, { params });\n      setStatement(response.data);\n    } catch (error) {\n      console.error('Error fetching statement:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨: ' + (error.response?.data?.detail || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const printStatement = () => {\n    if (!statement) return;\n\n    const printWindow = window.open('', '', 'width=800,height=600');\n    const customer = statement.customer;\n    const transactions = statement.transactions || [];\n    const summary = statement.summary || {};\n\n    printWindow.document.write(`\n      <!DOCTYPE html>\n      <html dir=\"rtl\">\n      <head>\n        <title>ÙƒØ´Ù Ø­Ø³Ø§Ø¨ - ${customer.name}</title>\n        <style>\n          body {\n            font-family: Arial, sans-serif;\n            padding: 20px;\n            direction: rtl;\n          }\n          .header {\n            text-align: center;\n            margin-bottom: 30px;\n            border-bottom: 2px solid #333;\n            padding-bottom: 10px;\n          }\n          .info-section {\n            margin-bottom: 20px;\n            display: flex;\n            justify-content: space-between;\n          }\n          .info-box {\n            border: 1px solid #ddd;\n            padding: 10px;\n            border-radius: 5px;\n            width: 45%;\n          }\n          table {\n            width: 100%;\n            border-collapse: collapse;\n            margin-bottom: 20px;\n          }\n          th, td {\n            border: 1px solid #ddd;\n            padding: 8px;\n            text-align: center;\n          }\n          th {\n            background-color: #f2f2f2;\n            font-weight: bold;\n          }\n          .summary {\n            margin-top: 20px;\n            border-top: 2px solid #333;\n            padding-top: 10px;\n          }\n          .summary-row {\n            display: flex;\n            justify-content: space-between;\n            padding: 5px 0;\n            font-size: 14px;\n          }\n          .final-balance {\n            font-size: 18px;\n            font-weight: bold;\n            color: ${summary.final_balance >= 0 ? 'green' : 'red'};\n          }\n          @media print {\n            body { padding: 10px; }\n          }\n        </style>\n      </head>\n      <body>\n        <div class=\"header\">\n          <h1>ÙƒØ´Ù Ø­Ø³Ø§Ø¨ Ø¹Ø§Ù…</h1>\n          <p>Ù…Ø±ØªØ¨ Ø¨ØªÙˆØ§Ø±ÙŠØ® Ø§Ù„Ù‚ÙŠÙˆØ¯</p>\n        </div>\n\n        <div class=\"info-section\">\n          <div class=\"info-box\">\n            <p><strong>Ø§Ø³Ù… Ø§Ù„Ø­Ø³Ø§Ø¨:</strong> ${customer.name}</p>\n            <p><strong>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</strong> ${customer.phone || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</p>\n            ${customer.is_also_supplier ? '<p><strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…ÙˆØ±Ø¯ Ø£ÙŠØ¶Ø§Ù‹</p>' : ''}\n          </div>\n          <div class=\"info-box\">\n            <p><strong>Ù…Ù† ØªØ§Ø±ÙŠØ®:</strong> ${statement.period.from_date}</p>\n            <p><strong>Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ®:</strong> ${statement.period.to_date}</p>\n            <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©:</strong> ${new Date().toLocaleDateString('ar-EG')}</p>\n          </div>\n        </div>\n\n        <table>\n          <thead>\n            <tr>\n              <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n              <th>Ù†ÙˆØ¹ Ø§Ù„Ù‚ÙŠØ¯</th>\n              <th>Ø§Ù„Ø¨ÙŠØ§Ù†</th>\n              <th>Ù…Ø¯ÙŠÙ†</th>\n              <th>Ø¯Ø§Ø¦Ù†</th>\n              <th>Ø§Ù„Ø±ØµÙŠØ¯</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${transactions.map(t => `\n              <tr>\n                <td>${new Date(t.date).toLocaleDateString('ar-EG')}</td>\n                <td>${t.type}</td>\n                <td>${t.description}</td>\n                <td>${t.debit > 0 ? t.debit.toFixed(2) : '-'}</td>\n                <td>${t.credit > 0 ? t.credit.toFixed(2) : '-'}</td>\n                <td>${t.balance.toFixed(2)}</td>\n              </tr>\n            `).join('')}\n          </tbody>\n        </table>\n\n        <div class=\"summary\">\n          <div class=\"summary-row\">\n            <span><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø§Ø¦Ù†:</strong></span>\n            <span>${summary.total_credit?.toFixed(2) || '0.00'} Ø¬.Ù…</span>\n          </div>\n          <div class=\"summary-row\">\n            <span><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯ÙŠÙ†:</strong></span>\n            <span>${summary.total_debit?.toFixed(2) || '0.00'} Ø¬.Ù…</span>\n          </div>\n          <div class=\"summary-row final-balance\">\n            <span><strong>Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:</strong></span>\n            <span>${summary.final_balance?.toFixed(2) || '0.00'} Ø¬.Ù…</span>\n          </div>\n        </div>\n\n        <p style=\"margin-top: 30px; text-align: left;\">Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ ÙŠØ¹ØªÙ…Ø¯ØŒØŒØŒ</p>\n      </body>\n      </html>\n    `);\n\n    printWindow.document.close();\n    printWindow.print();\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <h1 className=\"text-3xl font-bold mb-6\">ÙƒØ´Ù Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h1>\n\n      {/* Customer Selection and Filters */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„ *</label>\n            <select\n              value={selectedCustomer}\n              onChange={(e) => setSelectedCustomer(e.target.value)}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"\">-- Ø§Ø®ØªØ± Ø¹Ù…ÙŠÙ„ --</option>\n              {customers.map(customer => (\n                <option key={customer.id} value={customer.id}>\n                  {customer.name}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ù…Ù† ØªØ§Ø±ÙŠØ®</label>\n            <input\n              type=\"date\"\n              value={fromDate}\n              onChange={(e) => setFromDate(e.target.value)}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ®</label>\n            <input\n              type=\"date\"\n              value={toDate}\n              onChange={(e) => setToDate(e.target.value)}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n\n          <div className=\"flex items-end\">\n            <button\n              onClick={fetchStatement}\n              disabled={loading || !selectedCustomer}\n              className={`w-full px-4 py-2 rounded text-white ${\n                loading || !selectedCustomer\n                  ? 'bg-gray-400 cursor-not-allowed'\n                  : 'bg-blue-500 hover:bg-blue-600'\n              }`}\n            >\n              {loading ? 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...' : 'ğŸ“‹ Ø¹Ø±Ø¶ ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨'}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Statement Display */}\n      {statement && (\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\n          {/* Header */}\n          <div className=\"flex justify-between items-center mb-6 pb-4 border-b-2\">\n            <div>\n              <h2 className=\"text-2xl font-bold\">ÙƒØ´Ù Ø­Ø³Ø§Ø¨ Ø¹Ø§Ù…</h2>\n              <p className=\"text-sm text-gray-600\">Ù…Ø±ØªØ¨ Ø¨ØªÙˆØ§Ø±ÙŠØ® Ø§Ù„Ù‚ÙŠÙˆØ¯</p>\n            </div>\n            <button\n              onClick={printStatement}\n              className=\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\"\n            >\n              ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©\n            </button>\n          </div>\n\n          {/* Customer Info */}\n          <div className=\"grid grid-cols-2 gap-4 mb-6\">\n            <div className=\"bg-blue-50 p-4 rounded\">\n              <p className=\"mb-2\"><strong>Ø§Ø³Ù… Ø§Ù„Ø­Ø³Ø§Ø¨:</strong> {statement.customer.name}</p>\n              <p className=\"mb-2\"><strong>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</strong> {statement.customer.phone || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</p>\n              {statement.customer.is_also_supplier && (\n                <p className=\"text-orange-600 font-medium\">âš ï¸ Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…ÙˆØ±Ø¯ Ø£ÙŠØ¶Ø§Ù‹</p>\n              )}\n            </div>\n            <div className=\"bg-gray-50 p-4 rounded\">\n              <p className=\"mb-2\"><strong>Ù…Ù† ØªØ§Ø±ÙŠØ®:</strong> {statement.period.from_date}</p>\n              <p className=\"mb-2\"><strong>Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ®:</strong> {statement.period.to_date}</p>\n              <p className=\"mb-2\"><strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> {new Date().toLocaleDateString('ar-EG')}</p>\n            </div>\n          </div>\n\n          {/* Transactions Table */}\n          <div className=\"overflow-x-auto mb-6\">\n            <table className=\"min-w-full border-collapse border border-gray-300\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                  <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ù‚ÙŠØ¯</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¨ÙŠØ§Ù†</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø±Ø¬Ø¹</th>\n                  <th className=\"border border-gray-300 p-2\">Ù…Ø¯ÙŠÙ†</th>\n                  <th className=\"border border-gray-300 p-2\">Ø¯Ø§Ø¦Ù†</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø±ØµÙŠØ¯</th>\n                </tr>\n              </thead>\n              <tbody>\n                {statement.transactions.length === 0 ? (\n                  <tr>\n                    <td colSpan=\"7\" className=\"border border-gray-300 p-4 text-center text-gray-500\">\n                      Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø§Øª ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©\n                    </td>\n                  </tr>\n                ) : (\n                  statement.transactions.map((trans, index) => (\n                    <tr key={index} className=\"hover:bg-gray-50\">\n                      <td className=\"border border-gray-300 p-2\">\n                        {new Date(trans.date).toLocaleDateString('ar-EG')}\n                      </td>\n                      <td className=\"border border-gray-300 p-2\">{trans.type}</td>\n                      <td className=\"border border-gray-300 p-2 text-right\">{trans.description}</td>\n                      <td className=\"border border-gray-300 p-2\">{trans.reference}</td>\n                      <td className=\"border border-gray-300 p-2 text-red-600 font-medium\">\n                        {trans.debit > 0 ? trans.debit.toFixed(2) : '-'}\n                      </td>\n                      <td className=\"border border-gray-300 p-2 text-green-600 font-medium\">\n                        {trans.credit > 0 ? trans.credit.toFixed(2) : '-'}\n                      </td>\n                      <td className=\"border border-gray-300 p-2 font-bold\">\n                        {trans.balance.toFixed(2)}\n                      </td>\n                    </tr>\n                  ))\n                )}\n              </tbody>\n            </table>\n          </div>\n\n          {/* Summary */}\n          <div className=\"bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-lg border-t-4 border-blue-500\">\n            <div className=\"grid grid-cols-3 gap-4\">\n              <div className=\"text-center\">\n                <p className=\"text-sm text-gray-600 mb-1\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø§Ø¦Ù†</p>\n                <p className=\"text-2xl font-bold text-green-600\">\n                  {statement.summary.total_credit?.toFixed(2)} Ø¬.Ù…\n                </p>\n              </div>\n              <div className=\"text-center\">\n                <p className=\"text-sm text-gray-600 mb-1\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯ÙŠÙ†</p>\n                <p className=\"text-2xl font-bold text-red-600\">\n                  {statement.summary.total_debit?.toFixed(2)} Ø¬.Ù…\n                </p>\n              </div>\n              <div className=\"text-center\">\n                <p className=\"text-sm text-gray-600 mb-1\">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</p>\n                <p className={`text-3xl font-bold ${\n                  statement.summary.final_balance >= 0 ? 'text-green-600' : 'text-red-600'\n                }`}>\n                  {statement.summary.final_balance?.toFixed(2)} Ø¬.Ù…\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Instructions */}\n      {!statement && (\n        <div className=\"bg-blue-50 p-6 rounded-lg border-r-4 border-blue-500\">\n          <h3 className=\"font-bold mb-2\">ğŸ“ ØªØ¹Ù„ÙŠÙ…Ø§Øª:</h3>\n          <ul className=\"list-disc list-inside text-sm text-gray-700 space-y-1\">\n            <li>Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</li>\n            <li>ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ø¯ÙŠØ¯ ÙØªØ±Ø© Ø²Ù…Ù†ÙŠØ© Ù…Ø¹ÙŠÙ†Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</li>\n            <li>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ \"Ø¹Ø±Ø¶ ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨\" Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</li>\n            <li>ÙŠÙ…ÙƒÙ†Ùƒ Ø·Ø¨Ø§Ø¹Ø© ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©</li>\n            <li><strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ø§Ù„ÙÙˆØ§ØªÙŠØ± = Ø¯Ø§Ø¦Ù† (Ù…ÙˆØ¬Ø¨) | Ø§Ù„Ø¯ÙØ¹Ø§Øª ÙˆØ§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª = Ù…Ø¯ÙŠÙ† (Ø³Ø§Ù„Ø¨)</li>\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Customer Account Settlement Component - ØªØµÙÙŠØ© Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…ÙŠÙ„\nconst SettleAccount = () => {\n  const {user} = useAuth();\n  const [customers, setCustomers] = useState([]);\n  const [selectedCustomer, setSelectedCustomer] = useState(null);\n  const [deferredInvoices, setDeferredInvoices] = useState([]);\n  const [amountPaid, setAmountPaid] = useState('');\n  const [paymentMethod, setPaymentMethod] = useState('Ù†Ù‚Ø¯ÙŠ');\n  const [loading, setLoading] = useState(false);\n  const [result, setResult] = useState(null);\n  const [suppliers, setSuppliers] = useState([]);\n  const [isCustomerAlsoSupplier, setIsCustomerAlsoSupplier] = useState(false);\n  const [supplierBalance, setSupplierBalance] = useState(0);\n\n  useEffect(() => {\n    fetchCustomers();\n    fetchSuppliers();\n  }, []);\n\n  const fetchCustomers = async () => {\n    try {\n      const response = await axios.get(`${API}/customers`);\n      const sortedCustomers = (response.data || []).sort((a, b) => \n        a.name.localeCompare(b.name, 'ar')\n      );\n      setCustomers(sortedCustomers);\n    } catch (error) {\n      console.error('Error fetching customers:', error);\n    }\n  };\n\n  const fetchSuppliers = async () => {\n    try {\n      const response = await axios.get(`${API}/suppliers`);\n      setSuppliers(response.data || []);\n    } catch (error) {\n      console.error('Error fetching suppliers:', error);\n    }\n  };\n\n  const fetchCustomerInvoices = async (customerId) => {\n    try {\n      const response = await axios.get(`${API}/invoices`);\n      const customer = customers.find(c => c.id === customerId);\n      \n      if (customer) {\n        const customerInvoices = response.data.filter(inv => \n          inv.customer_name === customer.name && \n          inv.payment_method === 'Ø¢Ø¬Ù„' && \n          inv.remaining_amount > 0\n        ).sort((a, b) => new Date(a.date) - new Date(b.date)); // Sort by date ascending\n        \n        setDeferredInvoices(customerInvoices);\n      }\n    } catch (error) {\n      console.error('Error fetching invoices:', error);\n    }\n  };\n\n  const handleCustomerChange = (customerId) => {\n    setSelectedCustomer(customerId);\n    setResult(null);\n    if (customerId) {\n      fetchCustomerInvoices(customerId);\n      \n      // Check if customer is also supplier\n      const customer = customers.find(c => c.id === customerId);\n      if (customer) {\n        const supplier = suppliers.find(s => s.name === customer.name);\n        if (supplier && supplier.current_balance > 0) {\n          setIsCustomerAlsoSupplier(true);\n          setSupplierBalance(supplier.current_balance);\n        } else {\n          setIsCustomerAlsoSupplier(false);\n          setSupplierBalance(0);\n        }\n      }\n    } else {\n      setDeferredInvoices([]);\n      setIsCustomerAlsoSupplier(false);\n      setSupplierBalance(0);\n    }\n  };\n\n  const handleSettleAccount = async () => {\n    if (!selectedCustomer) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„');\n      return;\n    }\n\n    if (!amountPaid || parseFloat(amountPaid) <= 0) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');\n      return;\n    }\n\n    if (!confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØµÙÙŠØ© Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ù…Ø¨Ù„Øº ${parseFloat(amountPaid).toFixed(2)} Ø¬.Ù…ØŸ\\n\\nØ³ÙŠØªÙ… ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø¨Ù„Øº Ø¹Ù„Ù‰ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø¢Ø¬Ù„Ø© Ù…Ù† Ø§Ù„Ø£Ù‚Ø¯Ù… Ù„Ù„Ø£Ø­Ø¯Ø«`)) {\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const response = await axios.post(\n        `${API}/customers/${selectedCustomer}/settle-account`,\n        null,\n        {\n          params: {\n            amount_paid: parseFloat(amountPaid),\n            payment_method: paymentMethod,\n            username: user?.username\n          }\n        }\n      );\n\n      setResult(response.data);\n      setAmountPaid('');\n      \n      // Refresh invoices\n      fetchCustomerInvoices(selectedCustomer);\n      \n      // Show detailed result\n      let message = `âœ… ${response.data.message}\\n\\n`;\n      message += `ğŸ’° Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹: ${response.data.total_amount_paid.toFixed(2)} Ø¬.Ù…\\n`;\n      message += `ğŸ“Š ØªÙ… ØªÙˆØ²ÙŠØ¹: ${response.data.amount_distributed.toFixed(2)} Ø¬.Ù…\\n`;\n      \n      if (response.data.remaining_amount > 0) {\n        message += `ğŸ’µ Ù…ØªØ¨Ù‚ÙŠ: ${response.data.remaining_amount.toFixed(2)} Ø¬.Ù…\\n\\n`;\n      }\n      \n      message += `ğŸ“‹ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø© (${response.data.invoices_count}):\\n`;\n      response.data.paid_invoices.forEach(inv => {\n        message += `\\nâ€¢ ${inv.invoice_number}\\n`;\n        message += `  Ø§Ù„Ù…Ø¯ÙÙˆØ¹: ${inv.amount_paid.toFixed(2)} Ø¬.Ù…\\n`;\n        message += `  Ø§Ù„Ø­Ø§Ù„Ø©: ${inv.status}\\n`;\n      });\n      \n      alert(message);\n      \n    } catch (error) {\n      console.error('Error settling account:', error);\n      alert(error.response?.data?.detail || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµÙÙŠØ© Ø§Ù„Ø­Ø³Ø§Ø¨');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Reconcile customer-supplier account\n  const handleReconciliation = async () => {\n    if (!selectedCustomer) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„');\n      return;\n    }\n\n    const settlementAmount = Math.min(supplierBalance, totalRemaining);\n    \n    const confirmMessage = `ğŸ”„ ØªØ³ÙˆÙŠØ© Ø§Ù„Ø­Ø³Ø§Ø¨\\n\\n` +\n      `Ø§Ù„Ø¹Ù…ÙŠÙ„/Ø§Ù„Ù…ÙˆØ±Ø¯: ${customers.find(c => c.id === selectedCustomer)?.name}\\n\\n` +\n      `Ø±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ±Ø¯: ${supplierBalance.toFixed(2)} Ø¬.Ù…\\n` +\n      `Ø¯ÙŠÙˆÙ† Ø§Ù„Ø¹Ù…ÙŠÙ„: ${totalRemaining.toFixed(2)} Ø¬.Ù…\\n\\n` +\n      `Ø³ÙŠØªÙ… ØªØ³ÙˆÙŠØ©: ${settlementAmount.toFixed(2)} Ø¬.Ù…\\n\\n` +\n      `Ø¨Ø¹Ø¯ Ø§Ù„ØªØ³ÙˆÙŠØ©:\\n` +\n      `â€¢ Ø±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ±Ø¯: ${(supplierBalance - settlementAmount).toFixed(2)} Ø¬.Ù…\\n` +\n      `â€¢ Ø¯ÙŠÙˆÙ† Ø§Ù„Ø¹Ù…ÙŠÙ„: ${(totalRemaining - settlementAmount).toFixed(2)} Ø¬.Ù…\\n\\n` +\n      `âš ï¸ Ù…Ù„Ø§Ø­Ø¸Ø©: ØªØ³ÙˆÙŠØ© Ø¯Ø§Ø®Ù„ÙŠØ© Ø¨Ø¯ÙˆÙ† ØªØ£Ø«ÙŠØ± Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø²ÙŠÙ†Ø©\\n\\n` +\n      `Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ`;\n\n    if (!confirm(confirmMessage)) {\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const response = await axios.post(\n        `${API}/customers/${selectedCustomer}/reconcile-with-supplier`,\n        null,\n        {\n          params: {\n            username: user?.username\n          }\n        }\n      );\n\n      // Refresh data\n      fetchCustomerInvoices(selectedCustomer);\n      fetchSuppliers();\n      \n      // Show detailed result\n      let message = `âœ… ${response.data.message}\\n\\n`;\n      message += `ğŸ“Š Ø§Ù„ØªÙØ§ØµÙŠÙ„:\\n`;\n      message += `â€¢ Ø±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ±Ø¯ Ø§Ù„Ø³Ø§Ø¨Ù‚: ${response.data.supplier_previous_balance.toFixed(2)} Ø¬.Ù…\\n`;\n      message += `â€¢ Ø¯ÙŠÙˆÙ† Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©: ${response.data.customer_previous_debt.toFixed(2)} Ø¬.Ù…\\n`;\n      message += `â€¢ Ù…Ø¨Ù„Øº Ø§Ù„ØªØ³ÙˆÙŠØ©: ${response.data.settlement_amount.toFixed(2)} Ø¬.Ù…\\n\\n`;\n      message += `ğŸ“‰ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ³ÙˆÙŠØ©:\\n`;\n      message += `â€¢ Ø±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ±Ø¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯: ${response.data.supplier_new_balance.toFixed(2)} Ø¬.Ù…\\n`;\n      message += `â€¢ Ø¯ÙŠÙˆÙ† Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: ${response.data.customer_remaining_debt.toFixed(2)} Ø¬.Ù…\\n\\n`;\n      message += `ğŸ“‹ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø³ÙˆØ§Ø© (${response.data.invoices_count}):\\n`;\n      response.data.settled_invoices.forEach(inv => {\n        message += `\\nâ€¢ ${inv.invoice_number}\\n`;\n        message += `  Ø§Ù„Ù…Ø¯ÙÙˆØ¹: ${inv.amount_paid.toFixed(2)} Ø¬.Ù…\\n`;\n        message += `  Ø§Ù„Ø­Ø§Ù„Ø©: ${inv.status}\\n`;\n      });\n      message += `\\n${response.data.note}`;\n      \n      alert(message);\n      \n      // Update local state\n      setIsCustomerAlsoSupplier(response.data.supplier_new_balance > 0);\n      setSupplierBalance(response.data.supplier_new_balance);\n      \n    } catch (error) {\n      console.error('Error reconciling account:', error);\n      alert(error.response?.data?.detail || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ³ÙˆÙŠØ©');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const totalRemaining = deferredInvoices.reduce((sum, inv) => sum + inv.remaining_amount, 0);\n\n  return (\n    <div className=\"p-6 bg-gray-50 min-h-screen\" dir=\"rtl\">\n      {/* Header */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h1 className=\"text-3xl font-bold text-gray-800 flex items-center gap-2\">\n          ğŸ’µ ØªØµÙÙŠØ© Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…ÙŠÙ„\n        </h1>\n        <p className=\"text-gray-600 mt-2\">Ø¯ÙØ¹ Ù…Ø¨Ù„Øº Ù„ØªØµÙÙŠØ© ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ø¢Ø¬Ù„Ø©</p>\n      </div>\n\n      {/* Settlement Form */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-xl font-semibold mb-4\">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØµÙÙŠØ©</h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n          {/* Customer Selection */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„ *\n            </label>\n            <select\n              value={selectedCustomer || ''}\n              onChange={(e) => handleCustomerChange(e.target.value)}\n              className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n            >\n              <option value=\"\">-- Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„ --</option>\n              {customers.map(customer => (\n                <option key={customer.id} value={customer.id}>\n                  {customer.name}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          {/* Amount Paid */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹ (Ø¬.Ù…) *\n            </label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={amountPaid}\n              onChange={(e) => setAmountPaid(e.target.value)}\n              placeholder=\"0.00\"\n              className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n            />\n          </div>\n\n          {/* Payment Method */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ *\n            </label>\n            <select\n              value={paymentMethod}\n              onChange={(e) => setPaymentMethod(e.target.value)}\n              className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n            >\n              <option value=\"Ù†Ù‚Ø¯ÙŠ\">Ù†Ù‚Ø¯ÙŠ</option>\n              <option value=\"ÙÙˆØ¯Ø§ÙÙˆÙ† 010\">ÙÙˆØ¯Ø§ÙÙˆÙ† 010</option>\n              <option value=\"ÙƒØ§Ø´ 0100\">ÙƒØ§Ø´ 0100</option>\n              <option value=\"Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ\">Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ</option>\n              <option value=\"ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ\">ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ</option>\n            </select>\n          </div>\n\n          {/* Settle Button */}\n          <div className=\"flex items-end\">\n            <button\n              onClick={handleSettleAccount}\n              disabled={loading || !selectedCustomer || !amountPaid}\n              className={`w-full py-3 rounded-lg font-semibold text-white transition-colors ${\n                loading || !selectedCustomer || !amountPaid\n                  ? 'bg-gray-400 cursor-not-allowed'\n                  : 'bg-green-500 hover:bg-green-600'\n              }`}\n            >\n              {loading ? 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØµÙÙŠØ©...' : 'âœ… ØªØµÙÙŠØ© Ø§Ù„Ø­Ø³Ø§Ø¨'}\n            </button>\n          </div>\n        </div>\n\n        {/* Reconciliation Section - If customer is also supplier */}\n        {isCustomerAlsoSupplier && selectedCustomer && (\n          <div className=\"mt-4 p-4 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg border-2 border-purple-300\">\n            <div className=\"flex justify-between items-center\">\n              <div>\n                <h4 className=\"text-lg font-semibold text-purple-800 mb-2\">\n                  ğŸ”„ ØªØ³ÙˆÙŠØ© Ø§Ù„Ø­Ø³Ø§Ø¨ (Ø¹Ù…ÙŠÙ„ ÙˆÙ…ÙˆØ±Ø¯)\n                </h4>\n                <div className=\"text-sm space-y-1\">\n                  <p className=\"text-gray-700\">\n                    <span className=\"font-semibold\">Ø±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ±Ø¯:</span> {supplierBalance.toFixed(2)} Ø¬.Ù…\n                  </p>\n                  <p className=\"text-gray-700\">\n                    <span className=\"font-semibold\">Ø¯ÙŠÙˆÙ† Ø§Ù„Ø¹Ù…ÙŠÙ„:</span> {totalRemaining.toFixed(2)} Ø¬.Ù…\n                  </p>\n                  <p className=\"text-purple-700 font-semibold\">\n                    Ø³ÙŠØªÙ… ØªØ³ÙˆÙŠØ©: {Math.min(supplierBalance, totalRemaining).toFixed(2)} Ø¬.Ù…\n                  </p>\n                </div>\n              </div>\n              <button\n                onClick={handleReconciliation}\n                disabled={loading || totalRemaining === 0 || supplierBalance === 0}\n                className={`px-6 py-3 rounded-lg font-semibold text-white transition-colors ${\n                  loading || totalRemaining === 0 || supplierBalance === 0\n                    ? 'bg-gray-400 cursor-not-allowed'\n                    : 'bg-purple-600 hover:bg-purple-700'\n                }`}\n              >\n                {loading ? 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ³ÙˆÙŠØ©...' : 'ğŸ”„ ØªØ³ÙˆÙŠØ©'}\n              </button>\n            </div>\n            <p className=\"text-xs text-purple-600 mt-2\">\n              âš ï¸ ØªØ³ÙˆÙŠØ© Ø¯Ø§Ø®Ù„ÙŠØ© Ø¨Ø¯ÙˆÙ† ØªØ£Ø«ÙŠØ± Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø²ÙŠÙ†Ø©\n            </p>\n          </div>\n        )}\n      </div>\n\n      {/* Customer Invoices */}\n      {selectedCustomer && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <div className=\"flex justify-between items-center mb-4\">\n            <h3 className=\"text-xl font-semibold\">\n              Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø¢Ø¬Ù„Ø© ({deferredInvoices.length})\n            </h3>\n            <div className=\"text-right\">\n              <p className=\"text-sm text-gray-600\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ­Ù‚</p>\n              <p className=\"text-2xl font-bold text-red-600\">\n                {totalRemaining.toFixed(2)} Ø¬.Ù…\n              </p>\n            </div>\n          </div>\n\n          {deferredInvoices.length === 0 ? (\n            <div className=\"text-center py-8 text-gray-500\">\n              âœ… Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙˆØ§ØªÙŠØ± Ø¢Ø¬Ù„Ø© Ù…Ø³ØªØ­Ù‚Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full border-collapse\">\n                <thead>\n                  <tr className=\"bg-gray-100\">\n                    <th className=\"border border-gray-300 p-3 text-right\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>\n                    <th className=\"border border-gray-300 p-3 text-right\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                    <th className=\"border border-gray-300 p-3 text-right\">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>\n                    <th className=\"border border-gray-300 p-3 text-right\">Ø§Ù„Ù…Ø¯ÙÙˆØ¹</th>\n                    <th className=\"border border-gray-300 p-3 text-right\">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {deferredInvoices.map((invoice, index) => (\n                    <tr key={invoice.id} className={index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}>\n                      <td className=\"border border-gray-300 p-3 font-semibold\">\n                        {invoice.invoice_number}\n                      </td>\n                      <td className=\"border border-gray-300 p-3\">\n                        {new Date(invoice.date).toLocaleDateString('ar-EG')}\n                      </td>\n                      <td className=\"border border-gray-300 p-3\">\n                        {invoice.total_amount.toFixed(2)} Ø¬.Ù…\n                      </td>\n                      <td className=\"border border-gray-300 p-3 text-green-600\">\n                        {invoice.paid_amount.toFixed(2)} Ø¬.Ù…\n                      </td>\n                      <td className=\"border border-gray-300 p-3 text-red-600 font-bold\">\n                        {invoice.remaining_amount.toFixed(2)} Ø¬.Ù…\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n                <tfoot>\n                  <tr className=\"bg-gray-200 font-bold\">\n                    <td colSpan=\"4\" className=\"border border-gray-300 p-3 text-right\">\n                      Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:\n                    </td>\n                    <td className=\"border border-gray-300 p-3 text-red-600\">\n                      {totalRemaining.toFixed(2)} Ø¬.Ù…\n                    </td>\n                  </tr>\n                </tfoot>\n              </table>\n            </div>\n          )}\n\n          <div className=\"mt-4 p-4 bg-blue-50 rounded-lg border-r-4 border-blue-500\">\n            <p className=\"text-sm text-gray-700\">\n              ğŸ’¡ <strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ø³ÙŠØªÙ… ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹ Ø¹Ù„Ù‰ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø¨ØªØ±ØªÙŠØ¨ Ø§Ù„ØªØ§Ø±ÙŠØ® Ù…Ù† Ø§Ù„Ø£Ù‚Ø¯Ù… Ù„Ù„Ø£Ø­Ø¯Ø«\n            </p>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Work Orders Component\nconst WorkOrders = () => {\n  const [workOrders, setWorkOrders] = useState([]);\n  const [invoices, setInvoices] = useState([]);\n  const [selectedInvoices, setSelectedInvoices] = useState([]);\n  const [newWorkOrder, setNewWorkOrder] = useState({\n    title: '',\n    description: '',\n    priority: 'Ø¹Ø§Ø¯ÙŠ'\n  });\n  const [showAddToExisting, setShowAddToExisting] = useState(false);\n  const [selectedWorkOrderId, setSelectedWorkOrderId] = useState('');\n  const [selectedInvoiceForAdd, setSelectedInvoiceForAdd] = useState('');\n\n  useEffect(() => {\n    fetchWorkOrders();\n    fetchInvoices();\n  }, []);\n\n  const fetchWorkOrders = async () => {\n    try {\n      const response = await axios.get(`${API}/work-orders`);\n      setWorkOrders(response.data);\n    } catch (error) {\n      console.error('Error fetching work orders:', error);\n      setWorkOrders([]); // Set empty array on error\n    }\n  };\n\n  const fetchInvoices = async () => {\n    try {\n      const response = await axios.get(`${API}/invoices`);\n      setInvoices(response.data);\n    } catch (error) {\n      console.error('Error fetching invoices:', error);\n    }\n  };\n\n  const toggleInvoiceSelection = (invoiceId) => {\n    setSelectedInvoices(prev => \n      prev.includes(invoiceId) \n        ? prev.filter(id => id !== invoiceId)\n        : [...prev, invoiceId]\n    );\n  };\n\n  const createWorkOrderFromMultipleInvoices = async () => {\n    if (selectedInvoices.length === 0) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ÙØ§ØªÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');\n      return;\n    }\n\n    if (!newWorkOrder.title.trim()) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„');\n      return;\n    }\n\n    try {\n      // Get selected invoices data\n      const selectedInvoicesData = invoices.filter(inv => selectedInvoices.includes(inv.id));\n      \n      // Clean invoices data (remove MongoDB ObjectIds)\n      const cleanInvoices = selectedInvoicesData.map(inv => {\n        const cleanInv = { ...inv };\n        if (cleanInv._id) delete cleanInv._id;\n        return cleanInv;\n      });\n      \n      // Create work order with multiple invoices\n      const workOrderData = {\n        title: newWorkOrder.title,\n        description: newWorkOrder.description,\n        priority: newWorkOrder.priority,\n        invoices: cleanInvoices,\n        total_amount: cleanInvoices.reduce((sum, inv) => sum + (inv.total_amount || 0), 0),\n        total_items: cleanInvoices.reduce((sum, inv) => sum + (inv.items?.length || 0), 0)\n      };\n\n      const response = await axios.post(`${API}/work-orders/multiple`, workOrderData);\n      \n      if (response.data) {\n        alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ø¨Ù†Ø¬Ø§Ø­');\n        \n        // Reset form\n        setSelectedInvoices([]);\n        setNewWorkOrder({\n          title: '',\n          description: '',\n          priority: 'Ø¹Ø§Ø¯ÙŠ'\n        });\n        \n        // Refresh work orders list\n        await fetchWorkOrders();\n      }\n    } catch (error) {\n      console.error('Error creating work order:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const addInvoiceToExistingWorkOrder = async () => {\n    if (!selectedWorkOrderId || !selectedInvoiceForAdd) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ ÙˆØ§Ù„ÙØ§ØªÙˆØ±Ø©');\n      return;\n    }\n\n    try {\n      const response = await axios.put(`${API}/work-orders/${selectedWorkOrderId}/add-invoice`, null, {\n        params: { invoice_id: selectedInvoiceForAdd }\n      });\n      \n      if (response.data) {\n        alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¥Ù„Ù‰ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ø¨Ù†Ø¬Ø§Ø­');\n        \n        // Reset form\n        setSelectedWorkOrderId('');\n        setSelectedInvoiceForAdd('');\n        setShowAddToExisting(false);\n        \n        // Refresh work orders list\n        await fetchWorkOrders();\n      }\n    } catch (error) {\n      console.error('Error adding invoice to work order:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ§ØªÙˆØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const getInvoiceDetails = (invoiceId) => {\n    return invoices.find(inv => inv.id === invoiceId);\n  };\n\n  const getAvailableInvoices = () => {\n    // Show invoices that are \"ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°\" or \"Ø§Ù†ØªØ¸Ø§Ø±\"\n    return invoices.filter(invoice => \n      invoice.status === 'ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°' || invoice.status === 'Ø§Ù†ØªØ¸Ø§Ø±'\n    );\n  };\n\n  const getAvailableInvoicesForAdd = () => {\n    // Get invoices not already in the selected work order\n    if (!selectedWorkOrderId) return getAvailableInvoices();\n    \n    const selectedWorkOrder = workOrders.find(wo => wo.id === selectedWorkOrderId);\n    if (!selectedWorkOrder) return getAvailableInvoices();\n    \n    const usedInvoiceIds = selectedWorkOrder.invoices?.map(inv => inv.id) || [];\n    \n    return getAvailableInvoices().filter(invoice => \n      !usedInvoiceIds.includes(invoice.id)\n    );\n  };\n\n  const printWorkOrder = (workOrder) => {\n    const workOrderInvoices = workOrder.invoices?.map(invoiceData => \n      invoices.find(inv => inv.id === invoiceData.id) || invoiceData\n    ).filter(inv => inv) || [];\n    \n    const totalAmount = workOrderInvoices.reduce((sum, inv) => sum + (inv.total_amount || 0), 0);\n    const totalItems = workOrderInvoices.reduce((sum, inv) => sum + (inv.items?.length || 0), 0);\n    \n    const printContent = `\n      <div style=\"font-family: Arial, sans-serif; direction: rtl; text-align: right;\">\n        <div style=\"text-align: center; margin-bottom: 20px;\">\n          <h1>Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„</h1>\n          <p>Ø§Ù„Ø­Ø±ÙÙŠÙŠÙ† Ø´Ø§Ø±Ø¹ Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª - 01020630677</p>\n          <h2 style=\"color: #333; margin-top: 20px;\">Ø£Ù…Ø± Ø´ØºÙ„</h2>\n        </div>\n        \n        <div style=\"margin-bottom: 20px;\">\n          <strong>Ø±Ù‚Ù… Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„:</strong> ${workOrder.id}<br>\n          <strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> ${workOrder.title || `Ø£Ù…Ø± Ø´ØºÙ„ #${workOrder.id.slice(-8)}`}<br>\n          <strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${new Date(workOrder.created_at).toLocaleDateString('ar-EG')}<br>\n          <strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> ${workOrder.status || 'Ø¬Ø¯ÙŠØ¯'}<br>\n          <strong>Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ±:</strong> ${workOrderInvoices.length}<br>\n          <strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ù„Øº:</strong> Ø¬.Ù… ${totalAmount.toFixed(2)}\n          ${workOrder.description ? `<br><strong>Ø§Ù„ÙˆØµÙ:</strong> ${workOrder.description}` : ''}\n          ${workOrder.supervisor_name ? `<br><strong>Ø§Ù„Ù…Ø´Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØªØµÙ†ÙŠØ¹:</strong> ${workOrder.supervisor_name}` : ''}\n          ${workOrder.is_daily ? `<br><strong>Ù†ÙˆØ¹ Ø§Ù„Ø£Ù…Ø±:</strong> Ø£Ù…Ø± Ø´ØºÙ„ ÙŠÙˆÙ…ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠ` : ''}\n        </div>\n\n        <h3 style=\"color: #333; margin-bottom: 10px;\">Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø¯Ø±Ø¬Ø©:</h3>\n        <table style=\"width: 100%; border-collapse: collapse; margin-bottom: 20px;\">\n          <thead>\n            <tr style=\"background-color: #f0f0f0;\">\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø§Ù„Ø¹Ù…ÙŠÙ„</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø§Ù„Ù…Ø¨Ù„Øº</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${workOrderInvoices.map(invoice => `\n              <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">${invoice.invoice_number}</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">${invoice.customer_name}</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">${new Date(invoice.date).toLocaleDateString('ar-EG')}</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">Ø¬.Ù… ${invoice.total_amount?.toFixed(2) || '0.00'}</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">${invoice.items?.length || 0}</td>\n              </tr>\n            `).join('')}\n          </tbody>\n        </table>\n\n        <h3 style=\"color: #333; margin-bottom: 10px;\">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</h3>\n        <table style=\"width: 100%; border-collapse: collapse; margin-bottom: 20px;\">\n          <thead>\n            <tr style=\"background-color: #f0f0f0;\">\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø§Ù„Ù…Ù‚Ø§Ø³</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø§Ù„ÙƒÙ…ÙŠØ©</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø§Ù„Ø®Ø§Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø©</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${workOrderInvoices.map(invoice => \n              invoice.items?.map(item => `\n                <tr>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">${invoice.invoice_number}</td>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">${item.local_product_details ? item.local_product_details.product_type : (item.seal_type || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯')}</td>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">${item.local_product_details ? 'Ù…Ø­Ù„ÙŠ' : (item.material_type || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯')}</td>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">${item.local_product_details ? `${item.local_product_details.product_size} - ${item.local_product_details.product_type}` : (item.inner_diameter && item.outer_diameter && item.height ? `${item.inner_diameter} Ã— ${item.outer_diameter} Ã— ${item.height}${item.wall_height ? ` (Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø©: ${item.wall_height})` : ''}` : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯')}</td>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">${item.quantity}</td>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">${item.local_product_details ? 'Ù…Ø­Ù„ÙŠ' : (item.material_used || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯')}</td>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">\n                    ${item.local_product_details ? \n                      'Ù…Ø­Ù„ÙŠ' :\n                      item.material_details ? \n                        (item.material_details.is_finished_product ? \n                          'Ù…Ø®Ø²Ù† Ø§Ù†ØªØ§Ø¬ ØªØ§Ù…' : \n                          `${item.material_details.unit_code} / ${item.material_details.inner_diameter}-${item.material_details.outer_diameter}`\n                        ) : \n                        `${item.material_used || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'} / Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©`\n                    }\n                  </td>\n                </tr>\n              `).join('') || ''\n            ).join('')}\n          </tbody>\n        </table>\n        \n        <div style=\"margin-top: 40px; border-top: 1px solid #ddd; padding-top: 20px;\">\n          <div style=\"float: left;\">\n            <strong>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ØªØµÙ†ÙŠØ¹:</strong><br>\n            <div style=\"margin-top: 10px; height: 50px; border: 1px solid #ddd;\"></div>\n          </div>\n          <div style=\"float: right;\">\n            <strong>ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„:</strong><br>\n            <div style=\"margin-top: 10px; height: 50px; border: 1px solid #ddd; width: 150px;\"></div>\n          </div>\n          <div style=\"clear: both;\"></div>\n        </div>\n      </div>\n    `;\n    \n    const printWindow = window.open('', '_blank');\n    printWindow.document.write(printContent);\n    printWindow.document.close();\n    printWindow.print();\n  };\n\n  const clearAllWorkOrders = async () => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´ØºÙ„ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) return;\n    \n    try {\n      await axios.delete(`${API}/work-orders/clear-all`);\n      fetchWorkOrders();\n      alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´ØºÙ„');\n    } catch (error) {\n      console.error('Error clearing work orders:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');\n    }\n  };\n\n  const deleteWorkOrder = async (workOrderId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ù‡Ø°Ø§ØŸ')) return;\n    \n    try {\n      await axios.delete(`${API}/work-orders/${workOrderId}`);\n      fetchWorkOrders();\n      alert('ØªÙ… Ø­Ø°Ù Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting work order:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„');\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-blue-600 mb-4\">Ø£Ù…Ø± Ø´ØºÙ„</h2>\n        \n        <div className=\"flex space-x-4 space-x-reverse mb-4\">\n          <button \n            onClick={clearAllWorkOrders}\n            className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n            Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n          </button>\n          <button \n            onClick={() => { fetchWorkOrders(); fetchInvoices(); }}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n            Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => window.print()}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n            Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n          <button \n            onClick={() => setShowAddToExisting(!showAddToExisting)}\n            className=\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\">\n            {showAddToExisting ? 'Ø¥Ø®ÙØ§Ø¡' : 'Ø¥Ø¶Ø§ÙØ© ÙØ§ØªÙˆØ±Ø© Ù„Ø£Ù…Ø± Ù…ÙˆØ¬ÙˆØ¯'}\n          </button>\n          <select className=\"border border-gray-300 rounded px-3 py-2\">\n            <option>ÙŠÙˆÙ…ÙŠ</option>\n            <option>Ø£Ø³Ø¨ÙˆØ¹ÙŠ</option>\n            <option>Ø´Ù‡Ø±ÙŠ</option>\n            <option>Ø³Ù†ÙˆÙŠ</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Add Invoice to Existing Work Order */}\n      {showAddToExisting && (\n        <div className=\"bg-yellow-50 p-6 rounded-lg shadow-md mb-6 border border-yellow-200\">\n          <h3 className=\"text-lg font-semibold mb-4 text-yellow-800\">Ø¥Ø¶Ø§ÙØ© ÙØ§ØªÙˆØ±Ø© Ø¥Ù„Ù‰ Ø£Ù…Ø± Ø´ØºÙ„ Ù…ÙˆØ¬ÙˆØ¯</h3>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ø®ØªÙŠØ§Ø± Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„</label>\n              <select\n                value={selectedWorkOrderId}\n                onChange={(e) => setSelectedWorkOrderId(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              >\n                <option value=\"\">Ø§Ø®ØªØ± Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„</option>\n                {workOrders.map(workOrder => (\n                  <option key={workOrder.id} value={workOrder.id}>\n                    {workOrder.title || `Ø£Ù…Ø± Ø´ØºÙ„ #${workOrder.id.slice(-8)}`} \n                    ({workOrder.invoices?.length || 0} ÙØ§ØªÙˆØ±Ø©)\n                  </option>\n                ))}\n              </select>\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØ§ØªÙˆØ±Ø©</label>\n              <select\n                value={selectedInvoiceForAdd}\n                onChange={(e) => setSelectedInvoiceForAdd(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n                disabled={!selectedWorkOrderId}\n              >\n                <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„ÙØ§ØªÙˆØ±Ø©</option>\n                {getAvailableInvoicesForAdd().map(invoice => (\n                  <option key={invoice.id} value={invoice.id}>\n                    {invoice.invoice_number} - {invoice.customer_name} \n                    (Ø¬.Ù… {invoice.total_amount?.toFixed(2) || '0.00'})\n                  </option>\n                ))}\n              </select>\n            </div>\n          </div>\n          \n          <div className=\"flex space-x-4 space-x-reverse\">\n            <button\n              onClick={addInvoiceToExistingWorkOrder}\n              className=\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\"\n              disabled={!selectedWorkOrderId || !selectedInvoiceForAdd}\n            >\n              Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n            </button>\n            <button\n              onClick={() => {\n                setShowAddToExisting(false);\n                setSelectedWorkOrderId('');\n                setSelectedInvoiceForAdd('');\n              }}\n              className=\"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600\"\n            >\n              Ø¥Ù„ØºØ§Ø¡\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Create Work Order from Multiple Invoices */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø´ØºÙ„ Ø¬Ø¯ÙŠØ¯</h3>\n        \n        {/* Work Order Details */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø¹Ù†ÙˆØ§Ù† Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ *</label>\n            <input\n              type=\"text\"\n              value={newWorkOrder.title}\n              onChange={(e) => setNewWorkOrder({...newWorkOrder, title: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"Ù…Ø«Ø§Ù„: Ø£Ù…Ø± Ø´ØºÙ„ Ø±Ù‚Ù… 1 - ÙŠÙ†Ø§ÙŠØ± 2025\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©</label>\n            <select\n              value={newWorkOrder.priority}\n              onChange={(e) => setNewWorkOrder({...newWorkOrder, priority: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"Ø¹Ø§Ø¯ÙŠ\">Ø¹Ø§Ø¯ÙŠ</option>\n              <option value=\"Ù…Ù‡Ù…\">Ù…Ù‡Ù…</option>\n              <option value=\"Ø·Ø§Ø±Ø¦\">Ø·Ø§Ø±Ø¦</option>\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©</label>\n            <div className=\"p-2 bg-gray-100 rounded\">\n              {selectedInvoices.length} ÙØ§ØªÙˆØ±Ø© Ù…Ø­Ø¯Ø¯Ø©\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium mb-1\">ÙˆØµÙ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„</label>\n          <textarea\n            value={newWorkOrder.description}\n            onChange={(e) => setNewWorkOrder({...newWorkOrder, description: e.target.value})}\n            className=\"w-full p-2 border border-gray-300 rounded h-20\"\n            placeholder=\"ÙˆØµÙ Ø¥Ø¶Ø§ÙÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n          />\n        </div>\n        \n        <h4 className=\"font-medium mb-2\">Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙÙˆØ§ØªÙŠØ±:</h4>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4 max-h-60 overflow-y-auto border rounded p-4\">\n          {getAvailableInvoices().map(invoice => (\n            <div \n              key={invoice.id} \n              className={`border rounded-lg p-3 cursor-pointer transition-colors ${\n                selectedInvoices.includes(invoice.id) \n                  ? 'border-blue-500 bg-blue-50' \n                  : 'border-gray-300 hover:bg-gray-50'\n              }`}\n              onClick={() => toggleInvoiceSelection(invoice.id)}\n            >\n              <div className=\"flex items-center mb-2\">\n                <input\n                  type=\"checkbox\"\n                  checked={selectedInvoices.includes(invoice.id)}\n                  onChange={() => {}}\n                  className=\"ml-2\"\n                />\n                <h5 className=\"font-semibold\">{invoice.invoice_number}</h5>\n              </div>\n              <p className=\"text-sm text-gray-600\">Ø§Ù„Ø¹Ù…ÙŠÙ„: {invoice.customer_name}</p>\n              <p className=\"text-sm text-gray-600\">\n                Ø§Ù„ØªØ§Ø±ÙŠØ®: {new Date(invoice.date).toLocaleDateString('ar-EG')}\n              </p>\n              <p className=\"text-sm font-medium\">\n                Ø§Ù„Ù…Ø¨Ù„Øº: Ø¬.Ù… {invoice.total_amount?.toFixed(2) || '0.00'}\n              </p>\n              <p className=\"text-sm\">\n                Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: {invoice.items?.length || 0} ØµÙ†Ù\n              </p>\n              <span className={`inline-block px-2 py-1 rounded text-xs mt-1 ${\n                invoice.status === 'ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°' \n                  ? 'bg-green-100 text-green-800' \n                  : 'bg-blue-100 text-blue-800'\n              }`}>\n                {invoice.status}\n              </span>\n            </div>\n          ))}\n        </div>\n        \n        {getAvailableInvoices().length === 0 && (\n          <div className=\"text-center py-8 text-gray-500\">\n            Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙˆØ§ØªÙŠØ± Ù…ØªØ§Ø­Ø© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø´ØºÙ„\n          </div>\n        )}\n        \n        {selectedInvoices.length > 0 && (\n          <div className=\"mb-4 p-3 bg-blue-100 rounded\">\n            <h5 className=\"font-semibold text-blue-800\">Ù…Ù„Ø®Øµ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„:</h5>\n            <p className=\"text-blue-700\">\n              Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙÙˆØ§ØªÙŠØ±: {selectedInvoices.length} ÙØ§ØªÙˆØ±Ø©\n            </p>\n            <p className=\"text-blue-700\">\n              Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ù„Øº: Ø¬.Ù… {invoices\n                .filter(inv => selectedInvoices.includes(inv.id))\n                .reduce((sum, inv) => sum + (inv.total_amount || 0), 0)\n                .toFixed(2)}\n            </p>\n            <p className=\"text-blue-700\">\n              Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: {invoices\n                .filter(inv => selectedInvoices.includes(inv.id))\n                .reduce((sum, inv) => sum + (inv.items?.length || 0), 0)} ØµÙ†Ù\n            </p>\n          </div>\n        )}\n        \n        <button\n          onClick={createWorkOrderFromMultipleInvoices}\n          className=\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\"\n          disabled={selectedInvoices.length === 0}\n        >\n          Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ ({selectedInvoices.length} ÙØ§ØªÙˆØ±Ø©)\n        </button>\n      </div>\n\n      {/* Work Orders List */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´ØºÙ„ ({workOrders.length})</h3>\n        \n        {workOrders.map(workOrder => {\n          // Handle both single invoice and multiple invoices work orders\n          const workOrderInvoices = workOrder.invoices || (workOrder.invoice_id ? [getInvoiceDetails(workOrder.invoice_id)] : []);\n          \n          return (\n            <div key={workOrder.id} className=\"border rounded-lg p-4 mb-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                <div>\n                  <h4 className=\"font-semibold text-lg\">\n                    {workOrder.title || `Ø£Ù…Ø± Ø´ØºÙ„ #${workOrder.id.slice(-8)}`}\n                  </h4>\n                  <p><strong>Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:</strong> \n                    <span className={`mr-2 px-2 py-1 rounded text-sm ${\n                      workOrder.priority === 'Ø·Ø§Ø±Ø¦' ? 'bg-red-100 text-red-800' :\n                      workOrder.priority === 'Ù…Ù‡Ù…' ? 'bg-yellow-100 text-yellow-800' :\n                      'bg-blue-100 text-blue-800'\n                    }`}>\n                      {workOrder.priority || 'Ø¹Ø§Ø¯ÙŠ'}\n                    </span>\n                  </p>\n                  <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡:</strong> {new Date(workOrder.created_at).toLocaleDateString('ar-EG')}</p>\n                  <p><strong>Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ±:</strong> {workOrderInvoices.filter(inv => inv).length}</p>\n                </div>\n                \n                <div>\n                  <p><strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> \n                    <span className=\"mr-2 px-2 py-1 rounded text-sm bg-blue-100 text-blue-800\">\n                      {workOrder.status || 'Ø¬Ø¯ÙŠØ¯'}\n                    </span>\n                  </p>\n                  <p><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ù„Øº:</strong> \n                    Ø¬.Ù… {workOrder.total_amount?.toFixed(2) || \n                    workOrderInvoices.reduce((sum, inv) => sum + (inv?.total_amount || 0), 0).toFixed(2)}\n                  </p>\n                  {workOrder.description && (\n                    <p><strong>Ø§Ù„ÙˆØµÙ:</strong> {workOrder.description}</p>\n                  )}\n                  {workOrder.supervisor_name && (\n                    <p><strong>Ø§Ù„Ù…Ø´Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØªØµÙ†ÙŠØ¹:</strong> {workOrder.supervisor_name}</p>\n                  )}\n                  {workOrder.is_daily && (\n                    <p><strong>Ù†ÙˆØ¹ Ø§Ù„Ø£Ù…Ø±:</strong> <span className=\"text-green-600\">Ø£Ù…Ø± Ø´ØºÙ„ ÙŠÙˆÙ…ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠ</span></p>\n                  )}\n                </div>\n              </div>\n              \n              {/* Work Order Invoices */}\n              <div className=\"mb-4\">\n                <h5 className=\"font-medium mb-2\">Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø¯Ø±Ø¬Ø©:</h5>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\n                  {workOrderInvoices.filter(invoice => invoice).map((invoice, index) => (\n                    <div key={index} className=\"bg-gray-50 p-3 rounded border\">\n                      <p><strong>Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©:</strong> {invoice.invoice_number}</p>\n                      <p><strong>Ø§Ù„Ø¹Ù…ÙŠÙ„:</strong> {invoice.customer_name}</p>\n                      <p><strong>Ø§Ù„Ù…Ø¨Ù„Øº:</strong> Ø¬.Ù… {invoice.total_amount?.toFixed(2) || '0.00'}</p>\n                      <p><strong>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</strong> {invoice.items?.length || 0} ØµÙ†Ù</p>\n                    </div>\n                  ))}\n                </div>\n              </div>\n              \n              {/* Work Order Items Details */}\n              <div className=\"overflow-x-auto mb-4\">\n                <h5 className=\"font-medium mb-2\">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</h5>\n                <table className=\"w-full border-collapse border border-gray-300\">\n                  <thead>\n                    <tr className=\"bg-gray-100\">\n                      <th className=\"border border-gray-300 p-2\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>\n                      <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„</th>\n                      <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</th>\n                      <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ù‚Ø§Ø³</th>\n                      <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙƒÙ…ÙŠØ©</th>\n                      <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø®Ø§Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©</th>\n                      <th className=\"border border-gray-300 p-2\">ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø©</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {workOrderInvoices.filter(invoice => invoice).map(invoice => \n                      invoice.items?.map((item, itemIndex) => (\n                        <tr key={`${invoice.id}-${itemIndex}`}>\n                          <td className=\"border border-gray-300 p-2\">{invoice.invoice_number}</td>\n                          <td className=\"border border-gray-300 p-2\">{item.seal_type}</td>\n                          <td className=\"border border-gray-300 p-2\">{item.material_type}</td>\n                          <td className=\"border border-gray-300 p-2\">\n                            {item.inner_diameter} Ã— {item.outer_diameter} Ã— {item.height}\n                          </td>\n                          <td className=\"border border-gray-300 p-2\">{item.quantity}</td>\n                          <td className=\"border border-gray-300 p-2\">\n                            {item.material_details ? (\n                              item.material_details.is_finished_product ? (\n                                <span className=\"px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm\">\n                                  Ù…Ù†ØªØ¬ Ø¬Ø§Ù‡Ø²\n                                </span>\n                              ) : (\n                                <span className=\"px-2 py-1 bg-green-100 text-green-800 rounded text-sm\">\n                                  {item.material_details.material_type}\n                                </span>\n                              )\n                            ) : (\n                              <span className=\"px-2 py-1 bg-green-100 text-green-800 rounded text-sm\">\n                                {item.material_used || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}\n                              </span>\n                            )}\n                          </td>\n                          <td className=\"border border-gray-300 p-2\">\n                            <div className=\"font-mono text-sm\">\n                              {item.material_details ? (\n                                item.material_details.is_finished_product ? (\n                                  <div className=\"text-center font-semibold text-blue-600\">\n                                    Ù…Ø®Ø²Ù† Ø§Ù†ØªØ§Ø¬ ØªØ§Ù…\n                                  </div>\n                                ) : (\n                                  <div>\n                                    <div className=\"font-semibold\">\n                                      {item.unit_code_display || item.material_details.unit_code}\n                                    </div>\n                                    <div className=\"text-xs text-gray-600\">\n                                      {item.material_details.inner_diameter} - {item.material_details.outer_diameter}\n                                    </div>\n                                  </div>\n                                )\n                              ) : (\n                                // Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø£Ùˆ Ø¹Ù†Ø¯Ù…Ø§ Ù„Ø§ ØªÙˆØ¬Ø¯ material_details\n                                <div>\n                                  <div className=\"font-semibold\">{item.material_used || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>\n                                  <div className=\"text-xs text-gray-600\">\n                                    Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø®Ø§Ù…Ø© ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©\n                                  </div>\n                                </div>\n                              )}\n                            </div>\n                          </td>\n                        </tr>\n                      )) || []\n                    )}\n                  </tbody>\n                </table>\n              </div>\n              \n              {/* Work Order Actions */}\n              <div className=\"flex space-x-4 space-x-reverse\">\n                <button \n                  onClick={() => printWorkOrder(workOrder)}\n                  className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n                  Ø·Ø¨Ø§Ø¹Ø© Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„\n                </button>\n                <button className=\"bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600\">\n                  ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„Ø©\n                </button>\n                <button \n                  onClick={() => {\n                    setSelectedWorkOrderId(workOrder.id);\n                    setShowAddToExisting(true);\n                  }}\n                  className=\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\">\n                  Ø¥Ø¶Ø§ÙØ© ÙØ§ØªÙˆØ±Ø©\n                </button>\n                <button \n                  onClick={() => deleteWorkOrder(workOrder.id)}\n                  className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n                  Ø­Ø°Ù\n                </button>\n              </div>\n            </div>\n          );\n        })}\n        \n        {workOrders.length === 0 && (\n          <div className=\"text-center py-8 text-gray-500\">\n            Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ÙˆØ§Ù…Ø± Ø´ØºÙ„\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// Treasury Management Component\nconst Treasury = () => {\n  const { user } = useAuth(); // Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ\n  const [accounts, setAccounts] = useState([\n    { id: 'cash', name: 'Ù†Ù‚Ø¯ÙŠ', balance: 0, transactions: [] },\n    { id: 'vodafone_elsawy', name: 'ÙÙˆØ¯Ø§ÙÙˆÙ† 010', balance: 0, transactions: [] },\n    { id: 'vodafone_wael', name: 'ÙƒØ§Ø´ 0100', balance: 0, transactions: [] },\n    { id: 'deferred', name: 'Ø¢Ø¬Ù„', balance: 0, transactions: [] },\n    { id: 'instapay', name: 'Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ', balance: 0, transactions: [] },\n    { id: 'yad_elsawy', name: 'ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ', balance: 0, transactions: [] }\n  ]);\n  \n  const [selectedAccount, setSelectedAccount] = useState('cash');\n  const [showTransferModal, setShowTransferModal] = useState(false);\n  const [transferData, setTransferData] = useState({\n    from: 'cash',\n    to: 'vodafone_elsawy',\n    amount: '',\n    notes: ''\n  });\n  \n  const [manualTransaction, setManualTransaction] = useState({\n    account: 'cash',\n    type: 'income', // income or expense\n    amount: '',\n    description: '',\n    notes: ''\n  });\n  \n  const [showManualForm, setShowManualForm] = useState(false);\n  const [searchTerm, setSearchTerm] = useState(''); // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø­Ø«\n\n  useEffect(() => {\n    fetchTreasuryData();\n  }, []);\n\n  const fetchTreasuryData = async () => {\n    try {\n      // Fetch balances and transactions from backend\n      const balancesResponse = await axios.get(`${API}/treasury/balances`);\n      const transactionsResponse = await axios.get(`${API}/treasury/transactions`);\n      const invoicesResponse = await axios.get(`${API}/invoices`);\n      const expensesResponse = await axios.get(`${API}/expenses`);\n      \n      const balances = balancesResponse.data;\n      const manualTransactions = transactionsResponse.data;\n      const invoices = invoicesResponse.data;\n      const expenses = expensesResponse.data;\n      \n      // Update accounts with balances and transactions\n      const updatedAccounts = accounts.map(account => {\n        let transactions = [];\n        \n        // Add invoice transactions\n        invoices.forEach(invoice => {\n          const paymentMethodMap = {\n            'Ù†Ù‚Ø¯ÙŠ': 'cash',\n            'ÙÙˆØ¯Ø§ÙÙˆÙ† 010': 'vodafone_elsawy', \n            'ÙƒØ§Ø´ 0100': 'vodafone_wael',\n            'Ø¢Ø¬Ù„': 'deferred',\n            'Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ': 'instapay',\n            'ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ': 'yad_elsawy'\n          };\n          \n          if (paymentMethodMap[invoice.payment_method] === account.id) {\n            transactions.push({\n              id: `inv-${invoice.id}`,\n              type: 'income',\n              amount: invoice.total_amount || 0,\n              description: `ÙØ§ØªÙˆØ±Ø© Ø±Ù‚Ù… ${invoice.invoice_number}`,\n              date: invoice.date,\n              reference: `Ø§Ù„Ø¹Ù…ÙŠÙ„: ${invoice.customer_name}`\n            });\n          }\n        });\n        \n        // Add expense transactions (only from cash account)\n        if (account.id === 'cash') {\n          expenses.forEach(expense => {\n            transactions.push({\n              id: `exp-${expense.id}`,\n              type: 'expense',\n              amount: expense.amount || 0,\n              description: expense.description || 'Ù…ØµØ±ÙˆÙ',\n              date: expense.date,\n              category: expense.category\n            });\n          });\n        }\n        \n        // Add manual transactions\n        manualTransactions\n          .filter(transaction => transaction.account_id === account.id)\n          .forEach(transaction => {\n            transactions.push({\n              id: transaction.id,\n              type: transaction.transaction_type,\n              amount: transaction.amount,\n              description: transaction.description,\n              date: transaction.date,\n              reference: transaction.reference\n            });\n          });\n        \n        return {\n          ...account,\n          balance: balances[account.id] || 0,\n          transactions: transactions.sort((a, b) => new Date(b.date) - new Date(a.date))\n        };\n      });\n      \n      setAccounts(updatedAccounts);\n    } catch (error) {\n      console.error('Error fetching treasury data:', error);\n    }\n  };\n\n  const handleTransfer = async () => {\n    if (!transferData.amount || parseFloat(transferData.amount) <= 0) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');\n      return;\n    }\n    \n    const amount = parseFloat(transferData.amount);\n    const fromAccount = accounts.find(acc => acc.id === transferData.from);\n    \n    if (fromAccount.balance < amount) {\n      alert('Ø§Ù„Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙŠ');\n      return;\n    }\n    \n    try {\n      await axios.post(`${API}/treasury/transfer`, {\n        from_account: transferData.from,\n        to_account: transferData.to,\n        amount: amount,\n        notes: transferData.notes\n      });\n      \n      // Refresh data\n      fetchTreasuryData();\n      \n      setShowTransferModal(false);\n      setTransferData({ from: 'cash', to: 'vodafone_elsawy', amount: '', notes: '' });\n      alert('ØªÙ… Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error processing transfer:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­ÙˆÙŠÙ„');\n    }\n  };\n\n  const handleManualTransaction = async () => {\n    if (!manualTransaction.amount || parseFloat(manualTransaction.amount) <= 0) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');\n      return;\n    }\n    \n    const amount = parseFloat(manualTransaction.amount);\n    \n    try {\n      await axios.post(`${API}/treasury/transactions`, {\n        account_id: manualTransaction.account,\n        transaction_type: manualTransaction.type,\n        amount: amount,\n        description: manualTransaction.description,\n        reference: manualTransaction.notes || 'Ø¥Ø¯Ø®Ø§Ù„ ÙŠØ¯ÙˆÙŠ'\n      });\n      \n      // Refresh data\n      fetchTreasuryData();\n      \n      setShowManualForm(false);\n      setManualTransaction({\n        account: 'cash',\n        type: 'income',\n        amount: '',\n        description: '',\n        notes: ''\n      });\n      alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error processing manual transaction:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');\n    }\n  };\n\n  const clearAccount = async (accountId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØµÙÙŠØ± Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) return;\n    \n    const account = accounts.find(acc => acc.id === accountId);\n    if (!account || account.balance === 0) {\n      alert('Ø§Ù„Ø­Ø³Ø§Ø¨ ÙØ§Ø±Øº Ø¨Ø§Ù„ÙØ¹Ù„ Ø£Ùˆ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');\n      return;\n    }\n    \n    try {\n      // If clearing \"ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ\", transfer to main treasury\n      if (accountId === 'yad_elsawy') {\n        // Transfer to main treasury\n        await axios.post(`${API}/main-treasury/transfer-from-yad?amount=${account.balance}&username=${user.username}`);\n      }\n      \n      // Create expense transaction to zero the account\n      await axios.post(`${API}/treasury/transactions`, {\n        account_id: accountId,\n        transaction_type: 'expense',\n        amount: account.balance,\n        description: `ØªØµÙÙŠØ± Ø­Ø³Ø§Ø¨ ${account.name}${accountId === 'yad_elsawy' ? ' (ØªÙ… Ø§Ù„ØªØ±Ø­ÙŠÙ„ Ù„Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©)' : ''}`,\n        reference: 'ØªØµÙÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ù…Ø¯ÙŠØ±'\n      });\n      \n      // Refresh data\n      fetchTreasuryData();\n      \n      if (accountId === 'yad_elsawy') {\n        alert(`ØªÙ… ØªØµÙÙŠØ± Ø­Ø³Ø§Ø¨ ${account.name} Ø¨Ù†Ø¬Ø§Ø­ ÙˆØªØ±Ø­ÙŠÙ„ Ø§Ù„Ù…Ø¨Ù„Øº ${account.balance.toFixed(2)} Ø¬.Ù… Ù„Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©`);\n      } else {\n        alert(`ØªÙ… ØªØµÙÙŠØ± Ø­Ø³Ø§Ø¨ ${account.name} Ø¨Ù†Ø¬Ø§Ø­`);\n      }\n    } catch (error) {\n      console.error('Error clearing account:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµÙÙŠØ± Ø§Ù„Ø­Ø³Ø§Ø¨');\n    }\n  };\n\n  // Treasury Reset Function - Only for Elsawy\n  const resetTreasury = async () => {\n    if (user?.username !== 'Elsawy') {\n      alert('ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨ØªÙ†ÙÙŠØ° Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');\n      return;\n    }\n\n    // Triple confirmation for this critical operation\n    const firstConfirm = confirm('âš ï¸ ØªØ­Ø°ÙŠØ±: Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø³ÙŠØ­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø²ÙŠÙ†Ø© ÙˆÙ„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!\\nÙ‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ');\n    if (!firstConfirm) return;\n\n    const secondConfirm = confirm('âš ï¸ ØªØ£ÙƒÙŠØ¯ Ø«Ø§Ù†ÙŠ: Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª ÙˆØ§Ù„Ø£Ø±ØµØ¯Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹!\\nØ§ÙƒØªØ¨ \"Ù†Ø¹Ù…\" Ù„Ù„ØªØ£ÙƒÙŠØ¯:');\n    if (!secondConfirm) return;\n\n    const finalConfirm = prompt('âš ï¸ Ù„Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØŒ Ø§ÙƒØªØ¨ Ø¨Ø§Ù„Ø¶Ø¨Ø·: \"Ø§Ø­Ø°Ù ÙƒÙ„ Ø´ÙŠØ¡\"');\n    if (finalConfirm !== 'Ø§Ø­Ø°Ù ÙƒÙ„ Ø´ÙŠØ¡') {\n      alert('ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');\n      return;\n    }\n\n    try {\n      const response = await axios.post(`${API}/treasury/reset`, null, {\n        params: { username: user.username }\n      });\n\n      alert(`âœ… ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø²ÙŠÙ†Ø© Ø¨Ù†Ø¬Ø§Ø­!\\nØªÙ… Ø­Ø°Ù ${response.data.deleted_treasury_transactions} Ù…Ø¹Ø§Ù…Ù„Ø©`);\n      \n      // Refresh data\n      fetchTreasuryData();\n    } catch (error) {\n      console.error('Error resetting treasury:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ù…Ø³Ø­ Ø§Ù„Ø®Ø²ÙŠÙ†Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const selectedAccountData = accounts.find(acc => acc.id === selectedAccount);\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-blue-600 mb-4\">Ø§Ù„Ø®Ø²ÙŠÙ†Ø© - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ù…ÙˆØ§Ù„</h2>\n        \n        <div className=\"flex space-x-4 space-x-reverse mb-4\">\n          <button \n            onClick={() => setShowTransferModal(true)}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n            ØªØ­ÙˆÙŠÙ„ Ø£Ù…ÙˆØ§Ù„\n          </button>\n          <button \n            onClick={() => setShowManualForm(true)}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n            Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„ÙŠØ© ÙŠØ¯ÙˆÙŠØ©\n          </button>\n          <button \n            onClick={fetchTreasuryData}\n            className=\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\">\n            Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => window.print()}\n            className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\">\n            Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n          {user?.username === 'Elsawy' && (\n            <button \n              onClick={resetTreasury}\n              className=\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 font-bold border-2 border-red-800\">\n              âš ï¸ Ù…Ø³Ø­ Ø§Ù„Ø®Ø²ÙŠÙ†Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„\n            </button>\n          )}\n          {user?.username === 'Elsawy' && selectedAccount === 'yad_elsawy' && selectedAccountData?.balance > 0 && (\n            <button \n              onClick={() => clearAccount(selectedAccount)}\n              className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n              ØªØµÙÙŠØ± Ø­Ø³Ø§Ø¨ ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Accounts Summary */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-6\">\n        {accounts.map(account => (\n          <div \n            key={account.id}\n            className={`p-4 rounded-lg shadow cursor-pointer transition-colors ${\n              selectedAccount === account.id \n                ? 'bg-blue-100 border-2 border-blue-500' \n                : 'bg-white hover:bg-gray-50'\n            }`}\n            onClick={() => setSelectedAccount(account.id)}\n          >\n            <h3 className=\"font-semibold text-gray-800 mb-2\">{account.name}</h3>\n            <p className={`text-2xl font-bold ${\n              account.balance >= 0 ? 'text-green-600' : 'text-red-600'\n            }`}>\n              Ø¬.Ù… {account.balance.toFixed(2)}\n            </p>\n            <p className=\"text-sm text-gray-600 mt-1\">\n              {account.transactions.length} Ø¹Ù…Ù„ÙŠØ©\n            </p>\n          </div>\n        ))}\n      </div>\n\n      {/* Account Details */}\n      {selectedAccountData && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">\n            ØªÙØ§ØµÙŠÙ„ Ø­Ø³Ø§Ø¨: {selectedAccountData.name}\n          </h3>\n          \n          {/* Search Bar */}\n          <div className=\"mb-4\">\n            <input\n              type=\"text\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              placeholder=\"Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª...\"\n              className=\"w-full p-3 border border-gray-300 rounded-lg\"\n            />\n          </div>\n          \n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full border-collapse border border-gray-300\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù†ÙˆØ¹</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙˆØµÙ</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø¨Ù„Øº</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø±Ø¬Ø¹</th>\n                </tr>\n              </thead>\n              <tbody>\n                {selectedAccountData.transactions\n                  .filter(transaction => \n                    transaction.description.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                    (transaction.reference && transaction.reference.toLowerCase().includes(searchTerm.toLowerCase())) ||\n                    (transaction.category && transaction.category.toLowerCase().includes(searchTerm.toLowerCase()))\n                  )\n                  .map((transaction, index) => (\n                  <tr key={transaction.id || index}>\n                    <td className=\"border border-gray-300 p-2\">\n                      {new Date(transaction.date).toLocaleDateString('ar-EG')}\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <span className={`px-2 py-1 rounded text-xs ${\n                        transaction.type === 'income' ? 'bg-green-100 text-green-800' :\n                        transaction.type === 'expense' ? 'bg-red-100 text-red-800' :\n                        transaction.type === 'transfer_in' ? 'bg-blue-100 text-blue-800' :\n                        'bg-orange-100 text-orange-800'\n                      }`}>\n                        {transaction.type === 'income' ? 'Ø¯Ø®Ù„' :\n                         transaction.type === 'expense' ? 'Ù…ØµØ±ÙˆÙ' :\n                         transaction.type === 'transfer_in' ? 'ØªØ­ÙˆÙŠÙ„ ÙˆØ§Ø±Ø¯' : 'ØªØ­ÙˆÙŠÙ„ ØµØ§Ø¯Ø±'}\n                      </span>\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">{transaction.description}</td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <span className={\n                        transaction.type === 'income' || transaction.type === 'transfer_in' \n                          ? 'text-green-600 font-semibold' \n                          : 'text-red-600 font-semibold'\n                      }>\n                        {transaction.type === 'income' || transaction.type === 'transfer_in' ? '+' : '-'}\n                        Ø¬.Ù… {transaction.amount.toFixed(2)}\n                      </span>\n                    </td>\n                    <td className=\"border border-gray-300 p-2 text-sm text-gray-600\">\n                      {transaction.reference || transaction.category || '-'}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n            \n            {selectedAccountData.transactions.length === 0 && (\n              <div className=\"text-center py-8 text-gray-500\">\n                Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Transfer Modal */}\n      {showTransferModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4\">\n            <h3 className=\"text-lg font-semibold mb-4\">ØªØ­ÙˆÙŠÙ„ Ø£Ù…ÙˆØ§Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</h3>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù…Ù† Ø­Ø³Ø§Ø¨</label>\n                <select\n                  value={transferData.from}\n                  onChange={(e) => setTransferData({...transferData, from: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                >\n                  {accounts.map(account => (\n                    <option key={account.id} value={account.id}>\n                      {account.name} (Ø¬.Ù… {account.balance.toFixed(2)})\n                    </option>\n                  ))}\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø¥Ù„Ù‰ Ø­Ø³Ø§Ø¨</label>\n                <select\n                  value={transferData.to}\n                  onChange={(e) => setTransferData({...transferData, to: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                >\n                  {accounts.filter(acc => acc.id !== transferData.from).map(account => (\n                    <option key={account.id} value={account.id}>\n                      {account.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù…Ø¨Ù„Øº</label>\n                <input\n                  type=\"number\"\n                  value={transferData.amount}\n                  onChange={(e) => setTransferData({...transferData, amount: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"0.00\"\n                  min=\"0\"\n                  step=\"0.01\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>\n                <input\n                  type=\"text\"\n                  value={transferData.notes}\n                  onChange={(e) => setTransferData({...transferData, notes: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                />\n              </div>\n            </div>\n            \n            <div className=\"flex space-x-4 space-x-reverse mt-6\">\n              <button\n                onClick={handleTransfer}\n                className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n              >\n                ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„\n              </button>\n              <button\n                onClick={() => setShowTransferModal(false)}\n                className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n              >\n                Ø¥Ù„ØºØ§Ø¡\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Manual Transaction Modal */}\n      {showManualForm && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„ÙŠØ© ÙŠØ¯ÙˆÙŠØ©</h3>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø­Ø³Ø§Ø¨</label>\n                <select\n                  value={manualTransaction.account}\n                  onChange={(e) => setManualTransaction({...manualTransaction, account: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                >\n                  {accounts.map(account => (\n                    <option key={account.id} value={account.id}>\n                      {account.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</label>\n                <select\n                  value={manualTransaction.type}\n                  onChange={(e) => setManualTransaction({...manualTransaction, type: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                >\n                  <option value=\"income\">Ø¯Ø®Ù„</option>\n                  <option value=\"expense\">Ù…ØµØ±ÙˆÙ</option>\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù…Ø¨Ù„Øº</label>\n                <input\n                  type=\"number\"\n                  value={manualTransaction.amount}\n                  onChange={(e) => setManualTransaction({...manualTransaction, amount: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"0.00\"\n                  min=\"0\"\n                  step=\"0.01\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ÙˆØµÙ</label>\n                <input\n                  type=\"text\"\n                  value={manualTransaction.description}\n                  onChange={(e) => setManualTransaction({...manualTransaction, description: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"ÙˆØµÙ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>\n                <input\n                  type=\"text\"\n                  value={manualTransaction.notes}\n                  onChange={(e) => setManualTransaction({...manualTransaction, notes: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                />\n              </div>\n            </div>\n            \n            <div className=\"flex space-x-4 space-x-reverse mt-6\">\n              <button\n                onClick={handleManualTransaction}\n                className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n              >\n                Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©\n              </button>\n              <button\n                onClick={() => setShowManualForm(false)}\n                className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n              >\n                Ø¥Ù„ØºØ§Ø¡\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Backup and Restore Component\nconst Backup = () => {\n  const [backups, setBackups] = useState([]);\n  const [driveFiles, setDriveFiles] = useState([]);\n  const [driveStatus, setDriveStatus] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [creating, setCreating] = useState(false);\n  const [activeTab, setActiveTab] = useState('local'); // 'local' or 'drive'\n  const {user} = useAuth();\n  \n  // Bulk deletion states\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [deletePassword, setDeletePassword] = useState('');\n  const [deleteType, setDeleteType] = useState(''); // 'date', 'last-1', 'last-2'\n  const [deleteDate, setDeleteDate] = useState('');\n\n  useEffect(() => {\n    fetchBackups();\n    fetchDriveStatus();\n  }, []);\n\n  const fetchBackups = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.get(`${API}/backup/list`);\n      setBackups(response.data || []);\n    } catch (error) {\n      console.error('Error fetching backups:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchDriveStatus = async () => {\n    try {\n      const response = await axios.get(`${API}/backup/drive/status`);\n      setDriveStatus(response.data);\n    } catch (error) {\n      console.error('Error fetching drive status:', error);\n    }\n  };\n\n  const fetchDriveFiles = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.get(`${API}/backup/drive/list`);\n      setDriveFiles(response.data.files || []);\n    } catch (error) {\n      console.error('Error fetching drive files:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ù…Ù„ÙØ§Øª Google Drive');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Bulk deletion functions\n  const openDeleteModal = (type) => {\n    if (user?.username !== 'Elsawy') {\n      alert('ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨ØªÙ†ÙÙŠØ° Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');\n      return;\n    }\n    setDeleteType(type);\n    setDeletePassword('');\n    setDeleteDate('');\n    setShowDeleteModal(true);\n  };\n\n  const handleBulkDelete = async () => {\n    if (!deletePassword) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');\n      return;\n    }\n\n    if (deleteType === 'date' && !deleteDate) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªØ§Ø±ÙŠØ®');\n      return;\n    }\n\n    const confirmMessage = deleteType === 'date' \n      ? `Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ ÙÙˆØ§ØªÙŠØ± ÙŠÙˆÙ… ${deleteDate}ØŸ\\n\\nâš ï¸ Ø³ÙŠØªÙ…:\\nâ€¢ Ù†Ù‚Ù„ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ù„Ù„Ù…Ø­Ø°ÙˆÙØ©\\nâ€¢ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ù„Ù„Ù…Ø®Ø²Ù†\\nâ€¢ Ø¹ÙƒØ³ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø®Ø²ÙŠÙ†Ø©`\n      : deleteType === 'last-1'\n      ? `Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¢Ø®Ø± ÙØ§ØªÙˆØ±Ø©ØŸ\\n\\nâš ï¸ Ø³ÙŠØªÙ…:\\nâ€¢ Ù†Ù‚Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ù„Ù„Ù…Ø­Ø°ÙˆÙØ©\\nâ€¢ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ù„Ù„Ù…Ø®Ø²Ù†\\nâ€¢ Ø¹ÙƒØ³ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø®Ø²ÙŠÙ†Ø©`\n      : `Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¢Ø®Ø± ÙØ§ØªÙˆØ±ØªÙŠÙ†ØŸ\\n\\nâš ï¸ Ø³ÙŠØªÙ…:\\nâ€¢ Ù†Ù‚Ù„ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ù„Ù„Ù…Ø­Ø°ÙˆÙØ©\\nâ€¢ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ù„Ù„Ù…Ø®Ø²Ù†\\nâ€¢ Ø¹ÙƒØ³ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø®Ø²ÙŠÙ†Ø©`;\n\n    if (!confirm(confirmMessage)) {\n      return;\n    }\n\n    setLoading(true);\n    try {\n      let response;\n      \n      if (deleteType === 'date') {\n        response = await axios.post(`${API}/invoices/bulk-delete-by-date`, null, {\n          params: {\n            date: deleteDate,\n            password: deletePassword,\n            username: user.username\n          }\n        });\n      } else {\n        const count = deleteType === 'last-1' ? 1 : 2;\n        response = await axios.post(`${API}/invoices/bulk-delete-last`, null, {\n          params: {\n            count: count,\n            password: deletePassword,\n            username: user.username\n          }\n        });\n      }\n\n      // Show detailed results\n      const data = response.data;\n      let message = `âœ… ${data.message}\\n\\nØ¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©: ${data.deleted_count}\\n\\n`;\n      \n      if (data.invoices && data.invoices.length > 0) {\n        message += 'Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©:\\n';\n        data.invoices.forEach(inv => {\n          message += `â€¢ ${inv.invoice_number} - ${inv.customer_name} - ${inv.total_amount} Ø¬.Ù…\\n`;\n        });\n      }\n\n      alert(message);\n      setShowDeleteModal(false);\n      setDeletePassword('');\n      setDeleteDate('');\n      \n    } catch (error) {\n      console.error('Error deleting invoices:', error);\n      alert(error.response?.data?.detail || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ÙÙˆØ§ØªÙŠØ±');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const checkBackupStatus = async (backupId, attempts = 0) => {\n    try {\n      const response = await axios.get(`${API}/backup/status/${backupId}`);\n      const status = response.data.status;\n      \n      if (status === 'completed' || status === 'completed_with_drive') {\n        setCreating(false);\n        let message = `âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!\\n\\nØ¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª: ${response.data.total_documents}`;\n        if (status === 'completed_with_drive') {\n          message += '\\n\\nğŸŒ ØªÙ… Ø§Ù„Ø±ÙØ¹ Ø¥Ù„Ù‰ Google Drive Ø¨Ù†Ø¬Ø§Ø­!';\n        }\n        alert(message);\n        fetchBackups();\n        fetchDriveFiles();\n      } else if (status === 'failed') {\n        setCreating(false);\n        alert('âŒ ÙØ´Ù„Øª Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ\\n\\n' + (response.data.error || 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'));\n        fetchBackups();\n      } else if (status === 'in_progress' && attempts < 60) {\n        // Keep checking every 2 seconds for up to 2 minutes\n        setTimeout(() => checkBackupStatus(backupId, attempts + 1), 2000);\n      } else {\n        // Timeout after 2 minutes\n        setCreating(false);\n        alert('â±ï¸ Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©.');\n        fetchBackups();\n      }\n    } catch (error) {\n      console.error('Error checking backup status:', error);\n      if (attempts < 60) {\n        setTimeout(() => checkBackupStatus(backupId, attempts + 1), 2000);\n      } else {\n        setCreating(false);\n        fetchBackups();\n      }\n    }\n  };\n\n  const createBackup = async () => {\n    if (!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ø­Ù„ÙŠØ© Ø§Ù„Ø¢Ù†ØŸ')) {\n      return;\n    }\n\n    setCreating(true);\n    try {\n      const response = await axios.post(`${API}/backup/create`, null, {\n        params: { \n          username: user?.username\n        }\n      });\n      \n      // Start polling for status\n      if (response.data.backup_id) {\n        alert(`â³ ${response.data.message}\\n\\nØ³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡.`);\n        checkBackupStatus(response.data.backup_id);\n      } else {\n        setCreating(false);\n        alert('âŒ ÙØ´Ù„ ÙÙŠ Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ');\n      }\n    } catch (error) {\n      console.error('Error creating backup:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: ' + (error.response?.data?.detail || error.message));\n      setCreating(false);\n    }\n  };\n\n  const downloadBackup = async (backupId, createdAt) => {\n    try {\n      const response = await axios.get(`${API}/backup/download/${backupId}`, {\n        responseType: 'blob'\n      });\n      \n      // Create download link\n      const timestamp = new Date(createdAt).toISOString().replace(/[:.]/g, '-').slice(0, -5);\n      const filename = `backup_${timestamp}.json`;\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', filename);\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n      window.URL.revokeObjectURL(url);\n      \n      alert('âœ… ØªÙ… ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!');\n    } catch (error) {\n      console.error('Error downloading backup:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙ†Ø²ÙŠÙ„: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const handleFileUpload = async (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    // Check file type\n    if (!file.name.endsWith('.json')) {\n      alert('âŒ ÙŠØ¬Ø¨ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù JSON');\n      event.target.value = '';\n      return;\n    }\n\n    // Ask user what to do\n    const action = confirm(\n      `ØªÙ… Ø§Ø®ØªÙŠØ§Ø±: ${file.name}\\n\\n` +\n      `Ø§Ø®ØªØ± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡:\\n\\n` +\n      `âœ… Ù…ÙˆØ§ÙÙ‚ = Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø³Ø®Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© ÙÙ‚Ø· (ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ±Ø¬Ø§Ø¹Ù‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹)\\n` +\n      `âŒ Ø¥Ù„ØºØ§Ø¡ = Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø© (Ø³ÙŠØ­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©)\\n\\n` +\n      `Ù…Ø§Ø°Ø§ ØªØ±ÙŠØ¯ØŸ`\n    );\n\n    if (action) {\n      // Add to list only\n      await uploadBackupFile(file, false);\n    } else {\n      // Ask for confirmation before restore\n      if (confirm(`âš ï¸ ØªØ­Ø°ÙŠØ±!\\n\\nÙ‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø©ØŸ\\n\\nØ³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©!\\n\\nÙ‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!`)) {\n        await uploadBackupFile(file, true);\n      }\n    }\n\n    // Reset input\n    event.target.value = '';\n  };\n\n  const uploadBackupFile = async (file, restoreDirectly) => {\n    setLoading(true);\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n\n      let response;\n      if (restoreDirectly) {\n        // Restore directly\n        response = await axios.post(`${API}/backup/restore-from-file`, formData, {\n          params: { username: user?.username },\n          headers: { 'Content-Type': 'multipart/form-data' }\n        });\n        \n        alert(`âœ… ${response.data.message}\\n\\n` +\n              `Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ù…Ø³ØªØ±Ø¬Ø¹Ø©: ${response.data.collections_restored}\\n` +\n              `Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª: ${response.data.total_documents}\\n\\n` +\n              `Ø³ÙŠØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©...`);\n        \n        setTimeout(() => window.location.reload(), 2000);\n      } else {\n        // Upload to list\n        response = await axios.post(`${API}/backup/upload`, formData, {\n          headers: { 'Content-Type': 'multipart/form-data' }\n        });\n        \n        alert(`âœ… ${response.data.message}\\n\\n` +\n              `ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ù‡Ø°Ù‡ Ø§Ù„Ù†Ø³Ø®Ø© Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©`);\n        \n        fetchBackups();\n      }\n    } catch (error) {\n      console.error('Error uploading backup:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£: ' + (error.response?.data?.detail || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const restoreBackup = async (backupId, createdAt) => {\n    if (!confirm(`âš ï¸ ØªØ­Ø°ÙŠØ± Ø®Ø·ÙŠØ±!\\n\\nÙ‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©ØŸ\\n\\nØ§Ù„ØªØ§Ø±ÙŠØ®: ${new Date(createdAt).toLocaleString('ar-EG')}\\n\\nØ³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙˆØ§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§ Ø¨Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©!\\n\\nÙ‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!`)) {\n      return;\n    }\n\n    // Second confirmation\n    if (!confirm('ØªØ£ÙƒÙŠØ¯ Ù†Ù‡Ø§Ø¦ÙŠ: Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ ØªÙ…Ø§Ù…Ø§Ù‹ØŸ')) {\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const response = await axios.post(`${API}/backup/restore/${backupId}`, null, {\n        params: { username: user?.username }\n      });\n      alert(`âœ… ${response.data.message}\\n\\nØ§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ù…Ø³ØªØ±Ø¬Ø¹Ø©: ${response.data.collections_restored}\\nØ¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª: ${response.data.total_documents}\\n\\nÙŠÙÙ†ØµØ­ Ø¨Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©.`);\n      \n      // Reload page after successful restore\n      if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø¢Ù†ØŸ')) {\n        window.location.reload();\n      }\n    } catch (error) {\n      console.error('Error restoring backup:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: ' + (error.response?.data?.detail || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteBackup = async (backupId, createdAt) => {\n    if (!confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©ØŸ\\n\\nØ§Ù„ØªØ§Ø±ÙŠØ®: ${new Date(createdAt).toLocaleString('ar-EG')}\\n\\nÙ‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!`)) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/backup/${backupId}`);\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');\n      fetchBackups();\n      fetchDriveFiles(); // Refresh Drive files too\n    } catch (error) {\n      console.error('Error deleting backup:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  // Google Drive Functions\n  const uploadToDrive = async (backupId) => {\n    if (!driveStatus?.enabled) {\n      alert('âŒ Google Drive ØºÙŠØ± Ù…ØªØµÙ„!\\n\\nÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Google Drive.');\n      return;\n    }\n\n    try {\n      const response = await axios.post(`${API}/backup/${backupId}/upload-to-drive`);\n      alert(`âœ… ${response.data.message}`);\n      fetchBackups();\n      fetchDriveFiles();\n    } catch (error) {\n      console.error('Error uploading to Drive:', error);\n      let errorMsg = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¹ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©:\\n\\n';\n      \n      if (error.response?.data?.detail) {\n        errorMsg += error.response.data.detail;\n        \n        // Check for storage quota error\n        if (error.response.data.detail.includes('storage quota') || error.response.data.detail.includes('403')) {\n          errorMsg += '\\n\\nğŸ’¡ Ø§Ù„Ø­Ù„:\\n';\n          errorMsg += '1. Ø§ÙØªØ­ Google Drive\\n';\n          errorMsg += '2. Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø¬Ù„Ø¯ \"Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„\"\\n';\n          errorMsg += '3. Ø´Ø§Ø±Ùƒ Ø§Ù„Ù…Ø¬Ù„Ø¯ Ù…Ø¹:\\n   master-seal-backup@master-seal-backup.iam.gserviceaccount.com\\n';\n          errorMsg += '4. Ø§Ø®ØªØ± ØµÙ„Ø§Ø­ÙŠØ© \"Editor\"';\n        }\n      } else {\n        errorMsg += error.message;\n      }\n      \n      alert(errorMsg);\n    }\n  };\n\n  const downloadFromDrive = async (fileId, fileName) => {\n    try {\n      const response = await axios.get(`${API}/backup/drive/download/${fileId}`, {\n        responseType: 'blob'\n      });\n      \n      // Create download link\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', fileName);\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n      \n      alert('âœ… ØªÙ… ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error downloading from Drive:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„Ù: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const restoreFromDrive = async (fileId, fileName) => {\n    if (!confirm(`âš ï¸ ØªØ­Ø°ÙŠØ±!\\n\\nÙ‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ù† Google DriveØŸ\\n\\nÙ…Ù„Ù: ${fileName}\\n\\nØ³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©!`)) {\n      return;\n    }\n\n    if (!confirm('ØªØ£ÙƒÙŠØ¯ Ù†Ù‡Ø§Ø¦ÙŠ: Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ ØªÙ…Ø§Ù…Ø§Ù‹ØŸ')) {\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const response = await axios.post(`${API}/backup/drive/restore/${fileId}`);\n      alert(`âœ… ${response.data.message}\\n\\nØ§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ù…Ø³ØªØ±Ø¬Ø¹Ø©: ${response.data.collections_restored}\\nØ¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª: ${response.data.total_documents}`);\n      \n      if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø¢Ù†ØŸ')) {\n        window.location.reload();\n      }\n    } catch (error) {\n      console.error('Error restoring from Drive:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹: ' + (error.response?.data?.detail || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteFromDrive = async (fileId, fileName) => {\n    if (!confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ù…Ù„Ù Ù…Ù† Google DriveØŸ\\n\\n${fileName}\\n\\nÙ‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!`)) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/backup/drive/${fileId}`);\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù„Ù Ù…Ù† Google Drive Ø¨Ù†Ø¬Ø§Ø­');\n      fetchDriveFiles();\n    } catch (error) {\n      console.error('Error deleting from Drive:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­Ø°Ù: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  // Switch tab and load data\n  const switchTab = (tab) => {\n    setActiveTab(tab);\n    if (tab === 'drive' && driveFiles.length === 0) {\n      fetchDriveFiles();\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-3xl font-bold\">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ</h1>\n        <div className=\"flex space-x-2 space-x-reverse flex-wrap gap-2\">\n          <button\n            onClick={createBackup}\n            disabled={creating}\n            className={`px-6 py-2 rounded text-white ${\n              creating ? 'bg-gray-400 cursor-not-allowed' : 'bg-green-500 hover:bg-green-600'\n            }`}\n          >\n            {creating ? 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡...' : 'ğŸ’¾ Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø©'}\n          </button>\n          <label className=\"bg-purple-500 text-white px-6 py-2 rounded hover:bg-purple-600 cursor-pointer\">\n            ğŸ“¤ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù†Ø³Ø®Ø©\n            <input\n              type=\"file\"\n              accept=\".json\"\n              onChange={handleFileUpload}\n              className=\"hidden\"\n            />\n          </label>\n          <button\n            onClick={fetchBackups}\n            disabled={loading}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n          >\n            ğŸ”„ ØªØ­Ø¯ÙŠØ«\n          </button>\n        </div>\n      </div>\n\n      {/* Auto Backup Info */}\n      <div className=\"bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-lg mb-6 border-r-4 border-blue-500\">\n        <h3 className=\"font-bold mb-2\">ğŸ“… Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</h3>\n        <p className=\"text-sm text-gray-700\">\n          ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ø­Ù„ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙƒÙ„ ÙŠÙˆÙ… ÙÙŠ ØªÙ…Ø§Ù… Ø§Ù„Ø³Ø§Ø¹Ø© 7:00 Ù…Ø³Ø§Ø¡Ù‹. \n          ÙŠÙ…ÙƒÙ†Ùƒ ØªÙ†Ø²ÙŠÙ„ Ø£ÙŠ Ù†Ø³Ø®Ø© ÙˆØ±ÙØ¹Ù‡Ø§ ÙŠØ¯ÙˆÙŠØ§Ù‹ Ø¥Ù„Ù‰ Google Drive Ø£Ùˆ Ø£ÙŠ Ø®Ø¯Ù…Ø© Ø³Ø­Ø§Ø¨ÙŠØ© Ø£Ø®Ø±Ù‰.\n        </p>\n      </div>\n\n      {/* Bulk Invoice Deletion Section - Elsawy Only */}\n      {user?.username === 'Elsawy' && (\n        <div className=\"bg-gradient-to-r from-red-50 to-orange-100 p-6 rounded-lg mb-6 border-r-4 border-red-500\">\n          <h3 className=\"font-bold text-xl mb-4 flex items-center gap-2\">\n            ğŸ—‘ï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ± - Ø­Ø°Ù Ø¬Ù…Ø§Ø¹ÙŠ\n          </h3>\n          <p className=\"text-sm text-gray-700 mb-4\">\n            âš ï¸ <strong>ØªØ­Ø°ÙŠØ±:</strong> Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø°Ù Ø³ÙŠØªÙ… Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ù„Ù„Ù…Ø®Ø²Ù† ÙˆØ¹ÙƒØ³ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø®Ø²ÙŠÙ†Ø© ÙˆÙ†Ù‚Ù„ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ù„Ù„Ù…Ø­Ø°ÙˆÙØ©\n          </p>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            {/* Delete by Date */}\n            <button\n              onClick={() => openDeleteModal('date')}\n              className=\"bg-red-500 hover:bg-red-600 text-white px-6 py-4 rounded-lg font-semibold transition-all flex items-center justify-center gap-2\"\n            >\n              ğŸ“… Ø­Ø°Ù ÙÙˆØ§ØªÙŠØ± ÙŠÙˆÙ… Ù…Ø¹ÙŠÙ†\n            </button>\n\n            {/* Delete Last Invoice */}\n            <button\n              onClick={() => openDeleteModal('last-1')}\n              className=\"bg-orange-500 hover:bg-orange-600 text-white px-6 py-4 rounded-lg font-semibold transition-all flex items-center justify-center gap-2\"\n            >\n              ğŸ”´ Ø­Ø°Ù Ø¢Ø®Ø± ÙØ§ØªÙˆØ±Ø©\n            </button>\n\n            {/* Delete Last 2 Invoices */}\n            <button\n              onClick={() => openDeleteModal('last-2')}\n              className=\"bg-orange-600 hover:bg-orange-700 text-white px-6 py-4 rounded-lg font-semibold transition-all flex items-center justify-center gap-2\"\n            >\n              ğŸ”´ğŸ”´ Ø­Ø°Ù Ø¢Ø®Ø± ÙØ§ØªÙˆØ±ØªÙŠÙ†\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Delete Modal */}\n      {showDeleteModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\" dir=\"rtl\">\n          <div className=\"bg-white rounded-lg p-8 max-w-md w-full shadow-2xl\">\n            <h3 className=\"text-2xl font-bold mb-4 text-red-600\">\n              âš ï¸ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù\n            </h3>\n            \n            <div className=\"mb-4 p-4 bg-yellow-50 border-r-4 border-yellow-500 rounded\">\n              <p className=\"text-sm text-gray-700\">\n                {deleteType === 'date' \n                  ? 'ğŸ—“ï¸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ ÙÙˆØ§ØªÙŠØ± Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ù…Ø­Ø¯Ø¯'\n                  : deleteType === 'last-1'\n                  ? 'ğŸ“‹ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¢Ø®Ø± ÙØ§ØªÙˆØ±Ø©'\n                  : 'ğŸ“‹ğŸ“‹ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¢Ø®Ø± ÙØ§ØªÙˆØ±ØªÙŠÙ†'\n                }\n              </p>\n              <p className=\"text-xs text-gray-600 mt-2\">\n                âœ“ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…ÙˆØ§Ø¯<br/>\n                âœ“ Ø¹ÙƒØ³ Ø§Ù„Ø®Ø²ÙŠÙ†Ø©<br/>\n                âœ“ Ù†Ù‚Ù„ Ù„Ù„Ù…Ø­Ø°ÙˆÙØ©\n              </p>\n            </div>\n\n            {deleteType === 'date' && (\n              <div className=\"mb-4\">\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Ø§Ø®ØªØ± Ø§Ù„ØªØ§Ø±ÙŠØ®:\n                </label>\n                <input\n                  type=\"date\"\n                  value={deleteDate}\n                  onChange={(e) => setDeleteDate(e.target.value)}\n                  className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-red-500 focus:outline-none\"\n                />\n              </div>\n            )}\n\n            <div className=\"mb-6\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (200200):\n              </label>\n              <input\n                type=\"password\"\n                value={deletePassword}\n                onChange={(e) => setDeletePassword(e.target.value)}\n                onKeyPress={(e) => e.key === 'Enter' && handleBulkDelete()}\n                placeholder=\"Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\"\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-red-500 focus:outline-none\"\n                autoFocus\n              />\n            </div>\n\n            <div className=\"flex gap-3\">\n              <button\n                onClick={handleBulkDelete}\n                disabled={loading}\n                className={`flex-1 py-3 rounded-lg font-semibold text-white transition-colors ${\n                  loading ? 'bg-gray-400 cursor-not-allowed' : 'bg-red-600 hover:bg-red-700'\n                }`}\n              >\n                {loading ? 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­Ø°Ù...' : 'âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù'}\n              </button>\n              <button\n                onClick={() => {\n                  setShowDeleteModal(false);\n                  setDeletePassword('');\n                  setDeleteDate('');\n                }}\n                disabled={loading}\n                className=\"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-3 rounded-lg font-semibold transition-colors\"\n              >\n                âŒ Ø¥Ù„ØºØ§Ø¡\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Backups Table */}\n      <div className=\"bg-white rounded-lg shadow-md overflow-x-auto\">\n        {loading && !creating ? (\n          <div className=\"p-8 text-center\">\n            <p className=\"text-gray-500\">â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>\n          </div>\n        ) : backups.length === 0 ? (\n          <div className=\"p-8 text-center\">\n            <p className=\"text-gray-500\">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</p>\n            <p className=\"text-sm text-gray-400 mt-2\">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ \"Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©\" Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø£ÙˆÙ„ Ù†Ø³Ø®Ø©</p>\n          </div>\n        ) : (\n          <table className=\"min-w-full border-collapse\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª</th>\n                <th className=\"border border-gray-300 p-2\">Ø£Ù†Ø´Ø¦Øª Ø¨ÙˆØ§Ø³Ø·Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø§Ù„Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {backups.map((backup) => (\n                <tr key={backup.backup_id} className=\"hover:bg-gray-50\">\n                  <td className=\"border border-gray-300 p-2\">\n                    {new Date(backup.created_at).toLocaleString('ar-EG', {\n                      year: 'numeric',\n                      month: 'long',\n                      day: 'numeric',\n                      hour: '2-digit',\n                      minute: '2-digit'\n                    })}\n                    {backup.is_scheduled && (\n                      <span className=\"block text-xs text-blue-600 mt-1\">ğŸ¤– ØªÙ„Ù‚Ø§Ø¦ÙŠ</span>\n                    )}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">{backup.created_by}</td>\n                  <td className=\"border border-gray-300 p-2 text-center font-medium\">\n                    {backup.total_documents || 0}\n                  </td>\n                  <td className=\"border border-gray-300 p-2 text-center\">\n                    {backup.status === 'in_progress' && (\n                      <span className=\"text-orange-600 animate-pulse\">â³ Ø¬Ø§Ø±ÙŠ...</span>\n                    )}\n                    {backup.status === 'failed' && (\n                      <span className=\"text-red-600\">âŒ ÙØ´Ù„</span>\n                    )}\n                    {(backup.status === 'completed' || backup.status === 'completed_with_drive' || backup.status === 'completed_no_drive') && (\n                      <span className=\"text-green-600\">âœ… Ù…ÙƒØªÙ…Ù„</span>\n                    )}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex space-x-2 space-x-reverse justify-center flex-wrap gap-1\">\n                      <button\n                        onClick={() => downloadBackup(backup.backup_id, backup.created_at)}\n                        className=\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\"\n                        title=\"ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©\"\n                      >\n                        â¬‡ï¸ ØªÙ†Ø²ÙŠÙ„\n                      </button>\n                      <button\n                        onClick={() => restoreBackup(backup.backup_id, backup.created_at)}\n                        disabled={loading || backup.status === 'in_progress'}\n                        className=\"bg-orange-500 text-white px-3 py-1 rounded text-sm hover:bg-orange-600 disabled:bg-gray-400\"\n                        title=\"Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„Ù†Ø³Ø®Ø©\"\n                      >\n                        â†©ï¸ Ø§Ø³ØªØ±Ø¬Ø§Ø¹\n                      </button>\n                      <button\n                        onClick={() => deleteBackup(backup.backup_id, backup.created_at)}\n                        disabled={loading}\n                        className=\"bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600 disabled:bg-gray-400\"\n                        title=\"Ø­Ø°Ù Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©\"\n                      >\n                        ğŸ—‘ï¸ Ø­Ø°Ù\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        )}\n      </div>\n\n      {/* Google Drive Tab */}\n      {activeTab === 'drive' && (\n        <div className=\"bg-white rounded-lg shadow-md overflow-x-auto\">\n          {loading ? (\n            <div className=\"p-8 text-center\">\n              <p className=\"text-gray-500\">â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>\n            </div>\n          ) : !driveStatus?.enabled ? (\n            <div className=\"p-8 text-center\">\n              <p className=\"text-red-500\">âŒ Google Drive ØºÙŠØ± Ù…ØªØµÙ„</p>\n              <p className=\"text-sm text-gray-400 mt-2\">ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Google Drive</p>\n            </div>\n          ) : driveFiles.length === 0 ? (\n            <div className=\"p-8 text-center\">\n              <p className=\"text-gray-500\">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„ÙØ§Øª ÙÙŠ Google Drive</p>\n              <p className=\"text-sm text-gray-400 mt-2\">Ù‚Ù… Ø¨Ø±ÙØ¹ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ù† Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø³Ø§Ø¨Ù‚</p>\n            </div>\n          ) : (\n            <table className=\"min-w-full border-collapse\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"border border-gray-300 p-2\">Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø¬Ù…</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n                </tr>\n              </thead>\n              <tbody>\n                {driveFiles.map((file) => (\n                  <tr key={file.id} className=\"hover:bg-gray-50\">\n                    <td className=\"border border-gray-300 p-2\">\n                      <a\n                        href={file.webViewLink}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"text-blue-600 hover:underline\"\n                      >\n                        {file.name}\n                      </a>\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">\n                      {new Date(file.createdTime).toLocaleString('ar-EG', {\n                        year: 'numeric',\n                        month: 'short',\n                        day: 'numeric',\n                        hour: '2-digit',\n                        minute: '2-digit'\n                      })}\n                    </td>\n                    <td className=\"border border-gray-300 p-2 text-center\">\n                      {file.size ? `${(file.size / 1024).toFixed(2)} KB` : '-'}\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <div className=\"flex space-x-2 space-x-reverse justify-center flex-wrap gap-1\">\n                        <button\n                          onClick={() => downloadFromDrive(file.id, file.name)}\n                          className=\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\"\n                        >\n                          â¬‡ï¸ ØªÙ†Ø²ÙŠÙ„\n                        </button>\n                        <button\n                          onClick={() => restoreFromDrive(file.id, file.name)}\n                          disabled={loading}\n                          className=\"bg-orange-500 text-white px-3 py-1 rounded text-sm hover:bg-orange-600 disabled:bg-gray-400\"\n                        >\n                          â†©ï¸ Ø§Ø³ØªØ±Ø¬Ø§Ø¹\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          )}\n        </div>\n      )}\n\n      {/* Warning */}\n      <div className=\"mt-6 bg-red-50 p-4 rounded-lg border-r-4 border-red-500\">\n        <h3 className=\"font-bold text-red-700 mb-2\">âš ï¸ ØªØ­Ø°ÙŠØ±Ø§Øª Ù…Ù‡Ù…Ø©:</h3>\n        <ul className=\"list-disc list-inside text-sm text-red-700 space-y-1\">\n          <li>Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø³ÙŠØ­Ø°Ù <strong>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</strong></li>\n          <li>ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø­Ø¯ÙŠØ«Ø© Ù‚Ø¨Ù„ Ø§Ù„Ù‚ÙŠØ§Ù… Ø¨Ø£ÙŠ ØªØºÙŠÙŠØ±Ø§Øª ÙƒØ¨ÙŠØ±Ø©</li>\n          <li>Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù„Ù† ÙŠØªÙ… Ø­Ø°ÙÙ‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ - Ø§Ø­Ø°ÙÙ‡Ø§ ÙŠØ¯ÙˆÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø©</li>\n          <li>Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø¨Ø¹Ø¯ ØªÙ†ÙÙŠØ°Ù‡Ø§</li>\n        </ul>\n      </div>\n\n      {/* Tips */}\n      <div className=\"mt-4 bg-green-50 p-4 rounded-lg border-r-4 border-green-500\">\n        <h3 className=\"font-bold text-green-700 mb-2\">ğŸ’¡ Ù†ØµØ§Ø¦Ø­:</h3>\n        <ul className=\"list-disc list-inside text-sm text-green-700 space-y-1\">\n          <li>Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ© ØªØ¹Ù…Ù„ ÙŠÙˆÙ…ÙŠØ§Ù‹ Ø§Ù„Ø³Ø§Ø¹Ø© 7:00 Ù…Ø³Ø§Ø¡Ù‹</li>\n          <li>Ø§Ø³ØªØ®Ø¯Ù… Ø²Ø± \"ØªÙ†Ø²ÙŠÙ„\" Ù„Ø­ÙØ¸ Ø§Ù„Ù†Ø³Ø®Ø© Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ</li>\n          <li>ÙŠÙ…ÙƒÙ†Ùƒ Ø±ÙØ¹ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© ÙŠØ¯ÙˆÙŠØ§Ù‹ Ø¥Ù„Ù‰ Google Drive Ø£Ùˆ Ø£ÙŠ Ø®Ø¯Ù…Ø© Ø³Ø­Ø§Ø¨ÙŠØ©</li>\n          <li>Ø§Ø³ØªØ®Ø¯Ù… Ø²Ø± \"Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù†Ø³Ø®Ø©\" Ù„Ø±ÙØ¹ Ù…Ù„Ù Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ù† Ø¬Ù‡Ø§Ø²Ùƒ</li>\n          <li>Ø§Ø­ØªÙØ¸ Ø¨Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ù† ÙØªØ±Ø§Øª Ù…Ø®ØªÙ„ÙØ© Ù„Ù„Ø£Ù…Ø§Ù†</li>\n          <li>Ø­Ø¬Ù… Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ØµØºÙŠØ± (Ø¹Ø§Ø¯Ø© Ø£Ù‚Ù„ Ù…Ù† 1 MB)</li>\n        </ul>\n      </div>\n      \n      {/* Import Instructions */}\n      <div className=\"mt-4 bg-blue-50 p-4 rounded-lg border-r-4 border-blue-500\">\n        <h3 className=\"font-bold text-blue-700 mb-2\">ğŸ“¤ ÙƒÙŠÙÙŠØ© Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©:</h3>\n        <ol className=\"list-decimal list-inside text-sm text-blue-700 space-y-1\">\n          <li>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± \"Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù†Ø³Ø®Ø©\"</li>\n          <li>Ø§Ø®ØªØ± Ù…Ù„Ù Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© (.json) Ù…Ù† Ø¬Ù‡Ø§Ø²Ùƒ</li>\n          <li>Ø§Ø®ØªØ± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡:\n            <ul className=\"list-disc list-inside mr-6 mt-1\">\n              <li><strong>Ù…ÙˆØ§ÙÙ‚</strong> = Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© ÙÙ‚Ø· (Ø¢Ù…Ù†)</li>\n              <li><strong>Ø¥Ù„ØºØ§Ø¡</strong> = Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ù…Ø¨Ø§Ø´Ø± (ÙŠØ­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©)</li>\n            </ul>\n          </li>\n        </ol>\n      </div>\n    </div>\n  );\n};\n\n// Users Management Component  \nconst Users = () => {\n  const [users, setUsers] = useState([]);\n  const [newUser, setNewUser] = useState({\n    username: '',\n    password: '',\n    role: 'user'\n  });\n  const [editingUser, setEditingUser] = useState(null);\n  const [editForm, setEditForm] = useState({\n    username: '',\n    password: '',\n    role: 'user'\n  });\n  const [companyInfo, setCompanyInfo] = useState({\n    name: 'Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„',\n    address: 'Ø§Ù„Ø­Ø±ÙÙŠÙŠÙ† Ø´Ø§Ø±Ø¹ Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª',\n    phone: '01020630677'\n  });\n  const [editingCompany, setEditingCompany] = useState(false);\n  const [selectedUserPermissions, setSelectedUserPermissions] = useState(null);\n\n  const allPermissions = [\n    { key: 'dashboard', label: 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…' },\n    { key: 'sales', label: 'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª' },\n    { key: 'inventory', label: 'Ø§Ù„Ù…Ø®Ø²ÙˆÙ†' },\n    { key: 'deferred', label: 'Ø§Ù„Ø¢Ø¬Ù„' },\n    { key: 'expenses', label: 'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª' },\n    { key: 'revenue', label: 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª' },\n    { key: 'treasury', label: 'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©' },\n    { key: 'invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ±' },\n    { key: 'work-orders', label: 'Ø£Ù…Ø± Ø´ØºÙ„' },\n    { key: 'pricing', label: 'Ø§Ù„ØªØ³Ø¹ÙŠØ±' },\n    { key: 'users', label: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†' }\n  ];\n\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  const fetchUsers = async () => {\n    try {\n      const response = await axios.get(`${API}/users`);\n      \n      // Check if default users exist in database\n      const dbUsers = response.data || [];\n      const hasElsawy = dbUsers.some(user => user.username === 'Elsawy');\n      const hasRoot = dbUsers.some(user => user.username === 'Root');\n      \n      // Create default users if they don't exist\n      if (!hasElsawy) {\n        await axios.post(`${API}/users`, {\n          username: 'Elsawy',\n          password: '100100',\n          role: 'admin',\n          permissions: allPermissions.map(p => p.key)\n        });\n      }\n      \n      if (!hasRoot) {\n        await axios.post(`${API}/users`, {\n          username: 'Root',\n          password: 'master',\n          role: 'user',\n          permissions: ['dashboard', 'sales', 'inventory', 'deferred', 'expenses', 'treasury', 'work-orders']\n        });\n      }\n      \n      // Fetch users again if we created default users\n      if (!hasElsawy || !hasRoot) {\n        const updatedResponse = await axios.get(`${API}/users`);\n        setUsers(updatedResponse.data || []);\n      } else {\n        setUsers(dbUsers);\n      }\n      \n    } catch (error) {\n      console.error('Error fetching users:', error);\n      // Fall back to empty array for now\n      setUsers([]);\n    }\n  };\n\n  const addUser = async () => {\n    if (!newUser.username || !newUser.password) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');\n      return;\n    }\n\n    try {\n      // Check if username already exists\n      if (users.some(user => user.username === newUser.username)) {\n        alert('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„');\n        return;\n      }\n\n      // Default permissions based on role\n      const defaultPermissions = newUser.role === 'admin' \n        ? allPermissions.map(p => p.key)\n        : ['dashboard', 'sales', 'inventory', 'deferred', 'expenses', 'treasury', 'work-orders', 'pricing'];\n\n      // Let backend generate ID and created_at\n      const user = {\n        username: newUser.username,\n        password: newUser.password,\n        role: newUser.role,\n        permissions: defaultPermissions\n      };\n\n      await axios.post(`${API}/users`, user);\n      fetchUsers();\n      setNewUser({ username: '', password: '', role: 'user' });\n      alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error adding user:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const startEdit = (user) => {\n    setEditingUser(user.id);\n    setEditForm({\n      username: user.username,\n      password: '',\n      role: user.role\n    });\n  };\n\n  const cancelEdit = () => {\n    setEditingUser(null);\n    setEditForm({ username: '', password: '', role: 'user' });\n  };\n\n  const saveEdit = async () => {\n    if (!editForm.username) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');\n      return;\n    }\n\n    // Check if username already exists (excluding current user)\n    if (users.some(user => user.username === editForm.username && user.id !== editingUser)) {\n      alert('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„');\n      return;\n    }\n\n    try {\n      // Find current user to preserve their permissions\n      const currentUser = users.find(u => u.id === editingUser);\n      if (!currentUser) {\n        alert('Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');\n        return;\n      }\n\n      // Update user in backend - preserve existing permissions\n      const updatedUser = {\n        id: editingUser,\n        username: editForm.username,\n        role: editForm.role,\n        password: editForm.password || currentUser.password,\n        permissions: currentUser.permissions || [],\n        created_at: currentUser.created_at\n      };\n      \n      await axios.put(`${API}/users/${editingUser}`, updatedUser);\n      \n      // Fetch updated data from database instead of updating local state\n      fetchUsers();\n\n      setEditingUser(null);\n      setEditForm({ username: '', password: '', role: 'user' });\n      alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error updating user:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const deleteUser = async (userId) => {\n    if (userId === '1' || userId === '2') {\n      alert('Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠÙŠÙ†');\n      return;\n    }\n\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ')) return;\n\n    try {\n      await axios.delete(`${API}/users/${userId}`);\n      fetchUsers();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting user:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');\n    }\n  };\n\n  const resetPassword = async (userId) => {\n    const newPassword = prompt('Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:');\n    if (newPassword && newPassword.trim()) {\n      try {\n        // Find the user to get their current data\n        const user = users.find(u => u.id === userId);\n        if (!user) {\n          alert('Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');\n          return;\n        }\n\n        // Update password in backend\n        const updatedUser = {\n          id: user.id,\n          username: user.username,\n          password: newPassword.trim(),\n          role: user.role,\n          permissions: user.permissions || [],\n          created_at: user.created_at\n        };\n        \n        await axios.put(`${API}/users/${userId}`, updatedUser);\n        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­');\n      } catch (error) {\n        console.error('Error updating password:', error);\n        alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: ' + (error.response?.data?.detail || error.message));\n      }\n    }\n  };\n\n  const openPermissions = (user) => {\n    setSelectedUserPermissions({\n      ...user,\n      tempPermissions: [...(user.permissions || [])]\n    });\n  };\n\n  const togglePermission = (permissionKey) => {\n    setSelectedUserPermissions(prev => {\n      const newPermissions = prev.tempPermissions.includes(permissionKey)\n        ? prev.tempPermissions.filter(p => p !== permissionKey)\n        : [...prev.tempPermissions, permissionKey];\n      \n      return { ...prev, tempPermissions: newPermissions };\n    });\n  };\n\n  const savePermissions = async () => {\n    try {\n      // Update permissions in backend\n      const updatedUser = {\n        id: selectedUserPermissions.id,\n        username: selectedUserPermissions.username,\n        password: selectedUserPermissions.password,\n        role: selectedUserPermissions.role,\n        permissions: selectedUserPermissions.tempPermissions,\n        created_at: selectedUserPermissions.created_at\n      };\n      \n      await axios.put(`${API}/users/${selectedUserPermissions.id}`, updatedUser);\n      \n      // Fetch updated data from database\n      fetchUsers();\n      \n      setSelectedUserPermissions(null);\n      alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error updating permissions:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const saveCompanyInfo = () => {\n    setEditingCompany(false);\n    alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ© Ø¨Ù†Ø¬Ø§Ø­');\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-blue-600 mb-4\">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h2>\n        \n        <div className=\"flex space-x-4 space-x-reverse mb-4\">\n          <button className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n            Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n          </button>\n          <button className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n            Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => window.print()}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n            Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n        </div>\n      </div>\n\n      {/* Company Information */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ©</h3>\n        \n        {editingCompany ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©</label>\n              <input\n                type=\"text\"\n                value={companyInfo.name}\n                onChange={(e) => setCompanyInfo({...companyInfo, name: e.target.value})}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>\n              <input\n                type=\"text\"\n                value={companyInfo.address}\n                onChange={(e) => setCompanyInfo({...companyInfo, address: e.target.value})}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ØªÙ„ÙŠÙÙˆÙ†</label>\n              <input\n                type=\"text\"\n                value={companyInfo.phone}\n                onChange={(e) => setCompanyInfo({...companyInfo, phone: e.target.value})}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              />\n            </div>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©</label>\n              <p className=\"p-2 bg-gray-100 rounded\">{companyInfo.name}</p>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>\n              <p className=\"p-2 bg-gray-100 rounded\">{companyInfo.address}</p>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ØªÙ„ÙŠÙÙˆÙ†</label>\n              <p className=\"p-2 bg-gray-100 rounded\">{companyInfo.phone}</p>\n            </div>\n          </div>\n        )}\n        \n        <div className=\"flex space-x-4 space-x-reverse\">\n          {editingCompany ? (\n            <>\n              <button\n                onClick={saveCompanyInfo}\n                className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n              >\n                Ø­ÙØ¸\n              </button>\n              <button\n                onClick={() => setEditingCompany(false)}\n                className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n              >\n                Ø¥Ù„ØºØ§Ø¡\n              </button>\n            </>\n          ) : (\n            <button\n              onClick={() => setEditingCompany(true)}\n              className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n            >\n              ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ©\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Add New User */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯</h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>\n            <input\n              type=\"text\"\n              value={newUser.username}\n              onChange={(e) => setNewUser({...newUser, username: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>\n            <input\n              type=\"password\"\n              value={newUser.password}\n              onChange={(e) => setNewUser({...newUser, password: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©</label>\n            <select\n              value={newUser.role}\n              onChange={(e) => setNewUser({...newUser, role: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"user\">Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯ÙŠ</option>\n              <option value=\"admin\">Ù…Ø¯ÙŠØ±</option>\n            </select>\n          </div>\n        </div>\n        \n        <button\n          onClick={addUser}\n          className=\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\"\n        >\n          Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\n        </button>\n      </div>\n\n      {/* Users Table */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h3>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©</th>\n                <th className=\"border border-gray-300 p-2\">Ø¹Ø¯Ø¯ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª</th>\n                <th className=\"border border-gray-300 p-2\">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø§Ù„Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {users.map((user) => (\n                <tr key={user.id}>\n                  <td className=\"border border-gray-300 p-2\">\n                    {editingUser === user.id ? (\n                      <input\n                        type=\"text\"\n                        value={editForm.username}\n                        onChange={(e) => setEditForm({...editForm, username: e.target.value})}\n                        className=\"w-full p-1 border border-gray-300 rounded\"\n                      />\n                    ) : (\n                      <span className=\"font-semibold\">{user.username}</span>\n                    )}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    {editingUser === user.id ? (\n                      <select\n                        value={editForm.role}\n                        onChange={(e) => setEditForm({...editForm, role: e.target.value})}\n                        className=\"w-full p-1 border border-gray-300 rounded\"\n                      >\n                        <option value=\"user\">Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯ÙŠ</option>\n                        <option value=\"admin\">Ù…Ø¯ÙŠØ±</option>\n                      </select>\n                    ) : (\n                      <span className={`px-2 py-1 rounded text-sm ${\n                        user.role === 'admin' \n                          ? 'bg-red-100 text-red-800' \n                          : 'bg-blue-100 text-blue-800'\n                      }`}>\n                        {user.role === 'admin' ? 'Ù…Ø¯ÙŠØ±' : 'Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯ÙŠ'}\n                      </span>\n                    )}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className=\"bg-gray-100 px-2 py-1 rounded text-sm\">\n                      {user.permissions?.length || 0} ØµÙ„Ø§Ø­ÙŠØ©\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    {new Date(user.created_at).toLocaleDateString('ar-EG')}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className=\"px-2 py-1 rounded text-sm bg-green-100 text-green-800\">\n                      Ù†Ø´Ø·\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex space-x-2 space-x-reverse flex-wrap\">\n                      {editingUser === user.id ? (\n                        <>\n                          <button \n                            onClick={saveEdit}\n                            className=\"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600 mb-1\">\n                            Ø­ÙØ¸\n                          </button>\n                          <button \n                            onClick={cancelEdit}\n                            className=\"bg-gray-500 text-white px-2 py-1 rounded text-sm hover:bg-gray-600 mb-1\">\n                            Ø¥Ù„ØºØ§Ø¡\n                          </button>\n                        </>\n                      ) : (\n                        <>\n                          <button \n                            onClick={() => startEdit(user)}\n                            className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600 mb-1\">\n                            ØªØ¹Ø¯ÙŠÙ„\n                          </button>\n                          <button \n                            onClick={() => openPermissions(user)}\n                            className=\"bg-purple-500 text-white px-2 py-1 rounded text-sm hover:bg-purple-600 mb-1\">\n                            Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª\n                          </button>\n                          <button \n                            onClick={() => resetPassword(user.id)}\n                            className=\"bg-yellow-500 text-white px-2 py-1 rounded text-sm hover:bg-yellow-600 mb-1\">\n                            ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\n                          </button>\n                          {(user.id !== '1' && user.id !== '2') && (\n                            <button \n                              onClick={() => deleteUser(user.id)}\n                              className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600 mb-1\">\n                              Ø­Ø°Ù\n                            </button>\n                          )}\n                        </>\n                      )}\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Permissions Modal */}\n      {selectedUserPermissions && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 max-w-md w-full mx-4\">\n            <h3 className=\"text-lg font-bold mb-4\">\n              ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: {selectedUserPermissions.username}\n            </h3>\n            \n            <div className=\"space-y-2 mb-4\">\n              {allPermissions.map(permission => (\n                <label key={permission.key} className=\"flex items-center\">\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedUserPermissions.tempPermissions.includes(permission.key)}\n                    onChange={() => togglePermission(permission.key)}\n                    className=\"ml-2\"\n                  />\n                  <span>{permission.label}</span>\n                </label>\n              ))}\n            </div>\n            \n            <div className=\"flex space-x-4 space-x-reverse\">\n              <button\n                onClick={savePermissions}\n                className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n              >\n                Ø­ÙØ¸\n              </button>\n              <button\n                onClick={() => setSelectedUserPermissions(null)}\n                className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n              >\n                Ø¥Ù„ØºØ§Ø¡\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Material Pricing Component\nconst Pricing = () => {\n  const [materialPricings, setMaterialPricings] = useState([]);\n  const [editingPricing, setEditingPricing] = useState(null);\n  const [newPricing, setNewPricing] = useState({\n    material_type: 'NBR',\n    inner_diameter: '',\n    outer_diameter: '',\n    price_per_mm: '',\n    manufacturing_cost_client1: '',\n    manufacturing_cost_client2: '',\n    manufacturing_cost_client3: '',\n    notes: ''\n  });\n\n  const materialTypes = ['NBR', 'BUR', 'BT', 'VT', 'BOOM'];\n\n  useEffect(() => {\n    fetchMaterialPricings();\n  }, []);\n\n  const fetchMaterialPricings = async () => {\n    try {\n      const response = await axios.get(`${API}/material-pricing`);\n      setMaterialPricings(response.data);\n    } catch (error) {\n      console.error('Error fetching material pricings:', error);\n    }\n  };\n\n  const addMaterialPricing = async () => {\n    if (!newPricing.inner_diameter || !newPricing.outer_diameter || !newPricing.price_per_mm) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      if (editingPricing) {\n        // Update existing pricing\n        await axios.put(`${API}/material-pricing/${editingPricing}`, {\n          ...newPricing,\n          inner_diameter: parseFloat(newPricing.inner_diameter),\n          outer_diameter: parseFloat(newPricing.outer_diameter),\n          price_per_mm: parseFloat(newPricing.price_per_mm),\n          manufacturing_cost_client1: parseFloat(newPricing.manufacturing_cost_client1 || 0),\n          manufacturing_cost_client2: parseFloat(newPricing.manufacturing_cost_client2 || 0),\n          manufacturing_cost_client3: parseFloat(newPricing.manufacturing_cost_client3 || 0)\n        });\n        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');\n        setEditingPricing(null);\n      } else {\n        // Add new pricing\n        await axios.post(`${API}/material-pricing`, {\n          ...newPricing,\n          inner_diameter: parseFloat(newPricing.inner_diameter),\n          outer_diameter: parseFloat(newPricing.outer_diameter),\n          price_per_mm: parseFloat(newPricing.price_per_mm),\n          manufacturing_cost_client1: parseFloat(newPricing.manufacturing_cost_client1 || 0),\n          manufacturing_cost_client2: parseFloat(newPricing.manufacturing_cost_client2 || 0),\n          manufacturing_cost_client3: parseFloat(newPricing.manufacturing_cost_client3 || 0)\n        });\n        alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');\n      }\n      \n      fetchMaterialPricings();\n      setNewPricing({\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        price_per_mm: '',\n        manufacturing_cost_client1: '',\n        manufacturing_cost_client2: '',\n        manufacturing_cost_client3: '',\n        notes: ''\n      });\n    } catch (error) {\n      console.error('Error saving material pricing:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const editMaterialPricing = (pricing) => {\n    setNewPricing({\n      material_type: pricing.material_type,\n      inner_diameter: pricing.inner_diameter.toString(),\n      outer_diameter: pricing.outer_diameter.toString(),\n      price_per_mm: pricing.price_per_mm.toString(),\n      manufacturing_cost_client1: pricing.manufacturing_cost_client1.toString(),\n      manufacturing_cost_client2: pricing.manufacturing_cost_client2.toString(),\n      manufacturing_cost_client3: pricing.manufacturing_cost_client3.toString(),\n      notes: pricing.notes || ''\n    });\n    setEditingPricing(pricing.id);\n  };\n\n  const deleteMaterialPricing = async (pricingId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©ØŸ')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/material-pricing/${pricingId}`);\n      fetchMaterialPricings();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting material pricing:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const cancelEdit = () => {\n    setEditingPricing(null);\n    setNewPricing({\n      material_type: 'NBR',\n      inner_diameter: '',\n      outer_diameter: '',\n      price_per_mm: '',\n      manufacturing_cost_client1: '',\n      manufacturing_cost_client2: '',\n      manufacturing_cost_client3: '',\n      notes: ''\n    });\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <h2 className=\"text-2xl font-bold text-blue-600 mb-6\">ğŸ’² Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ³Ø¹ÙŠØ±</h2>\n      \n      {/* Add/Edit Material Pricing Form */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">\n          {editingPricing ? 'ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©' : 'Ø¥Ø¶Ø§ÙØ© ØªØ³Ø¹ÙŠØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©'}\n        </h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</label>\n            <select\n              value={newPricing.material_type}\n              onChange={(e) => setNewPricing({...newPricing, material_type: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              {materialTypes.map(type => (\n                <option key={type} value={type}>{type}</option>\n              ))}\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ (Ù…Ù…)</label>\n            <input\n              type=\"number\"\n              step=\"0.1\"\n              value={newPricing.inner_diameter}\n              onChange={(e) => setNewPricing({...newPricing, inner_diameter: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ (Ù…Ù…)</label>\n            <input\n              type=\"number\"\n              step=\"0.1\"\n              value={newPricing.outer_diameter}\n              onChange={(e) => setNewPricing({...newPricing, outer_diameter: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø³Ø¹Ø± Ø§Ù„Ù…Ù„ÙŠ (Ø¬.Ù…)</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newPricing.price_per_mm}\n              onChange={(e) => setNewPricing({...newPricing, price_per_mm: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"Ø³Ø¹Ø± Ø§Ù„Ù…Ù„ÙŠ Ø§Ù„ÙˆØ§Ø­Ø¯\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ØªÙƒÙ„ÙØ© Ø§Ù„ØªØµÙ†ÙŠØ¹ - Ø¹Ù…ÙŠÙ„ 1 (Ø¬.Ù…)</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newPricing.manufacturing_cost_client1}\n              onChange={(e) => setNewPricing({...newPricing, manufacturing_cost_client1: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"ØªÙƒÙ„ÙØ© Ø§Ù„ØªØµÙ†ÙŠØ¹ Ù„Ù„Ø¹Ù…ÙŠÙ„ 1\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ØªÙƒÙ„ÙØ© Ø§Ù„ØªØµÙ†ÙŠØ¹ - Ø¹Ù…ÙŠÙ„ 2 (Ø¬.Ù…)</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newPricing.manufacturing_cost_client2}\n              onChange={(e) => setNewPricing({...newPricing, manufacturing_cost_client2: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"ØªÙƒÙ„ÙØ© Ø§Ù„ØªØµÙ†ÙŠØ¹ Ù„Ù„Ø¹Ù…ÙŠÙ„ 2\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ØªÙƒÙ„ÙØ© Ø§Ù„ØªØµÙ†ÙŠØ¹ - Ø¹Ù…ÙŠÙ„ 3 (Ø¬.Ù…)</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newPricing.manufacturing_cost_client3}\n              onChange={(e) => setNewPricing({...newPricing, manufacturing_cost_client3: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"ØªÙƒÙ„ÙØ© Ø§Ù„ØªØµÙ†ÙŠØ¹ Ù„Ù„Ø¹Ù…ÙŠÙ„ 3\"\n            />\n          </div>\n          \n          <div className=\"md:col-span-2 lg:col-span-3\">\n            <label className=\"block text-sm font-medium mb-1\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>\n            <textarea\n              value={newPricing.notes}\n              onChange={(e) => setNewPricing({...newPricing, notes: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              rows=\"2\"\n              placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©...\"\n            />\n          </div>\n        </div>\n        \n        <div className=\"flex justify-end space-x-4 space-x-reverse mt-4\">\n          {editingPricing && (\n            <button\n              onClick={cancelEdit}\n              className=\"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600\"\n            >\n              Ø¥Ù„ØºØ§Ø¡\n            </button>\n          )}\n          <button\n            onClick={addMaterialPricing}\n            className=\"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600\"\n          >\n            {editingPricing ? 'ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©' : 'Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©'}\n          </button>\n        </div>\n      </div>\n      \n      {/* Material Pricings Table */}\n      <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h3 className=\"text-lg font-semibold\">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø§Øª</h3>\n        </div>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ (Ø¯Ø§Ø®Ù„ÙŠÃ—Ø®Ø§Ø±Ø¬ÙŠ)</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ø³Ø¹Ø± Ø§Ù„Ù…Ù„ÙŠ</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ø¹Ù…ÙŠÙ„ 1</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ø¹Ù…ÙŠÙ„ 2</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ø¹Ù…ÙŠÙ„ 3</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {materialPricings.map((pricing, index) => (\n                <tr key={pricing.id} className={index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                    {pricing.material_type}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {pricing.inner_diameter}Ã—{pricing.outer_diameter} Ù…Ù…\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {pricing.price_per_mm.toFixed(2)} Ø¬.Ù…\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {pricing.manufacturing_cost_client1.toFixed(2)} Ø¬.Ù…\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {pricing.manufacturing_cost_client2.toFixed(2)} Ø¬.Ù…\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {pricing.manufacturing_cost_client3.toFixed(2)} Ø¬.Ù…\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {pricing.notes || '-'}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                    <button\n                      onClick={() => editMaterialPricing(pricing)}\n                      className=\"text-blue-600 hover:text-blue-900 ml-2\"\n                    >\n                      ØªØ¹Ø¯ÙŠÙ„\n                    </button>\n                    <button\n                      onClick={() => deleteMaterialPricing(pricing.id)}\n                      className=\"text-red-600 hover:text-red-900\"\n                    >\n                      Ø­Ø°Ù\n                    </button>\n                  </td>\n                </tr>\n              ))}\n              \n              {materialPricings.length === 0 && (\n                <tr>\n                  <td colSpan=\"8\" className=\"px-6 py-4 text-center text-gray-500\">\n                    Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ³Ø¹ÙŠØ±Ø§Øª Ù…Ø¶Ø§ÙØ©\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Main Treasury Component - Ø§Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©\nconst MainTreasury = () => {\n  const { user } = useAuth();\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [password, setPassword] = useState('');\n  const [balance, setBalance] = useState(0);\n  const [transactions, setTransactions] = useState([]);\n  const [transactionType, setTransactionType] = useState('deposit');\n  const [amount, setAmount] = useState('');\n  const [description, setDescription] = useState('');\n  const [reference, setReference] = useState('');\n  const [showPasswordChange, setShowPasswordChange] = useState(false);\n  const [oldPassword, setOldPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n\n  // Verify password\n  const verifyPassword = async () => {\n    try {\n      const response = await axios.post(`${API}/main-treasury/verify-password`, {\n        password: password\n      });\n      \n      if (response.data.success) {\n        setIsAuthenticated(true);\n        fetchMainTreasuryData();\n      } else {\n        alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©');\n        setPassword('');\n      }\n    } catch (error) {\n      console.error('Error verifying password:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');\n    }\n  };\n\n  // Fetch main treasury data\n  const fetchMainTreasuryData = async () => {\n    try {\n      const balanceResponse = await axios.get(`${API}/main-treasury/balance`);\n      setBalance(balanceResponse.data.balance);\n\n      const transactionsResponse = await axios.get(`${API}/main-treasury/transactions`);\n      setTransactions(transactionsResponse.data);\n    } catch (error) {\n      console.error('Error fetching main treasury data:', error);\n    }\n  };\n\n  // Handle transaction (deposit or withdrawal)\n  const handleTransaction = async () => {\n    if (!amount || !description) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº ÙˆØ§Ù„ÙˆØµÙ');\n      return;\n    }\n\n    if (parseFloat(amount) <= 0) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');\n      return;\n    }\n\n    try {\n      const endpoint = transactionType === 'deposit' \n        ? `${API}/main-treasury/deposit?username=${user.username}`\n        : `${API}/main-treasury/withdrawal?username=${user.username}`;\n\n      await axios.post(endpoint, {\n        transaction_type: transactionType,\n        amount: parseFloat(amount),\n        description: description,\n        reference: reference || null\n      });\n\n      alert(transactionType === 'deposit' ? 'ØªÙ… Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ Ø¨Ù†Ø¬Ø§Ø­' : 'ØªÙ… Ø§Ù„ØµØ±Ù Ø¨Ù†Ø¬Ø§Ø­');\n      \n      // Reset form\n      setAmount('');\n      setDescription('');\n      setReference('');\n      \n      // Refresh data\n      fetchMainTreasuryData();\n    } catch (error) {\n      console.error('Error performing transaction:', error);\n      alert(error.response?.data?.detail || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');\n    }\n  };\n\n  // Change password\n  const changePassword = async () => {\n    if (!oldPassword || !newPassword) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ÙˆØ§Ù„Ø¬Ø¯ÙŠØ¯Ø©');\n      return;\n    }\n\n    if (newPassword.length < 4) {\n      alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 4 Ø£Ø±Ù‚Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');\n      return;\n    }\n\n    try {\n      await axios.post(`${API}/main-treasury/change-password`, {\n        old_password: oldPassword,\n        new_password: newPassword\n      });\n\n      alert('ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­');\n      setShowPasswordChange(false);\n      setOldPassword('');\n      setNewPassword('');\n    } catch (error) {\n      console.error('Error changing password:', error);\n      alert(error.response?.data?.detail || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');\n    }\n  };\n\n  // If not authenticated, show password screen\n  if (!isAuthenticated) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600 p-6\" dir=\"rtl\">\n        <div className=\"bg-white p-8 rounded-lg shadow-2xl max-w-md w-full\">\n          <div className=\"text-center mb-6\">\n            <div className=\"text-6xl mb-4\">ğŸ”</div>\n            <h2 className=\"text-2xl font-bold text-gray-800\">Ø§Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h2>\n            <p className=\"text-gray-600 mt-2\">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù„Ø¯Ø®ÙˆÙ„</p>\n          </div>\n          \n          <div className=\"space-y-4\">\n            <input\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              onKeyPress={(e) => e.key === 'Enter' && verifyPassword()}\n              placeholder=\"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\"\n              className=\"w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-center text-lg\"\n              autoFocus\n            />\n            \n            <button\n              onClick={verifyPassword}\n              className=\"w-full bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 font-semibold text-lg transition-colors\"\n            >\n              Ø¯Ø®ÙˆÙ„\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Main treasury interface\n  return (\n    <div className=\"p-6 bg-gray-50 min-h-screen\" dir=\"rtl\">\n      {/* Header */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-800 flex items-center gap-2\">\n              ğŸ” Ø§Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©\n            </h1>\n            <p className=\"text-gray-600 mt-2\">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ù„Ø´Ø±ÙƒØ©</p>\n          </div>\n          <div className=\"text-left\">\n            <p className=\"text-sm text-gray-500\">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ</p>\n            <p className=\"text-4xl font-bold text-green-600\">\n              {balance.toFixed(2)} Ø¬.Ù…\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Action Buttons */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\">\n        {/* Deposit/Withdrawal Form */}\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-xl font-semibold mb-4 flex items-center gap-2\">\n            {transactionType === 'deposit' ? 'ğŸ’µ Ø¥ÙŠØ¯Ø§Ø¹' : 'ğŸ’¸ ØµØ±Ù'}\n          </h3>\n          \n          <div className=\"space-y-4\">\n            {/* Transaction Type Toggle */}\n            <div className=\"flex gap-2\">\n              <button\n                onClick={() => setTransactionType('deposit')}\n                className={`flex-1 py-2 rounded-lg font-semibold transition-colors ${\n                  transactionType === 'deposit'\n                    ? 'bg-green-500 text-white'\n                    : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\n                }`}\n              >\n                ğŸ’µ Ø¥ÙŠØ¯Ø§Ø¹\n              </button>\n              <button\n                onClick={() => setTransactionType('withdrawal')}\n                className={`flex-1 py-2 rounded-lg font-semibold transition-colors ${\n                  transactionType === 'withdrawal'\n                    ? 'bg-red-500 text-white'\n                    : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\n                }`}\n              >\n                ğŸ’¸ ØµØ±Ù\n              </button>\n            </div>\n\n            {/* Amount */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Ø§Ù„Ù…Ø¨Ù„Øº (Ø¬.Ù…)\n              </label>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                value={amount}\n                onChange={(e) => setAmount(e.target.value)}\n                placeholder=\"0.00\"\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n              />\n            </div>\n\n            {/* Description */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Ø§Ù„ÙˆØµÙ/Ø§Ù„Ø³Ø¨Ø¨ *\n              </label>\n              <textarea\n                value={description}\n                onChange={(e) => setDescription(e.target.value)}\n                placeholder=\"Ø§ÙƒØªØ¨ Ø³Ø¨Ø¨ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ Ø£Ùˆ Ø§Ù„ØµØ±Ù...\"\n                rows=\"3\"\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n              />\n            </div>\n\n            {/* Reference (Optional) */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Ø§Ù„Ù…Ø±Ø¬Ø¹ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\n              </label>\n              <input\n                type=\"text\"\n                value={reference}\n                onChange={(e) => setReference(e.target.value)}\n                placeholder=\"Ø±Ù‚Ù… Ø§Ù„Ù…Ø³ØªÙ†Ø¯ Ø£Ùˆ Ø§Ù„Ù…Ø±Ø¬Ø¹\"\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n              />\n            </div>\n\n            {/* Submit Button */}\n            <button\n              onClick={handleTransaction}\n              className={`w-full py-3 rounded-lg font-semibold text-white transition-colors ${\n                transactionType === 'deposit'\n                  ? 'bg-green-500 hover:bg-green-600'\n                  : 'bg-red-500 hover:bg-red-600'\n              }`}\n            >\n              {transactionType === 'deposit' ? 'âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹' : 'âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØµØ±Ù'}\n            </button>\n          </div>\n        </div>\n\n        {/* Password Change */}\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-xl font-semibold mb-4 flex items-center gap-2\">\n            ğŸ”‘ Ø¥Ø¯Ø§Ø±Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\n          </h3>\n          \n          {!showPasswordChange ? (\n            <div className=\"text-center py-8\">\n              <p className=\"text-gray-600 mb-4\">ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</p>\n              <button\n                onClick={() => setShowPasswordChange(true)}\n                className=\"bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 font-semibold\"\n              >\n                ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\n              </button>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©\n                </label>\n                <input\n                  type=\"password\"\n                  value={oldPassword}\n                  onChange={(e) => setOldPassword(e.target.value)}\n                  className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©\n                </label>\n                <input\n                  type=\"password\"\n                  value={newPassword}\n                  onChange={(e) => setNewPassword(e.target.value)}\n                  className=\"w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n                />\n              </div>\n\n              <div className=\"flex gap-2\">\n                <button\n                  onClick={changePassword}\n                  className=\"flex-1 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 font-semibold\"\n                >\n                  âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØºÙŠÙŠØ±\n                </button>\n                <button\n                  onClick={() => {\n                    setShowPasswordChange(false);\n                    setOldPassword('');\n                    setNewPassword('');\n                  }}\n                  className=\"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 font-semibold\"\n                >\n                  âŒ Ø¥Ù„ØºØ§Ø¡\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Transactions History */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h3 className=\"text-xl font-semibold mb-4 flex items-center gap-2\">\n          ğŸ“‹ Ø³Ø¬Ù„ Ø§Ù„Ø­Ø±ÙƒØ§Øª\n        </h3>\n\n        {transactions.length === 0 ? (\n          <p className=\"text-center text-gray-500 py-8\">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø±ÙƒØ§Øª Ù…Ø³Ø¬Ù„Ø©</p>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full border-collapse\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"border border-gray-300 p-3 text-right\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                  <th className=\"border border-gray-300 p-3 text-right\">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</th>\n                  <th className=\"border border-gray-300 p-3 text-right\">Ø§Ù„Ù…Ø¨Ù„Øº</th>\n                  <th className=\"border border-gray-300 p-3 text-right\">Ø§Ù„ÙˆØµÙ</th>\n                  <th className=\"border border-gray-300 p-3 text-right\">Ø§Ù„Ù…Ø±Ø¬Ø¹</th>\n                  <th className=\"border border-gray-300 p-3 text-right\">Ø§Ù„Ø±ØµÙŠØ¯ Ø¨Ø¹Ø¯</th>\n                  <th className=\"border border-gray-300 p-3 text-right\">Ù†ÙØ° Ø¨ÙˆØ§Ø³Ø·Ø©</th>\n                </tr>\n              </thead>\n              <tbody>\n                {transactions.map((transaction) => (\n                  <tr key={transaction.id} className=\"hover:bg-gray-50\">\n                    <td className=\"border border-gray-300 p-3\">\n                      {new Date(transaction.date).toLocaleDateString('ar-EG', {\n                        year: 'numeric',\n                        month: '2-digit',\n                        day: '2-digit',\n                        hour: '2-digit',\n                        minute: '2-digit'\n                      })}\n                    </td>\n                    <td className=\"border border-gray-300 p-3\">\n                      <span className={`px-3 py-1 rounded-full text-sm font-semibold ${\n                        transaction.transaction_type === 'deposit'\n                          ? 'bg-green-100 text-green-800'\n                          : transaction.transaction_type === 'withdrawal'\n                          ? 'bg-red-100 text-red-800'\n                          : 'bg-blue-100 text-blue-800'\n                      }`}>\n                        {transaction.transaction_type === 'deposit'\n                          ? 'ğŸ’µ Ø¥ÙŠØ¯Ø§Ø¹'\n                          : transaction.transaction_type === 'withdrawal'\n                          ? 'ğŸ’¸ ØµØ±Ù'\n                          : 'â†”ï¸ ØªØ±Ø­ÙŠÙ„'}\n                      </span>\n                    </td>\n                    <td className={`border border-gray-300 p-3 font-bold ${\n                      transaction.transaction_type === 'withdrawal'\n                        ? 'text-red-600'\n                        : 'text-green-600'\n                    }`}>\n                      {transaction.transaction_type === 'withdrawal' ? '-' : '+'}\n                      {transaction.amount.toFixed(2)} Ø¬.Ù…\n                    </td>\n                    <td className=\"border border-gray-300 p-3\">{transaction.description}</td>\n                    <td className=\"border border-gray-300 p-3 text-gray-600\">\n                      {transaction.reference || '-'}\n                    </td>\n                    <td className=\"border border-gray-300 p-3 font-bold text-blue-600\">\n                      {transaction.balance_after.toFixed(2)} Ø¬.Ù…\n                    </td>\n                    <td className=\"border border-gray-300 p-3\">{transaction.performed_by}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// Main App Component\nconst App = () => {\n  const [currentPage, setCurrentPage] = useState('sales'); // Default to sales instead of dashboard\n  const { user } = useAuth();\n\n  if (!user) return <Login />;\n\n  const renderPage = () => {\n    switch (currentPage) {\n      case 'dashboard': \n        // Only Elsawy can access dashboard\n        return user?.username === 'Elsawy' ? <Dashboard /> : <Sales />;\n      case 'sales': return <Sales />;\n      case 'inventory': return <Inventory />;\n      case 'stock': return <Stock />;\n      case 'local': return <Local />;\n      case 'deferred': return <Deferred />;\n      case 'expenses': return <Expenses />;\n      case 'revenue': return <Revenue />;\n      case 'treasury': return <Treasury />;\n      case 'main-treasury': \n        // Only Elsawy can access main treasury\n        return user?.username === 'Elsawy' ? <MainTreasury /> : <Sales />;\n      case 'invoices': return <Invoices />;\n      case 'deleted-invoices': return <DeletedInvoices />;\n      case 'customer-statement': return <CustomerStatement />;\n      case 'settle-account': return <SettleAccount />;\n      case 'work-orders': return <WorkOrders />;\n      case 'pricing': return <Pricing />;\n      case 'backup': return <Backup />;\n      case 'users': return <Users />;\n      default: return <Sales />; // Default to sales instead of dashboard\n    }\n  };\n\n  return (\n    <div className=\"flex h-screen bg-gray-50\" dir=\"rtl\">\n      <Navigation currentPage={currentPage} onPageChange={setCurrentPage} />\n      <main className=\"flex-1 overflow-y-auto bg-gradient-to-br from-gray-50 to-blue-50\">\n        <div className=\"p-6\">\n          {renderPage()}\n        </div>\n      </main>\n    </div>\n  );\n};\n\n// Root App with AuthProvider\nconst AppWithAuth = () => (\n  <AuthProvider>\n    <App />\n  </AuthProvider>\n);\n\nexport default AppWithAuth;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}