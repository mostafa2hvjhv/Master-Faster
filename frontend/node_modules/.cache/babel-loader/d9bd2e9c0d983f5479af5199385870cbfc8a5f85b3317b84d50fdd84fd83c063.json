{"ast":null,"code":"import _objectSpread from\"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,createContext,useContext}from'react';import'./App.css';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const BACKEND_URL=process.env.REACT_APP_BACKEND_URL;const API=\"\".concat(BACKEND_URL,\"/api\");// Auth Context\nconst AuthContext=/*#__PURE__*/createContext();const useAuth=()=>{const context=useContext(AuthContext);if(!context){throw new Error('useAuth must be used within an AuthProvider');}return context;};const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[isLoading,setIsLoading]=useState(true);useEffect(()=>{const savedUser=localStorage.getItem('user');if(savedUser){setUser(JSON.parse(savedUser));}setIsLoading(false);},[]);const login=async(username,password)=>{try{const response=await axios.post(\"\".concat(API,\"/auth/login\"),null,{params:{username,password}});if(response.data.success){setUser(response.data.user);localStorage.setItem('user',JSON.stringify(response.data.user));return true;}return false;}catch(error){console.error('Login error:',error);return false;}};const logout=()=>{setUser(null);localStorage.removeItem('user');};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-xl\",children:\"\\u062C\\u0627\\u0631\\u064A \\u0627\\u0644\\u062A\\u062D\\u0645\\u064A\\u0644...\"})});}return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,login,logout},children:children});};// Login Component\nconst Login=()=>{const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const{login}=useAuth();const handleSubmit=async e=>{e.preventDefault();setError('');const success=await login(username,password);if(!success){setError('Ø®Ø·Ø£ ÙÙŠ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4\",dir:\"rtl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl p-8 border border-blue-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\",alt:\"Master Seal Logo\",className:\"h-16 w-16 mx-auto rounded-full shadow-lg border-4 border-blue-100\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent\",children:\"\\u0645\\u0627\\u0633\\u062A\\u0631 \\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mt-2\",children:\"\\u0646\\u0638\\u0627\\u0645 \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0634\\u0631\\u0643\\u0629 \\u0627\\u0644\\u0645\\u062A\\u0643\\u0627\\u0645\\u0644\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-1 bg-gradient-to-r from-blue-400 to-blue-600 mx-auto mt-3 rounded-full\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"\\uD83D\\uDC64 \\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,onChange:e=>setUsername(e.target.value),className:\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-3 focus:ring-blue-200 focus:border-blue-400 transition-all duration-200 bg-gray-50 hover:bg-white\",placeholder:\"\\u0627\\u062F\\u062E\\u0644 \\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"\\uD83D\\uDD12 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),className:\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-3 focus:ring-blue-200 focus:border-blue-400 transition-all duration-200 bg-gray-50 hover:bg-white\",placeholder:\"\\u0627\\u062F\\u062E\\u0644 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\",required:true})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-xl text-sm text-center animate-pulse\",children:[\"\\u26A0\\uFE0F \",error]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-gradient-to-r from-blue-600 to-blue-800 text-white py-3 px-6 rounded-xl hover:from-blue-700 hover:to-blue-900 focus:outline-none focus:ring-3 focus:ring-blue-300 transition-all duration-200 font-semibold shadow-lg hover:shadow-xl transform hover:scale-105\",children:\"\\uD83D\\uDE80 \\u062F\\u062E\\u0648\\u0644\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-8 pt-6 border-t border-gray-100\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400\",children:\"\\u0627\\u0644\\u062D\\u0631\\u0641\\u064A\\u064A\\u0646 - \\u0627\\u0644\\u0633\\u0644\\u0627\\u0645 - \\u0623\\u0645\\u0627\\u0645 \\u0627\\u0644\\u0633\\u0648\\u0628\\u0631 \\u062C\\u064A\\u062A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1 font-medium\",children:\"\\uD83D\\uDCDE 01020630677\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 bg-white/60 backdrop-blur-sm rounded-xl p-4 text-center border border-blue-100/50\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"\\u0646\\u0638\\u0627\\u0645 \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0645\\u062A\\u0643\\u0627\\u0645\\u0644 \\u0644\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0645\\u0628\\u064A\\u0639\\u0627\\u062A \\u0648\\u0627\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0648\\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\\u0627\\u062A\"})})]})});};// Navigation Component\nconst Navigation=_ref2=>{let{currentPage,onPageChange}=_ref2;const{user,logout}=useAuth();// Dashboard is only for Elsawy\nconst elsawyPages=[{key:'dashboard',label:'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…',icon:'ðŸ“Š'},{key:'sales',label:'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª',icon:'ðŸ’°'},{key:'inventory',label:'Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø®Ø§Ù…Ø§Øª',icon:'ðŸ“¦'},{key:'stock',label:'Ù…Ø®Ø²Ù† Ø¥Ù†ØªØ§Ø¬',icon:'ðŸª'},{key:'local',label:'Ù…ÙˆØ±Ø¯ÙŠÙ†',icon:'ðŸ­'},{key:'deferred',label:'Ø§Ù„Ø¢Ø¬Ù„',icon:'â³'},{key:'expenses',label:'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª',icon:'ðŸ’¸'},{key:'revenue',label:'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª',icon:'ðŸ“ˆ'},{key:'treasury',label:'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©',icon:'ðŸ¦'},{key:'invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ±',icon:'ðŸ§¾'},{key:'deleted-invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©',icon:'ðŸ—‘ï¸'},{key:'customer-statement',label:'ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨',icon:'ðŸ“‹'},{key:'work-orders',label:'Ø£Ù…Ø± Ø´ØºÙ„',icon:'âš™ï¸'},{key:'pricing',label:'Ø§Ù„ØªØ³Ø¹ÙŠØ±',icon:'ðŸ’²'},{key:'backup',label:'Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ',icon:'ðŸ’¾'},{key:'users',label:'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',icon:'ðŸ‘¥'}];const adminPages=[{key:'sales',label:'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª',icon:'ðŸ’°'},{key:'inventory',label:'Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø®Ø§Ù…Ø§Øª',icon:'ðŸ“¦'},{key:'stock',label:'Ù…Ø®Ø²Ù† Ø¥Ù†ØªØ§Ø¬',icon:'ðŸª'},{key:'local',label:'Ù…ÙˆØ±Ø¯ÙŠÙ†',icon:'ðŸ­'},{key:'deferred',label:'Ø§Ù„Ø¢Ø¬Ù„',icon:'â³'},{key:'expenses',label:'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª',icon:'ðŸ’¸'},{key:'revenue',label:'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª',icon:'ðŸ“ˆ'},{key:'treasury',label:'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©',icon:'ðŸ¦'},{key:'invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ±',icon:'ðŸ§¾'},{key:'deleted-invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©',icon:'ðŸ—‘ï¸'},{key:'customer-statement',label:'ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨',icon:'ðŸ“‹'},{key:'work-orders',label:'Ø£Ù…Ø± Ø´ØºÙ„',icon:'âš™ï¸'},{key:'pricing',label:'Ø§Ù„ØªØ³Ø¹ÙŠØ±',icon:'ðŸ’²'},{key:'backup',label:'Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ',icon:'ðŸ’¾'},{key:'users',label:'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',icon:'ðŸ‘¥'}];const userPages=[{key:'sales',label:'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª',icon:'ðŸ’°'},{key:'inventory',label:'Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø®Ø§Ù…Ø§Øª',icon:'ðŸ“¦'},{key:'stock',label:'Ù…Ø®Ø²Ù† Ø¥Ù†ØªØ§Ø¬',icon:'ðŸª'},{key:'local',label:'Ù…ÙˆØ±Ø¯ÙŠÙ†',icon:'ðŸ­'},{key:'deferred',label:'Ø§Ù„Ø¢Ø¬Ù„',icon:'â³'},{key:'expenses',label:'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª',icon:'ðŸ’¸'},{key:'treasury',label:'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©',icon:'ðŸ¦'},{key:'invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ±',icon:'ðŸ§¾'},{key:'deleted-invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©',icon:'ðŸ—‘ï¸'},{key:'customer-statement',label:'ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨',icon:'ðŸ“‹'},{key:'work-orders',label:'Ø£Ù…Ø± Ø´ØºÙ„',icon:'âš™ï¸'},{key:'pricing',label:'Ø§Ù„ØªØ³Ø¹ÙŠØ±',icon:'ðŸ’²'}];// Only Elsawy gets dashboard access\nconst pages=(user===null||user===void 0?void 0:user.username)==='Elsawy'?elsawyPages:(user===null||user===void 0?void 0:user.role)==='admin'?adminPages:userPages;return/*#__PURE__*/_jsxs(\"div\",{className:\"w-80 bg-gradient-to-b from-blue-900 via-blue-800 to-blue-900 text-white shadow-2xl\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-blue-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\",alt:\"Master Seal Logo\",className:\"h-12 w-12 rounded-lg shadow-lg\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold text-white\",children:\"\\u0645\\u0627\\u0633\\u062A\\u0631 \\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-200\",children:\"\\u0646\\u0638\\u0627\\u0645 \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0645\\u062A\\u0643\\u0627\\u0645\\u0644\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-blue-800 border-b border-blue-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium\",children:\"\\u0623\\u0647\\u0644\\u0627\\u064B \\u0648\\u0633\\u0647\\u0644\\u0627\\u064B\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-bold text-blue-200\",children:user===null||user===void 0?void 0:user.username})]}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"bg-red-500 hover:bg-red-600 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 shadow-lg hover:shadow-xl\",children:\"\\u062E\\u0631\\u0648\\u062C\"})]})}),/*#__PURE__*/_jsx(\"nav\",{className:\"flex-1 p-4 space-y-2\",children:pages.map(page=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onPageChange(page.key),className:\"w-full flex items-center space-x-3 space-x-reverse p-4 rounded-xl text-right transition-all duration-200 group \".concat(currentPage===page.key?'bg-white text-blue-900 shadow-lg transform scale-105':'hover:bg-blue-700 hover:transform hover:translate-x-2'),children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:page.icon}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:page.label}),currentPage===page.key&&/*#__PURE__*/_jsx(\"div\",{className:\"mr-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-blue-500 rounded-full animate-pulse\"})})]},page.key))}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-t border-blue-700 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-300\",children:\"\\u0627\\u0644\\u062D\\u0631\\u0641\\u064A\\u064A\\u0646 - \\u0627\\u0644\\u0633\\u0644\\u0627\\u0645 - \\u0623\\u0645\\u0627\\u0645 \\u0627\\u0644\\u0633\\u0648\\u0628\\u0631 \\u062C\\u064A\\u062A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-400 mt-1\",children:\"01020630677\"})]})]});};// Inventory Management Component\nconst Inventory=()=>{const[inventoryItems,setInventoryItems]=useState([]);const[inventoryTransactions,setInventoryTransactions]=useState([]);const[lowStockItems,setLowStockItems]=useState([]);const[currentView,setCurrentView]=useState('items');// items, transactions, low-stock, add-item\nconst[editingItem,setEditingItem]=useState(null);// Ù„Ù„ØªØ¹Ø¯ÙŠÙ„\nconst[newItem,setNewItem]=useState({material_type:'NBR',inner_diameter:'',outer_diameter:'',available_pieces:'',// ØªØºÙŠÙŠØ± Ù…Ù† available_height Ø¥Ù„Ù‰ available_pieces\nmin_stock_level:2,// Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ 2 Ù‚Ø·Ø¹Ø©\nnotes:''});const[newTransaction,setNewTransaction]=useState({material_type:'NBR',inner_diameter:'',outer_diameter:'',transaction_type:'in',pieces_change:'',// ØªØºÙŠÙŠØ± Ù…Ù† height_change Ø¥Ù„Ù‰ pieces_change\nreason:'',notes:''});const[searchTerm,setSearchTerm]=useState('');const materialTypes=['NBR','BUR','BT','VT','BOOM'];// Fetch functions\nconst fetchInventoryItems=async()=>{try{const response=await axios.get(\"\".concat(API,\"/inventory\"));setInventoryItems(response.data||[]);}catch(error){console.error('Error fetching inventory items:',error);}};const fetchInventoryTransactions=async()=>{try{const response=await axios.get(\"\".concat(API,\"/inventory-transactions\"));setInventoryTransactions(response.data||[]);}catch(error){console.error('Error fetching inventory transactions:',error);}};const fetchLowStockItems=async()=>{try{const response=await axios.get(\"\".concat(API,\"/inventory/low-stock\"));setLowStockItems(response.data||[]);}catch(error){console.error('Error fetching low stock items:',error);}};useEffect(()=>{fetchInventoryItems();fetchInventoryTransactions();fetchLowStockItems();},[]);// Add or Update inventory item\nconst addInventoryItem=async()=>{if(!newItem.material_type||!newItem.inner_diameter||!newItem.outer_diameter||!newItem.available_pieces){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{if(editingItem){// Update existing item\nawait axios.put(\"\".concat(API,\"/inventory/\").concat(editingItem.id),_objectSpread(_objectSpread({},newItem),{},{inner_diameter:parseFloat(newItem.inner_diameter),outer_diameter:parseFloat(newItem.outer_diameter),available_pieces:parseInt(newItem.available_pieces),min_stock_level:parseInt(newItem.min_stock_level||2)}));alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');setEditingItem(null);}else{// Add new item\nawait axios.post(\"\".concat(API,\"/inventory\"),_objectSpread(_objectSpread({},newItem),{},{inner_diameter:parseFloat(newItem.inner_diameter),outer_diameter:parseFloat(newItem.outer_diameter),available_pieces:parseInt(newItem.available_pieces),min_stock_level:parseInt(newItem.min_stock_level||2)}));alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}fetchInventoryItems();fetchLowStockItems();setCurrentView('items');setNewItem({material_type:'NBR',inner_diameter:'',outer_diameter:'',available_pieces:'',min_stock_level:2,notes:''});}catch(error){var _error$response,_error$response$data;console.error('Error saving inventory item:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯: '+(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||error.message));}};// Add inventory transaction\nconst addInventoryTransaction=async()=>{if(!newTransaction.material_type||!newTransaction.inner_diameter||!newTransaction.outer_diameter||!newTransaction.pieces_change||!newTransaction.reason){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{const transactionData=_objectSpread(_objectSpread({},newTransaction),{},{inner_diameter:parseFloat(newTransaction.inner_diameter),outer_diameter:parseFloat(newTransaction.outer_diameter),pieces_change:newTransaction.transaction_type==='out'?-Math.abs(parseInt(newTransaction.pieces_change)):Math.abs(parseInt(newTransaction.pieces_change))});await axios.post(\"\".concat(API,\"/inventory-transactions\"),transactionData);fetchInventoryItems();fetchInventoryTransactions();fetchLowStockItems();setNewTransaction({material_type:'NBR',inner_diameter:'',outer_diameter:'',transaction_type:'in',pieces_change:'',reason:'',notes:''});alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ù…Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response2,_error$response2$data;console.error('Error adding inventory transaction:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ù…Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ø¬Ø±Ø¯: '+(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.detail)||error.message));}};// Filter and sort items based on search\nconst filteredItems=inventoryItems.filter(item=>{var _item$notes;return item.material_type.toLowerCase().includes(searchTerm.toLowerCase())||item.inner_diameter.toString().includes(searchTerm.toLowerCase())||item.outer_diameter.toString().includes(searchTerm.toLowerCase())||((_item$notes=item.notes)===null||_item$notes===void 0?void 0:_item$notes.toLowerCase().includes(searchTerm.toLowerCase()));}).sort((a,b)=>{// ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\nconst materialPriority={'BUR':1,'NBR':2,'BT':3,'BOOM':4,'VT':5};const aPriority=materialPriority[a.material_type]||6;const bPriority=materialPriority[b.material_type]||6;if(aPriority!==bPriority){return aPriority-bPriority;}// Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)\nif(a.inner_diameter!==b.inner_diameter){return a.inner_diameter-b.inner_diameter;}return a.outer_diameter-b.outer_diameter;});const filteredTransactions=inventoryTransactions.filter(transaction=>{var _transaction$notes;return transaction.reason.toLowerCase().includes(searchTerm.toLowerCase())||transaction.material_type.toLowerCase().includes(searchTerm.toLowerCase())||((_transaction$notes=transaction.notes)===null||_transaction$notes===void 0?void 0:_transaction$notes.toLowerCase().includes(searchTerm.toLowerCase()));}).sort((a,b)=>{// ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\nconst materialPriority={'BUR':1,'NBR':2,'BT':3,'BOOM':4,'VT':5};const aPriority=materialPriority[a.material_type]||6;const bPriority=materialPriority[b.material_type]||6;if(aPriority!==bPriority){return aPriority-bPriority;}// Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ) Ø«Ù… Ø§Ù„ØªØ§Ø±ÙŠØ®\nif(a.inner_diameter!==b.inner_diameter){return a.inner_diameter-b.inner_diameter;}if(a.outer_diameter!==b.outer_diameter){return a.outer_diameter-b.outer_diameter;}return new Date(b.date)-new Date(a.date);// Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹\n});return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"\\u0627\\u0644\\u0645\\u062E\\u0632\\u0646 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('items'),className:\"px-4 py-2 rounded \".concat(currentView==='items'?'bg-blue-500 text-white':'bg-gray-200'),children:\"\\u0639\\u0646\\u0627\\u0635\\u0631 \\u0627\\u0644\\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('transactions'),className:\"px-4 py-2 rounded \".concat(currentView==='transactions'?'bg-blue-500 text-white':'bg-gray-200'),children:\"\\u0645\\u0639\\u0627\\u0645\\u0644\\u0627\\u062A \\u0627\\u0644\\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCurrentView('low-stock'),className:\"px-4 py-2 rounded \".concat(currentView==='low-stock'?'bg-red-500 text-white':'bg-gray-200'),children:[\"\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0645\\u0646\\u062E\\u0641\\u0636 (\",lowStockItems.length,\")\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('excel'),className:\"px-4 py-2 rounded \".concat(currentView==='excel'?'bg-green-500 text-white':'bg-gray-200'),children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0625\\u0643\\u0633\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('add-item'),className:\"px-4 py-2 rounded \".concat(currentView==='add-item'?'bg-green-500 text-white':'bg-gray-200'),children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0639\\u0646\\u0635\\u0631 \\u062C\\u062F\\u064A\\u062F\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"\\u0627\\u0644\\u0628\\u062D\\u062B \\u0641\\u064A \\u0627\\u0644\\u062C\\u0631\\u062F...\",className:\"w-full p-3 border border-gray-300 rounded-lg\"})}),currentView==='items'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0639\\u0646\\u0627\\u0635\\u0631 \\u0627\\u0644\\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0627\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0642\\u0637\\u0639 \\u0627\\u0644\\u0645\\u062A\\u0627\\u062D\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u062F \\u0627\\u0644\\u0623\\u062F\\u0646\\u0649\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredItems.map(item=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:item.material_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.inner_diameter}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.outer_diameter}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold \".concat(item.available_pieces<=item.min_stock_level?'text-red-600':'text-green-600'),children:[item.available_pieces,\" \\u0642\\u0637\\u0639\\u0629\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[item.min_stock_level,\" \\u0642\\u0637\\u0639\\u0629\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm \".concat(item.available_pieces<=item.min_stock_level?'bg-red-100 text-red-800':'bg-green-100 text-green-800'),children:item.available_pieces<=item.min_stock_level?'Ù…Ù†Ø®ÙØ¶':'Ø·Ø¨ÙŠØ¹ÙŠ'})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.notes||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingItem(item);setNewItem({material_type:item.material_type,inner_diameter:item.inner_diameter,outer_diameter:item.outer_diameter,available_pieces:item.available_pieces,min_stock_level:item.min_stock_level,notes:item.notes||''});setCurrentView('add-item');},className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{if(confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ØµØ±ØŸ')){try{await axios.delete(\"\".concat(API,\"/inventory/\").concat(item.id));alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ù†ØµØ± Ø¨Ù†Ø¬Ø§Ø­');fetchInventoryItems();}catch(error){console.error('Error deleting item:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¹Ù†ØµØ±');}}},className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641\"})]})})]},item.id))})]})})]}),currentView==='transactions'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0639\\u0627\\u0645\\u0644\\u0629 \\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsx(\"select\",{value:newTransaction.material_type,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{material_type:e.target.value})),className:\"p-2 border border-gray-300 rounded\",children:materialTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newTransaction.inner_diameter,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{inner_diameter:e.target.value})),placeholder:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newTransaction.outer_diameter,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{outer_diameter:e.target.value})),placeholder:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsxs(\"select\",{value:newTransaction.transaction_type,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{transaction_type:e.target.value})),className:\"p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"in\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0644\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646\"}),/*#__PURE__*/_jsx(\"option\",{value:\"out\",children:\"\\u062E\\u0635\\u0645 \\u0645\\u0646 \\u0627\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"1\",value:newTransaction.pieces_change,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{pieces_change:e.target.value})),placeholder:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0642\\u0637\\u0639\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newTransaction.reason,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{reason:e.target.value})),placeholder:\"\\u0633\\u0628\\u0628 \\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0629\",className:\"p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newTransaction.notes,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{notes:e.target.value})),placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\",className:\"w-full p-2 border border-gray-300 rounded\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:addInventoryTransaction,className:\"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0633\\u062C\\u0644 \\u0645\\u0639\\u0627\\u0645\\u0644\\u0627\\u062A \\u0627\\u0644\\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0627\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0642\\u0627\\u0633\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0642\\u0637\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0645\\u062A\\u0628\\u0642\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0633\\u0628\\u0628\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredTransactions.map(transaction=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(transaction.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.material_type}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[transaction.inner_diameter,\" \\xD7 \",transaction.outer_diameter]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm \".concat(transaction.transaction_type==='in'?'bg-green-100 text-green-800':'bg-red-100 text-red-800'),children:transaction.transaction_type==='in'?'Ø¥Ø¶Ø§ÙØ©':'Ø®ØµÙ…'})}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold \".concat(transaction.pieces_change>0?'text-green-600':'text-red-600'),children:[transaction.pieces_change>0?'+':'',transaction.pieces_change,\" \\u0642\\u0637\\u0639\\u0629\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:[transaction.remaining_pieces,\" \\u0642\\u0637\\u0639\\u0629\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.reason}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.notes||'-'})]},transaction.id))})]})})]})]}),currentView==='low-stock'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold mb-4 text-red-600\",children:[\"\\u0639\\u0646\\u0627\\u0635\\u0631 \\u0628\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0645\\u0646\\u062E\\u0641\\u0636 (\",lowStockItems.length,\")\"]}),lowStockItems.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-green-600 text-center py-8\",children:\"\\u2705 \\u062C\\u0645\\u064A\\u0639 \\u0639\\u0646\\u0627\\u0635\\u0631 \\u0627\\u0644\\u062C\\u0631\\u062F \\u0641\\u064A \\u0627\\u0644\\u0645\\u0633\\u062A\\u0648\\u0649 \\u0627\\u0644\\u0637\\u0628\\u064A\\u0639\\u064A\"}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-red-50\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0627\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0642\\u0627\\u0633\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u062F \\u0627\\u0644\\u0623\\u062F\\u0646\\u0649\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0642\\u0635 \\u0627\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:lowStockItems.map(item=>/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-red-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:item.material_type}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[item.inner_diameter,\" \\xD7 \",item.outer_diameter]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold text-red-600\",children:[item.available_pieces,\" \\u0642\\u0637\\u0639\\u0629\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[item.min_stock_level,\" \\u0642\\u0637\\u0639\\u0629\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold text-red-600\",children:[Math.max(0,item.min_stock_level-item.available_pieces),\" \\u0642\\u0637\\u0639\\u0629\"]})]},item.id))})]})})]}),currentView==='add-item'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:editingItem?'ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯':'Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø¬Ø±Ø¯ Ø¬Ø¯ÙŠØ¯'}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(\"select\",{value:newItem.material_type,onChange:e=>setNewItem(_objectSpread(_objectSpread({},newItem),{},{material_type:e.target.value})),className:\"p-2 border border-gray-300 rounded\",children:materialTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newItem.inner_diameter,onChange:e=>setNewItem(_objectSpread(_objectSpread({},newItem),{},{inner_diameter:e.target.value})),placeholder:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newItem.outer_diameter,onChange:e=>setNewItem(_objectSpread(_objectSpread({},newItem),{},{outer_diameter:e.target.value})),placeholder:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"1\",value:newItem.available_pieces,onChange:e=>setNewItem(_objectSpread(_objectSpread({},newItem),{},{available_pieces:e.target.value})),placeholder:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0642\\u0637\\u0639 \\u0627\\u0644\\u0645\\u062A\\u0627\\u062D\\u0629\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newItem.min_stock_level,onChange:e=>setNewItem(_objectSpread(_objectSpread({},newItem),{},{min_stock_level:e.target.value})),placeholder:\"\\u0627\\u0644\\u062D\\u062F \\u0627\\u0644\\u0623\\u062F\\u0646\\u0649 \\u0644\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newItem.notes,onChange:e=>setNewItem(_objectSpread(_objectSpread({},newItem),{},{notes:e.target.value})),placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\",className:\"p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addInventoryItem,className:\"mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:editingItem?'ØªØ­Ø¯ÙŠØ« Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯':'Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯'}),editingItem&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingItem(null);setNewItem({material_type:'NBR',inner_diameter:'',outer_diameter:'',available_pieces:'',min_stock_level:2,notes:''});setCurrentView('items');},className:\"mt-4 mr-2 bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621 \\u0627\\u0644\\u062A\\u0639\\u062F\\u064A\\u0644\"})]}),currentView==='excel'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0645\\u0644\\u0641\\u0627\\u062A \\u0627\\u0644\\u062C\\u0631\\u062F - Excel\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u062A\\u0635\\u062F\\u064A\\u0631 \\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{try{const response=await axios.get(\"\".concat(API,\"/excel/export/inventory\"),{responseType:'blob'});const url=window.URL.createObjectURL(new Blob([response.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download',\"inventory_export_\".concat(new Date().toISOString().split('T')[0],\".xlsx\"));document.body.appendChild(link);link.click();link.remove();alert('ØªÙ… ØªØµØ¯ÙŠØ± Ù…Ù„Ù Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error exporting inventory:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù');}},className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u062A\\u0635\\u062F\\u064A\\u0631 \\u062C\\u0631\\u062F Excel\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062C\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".xlsx,.xls\",onChange:async e=>{const file=e.target.files[0];if(!file)return;const formData=new FormData();formData.append('file',file);try{const response=await axios.post(\"\".concat(API,\"/excel/import/inventory\"),formData,{headers:{'Content-Type':'multipart/form-data'}});alert(\"\\u062A\\u0645 \\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \".concat(response.data.imported_count,\" \\u0639\\u0646\\u0635\\u0631 \\u0628\\u0646\\u062C\\u0627\\u062D\"));if(response.data.errors.length>0){console.warn('Import errors:',response.data.errors);}fetchInventoryItems();}catch(error){console.error('Error importing inventory:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù');}e.target.value='';},className:\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-2\",children:\"\\u0627\\u0644\\u0623\\u0639\\u0645\\u062F\\u0629 \\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628\\u0629: material_type, inner_diameter, outer_diameter, available_pieces\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u062E\\u0627\\u0645 - Excel\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u062A\\u0635\\u062F\\u064A\\u0631 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u062E\\u0627\\u0645\"}),/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{try{const response=await axios.get(\"\".concat(API,\"/excel/export/raw-materials\"),{responseType:'blob'});const url=window.URL.createObjectURL(new Blob([response.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download',\"raw_materials_export_\".concat(new Date().toISOString().split('T')[0],\".xlsx\"));document.body.appendChild(link);link.click();link.remove();alert('ØªÙ… ØªØµØ¯ÙŠØ± Ù…Ù„Ù Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error exporting raw materials:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù');}},className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u062A\\u0635\\u062F\\u064A\\u0631 \\u0645\\u0648\\u0627\\u062F \\u062E\\u0627\\u0645 Excel\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u062E\\u0627\\u0645\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".xlsx,.xls\",onChange:async e=>{const file=e.target.files[0];if(!file)return;const formData=new FormData();formData.append('file',file);try{const response=await axios.post(\"\".concat(API,\"/excel/import/raw-materials\"),formData,{headers:{'Content-Type':'multipart/form-data'}});alert(\"\\u062A\\u0645 \\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \".concat(response.data.imported_count,\" \\u0645\\u0627\\u062F\\u0629 \\u062E\\u0627\\u0645 \\u0628\\u0646\\u062C\\u0627\\u062D\"));if(response.data.errors.length>0){console.warn('Import errors:',response.data.errors);}}catch(error){console.error('Error importing raw materials:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù');}e.target.value='';},className:\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-2\",children:\"\\u0627\\u0644\\u0623\\u0639\\u0645\\u062F\\u0629 \\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628\\u0629: material_type, inner_diameter, outer_diameter, height, pieces_count, unit_code, cost_per_mm\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 p-6 rounded-lg shadow-md md:col-span-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u062A\\u0639\\u0644\\u064A\\u0645\\u0627\\u062A \\u0627\\u0633\\u062A\\u062E\\u062F\\u0627\\u0645 \\u0627\\u0644\\u0625\\u0643\\u0633\\u0644\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u062A\\u0635\\u062F\\u064A\\u0631 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"text-sm text-gray-700 list-disc list-inside space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u064A\\u062A\\u0645 \\u062A\\u0635\\u062F\\u064A\\u0631 \\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0644\\u0645\\u0644\\u0641 \\u064A\\u062D\\u062A\\u0648\\u064A \\u0639\\u0644\\u0649 \\u062A\\u0646\\u0633\\u064A\\u0642 \\u062C\\u0627\\u0647\\u0632 \\u0644\\u0644\\u062A\\u0639\\u062F\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u064A\\u0645\\u0643\\u0646 \\u0641\\u062A\\u062D \\u0627\\u0644\\u0645\\u0644\\u0641 \\u0641\\u064A Excel \\u0623\\u0648 Google Sheets\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"text-sm text-gray-700 list-disc list-inside space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u064A\\u062C\\u0628 \\u0623\\u0646 \\u064A\\u0643\\u0648\\u0646 \\u0627\\u0644\\u0645\\u0644\\u0641 \\u0645\\u0646 \\u0646\\u0648\\u0639 .xlsx \\u0623\\u0648 .xls\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0644\\u0623\\u0639\\u0645\\u062F\\u0629 \\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628\\u0629 \\u064A\\u062C\\u0628 \\u0623\\u0646 \\u062A\\u0643\\u0648\\u0646 \\u0645\\u0648\\u062C\\u0648\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u0645\\u0648\\u062C\\u0648\\u062F\\u0629 \\u0644\\u0646 \\u062A\\u062A\\u0623\\u062B\\u0631 (\\u064A\\u062A\\u0645 \\u0627\\u0644\\u062A\\u062D\\u062F\\u064A\\u062B \\u0623\\u0648 \\u0627\\u0644\\u0625\\u0636\\u0627\\u0641\\u0629)\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0633\\u064A\\u062A\\u0645 \\u0639\\u0631\\u0636 \\u0631\\u0633\\u0627\\u0644\\u0629 \\u062A\\u0623\\u0643\\u064A\\u062F \\u0645\\u0639 \\u0639\\u062F\\u062F \\u0627\\u0644\\u0639\\u0646\\u0627\\u0635\\u0631 \\u0627\\u0644\\u0645\\u0633\\u062A\\u0648\\u0631\\u062F\\u0629\"})]})]})]})]})]})]});};// Local Products Management Component\nconst Local=()=>{const[suppliers,setSuppliers]=useState([]);const[localProducts,setLocalProducts]=useState([]);const[supplierTransactions,setSupplierTransactions]=useState([]);const[currentView,setCurrentView]=useState('suppliers');// suppliers, products, transactions\nconst[newSupplier,setNewSupplier]=useState({name:'',phone:'',address:''});const[newProduct,setNewProduct]=useState({name:'',supplier_id:'',purchase_price:'',selling_price:'',current_stock:0});const[newTransaction,setNewTransaction]=useState({supplier_id:'',transaction_type:'purchase',amount:'',description:'',product_name:'',quantity:'',unit_price:'',payment_method:'cash'});const[selectedSupplier,setSelectedSupplier]=useState('');const[paymentAmount,setPaymentAmount]=useState('');const[paymentMethod,setPaymentMethod]=useState('cash');// Fetch data functions\nconst fetchSuppliers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/suppliers\"));setSuppliers(response.data||[]);}catch(error){console.error('Error fetching suppliers:',error);}};const fetchLocalProducts=async()=>{try{const response=await axios.get(\"\".concat(API,\"/local-products\"));setLocalProducts(response.data||[]);}catch(error){console.error('Error fetching local products:',error);}};const fetchSupplierTransactions=async()=>{try{const response=await axios.get(\"\".concat(API,\"/supplier-transactions\"));setSupplierTransactions(response.data||[]);}catch(error){console.error('Error fetching supplier transactions:',error);}};useEffect(()=>{fetchSuppliers();fetchLocalProducts();fetchSupplierTransactions();},[]);// Add supplier\nconst addSupplier=async()=>{if(!newSupplier.name.trim()){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯');return;}try{if(newSupplier.id){// Update existing supplier\nawait axios.put(\"\".concat(API,\"/suppliers/\").concat(newSupplier.id),{name:newSupplier.name,phone:newSupplier.phone,address:newSupplier.address});alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}else{// Add new supplier\nawait axios.post(\"\".concat(API,\"/suppliers\"),newSupplier);alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}fetchSuppliers();setNewSupplier({name:'',phone:'',address:''});}catch(error){var _error$response3,_error$response3$data;console.error('Error saving supplier:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…ÙˆØ±Ø¯: '+(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.detail)||error.message));}};const editSupplier=supplier=>{// Fill the form with supplier data for editing\nsetNewSupplier({id:supplier.id,name:supplier.name,phone:supplier.phone||'',address:supplier.address||''});};const deleteSupplier=async supplierId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ±Ø¯ØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡.')){return;}try{await axios.delete(\"\".concat(API,\"/suppliers/\").concat(supplierId));fetchSuppliers();fetchLocalProducts();// Refresh products as they might be affected\nalert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response4,_error$response4$data;console.error('Error deleting supplier:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ±Ø¯: '+(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.detail)||error.message));}};// Add local product\nconst addLocalProduct=async()=>{if(!newProduct.name.trim()||!newProduct.supplier_id||!newProduct.purchase_price||!newProduct.selling_price){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{if(newProduct.id){// Update existing product\nawait axios.put(\"\".concat(API,\"/local-products/\").concat(newProduct.id),{name:newProduct.name,supplier_id:newProduct.supplier_id,purchase_price:parseFloat(newProduct.purchase_price),selling_price:parseFloat(newProduct.selling_price),current_stock:parseInt(newProduct.current_stock||0)});alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­');}else{// Add new product\nawait axios.post(\"\".concat(API,\"/local-products\"),_objectSpread(_objectSpread({},newProduct),{},{purchase_price:parseFloat(newProduct.purchase_price),selling_price:parseFloat(newProduct.selling_price),current_stock:parseInt(newProduct.current_stock||0)}));alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­');}fetchLocalProducts();setNewProduct({name:'',supplier_id:'',purchase_price:'',selling_price:'',current_stock:0});}catch(error){var _error$response5,_error$response5$data;console.error('Error saving local product:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬: '+(((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.detail)||error.message));}};const editLocalProduct=product=>{// Fill the form with product data for editing\nsetNewProduct({id:product.id,name:product.name,supplier_id:product.supplier_id,purchase_price:product.purchase_price.toString(),selling_price:product.selling_price.toString(),current_stock:product.current_stock||0});};const deleteLocalProduct=async productId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡.')){return;}try{await axios.delete(\"\".concat(API,\"/local-products/\").concat(productId));fetchLocalProducts();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response6,_error$response6$data;console.error('Error deleting local product:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬: '+(((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.detail)||error.message));}};// Pay supplier\nconst paySupplier=async()=>{if(!selectedSupplier||!paymentAmount){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙˆØ±Ø¯ ÙˆØ¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº');return;}try{await axios.post(\"\".concat(API,\"/supplier-payment?supplier_id=\").concat(selectedSupplier,\"&amount=\").concat(paymentAmount,\"&payment_method=\").concat(paymentMethod));fetchSuppliers();fetchSupplierTransactions();setSelectedSupplier('');setPaymentAmount('');alert('ØªÙ… Ø¯ÙØ¹ Ø§Ù„Ù…Ø¨Ù„Øº Ù„Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error paying supplier:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¯ÙØ¹ Ø§Ù„Ù…Ø¨Ù„Øº');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"\\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\\u064A\\u0646\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('suppliers'),className:\"px-4 py-2 rounded \".concat(currentView==='suppliers'?'bg-blue-500 text-white':'bg-gray-200'),children:\"\\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\\u064A\\u0646\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('products'),className:\"px-4 py-2 rounded \".concat(currentView==='products'?'bg-blue-500 text-white':'bg-gray-200'),children:\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('transactions'),className:\"px-4 py-2 rounded \".concat(currentView==='transactions'?'bg-blue-500 text-white':'bg-gray-200'),children:\"\\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('payments'),className:\"px-4 py-2 rounded \".concat(currentView==='payments'?'bg-blue-500 text-white':'bg-gray-200'),children:\"\\u0633\\u062F\\u0627\\u062F \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\\u064A\\u0646\"})]})]}),currentView==='suppliers'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0648\\u0631\\u062F \\u062C\\u062F\\u064A\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newSupplier.name,onChange:e=>setNewSupplier(_objectSpread(_objectSpread({},newSupplier),{},{name:e.target.value})),placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newSupplier.phone,onChange:e=>setNewSupplier(_objectSpread(_objectSpread({},newSupplier),{},{phone:e.target.value})),placeholder:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0647\\u0627\\u062A\\u0641 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newSupplier.address,onChange:e=>setNewSupplier(_objectSpread(_objectSpread({},newSupplier),{},{address:e.target.value})),placeholder:\"\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\",className:\"p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addSupplier,className:\"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0642\\u0627\\u0626\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\\u064A\\u0646\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0647\\u0627\\u062A\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0634\\u062A\\u0631\\u064A\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:suppliers.map(supplier=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:supplier.name}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:supplier.phone||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:supplier.address||'-'}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",(supplier.total_purchases||0).toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",(supplier.total_paid||0).toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold \".concat((supplier.balance||0)>0?'text-red-600':'text-green-600'),children:[\"\\u062C.\\u0645 \",(supplier.balance||0).toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editSupplier(supplier),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",title:\"\\u062A\\u062D\\u0631\\u064A\\u0631\",children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteSupplier(supplier.id),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",title:\"\\u062D\\u0630\\u0641\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]})})]},supplier.id))})]})})]})]}),currentView==='products'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0646\\u062A\\u062C \\u0645\\u062D\\u0644\\u064A \\u062C\\u062F\\u064A\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newProduct.name,onChange:e=>setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{name:e.target.value})),placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsxs(\"select\",{value:newProduct.supplier_id,onChange:e=>setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{supplier_id:e.target.value})),className:\"p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),suppliers.map(supplier=>/*#__PURE__*/_jsx(\"option\",{value:supplier.id,children:supplier.name},supplier.id))]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newProduct.purchase_price,onChange:e=>setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{purchase_price:e.target.value})),placeholder:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0634\\u0631\\u0627\\u0621\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newProduct.selling_price,onChange:e=>setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{selling_price:e.target.value})),placeholder:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0628\\u064A\\u0639\",className:\"p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addLocalProduct,className:\"mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0642\\u0627\\u0626\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A \\u0627\\u0644\\u0645\\u062D\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0634\\u0631\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0628\\u064A\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u0627\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:localProducts.map(product=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:product.name}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.supplier_name}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",product.purchase_price.toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",product.selling_price.toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.current_stock||0}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.total_sold||0}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editLocalProduct(product),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",title:\"\\u062A\\u062D\\u0631\\u064A\\u0631\",children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteLocalProduct(product.id),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",title:\"\\u062D\\u0630\\u0641\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]})})]},product.id))})]})})]})]}),currentView==='transactions'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0645\\u0639\\u0627\\u0645\\u0644\\u0627\\u062A \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\\u064A\\u0646\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0648\\u0635\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:supplierTransactions.map(transaction=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(transaction.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.supplier_name}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm \".concat(transaction.transaction_type==='purchase'?'bg-red-100 text-red-800':'bg-green-100 text-green-800'),children:transaction.transaction_type==='purchase'?'Ø´Ø±Ø§Ø¡':'Ø¯ÙØ¹'})}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold \".concat(transaction.transaction_type==='purchase'?'text-red-600':'text-green-600'),children:[\"\\u062C.\\u0645 \",transaction.amount.toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.description}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.product_name||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.quantity||'-'})]},transaction.id))})]})})]}),currentView==='payments'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0633\\u062F\\u0627\\u062F \\u062D\\u0633\\u0627\\u0628\\u0627\\u062A \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\\u064A\\u0646\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"select\",{value:selectedSupplier,onChange:e=>setSelectedSupplier(e.target.value),className:\"p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),suppliers.filter(s=>(s.balance||0)>0).map(supplier=>/*#__PURE__*/_jsxs(\"option\",{value:supplier.id,children:[supplier.name,\" - \\u0645\\u0633\\u062A\\u062D\\u0642: \\u062C.\\u0645 \",(supplier.balance||0).toFixed(2)]},supplier.id))]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:paymentAmount,onChange:e=>setPaymentAmount(e.target.value),placeholder:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\",className:\"p-2 border border-gray-300 rounded\"}),/*#__PURE__*/_jsxs(\"select\",{value:paymentMethod,onChange:e=>setPaymentMethod(e.target.value),className:\"p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"cash\",children:\"\\u0646\\u0642\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vodafone_elsawy\",children:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 010\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vodafone_wael\",children:\"\\u0643\\u0627\\u0634 0100\"}),/*#__PURE__*/_jsx(\"option\",{value:\"instapay\",children:\"\\u0627\\u0646\\u0633\\u062A\\u0627 \\u0628\\u0627\\u064A\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:paySupplier,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u062F\\u0641\\u0639 \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"})]})]});};// Dashboard Component\nconst Dashboard=()=>{const{user}=useAuth();// Only Elsawy can access dashboard\nif((user===null||user===void 0?void 0:user.username)!=='Elsawy'){return/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",dir:\"rtl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u063A\\u064A\\u0631 \\u0645\\u0633\\u0645\\u0648\\u062D!\"}),\" \\u0644\\u0648\\u062D\\u0629 \\u0627\\u0644\\u062A\\u062D\\u0643\\u0645 \\u0645\\u062E\\u0635\\u0635\\u0629 \\u0644\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645 Elsawy \\u0641\\u0642\\u0637.\"]})});}const[stats,setStats]=useState({total_sales:0,total_expenses:0,net_profit:0,total_unpaid:0,invoice_count:0,customer_count:0});useEffect(()=>{fetchStats();},[]);const fetchStats=async()=>{try{const response=await axios.get(\"\".concat(API,\"/dashboard/stats\"));setStats(response.data);}catch(error){console.error('Error fetching stats:',error);}};const clearAllData=async()=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.'))return;try{// Clear all data from backend\nawait axios.delete(\"\".concat(API,\"/customers/clear-all\"));await axios.delete(\"\".concat(API,\"/raw-materials/clear-all\"));await axios.delete(\"\".concat(API,\"/finished-products/clear-all\"));await axios.delete(\"\".concat(API,\"/invoices/clear-all\"));await axios.delete(\"\".concat(API,\"/expenses/clear-all\"));await axios.delete(\"\".concat(API,\"/payments/clear-all\"));await axios.delete(\"\".concat(API,\"/work-orders/clear-all\"));// Refresh dashboard stats\nfetchStats();alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');}catch(error){console.error('Error clearing all data:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');}};const printReport=reportType=>{const currentDate=new Date().toLocaleDateString('ar-EG');let printContent=\"\\n      <div style=\\\"font-family: Arial, sans-serif; direction: rtl; text-align: right;\\\">\\n        <div style=\\\"text-align: center; margin-bottom: 20px;\\\">\\n          <h1>\\u0645\\u0627\\u0633\\u062A\\u0631 \\u0633\\u064A\\u0644</h1>\\n          <p>\\u0627\\u0644\\u062D\\u0631\\u0641\\u064A\\u0627\\u0646 \\u0634\\u0627\\u0631\\u0639 \\u0627\\u0644\\u0633\\u0648\\u0628\\u0631 \\u062C\\u064A\\u062A - 01020630677</p>\\n          <h2>\\u062A\\u0642\\u0631\\u064A\\u0631 \\u0644\\u0648\\u062D\\u0629 \\u0627\\u0644\\u062A\\u062D\\u0643\\u0645</h2>\\n          <p>\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E: \".concat(currentDate,\"</p>\\n        </div>\\n        <table style=\\\"width: 100%; border-collapse: collapse;\\\">\\n          <tr>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\"><strong>\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u064A\\u0639\\u0627\\u062A:</strong></td>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\">\\u062C.\\u0645 \").concat(stats.total_sales.toFixed(2),\"</td>\\n          </tr>\\n          <tr>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\"><strong>\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A:</strong></td>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\">\\u062C.\\u0645 \").concat(stats.total_expenses.toFixed(2),\"</td>\\n          </tr>\\n          <tr>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\"><strong>\\u0635\\u0627\\u0641\\u064A \\u0627\\u0644\\u0631\\u0628\\u062D:</strong></td>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\">\\u062C.\\u0645 \").concat(stats.net_profit.toFixed(2),\"</td>\\n          </tr>\\n          <tr>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\"><strong>\\u0627\\u0644\\u0645\\u0628\\u0627\\u0644\\u063A \\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\\u0629:</strong></td>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\">\\u062C.\\u0645 \").concat(stats.total_unpaid.toFixed(2),\"</td>\\n          </tr>\\n          <tr>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\"><strong>\\u0639\\u062F\\u062F \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631:</strong></td>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\">\").concat(stats.invoice_count,\"</td>\\n          </tr>\\n          <tr>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\"><strong>\\u0639\\u062F\\u062F \\u0627\\u0644\\u0639\\u0645\\u0644\\u0627\\u0621:</strong></td>\\n            <td style=\\\"border: 1px solid #ddd; padding: 10px;\\\">\").concat(stats.customer_count,\"</td>\\n          </tr>\\n        </table>\\n      </div>\\n    \");const printWindow=window.open('','_blank');printWindow.document.write(printContent);printWindow.document.close();printWindow.print();};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-blue-600 to-blue-800 rounded-xl p-6 text-white shadow-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold mb-2\",children:\"\\u0644\\u0648\\u062D\\u0629 \\u0627\\u0644\\u062A\\u062D\\u0643\\u0645\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-100\",children:[\"\\u0645\\u0631\\u062D\\u0628\\u0627\\u064B \",user===null||user===void 0?void 0:user.username,\" - \\u0625\\u0644\\u064A\\u0643 \\u0646\\u0638\\u0631\\u0629 \\u0639\\u0627\\u0645\\u0629 \\u0639\\u0644\\u0649 \\u0623\\u062F\\u0627\\u0621 \\u0627\\u0644\\u0646\\u0634\\u0627\\u0637\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-6xl opacity-20\",children:\"\\uD83D\\uDCCA\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap space-x-4 space-x-reverse mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:clearAllData,className:\"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105\",children:\"\\uD83D\\uDDD1\\uFE0F \\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchStats,className:\"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105\",children:\"\\uD83D\\uDD04 \\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>printReport('dashboard'),className:\"bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105\",children:\"\\uD83D\\uDDA8\\uFE0F \\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"bg-white text-gray-700 border-0 rounded-lg px-4 py-3 shadow-lg focus:ring-2 focus:ring-blue-300 font-medium\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"\\uD83D\\uDCC5 \\u064A\\u0648\\u0645\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\uD83D\\uDCC6 \\u0623\\u0633\\u0628\\u0648\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\uD83D\\uDCCA \\u0634\\u0647\\u0631\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\uD83D\\uDCC8 \\u0633\\u0646\\u0648\\u064A\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-green-400 to-green-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold opacity-90\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u064A\\u0639\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold mt-2\",children:[\"\\u062C.\\u0645 \",stats.total_sales.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl opacity-30\",children:\"\\uD83D\\uDCB0\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-red-400 to-red-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold opacity-90\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold mt-2\",children:[\"\\u062C.\\u0645 \",stats.total_expenses.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl opacity-30\",children:\"\\uD83D\\uDCB8\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-blue-400 to-blue-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold opacity-90\",children:\"\\u0635\\u0627\\u0641\\u064A \\u0627\\u0644\\u0631\\u0628\\u062D\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold mt-2\",children:[\"\\u062C.\\u0645 \",stats.net_profit.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl opacity-30\",children:\"\\uD83D\\uDCC8\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-orange-400 to-orange-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold opacity-90\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0627\\u0644\\u063A \\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\\u0629\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold mt-2\",children:[\"\\u062C.\\u0645 \",stats.total_unpaid.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl opacity-30\",children:\"\\u23F3\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-purple-400 to-purple-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold opacity-90\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold mt-2\",children:stats.invoice_count})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl opacity-30\",children:\"\\uD83E\\uDDFE\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-teal-400 to-teal-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold opacity-90\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0639\\u0645\\u0644\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold mt-2\",children:stats.customer_count})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-5xl opacity-30\",children:\"\\uD83D\\uDC65\"})]})})]})]});};// Sales Component\nconst Sales=()=>{const[customers,setCustomers]=useState([]);const[newCustomer,setNewCustomer]=useState('');const[selectedCustomer,setSelectedCustomer]=useState('');const[suppliers,setSuppliers]=useState([]);// Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†\nconst[supervisorName,setSupervisorName]=useState('');// Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØªØµÙ†ÙŠØ¹\nconst[invoiceTitle,setInvoiceTitle]=useState('');// Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nconst[currentItem,setCurrentItem]=useState({seal_type:'RSL',material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',quantity:1,unit_price:'',product_type:'manufactured'// manufactured Ø£Ùˆ local\n});// New state for dual measurement inputs\nconst[measurements,setMeasurements]=useState({inner_diameter_mm:'',inner_diameter_inch:'',outer_diameter_mm:'',outer_diameter_inch:'',height_mm:'',height_inch:'',wall_height_mm:'',wall_height_inch:''});const[localProduct,setLocalProduct]=useState({product_size:'',// Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ù†ØªØ¬\nproduct_type:'',// Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬\npurchase_price:'',selling_price:'',supplier:''});const[items,setItems]=useState([]);const[paymentMethod,setPaymentMethod]=useState('Ù†Ù‚Ø¯ÙŠ');const[discount,setDiscount]=useState(0);// Ø§Ù„Ø®ØµÙ…\nconst[discountType,setDiscountType]=useState('amount');// Ù†ÙˆØ¹ Ø§Ù„Ø®ØµÙ…: amount Ø£Ùˆ percentage\nconst[compatibilityResults,setCompatibilityResults]=useState(null);const[selectedMaterial,setSelectedMaterial]=useState(null);const[selectedMaterials,setSelectedMaterials]=useState([]);// Ø®Ø§Ù…Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© Ù…Ø®ØªØ§Ø±Ø©\nconst[measurementUnit,setMeasurementUnit]=useState('Ù…Ù…');// Ø¨ÙˆØµØ© Ø£Ùˆ Ù…Ù…\nconst[wallHeight,setWallHeight]=useState('');// Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø© Ù„Ù„Ù€ W types\nconst[clientType,setClientType]=useState(1);// Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù„ØªØ³Ø¹ÙŠØ± (1, 2, 3)\n// Measurement conversion functions\nconst mmToInch=mm=>{if(!mm||mm==='')return'';return(parseFloat(mm)/25.4).toFixed(4);};const inchToMm=inch=>{if(!inch||inch==='')return'';return(parseFloat(inch)*25.4).toFixed(2);};// Handle measurement input changes with auto-conversion\nconst handleMeasurementChange=(field,value,unit)=>{const newMeasurements=_objectSpread({},measurements);if(unit==='mm'){newMeasurements[\"\".concat(field,\"_mm\")]=value;newMeasurements[\"\".concat(field,\"_inch\")]=mmToInch(value);}else{newMeasurements[\"\".concat(field,\"_inch\")]=value;newMeasurements[\"\".concat(field,\"_mm\")]=inchToMm(value);}setMeasurements(newMeasurements);// Update currentItem with mm values (for backend compatibility)\nconst mmValue=parseFloat(newMeasurements[\"\".concat(field,\"_mm\")])||'';setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{[field]:mmValue}));};const sealTypes=['RSL','RS','RSS','RSE','B17','B3','B14','B1','R15','R17','W1','W4','W5','W11','WBT','XR','CH','VR'];const materialTypes=['NBR','BUR','BT','VT','BOOM'];useEffect(()=>{fetchCustomers();fetchSuppliers();},[]);const fetchCustomers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/customers\"));// Sort customers alphabetically by name\nconst sortedCustomers=(response.data||[]).sort((a,b)=>a.name.localeCompare(b.name,'ar'));setCustomers(sortedCustomers);}catch(error){console.error('Error fetching customers:',error);}};const fetchSuppliers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/suppliers\"));setSuppliers(response.data||[]);}catch(error){console.error('Error fetching suppliers:',error);}};// Calculate automatic pricing based on material and client type\nconst calculateAutomaticPrice=async(material,height,clientType)=>{try{const response=await axios.post(\"\".concat(API,\"/calculate-price\"),null,{params:{material_type:material.material_type,inner_diameter:material.inner_diameter,outer_diameter:material.outer_diameter,height:height,client_type:clientType}});return response.data;}catch(error){console.log('No pricing found for this material combination:',error);return null;}};// Confirm multi-material selection and calculate pricing\nconst confirmMultiMaterialSelection=async()=>{try{// Calculate total pricing for all selected materials\nlet totalPrice=0;const height=parseFloat(currentItem.height);for(const selected of selectedMaterials){const pricing=await calculateAutomaticPrice(selected.material,height,clientType);if(pricing){totalPrice+=pricing.total_price*selected.seals;}}// Update the current item with the calculated price\nsetCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{unit_price:(totalPrice/parseInt(currentItem.quantity)).toFixed(2)}));// Set the first material as the selected material for compatibility\nif(selectedMaterials.length>0){setSelectedMaterial(selectedMaterials[0].material);}alert(\"\\u2705 \\u062A\\u0645 \\u062A\\u0623\\u0643\\u064A\\u062F \\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0627\\u062A \\u0628\\u0646\\u062C\\u0627\\u062D!\\n\\n\\uD83D\\uDCCA \\u0645\\u0644\\u062E\\u0635 \\u0627\\u0644\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631:\\n\".concat(selectedMaterials.map(sel=>\"- \".concat(sel.material.unit_code,\": \").concat(sel.seals,\" \\u0633\\u064A\\u0644\")).join('\\n'),\"\\n\\n\\uD83D\\uDCB0 \\u0627\\u0644\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A: \").concat(totalPrice.toFixed(2),\" \\u062C.\\u0645\\n\\uD83D\\uDCB0 \\u0633\\u0639\\u0631 \\u0627\\u0644\\u0633\\u064A\\u0644 \\u0627\\u0644\\u0648\\u0627\\u062D\\u062F: \").concat((totalPrice/parseInt(currentItem.quantity)).toFixed(2),\" \\u062C.\\u0645\"));}catch(error){console.error('Error confirming multi-material selection:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±');}};const checkCompatibility=async()=>{if(!currentItem.inner_diameter||!currentItem.outer_diameter||!currentItem.height){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}let innerDiameter=parseFloat(currentItem.inner_diameter);let outerDiameter=parseFloat(currentItem.outer_diameter);let height=parseFloat(currentItem.height);if(isNaN(innerDiameter)||isNaN(outerDiameter)||isNaN(height)){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø£Ø±Ù‚Ø§Ù… ØµØ­ÙŠØ­Ø© Ù„Ù„Ù…Ù‚Ø§Ø³Ø§Øª');return;}// Convert from inches to millimeters if needed\nif(measurementUnit==='Ø¨ÙˆØµØ©'){innerDiameter=innerDiameter*25.4;outerDiameter=outerDiameter*25.4;height=height*25.4;console.log(\"\\u062A\\u062D\\u0648\\u064A\\u0644 \\u0645\\u0646 \\u0628\\u0648\\u0635\\u0629 \\u0625\\u0644\\u0649 \\u0645\\u0644\\u0644\\u064A\\u0645\\u062A\\u0631:\\n        \\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A: \".concat(currentItem.inner_diameter,\" \\u0628\\u0648\\u0635\\u0629 = \").concat(innerDiameter.toFixed(1),\" \\u0645\\u0645\\n        \\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A: \").concat(currentItem.outer_diameter,\" \\u0628\\u0648\\u0635\\u0629 = \").concat(outerDiameter.toFixed(1),\" \\u0645\\u0645\\n        \\u0627\\u0644\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639: \").concat(currentItem.height,\" \\u0628\\u0648\\u0635\\u0629 = \").concat(height.toFixed(1),\" \\u0645\\u0645\"));}try{const response=await axios.post(\"\".concat(API,\"/compatibility-check\"),{seal_type:currentItem.seal_type,material_type:currentItem.material_type,inner_diameter:innerDiameter,outer_diameter:outerDiameter,height:height});setCompatibilityResults(response.data);}catch(error){console.error('Error checking compatibility:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„ØªÙˆØ§ÙÙ‚');}};const addItem=()=>{if(currentItem.product_type==='manufactured'){// Validation for manufactured products - check if at least one measurement is filled\nconst hasInnerDiameter=measurements.inner_diameter_mm||measurements.inner_diameter_inch;const hasOuterDiameter=measurements.outer_diameter_mm||measurements.outer_diameter_inch;const hasHeight=measurements.height_mm||measurements.height_inch;if(!hasInnerDiameter||!hasOuterDiameter||!hasHeight||!currentItem.unit_price){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© (Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª ÙˆØ§Ù„Ø³Ø¹Ø±)');return;}// Use mm values (they're automatically kept in sync by handleMeasurementChange)\nconst innerDiameter=parseFloat(currentItem.inner_diameter);const outerDiameter=parseFloat(currentItem.outer_diameter);const height=parseFloat(currentItem.height);const wallHeightValue=parseFloat(measurements.wall_height_mm)||null;const item=_objectSpread(_objectSpread({},currentItem),{},{inner_diameter:innerDiameter,outer_diameter:outerDiameter,height:height,quantity:parseInt(currentItem.quantity),unit_price:parseFloat(currentItem.unit_price),total_price:parseFloat(currentItem.unit_price)*parseInt(currentItem.quantity),wall_height:wallHeightValue,// Store original display values for both units\ndisplay_measurements:{inner_diameter_mm:measurements.inner_diameter_mm,inner_diameter_inch:measurements.inner_diameter_inch,outer_diameter_mm:measurements.outer_diameter_mm,outer_diameter_inch:measurements.outer_diameter_inch,height_mm:measurements.height_mm,height_inch:measurements.height_inch,wall_height_mm:measurements.wall_height_mm,wall_height_inch:measurements.wall_height_inch},material_used:selectedMaterial?selectedMaterial.unit_code:null,material_details:selectedMaterial?{id:selectedMaterial.id,unit_code:selectedMaterial.unit_code,inner_diameter:selectedMaterial.inner_diameter,outer_diameter:selectedMaterial.outer_diameter,height:selectedMaterial.height,material_type:selectedMaterial.material_type,is_finished_product:selectedMaterial.is_finished_product||false}:{// Ø¥Ø±Ø³Ø§Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø­ØªÙ‰ Ø¨Ø¯ÙˆÙ† Ø§Ø®ØªÙŠØ§Ø± Ù…Ø§Ø¯Ø© Ù…Ø­Ø¯Ø¯Ø©\nmaterial_type:currentItem.material_type,inner_diameter:parseFloat(currentItem.inner_diameter),outer_diameter:parseFloat(currentItem.outer_diameter),is_finished_product:false},// Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø®Ø§Ù…Ø§Øª Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©\nselected_materials:selectedMaterials.length>0?selectedMaterials.map(sel=>({unit_code:sel.material.unit_code,material_type:sel.material.material_type,inner_diameter:sel.material.inner_diameter,outer_diameter:sel.material.outer_diameter,height:sel.material.height,seals_count:sel.seals,id:sel.material.id})):null});setItems([...items,item]);setCurrentItem({seal_type:'RSL',material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',quantity:1,unit_price:'',product_type:'manufactured'});setMeasurements({inner_diameter_mm:'',inner_diameter_inch:'',outer_diameter_mm:'',outer_diameter_inch:'',height_mm:'',height_inch:'',wall_height_mm:'',wall_height_inch:''});}else{// Validation for local products\nif(!localProduct.product_size||!localProduct.product_type||!localProduct.selling_price||!localProduct.supplier||!localProduct.purchase_price){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠ');return;}const product_name=\"\".concat(localProduct.product_size,\" - \").concat(localProduct.product_type);const item={// Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©ØŒ Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ØµÙ†Ø¹Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† null\nseal_type:null,material_type:null,inner_diameter:null,outer_diameter:null,height:null,product_type:'local',product_name:product_name,product_size:localProduct.product_size,product_type_name:localProduct.product_type,supplier:localProduct.supplier,purchase_price:parseFloat(localProduct.purchase_price),selling_price:parseFloat(localProduct.selling_price),quantity:parseInt(currentItem.quantity),unit_price:parseFloat(localProduct.selling_price),// Use selling price as unit price\ntotal_price:parseFloat(localProduct.selling_price)*parseInt(currentItem.quantity),// Store local product details\nlocal_product_details:{product_size:localProduct.product_size,product_type:localProduct.product_type,supplier:localProduct.supplier,purchase_price:parseFloat(localProduct.purchase_price),selling_price:parseFloat(localProduct.selling_price)}};setItems([...items,item]);setLocalProduct({product_size:'',product_type:'',purchase_price:'',selling_price:'',supplier:''});setCurrentItem({seal_type:'RSL',material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',quantity:1,unit_price:'',product_type:'manufactured'});setMeasurements({inner_diameter_mm:'',inner_diameter_inch:'',outer_diameter_mm:'',outer_diameter_inch:'',height_mm:'',height_inch:'',wall_height_mm:'',wall_height_inch:''});}setCompatibilityResults(null);setSelectedMaterial(null);setSelectedMaterials([]);// Ù…Ø³Ø­ Ø§Ù„Ø®Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©\n};const editItem=index=>{var _item$inner_diameter,_item$outer_diameter,_item$height,_item$unit_price,_item$inner_diameter2,_item$outer_diameter2,_item$height2,_item$wall_height;const item=items[index];// Set current item for editing\nsetCurrentItem({seal_type:item.seal_type||'RSL',material_type:item.material_type||'NBR',inner_diameter:((_item$inner_diameter=item.inner_diameter)===null||_item$inner_diameter===void 0?void 0:_item$inner_diameter.toString())||'',outer_diameter:((_item$outer_diameter=item.outer_diameter)===null||_item$outer_diameter===void 0?void 0:_item$outer_diameter.toString())||'',height:((_item$height=item.height)===null||_item$height===void 0?void 0:_item$height.toString())||'',quantity:item.quantity||1,unit_price:((_item$unit_price=item.unit_price)===null||_item$unit_price===void 0?void 0:_item$unit_price.toString())||'',product_type:item.product_type||(item.local_product_details?'local':'manufactured')});// Set measurements for dual input fields (assuming values are in mm from database)\nsetMeasurements({inner_diameter_mm:((_item$inner_diameter2=item.inner_diameter)===null||_item$inner_diameter2===void 0?void 0:_item$inner_diameter2.toString())||'',inner_diameter_inch:mmToInch(item.inner_diameter)||'',outer_diameter_mm:((_item$outer_diameter2=item.outer_diameter)===null||_item$outer_diameter2===void 0?void 0:_item$outer_diameter2.toString())||'',outer_diameter_inch:mmToInch(item.outer_diameter)||'',height_mm:((_item$height2=item.height)===null||_item$height2===void 0?void 0:_item$height2.toString())||'',height_inch:mmToInch(item.height)||'',wall_height_mm:((_item$wall_height=item.wall_height)===null||_item$wall_height===void 0?void 0:_item$wall_height.toString())||'',wall_height_inch:mmToInch(item.wall_height)||''});// Set wall height if exists\nif(item.wall_height){setWallHeight(item.wall_height.toString());}// Set measurement unit if exists\nif(item.measurement_unit){setMeasurementUnit(item.measurement_unit);}// Set local product details if exists\nif(item.local_product_details){var _item$unit_price2;setLocalProduct({product_size:item.local_product_details.product_size||'',product_type:item.local_product_details.product_type||'',purchase_price:'',selling_price:((_item$unit_price2=item.unit_price)===null||_item$unit_price2===void 0?void 0:_item$unit_price2.toString())||'',supplier:''});}// Remove the item being edited\nconst newItems=items.filter((_,i)=>i!==index);setItems(newItems);};const deleteItem=index=>{if(confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ØµØ±ØŸ')){const newItems=items.filter((_,i)=>i!==index);setItems(newItems);}};const[isCreatingInvoice,setIsCreatingInvoice]=useState(false);const createInvoice=async()=>{// Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø± Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nif(isCreatingInvoice){return;}if(!selectedCustomer&&!newCustomer){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø£Ùˆ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯');return;}if(items.length===0){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª Ù„Ù„ÙØ§ØªÙˆØ±Ø©');return;}try{setIsCreatingInvoice(true);// Ø¨Ø¯Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nlet customerId=selectedCustomer;let customerName='';// Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯ Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±\nif(!selectedCustomer&&newCustomer){try{const customerResponse=await axios.post(\"\".concat(API,\"/customers\"),{name:newCustomer,phone:'',address:''});customerId=customerResponse.data.id;customerName=newCustomer;// ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\nfetchCustomers();}catch(customerError){var _customerError$respon;// Check if it's a duplicate customer error\nif(((_customerError$respon=customerError.response)===null||_customerError$respon===void 0?void 0:_customerError$respon.status)===409){// Customer exists, ask user what to do\nconst existingCustomer=customers.find(c=>c.name.toLowerCase()===newCustomer.toLowerCase());if(existingCustomer){if(confirm(\"\\u26A0\\uFE0F \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\\"\".concat(newCustomer,\"\\\" \\u0645\\u0648\\u062C\\u0648\\u062F \\u0628\\u0627\\u0644\\u0641\\u0639\\u0644!\\n\\n\\u0647\\u0644 \\u062A\\u0631\\u064A\\u062F \\u0627\\u0633\\u062A\\u062E\\u062F\\u0627\\u0645 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0627\\u0644\\u0645\\u0648\\u062C\\u0648\\u062F\\u061F\"))){customerId=existingCustomer.id;customerName=existingCustomer.name;setSelectedCustomer(existingCustomer.id);setNewCustomer('');}else{setIsCreatingInvoice(false);return;}}else{alert(\"\\u274C \".concat(customerError.response.data.detail,\"\\n\\n\\u064A\\u0631\\u062C\\u0649 \\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0645\\u0646 \\u0627\\u0644\\u0642\\u0627\\u0626\\u0645\\u0629.\"));setIsCreatingInvoice(false);return;}}else{throw customerError;}}}else{const customer=customers.find(c=>c.id===customerId);customerName=customer?customer.name:'';}// Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ ÙˆØ§Ù„Ø®ØµÙ…\nconst subtotal=items.reduce((sum,item)=>sum+item.total_price,0);const discountAmount=discountType==='percentage'?subtotal*parseFloat(discount||0)/100:parseFloat(discount||0);const totalAfterDiscount=subtotal-discountAmount;// Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nconst invoiceData={customer_id:customerId,customer_name:customerName,invoice_title:invoiceTitle,// Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nsupervisor_name:supervisorName,// Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù\nitems:items,payment_method:paymentMethod,subtotal:subtotal,discount:discountAmount,discount_type:discountType,discount_value:parseFloat(discount||0),total_after_discount:totalAfterDiscount,notes:''};const response=await axios.post(\"\".concat(API,\"/invoices?supervisor_name=\").concat(encodeURIComponent(supervisorName)),invoiceData);if(response.data){alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');// Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\nsetItems([]);setSelectedCustomer('');setNewCustomer('');setSupervisorName('');setInvoiceTitle('');// Ù…Ø³Ø­ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nsetPaymentMethod('Ù†Ù‚Ø¯ÙŠ');setDiscount(0);setDiscountType('amount');setClientType(1);// Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„\n// Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©\nprintInvoice(response.data);}}catch(error){var _error$response7,_error$response7$data;console.error('Error creating invoice:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©: '+(((_error$response7=error.response)===null||_error$response7===void 0?void 0:(_error$response7$data=_error$response7.data)===null||_error$response7$data===void 0?void 0:_error$response7$data.detail)||error.message));}finally{setIsCreatingInvoice(false);// Ø¥Ù†Ù‡Ø§Ø¡ Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡\n}};const printInvoice=invoice=>{const printContent=\"\\n      <!DOCTYPE html>\\n      <html dir=\\\"rtl\\\">\\n      <head>\\n        <meta charset=\\\"UTF-8\\\">\\n        <style>\\n          body {\\n            font-family: Arial, sans-serif;\\n            margin: 0;\\n            padding: 20px;\\n            direction: rtl;\\n            font-size: 15px;\\n          }\\n          .header {\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n            border-bottom: 3px solid #000;\\n            padding-bottom: 10px;\\n            margin-bottom: 20px;\\n          }\\n          .company-info {\\n            text-align: right;\\n          }\\n          .company-name {\\n            font-size: 32px;\\n            font-weight: bold;\\n            color: #000;\\n            margin: 0;\\n          }\\n          .company-subtitle {\\n            font-size: 20px;\\n            margin: 5px 0;\\n            color: #666;\\n          }\\n          .company-details {\\n            font-size: 16px;\\n            margin: 2px 0;\\n            color: #333;\\n          }\\n          .logo-section {\\n            text-align: center;\\n            flex: 1;\\n          }\\n          .invoice-title {\\n            font-size: 20px;\\n            font-weight: bold;\\n            background-color: #ff4444;\\n            color: white;\\n            padding: 8px 20px;\\n            border-radius: 5px;\\n            display: inline-block;\\n            margin-bottom: 10px;\\n          }\\n          .invoice-number {\\n            font-size: 18px;\\n            font-weight: bold;\\n            color: #ff4444;\\n          }\\n          .customer-info {\\n            display: flex;\\n            justify-content: space-between;\\n            margin: 20px 0;\\n          }\\n          .customer-details {\\n            text-align: right;\\n          }\\n          .date-info {\\n            text-align: left;\\n          }\\n          .products-table {\\n            width: 100%;\\n            border-collapse: collapse;\\n            border: 2px solid #000;\\n            margin: 20px 0;\\n          }\\n          .products-table th,\\n          .products-table td {\\n            border: 1px solid #000;\\n            padding: 8px;\\n            text-align: center;\\n          }\\n          .products-table th {\\n            background-color: #f0f0f0;\\n            font-weight: bold;\\n          }\\n          .footer {\\n            margin-top: 30px;\\n            border-top: 1px solid #ccc;\\n            padding-top: 15px;\\n            display: flex;\\n            justify-content: space-between;\\n            font-size: 12px;\\n            color: #666;\\n          }\\n          .total-section {\\n            text-align: left;\\n            margin-top: 10px;\\n          }\\n          .total-amount {\\n            font-size: 18px;\\n            font-weight: bold;\\n            border: 2px solid #000;\\n            padding: 10px;\\n            display: inline-block;\\n            background-color: #f9f9f9;\\n          }\\n          @media print {\\n            body { margin: 0; padding: 10px; }\\n          }\\n        </style>\\n      </head>\\n      <body>\\n        <!-- Header Section -->\\n        <div class=\\\"header\\\">\\n          <div class=\\\"company-info\\\">\\n            <h1 class=\\\"company-name\\\">\\u0634\\u0631\\u0643\\u0629 \\u0645\\u0627\\u0633\\u062A\\u0631 \\u0633\\u064A\\u0644</h1>\\n            <p class=\\\"company-subtitle\\\">\\u062A\\u0635\\u0646\\u064A\\u0639 \\u062C\\u0645\\u064A\\u0639 \\u0623\\u0646\\u0648\\u0627\\u0639 \\u0627\\u0644\\u0623\\u0648\\u064A\\u0644 \\u0633\\u064A\\u0644</p>\\n            <p class=\\\"company-details\\\">\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0623\\u0642\\u0637\\u0627\\u0631 \\u062D\\u062A\\u0649 \\u0665\\u0660\\u0660\\u0645\\u0644</p>\\n            <p class=\\\"company-details\\\">\\u0647\\u064A\\u062F\\u0631\\u0648\\u0644\\u064A\\u0643 - \\u0646\\u064A\\u0648\\u0645\\u0627\\u062A\\u064A\\u0643</p>\\n          </div>\\n          \\n          <div class=\\\"logo-section\\\">\\n            <img src=\\\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\\\" \\n                 alt=\\\"Master Seal Logo\\\" \\n                 style=\\\"max-width: 120px; max-height: 80px; margin-bottom: 10px;\\\">\\n            <div class=\\\"invoice-title\\\">\".concat(invoice.invoice_title||'Ø¹Ø±Ø¶ Ø³Ø¹Ø±',\"</div>\\n            <div class=\\\"invoice-number\\\">\").concat(invoice.invoice_number,\"</div>\\n          </div>\\n        </div>\\n\\n        <!-- Customer and Date Info -->\\n        <div class=\\\"customer-info\\\">\\n          <div class=\\\"customer-details\\\">\\n            <p><strong>\\u0627\\u0644\\u0633\\u0627\\u062F\\u0629:</strong> \").concat(invoice.customer_name,\"</p>\\n            <p><strong>\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646:</strong> \").concat(invoice.customer_address||'........................',\"</p>\\n          </div>\\n          <div class=\\\"date-info\\\">\\n            <p><strong>\\u062A\\u062D\\u0631\\u064A\\u0631 \\u0641\\u064A:</strong> \").concat(new Date(invoice.date).toLocaleDateString('ar-EG'),\"</p>\\n            <p><strong>Date:</strong> \").concat(new Date(invoice.date).toLocaleDateString('en-GB'),\"</p>\\n          </div>\\n        </div>\\n\\n        <!-- Products Table -->\\n        <table class=\\\"products-table\\\">\\n          <thead>\\n            <tr>\\n              <th style=\\\"width: 60px;\\\">\\u0627\\u0644\\u0645\\u0633\\u0644\\u0633\\u0644<br>Item</th>\\n              <th style=\\\"width: 80px;\\\">\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629<br>QTY</th>\\n              <th style=\\\"width: 200px;\\\">Description<br>\\u0627\\u0644\\u0645\\u0648\\u0627\\u0635\\u0641\\u0627\\u062A</th>\\n              <th style=\\\"width: 100px;\\\">\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629<br>Unit Price</th>\\n              <th style=\\\"width: 100px;\\\">\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A<br>Total</th>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            \").concat(invoice.items.map((item,index)=>\"\\n              <tr>\\n                <td>\".concat(index+1,\"</td>\\n                <td>\").concat(item.quantity,\"</td>\\n                <td style=\\\"text-align: right;\\\">\\n                  \").concat(item.local_product_details?\"\".concat(item.local_product_details.product_size,\" - \").concat(item.local_product_details.product_type):\"\".concat(item.seal_type,\" - \").concat(item.material_type,\"<br>\\n                    <small>\").concat(item.inner_diameter,\" \\xD7 \").concat(item.outer_diameter,\" \\xD7 \").concat(item.height,\" \\u0645\\u0645\").concat(item.wall_height?\" (\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629: \".concat(item.wall_height,\" \\u0645\\u0645)\"):\"\",\"</small>\"),\"\\n                </td>\\n                <td>\\u062C.\\u0645 \").concat(item.unit_price.toFixed(2),\"</td>\\n                <td>\\u062C.\\u0645 \").concat(item.total_price.toFixed(2),\"</td>\\n              </tr>\\n            \")).join(''),\"\\n            <!-- Empty rows for additional items -->\\n            \").concat(Array.from({length:Math.max(0,8-invoice.items.length)},(_,i)=>\"\\n              <tr style=\\\"height: 40px;\\\">\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n              </tr>\\n            \").join(''),\"\\n          </tbody>\\n        </table>\\n\\n        <!-- Total Section -->\\n        <div class=\\\"total-section\\\">\\n          <div style=\\\"text-align: left; margin-bottom: 10px;\\\">\\n            \").concat(invoice.subtotal?\"\\n              <div style=\\\"margin-bottom: 5px;\\\">\\n                <span>\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639 \\u0627\\u0644\\u0641\\u0631\\u0639\\u064A: \\u062C.\\u0645 \".concat(invoice.subtotal.toFixed(2),\"</span>\\n              </div>\\n            \"):'',\"\\n            \").concat(invoice.discount&&invoice.discount>0?\"\\n              <div style=\\\"margin-bottom: 5px; color: #d32f2f;\\\">\\n                <span>\\u0627\\u0644\\u062E\\u0635\\u0645: - \\u062C.\\u0645 \".concat(invoice.discount.toFixed(2),\"</span>\\n                \").concat(invoice.discount_type==='percentage'&&invoice.discount_value?\" <small>(\".concat(invoice.discount_value,\"%)</small>\"):'',\"\\n              </div>\\n              <hr style=\\\"margin: 5px 0; border: 1px solid #000;\\\">\\n            \"):'',\"\\n          </div>\\n          <div class=\\\"total-amount\\\">\\n            \\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0646\\u0647\\u0627\\u0626\\u064A: \\u062C.\\u0645 \").concat((invoice.total_after_discount||invoice.total_amount).toFixed(2),\"\\n          </div>\\n        </div>\\n\\n        <!-- Additional Info -->\\n        <div style=\\\"margin-top: 20px; text-align: center; font-size: 12px;\\\">\\n          <p><strong>\\u0645\\u0644\\u062D\\u0648\\u0638\\u0629:</strong> \\u0641\\u0642\\u0637 \\u0648\\u0642\\u062F\\u0631\\u0647</p>\\n          <div style=\\\"height: 30px; border-bottom: 1px solid #000; margin: 10px 40px;\\\"></div>\\n        </div>\\n\\n        <!-- Footer -->\\n        <div class=\\\"footer\\\">\\n          <div>\\n            <p><strong>\\u0627\\u0644\\u062A\\u0648\\u0642\\u064A\\u0639:</strong></p>\\n            <p>\\u0645\\u0648\\u0628\\u0627\\u064A\\u0644: \\u0660\\u0661\\u0660\\u0662\\u0660\\u0666\\u0663\\u0660\\u0666\\u0667\\u0667 - \\u0660\\u0661\\u0660\\u0666\\u0662\\u0663\\u0669\\u0660\\u0668\\u0667\\u0660</p>\\n            <p>\\u062A\\u0644\\u064A\\u0641\\u0648\\u0646: \\u0660\\u0661\\u0660\\u0662\\u0660\\u0666\\u0663\\u0660\\u0666\\u0667\\u0667</p>\\n          </div>\\n          <div style=\\\"text-align: left;\\\">\\n            <p><strong>\\u0627\\u0644\\u0645\\u0633\\u062A\\u0644\\u0645:</strong></p>\\n            <p>\\u0627\\u0644\\u062D\\u0631\\u0641\\u064A\\u064A\\u0646 - \\u0627\\u0644\\u0633\\u0644\\u0627\\u0645 - \\u0623\\u0645\\u0627\\u0645 \\u0627\\u0644\\u0633\\u0648\\u0628\\u0631 \\u062C\\u064A\\u062A</p>\\n            <p>\\u0645\\u0648\\u0628\\u0627\\u064A\\u0644: \\u0660\\u0661\\u0660\\u0662\\u0660\\u0666\\u0663\\u0660\\u0666\\u0667\\u0667 - \\u0660\\u0661\\u0660\\u0666\\u0662\\u0663\\u0669\\u0660\\u0668\\u0667\\u0660</p>\\n          </div>\\n        </div>\\n\\n        <!-- Note -->\\n        <div style=\\\"text-align: center; margin-top: 20px; font-size: 11px; color: #666;\\\">\\n          <p>\\u064A\\u0642\\u0631 \\u0627\\u0644\\u0645\\u0634\\u062A\\u0631\\u064A \\u0628\\u0623\\u0646\\u0647 \\u0642\\u0627\\u0645 \\u0628\\u0645\\u0639\\u0627\\u064A\\u0646\\u0629 \\u0627\\u0644\\u0628\\u0636\\u0627\\u0639\\u0629 \\u0648\\u0642\\u0628\\u0648\\u0644\\u0647\\u0627</p>\\n        </div>\\n      </body>\\n      </html>\\n    \");const printWindow=window.open('','_blank');printWindow.document.write(printContent);printWindow.document.close();printWindow.print();};const clearAllInvoices=async()=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.'))return;try{setItems([]);alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±');}catch(error){alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-6\",children:\"\\u0627\\u0644\\u0645\\u0628\\u064A\\u0639\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"select\",{value:selectedCustomer,onChange:e=>setSelectedCustomer(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),customers.map(customer=>/*#__PURE__*/_jsx(\"option\",{value:customer.id,children:customer.name},customer.id))]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newCustomer,onChange:e=>{const value=e.target.value;setNewCustomer(value);// Check for exact match and auto-select\nconst exactMatch=customers.find(c=>c.name.toLowerCase()===value.toLowerCase());if(exactMatch){// Auto-select the existing customer\nsetSelectedCustomer(exactMatch.id);setNewCustomer('');e.target.style.borderColor='';e.target.style.backgroundColor='';// Show brief confirmation\nconst tempMsg=document.createElement('div');tempMsg.textContent=\"\\u2705 \\u062A\\u0645 \\u0627\\u062E\\u062A\\u064A\\u0627\\u0631: \".concat(exactMatch.name);tempMsg.className='text-xs text-green-600 mt-1';e.target.parentElement.appendChild(tempMsg);setTimeout(()=>tempMsg.remove(),2000);}else{// Check for potential duplicates (partial match)\nconst partialMatch=customers.some(c=>c.name.toLowerCase().includes(value.toLowerCase())&&value.length>2);if(partialMatch&&value){e.target.style.borderColor='orange';e.target.style.backgroundColor='#fff3cd';}else{e.target.style.borderColor='';e.target.style.backgroundColor='';}}},placeholder:\"\\u0627\\u0633\\u0645 \\u0639\\u0645\\u064A\\u0644 \\u062C\\u062F\\u064A\\u062F\",className:\"w-full p-2 border border-gray-300 rounded\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0639\\u0645\\u064A\\u0644 \\u062C\\u062F\\u064A\\u062F\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0634\\u0631\\u0641 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:supervisorName,onChange:e=>setSupervisorName(e.target.value),placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0634\\u0631\\u0641 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\",className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:invoiceTitle,onChange:e=>setInvoiceTitle(e.target.value),placeholder:\"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\",className:\"w-full p-2 border border-gray-300 rounded\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsxs(\"select\",{value:currentItem.product_type,onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{product_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"manufactured\",children:\"\\u0645\\u0646\\u062A\\u062C \\u062A\\u0635\\u0646\\u064A\\u0639\"}),/*#__PURE__*/_jsx(\"option\",{value:\"local\",children:\"\\u0645\\u0646\\u062A\\u062C \\u0645\\u062D\\u0644\\u064A\"})]})]}),currentItem.product_type==='manufactured'?/*#__PURE__*/// Manufacturing Product Form\n_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"select\",{value:currentItem.seal_type,onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{seal_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:sealTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"select\",{value:currentItem.material_type,onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{material_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:materialTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0645\\u0644\\u064A\\u0645\\u062A\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:measurements.inner_diameter_mm,onChange:e=>handleMeasurementChange('inner_diameter',e.target.value,'mm'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0645\\u0645\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0628\\u0648\\u0635\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.0001\",value:measurements.inner_diameter_inch,onChange:e=>handleMeasurementChange('inner_diameter',e.target.value,'inch'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0628\\u0648\\u0635\\u0629\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0645\\u0644\\u064A\\u0645\\u062A\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:measurements.outer_diameter_mm,onChange:e=>handleMeasurementChange('outer_diameter',e.target.value,'mm'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0645\\u0645\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0628\\u0648\\u0635\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.0001\",value:measurements.outer_diameter_inch,onChange:e=>handleMeasurementChange('outer_diameter',e.target.value,'inch'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0628\\u0648\\u0635\\u0629\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0645\\u0644\\u064A\\u0645\\u062A\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:measurements.height_mm,onChange:e=>handleMeasurementChange('height',e.target.value,'mm'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0645\\u0645\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0628\\u0648\\u0635\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.0001\",value:measurements.height_inch,onChange:e=>handleMeasurementChange('height',e.target.value,'inch'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0628\\u0648\\u0635\\u0629\"})]})]})]}),currentItem.seal_type&&currentItem.seal_type.startsWith('W')&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0645\\u0644\\u064A\\u0645\\u062A\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:measurements.wall_height_mm,onChange:e=>handleMeasurementChange('wall_height',e.target.value,'mm'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629 \\u0628\\u0627\\u0644\\u0645\\u0644\\u064A\\u0645\\u062A\\u0631\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs text-gray-600 mb-1\",children:\"\\u0628\\u0648\\u0635\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.0001\",value:measurements.wall_height_inch,onChange:e=>handleMeasurementChange('wall_height',e.target.value,'inch'),className:\"w-full p-2 border border-gray-300 rounded text-sm\",placeholder:\"\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629 \\u0628\\u0627\\u0644\\u0628\\u0648\\u0635\\u0629\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:currentItem.quantity,onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{quantity:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0644\\u0644\\u062A\\u0633\\u0639\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"select\",{value:clientType,onChange:e=>setClientType(parseInt(e.target.value)),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:1,children:\"\\u0639\\u0645\\u064A\\u0644 1\"}),/*#__PURE__*/_jsx(\"option\",{value:2,children:\"\\u0639\\u0645\\u064A\\u0644 2\"}),/*#__PURE__*/_jsx(\"option\",{value:3,children:\"\\u0639\\u0645\\u064A\\u0644 3\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0633\\u064A\\u0644 \\u0627\\u0644\\u0648\\u0627\\u062D\\u062F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:currentItem.unit_price,onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{unit_price:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"textarea\",{value:currentItem.notes||'',onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{notes:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",rows:\"2\",placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0625\\u0636\\u0627\\u0641\\u064A\\u0629...\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:checkCompatibility,className:\"w-full bg-yellow-500 text-white p-2 rounded hover:bg-yellow-600\",children:\"\\u0641\\u062D\\u0635 \\u0627\\u0644\\u062A\\u0648\\u0627\\u0641\\u0642\"})})]})}):/*#__PURE__*/// Local Product Form\n_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0642\\u0627\\u0633 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:localProduct.product_size,onChange:e=>setLocalProduct(_objectSpread(_objectSpread({},localProduct),{},{product_size:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0645\\u0642\\u0627\\u0633 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:localProduct.product_type,onChange:e=>setLocalProduct(_objectSpread(_objectSpread({},localProduct),{},{product_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),/*#__PURE__*/_jsxs(\"select\",{value:localProduct.supplier,onChange:e=>setLocalProduct(_objectSpread(_objectSpread({},localProduct),{},{supplier:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062F\"}),suppliers.map(supplier=>/*#__PURE__*/_jsx(\"option\",{value:supplier.name,children:supplier.name},supplier.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0634\\u0631\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:localProduct.purchase_price,onChange:e=>setLocalProduct(_objectSpread(_objectSpread({},localProduct),{},{purchase_price:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0634\\u0631\\u0627\\u0621\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0628\\u064A\\u0639\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:localProduct.selling_price,onChange:e=>setLocalProduct(_objectSpread(_objectSpread({},localProduct),{},{selling_price:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0628\\u064A\\u0639\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:currentItem.quantity,onChange:e=>setCurrentItem(_objectSpread(_objectSpread({},currentItem),{},{quantity:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:addItem,className:\"w-full bg-green-500 text-white p-2 rounded hover:bg-green-600 mt-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0644\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"})]})]}),compatibilityResults&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0646\\u062A\\u0627\\u0626\\u062C \\u0641\\u062D\\u0635 \\u0627\\u0644\\u062A\\u0648\\u0627\\u0641\\u0642\"}),compatibilityResults.compatible_materials.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\uD83D\\uDCE6 \\u0646\\u062A\\u0627\\u0626\\u062C \\u0641\\u062D\\u0635 \\u0627\\u0644\\u062A\\u0648\\u0627\\u0641\\u0642\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mb-2\",children:[\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0627\\u062A \\u0648\\u062D\\u062F\\u062F \\u0639\\u062F\\u062F \\u0627\\u0644\\u0633\\u064A\\u0644\\u0627\\u062A \\u0645\\u0646 \\u0643\\u0644 \\u062E\\u0627\\u0645\\u0629 (\\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628: \",currentItem.quantity,\" \\u0633\\u064A\\u0644)\"]}),selectedMaterials.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-3 bg-blue-50 rounded border\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium text-blue-800 mb-2\",children:\"\\u0627\\u0644\\u062E\\u0627\\u0645\\u0627\\u062A \\u0627\\u0644\\u0645\\u062E\\u062A\\u0627\\u0631\\u0629:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:selectedMaterials.map((selected,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between bg-white p-2 rounded border\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm\",children:[selected.material.unit_code,\" - \",selected.material.material_type,selected.material.inner_diameter,\"\\xD7\",selected.material.outer_diameter,\"\\xD7\",selected.material.height]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",max:Math.floor(selected.material.height/(parseFloat(currentItem.height)+2)),value:selected.seals,onChange:e=>{const newSelected=[...selectedMaterials];newSelected[index].seals=parseInt(e.target.value)||0;setSelectedMaterials(newSelected);},className:\"w-16 p-1 border rounded text-center\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const newSelected=selectedMaterials.filter((_,i)=>i!==index);setSelectedMaterials(newSelected);},className:\"text-red-600 hover:text-red-800 text-sm\",children:\"\\u2715\"})]})]},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-sm\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639: \",selectedMaterials.reduce((sum,sel)=>sum+sel.seals,0),\" / \",currentItem.quantity,\" \\u0633\\u064A\\u0644\"]}),selectedMaterials.reduce((sum,sel)=>sum+sel.seals,0)===parseInt(currentItem.quantity)&&/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600 ml-2\",children:\"\\u2713 \\u0645\\u0643\\u062A\\u0645\\u0644\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2 max-h-48 overflow-y-auto\",children:compatibilityResults.compatible_materials.map((material,index)=>{const isSelected=selectedMaterials.some(sel=>sel.material.unit_code===material.unit_code&&sel.material.inner_diameter===material.inner_diameter&&sel.material.outer_diameter===material.outer_diameter);const maxSeals=Math.floor(material.height/(parseFloat(currentItem.height)+2));const remainingSeals=parseInt(currentItem.quantity)-selectedMaterials.reduce((sum,sel)=>sum+sel.seals,0);return/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded border transition-colors \".concat(isSelected?'bg-blue-100 border-blue-300':'bg-gray-50 hover:bg-gray-100'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-blue-600\",children:[material.unit_code,\" - \",material.material_type]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"\\u0627\\u0644\\u0623\\u0628\\u0639\\u0627\\u062F: \",material.inner_diameter,\" \\xD7 \",material.outer_diameter,\" \\xD7 \",material.height,\" \\u0645\\u0645\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-green-600\",children:[\"\\u064A\\u0645\\u0643\\u0646 \\u0625\\u0646\\u062A\\u0627\\u062C: \",maxSeals,\" \\u0633\\u064A\\u0644 \\u0643\\u062D\\u062F \\u0623\\u0642\\u0635\\u0649\"]}),material.score&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[\"\\u0646\\u0633\\u0628\\u0629 \\u0627\\u0644\\u062A\\u0648\\u0627\\u0641\\u0642: \",material.score,\"%\"]})]}),!isSelected&&remainingSeals>0&&maxSeals>0&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const newSelection={material:material,seals:Math.min(maxSeals,remainingSeals)};setSelectedMaterials([...selectedMaterials,newSelection]);},className:\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\",children:\"\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\"}),isSelected&&/*#__PURE__*/_jsx(\"div\",{className:\"text-blue-600 text-sm font-medium\",children:\"\\u2713 \\u0645\\u062E\\u062A\\u0627\\u0631\\u0629\"}),!isSelected&&remainingSeals<=0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-sm\",children:\"\\u0645\\u0643\\u062A\\u0645\\u0644\"})]})},index);})}),selectedMaterials.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const totalSeals=selectedMaterials.reduce((sum,sel)=>sum+sel.seals,0);if(totalSeals!==parseInt(currentItem.quantity)){alert(\"\\u26A0\\uFE0F \\u0645\\u062C\\u0645\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\\u0627\\u062A \\u0627\\u0644\\u0645\\u062E\\u062A\\u0627\\u0631\\u0629 (\".concat(totalSeals,\") \\u0644\\u0627 \\u064A\\u0633\\u0627\\u0648\\u064A \\u0627\\u0644\\u0639\\u062F\\u062F \\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628 (\").concat(currentItem.quantity,\")\"));return;}// ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± ÙˆØ­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø±\nconfirmMultiMaterialSelection();},className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",disabled:selectedMaterials.reduce((sum,sel)=>sum+sel.seals,0)!==parseInt(currentItem.quantity),children:\"\\u062A\\u0623\\u0643\\u064A\\u062F \\u0627\\u0644\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedMaterials([]);},className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621 \\u0627\\u0644\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\"})]})]}),compatibilityResults.compatible_products.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A \\u0627\\u0644\\u062C\\u0627\\u0647\\u0632\\u0629:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:compatibilityResults.compatible_products.map((product,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 border border-blue-300 bg-blue-50 rounded cursor-pointer hover:bg-blue-100\",onClick:()=>setSelectedMaterial({unit_code:\"FINISHED-\".concat(product.id),material_type:product.material_type,seal_type:product.seal_type,inner_diameter:product.inner_diameter,outer_diameter:product.outer_diameter,height:product.height,is_finished_product:true}),children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0646\\u0648\\u0639:\"}),\" \",product.seal_type,\" - \",product.material_type]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0645\\u0642\\u0627\\u0633:\"}),\" \",product.inner_diameter,\" \\xD7 \",product.outer_diameter,\" \\xD7 \",product.height]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629:\"}),\" \",product.quantity]})]},index))})]}),selectedMaterial&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 p-3 bg-blue-100 rounded\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold text-blue-800\",children:[\"\\u062A\\u0645 \\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629: \",selectedMaterial.unit_code,\" (\",selectedMaterial.material_type,\")\"]})})]}),items.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0623\\u062E\\u064A\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0642\\u0627\\u0633\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0633\\u0639\\u0631\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:items.map((item,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.local_product_details?item.local_product_details.product_type:item.seal_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.local_product_details?'Ù…Ø­Ù„ÙŠ':item.material_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.local_product_details?\"\".concat(item.local_product_details.product_size,\" - \").concat(item.local_product_details.product_type):\"\".concat(item.original_inner_diameter||item.inner_diameter,\" \\xD7 \").concat(item.original_outer_diameter||item.outer_diameter,\" \\xD7 \").concat(item.original_height||item.height).concat(item.original_wall_height?\" (\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629: \".concat(item.original_wall_height,\")\"):item.wall_height?\" (\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629: \".concat(item.wall_height,\")\"):'',\" \").concat(item.measurement_unit||'Ù…Ù…')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.quantity}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",item.unit_price]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",item.total_price]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editItem(index),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",title:\"\\u062A\\u062D\\u0631\\u064A\\u0631\",children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteItem(index),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",title:\"\\u062D\\u0630\\u0641\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]})})]},index))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639\"}),/*#__PURE__*/_jsxs(\"select\",{value:paymentMethod,onChange:e=>setPaymentMethod(e.target.value),className:\"p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u0646\\u0642\\u062F\\u064A\",children:\"\\u0646\\u0642\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0622\\u062C\\u0644\",children:\"\\u0622\\u062C\\u0644\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 010\",children:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 010\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0643\\u0627\\u0634 0100\",children:\"\\u0643\\u0627\\u0634 0100\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0627\\u0646\\u0633\\u062A\\u0627\\u0628\\u0627\\u064A\",children:\"\\u0627\\u0646\\u0633\\u062A\\u0627\\u0628\\u0627\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u064A\\u062F \\u0627\\u0644\\u0635\\u0627\\u0648\\u064A\",children:\"\\u064A\\u062F \\u0627\\u0644\\u0635\\u0627\\u0648\\u064A\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 p-4 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0635\\u0645\"}),/*#__PURE__*/_jsxs(\"select\",{value:discountType,onChange:e=>setDiscountType(e.target.value),className:\"p-2 border border-gray-300 rounded w-full\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"amount\",children:\"\\u0645\\u0628\\u0644\\u063A \\u062B\\u0627\\u0628\\u062A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"percentage\",children:\"\\u0646\\u0633\\u0628\\u0629 \\u0645\\u0626\\u0648\\u064A\\u0629\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium mb-1\",children:[\"\\u0642\\u064A\\u0645\\u0629 \\u0627\\u0644\\u062E\\u0635\\u0645 \",discountType==='percentage'?'(%)':'(Ø¬.Ù…)']}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:discount,onChange:e=>setDiscount(e.target.value),className:\"p-2 border border-gray-300 rounded w-full\",placeholder:\"0\",min:\"0\",step:discountType==='percentage'?'0.1':'0.01'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u062E\\u0635\\u0645\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-white border border-gray-300 rounded w-full\",children:[\"\\u062C.\\u0645 \",(()=>{const subtotal=items.reduce((sum,item)=>sum+item.total_price,0);const discountAmount=discountType==='percentage'?subtotal*parseFloat(discount||0)/100:parseFloat(discount||0);return discountAmount.toFixed(2);})()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 bg-blue-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639 \\u0627\\u0644\\u0641\\u0631\\u0639\\u064A:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg font-semibold\",children:[\"\\u062C.\\u0645 \",items.reduce((sum,item)=>sum+item.total_price,0).toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:\"\\u0627\\u0644\\u062E\\u0635\\u0645:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg font-semibold text-red-600\",children:[\"- \\u062C.\\u0645 \",(()=>{const subtotal=items.reduce((sum,item)=>sum+item.total_price,0);const discountAmount=discountType==='percentage'?subtotal*parseFloat(discount||0)/100:parseFloat(discount||0);return discountAmount.toFixed(2);})()]})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl font-bold\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0646\\u0647\\u0627\\u0626\\u064A:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xl font-bold text-green-600\",children:[\"\\u062C.\\u0645 \",(()=>{const subtotal=items.reduce((sum,item)=>sum+item.total_price,0);const discountAmount=discountType==='percentage'?subtotal*parseFloat(discount||0)/100:parseFloat(discount||0);return(subtotal-discountAmount).toFixed(2);})()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xl font-bold\",style:{display:'none'},children:[\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A: \\u062C.\\u0645 \",items.reduce((sum,item)=>sum+item.total_price,0).toFixed(2)]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:createInvoice,disabled:isCreatingInvoice,className:\"w-full p-3 rounded mt-4 text-lg font-semibold \".concat(isCreatingInvoice?'bg-gray-400 text-gray-600 cursor-not-allowed':'bg-green-500 text-white hover:bg-green-600'),children:isCreatingInvoice?'Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©...':'Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©'})]})]});};// Simple placeholder components for other pages\n// Inventory Component will be replaced with new advanced version above\n// Stock Component (Old Inventory functionality for Raw Materials and Finished Products)\nconst Stock=()=>{const[rawMaterials,setRawMaterials]=useState([]);const[finishedProducts,setFinishedProducts]=useState([]);const[searchTerm,setSearchTerm]=useState('');// Ù„Ù„Ø¨Ø­Ø«\nconst[newRawMaterial,setNewRawMaterial]=useState({material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',pieces_count:'',cost_per_mm:''});const[newFinishedProduct,setNewFinishedProduct]=useState({seal_type:'RSL',material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',quantity:'',unit_price:''});const materialTypes=['NBR','BUR','BT','VT','BOOM'];const sealTypes=['RSL','RS','RSS','RSE','B17','B3','B14','B1','R15','R17','W1','W4','W5','W11','WBT','XR','CH','VR'];// Ø¯Ø§Ù„Ø© ØªØµÙÙŠØ© Ø§Ù„Ø¨Ø­Ø«\nconst filteredRawMaterials=rawMaterials.filter(material=>material.material_type.toLowerCase().includes(searchTerm.toLowerCase())||material.unit_code.toLowerCase().includes(searchTerm.toLowerCase())||material.inner_diameter.toString().includes(searchTerm)||material.outer_diameter.toString().includes(searchTerm)||material.height.toString().includes(searchTerm)).sort((a,b)=>{// ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\nconst materialPriority={'BUR':1,'NBR':2,'BT':3,'BOOM':4,'VT':5};const aPriority=materialPriority[a.material_type]||6;const bPriority=materialPriority[b.material_type]||6;if(aPriority!==bPriority){return aPriority-bPriority;}// Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)\nif(a.inner_diameter!==b.inner_diameter){return a.inner_diameter-b.inner_diameter;}return a.outer_diameter-b.outer_diameter;});const filteredFinishedProducts=finishedProducts.filter(product=>product.seal_type.toLowerCase().includes(searchTerm.toLowerCase())||product.material_type.toLowerCase().includes(searchTerm.toLowerCase())||product.inner_diameter.toString().includes(searchTerm)||product.outer_diameter.toString().includes(searchTerm)||product.height.toString().includes(searchTerm)).sort((a,b)=>{// ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\nconst materialPriority={'BUR':1,'NBR':2,'BT':3,'BOOM':4,'VT':5};const aPriority=materialPriority[a.material_type]||6;const bPriority=materialPriority[b.material_type]||6;if(aPriority!==bPriority){return aPriority-bPriority;}// Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)\nif(a.inner_diameter!==b.inner_diameter){return a.inner_diameter-b.inner_diameter;}return a.outer_diameter-b.outer_diameter;});useEffect(()=>{fetchRawMaterials();fetchFinishedProducts();},[]);const fetchRawMaterials=async()=>{try{const response=await axios.get(\"\".concat(API,\"/raw-materials\"));setRawMaterials(response.data);}catch(error){console.error('Error fetching raw materials:',error);}};const fetchFinishedProducts=async()=>{try{const response=await axios.get(\"\".concat(API,\"/finished-products\"));setFinishedProducts(response.data);}catch(error){console.error('Error fetching finished products:',error);}};const addRawMaterial=async()=>{if(!newRawMaterial.inner_diameter||!newRawMaterial.outer_diameter||!newRawMaterial.height||!newRawMaterial.pieces_count||!newRawMaterial.cost_per_mm){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{const rawMaterial={material_type:newRawMaterial.material_type,inner_diameter:parseFloat(newRawMaterial.inner_diameter),outer_diameter:parseFloat(newRawMaterial.outer_diameter),height:parseFloat(newRawMaterial.height),pieces_count:parseInt(newRawMaterial.pieces_count),cost_per_mm:parseFloat(newRawMaterial.cost_per_mm)// unit_code will be generated automatically by backend\n};let response;if(newRawMaterial.id){// Update existing material\nresponse=await axios.put(\"\".concat(API,\"/raw-materials/\").concat(newRawMaterial.id),rawMaterial);alert(\"\\u062A\\u0645 \\u062A\\u062D\\u062F\\u064A\\u062B \\u0627\\u0644\\u0645\\u0627\\u062F\\u0629 \\u0627\\u0644\\u062E\\u0627\\u0645 \\u0628\\u0646\\u062C\\u0627\\u062D. \\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629: \".concat(response.data.unit_code));}else{// Add new material\nresponse=await axios.post(\"\".concat(API,\"/raw-materials\"),rawMaterial);alert(\"\\u062A\\u0645 \\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0627\\u062F\\u0629 \\u0627\\u0644\\u062E\\u0627\\u0645 \\u0628\\u0646\\u062C\\u0627\\u062D. \\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629: \".concat(response.data.unit_code));}fetchRawMaterials();setNewRawMaterial({material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',pieces_count:'',cost_per_mm:''});}catch(error){var _error$response8,_error$response8$data;console.error('Error saving raw material:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…: '+(((_error$response8=error.response)===null||_error$response8===void 0?void 0:(_error$response8$data=_error$response8.data)===null||_error$response8$data===void 0?void 0:_error$response8$data.detail)||error.message));}};const clearAllRawMaterials=async()=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…ØŸ')){return;}try{await axios.delete(\"\".concat(API,\"/raw-materials/clear-all\"));fetchRawMaterials();alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…');}catch(error){console.error('Error clearing raw materials:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…');}};const deleteRawMaterial=async materialId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…ØŸ')){return;}try{await axios.delete(\"\".concat(API,\"/raw-materials/\").concat(materialId));fetchRawMaterials();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…');}catch(error){console.error('Error deleting raw material:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…');}};const editRawMaterial=material=>{// Fill the form with the material data for editing\nsetNewRawMaterial({id:material.id,material_type:material.material_type,inner_diameter:material.inner_diameter.toString(),outer_diameter:material.outer_diameter.toString(),height:material.height.toString(),pieces_count:material.pieces_count.toString(),cost_per_mm:material.cost_per_mm.toString()});};const handleFileImport=async event=>{const file=event.target.files[0];if(!file)return;const formData=new FormData();formData.append('file',file);try{const response=await axios.post(\"\".concat(API,\"/excel/import/raw-materials\"),formData,{headers:{'Content-Type':'multipart/form-data'}});alert(response.data.message);fetchRawMaterials();// Refresh the raw materials list\nevent.target.value='';// Clear file input\n}catch(error){var _error$response9,_error$response9$data;console.error('Error importing file:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù: '+(((_error$response9=error.response)===null||_error$response9===void 0?void 0:(_error$response9$data=_error$response9.data)===null||_error$response9$data===void 0?void 0:_error$response9$data.detail)||error.message));}};const handleFileExport=async()=>{try{const response=await axios.get(\"\".concat(API,\"/excel/export/raw-materials\"),{responseType:'blob'});// Create download link\nconst url=window.URL.createObjectURL(new Blob([response.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download',\"raw_materials_export_\".concat(new Date().toISOString().split('T')[0],\".xlsx\"));document.body.appendChild(link);link.click();document.body.removeChild(link);window.URL.revokeObjectURL(url);}catch(error){console.error('Error exporting file:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù');}};const addFinishedProduct=async()=>{if(!newFinishedProduct.inner_diameter||!newFinishedProduct.outer_diameter||!newFinishedProduct.height||!newFinishedProduct.quantity||!newFinishedProduct.unit_price){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{const finishedProduct={seal_type:newFinishedProduct.seal_type,material_type:newFinishedProduct.material_type,inner_diameter:parseFloat(newFinishedProduct.inner_diameter),outer_diameter:parseFloat(newFinishedProduct.outer_diameter),height:parseFloat(newFinishedProduct.height),quantity:parseInt(newFinishedProduct.quantity),unit_price:parseFloat(newFinishedProduct.unit_price)};if(newFinishedProduct.id){// Update existing product\nawait axios.put(\"\".concat(API,\"/finished-products/\").concat(newFinishedProduct.id),finishedProduct);alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¨Ù†Ø¬Ø§Ø­');}else{// Add new product\nawait axios.post(\"\".concat(API,\"/finished-products\"),finishedProduct);alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¨Ù†Ø¬Ø§Ø­');}fetchFinishedProducts();setNewFinishedProduct({seal_type:'RSL',material_type:'NBR',inner_diameter:'',outer_diameter:'',height:'',quantity:'',unit_price:''});}catch(error){console.error('Error saving finished product:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ');}};const editFinishedProduct=product=>{// Fill the form with the product data for editing\nsetNewFinishedProduct({id:product.id,seal_type:product.seal_type,material_type:product.material_type,inner_diameter:product.inner_diameter.toString(),outer_diameter:product.outer_diameter.toString(),height:product.height.toString(),quantity:product.quantity.toString(),unit_price:product.unit_price.toString()});};const deleteFinishedProduct=async productId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØŸ')){return;}try{await axios.delete(\"\".concat(API,\"/finished-products/\").concat(productId));fetchFinishedProducts();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ');}catch(error){console.error('Error deleting finished product:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-6\",children:\"\\u0645\\u062E\\u0632\\u0646 \\u0625\\u0646\\u062A\\u0627\\u062C\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:\"\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u062E\\u0627\\u0645\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:/*#__PURE__*/_jsx(\"button\",{onClick:clearAllRawMaterials,className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg mb-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-4\",children:\"\\uD83D\\uDCC1 \\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0648\\u062A\\u0635\\u062F\\u064A\\u0631 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u062E\\u0627\\u0645\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-4 items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 cursor-pointer\",children:[\"\\uD83D\\uDCE4 \\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0645\\u0646 Excel\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".xlsx,.xls\",onChange:handleFileImport,className:\"hidden\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"(.xlsx \\u0623\\u0648 .xls)\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleFileExport,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\uD83D\\uDCE5 \\u062A\\u0635\\u062F\\u064A\\u0631 \\u0625\\u0644\\u0649 Excel\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600 bg-white p-2 rounded border\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u062A\\u0646\\u0633\\u064A\\u0642 \\u0627\\u0644\\u0645\\u0644\\u0641 \\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628:\"}),/*#__PURE__*/_jsx(\"br\",{}),\"material_type, inner_diameter, outer_diameter, height, pieces_count, unit_code, cost_per_mm\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"select\",{value:newRawMaterial.material_type,onChange:e=>setNewRawMaterial(_objectSpread(_objectSpread({},newRawMaterial),{},{material_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:materialTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newRawMaterial.inner_diameter,onChange:e=>setNewRawMaterial(_objectSpread(_objectSpread({},newRawMaterial),{},{inner_diameter:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newRawMaterial.outer_diameter,onChange:e=>setNewRawMaterial(_objectSpread(_objectSpread({},newRawMaterial),{},{outer_diameter:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 (\\u0645\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newRawMaterial.height,onChange:e=>setNewRawMaterial(_objectSpread(_objectSpread({},newRawMaterial),{},{height:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0642\\u0637\\u0639\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newRawMaterial.pieces_count,onChange:e=>setNewRawMaterial(_objectSpread(_objectSpread({},newRawMaterial),{},{pieces_count:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0644\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newRawMaterial.cost_per_mm,onChange:e=>setNewRawMaterial(_objectSpread(_objectSpread({},newRawMaterial),{},{cost_per_mm:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-4\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0629: \\u0633\\u064A\\u062A\\u0645 \\u062A\\u0648\\u0644\\u064A\\u062F \\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629 \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0627\\u064B \\u062D\\u0633\\u0628 \\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629 \\u0648\\u0627\\u0644\\u0645\\u0648\\u0627\\u0635\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:addRawMaterial,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0627\\u062F\\u0629 \\u062E\\u0627\\u0645\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"\\u0628\\u062D\\u062B \\u0641\\u064A \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u062E\\u0627\\u0645 (\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\\u060C \\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629\\u060C \\u0627\\u0644\\u0645\\u0642\\u0627\\u0633\\u0627\\u062A...)\",className:\"w-full p-3 border border-gray-300 rounded-lg\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0642\\u0637\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0644\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredRawMaterials.map(material=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.material_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.inner_diameter}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.outer_diameter}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.height}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.pieces_count}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.unit_code}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:material.cost_per_mm}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editRawMaterial(material),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",title:\"\\u062A\\u062D\\u0631\\u064A\\u0631\",children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteRawMaterial(material.id),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",title:\"\\u062D\\u0630\\u0641\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]})})]},material.id))})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0645\\u062E\\u0632\\u0648\\u0646 \\u0627\\u0644\\u0625\\u0646\\u062A\\u0627\\u062C \\u0627\\u0644\\u062A\\u0627\\u0645\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"select\",{value:newFinishedProduct.seal_type,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{seal_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:sealTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"select\",{value:newFinishedProduct.material_type,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{material_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:materialTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newFinishedProduct.inner_diameter,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{inner_diameter:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newFinishedProduct.outer_diameter,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{outer_diameter:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newFinishedProduct.height,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{height:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newFinishedProduct.quantity,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{quantity:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newFinishedProduct.unit_price,onChange:e=>setNewFinishedProduct(_objectSpread(_objectSpread({},newFinishedProduct),{},{unit_price:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addFinishedProduct,className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0646\\u062A\\u062C \\u0646\\u0647\\u0627\\u0626\\u064A\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredFinishedProducts.map(product=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.seal_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.material_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.inner_diameter}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.outer_diameter}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.height}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.quantity}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:product.unit_price}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editFinishedProduct(product),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",title:\"\\u062A\\u062D\\u0631\\u064A\\u0631\",children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteFinishedProduct(product.id),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",title:\"\\u062D\\u0630\\u0641\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]})})]},product.id))})]})})]})]});};// Deferred Payments Component\nconst Deferred=()=>{var _selectedInvoice$rema;const[unpaidInvoices,setUnpaidInvoices]=useState([]);const[customers,setCustomers]=useState([]);const[selectedInvoice,setSelectedInvoice]=useState(null);const[paymentAmount,setPaymentAmount]=useState('');const[paymentMethod,setPaymentMethod]=useState('Ù†Ù‚Ø¯ÙŠ');const[paymentNotes,setPaymentNotes]=useState('');const[searchTerm,setSearchTerm]=useState('');// Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª Ù„ÙƒÙ„ Ø¹Ù…ÙŠÙ„\nconst[customerTotals,setCustomerTotals]=useState({});useEffect(()=>{fetchUnpaidInvoices();fetchCustomers();},[]);useEffect(()=>{// Ø­Ø³Ø§Ø¨ Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\nconst totals={};filteredInvoices.forEach(invoice=>{const customerName=invoice.customer_name;if(!totals[customerName]){totals[customerName]={totalAmount:0,invoiceCount:0};}totals[customerName].totalAmount+=invoice.remaining_amount||invoice.total_amount;totals[customerName].invoiceCount+=1;});setCustomerTotals(totals);},[unpaidInvoices,searchTerm]);// ÙÙ„ØªØ±Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø­Ø³Ø¨ Ø§Ù„Ø¨Ø­Ø«\nconst filteredInvoices=unpaidInvoices.filter(invoice=>invoice.customer_name.toLowerCase().includes(searchTerm.toLowerCase())||invoice.invoice_number.toLowerCase().includes(searchTerm.toLowerCase())||invoice.invoice_title&&invoice.invoice_title.toLowerCase().includes(searchTerm.toLowerCase()));useEffect(()=>{fetchUnpaidInvoices();fetchCustomers();},[]);const fetchUnpaidInvoices=async()=>{try{const response=await axios.get(\"\".concat(API,\"/invoices\"));const invoices=response.data.filter(invoice=>// ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¢Ø¬Ù„Ø© Ø£Ùˆ Ù„Ù‡Ø§ Ù…Ø¨Ù„Øº Ù…Ø³ØªØ­Ù‚\n(invoice.payment_method==='Ø¢Ø¬Ù„'||invoice.remaining_amount>0)&&(invoice.status==='ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©'||invoice.status==='Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹'||invoice.status==='Ø§Ù†ØªØ¸Ø§Ø±'||invoice.remaining_amount>0));setUnpaidInvoices(invoices);}catch(error){console.error('Error fetching unpaid invoices:',error);}};const fetchCustomers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/customers\"));// Sort customers alphabetically by name\nconst sortedCustomers=(response.data||[]).sort((a,b)=>a.name.localeCompare(b.name,'ar'));setCustomers(sortedCustomers);}catch(error){console.error('Error fetching customers:',error);}};const getCustomerName=customerId=>{const customer=customers.find(c=>c.id===customerId);return customer?customer.name:'Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…Ø­Ø¯Ø¯';};const makePayment=async()=>{if(!selectedInvoice||!paymentAmount){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙˆØ¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº');return;}if(parseFloat(paymentAmount)>selectedInvoice.remaining_amount){alert('Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯Ø®Ù„ Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚');return;}try{await axios.post(\"\".concat(API,\"/payments\"),{invoice_id:selectedInvoice.id,amount:parseFloat(paymentAmount),payment_method:paymentMethod,notes:paymentNotes});setPaymentAmount('');setPaymentNotes('');setSelectedInvoice(null);fetchUnpaidInvoices();alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø© Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error making payment:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø©');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row md:items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-blue-600 mb-2 md:mb-0\",children:\"\\u0627\\u0644\\u0622\\u062C\\u0644 - \\u0645\\u062A\\u0627\\u0628\\u0639\\u0629 \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"border border-gray-300 rounded px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"\\u064A\\u0648\\u0645\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0623\\u0633\\u0628\\u0648\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0634\\u0647\\u0631\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0633\\u0646\\u0648\\u064A\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0628\\u062D\\u062B \\u0628\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0623\\u0648 \\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0623\\u0648 \\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\"})}),Object.keys(customerTotals).length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3\",children:Object.entries(customerTotals).map(_ref3=>{let[customerName,totals]=_ref3;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-3 rounded border text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold text-blue-800 text-sm\",children:customerName}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-blue-600\",children:[totals.invoiceCount,\" \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-bold text-green-600\",children:[totals.totalAmount.toFixed(2),\" \\u062C.\\u0645\"]})]},customerName);})})]}),selectedInvoice&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u062A\\u0633\\u062C\\u064A\\u0644 \\u062F\\u0641\\u0639\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:selectedInvoice.invoice_number,disabled:true,className:\"w-full p-2 border border-gray-300 rounded bg-gray-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:selectedInvoice.customer_name,disabled:true,className:\"w-full p-2 border border-gray-300 rounded bg-gray-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:\"\\u062C.\\u0645 \".concat(((_selectedInvoice$rema=selectedInvoice.remaining_amount)===null||_selectedInvoice$rema===void 0?void 0:_selectedInvoice$rema.toFixed(2))||'0.00'),disabled:true,className:\"w-full p-2 border border-gray-300 rounded bg-gray-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u062F\\u0641\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:paymentAmount,onChange:e=>setPaymentAmount(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"0.00\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639\"}),/*#__PURE__*/_jsxs(\"select\",{value:paymentMethod,onChange:e=>setPaymentMethod(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u0646\\u0642\\u062F\\u064A\",children:\"\\u0646\\u0642\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 010\",children:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 010\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0643\\u0627\\u0634 0100\",children:\"\\u0643\\u0627\\u0634 0100\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0627\\u0646\\u0633\\u062A\\u0627\\u0628\\u0627\\u064A\",children:\"\\u0627\\u0646\\u0633\\u062A\\u0627\\u0628\\u0627\\u064A\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:paymentNotes,onChange:e=>setPaymentNotes(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0625\\u0636\\u0627\\u0641\\u064A\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:makePayment,className:\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\",children:\"\\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u062F\\u0641\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedInvoice(null),className:\"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u063A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u0633\\u062F\\u062F\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredInvoices.map(invoice=>{var _invoice$total_amount,_invoice$paid_amount,_invoice$remaining_am;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.invoice_number}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.customer_name}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(invoice.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",((_invoice$total_amount=invoice.total_amount)===null||_invoice$total_amount===void 0?void 0:_invoice$total_amount.toFixed(2))||'0.00']}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[\"\\u062C.\\u0645 \",((_invoice$paid_amount=invoice.paid_amount)===null||_invoice$paid_amount===void 0?void 0:_invoice$paid_amount.toFixed(2))||'0.00']}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold text-red-600\",children:[\"\\u062C.\\u0645 \",((_invoice$remaining_am=invoice.remaining_amount)===null||_invoice$remaining_am===void 0?void 0:_invoice$remaining_am.toFixed(2))||'0.00']})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm \".concat(invoice.status==='ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©'?'bg-red-100 text-red-800':invoice.status==='Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹'?'bg-yellow-100 text-yellow-800':'bg-green-100 text-green-800'),children:invoice.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedInvoice(invoice),className:\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\",children:\"\\u0639\\u0631\\u0636 \\u0627\\u0644\\u062F\\u0641\\u0639\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedInvoice(invoice),className:\"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600\",children:\"\\u062F\\u0641\\u0639\"})]})})]},invoice.id);})})]}),filteredInvoices.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u063A\\u064A\\u0631 \\u0645\\u0633\\u062F\\u062F\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 p-4 rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-red-800\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u0627\\u0644\\u063A \\u0627\\u0644\\u0645\\u0633\\u062A\\u062D\\u0642\\u0629\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-red-600\",children:[\"\\u062C.\\u0645 \",filteredInvoices.reduce((sum,inv)=>sum+(inv.remaining_amount||0),0).toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 p-4 rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-yellow-800\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u0639\\u0644\\u0642\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-yellow-600\",children:filteredInvoices.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-4 rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-blue-800\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u0623\\u0635\\u0644\\u064A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-blue-600\",children:[\"\\u062C.\\u0645 \",filteredInvoices.reduce((sum,inv)=>sum+(inv.total_amount||0),0).toFixed(2)]})]})]})]})]});};// Expenses Component\nconst Expenses=()=>{const[expenses,setExpenses]=useState([]);const[newExpense,setNewExpense]=useState({description:'',amount:'',category:'Ø®Ø§Ù…Ø§Øª'});const expenseCategories=['Ø®Ø§Ù…Ø§Øª','Ø±ÙˆØ§ØªØ¨','ÙƒÙ‡Ø±Ø¨Ø§Ø¡','ØµÙŠØ§Ù†Ø©','Ø£Ø®Ø±Ù‰'];useEffect(()=>{fetchExpenses();},[]);const fetchExpenses=async()=>{try{const response=await axios.get(\"\".concat(API,\"/expenses\"));setExpenses(response.data);}catch(error){console.error('Error fetching expenses:',error);}};const addExpense=async()=>{if(!newExpense.description||!newExpense.amount){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{await axios.post(\"\".concat(API,\"/expenses\"),_objectSpread(_objectSpread({},newExpense),{},{amount:parseFloat(newExpense.amount)}));setNewExpense({description:'',amount:'',category:'Ø®Ø§Ù…Ø§Øª'});fetchExpenses();alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ØµØ±ÙˆÙ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error adding expense:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ØµØ±ÙˆÙ');}};const deleteExpense=async expenseId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ØµØ±ÙˆÙØŸ'))return;try{await axios.delete(\"\".concat(API,\"/expenses/\").concat(expenseId));fetchExpenses();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ØµØ±ÙˆÙ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error deleting expense:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ØµØ±ÙˆÙ');}};const getTotalExpenses=()=>{return expenses.reduce((sum,expense)=>sum+expense.amount,0);};const getExpensesByCategory=()=>{const byCategory={};expenseCategories.forEach(cat=>{byCategory[cat]=expenses.filter(exp=>exp.category===cat).reduce((sum,exp)=>sum+exp.amount,0);});return byCategory;};const clearAllExpenses=async()=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§ØªØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.'))return;try{await axios.delete(\"\".concat(API,\"/expenses/clear-all\"));fetchExpenses();alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª');}catch(error){console.error('Error clearing expenses:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-4\",children:\"\\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:clearAllExpenses,className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchExpenses,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"border border-gray-300 rounded px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"\\u064A\\u0648\\u0645\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0623\\u0633\\u0628\\u0648\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0634\\u0647\\u0631\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0633\\u0646\\u0648\\u064A\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0635\\u0631\\u0648\\u0641 \\u062C\\u062F\\u064A\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0648\\u0635\\u0641 \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newExpense.description,onChange:e=>setNewExpense(_objectSpread(_objectSpread({},newExpense),{},{description:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0645\\u062B\\u0627\\u0644: \\u0634\\u0631\\u0627\\u0621 \\u062E\\u0627\\u0645\\u0627\\u062A\\u060C \\u0643\\u0647\\u0631\\u0628\\u0627\\u0621 \\u0627\\u0644\\u0645\\u0635\\u0646\\u0639\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newExpense.amount,onChange:e=>setNewExpense(_objectSpread(_objectSpread({},newExpense),{},{amount:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"0.00\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0641\\u0626\\u0629\"}),/*#__PURE__*/_jsx(\"select\",{value:newExpense.category,onChange:e=>setNewExpense(_objectSpread(_objectSpread({},newExpense),{},{category:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:expenseCategories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category,children:category},category))})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addExpense,className:\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 p-6 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-red-800 mb-2\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-red-600\",children:[\"\\u062C.\\u0645 \",getTotalExpenses().toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-6 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-blue-800 mb-2\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-blue-600\",children:expenses.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 p-6 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-yellow-800 mb-2\",children:\"\\u0645\\u062A\\u0648\\u0633\\u0637 \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-yellow-600\",children:[\"\\u062C.\\u0645 \",expenses.length>0?(getTotalExpenses()/expenses.length).toFixed(2):'0.00']})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A \\u062D\\u0633\\u0628 \\u0627\\u0644\\u0641\\u0626\\u0629\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\",children:Object.entries(getExpensesByCategory()).map(_ref4=>{let[category,amount]=_ref4;return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 border rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700\",children:category}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl font-bold text-blue-600\",children:[\"\\u062C.\\u0645 \",amount.toFixed(2)]})]},category);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0648\\u0635\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0641\\u0626\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:expenses.map(expense=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:expense.description}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-red-600\",children:[\"\\u062C.\\u0645 \",expense.amount.toFixed(2)]})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm \".concat(expense.category==='Ø®Ø§Ù…Ø§Øª'?'bg-blue-100 text-blue-800':expense.category==='Ø±ÙˆØ§ØªØ¨'?'bg-green-100 text-green-800':expense.category==='ÙƒÙ‡Ø±Ø¨Ø§Ø¡'?'bg-yellow-100 text-yellow-800':expense.category==='ØµÙŠØ§Ù†Ø©'?'bg-purple-100 text-purple-800':'bg-gray-100 text-gray-800'),children:expense.category})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(expense.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteExpense(expense.id),className:\"bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641\"})})]},expense.id))})]}),expenses.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A \\u0645\\u0633\\u062C\\u0644\\u0629\"})]})]})]});};// Revenue Component\nconst Revenue=()=>{var _revenueData$total_re,_revenueData$total_ex,_revenueData$material,_revenueData$profit,_revenueData$total_re2,_revenueData$material2,_revenueData$profit2;const[revenueData,setRevenueData]=useState({total_revenue:0,total_expenses:0,material_cost:0,profit:0});const[period,setPeriod]=useState('daily');useEffect(()=>{fetchRevenueData();},[period]);const fetchRevenueData=async()=>{try{const response=await axios.get(\"\".concat(API,\"/reports/revenue?period=\").concat(period));setRevenueData(response.data);}catch(error){console.error('Error fetching revenue data:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-4\",children:\"\\u0627\\u0644\\u0625\\u064A\\u0631\\u0627\\u062F\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchRevenueData,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"select\",{value:period,onChange:e=>setPeriod(e.target.value),className:\"border border-gray-300 rounded px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"daily\",children:\"\\u0627\\u0644\\u064A\\u0648\\u0645\"}),/*#__PURE__*/_jsx(\"option\",{value:\"weekly\",children:\"\\u0627\\u0644\\u0623\\u0633\\u0628\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"option\",{value:\"monthly\",children:\"\\u0627\\u0644\\u0634\\u0647\\u0631\"}),/*#__PURE__*/_jsx(\"option\",{value:\"yearly\",children:\"\\u0627\\u0644\\u0633\\u0646\\u0629\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-green-800 text-center mb-2\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0625\\u064A\\u0631\\u0627\\u062F\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-green-600 text-center\",children:[\"\\u062C.\\u0645 \",((_revenueData$total_re=revenueData.total_revenue)===null||_revenueData$total_re===void 0?void 0:_revenueData$total_re.toFixed(2))||'0.00']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-red-800 text-center mb-2\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-red-600 text-center\",children:[\"\\u062C.\\u0645 \",((_revenueData$total_ex=revenueData.total_expenses)===null||_revenueData$total_ex===void 0?void 0:_revenueData$total_ex.toFixed(2))||'0.00']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-yellow-800 text-center mb-2\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-yellow-600 text-center\",children:[\"\\u062C.\\u0645 \",((_revenueData$material=revenueData.material_cost)===null||_revenueData$material===void 0?void 0:_revenueData$material.toFixed(2))||'0.00']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-blue-800 text-center mb-2\",children:\"\\u0635\\u0627\\u0641\\u064A \\u0627\\u0644\\u0631\\u0628\\u062D\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-center \".concat((revenueData.profit||0)>=0?'text-blue-600':'text-red-600'),children:[\"\\u062C.\\u0645 \",((_revenueData$profit=revenueData.profit)===null||_revenueData$profit===void 0?void 0:_revenueData$profit.toFixed(2))||'0.00']})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mt-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold mb-4\",children:[\"\\u062A\\u0642\\u0631\\u064A\\u0631 \\u0627\\u0644\\u0625\\u064A\\u0631\\u0627\\u062F\\u0627\\u062A - \",period==='daily'?'ÙŠÙˆÙ…ÙŠ':period==='weekly'?'Ø£Ø³Ø¨ÙˆØ¹ÙŠ':period==='monthly'?'Ø´Ù‡Ø±ÙŠ':'Ø³Ù†ÙˆÙŠ']}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3\",children:\"\\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A (\\u062C.\\u0645)\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-3\",children:\"\\u0627\\u0644\\u0646\\u0633\\u0628\\u0629 \\u0627\\u0644\\u0645\\u0626\\u0648\\u064A\\u0629\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3 font-semibold\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0625\\u064A\\u0631\\u0627\\u062F\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3 text-green-600 font-bold\",children:((_revenueData$total_re2=revenueData.total_revenue)===null||_revenueData$total_re2===void 0?void 0:_revenueData$total_re2.toFixed(2))||'0.00'}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3\",children:\"100%\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3 text-yellow-600 font-semibold\",children:[\"-\",((_revenueData$material2=revenueData.material_cost)===null||_revenueData$material2===void 0?void 0:_revenueData$material2.toFixed(2))||'0.00']}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3\",children:[revenueData.total_revenue>0?(revenueData.material_cost/revenueData.total_revenue*100).toFixed(1):'0.0',\"%\"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3\",children:\"\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A \\u0623\\u062E\\u0631\\u0649\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3 text-red-600 font-semibold\",children:[\"-\",((revenueData.total_expenses||0)-(revenueData.material_cost||0)).toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3\",children:[revenueData.total_revenue>0?((revenueData.total_expenses-revenueData.material_cost)/revenueData.total_revenue*100).toFixed(1):'0.0',\"%\"]})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-blue-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3 font-bold\",children:\"\\u0635\\u0627\\u0641\\u064A \\u0627\\u0644\\u0631\\u0628\\u062D\"}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-3 font-bold \".concat((revenueData.profit||0)>=0?'text-blue-600':'text-red-600'),children:((_revenueData$profit2=revenueData.profit)===null||_revenueData$profit2===void 0?void 0:_revenueData$profit2.toFixed(2))||'0.00'}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-3 font-bold\",children:[revenueData.total_revenue>0?(revenueData.profit/revenueData.total_revenue*100).toFixed(1):'0.0',\"%\"]})]})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mt-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0645\\u0624\\u0634\\u0631\\u0627\\u062A \\u0627\\u0644\\u0623\\u062F\\u0627\\u0621\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 border rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-2\",children:\"\\u0647\\u0627\\u0645\\u0634 \\u0627\\u0644\\u0631\\u0628\\u062D\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold \".concat((revenueData.profit||0)>=0?'text-green-600':'text-red-600'),children:[revenueData.total_revenue>0?(revenueData.profit/revenueData.total_revenue*100).toFixed(1):'0.0',\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 border rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-2\",children:\"\\u0646\\u0633\\u0628\\u0629 \\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-yellow-600\",children:[revenueData.total_revenue>0?(revenueData.material_cost/revenueData.total_revenue*100).toFixed(1):'0.0',\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 border rounded\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-2\",children:\"\\u0646\\u0633\\u0628\\u0629 \\u0627\\u0644\\u0645\\u0635\\u0631\\u0648\\u0641\\u0627\\u062A \\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-red-600\",children:[revenueData.total_revenue>0?(revenueData.total_expenses/revenueData.total_revenue*100).toFixed(1):'0.0',\"%\"]})]})]})]})]});};// Invoices Component\nconst Invoices=()=>{const[invoices,setInvoices]=useState([]);const[customers,setCustomers]=useState([]);const[filterStatus,setFilterStatus]=useState('');const[searchTerm,setSearchTerm]=useState('');const[editingInvoice,setEditingInvoice]=useState(null);const[editForm,setEditForm]=useState({invoice_title:'',supervisor_name:'',customer_name:'',payment_method:'Ù†Ù‚Ø¯ÙŠ',discount_type:'amount',discount_value:0,items:[],notes:''});useEffect(()=>{fetchInvoices();fetchCustomers();},[]);const fetchInvoices=async()=>{try{console.log('Fetching invoices...');const response=await axios.get(\"\".concat(API,\"/invoices\"));console.log('Invoices fetched:',response.data.length,'invoices');setInvoices(response.data);}catch(error){var _error$response10,_error$response10$dat;console.error('Error fetching invoices:',error);alert('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙˆØ§ØªÙŠØ±: '+(((_error$response10=error.response)===null||_error$response10===void 0?void 0:(_error$response10$dat=_error$response10.data)===null||_error$response10$dat===void 0?void 0:_error$response10$dat.detail)||error.message));}};const fetchCustomers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/customers\"));// Sort customers alphabetically by name\nconst sortedCustomers=(response.data||[]).sort((a,b)=>a.name.localeCompare(b.name,'ar'));setCustomers(sortedCustomers);}catch(error){console.error('Error fetching customers:',error);}};// Change payment method function\nconst changePaymentMethod=async invoiceId=>{const paymentMethods=[{value:'Ù†Ù‚Ø¯ÙŠ',label:'Ù†Ù‚Ø¯ÙŠ'},{value:'Ø¢Ø¬Ù„',label:'Ø¢Ø¬Ù„'},{value:'ÙÙˆØ¯Ø§ÙÙˆÙ† 010',label:'ÙÙˆØ¯Ø§ÙÙˆÙ† 010'},{value:'ÙƒØ§Ø´ 0100',label:'ÙƒØ§Ø´ 0100'},{value:'Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ',label:'Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ'},{value:'ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ',label:'ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ'}];const invoice=invoices.find(inv=>inv.id===invoiceId);if(!invoice){alert('Ø§Ù„ÙØ§ØªÙˆØ±Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©');return;}// Ù…Ù†Ø¹ ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹\nif(invoice.paid_amount>0&&invoice.remaining_amount>0){alert('Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­ÙˆÙŠÙ„ Ø·Ø±ÙŠÙ‚Ø© Ø¯ÙØ¹ ÙØ§ØªÙˆØ±Ø© Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹');return;}// Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø§ÙØ°Ø© Ø­ÙˆØ§Ø± Ù…Ø®ØµØµØ© Ù„Ù„Ø§Ø®ØªÙŠØ§Ø±\nconst modalHtml=\"\\n      <div id=\\\"paymentMethodModal\\\" style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        width: 100%;\\n        height: 100%;\\n        background: rgba(0,0,0,0.5);\\n        display: flex;\\n        justify-content: center;\\n        align-items: center;\\n        z-index: 1000;\\n        direction: rtl;\\n      \\\">\\n        <div style=\\\"\\n          background: white;\\n          padding: 30px;\\n          border-radius: 10px;\\n          box-shadow: 0 4px 6px rgba(0,0,0,0.1);\\n          min-width: 400px;\\n          text-align: center;\\n        \\\">\\n          <h3 style=\\\"margin-bottom: 20px; color: #333;\\\">\\u062A\\u063A\\u064A\\u064A\\u0631 \\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639</h3>\\n          <p style=\\\"margin-bottom: 15px;\\\">\\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629: <strong>\".concat(invoice.invoice_number,\"</strong></p>\\n          <p style=\\\"margin-bottom: 20px;\\\">\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639 \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\\u0629: <strong style=\\\"color: #e74c3c;\\\">\").concat(invoice.payment_method,\"</strong></p>\\n          <div style=\\\"margin-bottom: 20px;\\\">\\n            <label style=\\\"display: block; margin-bottom: 10px; font-weight: bold;\\\">\\u0627\\u062E\\u062A\\u0631 \\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639 \\u0627\\u0644\\u062C\\u062F\\u064A\\u062F\\u0629:</label>\\n            <select id=\\\"newPaymentMethod\\\" style=\\\"\\n              width: 100%;\\n              padding: 10px;\\n              border: 2px solid #ddd;\\n              border-radius: 5px;\\n              font-size: 16px;\\n              direction: rtl;\\n            \\\">\\n              <option value=\\\"\\\">-- \\u0627\\u062E\\u062A\\u0631 \\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639 --</option>\\n              \").concat(paymentMethods.filter(method=>method.value!==invoice.payment_method).map(method=>\"<option value=\\\"\".concat(method.value,\"\\\">\").concat(method.label,\"</option>\")).join(''),\"\\n            </select>\\n          </div>\\n          <div style=\\\"display: flex; gap: 10px; justify-content: center;\\\">\\n            <button id=\\\"confirmChange\\\" style=\\\"\\n              background: #27ae60;\\n              color: white;\\n              border: none;\\n              padding: 10px 20px;\\n              border-radius: 5px;\\n              cursor: pointer;\\n              font-size: 16px;\\n            \\\">\\u062A\\u0623\\u0643\\u064A\\u062F \\u0627\\u0644\\u062A\\u063A\\u064A\\u064A\\u0631</button>\\n            <button id=\\\"cancelChange\\\" style=\\\"\\n              background: #e74c3c;\\n              color: white;\\n              border: none;\\n              padding: 10px 20px;\\n              border-radius: 5px;\\n              cursor: pointer;\\n              font-size: 16px;\\n            \\\">\\u0625\\u0644\\u063A\\u0627\\u0621</button>\\n          </div>\\n        </div>\\n      </div>\\n    \");// Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø§ÙØ°Ø© Ù„Ù„ØµÙØ­Ø©\ndocument.body.insertAdjacentHTML('beforeend',modalHtml);// Ø¥Ø¶Ø§ÙØ© Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø£Ø²Ø±Ø§Ø±\nconst modal=document.getElementById('paymentMethodModal');const selectElement=document.getElementById('newPaymentMethod');const confirmBtn=document.getElementById('confirmChange');const cancelBtn=document.getElementById('cancelChange');// Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©\nconst closeModal=()=>{if(modal&&modal.parentNode){modal.parentNode.removeChild(modal);}};// Ø²Ø± Ø§Ù„Ø¥Ù„ØºØ§Ø¡\ncancelBtn.onclick=closeModal;// Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø§ÙØ°Ø©\nmodal.onclick=e=>{if(e.target===modal){closeModal();}};// Ø²Ø± Ø§Ù„ØªØ£ÙƒÙŠØ¯\nconfirmBtn.onclick=async()=>{const newMethod=selectElement.value;if(!newMethod){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø·Ø±ÙŠÙ‚Ø© Ø¯ÙØ¹ Ø¬Ø¯ÙŠØ¯Ø©');return;}if(newMethod===invoice.payment_method){alert('Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ù‡ÙŠ Ù†ÙØ³Ù‡Ø§ Ø¨Ø§Ù„ÙØ¹Ù„');return;}if(!confirm(\"\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u062A\\u062D\\u0648\\u064A\\u0644 \\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639 \\u0645\\u0646 \\\"\".concat(invoice.payment_method,\"\\\" \\u0625\\u0644\\u0649 \\\"\").concat(newMethod,\"\\\"\\u061F\\n\\n\\u0633\\u064A\\u062A\\u0645 \\u062A\\u062D\\u062F\\u064A\\u062B \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629 \\u0648\\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\\u0627\\u062A \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0627\\u064B.\"))){return;}try{const response=await axios.put(\"\".concat(API,\"/invoices/\").concat(invoiceId,\"/change-payment-method?new_payment_method=\").concat(encodeURIComponent(newMethod)));alert(response.data.message);fetchInvoices();// Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙˆØ§ØªÙŠØ±\ncloseModal();}catch(error){var _error$response11,_error$response11$dat;console.error('Error changing payment method:',error);alert('Ø®Ø·Ø£ ÙÙŠ ØªØºÙŠÙŠØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹: '+(((_error$response11=error.response)===null||_error$response11===void 0?void 0:(_error$response11$dat=_error$response11.data)===null||_error$response11$dat===void 0?void 0:_error$response11$dat.detail)||error.message));}};};// Cancel invoice function\nconst cancelInvoice=async invoiceId=>{const invoice=invoices.find(inv=>inv.id===invoiceId);if(!invoice){alert('Ø§Ù„ÙØ§ØªÙˆØ±Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©');return;}const confirmMessage=\"\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u0625\\u0644\\u063A\\u0627\\u0621 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \".concat(invoice.invoice_number,\"\\u061F\\n\\n\\u0633\\u064A\\u062A\\u0645:\\n- \\u0625\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\\u0629 \\u0625\\u0644\\u0649 \\u0627\\u0644\\u0645\\u062E\\u0632\\u0646\\n- \\u0639\\u0645\\u0644 \\u0645\\u0639\\u0627\\u0645\\u0644\\u0629 \\u0639\\u0643\\u0633\\u064A\\u0629 \\u0641\\u064A \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629\\n- \\u062D\\u0630\\u0641 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0646\\u0647\\u0627\\u0626\\u064A\\u0627\\u064B\\n\\n\\u0647\\u0630\\u0627 \\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621 \\u063A\\u064A\\u0631 \\u0642\\u0627\\u0628\\u0644 \\u0644\\u0644\\u0625\\u0644\\u063A\\u0627\\u0621!\");if(!confirm(confirmMessage)){return;}try{const response=await axios.delete(\"\".concat(API,\"/invoices/\").concat(invoiceId,\"/cancel\"));alert(response.data.message);fetchInvoices();// Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙˆØ§ØªÙŠØ±\n}catch(error){var _error$response12,_error$response12$dat;console.error('Error canceling invoice:',error);alert('Ø®Ø·Ø£ ÙÙŠ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©: '+(((_error$response12=error.response)===null||_error$response12===void 0?void 0:(_error$response12$dat=_error$response12.data)===null||_error$response12$dat===void 0?void 0:_error$response12$dat.detail)||error.message));}};const deleteInvoice=async invoiceId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©ØŸ'))return;try{await axios.delete(\"\".concat(API,\"/invoices/\").concat(invoiceId));fetchInvoices();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error deleting invoice:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø©');}};const startEditInvoice=invoice=>{setEditingInvoice(invoice.id);setEditForm({invoice_title:invoice.invoice_title||'',supervisor_name:invoice.supervisor_name||'',customer_name:invoice.customer_name||'',payment_method:invoice.payment_method||'Ù†Ù‚Ø¯ÙŠ',discount_type:invoice.discount_type||'amount',discount_value:invoice.discount_value||0,items:invoice.items||[],notes:invoice.notes||''});};const cancelEdit=()=>{setEditingInvoice(null);setEditForm({invoice_title:'',supervisor_name:'',customer_name:'',payment_method:'Ù†Ù‚Ø¯ÙŠ',discount_type:'amount',discount_value:0,items:[],notes:''});};const saveInvoiceEdit=async()=>{if(!editForm.customer_name.trim()){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„');return;}try{console.log('Saving invoice edit for ID:',editingInvoice);console.log('Edit form data:',editForm);// Calculate totals\nconst subtotal=editForm.items.reduce((sum,item)=>sum+(item.total_price||0),0);let discountAmount=0;if(editForm.discount_type==='percentage'){discountAmount=subtotal*parseFloat(editForm.discount_value||0)/100;}else{discountAmount=parseFloat(editForm.discount_value||0);}const totalAfterDiscount=subtotal-discountAmount;const updatedInvoice=_objectSpread(_objectSpread({},editForm),{},{subtotal:subtotal,discount:discountAmount,total_after_discount:totalAfterDiscount,total_amount:totalAfterDiscount});console.log('Sending update to backend:',updatedInvoice);const response=await axios.put(\"\".concat(API,\"/invoices/\").concat(editingInvoice),updatedInvoice);console.log('Update response:',response.data);console.log('Fetching invoices after update...');await fetchInvoices();cancelEdit();alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response13,_error$response14,_error$response14$dat;console.error('Error updating invoice:',error);console.error('Error response:',(_error$response13=error.response)===null||_error$response13===void 0?void 0:_error$response13.data);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ§ØªÙˆØ±Ø©: '+(((_error$response14=error.response)===null||_error$response14===void 0?void 0:(_error$response14$dat=_error$response14.data)===null||_error$response14$dat===void 0?void 0:_error$response14$dat.detail)||error.message));}};const updateInvoiceStatus=async(invoiceId,newStatus)=>{try{await axios.put(\"\".concat(API,\"/invoices/\").concat(invoiceId,\"/status\"),{status:newStatus},{headers:{'Content-Type':'application/json'}});fetchInvoices();alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©');}catch(error){console.error('Error updating invoice status:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©');}};const printInvoice=invoice=>{const printContent=\"\\n      <!DOCTYPE html>\\n      <html dir=\\\"rtl\\\">\\n      <head>\\n        <meta charset=\\\"UTF-8\\\">\\n        <style>\\n          body {\\n            font-family: Arial, sans-serif;\\n            margin: 0;\\n            padding: 20px;\\n            direction: rtl;\\n            font-size: 15px;\\n          }\\n          .header {\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n            border-bottom: 3px solid #000;\\n            padding-bottom: 10px;\\n            margin-bottom: 20px;\\n          }\\n          .company-info {\\n            text-align: right;\\n          }\\n          .company-name {\\n            font-size: 32px;\\n            font-weight: bold;\\n            color: #000;\\n            margin: 0;\\n          }\\n          .company-subtitle {\\n            font-size: 20px;\\n            margin: 5px 0;\\n            color: #666;\\n          }\\n          .company-details {\\n            font-size: 16px;\\n            margin: 2px 0;\\n            color: #333;\\n          }\\n          .logo-section {\\n            text-align: center;\\n            flex: 1;\\n          }\\n          .invoice-title {\\n            font-size: 22px;\\n            font-weight: bold;\\n            background-color: #ff4444;\\n            color: white;\\n            padding: 8px 20px;\\n            border-radius: 5px;\\n            display: inline-block;\\n            margin-bottom: 10px;\\n          }\\n          .invoice-number {\\n            font-size: 20px;\\n            font-weight: bold;\\n            color: #ff4444;\\n          }\\n          .customer-info {\\n            display: flex;\\n            justify-content: space-between;\\n            margin: 20px 0;\\n          }\\n          .customer-details {\\n            text-align: right;\\n          }\\n          .date-info {\\n            text-align: left;\\n          }\\n          .products-table {\\n            width: 100%;\\n            border-collapse: collapse;\\n            border: 2px solid #000;\\n            margin: 20px 0;\\n          }\\n          .products-table th,\\n          .products-table td {\\n            border: 1px solid #000;\\n            padding: 8px;\\n            text-align: center;\\n          }\\n          .products-table th {\\n            background-color: #f0f0f0;\\n            font-weight: bold;\\n          }\\n          .footer {\\n            margin-top: 30px;\\n            border-top: 1px solid #ccc;\\n            padding-top: 15px;\\n            display: flex;\\n            justify-content: space-between;\\n            font-size: 13px;\\n            color: #666;\\n          }\\n          .total-section {\\n            text-align: left;\\n            margin-top: 10px;\\n          }\\n          .total-amount {\\n            font-size: 20px;\\n            font-weight: bold;\\n            border: 2px solid #000;\\n            padding: 10px;\\n            display: inline-block;\\n            background-color: #f9f9f9;\\n          }\\n          @media print {\\n            body { margin: 0; padding: 10px; }\\n          }\\n        </style>\\n      </head>\\n      <body>\\n        <!-- Header Section -->\\n        <div class=\\\"header\\\">\\n          <div class=\\\"company-info\\\">\\n            <h1 class=\\\"company-name\\\">\\u0634\\u0631\\u0643\\u0629 \\u0645\\u0627\\u0633\\u062A\\u0631 \\u0633\\u064A\\u0644</h1>\\n            <p class=\\\"company-subtitle\\\">\\u062A\\u0635\\u0646\\u064A\\u0639 \\u062C\\u0645\\u064A\\u0639 \\u0623\\u0646\\u0648\\u0627\\u0639 \\u0627\\u0644\\u0623\\u0648\\u064A\\u0644 \\u0633\\u064A\\u0644</p>\\n            <p class=\\\"company-details\\\">\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0623\\u0642\\u0637\\u0627\\u0631 \\u062D\\u062A\\u0649 \\u0665\\u0660\\u0660\\u0645\\u0644</p>\\n            <p class=\\\"company-details\\\">\\u0647\\u064A\\u062F\\u0631\\u0648\\u0644\\u064A\\u0643 - \\u0646\\u064A\\u0648\\u0645\\u0627\\u062A\\u064A\\u0643</p>\\n          </div>\\n          \\n          <div class=\\\"logo-section\\\">\\n            <img src=\\\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\\\" \\n                 alt=\\\"Master Seal Logo\\\" \\n                 style=\\\"max-width: 120px; max-height: 80px; margin-bottom: 10px;\\\">\\n            <div class=\\\"invoice-title\\\">\".concat(invoice.invoice_title||'Ø¹Ø±Ø¶ Ø³Ø¹Ø±',\"</div>\\n            <div class=\\\"invoice-number\\\">\").concat(invoice.invoice_number,\"</div>\\n          </div>\\n        </div>\\n\\n        <!-- Customer and Date Info -->\\n        <div class=\\\"customer-info\\\">\\n          <div class=\\\"customer-details\\\">\\n            <p><strong>\\u0627\\u0644\\u0633\\u0627\\u062F\\u0629:</strong> \").concat(invoice.customer_name,\"</p>\\n            <p><strong>\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646:</strong> \").concat(invoice.customer_address||'........................',\"</p>\\n          </div>\\n          <div class=\\\"date-info\\\">\\n            <p><strong>\\u062A\\u062D\\u0631\\u064A\\u0631 \\u0641\\u064A:</strong> \").concat(new Date(invoice.date).toLocaleDateString('ar-EG'),\"</p>\\n            <p><strong>Date:</strong> \").concat(new Date(invoice.date).toLocaleDateString('en-GB'),\"</p>\\n          </div>\\n        </div>\\n\\n        <!-- Products Table -->\\n        <table class=\\\"products-table\\\">\\n          <thead>\\n            <tr>\\n              <th style=\\\"width: 60px;\\\">\\u0627\\u0644\\u0645\\u0633\\u0644\\u0633\\u0644<br>Item</th>\\n              <th style=\\\"width: 80px;\\\">\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629<br>QTY</th>\\n              <th style=\\\"width: 200px;\\\">Description<br>\\u0627\\u0644\\u0645\\u0648\\u0627\\u0635\\u0641\\u0627\\u062A</th>\\n              <th style=\\\"width: 100px;\\\">\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629<br>Unit Price</th>\\n              <th style=\\\"width: 100px;\\\">\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A<br>Total</th>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            \").concat(invoice.items.map((item,index)=>\"\\n              <tr>\\n                <td>\".concat(index+1,\"</td>\\n                <td>\").concat(item.quantity,\"</td>\\n                <td style=\\\"text-align: right;\\\">\\n                  \").concat(item.local_product_details?\"\".concat(item.local_product_details.product_size,\" - \").concat(item.local_product_details.product_type):\"\".concat(item.seal_type,\" - \").concat(item.material_type,\"<br>\\n                    <small>\").concat(item.inner_diameter,\" \\xD7 \").concat(item.outer_diameter,\" \\xD7 \").concat(item.height,\" \\u0645\\u0645\").concat(item.wall_height?\" (\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629: \".concat(item.wall_height,\" \\u0645\\u0645)\"):\"\",\"</small>\"),\"\\n                </td>\\n                <td>\\u062C.\\u0645 \").concat(item.unit_price.toFixed(2),\"</td>\\n                <td>\\u062C.\\u0645 \").concat(item.total_price.toFixed(2),\"</td>\\n              </tr>\\n            \")).join(''),\"\\n            <!-- Empty rows for additional items -->\\n            \").concat(Array.from({length:Math.max(0,8-invoice.items.length)},(_,i)=>\"\\n              <tr style=\\\"height: 40px;\\\">\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n                <td></td>\\n              </tr>\\n            \").join(''),\"\\n          </tbody>\\n        </table>\\n\\n        <!-- Total Section -->\\n        <div class=\\\"total-section\\\">\\n          <div style=\\\"text-align: left; margin-bottom: 10px;\\\">\\n            \").concat(invoice.subtotal?\"\\n              <div style=\\\"margin-bottom: 5px;\\\">\\n                <span>\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639 \\u0627\\u0644\\u0641\\u0631\\u0639\\u064A: \\u062C.\\u0645 \".concat(invoice.subtotal.toFixed(2),\"</span>\\n              </div>\\n            \"):'',\"\\n            \").concat(invoice.discount&&invoice.discount>0?\"\\n              <div style=\\\"margin-bottom: 5px; color: #d32f2f;\\\">\\n                <span>\\u0627\\u0644\\u062E\\u0635\\u0645: - \\u062C.\\u0645 \".concat(invoice.discount.toFixed(2),\"</span>\\n                \").concat(invoice.discount_type==='percentage'&&invoice.discount_value?\" <small>(\".concat(invoice.discount_value,\"%)</small>\"):'',\"\\n              </div>\\n              <hr style=\\\"margin: 5px 0; border: 1px solid #000;\\\">\\n            \"):'',\"\\n          </div>\\n          <div class=\\\"total-amount\\\">\\n            \\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0646\\u0647\\u0627\\u0626\\u064A: \\u062C.\\u0645 \").concat((invoice.total_after_discount||invoice.total_amount).toFixed(2),\"\\n          </div>\\n        </div>\\n\\n        <!-- Additional Info -->\\n        <div style=\\\"margin-top: 20px; text-align: center; font-size: 13px;\\\">\\n          <p><strong>\\u0645\\u0644\\u062D\\u0648\\u0638\\u0629:</strong> \\u0641\\u0642\\u0637 \\u0648\\u0642\\u062F\\u0631\\u0647</p>\\n          <div style=\\\"height: 30px; border-bottom: 1px solid #000; margin: 10px 40px;\\\"></div>\\n        </div>\\n\\n        <!-- Footer -->\\n        <div class=\\\"footer\\\">\\n          <div>\\n            <p><strong>\\u0627\\u0644\\u062A\\u0648\\u0642\\u064A\\u0639:</strong></p>\\n            <p>\\u0645\\u0648\\u0628\\u0627\\u064A\\u0644: \\u0660\\u0661\\u0660\\u0662\\u0660\\u0666\\u0663\\u0660\\u0666\\u0667\\u0667 - \\u0660\\u0661\\u0660\\u0666\\u0662\\u0663\\u0669\\u0660\\u0668\\u0667\\u0660</p>\\n            <p>\\u062A\\u0644\\u064A\\u0641\\u0648\\u0646: \\u0660\\u0661\\u0660\\u0662\\u0660\\u0666\\u0663\\u0660\\u0666\\u0667\\u0667</p>\\n          </div>\\n          <div style=\\\"text-align: left;\\\">\\n            <p><strong>\\u0627\\u0644\\u0645\\u0633\\u062A\\u0644\\u0645:</strong></p>\\n            <p>\\u0627\\u0644\\u062D\\u0631\\u0641\\u064A\\u064A\\u0646 - \\u0627\\u0644\\u0633\\u0644\\u0627\\u0645 - \\u0623\\u0645\\u0627\\u0645 \\u0627\\u0644\\u0633\\u0648\\u0628\\u0631 \\u062C\\u064A\\u062A</p>\\n            <p>\\u0645\\u0648\\u0628\\u0627\\u064A\\u0644: \\u0660\\u0661\\u0660\\u0662\\u0660\\u0666\\u0663\\u0660\\u0666\\u0667\\u0667 - \\u0660\\u0661\\u0660\\u0666\\u0662\\u0663\\u0669\\u0660\\u0668\\u0667\\u0660</p>\\n          </div>\\n        </div>\\n\\n        <!-- Note -->\\n        <div style=\\\"text-align: center; margin-top: 20px; font-size: 12px; color: #666;\\\">\\n          <p>\\u064A\\u0642\\u0631 \\u0627\\u0644\\u0645\\u0634\\u062A\\u0631\\u064A \\u0628\\u0623\\u0646\\u0647 \\u0642\\u0627\\u0645 \\u0628\\u0645\\u0639\\u0627\\u064A\\u0646\\u0629 \\u0627\\u0644\\u0628\\u0636\\u0627\\u0639\\u0629 \\u0648\\u0642\\u0628\\u0648\\u0644\\u0647\\u0627</p>\\n        </div>\\n      </body>\\n      </html>\\n    \");const printWindow=window.open('','_blank');printWindow.document.write(printContent);printWindow.document.close();printWindow.print();};const clearAllInvoices=async()=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ±ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.'))return;try{await axios.delete(\"\".concat(API,\"/invoices/clear-all\"));fetchInvoices();alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ±');}catch(error){console.error('Error clearing invoices:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');}};const filteredInvoices=invoices.filter(invoice=>{const matchesStatus=filterStatus===''||invoice.status===filterStatus;const matchesSearch=searchTerm===''||invoice.invoice_number.toLowerCase().includes(searchTerm.toLowerCase())||invoice.customer_name.toLowerCase().includes(searchTerm.toLowerCase());return matchesStatus&&matchesSearch;});return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-4\",children:\"\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:clearAllInvoices,className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchInvoices,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"border border-gray-300 rounded px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"\\u064A\\u0648\\u0645\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0623\\u0633\\u0628\\u0648\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0634\\u0647\\u0631\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0633\\u0646\\u0648\\u064A\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-4 rounded-lg shadow-md mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0628\\u062D\\u062B\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0623\\u0648 \\u0627\\u0633\\u0645 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\",className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0641\\u0644\\u062A\\u0631\\u0629 \\u062D\\u0633\\u0628 \\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsxs(\"select\",{value:filterStatus,onChange:e=>setFilterStatus(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u062D\\u0627\\u0644\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629\",children:\"\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u063A\\u064A\\u0631 \\u0645\\u062F\\u0641\\u0648\\u0639\\u0629\",children:\"\\u063A\\u064A\\u0631 \\u0645\\u062F\\u0641\\u0648\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629 \\u062C\\u0632\\u0626\\u064A\\u0627\\u064B\",children:\"\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629 \\u062C\\u0632\\u0626\\u064A\\u0627\\u064B\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0627\\u0646\\u062A\\u0638\\u0627\\u0631\",children:\"\\u0627\\u0646\\u062A\\u0638\\u0627\\u0631\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u062A\\u0645 \\u0627\\u0644\\u062A\\u0646\\u0641\\u064A\\u0630\",children:\"\\u062A\\u0645 \\u0627\\u0644\\u062A\\u0646\\u0641\\u064A\\u0630\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSearchTerm('');setFilterStatus('');},className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0645\\u0633\\u062D \\u0627\\u0644\\u0641\\u0644\\u0627\\u062A\\u0631\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-4 rounded-lg text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-blue-800\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-blue-600\",children:invoices.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 p-4 rounded-lg text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-green-800\",children:\"\\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-green-600\",children:invoices.filter(inv=>inv.status==='Ù…Ø¯ÙÙˆØ¹Ø©').length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 p-4 rounded-lg text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-red-800\",children:\"\\u063A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-red-600\",children:invoices.filter(inv=>inv.status==='ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©').length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 p-4 rounded-lg text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-yellow-800\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-yellow-600\",children:[\"\\u062C.\\u0645 \",invoices.reduce((sum,inv)=>sum+(inv.total_amount||0),0).toFixed(2)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639 \\u0627\\u0644\\u0641\\u0631\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062E\\u0635\\u0645\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0646\\u0647\\u0627\\u0626\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredInvoices.map(invoice=>{var _invoice$subtotal,_invoice$total_amount2,_ref5;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:invoice.invoice_number}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.customer_name}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(invoice.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.payment_method}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:[\"\\u062C.\\u0645 \",((_invoice$subtotal=invoice.subtotal)===null||_invoice$subtotal===void 0?void 0:_invoice$subtotal.toFixed(2))||((_invoice$total_amount2=invoice.total_amount)===null||_invoice$total_amount2===void 0?void 0:_invoice$total_amount2.toFixed(2))||'0.00']}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-red-600\",children:invoice.discount&&invoice.discount>0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u062C.\\u0645 \",invoice.discount.toFixed(2)]}),invoice.discount_type==='percentage'&&invoice.discount_value&&/*#__PURE__*/_jsxs(\"small\",{className:\"block text-xs\",children:[\"(%\",invoice.discount_value,\")\"]})]}):/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:\"\\u0644\\u0627 \\u064A\\u0648\\u062C\\u062F\"})}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold text-green-600\",children:[\"\\u062C.\\u0645 \",((_ref5=invoice.total_after_discount||invoice.total_amount)===null||_ref5===void 0?void 0:_ref5.toFixed(2))||'0.00']}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm cursor-pointer \".concat(invoice.status==='Ù…Ø¯ÙÙˆØ¹Ø©'?'bg-green-100 text-green-800':invoice.status==='ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©'?'bg-red-100 text-red-800':invoice.status==='Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹'?'bg-yellow-100 text-yellow-800':invoice.status==='Ø§Ù†ØªØ¸Ø§Ø±'?'bg-blue-100 text-blue-800':invoice.status==='ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°'?'bg-green-100 text-green-800':invoice.status==='ØªÙ… Ø§Ù„ØªØµÙ†ÙŠØ¹'?'bg-purple-100 text-purple-800':'bg-gray-100 text-gray-800'),children:invoice.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>printInvoice(invoice),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>startEditInvoice(invoice),className:\"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>changePaymentMethod(invoice.id),className:\"bg-purple-500 text-white px-2 py-1 rounded text-sm hover:bg-purple-600\",title:\"\\u062A\\u063A\\u064A\\u064A\\u0631 \\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639\",children:\"\\uD83D\\uDCB3 \\u062A\\u062D\\u0648\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>cancelInvoice(invoice.id),className:\"bg-red-600 text-white px-2 py-1 rounded text-sm hover:bg-red-700\",title:\"\\u0625\\u0644\\u063A\\u0627\\u0621 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0648\\u0625\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F\",children:\"\\u274C \\u0625\\u0644\\u063A\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteInvoice(invoice.id),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641\"}),invoice.status==='Ø§Ù†ØªØ¸Ø§Ø±'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateInvoiceStatus(invoice.id,'ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°'),className:\"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600\",children:\"\\u062A\\u0645 \\u0627\\u0644\\u062A\\u0646\\u0641\\u064A\\u0630\"})]})})]},invoice.id);})})]}),filteredInvoices.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u062A\\u0637\\u0627\\u0628\\u0642 \\u0645\\u0639\\u0627\\u064A\\u064A\\u0631 \\u0627\\u0644\\u0628\\u062D\\u062B\"})]})]}),editingInvoice&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-lg w-full max-w-4xl max-h-screen overflow-y-auto\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-4\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.invoice_title,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{invoice_title:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0634\\u0631\\u0641\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.supervisor_name,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{supervisor_name:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0634\\u0631\\u0641 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.customer_name,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{customer_name:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639\"}),/*#__PURE__*/_jsxs(\"select\",{value:editForm.payment_method,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{payment_method:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u0646\\u0642\\u062F\\u064A\",children:\"\\u0646\\u0642\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 010\",children:\"\\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 010\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0643\\u0627\\u0634 0100\",children:\"\\u0643\\u0627\\u0634 0100\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0622\\u062C\\u0644\",children:\"\\u0622\\u062C\\u0644\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0627\\u0646\\u0633\\u062A\\u0627 \\u0628\\u0627\\u064A\",children:\"\\u0627\\u0646\\u0633\\u062A\\u0627 \\u0628\\u0627\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Yad_Elsawy\",children:\"Yad Elsawy\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0635\\u0645\"}),/*#__PURE__*/_jsxs(\"select\",{value:editForm.discount_type,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{discount_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"amount\",children:\"\\u0645\\u0628\\u0644\\u063A \\u062B\\u0627\\u0628\\u062A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"percentage\",children:\"\\u0646\\u0633\\u0628\\u0629 \\u0645\\u0626\\u0648\\u064A\\u0629\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0642\\u064A\\u0645\\u0629 \\u0627\\u0644\\u062E\\u0635\\u0645\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:editForm.discount_value,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{discount_value:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:editForm.discount_type==='percentage'?'0-100':'0.00'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"textarea\",{value:editForm.notes,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{notes:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",rows:\"3\",placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0625\\u0636\\u0627\\u0641\\u064A\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium mb-2\",children:\"\\u0639\\u0646\\u0627\\u0635\\u0631 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:editForm.items.map((item,index)=>{var _item$local_product_d,_item$local_product_d2;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.product_type==='local'||item.local_product_details?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:item.product_name||\"\".concat(((_item$local_product_d=item.local_product_details)===null||_item$local_product_d===void 0?void 0:_item$local_product_d.product_size)||'',\" - \").concat(((_item$local_product_d2=item.local_product_details)===null||_item$local_product_d2===void 0?void 0:_item$local_product_d2.product_type)||''),onChange:e=>{const newItems=[...editForm.items];newItems[index].product_name=e.target.value;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},className:\"w-full p-1 border border-gray-300 rounded\",placeholder:\"\\u0645\\u0642\\u0627\\u0633 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C - \\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-medium w-16\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644:\"}),/*#__PURE__*/_jsxs(\"select\",{value:item.seal_type||'',onChange:e=>{const newItems=[...editForm.items];newItems[index].seal_type=e.target.value;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},className:\"flex-1 p-1 text-xs border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0646\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"option\",{value:\"RSL\",children:\"RSL\"}),/*#__PURE__*/_jsx(\"option\",{value:\"RS\",children:\"RS\"}),/*#__PURE__*/_jsx(\"option\",{value:\"RSS\",children:\"RSS\"}),/*#__PURE__*/_jsx(\"option\",{value:\"RSE\",children:\"RSE\"}),/*#__PURE__*/_jsx(\"option\",{value:\"B17\",children:\"B17\"}),/*#__PURE__*/_jsx(\"option\",{value:\"B3\",children:\"B3\"}),/*#__PURE__*/_jsx(\"option\",{value:\"B14\",children:\"B14\"}),/*#__PURE__*/_jsx(\"option\",{value:\"B1\",children:\"B1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"R15\",children:\"R15\"}),/*#__PURE__*/_jsx(\"option\",{value:\"R17\",children:\"R17\"}),/*#__PURE__*/_jsx(\"option\",{value:\"W1\",children:\"W1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"W4\",children:\"W4\"}),/*#__PURE__*/_jsx(\"option\",{value:\"W5\",children:\"W5\"}),/*#__PURE__*/_jsx(\"option\",{value:\"W11\",children:\"W11\"}),/*#__PURE__*/_jsx(\"option\",{value:\"WBT\",children:\"WBT\"}),/*#__PURE__*/_jsx(\"option\",{value:\"XR\",children:\"XR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"CH\",children:\"CH\"}),/*#__PURE__*/_jsx(\"option\",{value:\"VR\",children:\"VR\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-medium w-16\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629:\"}),/*#__PURE__*/_jsxs(\"select\",{value:item.material_type||'',onChange:e=>{const newItems=[...editForm.items];newItems[index].material_type=e.target.value;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},className:\"flex-1 p-1 text-xs border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"option\",{value:\"NBR\",children:\"NBR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BUR\",children:\"BUR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BT\",children:\"BT\"}),/*#__PURE__*/_jsx(\"option\",{value:\"VT\",children:\"VT\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BOOM\",children:\"BOOM\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:item.inner_diameter||'',onChange:e=>{const newItems=[...editForm.items];newItems[index].inner_diameter=parseFloat(e.target.value)||0;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},placeholder:\"\\u062F\\u0627\\u062E\\u0644\\u064A\",className:\"w-12 p-1 text-xs border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:item.outer_diameter||'',onChange:e=>{const newItems=[...editForm.items];newItems[index].outer_diameter=parseFloat(e.target.value)||0;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},placeholder:\"\\u062E\\u0627\\u0631\\u062C\\u064A\",className:\"w-12 p-1 text-xs border border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:item.height||'',onChange:e=>{const newItems=[...editForm.items];newItems[index].height=parseFloat(e.target.value)||0;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},placeholder:\"\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639\",className:\"w-12 p-1 text-xs border border-gray-300 rounded\"})]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:item.quantity,onChange:e=>{const newItems=[...editForm.items];newItems[index].quantity=parseInt(e.target.value)||0;newItems[index].total_price=newItems[index].unit_price*newItems[index].quantity;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},className:\"w-full p-1 border border-gray-300 rounded\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:item.unit_price,onChange:e=>{const newItems=[...editForm.items];newItems[index].unit_price=parseFloat(e.target.value)||0;newItems[index].total_price=newItems[index].unit_price*newItems[index].quantity;setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},className:\"w-full p-1 border border-gray-300 rounded\"})}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-semibold\",children:[\"\\u062C.\\u0645 \",(item.total_price||0).toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const newItems=editForm.items.filter((_,i)=>i!==index);setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:newItems}));},className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641\"})})]},index);})})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{// Add a new empty item for editing\nconst newItem={seal_type:'',material_type:'',inner_diameter:'',outer_diameter:'',height:'',quantity:1,unit_price:0,total_price:0};setEditForm(_objectSpread(_objectSpread({},editForm),{},{items:[...editForm.items,newItem]}));},className:\"mt-2 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0646\\u062A\\u062C \\u062C\\u062F\\u064A\\u062F\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:cancelEdit,className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"button\",{onClick:saveInvoiceEdit,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u062D\\u0641\\u0638 \\u0627\\u0644\\u062A\\u0639\\u062F\\u064A\\u0644\\u0627\\u062A\"})]})]})})]});};// Deleted Invoices Component\nconst DeletedInvoices=()=>{const[deletedInvoices,setDeletedInvoices]=useState([]);const[searchTerm,setSearchTerm]=useState('');const{user}=useAuth();useEffect(()=>{fetchDeletedInvoices();},[]);const fetchDeletedInvoices=async()=>{try{const response=await axios.get(\"\".concat(API,\"/deleted-invoices\"));setDeletedInvoices(response.data||[]);}catch(error){console.error('Error fetching deleted invoices:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©');}};const handleRestore=async(invoiceId,invoiceNumber)=>{if(!confirm(\"\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u0627\\u0633\\u062A\\u0639\\u0627\\u062F\\u0629 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \".concat(invoiceNumber,\"\\u061F\\n\\n\\u0645\\u0644\\u0627\\u062D\\u0638\\u0629: \\u0633\\u064A\\u062A\\u0645 \\u0627\\u0633\\u062A\\u0639\\u0627\\u062F\\u0629 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0641\\u0642\\u0637\\u060C \\u0644\\u0646 \\u064A\\u062A\\u0645 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0623\\u0648 \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629 \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0627\\u064B\"))){return;}try{const response=await axios.post(\"\".concat(API,\"/deleted-invoices/\").concat(invoiceId,\"/restore\"),null,{params:{username:user===null||user===void 0?void 0:user.username}});alert(response.data.message+'\\n\\n'+(response.data.warning||''));fetchDeletedInvoices();}catch(error){var _error$response15,_error$response15$dat;console.error('Error restoring invoice:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©: '+(((_error$response15=error.response)===null||_error$response15===void 0?void 0:(_error$response15$dat=_error$response15.data)===null||_error$response15$dat===void 0?void 0:_error$response15$dat.detail)||error.message));}};const handlePermanentDelete=async(invoiceId,invoiceNumber)=>{if(!confirm(\"\\u26A0\\uFE0F \\u062A\\u062D\\u0630\\u064A\\u0631: \\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u062D\\u0630\\u0641 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \".concat(invoiceNumber,\" \\u0646\\u0647\\u0627\\u0626\\u064A\\u0627\\u064B\\u061F\\n\\n\\u0647\\u0630\\u0627 \\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621 \\u0644\\u0627 \\u064A\\u0645\\u0643\\u0646 \\u0627\\u0644\\u062A\\u0631\\u0627\\u062C\\u0639 \\u0639\\u0646\\u0647!\"))){return;}try{await axios.delete(\"\".concat(API,\"/deleted-invoices/\").concat(invoiceId));alert('ØªÙ… Ø­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹');fetchDeletedInvoices();}catch(error){var _error$response16,_error$response16$dat;console.error('Error deleting invoice:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø©: '+(((_error$response16=error.response)===null||_error$response16===void 0?void 0:(_error$response16$dat=_error$response16.data)===null||_error$response16$dat===void 0?void 0:_error$response16$dat.detail)||error.message));}};const filteredInvoices=deletedInvoices.filter(invoice=>{var _invoice$invoice_numb,_invoice$customer_nam,_invoice$payment_meth;const searchLower=searchTerm.toLowerCase();return((_invoice$invoice_numb=invoice.invoice_number)===null||_invoice$invoice_numb===void 0?void 0:_invoice$invoice_numb.toLowerCase().includes(searchLower))||((_invoice$customer_nam=invoice.customer_name)===null||_invoice$customer_nam===void 0?void 0:_invoice$customer_nam.toLowerCase().includes(searchLower))||((_invoice$payment_meth=invoice.payment_method)===null||_invoice$payment_meth===void 0?void 0:_invoice$payment_meth.toLowerCase().includes(searchLower));});return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062D\\u0630\\u0648\\u0641\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchDeletedInvoices,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\uD83D\\uDD04 \\u062A\\u062D\\u062F\\u064A\\u062B\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"\\u0627\\u0644\\u0628\\u062D\\u062B (\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\\u060C \\u0627\\u0633\\u0645 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\\u060C \\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639...)\",className:\"w-full p-2 border border-gray-300 rounded\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-md overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full border-collapse\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u062A\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u062D\\u0630\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredInvoices.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"7\",className:\"border border-gray-300 p-4 text-center text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0645\\u062D\\u0630\\u0648\\u0641\\u0629\"})}):filteredInvoices.map(invoice=>{var _invoice$total_amount3;return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-medium\",children:invoice.invoice_number}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(invoice.created_at).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.customer_name}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 font-bold\",children:[(_invoice$total_amount3=invoice.total_amount)===null||_invoice$total_amount3===void 0?void 0:_invoice$total_amount3.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.payment_method}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-sm text-gray-600\",children:new Date(invoice.deleted_at).toLocaleDateString('ar-EG',{year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse justify-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRestore(invoice.id,invoice.invoice_number),className:\"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600\",children:\"\\u21A9\\uFE0F \\u0627\\u0633\\u062A\\u0639\\u0627\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePermanentDelete(invoice.id,invoice.invoice_number),className:\"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700\",children:\"\\uD83D\\uDDD1\\uFE0F \\u062D\\u0630\\u0641 \\u0646\\u0647\\u0627\\u0626\\u064A\"})]})})]},invoice.id);})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 bg-blue-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-700\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062D\\u0630\\u0648\\u0641\\u0629:\"}),\" \",filteredInvoices.length]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-600 mt-2\",children:[\"\\uD83D\\uDCA1 \",/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0629:\"}),\" \\u0627\\u0633\\u062A\\u0639\\u0627\\u062F\\u0629 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0633\\u062A\\u0631\\u062C\\u0639\\u0647\\u0627 \\u0625\\u0644\\u0649 \\u0642\\u0627\\u0626\\u0645\\u0629 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0646\\u0634\\u0637\\u0629\\u060C \\u0644\\u0643\\u0646 \\u0644\\u0646 \\u064A\\u062A\\u0645 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0645\\u0648\\u0627\\u062F \\u0623\\u0648 \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629 \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0627\\u064B.\"]})]})]});};// Customer Statement Component (ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨)\nconst CustomerStatement=()=>{var _statement$summary$to,_statement$summary$to2,_statement$summary$fi;const[customers,setCustomers]=useState([]);const[selectedCustomer,setSelectedCustomer]=useState('');const[statement,setStatement]=useState(null);const[fromDate,setFromDate]=useState('');const[toDate,setToDate]=useState('');const[loading,setLoading]=useState(false);useEffect(()=>{fetchCustomers();},[]);const fetchCustomers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/customers\"));// Sort customers alphabetically by name\nconst sortedCustomers=(response.data||[]).sort((a,b)=>a.name.localeCompare(b.name,'ar'));setCustomers(sortedCustomers);}catch(error){console.error('Error fetching customers:',error);}};const fetchStatement=async()=>{if(!selectedCustomer){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø¹Ù…ÙŠÙ„');return;}setLoading(true);try{const params={};if(fromDate)params.from_date=fromDate;if(toDate)params.to_date=toDate;const response=await axios.get(\"\".concat(API,\"/customer-statement/\").concat(selectedCustomer),{params});setStatement(response.data);}catch(error){var _error$response17,_error$response17$dat;console.error('Error fetching statement:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨: '+(((_error$response17=error.response)===null||_error$response17===void 0?void 0:(_error$response17$dat=_error$response17.data)===null||_error$response17$dat===void 0?void 0:_error$response17$dat.detail)||error.message));}finally{setLoading(false);}};const printStatement=()=>{var _summary$total_credit,_summary$total_debit,_summary$final_balanc;if(!statement)return;const printWindow=window.open('','','width=800,height=600');const customer=statement.customer;const transactions=statement.transactions||[];const summary=statement.summary||{};printWindow.document.write(\"\\n      <!DOCTYPE html>\\n      <html dir=\\\"rtl\\\">\\n      <head>\\n        <title>\\u0643\\u0634\\u0641 \\u062D\\u0633\\u0627\\u0628 - \".concat(customer.name,\"</title>\\n        <style>\\n          body {\\n            font-family: Arial, sans-serif;\\n            padding: 20px;\\n            direction: rtl;\\n          }\\n          .header {\\n            text-align: center;\\n            margin-bottom: 30px;\\n            border-bottom: 2px solid #333;\\n            padding-bottom: 10px;\\n          }\\n          .info-section {\\n            margin-bottom: 20px;\\n            display: flex;\\n            justify-content: space-between;\\n          }\\n          .info-box {\\n            border: 1px solid #ddd;\\n            padding: 10px;\\n            border-radius: 5px;\\n            width: 45%;\\n          }\\n          table {\\n            width: 100%;\\n            border-collapse: collapse;\\n            margin-bottom: 20px;\\n          }\\n          th, td {\\n            border: 1px solid #ddd;\\n            padding: 8px;\\n            text-align: center;\\n          }\\n          th {\\n            background-color: #f2f2f2;\\n            font-weight: bold;\\n          }\\n          .summary {\\n            margin-top: 20px;\\n            border-top: 2px solid #333;\\n            padding-top: 10px;\\n          }\\n          .summary-row {\\n            display: flex;\\n            justify-content: space-between;\\n            padding: 5px 0;\\n            font-size: 14px;\\n          }\\n          .final-balance {\\n            font-size: 18px;\\n            font-weight: bold;\\n            color: \").concat(summary.final_balance>=0?'green':'red',\";\\n          }\\n          @media print {\\n            body { padding: 10px; }\\n          }\\n        </style>\\n      </head>\\n      <body>\\n        <div class=\\\"header\\\">\\n          <h1>\\u0643\\u0634\\u0641 \\u062D\\u0633\\u0627\\u0628 \\u0639\\u0627\\u0645</h1>\\n          <p>\\u0645\\u0631\\u062A\\u0628 \\u0628\\u062A\\u0648\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u0642\\u064A\\u0648\\u062F</p>\\n        </div>\\n\\n        <div class=\\\"info-section\\\">\\n          <div class=\\\"info-box\\\">\\n            <p><strong>\\u0627\\u0633\\u0645 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628:</strong> \").concat(customer.name,\"</p>\\n            <p><strong>\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0647\\u0627\\u062A\\u0641:</strong> \").concat(customer.phone||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',\"</p>\\n            \").concat(customer.is_also_supplier?'<p><strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…ÙˆØ±Ø¯ Ø£ÙŠØ¶Ø§Ù‹</p>':'',\"\\n          </div>\\n          <div class=\\\"info-box\\\">\\n            <p><strong>\\u0645\\u0646 \\u062A\\u0627\\u0631\\u064A\\u062E:</strong> \").concat(statement.period.from_date,\"</p>\\n            <p><strong>\\u0625\\u0644\\u0649 \\u062A\\u0627\\u0631\\u064A\\u062E:</strong> \").concat(statement.period.to_date,\"</p>\\n            <p><strong>\\u062A\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u0637\\u0628\\u0627\\u0639\\u0629:</strong> \").concat(new Date().toLocaleDateString('ar-EG'),\"</p>\\n          </div>\\n        </div>\\n\\n        <table>\\n          <thead>\\n            <tr>\\n              <th>\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E</th>\\n              <th>\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0642\\u064A\\u062F</th>\\n              <th>\\u0627\\u0644\\u0628\\u064A\\u0627\\u0646</th>\\n              <th>\\u0645\\u062F\\u064A\\u0646</th>\\n              <th>\\u062F\\u0627\\u0626\\u0646</th>\\n              <th>\\u0627\\u0644\\u0631\\u0635\\u064A\\u062F</th>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            \").concat(transactions.map(t=>\"\\n              <tr>\\n                <td>\".concat(new Date(t.date).toLocaleDateString('ar-EG'),\"</td>\\n                <td>\").concat(t.type,\"</td>\\n                <td>\").concat(t.description,\"</td>\\n                <td>\").concat(t.debit>0?t.debit.toFixed(2):'-',\"</td>\\n                <td>\").concat(t.credit>0?t.credit.toFixed(2):'-',\"</td>\\n                <td>\").concat(t.balance.toFixed(2),\"</td>\\n              </tr>\\n            \")).join(''),\"\\n          </tbody>\\n        </table>\\n\\n        <div class=\\\"summary\\\">\\n          <div class=\\\"summary-row\\\">\\n            <span><strong>\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u062F\\u0627\\u0626\\u0646:</strong></span>\\n            <span>\").concat(((_summary$total_credit=summary.total_credit)===null||_summary$total_credit===void 0?void 0:_summary$total_credit.toFixed(2))||'0.00',\" \\u062C.\\u0645</span>\\n          </div>\\n          <div class=\\\"summary-row\\\">\\n            <span><strong>\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u062F\\u064A\\u0646:</strong></span>\\n            <span>\").concat(((_summary$total_debit=summary.total_debit)===null||_summary$total_debit===void 0?void 0:_summary$total_debit.toFixed(2))||'0.00',\" \\u062C.\\u0645</span>\\n          </div>\\n          <div class=\\\"summary-row final-balance\\\">\\n            <span><strong>\\u0627\\u0644\\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0646\\u0647\\u0627\\u0626\\u064A:</strong></span>\\n            <span>\").concat(((_summary$final_balanc=summary.final_balance)===null||_summary$final_balanc===void 0?void 0:_summary$final_balanc.toFixed(2))||'0.00',\" \\u062C.\\u0645</span>\\n          </div>\\n        </div>\\n\\n        <p style=\\\"margin-top: 30px; text-align: left;\\\">\\u0627\\u0644\\u0645\\u062D\\u0627\\u0633\\u0628 \\u064A\\u0639\\u062A\\u0645\\u062F\\u060C\\u060C\\u060C</p>\\n      </body>\\n      </html>\\n    \"));printWindow.document.close();printWindow.print();};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-6\",children:\"\\u0643\\u0634\\u0641 \\u062D\\u0633\\u0627\\u0628 \\u0627\\u0644\\u0639\\u0645\\u0644\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 *\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedCustomer,onChange:e=>setSelectedCustomer(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- \\u0627\\u062E\\u062A\\u0631 \\u0639\\u0645\\u064A\\u0644 --\"}),customers.map(customer=>/*#__PURE__*/_jsx(\"option\",{value:customer.id,children:customer.name},customer.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0646 \\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:fromDate,onChange:e=>setFromDate(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0625\\u0644\\u0649 \\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:toDate,onChange:e=>setToDate(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:fetchStatement,disabled:loading||!selectedCustomer,className:\"w-full px-4 py-2 rounded text-white \".concat(loading||!selectedCustomer?'bg-gray-400 cursor-not-allowed':'bg-blue-500 hover:bg-blue-600'),children:loading?'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...':'ðŸ“‹ Ø¹Ø±Ø¶ ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨'})})]})}),statement&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6 pb-4 border-b-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:\"\\u0643\\u0634\\u0641 \\u062D\\u0633\\u0627\\u0628 \\u0639\\u0627\\u0645\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"\\u0645\\u0631\\u062A\\u0628 \\u0628\\u062A\\u0648\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u0642\\u064A\\u0648\\u062F\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:printStatement,className:\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\",children:\"\\uD83D\\uDDA8\\uFE0F \\u0637\\u0628\\u0627\\u0639\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-4 rounded\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628:\"}),\" \",statement.customer.name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0647\\u0627\\u062A\\u0641:\"}),\" \",statement.customer.phone||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯']}),statement.customer.is_also_supplier&&/*#__PURE__*/_jsx(\"p\",{className:\"text-orange-600 font-medium\",children:\"\\u26A0\\uFE0F \\u0647\\u0630\\u0627 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0645\\u0648\\u0631\\u062F \\u0623\\u064A\\u0636\\u0627\\u064B\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0645\\u0646 \\u062A\\u0627\\u0631\\u064A\\u062E:\"}),\" \",statement.period.from_date]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0625\\u0644\\u0649 \\u062A\\u0627\\u0631\\u064A\\u062E:\"}),\" \",statement.period.to_date]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E:\"}),\" \",new Date().toLocaleDateString('ar-EG')]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto mb-6\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0642\\u064A\\u062F\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0631\\u062C\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0645\\u062F\\u064A\\u0646\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u062F\\u0627\\u0626\\u0646\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0631\\u0635\\u064A\\u062F\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:statement.transactions.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"7\",className:\"border border-gray-300 p-4 text-center text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0645\\u0639\\u0627\\u0645\\u0644\\u0627\\u062A \\u0641\\u064A \\u0647\\u0630\\u0647 \\u0627\\u0644\\u0641\\u062A\\u0631\\u0629\"})}):statement.transactions.map((trans,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(trans.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:trans.type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-right\",children:trans.description}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:trans.reference}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-red-600 font-medium\",children:trans.debit>0?trans.debit.toFixed(2):'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-green-600 font-medium\",children:trans.credit>0?trans.credit.toFixed(2):'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 font-bold\",children:trans.balance.toFixed(2)})]},index))})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-lg border-t-4 border-blue-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-1\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u062F\\u0627\\u0626\\u0646\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-green-600\",children:[(_statement$summary$to=statement.summary.total_credit)===null||_statement$summary$to===void 0?void 0:_statement$summary$to.toFixed(2),\" \\u062C.\\u0645\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-1\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u062F\\u064A\\u0646\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-red-600\",children:[(_statement$summary$to2=statement.summary.total_debit)===null||_statement$summary$to2===void 0?void 0:_statement$summary$to2.toFixed(2),\" \\u062C.\\u0645\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-1\",children:\"\\u0627\\u0644\\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0646\\u0647\\u0627\\u0626\\u064A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold \".concat(statement.summary.final_balance>=0?'text-green-600':'text-red-600'),children:[(_statement$summary$fi=statement.summary.final_balance)===null||_statement$summary$fi===void 0?void 0:_statement$summary$fi.toFixed(2),\" \\u062C.\\u0645\"]})]})]})})]}),!statement&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-6 rounded-lg border-r-4 border-blue-500\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold mb-2\",children:\"\\uD83D\\uDCDD \\u062A\\u0639\\u0644\\u064A\\u0645\\u0627\\u062A:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside text-sm text-gray-700 space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628 \\u0645\\u0646 \\u0627\\u0644\\u0642\\u0627\\u0626\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u064A\\u0645\\u0643\\u0646\\u0643 \\u062A\\u062D\\u062F\\u064A\\u062F \\u0641\\u062A\\u0631\\u0629 \\u0632\\u0645\\u0646\\u064A\\u0629 \\u0645\\u0639\\u064A\\u0646\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0636\\u063A\\u0637 \\u0639\\u0644\\u0649 \\\"\\u0639\\u0631\\u0636 \\u0643\\u0634\\u0641 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\\\" \\u0644\\u0639\\u0631\\u0636 \\u0627\\u0644\\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u064A\\u0645\\u0643\\u0646\\u0643 \\u0637\\u0628\\u0627\\u0639\\u0629 \\u0643\\u0634\\u0641 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628 \\u0628\\u0627\\u0644\\u0636\\u063A\\u0637 \\u0639\\u0644\\u0649 \\u0632\\u0631 \\u0627\\u0644\\u0637\\u0628\\u0627\\u0639\\u0629\"}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0629:\"}),\" \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 = \\u062F\\u0627\\u0626\\u0646 (\\u0645\\u0648\\u062C\\u0628) | \\u0627\\u0644\\u062F\\u0641\\u0639\\u0627\\u062A \\u0648\\u0627\\u0644\\u0645\\u0634\\u062A\\u0631\\u064A\\u0627\\u062A = \\u0645\\u062F\\u064A\\u0646 (\\u0633\\u0627\\u0644\\u0628)\"]})]})]})]});};// Work Orders Component\nconst WorkOrders=()=>{const[workOrders,setWorkOrders]=useState([]);const[invoices,setInvoices]=useState([]);const[selectedInvoices,setSelectedInvoices]=useState([]);const[newWorkOrder,setNewWorkOrder]=useState({title:'',description:'',priority:'Ø¹Ø§Ø¯ÙŠ'});const[showAddToExisting,setShowAddToExisting]=useState(false);const[selectedWorkOrderId,setSelectedWorkOrderId]=useState('');const[selectedInvoiceForAdd,setSelectedInvoiceForAdd]=useState('');useEffect(()=>{fetchWorkOrders();fetchInvoices();},[]);const fetchWorkOrders=async()=>{try{const response=await axios.get(\"\".concat(API,\"/work-orders\"));setWorkOrders(response.data);}catch(error){console.error('Error fetching work orders:',error);setWorkOrders([]);// Set empty array on error\n}};const fetchInvoices=async()=>{try{const response=await axios.get(\"\".concat(API,\"/invoices\"));setInvoices(response.data);}catch(error){console.error('Error fetching invoices:',error);}};const toggleInvoiceSelection=invoiceId=>{setSelectedInvoices(prev=>prev.includes(invoiceId)?prev.filter(id=>id!==invoiceId):[...prev,invoiceId]);};const createWorkOrderFromMultipleInvoices=async()=>{if(selectedInvoices.length===0){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ÙØ§ØªÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');return;}if(!newWorkOrder.title.trim()){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„');return;}try{// Get selected invoices data\nconst selectedInvoicesData=invoices.filter(inv=>selectedInvoices.includes(inv.id));// Clean invoices data (remove MongoDB ObjectIds)\nconst cleanInvoices=selectedInvoicesData.map(inv=>{const cleanInv=_objectSpread({},inv);if(cleanInv._id)delete cleanInv._id;return cleanInv;});// Create work order with multiple invoices\nconst workOrderData={title:newWorkOrder.title,description:newWorkOrder.description,priority:newWorkOrder.priority,invoices:cleanInvoices,total_amount:cleanInvoices.reduce((sum,inv)=>sum+(inv.total_amount||0),0),total_items:cleanInvoices.reduce((sum,inv)=>{var _inv$items;return sum+(((_inv$items=inv.items)===null||_inv$items===void 0?void 0:_inv$items.length)||0);},0)};const response=await axios.post(\"\".concat(API,\"/work-orders/multiple\"),workOrderData);if(response.data){alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ø¨Ù†Ø¬Ø§Ø­');// Reset form\nsetSelectedInvoices([]);setNewWorkOrder({title:'',description:'',priority:'Ø¹Ø§Ø¯ÙŠ'});// Refresh work orders list\nawait fetchWorkOrders();}}catch(error){var _error$response18,_error$response18$dat;console.error('Error creating work order:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„: '+(((_error$response18=error.response)===null||_error$response18===void 0?void 0:(_error$response18$dat=_error$response18.data)===null||_error$response18$dat===void 0?void 0:_error$response18$dat.detail)||error.message));}};const addInvoiceToExistingWorkOrder=async()=>{if(!selectedWorkOrderId||!selectedInvoiceForAdd){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ ÙˆØ§Ù„ÙØ§ØªÙˆØ±Ø©');return;}try{const response=await axios.put(\"\".concat(API,\"/work-orders/\").concat(selectedWorkOrderId,\"/add-invoice\"),null,{params:{invoice_id:selectedInvoiceForAdd}});if(response.data){alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¥Ù„Ù‰ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ø¨Ù†Ø¬Ø§Ø­');// Reset form\nsetSelectedWorkOrderId('');setSelectedInvoiceForAdd('');setShowAddToExisting(false);// Refresh work orders list\nawait fetchWorkOrders();}}catch(error){var _error$response19,_error$response19$dat;console.error('Error adding invoice to work order:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ§ØªÙˆØ±Ø©: '+(((_error$response19=error.response)===null||_error$response19===void 0?void 0:(_error$response19$dat=_error$response19.data)===null||_error$response19$dat===void 0?void 0:_error$response19$dat.detail)||error.message));}};const getInvoiceDetails=invoiceId=>{return invoices.find(inv=>inv.id===invoiceId);};const getAvailableInvoices=()=>{// Show invoices that are \"ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°\" or \"Ø§Ù†ØªØ¸Ø§Ø±\"\nreturn invoices.filter(invoice=>invoice.status==='ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°'||invoice.status==='Ø§Ù†ØªØ¸Ø§Ø±');};const getAvailableInvoicesForAdd=()=>{var _selectedWorkOrder$in;// Get invoices not already in the selected work order\nif(!selectedWorkOrderId)return getAvailableInvoices();const selectedWorkOrder=workOrders.find(wo=>wo.id===selectedWorkOrderId);if(!selectedWorkOrder)return getAvailableInvoices();const usedInvoiceIds=((_selectedWorkOrder$in=selectedWorkOrder.invoices)===null||_selectedWorkOrder$in===void 0?void 0:_selectedWorkOrder$in.map(inv=>inv.id))||[];return getAvailableInvoices().filter(invoice=>!usedInvoiceIds.includes(invoice.id));};const printWorkOrder=workOrder=>{var _workOrder$invoices;const workOrderInvoices=((_workOrder$invoices=workOrder.invoices)===null||_workOrder$invoices===void 0?void 0:_workOrder$invoices.map(invoiceData=>invoices.find(inv=>inv.id===invoiceData.id)||invoiceData).filter(inv=>inv))||[];const totalAmount=workOrderInvoices.reduce((sum,inv)=>sum+(inv.total_amount||0),0);const totalItems=workOrderInvoices.reduce((sum,inv)=>{var _inv$items2;return sum+(((_inv$items2=inv.items)===null||_inv$items2===void 0?void 0:_inv$items2.length)||0);},0);const printContent=\"\\n      <div style=\\\"font-family: Arial, sans-serif; direction: rtl; text-align: right;\\\">\\n        <div style=\\\"text-align: center; margin-bottom: 20px;\\\">\\n          <h1>\\u0645\\u0627\\u0633\\u062A\\u0631 \\u0633\\u064A\\u0644</h1>\\n          <p>\\u0627\\u0644\\u062D\\u0631\\u0641\\u064A\\u064A\\u0646 \\u0634\\u0627\\u0631\\u0639 \\u0627\\u0644\\u0633\\u0648\\u0628\\u0631 \\u062C\\u064A\\u062A - 01020630677</p>\\n          <h2 style=\\\"color: #333; margin-top: 20px;\\\">\\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644</h2>\\n        </div>\\n        \\n        <div style=\\\"margin-bottom: 20px;\\\">\\n          <strong>\\u0631\\u0642\\u0645 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644:</strong> \".concat(workOrder.id,\"<br>\\n          <strong>\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646:</strong> \").concat(workOrder.title||\"\\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 #\".concat(workOrder.id.slice(-8)),\"<br>\\n          <strong>\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E:</strong> \").concat(new Date(workOrder.created_at).toLocaleDateString('ar-EG'),\"<br>\\n          <strong>\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629:</strong> \").concat(workOrder.status||'Ø¬Ø¯ÙŠØ¯',\"<br>\\n          <strong>\\u0639\\u062F\\u062F \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631:</strong> \").concat(workOrderInvoices.length,\"<br>\\n          <strong>\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A:</strong> \\u062C.\\u0645 \").concat(totalAmount.toFixed(2),\"\\n          \").concat(workOrder.description?\"<br><strong>\\u0627\\u0644\\u0648\\u0635\\u0641:</strong> \".concat(workOrder.description):'',\"\\n          \").concat(workOrder.supervisor_name?\"<br><strong>\\u0627\\u0644\\u0645\\u0634\\u0631\\u0641 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639:</strong> \".concat(workOrder.supervisor_name):'',\"\\n          \").concat(workOrder.is_daily?\"<br><strong>\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0623\\u0645\\u0631:</strong> \\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 \\u064A\\u0648\\u0645\\u064A \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\":'',\"\\n        </div>\\n\\n        <h3 style=\\\"color: #333; margin-bottom: 10px;\\\">\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062F\\u0631\\u062C\\u0629:</h3>\\n        <table style=\\\"width: 100%; border-collapse: collapse; margin-bottom: 20px;\\\">\\n          <thead>\\n            <tr style=\\\"background-color: #f0f0f0;\\\">\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0639\\u062F\\u062F \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A</th>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            \").concat(workOrderInvoices.map(invoice=>{var _invoice$total_amount4,_invoice$items;return\"\\n              <tr>\\n                <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\".concat(invoice.invoice_number,\"</td>\\n                <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(invoice.customer_name,\"</td>\\n                <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(new Date(invoice.date).toLocaleDateString('ar-EG'),\"</td>\\n                <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u062C.\\u0645 \").concat(((_invoice$total_amount4=invoice.total_amount)===null||_invoice$total_amount4===void 0?void 0:_invoice$total_amount4.toFixed(2))||'0.00',\"</td>\\n                <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(((_invoice$items=invoice.items)===null||_invoice$items===void 0?void 0:_invoice$items.length)||0,\"</td>\\n              </tr>\\n            \");}).join(''),\"\\n          </tbody>\\n        </table>\\n\\n        <h3 style=\\\"color: #333; margin-bottom: 10px;\\\">\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A:</h3>\\n        <table style=\\\"width: 100%; border-collapse: collapse; margin-bottom: 20px;\\\">\\n          <thead>\\n            <tr style=\\\"background-color: #f0f0f0;\\\">\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0627\\u0644\\u0645\\u0642\\u0627\\u0633</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0627\\u0644\\u062E\\u0627\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\\u0629</th>\\n              <th style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629</th>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            \").concat(workOrderInvoices.map(invoice=>{var _invoice$items2;return((_invoice$items2=invoice.items)===null||_invoice$items2===void 0?void 0:_invoice$items2.map(item=>\"\\n                <tr>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\".concat(invoice.invoice_number,\"</td>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(item.local_product_details?item.local_product_details.product_type:item.seal_type||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',\"</td>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(item.local_product_details?'Ù…Ø­Ù„ÙŠ':item.material_type||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',\"</td>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(item.local_product_details?\"\".concat(item.local_product_details.product_size,\" - \").concat(item.local_product_details.product_type):item.inner_diameter&&item.outer_diameter&&item.height?\"\".concat(item.inner_diameter,\" \\xD7 \").concat(item.outer_diameter,\" \\xD7 \").concat(item.height).concat(item.wall_height?\" (\\u0627\\u0631\\u062A\\u0641\\u0627\\u0639 \\u0627\\u0644\\u062D\\u064A\\u0637\\u0629: \".concat(item.wall_height,\")\"):''):'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',\"</td>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(item.quantity,\"</td>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\").concat(item.local_product_details?'Ù…Ø­Ù„ÙŠ':item.material_used||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',\"</td>\\n                  <td style=\\\"border: 1px solid #ddd; padding: 8px;\\\">\\n                    \").concat(item.local_product_details?'Ù…Ø­Ù„ÙŠ':item.material_details?item.material_details.is_finished_product?'Ù…Ø®Ø²Ù† Ø§Ù†ØªØ§Ø¬ ØªØ§Ù…':\"\".concat(item.material_details.unit_code,\" / \").concat(item.material_details.inner_diameter,\"-\").concat(item.material_details.outer_diameter):\"\".concat(item.material_used||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',\" / \\u0645\\u0639\\u0644\\u0648\\u0645\\u0627\\u062A \\u063A\\u064A\\u0631 \\u0645\\u062A\\u0648\\u0641\\u0631\\u0629\"),\"\\n                  </td>\\n                </tr>\\n              \")).join(''))||'';}).join(''),\"\\n          </tbody>\\n        </table>\\n        \\n        <div style=\\\"margin-top: 40px; border-top: 1px solid #ddd; padding-top: 20px;\\\">\\n          <div style=\\\"float: left;\\\">\\n            <strong>\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639:</strong><br>\\n            <div style=\\\"margin-top: 10px; height: 50px; border: 1px solid #ddd;\\\"></div>\\n          </div>\\n          <div style=\\\"float: right;\\\">\\n            <strong>\\u062A\\u0648\\u0642\\u064A\\u0639 \\u0627\\u0644\\u0645\\u0633\\u0624\\u0648\\u0644:</strong><br>\\n            <div style=\\\"margin-top: 10px; height: 50px; border: 1px solid #ddd; width: 150px;\\\"></div>\\n          </div>\\n          <div style=\\\"clear: both;\\\"></div>\\n        </div>\\n      </div>\\n    \");const printWindow=window.open('','_blank');printWindow.document.write(printContent);printWindow.document.close();printWindow.print();};const clearAllWorkOrders=async()=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´ØºÙ„ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.'))return;try{await axios.delete(\"\".concat(API,\"/work-orders/clear-all\"));fetchWorkOrders();alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´ØºÙ„');}catch(error){console.error('Error clearing work orders:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');}};const deleteWorkOrder=async workOrderId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ù‡Ø°Ø§ØŸ'))return;try{await axios.delete(\"\".concat(API,\"/work-orders/\").concat(workOrderId));fetchWorkOrders();alert('ØªÙ… Ø­Ø°Ù Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error deleting work order:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-4\",children:\"\\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:clearAllWorkOrders,className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{fetchWorkOrders();fetchInvoices();},className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddToExisting(!showAddToExisting),className:\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\",children:showAddToExisting?'Ø¥Ø®ÙØ§Ø¡':'Ø¥Ø¶Ø§ÙØ© ÙØ§ØªÙˆØ±Ø© Ù„Ø£Ù…Ø± Ù…ÙˆØ¬ÙˆØ¯'}),/*#__PURE__*/_jsxs(\"select\",{className:\"border border-gray-300 rounded px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"\\u064A\\u0648\\u0645\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0623\\u0633\\u0628\\u0648\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0634\\u0647\\u0631\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0633\\u0646\\u0648\\u064A\"})]})]})]}),showAddToExisting&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 p-6 rounded-lg shadow-md mb-6 border border-yellow-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4 text-yellow-800\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0625\\u0644\\u0649 \\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 \\u0645\\u0648\\u062C\\u0648\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedWorkOrderId,onChange:e=>setSelectedWorkOrderId(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644\"}),workOrders.map(workOrder=>{var _workOrder$invoices2;return/*#__PURE__*/_jsxs(\"option\",{value:workOrder.id,children:[workOrder.title||\"\\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 #\".concat(workOrder.id.slice(-8)),\"(\",((_workOrder$invoices2=workOrder.invoices)===null||_workOrder$invoices2===void 0?void 0:_workOrder$invoices2.length)||0,\" \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629)\"]},workOrder.id);})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedInvoiceForAdd,onChange:e=>setSelectedInvoiceForAdd(e.target.value),className:\"w-full p-2 border border-gray-300 rounded\",disabled:!selectedWorkOrderId,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),getAvailableInvoicesForAdd().map(invoice=>{var _invoice$total_amount5;return/*#__PURE__*/_jsxs(\"option\",{value:invoice.id,children:[invoice.invoice_number,\" - \",invoice.customer_name,\"(\\u062C.\\u0645 \",((_invoice$total_amount5=invoice.total_amount)===null||_invoice$total_amount5===void 0?void 0:_invoice$total_amount5.toFixed(2))||'0.00',\")\"]},invoice.id);})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:addInvoiceToExistingWorkOrder,className:\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\",disabled:!selectedWorkOrderId||!selectedInvoiceForAdd,children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowAddToExisting(false);setSelectedWorkOrderId('');setSelectedInvoiceForAdd('');},className:\"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0646\\u0634\\u0627\\u0621 \\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 \\u062C\\u062F\\u064A\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644 *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newWorkOrder.title,onChange:e=>setNewWorkOrder(_objectSpread(_objectSpread({},newWorkOrder),{},{title:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0645\\u062B\\u0627\\u0644: \\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 \\u0631\\u0642\\u0645 1 - \\u064A\\u0646\\u0627\\u064A\\u0631 2025\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0623\\u0648\\u0644\\u0648\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"select\",{value:newWorkOrder.priority,onChange:e=>setNewWorkOrder(_objectSpread(_objectSpread({},newWorkOrder),{},{priority:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u0639\\u0627\\u062F\\u064A\",children:\"\\u0639\\u0627\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0645\\u0647\\u0645\",children:\"\\u0645\\u0647\\u0645\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0637\\u0627\\u0631\\u0626\",children:\"\\u0637\\u0627\\u0631\\u0626\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062E\\u062A\\u0627\\u0631\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-gray-100 rounded\",children:[selectedInvoices.length,\" \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0645\\u062D\\u062F\\u062F\\u0629\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0648\\u0635\\u0641 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644\"}),/*#__PURE__*/_jsx(\"textarea\",{value:newWorkOrder.description,onChange:e=>setNewWorkOrder(_objectSpread(_objectSpread({},newWorkOrder),{},{description:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded h-20\",placeholder:\"\\u0648\\u0635\\u0641 \\u0625\\u0636\\u0627\\u0641\\u064A (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4 max-h-60 overflow-y-auto border rounded p-4\",children:getAvailableInvoices().map(invoice=>{var _invoice$total_amount6,_invoice$items3;return/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-3 cursor-pointer transition-colors \".concat(selectedInvoices.includes(invoice.id)?'border-blue-500 bg-blue-50':'border-gray-300 hover:bg-gray-50'),onClick:()=>toggleInvoiceSelection(invoice.id),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedInvoices.includes(invoice.id),onChange:()=>{},className:\"ml-2\"}),/*#__PURE__*/_jsx(\"h5\",{className:\"font-semibold\",children:invoice.invoice_number})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644: \",invoice.customer_name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E: \",new Date(invoice.date).toLocaleDateString('ar-EG')]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium\",children:[\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A: \\u062C.\\u0645 \",((_invoice$total_amount6=invoice.total_amount)===null||_invoice$total_amount6===void 0?void 0:_invoice$total_amount6.toFixed(2))||'0.00']}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A: \",((_invoice$items3=invoice.items)===null||_invoice$items3===void 0?void 0:_invoice$items3.length)||0,\" \\u0635\\u0646\\u0641\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-block px-2 py-1 rounded text-xs mt-1 \".concat(invoice.status==='ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°'?'bg-green-100 text-green-800':'bg-blue-100 text-blue-800'),children:invoice.status})]},invoice.id);})}),getAvailableInvoices().length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0645\\u062A\\u0627\\u062D\\u0629 \\u0644\\u0625\\u0646\\u0634\\u0627\\u0621 \\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644\"}),selectedInvoices.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-3 bg-blue-100 rounded\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-semibold text-blue-800\",children:\"\\u0645\\u0644\\u062E\\u0635 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644:\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-700\",children:[\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631: \",selectedInvoices.length,\" \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-700\",children:[\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A: \\u062C.\\u0645 \",invoices.filter(inv=>selectedInvoices.includes(inv.id)).reduce((sum,inv)=>sum+(inv.total_amount||0),0).toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-700\",children:[\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A: \",invoices.filter(inv=>selectedInvoices.includes(inv.id)).reduce((sum,inv)=>{var _inv$items3;return sum+(((_inv$items3=inv.items)===null||_inv$items3===void 0?void 0:_inv$items3.length)||0);},0),\" \\u0635\\u0646\\u0641\"]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:createWorkOrderFromMultipleInvoices,className:\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\",disabled:selectedInvoices.length===0,children:[\"\\u0625\\u0646\\u0634\\u0627\\u0621 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644 (\",selectedInvoices.length,\" \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold mb-4\",children:[\"\\u0623\\u0648\\u0627\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644 (\",workOrders.length,\")\"]}),workOrders.map(workOrder=>{var _workOrder$total_amou;// Handle both single invoice and multiple invoices work orders\nconst workOrderInvoices=workOrder.invoices||(workOrder.invoice_id?[getInvoiceDetails(workOrder.invoice_id)]:[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-lg\",children:workOrder.title||\"\\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 #\".concat(workOrder.id.slice(-8))}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0623\\u0648\\u0644\\u0648\\u064A\\u0629:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mr-2 px-2 py-1 rounded text-sm \".concat(workOrder.priority==='Ø·Ø§Ø±Ø¦'?'bg-red-100 text-red-800':workOrder.priority==='Ù…Ù‡Ù…'?'bg-yellow-100 text-yellow-800':'bg-blue-100 text-blue-800'),children:workOrder.priority||'Ø¹Ø§Ø¯ÙŠ'})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u062A\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u0625\\u0646\\u0634\\u0627\\u0621:\"}),\" \",new Date(workOrder.created_at).toLocaleDateString('ar-EG')]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631:\"}),\" \",workOrderInvoices.filter(inv=>inv).length]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mr-2 px-2 py-1 rounded text-sm bg-blue-100 text-blue-800\",children:workOrder.status||'Ø¬Ø¯ÙŠØ¯'})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0628\\u0644\\u063A:\"}),\"\\u062C.\\u0645 \",((_workOrder$total_amou=workOrder.total_amount)===null||_workOrder$total_amou===void 0?void 0:_workOrder$total_amou.toFixed(2))||workOrderInvoices.reduce((sum,inv)=>sum+((inv===null||inv===void 0?void 0:inv.total_amount)||0),0).toFixed(2)]}),workOrder.description&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0648\\u0635\\u0641:\"}),\" \",workOrder.description]}),workOrder.supervisor_name&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0645\\u0634\\u0631\\u0641 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639:\"}),\" \",workOrder.supervisor_name]}),workOrder.is_daily&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0623\\u0645\\u0631:\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600\",children:\"\\u0623\\u0645\\u0631 \\u0634\\u063A\\u0644 \\u064A\\u0648\\u0645\\u064A \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium mb-2\",children:\"\\u0627\\u0644\\u0641\\u0648\\u0627\\u062A\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062F\\u0631\\u062C\\u0629:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\",children:workOrderInvoices.filter(invoice=>invoice).map((invoice,index)=>{var _invoice$total_amount7,_invoice$items4;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-3 rounded border\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629:\"}),\" \",invoice.invoice_number]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644:\"}),\" \",invoice.customer_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A:\"}),\" \\u062C.\\u0645 \",((_invoice$total_amount7=invoice.total_amount)===null||_invoice$total_amount7===void 0?void 0:_invoice$total_amount7.toFixed(2))||'0.00']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A:\"}),\" \",((_invoice$items4=invoice.items)===null||_invoice$items4===void 0?void 0:_invoice$items4.length)||0,\" \\u0635\\u0646\\u0641\"]})]},index);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto mb-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium mb-2\",children:\"\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A:\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0633\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0642\\u0627\\u0633\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062E\\u0627\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0643\\u0648\\u062F \\u0627\\u0644\\u0648\\u062D\\u062F\\u0629\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:workOrderInvoices.filter(invoice=>invoice).map(invoice=>{var _invoice$items5;return((_invoice$items5=invoice.items)===null||_invoice$items5===void 0?void 0:_invoice$items5.map((item,itemIndex)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:invoice.invoice_number}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.seal_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.material_type}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[item.inner_diameter,\" \\xD7 \",item.outer_diameter,\" \\xD7 \",item.height]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.quantity}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:item.material_details?item.material_details.is_finished_product?/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm\",children:\"\\u0645\\u0646\\u062A\\u062C \\u062C\\u0627\\u0647\\u0632\"}):/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 bg-green-100 text-green-800 rounded text-sm\",children:item.material_details.material_type}):/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 bg-green-100 text-green-800 rounded text-sm\",children:item.material_used||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"font-mono text-sm\",children:item.material_details?item.material_details.is_finished_product?/*#__PURE__*/_jsx(\"div\",{className:\"text-center font-semibold text-blue-600\",children:\"\\u0645\\u062E\\u0632\\u0646 \\u0627\\u0646\\u062A\\u0627\\u062C \\u062A\\u0627\\u0645\"}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold\",children:item.unit_code_display||item.material_details.unit_code}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-600\",children:[item.material_details.inner_diameter,\" - \",item.material_details.outer_diameter]})]}):/*#__PURE__*/// Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø£Ùˆ Ø¹Ù†Ø¯Ù…Ø§ Ù„Ø§ ØªÙˆØ¬Ø¯ material_details\n_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold\",children:item.material_used||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-600\",children:\"\\u0645\\u0639\\u0644\\u0648\\u0645\\u0627\\u062A \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629 \\u063A\\u064A\\u0631 \\u0645\\u062A\\u0648\\u0641\\u0631\\u0629\"})]})})})]},\"\".concat(invoice.id,\"-\").concat(itemIndex))))||[];})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>printWorkOrder(workOrder),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u0623\\u0645\\u0631 \\u0627\\u0644\\u0634\\u063A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644 \\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedWorkOrderId(workOrder.id);setShowAddToExisting(true);},className:\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0641\\u0627\\u062A\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteWorkOrder(workOrder.id),className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641\"})]})]},workOrder.id);}),workOrders.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0623\\u0648\\u0627\\u0645\\u0631 \\u0634\\u063A\\u0644\"})]})]});};// Treasury Management Component\nconst Treasury=()=>{const{user}=useAuth();// Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ\nconst[accounts,setAccounts]=useState([{id:'cash',name:'Ù†Ù‚Ø¯ÙŠ',balance:0,transactions:[]},{id:'vodafone_elsawy',name:'ÙÙˆØ¯Ø§ÙÙˆÙ† 010',balance:0,transactions:[]},{id:'vodafone_wael',name:'ÙƒØ§Ø´ 0100',balance:0,transactions:[]},{id:'deferred',name:'Ø¢Ø¬Ù„',balance:0,transactions:[]},{id:'instapay',name:'Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ',balance:0,transactions:[]},{id:'yad_elsawy',name:'ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ',balance:0,transactions:[]}]);const[selectedAccount,setSelectedAccount]=useState('cash');const[showTransferModal,setShowTransferModal]=useState(false);const[transferData,setTransferData]=useState({from:'cash',to:'vodafone_elsawy',amount:'',notes:''});const[manualTransaction,setManualTransaction]=useState({account:'cash',type:'income',// income or expense\namount:'',description:'',notes:''});const[showManualForm,setShowManualForm]=useState(false);const[searchTerm,setSearchTerm]=useState('');// Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø­Ø«\nuseEffect(()=>{fetchTreasuryData();},[]);const fetchTreasuryData=async()=>{try{// Fetch balances and transactions from backend\nconst balancesResponse=await axios.get(\"\".concat(API,\"/treasury/balances\"));const transactionsResponse=await axios.get(\"\".concat(API,\"/treasury/transactions\"));const invoicesResponse=await axios.get(\"\".concat(API,\"/invoices\"));const expensesResponse=await axios.get(\"\".concat(API,\"/expenses\"));const balances=balancesResponse.data;const manualTransactions=transactionsResponse.data;const invoices=invoicesResponse.data;const expenses=expensesResponse.data;// Update accounts with balances and transactions\nconst updatedAccounts=accounts.map(account=>{let transactions=[];// Add invoice transactions\ninvoices.forEach(invoice=>{const paymentMethodMap={'Ù†Ù‚Ø¯ÙŠ':'cash','ÙÙˆØ¯Ø§ÙÙˆÙ† 010':'vodafone_elsawy','ÙƒØ§Ø´ 0100':'vodafone_wael','Ø¢Ø¬Ù„':'deferred','Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ':'instapay','ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ':'yad_elsawy'};if(paymentMethodMap[invoice.payment_method]===account.id){transactions.push({id:\"inv-\".concat(invoice.id),type:'income',amount:invoice.total_amount||0,description:\"\\u0641\\u0627\\u062A\\u0648\\u0631\\u0629 \\u0631\\u0642\\u0645 \".concat(invoice.invoice_number),date:invoice.date,reference:\"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644: \".concat(invoice.customer_name)});}});// Add expense transactions (only from cash account)\nif(account.id==='cash'){expenses.forEach(expense=>{transactions.push({id:\"exp-\".concat(expense.id),type:'expense',amount:expense.amount||0,description:expense.description||'Ù…ØµØ±ÙˆÙ',date:expense.date,category:expense.category});});}// Add manual transactions\nmanualTransactions.filter(transaction=>transaction.account_id===account.id).forEach(transaction=>{transactions.push({id:transaction.id,type:transaction.transaction_type,amount:transaction.amount,description:transaction.description,date:transaction.date,reference:transaction.reference});});return _objectSpread(_objectSpread({},account),{},{balance:balances[account.id]||0,transactions:transactions.sort((a,b)=>new Date(b.date)-new Date(a.date))});});setAccounts(updatedAccounts);}catch(error){console.error('Error fetching treasury data:',error);}};const handleTransfer=async()=>{if(!transferData.amount||parseFloat(transferData.amount)<=0){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');return;}const amount=parseFloat(transferData.amount);const fromAccount=accounts.find(acc=>acc.id===transferData.from);if(fromAccount.balance<amount){alert('Ø§Ù„Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙŠ');return;}try{await axios.post(\"\".concat(API,\"/treasury/transfer\"),{from_account:transferData.from,to_account:transferData.to,amount:amount,notes:transferData.notes});// Refresh data\nfetchTreasuryData();setShowTransferModal(false);setTransferData({from:'cash',to:'vodafone_elsawy',amount:'',notes:''});alert('ØªÙ… Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error processing transfer:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­ÙˆÙŠÙ„');}};const handleManualTransaction=async()=>{if(!manualTransaction.amount||parseFloat(manualTransaction.amount)<=0){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');return;}const amount=parseFloat(manualTransaction.amount);try{await axios.post(\"\".concat(API,\"/treasury/transactions\"),{account_id:manualTransaction.account,transaction_type:manualTransaction.type,amount:amount,description:manualTransaction.description,reference:manualTransaction.notes||'Ø¥Ø¯Ø®Ø§Ù„ ÙŠØ¯ÙˆÙŠ'});// Refresh data\nfetchTreasuryData();setShowManualForm(false);setManualTransaction({account:'cash',type:'income',amount:'',description:'',notes:''});alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error processing manual transaction:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');}};const clearAccount=async accountId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØµÙÙŠØ± Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.'))return;const account=accounts.find(acc=>acc.id===accountId);if(!account||account.balance===0){alert('Ø§Ù„Ø­Ø³Ø§Ø¨ ÙØ§Ø±Øº Ø¨Ø§Ù„ÙØ¹Ù„ Ø£Ùˆ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');return;}try{// Create expense transaction to zero the account\nawait axios.post(\"\".concat(API,\"/treasury/transactions\"),{account_id:accountId,transaction_type:'expense',amount:account.balance,description:\"\\u062A\\u0635\\u0641\\u064A\\u0631 \\u062D\\u0633\\u0627\\u0628 \".concat(account.name),reference:'ØªØµÙÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ù…Ø¯ÙŠØ±'});// Refresh data\nfetchTreasuryData();alert(\"\\u062A\\u0645 \\u062A\\u0635\\u0641\\u064A\\u0631 \\u062D\\u0633\\u0627\\u0628 \".concat(account.name,\" \\u0628\\u0646\\u062C\\u0627\\u062D\"));}catch(error){console.error('Error clearing account:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµÙÙŠØ± Ø§Ù„Ø­Ø³Ø§Ø¨');}};// Treasury Reset Function - Only for Elsawy\nconst resetTreasury=async()=>{if((user===null||user===void 0?void 0:user.username)!=='Elsawy'){alert('ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨ØªÙ†ÙÙŠØ° Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');return;}// Triple confirmation for this critical operation\nconst firstConfirm=confirm('âš ï¸ ØªØ­Ø°ÙŠØ±: Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø³ÙŠØ­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø²ÙŠÙ†Ø© ÙˆÙ„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!\\nÙ‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ');if(!firstConfirm)return;const secondConfirm=confirm('âš ï¸ ØªØ£ÙƒÙŠØ¯ Ø«Ø§Ù†ÙŠ: Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª ÙˆØ§Ù„Ø£Ø±ØµØ¯Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹!\\nØ§ÙƒØªØ¨ \"Ù†Ø¹Ù…\" Ù„Ù„ØªØ£ÙƒÙŠØ¯:');if(!secondConfirm)return;const finalConfirm=prompt('âš ï¸ Ù„Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØŒ Ø§ÙƒØªØ¨ Ø¨Ø§Ù„Ø¶Ø¨Ø·: \"Ø§Ø­Ø°Ù ÙƒÙ„ Ø´ÙŠØ¡\"');if(finalConfirm!=='Ø§Ø­Ø°Ù ÙƒÙ„ Ø´ÙŠØ¡'){alert('ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');return;}try{const response=await axios.post(\"\".concat(API,\"/treasury/reset\"),null,{params:{username:user.username}});alert(\"\\u2705 \\u062A\\u0645 \\u0645\\u0633\\u062D \\u062C\\u0645\\u064A\\u0639 \\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629 \\u0628\\u0646\\u062C\\u0627\\u062D!\\n\\u062A\\u0645 \\u062D\\u0630\\u0641 \".concat(response.data.deleted_treasury_transactions,\" \\u0645\\u0639\\u0627\\u0645\\u0644\\u0629\"));// Refresh data\nfetchTreasuryData();}catch(error){var _error$response20,_error$response20$dat;console.error('Error resetting treasury:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ù…Ø³Ø­ Ø§Ù„Ø®Ø²ÙŠÙ†Ø©: '+(((_error$response20=error.response)===null||_error$response20===void 0?void 0:(_error$response20$dat=_error$response20.data)===null||_error$response20$dat===void 0?void 0:_error$response20$dat.detail)||error.message));}};const selectedAccountData=accounts.find(acc=>acc.id===selectedAccount);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-4\",children:\"\\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629 - \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0623\\u0645\\u0648\\u0627\\u0644\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowTransferModal(true),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u062A\\u062D\\u0648\\u064A\\u0644 \\u0623\\u0645\\u0648\\u0627\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowManualForm(true),className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0639\\u0645\\u0644\\u064A\\u0629 \\u064A\\u062F\\u0648\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchTreasuryData,className:\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"}),(user===null||user===void 0?void 0:user.username)==='Elsawy'&&/*#__PURE__*/_jsx(\"button\",{onClick:resetTreasury,className:\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 font-bold border-2 border-red-800\",children:\"\\u26A0\\uFE0F \\u0645\\u0633\\u062D \\u0627\\u0644\\u062E\\u0632\\u064A\\u0646\\u0629 \\u0628\\u0627\\u0644\\u0643\\u0627\\u0645\\u0644\"}),(user===null||user===void 0?void 0:user.username)==='Elsawy'&&selectedAccount==='yad_elsawy'&&(selectedAccountData===null||selectedAccountData===void 0?void 0:selectedAccountData.balance)>0&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>clearAccount(selectedAccount),className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062A\\u0635\\u0641\\u064A\\u0631 \\u062D\\u0633\\u0627\\u0628 \\u064A\\u062F \\u0627\\u0644\\u0635\\u0627\\u0648\\u064A\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-6\",children:accounts.map(account=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 rounded-lg shadow cursor-pointer transition-colors \".concat(selectedAccount===account.id?'bg-blue-100 border-2 border-blue-500':'bg-white hover:bg-gray-50'),onClick:()=>setSelectedAccount(account.id),children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-800 mb-2\",children:account.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold \".concat(account.balance>=0?'text-green-600':'text-red-600'),children:[\"\\u062C.\\u0645 \",account.balance.toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:[account.transactions.length,\" \\u0639\\u0645\\u0644\\u064A\\u0629\"]})]},account.id))}),selectedAccountData&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold mb-4\",children:[\"\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644 \\u062D\\u0633\\u0627\\u0628: \",selectedAccountData.name]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"\\u0627\\u0644\\u0628\\u062D\\u062B \\u0641\\u064A \\u0627\\u0644\\u0645\\u0639\\u0627\\u0645\\u0644\\u0627\\u062A...\",className:\"w-full p-3 border border-gray-300 rounded-lg\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0646\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0648\\u0635\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0645\\u0631\\u062C\\u0639\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:selectedAccountData.transactions.filter(transaction=>transaction.description.toLowerCase().includes(searchTerm.toLowerCase())||transaction.reference&&transaction.reference.toLowerCase().includes(searchTerm.toLowerCase())||transaction.category&&transaction.category.toLowerCase().includes(searchTerm.toLowerCase())).map((transaction,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(transaction.date).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-xs \".concat(transaction.type==='income'?'bg-green-100 text-green-800':transaction.type==='expense'?'bg-red-100 text-red-800':transaction.type==='transfer_in'?'bg-blue-100 text-blue-800':'bg-orange-100 text-orange-800'),children:transaction.type==='income'?'Ø¯Ø®Ù„':transaction.type==='expense'?'Ù…ØµØ±ÙˆÙ':transaction.type==='transfer_in'?'ØªØ­ÙˆÙŠÙ„ ÙˆØ§Ø±Ø¯':'ØªØ­ÙˆÙŠÙ„ ØµØ§Ø¯Ø±'})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.description}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:transaction.type==='income'||transaction.type==='transfer_in'?'text-green-600 font-semibold':'text-red-600 font-semibold',children:[transaction.type==='income'||transaction.type==='transfer_in'?'+':'-',\"\\u062C.\\u0645 \",transaction.amount.toFixed(2)]})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-sm text-gray-600\",children:transaction.reference||transaction.category||'-'})]},transaction.id||index))})]}),selectedAccountData.transactions.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0639\\u0645\\u0644\\u064A\\u0627\\u062A \\u0644\\u0647\\u0630\\u0627 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\"})]})]}),showTransferModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u062A\\u062D\\u0648\\u064A\\u0644 \\u0623\\u0645\\u0648\\u0627\\u0644 \\u0628\\u064A\\u0646 \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0646 \\u062D\\u0633\\u0627\\u0628\"}),/*#__PURE__*/_jsx(\"select\",{value:transferData.from,onChange:e=>setTransferData(_objectSpread(_objectSpread({},transferData),{},{from:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:accounts.map(account=>/*#__PURE__*/_jsxs(\"option\",{value:account.id,children:[account.name,\" (\\u062C.\\u0645 \",account.balance.toFixed(2),\")\"]},account.id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0625\\u0644\\u0649 \\u062D\\u0633\\u0627\\u0628\"}),/*#__PURE__*/_jsx(\"select\",{value:transferData.to,onChange:e=>setTransferData(_objectSpread(_objectSpread({},transferData),{},{to:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:accounts.filter(acc=>acc.id!==transferData.from).map(account=>/*#__PURE__*/_jsx(\"option\",{value:account.id,children:account.name},account.id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:transferData.amount,onChange:e=>setTransferData(_objectSpread(_objectSpread({},transferData),{},{amount:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"0.00\",min:\"0\",step:\"0.01\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:transferData.notes,onChange:e=>setTransferData(_objectSpread(_objectSpread({},transferData),{},{notes:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0625\\u0636\\u0627\\u0641\\u064A\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleTransfer,className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u062A\\u0623\\u0643\\u064A\\u062F \\u0627\\u0644\\u062A\\u062D\\u0648\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowTransferModal(false),className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]})}),showManualForm&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0639\\u0645\\u0644\\u064A\\u0629 \\u064A\\u062F\\u0648\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\"}),/*#__PURE__*/_jsx(\"select\",{value:manualTransaction.account,onChange:e=>setManualTransaction(_objectSpread(_objectSpread({},manualTransaction),{},{account:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:accounts.map(account=>/*#__PURE__*/_jsx(\"option\",{value:account.id,children:account.name},account.id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"select\",{value:manualTransaction.type,onChange:e=>setManualTransaction(_objectSpread(_objectSpread({},manualTransaction),{},{type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"income\",children:\"\\u062F\\u062E\\u0644\"}),/*#__PURE__*/_jsx(\"option\",{value:\"expense\",children:\"\\u0645\\u0635\\u0631\\u0648\\u0641\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:manualTransaction.amount,onChange:e=>setManualTransaction(_objectSpread(_objectSpread({},manualTransaction),{},{amount:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"0.00\",min:\"0\",step:\"0.01\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0648\\u0635\\u0641\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:manualTransaction.description,onChange:e=>setManualTransaction(_objectSpread(_objectSpread({},manualTransaction),{},{description:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0648\\u0635\\u0641 \\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:manualTransaction.notes,onChange:e=>setManualTransaction(_objectSpread(_objectSpread({},manualTransaction),{},{notes:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0625\\u0636\\u0627\\u0641\\u064A\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleManualTransaction,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowManualForm(false),className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]})})]});};// Backup and Restore Component\nconst Backup=()=>{const[backups,setBackups]=useState([]);const[driveFiles,setDriveFiles]=useState([]);const[driveStatus,setDriveStatus]=useState(null);const[loading,setLoading]=useState(false);const[creating,setCreating]=useState(false);const[activeTab,setActiveTab]=useState('local');// 'local' or 'drive'\nconst{user}=useAuth();useEffect(()=>{fetchBackups();fetchDriveStatus();},[]);const fetchBackups=async()=>{setLoading(true);try{const response=await axios.get(\"\".concat(API,\"/backup/list\"));setBackups(response.data||[]);}catch(error){console.error('Error fetching backups:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©');}finally{setLoading(false);}};const fetchDriveStatus=async()=>{try{const response=await axios.get(\"\".concat(API,\"/backup/drive/status\"));setDriveStatus(response.data);}catch(error){console.error('Error fetching drive status:',error);}};const fetchDriveFiles=async()=>{setLoading(true);try{const response=await axios.get(\"\".concat(API,\"/backup/drive/list\"));setDriveFiles(response.data.files||[]);}catch(error){console.error('Error fetching drive files:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ù…Ù„ÙØ§Øª Google Drive');}finally{setLoading(false);}};const checkBackupStatus=async function(backupId){let attempts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;try{const response=await axios.get(\"\".concat(API,\"/backup/status/\").concat(backupId));const status=response.data.status;if(status==='completed'||status==='completed_with_drive'){setCreating(false);let message=\"\\u2705 \\u062A\\u0645 \\u0625\\u0646\\u0634\\u0627\\u0621 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0628\\u0646\\u062C\\u0627\\u062D!\\n\\n\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0633\\u062A\\u0646\\u062F\\u0627\\u062A: \".concat(response.data.total_documents);if(status==='completed_with_drive'){message+='\\n\\nðŸŒ ØªÙ… Ø§Ù„Ø±ÙØ¹ Ø¥Ù„Ù‰ Google Drive Ø¨Ù†Ø¬Ø§Ø­!';}alert(message);fetchBackups();fetchDriveFiles();}else if(status==='failed'){setCreating(false);alert('âŒ ÙØ´Ù„Øª Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ\\n\\n'+(response.data.error||'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'));fetchBackups();}else if(status==='in_progress'&&attempts<60){// Keep checking every 2 seconds for up to 2 minutes\nsetTimeout(()=>checkBackupStatus(backupId,attempts+1),2000);}else{// Timeout after 2 minutes\nsetCreating(false);alert('â±ï¸ Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©.');fetchBackups();}}catch(error){console.error('Error checking backup status:',error);if(attempts<60){setTimeout(()=>checkBackupStatus(backupId,attempts+1),2000);}else{setCreating(false);fetchBackups();}}};const createBackup=async()=>{if(!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ø­Ù„ÙŠØ© Ø§Ù„Ø¢Ù†ØŸ')){return;}setCreating(true);try{const response=await axios.post(\"\".concat(API,\"/backup/create\"),null,{params:{username:user===null||user===void 0?void 0:user.username}});// Start polling for status\nif(response.data.backup_id){alert(\"\\u23F3 \".concat(response.data.message,\"\\n\\n\\u0633\\u064A\\u062A\\u0645 \\u062A\\u062D\\u062F\\u064A\\u062B \\u0627\\u0644\\u0642\\u0627\\u0626\\u0645\\u0629 \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0627\\u064B \\u0639\\u0646\\u062F \\u0627\\u0644\\u0627\\u0646\\u062A\\u0647\\u0627\\u0621.\"));checkBackupStatus(response.data.backup_id);}else{setCreating(false);alert('âŒ ÙØ´Ù„ ÙÙŠ Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ');}}catch(error){var _error$response21,_error$response21$dat;console.error('Error creating backup:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: '+(((_error$response21=error.response)===null||_error$response21===void 0?void 0:(_error$response21$dat=_error$response21.data)===null||_error$response21$dat===void 0?void 0:_error$response21$dat.detail)||error.message));setCreating(false);}};const downloadBackup=async(backupId,createdAt)=>{try{const response=await axios.get(\"\".concat(API,\"/backup/download/\").concat(backupId),{responseType:'blob'});// Create download link\nconst timestamp=new Date(createdAt).toISOString().replace(/[:.]/g,'-').slice(0,-5);const filename=\"backup_\".concat(timestamp,\".json\");const url=window.URL.createObjectURL(new Blob([response.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download',filename);document.body.appendChild(link);link.click();link.remove();window.URL.revokeObjectURL(url);alert('âœ… ØªÙ… ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!');}catch(error){var _error$response22,_error$response22$dat;console.error('Error downloading backup:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙ†Ø²ÙŠÙ„: '+(((_error$response22=error.response)===null||_error$response22===void 0?void 0:(_error$response22$dat=_error$response22.data)===null||_error$response22$dat===void 0?void 0:_error$response22$dat.detail)||error.message));}};const handleFileUpload=async event=>{const file=event.target.files[0];if(!file)return;// Check file type\nif(!file.name.endsWith('.json')){alert('âŒ ÙŠØ¬Ø¨ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù JSON');event.target.value='';return;}// Ask user what to do\nconst action=confirm(\"\\u062A\\u0645 \\u0627\\u062E\\u062A\\u064A\\u0627\\u0631: \".concat(file.name,\"\\n\\n\")+\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621:\\n\\n\"+\"\\u2705 \\u0645\\u0648\\u0627\\u0641\\u0642 = \\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0644\\u0644\\u0642\\u0627\\u0626\\u0645\\u0629 \\u0641\\u0642\\u0637 (\\u064A\\u0645\\u0643\\u0646\\u0643 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639\\u0647\\u0627 \\u0644\\u0627\\u062D\\u0642\\u0627\\u064B)\\n\"+\"\\u274C \\u0625\\u0644\\u063A\\u0627\\u0621 = \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0645\\u0628\\u0627\\u0634\\u0631\\u0629 (\\u0633\\u064A\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\\u0629)\\n\\n\"+\"\\u0645\\u0627\\u0630\\u0627 \\u062A\\u0631\\u064A\\u062F\\u061F\");if(action){// Add to list only\nawait uploadBackupFile(file,false);}else{// Ask for confirmation before restore\nif(confirm(\"\\u26A0\\uFE0F \\u062A\\u062D\\u0630\\u064A\\u0631!\\n\\n\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0645\\u0628\\u0627\\u0634\\u0631\\u0629\\u061F\\n\\n\\u0633\\u064A\\u062A\\u0645 \\u062D\\u0630\\u0641 \\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\\u0629!\\n\\n\\u0647\\u0630\\u0627 \\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621 \\u0644\\u0627 \\u064A\\u0645\\u0643\\u0646 \\u0627\\u0644\\u062A\\u0631\\u0627\\u062C\\u0639 \\u0639\\u0646\\u0647!\")){await uploadBackupFile(file,true);}}// Reset input\nevent.target.value='';};const uploadBackupFile=async(file,restoreDirectly)=>{setLoading(true);try{const formData=new FormData();formData.append('file',file);let response;if(restoreDirectly){// Restore directly\nresponse=await axios.post(\"\".concat(API,\"/backup/restore-from-file\"),formData,{params:{username:user===null||user===void 0?void 0:user.username},headers:{'Content-Type':'multipart/form-data'}});alert(\"\\u2705 \".concat(response.data.message,\"\\n\\n\")+\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\\u0627\\u062A \\u0627\\u0644\\u0645\\u0633\\u062A\\u0631\\u062C\\u0639\\u0629: \".concat(response.data.collections_restored,\"\\n\")+\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0633\\u062A\\u0646\\u062F\\u0627\\u062A: \".concat(response.data.total_documents,\"\\n\\n\")+\"\\u0633\\u064A\\u062A\\u0645 \\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644 \\u0627\\u0644\\u0635\\u0641\\u062D\\u0629...\");setTimeout(()=>window.location.reload(),2000);}else{// Upload to list\nresponse=await axios.post(\"\".concat(API,\"/backup/upload\"),formData,{headers:{'Content-Type':'multipart/form-data'}});alert(\"\\u2705 \".concat(response.data.message,\"\\n\\n\")+\"\\u064A\\u0645\\u0643\\u0646\\u0643 \\u0627\\u0644\\u0622\\u0646 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0647\\u0630\\u0647 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0645\\u0646 \\u0627\\u0644\\u0642\\u0627\\u0626\\u0645\\u0629\");fetchBackups();}}catch(error){var _error$response23,_error$response23$dat;console.error('Error uploading backup:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£: '+(((_error$response23=error.response)===null||_error$response23===void 0?void 0:(_error$response23$dat=_error$response23.data)===null||_error$response23$dat===void 0?void 0:_error$response23$dat.detail)||error.message));}finally{setLoading(false);}};const restoreBackup=async(backupId,createdAt)=>{if(!confirm(\"\\u26A0\\uFE0F \\u062A\\u062D\\u0630\\u064A\\u0631 \\u062E\\u0637\\u064A\\u0631!\\n\\n\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629\\u061F\\n\\n\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E: \".concat(new Date(createdAt).toLocaleString('ar-EG'),\"\\n\\n\\u0633\\u064A\\u062A\\u0645 \\u062D\\u0630\\u0641 \\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\\u0629 \\u0648\\u0627\\u0633\\u062A\\u0628\\u062F\\u0627\\u0644\\u0647\\u0627 \\u0628\\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629!\\n\\n\\u0647\\u0630\\u0627 \\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621 \\u0644\\u0627 \\u064A\\u0645\\u0643\\u0646 \\u0627\\u0644\\u062A\\u0631\\u0627\\u062C\\u0639 \\u0639\\u0646\\u0647!\"))){return;}// Second confirmation\nif(!confirm('ØªØ£ÙƒÙŠØ¯ Ù†Ù‡Ø§Ø¦ÙŠ: Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ ØªÙ…Ø§Ù…Ø§Ù‹ØŸ')){return;}setLoading(true);try{const response=await axios.post(\"\".concat(API,\"/backup/restore/\").concat(backupId),null,{params:{username:user===null||user===void 0?void 0:user.username}});alert(\"\\u2705 \".concat(response.data.message,\"\\n\\n\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\\u0627\\u062A \\u0627\\u0644\\u0645\\u0633\\u062A\\u0631\\u062C\\u0639\\u0629: \").concat(response.data.collections_restored,\"\\n\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0633\\u062A\\u0646\\u062F\\u0627\\u062A: \").concat(response.data.total_documents,\"\\n\\n\\u064A\\u064F\\u0646\\u0635\\u062D \\u0628\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644 \\u0627\\u0644\\u0635\\u0641\\u062D\\u0629.\"));// Reload page after successful restore\nif(confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø¢Ù†ØŸ')){window.location.reload();}}catch(error){var _error$response24,_error$response24$dat;console.error('Error restoring backup:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: '+(((_error$response24=error.response)===null||_error$response24===void 0?void 0:(_error$response24$dat=_error$response24.data)===null||_error$response24$dat===void 0?void 0:_error$response24$dat.detail)||error.message));}finally{setLoading(false);}};const deleteBackup=async(backupId,createdAt)=>{if(!confirm(\"\\u0647\\u0644 \\u062A\\u0631\\u064A\\u062F \\u062D\\u0630\\u0641 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629\\u061F\\n\\n\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E: \".concat(new Date(createdAt).toLocaleString('ar-EG'),\"\\n\\n\\u0647\\u0630\\u0627 \\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621 \\u0644\\u0627 \\u064A\\u0645\\u0643\\u0646 \\u0627\\u0644\\u062A\\u0631\\u0627\\u062C\\u0639 \\u0639\\u0646\\u0647!\"))){return;}try{await axios.delete(\"\".concat(API,\"/backup/\").concat(backupId));alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');fetchBackups();fetchDriveFiles();// Refresh Drive files too\n}catch(error){var _error$response25,_error$response25$dat;console.error('Error deleting backup:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: '+(((_error$response25=error.response)===null||_error$response25===void 0?void 0:(_error$response25$dat=_error$response25.data)===null||_error$response25$dat===void 0?void 0:_error$response25$dat.detail)||error.message));}};// Google Drive Functions\nconst uploadToDrive=async backupId=>{if(!(driveStatus!==null&&driveStatus!==void 0&&driveStatus.enabled)){alert('âŒ Google Drive ØºÙŠØ± Ù…ØªØµÙ„!\\n\\nÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Google Drive.');return;}try{const response=await axios.post(\"\".concat(API,\"/backup/\").concat(backupId,\"/upload-to-drive\"));alert(\"\\u2705 \".concat(response.data.message));fetchBackups();fetchDriveFiles();}catch(error){var _error$response26,_error$response26$dat;console.error('Error uploading to Drive:',error);let errorMsg='Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¹ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©:\\n\\n';if((_error$response26=error.response)!==null&&_error$response26!==void 0&&(_error$response26$dat=_error$response26.data)!==null&&_error$response26$dat!==void 0&&_error$response26$dat.detail){errorMsg+=error.response.data.detail;// Check for storage quota error\nif(error.response.data.detail.includes('storage quota')||error.response.data.detail.includes('403')){errorMsg+='\\n\\nðŸ’¡ Ø§Ù„Ø­Ù„:\\n';errorMsg+='1. Ø§ÙØªØ­ Google Drive\\n';errorMsg+='2. Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø¬Ù„Ø¯ \"Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„\"\\n';errorMsg+='3. Ø´Ø§Ø±Ùƒ Ø§Ù„Ù…Ø¬Ù„Ø¯ Ù…Ø¹:\\n   master-seal-backup@master-seal-backup.iam.gserviceaccount.com\\n';errorMsg+='4. Ø§Ø®ØªØ± ØµÙ„Ø§Ø­ÙŠØ© \"Editor\"';}}else{errorMsg+=error.message;}alert(errorMsg);}};const downloadFromDrive=async(fileId,fileName)=>{try{const response=await axios.get(\"\".concat(API,\"/backup/drive/download/\").concat(fileId),{responseType:'blob'});// Create download link\nconst url=window.URL.createObjectURL(new Blob([response.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download',fileName);document.body.appendChild(link);link.click();link.remove();alert('âœ… ØªÙ… ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response27,_error$response27$dat;console.error('Error downloading from Drive:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„Ù: '+(((_error$response27=error.response)===null||_error$response27===void 0?void 0:(_error$response27$dat=_error$response27.data)===null||_error$response27$dat===void 0?void 0:_error$response27$dat.detail)||error.message));}};const restoreFromDrive=async(fileId,fileName)=>{if(!confirm(\"\\u26A0\\uFE0F \\u062A\\u062D\\u0630\\u064A\\u0631!\\n\\n\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0645\\u0646 Google Drive\\u061F\\n\\n\\u0645\\u0644\\u0641: \".concat(fileName,\"\\n\\n\\u0633\\u064A\\u062A\\u0645 \\u062D\\u0630\\u0641 \\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\\u0629!\"))){return;}if(!confirm('ØªØ£ÙƒÙŠØ¯ Ù†Ù‡Ø§Ø¦ÙŠ: Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ ØªÙ…Ø§Ù…Ø§Ù‹ØŸ')){return;}setLoading(true);try{const response=await axios.post(\"\".concat(API,\"/backup/drive/restore/\").concat(fileId));alert(\"\\u2705 \".concat(response.data.message,\"\\n\\n\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\\u0627\\u062A \\u0627\\u0644\\u0645\\u0633\\u062A\\u0631\\u062C\\u0639\\u0629: \").concat(response.data.collections_restored,\"\\n\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0645\\u0633\\u062A\\u0646\\u062F\\u0627\\u062A: \").concat(response.data.total_documents));if(confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø¢Ù†ØŸ')){window.location.reload();}}catch(error){var _error$response28,_error$response28$dat;console.error('Error restoring from Drive:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹: '+(((_error$response28=error.response)===null||_error$response28===void 0?void 0:(_error$response28$dat=_error$response28.data)===null||_error$response28$dat===void 0?void 0:_error$response28$dat.detail)||error.message));}finally{setLoading(false);}};const deleteFromDrive=async(fileId,fileName)=>{if(!confirm(\"\\u0647\\u0644 \\u062A\\u0631\\u064A\\u062F \\u062D\\u0630\\u0641 \\u0627\\u0644\\u0645\\u0644\\u0641 \\u0645\\u0646 Google Drive\\u061F\\n\\n\".concat(fileName,\"\\n\\n\\u0647\\u0630\\u0627 \\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621 \\u0644\\u0627 \\u064A\\u0645\\u0643\\u0646 \\u0627\\u0644\\u062A\\u0631\\u0627\\u062C\\u0639 \\u0639\\u0646\\u0647!\"))){return;}try{await axios.delete(\"\".concat(API,\"/backup/drive/\").concat(fileId));alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù„Ù Ù…Ù† Google Drive Ø¨Ù†Ø¬Ø§Ø­');fetchDriveFiles();}catch(error){var _error$response29,_error$response29$dat;console.error('Error deleting from Drive:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­Ø°Ù: '+(((_error$response29=error.response)===null||_error$response29===void 0?void 0:(_error$response29$dat=_error$response29.data)===null||_error$response29$dat===void 0?void 0:_error$response29$dat.detail)||error.message));}};// Switch tab and load data\nconst switchTab=tab=>{setActiveTab(tab);if(tab==='drive'&&driveFiles.length===0){fetchDriveFiles();}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0646\\u0633\\u062E \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse flex-wrap gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:createBackup,disabled:creating,className:\"px-6 py-2 rounded text-white \".concat(creating?'bg-gray-400 cursor-not-allowed':'bg-green-500 hover:bg-green-600'),children:creating?'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡...':'ðŸ’¾ Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø©'}),/*#__PURE__*/_jsxs(\"label\",{className:\"bg-purple-500 text-white px-6 py-2 rounded hover:bg-purple-600 cursor-pointer\",children:[\"\\uD83D\\uDCE4 \\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0646\\u0633\\u062E\\u0629\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".json\",onChange:handleFileUpload,className:\"hidden\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchBackups,disabled:loading,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\uD83D\\uDD04 \\u062A\\u062D\\u062F\\u064A\\u062B\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-lg mb-6 border-r-4 border-blue-500\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold mb-2\",children:\"\\uD83D\\uDCC5 \\u0627\\u0644\\u0646\\u0633\\u062E \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A \\u0627\\u0644\\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-700\",children:\"\\u064A\\u062A\\u0645 \\u0625\\u0646\\u0634\\u0627\\u0621 \\u0646\\u0633\\u062E\\u0629 \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0645\\u062D\\u0644\\u064A\\u0629 \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0627\\u064B \\u0643\\u0644 \\u064A\\u0648\\u0645 \\u0641\\u064A \\u062A\\u0645\\u0627\\u0645 \\u0627\\u0644\\u0633\\u0627\\u0639\\u0629 7:00 \\u0645\\u0633\\u0627\\u0621\\u064B. \\u064A\\u0645\\u0643\\u0646\\u0643 \\u062A\\u0646\\u0632\\u064A\\u0644 \\u0623\\u064A \\u0646\\u0633\\u062E\\u0629 \\u0648\\u0631\\u0641\\u0639\\u0647\\u0627 \\u064A\\u062F\\u0648\\u064A\\u0627\\u064B \\u0625\\u0644\\u0649 Google Drive \\u0623\\u0648 \\u0623\\u064A \\u062E\\u062F\\u0645\\u0629 \\u0633\\u062D\\u0627\\u0628\\u064A\\u0629 \\u0623\\u062E\\u0631\\u0649.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-md overflow-x-auto\",children:loading&&!creating?/*#__PURE__*/_jsx(\"div\",{className:\"p-8 text-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u23F3 \\u062C\\u0627\\u0631\\u064A \\u0627\\u0644\\u062A\\u062D\\u0645\\u064A\\u0644...\"})}):backups.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0646\\u0633\\u062E \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u062D\\u062A\\u0649 \\u0627\\u0644\\u0622\\u0646\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 mt-2\",children:\"\\u0627\\u0636\\u063A\\u0637 \\u0639\\u0644\\u0649 \\\"\\u0625\\u0646\\u0634\\u0627\\u0621 \\u0646\\u0633\\u062E\\u0629 \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629\\\" \\u0644\\u0625\\u0646\\u0634\\u0627\\u0621 \\u0623\\u0648\\u0644 \\u0646\\u0633\\u062E\\u0629\"})]}):/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full border-collapse\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E \\u0648\\u0627\\u0644\\u0648\\u0642\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0623\\u0646\\u0634\\u0626\\u062A \\u0628\\u0648\\u0627\\u0633\\u0637\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0645\\u0633\\u062A\\u0646\\u062F\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:backups.map(backup=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2\",children:[new Date(backup.created_at).toLocaleString('ar-EG',{year:'numeric',month:'long',day:'numeric',hour:'2-digit',minute:'2-digit'}),backup.is_scheduled&&/*#__PURE__*/_jsx(\"span\",{className:\"block text-xs text-blue-600 mt-1\",children:\"\\uD83E\\uDD16 \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\"})]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:backup.created_by}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-center font-medium\",children:backup.total_documents||0}),/*#__PURE__*/_jsxs(\"td\",{className:\"border border-gray-300 p-2 text-center\",children:[backup.status==='in_progress'&&/*#__PURE__*/_jsx(\"span\",{className:\"text-orange-600 animate-pulse\",children:\"\\u23F3 \\u062C\\u0627\\u0631\\u064A...\"}),backup.status==='failed'&&/*#__PURE__*/_jsx(\"span\",{className:\"text-red-600\",children:\"\\u274C \\u0641\\u0634\\u0644\"}),(backup.status==='completed'||backup.status==='completed_with_drive'||backup.status==='completed_no_drive')&&/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600\",children:\"\\u2705 \\u0645\\u0643\\u062A\\u0645\\u0644\"})]}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse justify-center flex-wrap gap-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>downloadBackup(backup.backup_id,backup.created_at),className:\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\",title:\"\\u062A\\u0646\\u0632\\u064A\\u0644 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629\",children:\"\\u2B07\\uFE0F \\u062A\\u0646\\u0632\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>restoreBackup(backup.backup_id,backup.created_at),disabled:loading||backup.status==='in_progress',className:\"bg-orange-500 text-white px-3 py-1 rounded text-sm hover:bg-orange-600 disabled:bg-gray-400\",title:\"\\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0645\\u0646 \\u0647\\u0630\\u0647 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629\",children:\"\\u21A9\\uFE0F \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteBackup(backup.backup_id,backup.created_at),disabled:loading,className:\"bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600 disabled:bg-gray-400\",title:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629\",children:\"\\uD83D\\uDDD1\\uFE0F \\u062D\\u0630\\u0641\"})]})})]},backup.backup_id))})]})}),activeTab==='drive'&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-md overflow-x-auto\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"p-8 text-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u23F3 \\u062C\\u0627\\u0631\\u064A \\u0627\\u0644\\u062A\\u062D\\u0645\\u064A\\u0644...\"})}):!(driveStatus!==null&&driveStatus!==void 0&&driveStatus.enabled)?/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500\",children:\"\\u274C Google Drive \\u063A\\u064A\\u0631 \\u0645\\u062A\\u0635\\u0644\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 mt-2\",children:\"\\u064A\\u0631\\u062C\\u0649 \\u0627\\u0644\\u062A\\u062D\\u0642\\u0642 \\u0645\\u0646 \\u0625\\u0639\\u062F\\u0627\\u062F\\u0627\\u062A Google Drive\"})]}):driveFiles.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0645\\u0644\\u0641\\u0627\\u062A \\u0641\\u064A Google Drive\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 mt-2\",children:\"\\u0642\\u0645 \\u0628\\u0631\\u0641\\u0639 \\u0646\\u0633\\u062E\\u0629 \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0645\\u0646 \\u0627\\u0644\\u062A\\u0628\\u0648\\u064A\\u0628 \\u0627\\u0644\\u0633\\u0627\\u0628\\u0642\"})]}):/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full border-collapse\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0644\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u062C\\u0645\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:driveFiles.map(file=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"a\",{href:file.webViewLink,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-blue-600 hover:underline\",children:file.name})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(file.createdTime).toLocaleString('ar-EG',{year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2 text-center\",children:file.size?\"\".concat((file.size/1024).toFixed(2),\" KB\"):'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 space-x-reverse justify-center flex-wrap gap-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>downloadFromDrive(file.id,file.name),className:\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\",children:\"\\u2B07\\uFE0F \\u062A\\u0646\\u0632\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>restoreFromDrive(file.id,file.name),disabled:loading,className:\"bg-orange-500 text-white px-3 py-1 rounded text-sm hover:bg-orange-600 disabled:bg-gray-400\",children:\"\\u21A9\\uFE0F \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639\"})]})})]},file.id))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 bg-red-50 p-4 rounded-lg border-r-4 border-red-500\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-red-700 mb-2\",children:\"\\u26A0\\uFE0F \\u062A\\u062D\\u0630\\u064A\\u0631\\u0627\\u062A \\u0645\\u0647\\u0645\\u0629:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside text-sm text-red-700 space-y-1\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0646\\u0633\\u062E\\u0629 \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0633\\u064A\\u062D\\u0630\\u0641 \",/*#__PURE__*/_jsx(\"strong\",{children:\"\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\\u0629\"})]}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u0625\\u0646\\u0634\\u0627\\u0621 \\u0646\\u0633\\u062E\\u0629 \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u062D\\u062F\\u064A\\u062B\\u0629 \\u0642\\u0628\\u0644 \\u0627\\u0644\\u0642\\u064A\\u0627\\u0645 \\u0628\\u0623\\u064A \\u062A\\u063A\\u064A\\u064A\\u0631\\u0627\\u062A \\u0643\\u0628\\u064A\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0644\\u0646\\u0633\\u062E \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0644\\u0646 \\u064A\\u062A\\u0645 \\u062D\\u0630\\u0641\\u0647\\u0627 \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0627\\u064B - \\u0627\\u062D\\u0630\\u0641\\u0647\\u0627 \\u064A\\u062F\\u0648\\u064A\\u0627\\u064B \\u0639\\u0646\\u062F \\u0627\\u0644\\u062D\\u0627\\u062C\\u0629\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0644\\u0627 \\u064A\\u0645\\u0643\\u0646 \\u0627\\u0644\\u062A\\u0631\\u0627\\u062C\\u0639 \\u0639\\u0646 \\u0639\\u0645\\u0644\\u064A\\u0629 \\u0627\\u0644\\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0628\\u0639\\u062F \\u062A\\u0646\\u0641\\u064A\\u0630\\u0647\\u0627\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 bg-green-50 p-4 rounded-lg border-r-4 border-green-500\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-green-700 mb-2\",children:\"\\uD83D\\uDCA1 \\u0646\\u0635\\u0627\\u0626\\u062D:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside text-sm text-green-700 space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0627\\u0644\\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0629 \\u062A\\u0639\\u0645\\u0644 \\u064A\\u0648\\u0645\\u064A\\u0627\\u064B \\u0627\\u0644\\u0633\\u0627\\u0639\\u0629 7:00 \\u0645\\u0633\\u0627\\u0621\\u064B\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0633\\u062A\\u062E\\u062F\\u0645 \\u0632\\u0631 \\\"\\u062A\\u0646\\u0632\\u064A\\u0644\\\" \\u0644\\u062D\\u0641\\u0638 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0639\\u0644\\u0649 \\u062C\\u0647\\u0627\\u0632\\u0643\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u064A\\u0645\\u0643\\u0646\\u0643 \\u0631\\u0641\\u0639 \\u0627\\u0644\\u0646\\u0633\\u062E \\u0627\\u0644\\u0645\\u062D\\u0641\\u0648\\u0638\\u0629 \\u064A\\u062F\\u0648\\u064A\\u0627\\u064B \\u0625\\u0644\\u0649 Google Drive \\u0623\\u0648 \\u0623\\u064A \\u062E\\u062F\\u0645\\u0629 \\u0633\\u062D\\u0627\\u0628\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0633\\u062A\\u062E\\u062F\\u0645 \\u0632\\u0631 \\\"\\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0646\\u0633\\u062E\\u0629\\\" \\u0644\\u0631\\u0641\\u0639 \\u0645\\u0644\\u0641 \\u0646\\u0633\\u062E\\u0629 \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0645\\u0646 \\u062C\\u0647\\u0627\\u0632\\u0643\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u062D\\u062A\\u0641\\u0638 \\u0628\\u0646\\u0633\\u062E \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0645\\u0646 \\u0641\\u062A\\u0631\\u0627\\u062A \\u0645\\u062E\\u062A\\u0644\\u0641\\u0629 \\u0644\\u0644\\u0623\\u0645\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u062D\\u062C\\u0645 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 \\u0635\\u063A\\u064A\\u0631 (\\u0639\\u0627\\u062F\\u0629 \\u0623\\u0642\\u0644 \\u0645\\u0646 1 MB)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 bg-blue-50 p-4 rounded-lg border-r-4 border-blue-500\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-blue-700 mb-2\",children:\"\\uD83D\\uDCE4 \\u0643\\u064A\\u0641\\u064A\\u0629 \\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0646\\u0633\\u062E\\u0629 \\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629:\"}),/*#__PURE__*/_jsxs(\"ol\",{className:\"list-decimal list-inside text-sm text-blue-700 space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u0636\\u063A\\u0637 \\u0639\\u0644\\u0649 \\u0632\\u0631 \\\"\\u0627\\u0633\\u062A\\u064A\\u0631\\u0627\\u062F \\u0646\\u0633\\u062E\\u0629\\\"\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0627\\u062E\\u062A\\u0631 \\u0645\\u0644\\u0641 \\u0627\\u0644\\u0646\\u0633\\u062E\\u0629 \\u0627\\u0644\\u0627\\u062D\\u062A\\u064A\\u0627\\u0637\\u064A\\u0629 (.json) \\u0645\\u0646 \\u062C\\u0647\\u0627\\u0632\\u0643\"}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621:\",/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside mr-6 mt-1\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0645\\u0648\\u0627\\u0641\\u0642\"}),\" = \\u0625\\u0636\\u0627\\u0641\\u0629 \\u0644\\u0644\\u0642\\u0627\\u0626\\u0645\\u0629 \\u0641\\u0642\\u0637 (\\u0622\\u0645\\u0646)\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"}),\" = \\u0627\\u0633\\u062A\\u0631\\u062C\\u0627\\u0639 \\u0645\\u0628\\u0627\\u0634\\u0631 (\\u064A\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\\u0629)\"]})]})]})]})]})]});};// Users Management Component  \nconst Users=()=>{const[users,setUsers]=useState([]);const[newUser,setNewUser]=useState({username:'',password:'',role:'user'});const[editingUser,setEditingUser]=useState(null);const[editForm,setEditForm]=useState({username:'',password:'',role:'user'});const[companyInfo,setCompanyInfo]=useState({name:'Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„',address:'Ø§Ù„Ø­Ø±ÙÙŠÙŠÙ† Ø´Ø§Ø±Ø¹ Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª',phone:'01020630677'});const[editingCompany,setEditingCompany]=useState(false);const[selectedUserPermissions,setSelectedUserPermissions]=useState(null);const allPermissions=[{key:'dashboard',label:'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…'},{key:'sales',label:'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª'},{key:'inventory',label:'Ø§Ù„Ù…Ø®Ø²ÙˆÙ†'},{key:'deferred',label:'Ø§Ù„Ø¢Ø¬Ù„'},{key:'expenses',label:'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª'},{key:'revenue',label:'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª'},{key:'treasury',label:'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©'},{key:'invoices',label:'Ø§Ù„ÙÙˆØ§ØªÙŠØ±'},{key:'work-orders',label:'Ø£Ù…Ø± Ø´ØºÙ„'},{key:'pricing',label:'Ø§Ù„ØªØ³Ø¹ÙŠØ±'},{key:'users',label:'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†'}];useEffect(()=>{fetchUsers();},[]);const fetchUsers=async()=>{try{const response=await axios.get(\"\".concat(API,\"/users\"));// Check if default users exist in database\nconst dbUsers=response.data||[];const hasElsawy=dbUsers.some(user=>user.username==='Elsawy');const hasRoot=dbUsers.some(user=>user.username==='Root');// Create default users if they don't exist\nif(!hasElsawy){await axios.post(\"\".concat(API,\"/users\"),{username:'Elsawy',password:'100100',role:'admin',permissions:allPermissions.map(p=>p.key)});}if(!hasRoot){await axios.post(\"\".concat(API,\"/users\"),{username:'Root',password:'master',role:'user',permissions:['dashboard','sales','inventory','deferred','expenses','treasury','work-orders']});}// Fetch users again if we created default users\nif(!hasElsawy||!hasRoot){const updatedResponse=await axios.get(\"\".concat(API,\"/users\"));setUsers(updatedResponse.data||[]);}else{setUsers(dbUsers);}}catch(error){console.error('Error fetching users:',error);// Fall back to empty array for now\nsetUsers([]);}};const addUser=async()=>{if(!newUser.username||!newUser.password){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');return;}try{// Check if username already exists\nif(users.some(user=>user.username===newUser.username)){alert('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„');return;}// Default permissions based on role\nconst defaultPermissions=newUser.role==='admin'?allPermissions.map(p=>p.key):['dashboard','sales','inventory','deferred','expenses','treasury','work-orders','pricing'];// Let backend generate ID and created_at\nconst user={username:newUser.username,password:newUser.password,role:newUser.role,permissions:defaultPermissions};await axios.post(\"\".concat(API,\"/users\"),user);fetchUsers();setNewUser({username:'',password:'',role:'user'});alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response30,_error$response30$dat;console.error('Error adding user:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: '+(((_error$response30=error.response)===null||_error$response30===void 0?void 0:(_error$response30$dat=_error$response30.data)===null||_error$response30$dat===void 0?void 0:_error$response30$dat.detail)||error.message));}};const startEdit=user=>{setEditingUser(user.id);setEditForm({username:user.username,password:'',role:user.role});};const cancelEdit=()=>{setEditingUser(null);setEditForm({username:'',password:'',role:'user'});};const saveEdit=async()=>{if(!editForm.username){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');return;}// Check if username already exists (excluding current user)\nif(users.some(user=>user.username===editForm.username&&user.id!==editingUser)){alert('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„');return;}try{// Find current user to preserve their permissions\nconst currentUser=users.find(u=>u.id===editingUser);if(!currentUser){alert('Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');return;}// Update user in backend - preserve existing permissions\nconst updatedUser={id:editingUser,username:editForm.username,role:editForm.role,password:editForm.password||currentUser.password,permissions:currentUser.permissions||[],created_at:currentUser.created_at};await axios.put(\"\".concat(API,\"/users/\").concat(editingUser),updatedUser);// Fetch updated data from database instead of updating local state\nfetchUsers();setEditingUser(null);setEditForm({username:'',password:'',role:'user'});alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response31,_error$response31$dat;console.error('Error updating user:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: '+(((_error$response31=error.response)===null||_error$response31===void 0?void 0:(_error$response31$dat=_error$response31.data)===null||_error$response31$dat===void 0?void 0:_error$response31$dat.detail)||error.message));}};const deleteUser=async userId=>{if(userId==='1'||userId==='2'){alert('Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠÙŠÙ†');return;}if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ'))return;try{await axios.delete(\"\".concat(API,\"/users/\").concat(userId));fetchUsers();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');}catch(error){console.error('Error deleting user:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');}};const resetPassword=async userId=>{const newPassword=prompt('Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:');if(newPassword&&newPassword.trim()){try{// Find the user to get their current data\nconst user=users.find(u=>u.id===userId);if(!user){alert('Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');return;}// Update password in backend\nconst updatedUser={id:user.id,username:user.username,password:newPassword.trim(),role:user.role,permissions:user.permissions||[],created_at:user.created_at};await axios.put(\"\".concat(API,\"/users/\").concat(userId),updatedUser);alert('ØªÙ… ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response32,_error$response32$dat;console.error('Error updating password:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: '+(((_error$response32=error.response)===null||_error$response32===void 0?void 0:(_error$response32$dat=_error$response32.data)===null||_error$response32$dat===void 0?void 0:_error$response32$dat.detail)||error.message));}}};const openPermissions=user=>{setSelectedUserPermissions(_objectSpread(_objectSpread({},user),{},{tempPermissions:[...(user.permissions||[])]}));};const togglePermission=permissionKey=>{setSelectedUserPermissions(prev=>{const newPermissions=prev.tempPermissions.includes(permissionKey)?prev.tempPermissions.filter(p=>p!==permissionKey):[...prev.tempPermissions,permissionKey];return _objectSpread(_objectSpread({},prev),{},{tempPermissions:newPermissions});});};const savePermissions=async()=>{try{// Update permissions in backend\nconst updatedUser={id:selectedUserPermissions.id,username:selectedUserPermissions.username,password:selectedUserPermissions.password,role:selectedUserPermissions.role,permissions:selectedUserPermissions.tempPermissions,created_at:selectedUserPermissions.created_at};await axios.put(\"\".concat(API,\"/users/\").concat(selectedUserPermissions.id),updatedUser);// Fetch updated data from database\nfetchUsers();setSelectedUserPermissions(null);alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response33,_error$response33$dat;console.error('Error updating permissions:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª: '+(((_error$response33=error.response)===null||_error$response33===void 0?void 0:(_error$response33$dat=_error$response33.data)===null||_error$response33$dat===void 0?void 0:_error$response33$dat.detail)||error.message));}};const saveCompanyInfo=()=>{setEditingCompany(false);alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ© Ø¨Ù†Ø¬Ø§Ø­');};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-4\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\\u064A\\u0646\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0643\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u062A\\u062D\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.print(),className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u0637\\u0628\\u0627\\u0639\\u0629 \\u062A\\u0642\\u0631\\u064A\\u0631\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u0634\\u0631\\u0643\\u0629\"}),editingCompany?/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0634\\u0631\\u0643\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:companyInfo.name,onChange:e=>setCompanyInfo(_objectSpread(_objectSpread({},companyInfo),{},{name:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:companyInfo.address,onChange:e=>setCompanyInfo(_objectSpread(_objectSpread({},companyInfo),{},{address:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u062A\\u0644\\u064A\\u0641\\u0648\\u0646\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:companyInfo.phone,onChange:e=>setCompanyInfo(_objectSpread(_objectSpread({},companyInfo),{},{phone:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0634\\u0631\\u0643\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"p-2 bg-gray-100 rounded\",children:companyInfo.name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"p\",{className:\"p-2 bg-gray-100 rounded\",children:companyInfo.address})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u062A\\u0644\\u064A\\u0641\\u0648\\u0646\"}),/*#__PURE__*/_jsx(\"p\",{className:\"p-2 bg-gray-100 rounded\",children:companyInfo.phone})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:editingCompany?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:saveCompanyInfo,className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u062D\\u0641\\u0638\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingCompany(false),className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingCompany(true),className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644 \\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u0634\\u0631\\u0643\\u0629\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0633\\u062A\\u062E\\u062F\\u0645 \\u062C\\u062F\\u064A\\u062F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newUser.username,onChange:e=>setNewUser(_objectSpread(_objectSpread({},newUser),{},{username:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:newUser.password,onChange:e=>setNewUser(_objectSpread(_objectSpread({},newUser),{},{password:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0635\\u0644\\u0627\\u062D\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"select\",{value:newUser.role,onChange:e=>setNewUser(_objectSpread(_objectSpread({},newUser),{},{role:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645 \\u0639\\u0627\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"\\u0645\\u062F\\u064A\\u0631\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addUser,className:\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\\u064A\\u0646\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0635\\u0644\\u0627\\u062D\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0635\\u0644\\u0627\\u062D\\u064A\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u062A\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u0625\\u0646\\u0634\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>{var _user$permissions;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:editingUser===user.id?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.username,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{username:e.target.value})),className:\"w-full p-1 border border-gray-300 rounded\"}):/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:user.username})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:editingUser===user.id?/*#__PURE__*/_jsxs(\"select\",{value:editForm.role,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{role:e.target.value})),className:\"w-full p-1 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645 \\u0639\\u0627\\u062F\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"\\u0645\\u062F\\u064A\\u0631\"})]}):/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm \".concat(user.role==='admin'?'bg-red-100 text-red-800':'bg-blue-100 text-blue-800'),children:user.role==='admin'?'Ù…Ø¯ÙŠØ±':'Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯ÙŠ'})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"bg-gray-100 px-2 py-1 rounded text-sm\",children:[((_user$permissions=user.permissions)===null||_user$permissions===void 0?void 0:_user$permissions.length)||0,\" \\u0635\\u0644\\u0627\\u062D\\u064A\\u0629\"]})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(user.created_at).toLocaleDateString('ar-EG')}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm bg-green-100 text-green-800\",children:\"\\u0646\\u0634\\u0637\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-2 space-x-reverse flex-wrap\",children:editingUser===user.id?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:saveEdit,className:\"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600 mb-1\",children:\"\\u062D\\u0641\\u0638\"}),/*#__PURE__*/_jsx(\"button\",{onClick:cancelEdit,className:\"bg-gray-500 text-white px-2 py-1 rounded text-sm hover:bg-gray-600 mb-1\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>startEdit(user),className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600 mb-1\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>openPermissions(user),className:\"bg-purple-500 text-white px-2 py-1 rounded text-sm hover:bg-purple-600 mb-1\",children:\"\\u0627\\u0644\\u0635\\u0644\\u0627\\u062D\\u064A\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>resetPassword(user.id),className:\"bg-yellow-500 text-white px-2 py-1 rounded text-sm hover:bg-yellow-600 mb-1\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"}),user.id!=='1'&&user.id!=='2'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteUser(user.id),className:\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600 mb-1\",children:\"\\u062D\\u0630\\u0641\"})]})})})]},user.id);})})]})})]}),selectedUserPermissions&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 max-w-md w-full mx-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-bold mb-4\",children:[\"\\u0635\\u0644\\u0627\\u062D\\u064A\\u0627\\u062A \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645: \",selectedUserPermissions.username]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2 mb-4\",children:allPermissions.map(permission=>/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedUserPermissions.tempPermissions.includes(permission.key),onChange:()=>togglePermission(permission.key),className:\"ml-2\"}),/*#__PURE__*/_jsx(\"span\",{children:permission.label})]},permission.key))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:savePermissions,className:\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\",children:\"\\u062D\\u0641\\u0638\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedUserPermissions(null),className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]})})]});};// Material Pricing Component\nconst Pricing=()=>{const[materialPricings,setMaterialPricings]=useState([]);const[editingPricing,setEditingPricing]=useState(null);const[newPricing,setNewPricing]=useState({material_type:'NBR',inner_diameter:'',outer_diameter:'',price_per_mm:'',manufacturing_cost_client1:'',manufacturing_cost_client2:'',manufacturing_cost_client3:'',notes:''});const materialTypes=['NBR','BUR','BT','VT','BOOM'];useEffect(()=>{fetchMaterialPricings();},[]);const fetchMaterialPricings=async()=>{try{const response=await axios.get(\"\".concat(API,\"/material-pricing\"));setMaterialPricings(response.data);}catch(error){console.error('Error fetching material pricings:',error);}};const addMaterialPricing=async()=>{if(!newPricing.inner_diameter||!newPricing.outer_diameter||!newPricing.price_per_mm){alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');return;}try{if(editingPricing){// Update existing pricing\nawait axios.put(\"\".concat(API,\"/material-pricing/\").concat(editingPricing),_objectSpread(_objectSpread({},newPricing),{},{inner_diameter:parseFloat(newPricing.inner_diameter),outer_diameter:parseFloat(newPricing.outer_diameter),price_per_mm:parseFloat(newPricing.price_per_mm),manufacturing_cost_client1:parseFloat(newPricing.manufacturing_cost_client1||0),manufacturing_cost_client2:parseFloat(newPricing.manufacturing_cost_client2||0),manufacturing_cost_client3:parseFloat(newPricing.manufacturing_cost_client3||0)}));alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');setEditingPricing(null);}else{// Add new pricing\nawait axios.post(\"\".concat(API,\"/material-pricing\"),_objectSpread(_objectSpread({},newPricing),{},{inner_diameter:parseFloat(newPricing.inner_diameter),outer_diameter:parseFloat(newPricing.outer_diameter),price_per_mm:parseFloat(newPricing.price_per_mm),manufacturing_cost_client1:parseFloat(newPricing.manufacturing_cost_client1||0),manufacturing_cost_client2:parseFloat(newPricing.manufacturing_cost_client2||0),manufacturing_cost_client3:parseFloat(newPricing.manufacturing_cost_client3||0)}));alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');}fetchMaterialPricings();setNewPricing({material_type:'NBR',inner_diameter:'',outer_diameter:'',price_per_mm:'',manufacturing_cost_client1:'',manufacturing_cost_client2:'',manufacturing_cost_client3:'',notes:''});}catch(error){var _error$response34,_error$response34$dat;console.error('Error saving material pricing:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©: '+(((_error$response34=error.response)===null||_error$response34===void 0?void 0:(_error$response34$dat=_error$response34.data)===null||_error$response34$dat===void 0?void 0:_error$response34$dat.detail)||error.message));}};const editMaterialPricing=pricing=>{setNewPricing({material_type:pricing.material_type,inner_diameter:pricing.inner_diameter.toString(),outer_diameter:pricing.outer_diameter.toString(),price_per_mm:pricing.price_per_mm.toString(),manufacturing_cost_client1:pricing.manufacturing_cost_client1.toString(),manufacturing_cost_client2:pricing.manufacturing_cost_client2.toString(),manufacturing_cost_client3:pricing.manufacturing_cost_client3.toString(),notes:pricing.notes||''});setEditingPricing(pricing.id);};const deleteMaterialPricing=async pricingId=>{if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©ØŸ')){return;}try{await axios.delete(\"\".concat(API,\"/material-pricing/\").concat(pricingId));fetchMaterialPricings();alert('ØªÙ… Ø­Ø°Ù Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');}catch(error){var _error$response35,_error$response35$dat;console.error('Error deleting material pricing:',error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©: '+(((_error$response35=error.response)===null||_error$response35===void 0?void 0:(_error$response35$dat=_error$response35.data)===null||_error$response35$dat===void 0?void 0:_error$response35$dat.detail)||error.message));}};const cancelEdit=()=>{setEditingPricing(null);setNewPricing({material_type:'NBR',inner_diameter:'',outer_diameter:'',price_per_mm:'',manufacturing_cost_client1:'',manufacturing_cost_client2:'',manufacturing_cost_client3:'',notes:''});};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-blue-600 mb-6\",children:\"\\uD83D\\uDCB2 \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u062A\\u0633\\u0639\\u064A\\u0631\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:editingPricing?'ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©':'Ø¥Ø¶Ø§ÙØ© ØªØ³Ø¹ÙŠØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©'}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"select\",{value:newPricing.material_type,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{material_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",children:materialTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A (\\u0645\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:newPricing.inner_diameter,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{inner_diameter:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062F\\u0627\\u062E\\u0644\\u064A\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A (\\u0645\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:newPricing.outer_diameter,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{outer_diameter:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0627\\u0644\\u0642\\u0637\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0631\\u062C\\u064A\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0645\\u0644\\u064A (\\u062C.\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newPricing.price_per_mm,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{price_per_mm:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0645\\u0644\\u064A \\u0627\\u0644\\u0648\\u0627\\u062D\\u062F\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639 - \\u0639\\u0645\\u064A\\u0644 1 (\\u062C.\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newPricing.manufacturing_cost_client1,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{manufacturing_cost_client1:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639 \\u0644\\u0644\\u0639\\u0645\\u064A\\u0644 1\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639 - \\u0639\\u0645\\u064A\\u0644 2 (\\u062C.\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newPricing.manufacturing_cost_client2,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{manufacturing_cost_client2:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639 \\u0644\\u0644\\u0639\\u0645\\u064A\\u0644 2\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639 - \\u0639\\u0645\\u064A\\u0644 3 (\\u062C.\\u0645)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:newPricing.manufacturing_cost_client3,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{manufacturing_cost_client3:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",placeholder:\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0639 \\u0644\\u0644\\u0639\\u0645\\u064A\\u0644 3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2 lg:col-span-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"textarea\",{value:newPricing.notes,onChange:e=>setNewPricing(_objectSpread(_objectSpread({},newPricing),{},{notes:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded\",rows:\"2\",placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0625\\u0636\\u0627\\u0641\\u064A\\u0629...\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4 space-x-reverse mt-4\",children:[editingPricing&&/*#__PURE__*/_jsx(\"button\",{onClick:cancelEdit,className:\"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"button\",{onClick:addMaterialPricing,className:\"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600\",children:editingPricing?'ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©':'Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:\"\\u0642\\u0627\\u0626\\u0645\\u0629 \\u0627\\u0644\\u062A\\u0633\\u0639\\u064A\\u0631\\u0627\\u062A\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u0627\\u0645\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0627\\u0644\\u0623\\u0628\\u0639\\u0627\\u062F (\\u062F\\u0627\\u062E\\u0644\\u064A\\xD7\\u062E\\u0627\\u0631\\u062C\\u064A)\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0645\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0639\\u0645\\u064A\\u0644 1\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0639\\u0645\\u064A\\u0644 2\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0639\\u0645\\u064A\\u0644 3\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:[materialPricings.map((pricing,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:index%2===0?'bg-white':'bg-gray-50',children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",children:pricing.material_type}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:[pricing.inner_diameter,\"\\xD7\",pricing.outer_diameter,\" \\u0645\\u0645\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:[pricing.price_per_mm.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:[pricing.manufacturing_cost_client1.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:[pricing.manufacturing_cost_client2.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:[pricing.manufacturing_cost_client3.toFixed(2),\" \\u062C.\\u0645\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:pricing.notes||'-'}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editMaterialPricing(pricing),className:\"text-blue-600 hover:text-blue-900 ml-2\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteMaterialPricing(pricing.id),className:\"text-red-600 hover:text-red-900\",children:\"\\u062D\\u0630\\u0641\"})]})]},pricing.id)),materialPricings.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"8\",className:\"px-6 py-4 text-center text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u062A\\u0633\\u0639\\u064A\\u0631\\u0627\\u062A \\u0645\\u0636\\u0627\\u0641\\u0629\"})})]})]})})]})]});};// Main App Component\nconst App=()=>{const[currentPage,setCurrentPage]=useState('sales');// Default to sales instead of dashboard\nconst{user}=useAuth();if(!user)return/*#__PURE__*/_jsx(Login,{});const renderPage=()=>{switch(currentPage){case'dashboard':// Only Elsawy can access dashboard\nreturn(user===null||user===void 0?void 0:user.username)==='Elsawy'?/*#__PURE__*/_jsx(Dashboard,{}):/*#__PURE__*/_jsx(Sales,{});case'sales':return/*#__PURE__*/_jsx(Sales,{});case'inventory':return/*#__PURE__*/_jsx(Inventory,{});case'stock':return/*#__PURE__*/_jsx(Stock,{});case'local':return/*#__PURE__*/_jsx(Local,{});case'deferred':return/*#__PURE__*/_jsx(Deferred,{});case'expenses':return/*#__PURE__*/_jsx(Expenses,{});case'revenue':return/*#__PURE__*/_jsx(Revenue,{});case'treasury':return/*#__PURE__*/_jsx(Treasury,{});case'invoices':return/*#__PURE__*/_jsx(Invoices,{});case'deleted-invoices':return/*#__PURE__*/_jsx(DeletedInvoices,{});case'customer-statement':return/*#__PURE__*/_jsx(CustomerStatement,{});case'work-orders':return/*#__PURE__*/_jsx(WorkOrders,{});case'pricing':return/*#__PURE__*/_jsx(Pricing,{});case'backup':return/*#__PURE__*/_jsx(Backup,{});case'users':return/*#__PURE__*/_jsx(Users,{});default:return/*#__PURE__*/_jsx(Sales,{});// Default to sales instead of dashboard\n}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen bg-gray-50\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(Navigation,{currentPage:currentPage,onPageChange:setCurrentPage}),/*#__PURE__*/_jsx(\"main\",{className:\"flex-1 overflow-y-auto bg-gradient-to-br from-gray-50 to-blue-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:renderPage()})})]});};// Root App with AuthProvider\nconst AppWithAuth=()=>/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(App,{})});export default AppWithAuth;","map":{"version":3,"names":["React","useState","useEffect","createContext","useContext","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","API","concat","AuthContext","useAuth","context","Error","AuthProvider","_ref","children","user","setUser","isLoading","setIsLoading","savedUser","localStorage","getItem","JSON","parse","login","username","password","response","post","params","data","success","setItem","stringify","error","console","logout","removeItem","className","Provider","value","Login","setUsername","setPassword","setError","handleSubmit","e","preventDefault","dir","src","alt","onSubmit","type","onChange","target","placeholder","required","Navigation","_ref2","currentPage","onPageChange","elsawyPages","key","label","icon","adminPages","userPages","pages","role","onClick","map","page","Inventory","inventoryItems","setInventoryItems","inventoryTransactions","setInventoryTransactions","lowStockItems","setLowStockItems","currentView","setCurrentView","editingItem","setEditingItem","newItem","setNewItem","material_type","inner_diameter","outer_diameter","available_pieces","min_stock_level","notes","newTransaction","setNewTransaction","transaction_type","pieces_change","reason","searchTerm","setSearchTerm","materialTypes","fetchInventoryItems","get","fetchInventoryTransactions","fetchLowStockItems","addInventoryItem","alert","put","id","_objectSpread","parseFloat","parseInt","_error$response","_error$response$data","detail","message","addInventoryTransaction","transactionData","Math","abs","_error$response2","_error$response2$data","filteredItems","filter","item","_item$notes","toLowerCase","includes","toString","sort","a","b","materialPriority","aPriority","bPriority","filteredTransactions","transaction","_transaction$notes","Date","date","length","confirm","delete","step","toLocaleDateString","remaining_pieces","max","responseType","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","toISOString","split","body","appendChild","click","remove","accept","file","files","formData","FormData","append","headers","imported_count","errors","warn","Local","suppliers","setSuppliers","localProducts","setLocalProducts","supplierTransactions","setSupplierTransactions","newSupplier","setNewSupplier","name","phone","address","newProduct","setNewProduct","supplier_id","purchase_price","selling_price","current_stock","amount","description","product_name","quantity","unit_price","payment_method","selectedSupplier","setSelectedSupplier","paymentAmount","setPaymentAmount","paymentMethod","setPaymentMethod","fetchSuppliers","fetchLocalProducts","fetchSupplierTransactions","addSupplier","trim","_error$response3","_error$response3$data","editSupplier","supplier","deleteSupplier","supplierId","_error$response4","_error$response4$data","addLocalProduct","_error$response5","_error$response5$data","editLocalProduct","product","deleteLocalProduct","productId","_error$response6","_error$response6$data","paySupplier","total_purchases","toFixed","total_paid","balance","title","supplier_name","total_sold","s","Dashboard","stats","setStats","total_sales","total_expenses","net_profit","total_unpaid","invoice_count","customer_count","fetchStats","clearAllData","printReport","reportType","currentDate","printContent","printWindow","open","write","close","print","Sales","customers","setCustomers","newCustomer","setNewCustomer","selectedCustomer","setSelectedCustomer","supervisorName","setSupervisorName","invoiceTitle","setInvoiceTitle","currentItem","setCurrentItem","seal_type","height","product_type","measurements","setMeasurements","inner_diameter_mm","inner_diameter_inch","outer_diameter_mm","outer_diameter_inch","height_mm","height_inch","wall_height_mm","wall_height_inch","localProduct","setLocalProduct","product_size","items","setItems","discount","setDiscount","discountType","setDiscountType","compatibilityResults","setCompatibilityResults","selectedMaterial","setSelectedMaterial","selectedMaterials","setSelectedMaterials","measurementUnit","setMeasurementUnit","wallHeight","setWallHeight","clientType","setClientType","mmToInch","mm","inchToMm","inch","handleMeasurementChange","field","unit","newMeasurements","mmValue","sealTypes","fetchCustomers","sortedCustomers","localeCompare","calculateAutomaticPrice","material","client_type","log","confirmMultiMaterialSelection","totalPrice","selected","pricing","total_price","seals","sel","unit_code","join","checkCompatibility","innerDiameter","outerDiameter","isNaN","addItem","hasInnerDiameter","hasOuterDiameter","hasHeight","wallHeightValue","wall_height","display_measurements","material_used","material_details","is_finished_product","selected_materials","seals_count","product_type_name","local_product_details","editItem","index","_item$inner_diameter","_item$outer_diameter","_item$height","_item$unit_price","_item$inner_diameter2","_item$outer_diameter2","_item$height2","_item$wall_height","measurement_unit","_item$unit_price2","newItems","_","i","deleteItem","isCreatingInvoice","setIsCreatingInvoice","createInvoice","customerId","customerName","customerResponse","customerError","_customerError$respon","status","existingCustomer","find","c","customer","subtotal","reduce","sum","discountAmount","totalAfterDiscount","invoiceData","customer_id","customer_name","invoice_title","supervisor_name","discount_type","discount_value","total_after_discount","encodeURIComponent","printInvoice","_error$response7","_error$response7$data","invoice","invoice_number","customer_address","Array","from","total_amount","clearAllInvoices","exactMatch","style","borderColor","backgroundColor","tempMsg","textContent","parentElement","setTimeout","partialMatch","some","startsWith","rows","compatible_materials","min","floor","newSelected","isSelected","maxSeals","remainingSeals","score","newSelection","totalSeals","disabled","compatible_products","original_inner_diameter","original_outer_diameter","original_height","original_wall_height","display","Stock","rawMaterials","setRawMaterials","finishedProducts","setFinishedProducts","newRawMaterial","setNewRawMaterial","pieces_count","cost_per_mm","newFinishedProduct","setNewFinishedProduct","filteredRawMaterials","filteredFinishedProducts","fetchRawMaterials","fetchFinishedProducts","addRawMaterial","rawMaterial","_error$response8","_error$response8$data","clearAllRawMaterials","deleteRawMaterial","materialId","editRawMaterial","handleFileImport","event","_error$response9","_error$response9$data","handleFileExport","removeChild","revokeObjectURL","addFinishedProduct","finishedProduct","editFinishedProduct","deleteFinishedProduct","Deferred","_selectedInvoice$rema","unpaidInvoices","setUnpaidInvoices","selectedInvoice","setSelectedInvoice","paymentNotes","setPaymentNotes","customerTotals","setCustomerTotals","fetchUnpaidInvoices","totals","filteredInvoices","forEach","totalAmount","invoiceCount","remaining_amount","invoices","getCustomerName","makePayment","invoice_id","Object","keys","entries","_ref3","_invoice$total_amount","_invoice$paid_amount","_invoice$remaining_am","paid_amount","inv","Expenses","expenses","setExpenses","newExpense","setNewExpense","category","expenseCategories","fetchExpenses","addExpense","deleteExpense","expenseId","getTotalExpenses","expense","getExpensesByCategory","byCategory","cat","exp","clearAllExpenses","_ref4","Revenue","_revenueData$total_re","_revenueData$total_ex","_revenueData$material","_revenueData$profit","_revenueData$total_re2","_revenueData$material2","_revenueData$profit2","revenueData","setRevenueData","total_revenue","material_cost","profit","period","setPeriod","fetchRevenueData","Invoices","setInvoices","filterStatus","setFilterStatus","editingInvoice","setEditingInvoice","editForm","setEditForm","fetchInvoices","_error$response10","_error$response10$dat","changePaymentMethod","invoiceId","paymentMethods","modalHtml","method","insertAdjacentHTML","modal","getElementById","selectElement","confirmBtn","cancelBtn","closeModal","parentNode","onclick","newMethod","_error$response11","_error$response11$dat","cancelInvoice","confirmMessage","_error$response12","_error$response12$dat","deleteInvoice","startEditInvoice","cancelEdit","saveInvoiceEdit","updatedInvoice","_error$response13","_error$response14","_error$response14$dat","updateInvoiceStatus","newStatus","matchesStatus","matchesSearch","_invoice$subtotal","_invoice$total_amount2","_ref5","_item$local_product_d","_item$local_product_d2","DeletedInvoices","deletedInvoices","setDeletedInvoices","fetchDeletedInvoices","handleRestore","invoiceNumber","warning","_error$response15","_error$response15$dat","handlePermanentDelete","_error$response16","_error$response16$dat","_invoice$invoice_numb","_invoice$customer_nam","_invoice$payment_meth","searchLower","colSpan","_invoice$total_amount3","created_at","deleted_at","year","month","day","hour","minute","CustomerStatement","_statement$summary$to","_statement$summary$to2","_statement$summary$fi","statement","setStatement","fromDate","setFromDate","toDate","setToDate","loading","setLoading","fetchStatement","from_date","to_date","_error$response17","_error$response17$dat","printStatement","_summary$total_credit","_summary$total_debit","_summary$final_balanc","transactions","summary","final_balance","is_also_supplier","t","debit","credit","total_credit","total_debit","trans","reference","WorkOrders","workOrders","setWorkOrders","selectedInvoices","setSelectedInvoices","newWorkOrder","setNewWorkOrder","priority","showAddToExisting","setShowAddToExisting","selectedWorkOrderId","setSelectedWorkOrderId","selectedInvoiceForAdd","setSelectedInvoiceForAdd","fetchWorkOrders","toggleInvoiceSelection","prev","createWorkOrderFromMultipleInvoices","selectedInvoicesData","cleanInvoices","cleanInv","_id","workOrderData","total_items","_inv$items","_error$response18","_error$response18$dat","addInvoiceToExistingWorkOrder","_error$response19","_error$response19$dat","getInvoiceDetails","getAvailableInvoices","getAvailableInvoicesForAdd","_selectedWorkOrder$in","selectedWorkOrder","wo","usedInvoiceIds","printWorkOrder","workOrder","_workOrder$invoices","workOrderInvoices","totalItems","_inv$items2","slice","is_daily","_invoice$total_amount4","_invoice$items","_invoice$items2","clearAllWorkOrders","deleteWorkOrder","workOrderId","_workOrder$invoices2","_invoice$total_amount5","_invoice$total_amount6","_invoice$items3","checked","_inv$items3","_workOrder$total_amou","_invoice$total_amount7","_invoice$items4","_invoice$items5","itemIndex","unit_code_display","Treasury","accounts","setAccounts","selectedAccount","setSelectedAccount","showTransferModal","setShowTransferModal","transferData","setTransferData","to","manualTransaction","setManualTransaction","account","showManualForm","setShowManualForm","fetchTreasuryData","balancesResponse","transactionsResponse","invoicesResponse","expensesResponse","balances","manualTransactions","updatedAccounts","paymentMethodMap","push","account_id","handleTransfer","fromAccount","acc","from_account","to_account","handleManualTransaction","clearAccount","accountId","resetTreasury","firstConfirm","secondConfirm","finalConfirm","prompt","deleted_treasury_transactions","_error$response20","_error$response20$dat","selectedAccountData","Backup","backups","setBackups","driveFiles","setDriveFiles","driveStatus","setDriveStatus","creating","setCreating","activeTab","setActiveTab","fetchBackups","fetchDriveStatus","fetchDriveFiles","checkBackupStatus","backupId","attempts","arguments","undefined","total_documents","createBackup","backup_id","_error$response21","_error$response21$dat","downloadBackup","createdAt","timestamp","replace","filename","_error$response22","_error$response22$dat","handleFileUpload","endsWith","action","uploadBackupFile","restoreDirectly","collections_restored","location","reload","_error$response23","_error$response23$dat","restoreBackup","toLocaleString","_error$response24","_error$response24$dat","deleteBackup","_error$response25","_error$response25$dat","uploadToDrive","enabled","_error$response26","_error$response26$dat","errorMsg","downloadFromDrive","fileId","fileName","_error$response27","_error$response27$dat","restoreFromDrive","_error$response28","_error$response28$dat","deleteFromDrive","_error$response29","_error$response29$dat","switchTab","tab","backup","is_scheduled","created_by","webViewLink","rel","createdTime","size","Users","users","setUsers","newUser","setNewUser","editingUser","setEditingUser","companyInfo","setCompanyInfo","editingCompany","setEditingCompany","selectedUserPermissions","setSelectedUserPermissions","allPermissions","fetchUsers","dbUsers","hasElsawy","hasRoot","permissions","p","updatedResponse","addUser","defaultPermissions","_error$response30","_error$response30$dat","startEdit","saveEdit","currentUser","u","updatedUser","_error$response31","_error$response31$dat","deleteUser","userId","resetPassword","newPassword","_error$response32","_error$response32$dat","openPermissions","tempPermissions","togglePermission","permissionKey","newPermissions","savePermissions","_error$response33","_error$response33$dat","saveCompanyInfo","_user$permissions","permission","Pricing","materialPricings","setMaterialPricings","editingPricing","setEditingPricing","newPricing","setNewPricing","price_per_mm","manufacturing_cost_client1","manufacturing_cost_client2","manufacturing_cost_client3","fetchMaterialPricings","addMaterialPricing","_error$response34","_error$response34$dat","editMaterialPricing","deleteMaterialPricing","pricingId","_error$response35","_error$response35$dat","App","setCurrentPage","renderPage","AppWithAuth"],"sources":["/app/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, createContext, useContext } from 'react';\nimport './App.css';\nimport axios from 'axios';\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nconst API = `${BACKEND_URL}/api`;\n\n// Auth Context\nconst AuthContext = createContext();\n\nconst useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\nconst AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const savedUser = localStorage.getItem('user');\n    if (savedUser) {\n      setUser(JSON.parse(savedUser));\n    }\n    setIsLoading(false);\n  }, []);\n\n  const login = async (username, password) => {\n    try {\n      const response = await axios.post(`${API}/auth/login`, null, {\n        params: { username, password }\n      });\n      \n      if (response.data.success) {\n        setUser(response.data.user);\n        localStorage.setItem('user', JSON.stringify(response.data.user));\n        return true;\n      }\n      return false;\n    } catch (error) {\n      console.error('Login error:', error);\n      return false;\n    }\n  };\n\n  const logout = () => {\n    setUser(null);\n    localStorage.removeItem('user');\n  };\n\n  if (isLoading) {\n    return <div className=\"flex items-center justify-center min-h-screen\">\n      <div className=\"text-xl\">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>\n    </div>;\n  }\n\n  return (\n    <AuthContext.Provider value={{ user, login, logout }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\n// Login Component\nconst Login = () => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const { login } = useAuth();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    \n    const success = await login(username, password);\n    if (!success) {\n      setError('Ø®Ø·Ø£ ÙÙŠ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4\" dir=\"rtl\">\n      <div className=\"max-w-md w-full\">\n        {/* Login Card */}\n        <div className=\"bg-white rounded-2xl shadow-2xl p-8 border border-blue-100\">\n          {/* Header */}\n          <div className=\"text-center mb-8\">\n            <div className=\"mb-4\">\n              <img \n                src=\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\" \n                alt=\"Master Seal Logo\" \n                className=\"h-16 w-16 mx-auto rounded-full shadow-lg border-4 border-blue-100\"\n              />\n            </div>\n            <h1 className=\"text-3xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent\">Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„</h1>\n            <p className=\"text-gray-500 mt-2\">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„</p>\n            <div className=\"w-16 h-1 bg-gradient-to-r from-blue-400 to-blue-600 mx-auto mt-3 rounded-full\"></div>\n          </div>\n          \n          {/* Login Form */}\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <div className=\"space-y-2\">\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                ðŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\n              </label>\n              <input\n                type=\"text\"\n                value={username}\n                onChange={(e) => setUsername(e.target.value)}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-3 focus:ring-blue-200 focus:border-blue-400 transition-all duration-200 bg-gray-50 hover:bg-white\"\n                placeholder=\"Ø§Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\"\n                required\n              />\n            </div>\n            \n            <div className=\"space-y-2\">\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                ðŸ”’ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\n              </label>\n              <input\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-3 focus:ring-blue-200 focus:border-blue-400 transition-all duration-200 bg-gray-50 hover:bg-white\"\n                placeholder=\"Ø§Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\"\n                required\n              />\n            </div>\n            \n            {error && (\n              <div className=\"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-xl text-sm text-center animate-pulse\">\n                âš ï¸ {error}\n              </div>\n            )}\n            \n            <button\n              type=\"submit\"\n              className=\"w-full bg-gradient-to-r from-blue-600 to-blue-800 text-white py-3 px-6 rounded-xl hover:from-blue-700 hover:to-blue-900 focus:outline-none focus:ring-3 focus:ring-blue-300 transition-all duration-200 font-semibold shadow-lg hover:shadow-xl transform hover:scale-105\"\n            >\n              ðŸš€ Ø¯Ø®ÙˆÙ„\n            </button>\n          </form>\n          \n          {/* Footer */}\n          <div className=\"text-center mt-8 pt-6 border-t border-gray-100\">\n            <p className=\"text-xs text-gray-400\">Ø§Ù„Ø­Ø±ÙÙŠÙŠÙ† - Ø§Ù„Ø³Ù„Ø§Ù… - Ø£Ù…Ø§Ù… Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª</p>\n            <p className=\"text-xs text-gray-500 mt-1 font-medium\">ðŸ“ž 01020630677</p>\n          </div>\n        </div>\n        \n        {/* Additional Info Card */}\n        <div className=\"mt-6 bg-white/60 backdrop-blur-sm rounded-xl p-4 text-center border border-blue-100/50\">\n          <p className=\"text-sm text-gray-600\">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…ØªÙƒØ§Ù…Ù„ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙˆØ§Ù„Ù…Ø®Ø²ÙˆÙ† ÙˆØ§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Navigation Component\nconst Navigation = ({ currentPage, onPageChange }) => {\n  const { user, logout } = useAuth();\n  \n  // Dashboard is only for Elsawy\n  const elsawyPages = [\n    { key: 'dashboard', label: 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…', icon: 'ðŸ“Š' },\n    { key: 'sales', label: 'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª', icon: 'ðŸ’°' },\n    { key: 'inventory', label: 'Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø®Ø§Ù…Ø§Øª', icon: 'ðŸ“¦' },\n    { key: 'stock', label: 'Ù…Ø®Ø²Ù† Ø¥Ù†ØªØ§Ø¬', icon: 'ðŸª' },\n    { key: 'local', label: 'Ù…ÙˆØ±Ø¯ÙŠÙ†', icon: 'ðŸ­' },\n    { key: 'deferred', label: 'Ø§Ù„Ø¢Ø¬Ù„', icon: 'â³' },\n    { key: 'expenses', label: 'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª', icon: 'ðŸ’¸' },\n    { key: 'revenue', label: 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª', icon: 'ðŸ“ˆ' },\n    { key: 'treasury', label: 'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©', icon: 'ðŸ¦' },\n    { key: 'invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ±', icon: 'ðŸ§¾' },\n    { key: 'deleted-invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©', icon: 'ðŸ—‘ï¸' },\n    { key: 'customer-statement', label: 'ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨', icon: 'ðŸ“‹' },\n    { key: 'work-orders', label: 'Ø£Ù…Ø± Ø´ØºÙ„', icon: 'âš™ï¸' },\n    { key: 'pricing', label: 'Ø§Ù„ØªØ³Ø¹ÙŠØ±', icon: 'ðŸ’²' },\n    { key: 'backup', label: 'Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ', icon: 'ðŸ’¾' },\n    { key: 'users', label: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†', icon: 'ðŸ‘¥' }\n  ];\n  \n  const adminPages = [\n    { key: 'sales', label: 'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª', icon: 'ðŸ’°' },\n    { key: 'inventory', label: 'Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø®Ø§Ù…Ø§Øª', icon: 'ðŸ“¦' },\n    { key: 'stock', label: 'Ù…Ø®Ø²Ù† Ø¥Ù†ØªØ§Ø¬', icon: 'ðŸª' },\n    { key: 'local', label: 'Ù…ÙˆØ±Ø¯ÙŠÙ†', icon: 'ðŸ­' },\n    { key: 'deferred', label: 'Ø§Ù„Ø¢Ø¬Ù„', icon: 'â³' },\n    { key: 'expenses', label: 'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª', icon: 'ðŸ’¸' },\n    { key: 'revenue', label: 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª', icon: 'ðŸ“ˆ' },\n    { key: 'treasury', label: 'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©', icon: 'ðŸ¦' },\n    { key: 'invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ±', icon: 'ðŸ§¾' },\n    { key: 'deleted-invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©', icon: 'ðŸ—‘ï¸' },\n    { key: 'customer-statement', label: 'ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨', icon: 'ðŸ“‹' },\n    { key: 'work-orders', label: 'Ø£Ù…Ø± Ø´ØºÙ„', icon: 'âš™ï¸' },\n    { key: 'pricing', label: 'Ø§Ù„ØªØ³Ø¹ÙŠØ±', icon: 'ðŸ’²' },\n    { key: 'backup', label: 'Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ', icon: 'ðŸ’¾' },\n    { key: 'users', label: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†', icon: 'ðŸ‘¥' }\n  ];\n  \n  const userPages = [\n    { key: 'sales', label: 'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª', icon: 'ðŸ’°' },\n    { key: 'inventory', label: 'Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø®Ø§Ù…Ø§Øª', icon: 'ðŸ“¦' },\n    { key: 'stock', label: 'Ù…Ø®Ø²Ù† Ø¥Ù†ØªØ§Ø¬', icon: 'ðŸª' },\n    { key: 'local', label: 'Ù…ÙˆØ±Ø¯ÙŠÙ†', icon: 'ðŸ­' },\n    { key: 'deferred', label: 'Ø§Ù„Ø¢Ø¬Ù„', icon: 'â³' },\n    { key: 'expenses', label: 'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª', icon: 'ðŸ’¸' },\n    { key: 'treasury', label: 'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©', icon: 'ðŸ¦' },\n    { key: 'invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ±', icon: 'ðŸ§¾' },\n    { key: 'deleted-invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©', icon: 'ðŸ—‘ï¸' },\n    { key: 'customer-statement', label: 'ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨', icon: 'ðŸ“‹' },\n    { key: 'work-orders', label: 'Ø£Ù…Ø± Ø´ØºÙ„', icon: 'âš™ï¸' },\n    { key: 'pricing', label: 'Ø§Ù„ØªØ³Ø¹ÙŠØ±', icon: 'ðŸ’²' }\n  ];\n  \n  // Only Elsawy gets dashboard access\n  const pages = user?.username === 'Elsawy' ? elsawyPages : \n               user?.role === 'admin' ? adminPages : userPages;\n\n  return (\n    <div className=\"w-80 bg-gradient-to-b from-blue-900 via-blue-800 to-blue-900 text-white shadow-2xl\">\n      {/* Header */}\n      <div className=\"p-6 border-b border-blue-700\">\n        <div className=\"flex items-center space-x-3 space-x-reverse\">\n          <img \n            src=\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\" \n            alt=\"Master Seal Logo\" \n            className=\"h-12 w-12 rounded-lg shadow-lg\"\n          />\n          <div>\n            <h1 className=\"text-xl font-bold text-white\">Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„</h1>\n            <p className=\"text-xs text-blue-200\">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…ØªÙƒØ§Ù…Ù„</p>\n          </div>\n        </div>\n      </div>\n\n      {/* User Info */}\n      <div className=\"p-4 bg-blue-800 border-b border-blue-700\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <p className=\"text-sm font-medium\">Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ø§Ù‹</p>\n            <p className=\"text-lg font-bold text-blue-200\">{user?.username}</p>\n          </div>\n          <button\n            onClick={logout}\n            className=\"bg-red-500 hover:bg-red-600 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 shadow-lg hover:shadow-xl\"\n          >\n            Ø®Ø±ÙˆØ¬\n          </button>\n        </div>\n      </div>\n      \n      {/* Navigation Menu */}\n      <nav className=\"flex-1 p-4 space-y-2\">\n        {pages.map(page => (\n          <button\n            key={page.key}\n            onClick={() => onPageChange(page.key)}\n            className={`w-full flex items-center space-x-3 space-x-reverse p-4 rounded-xl text-right transition-all duration-200 group ${\n              currentPage === page.key \n                ? 'bg-white text-blue-900 shadow-lg transform scale-105' \n                : 'hover:bg-blue-700 hover:transform hover:translate-x-2'\n            }`}\n          >\n            <span className=\"text-2xl\">{page.icon}</span>\n            <span className=\"font-medium\">{page.label}</span>\n            {currentPage === page.key && (\n              <div className=\"mr-auto\">\n                <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-pulse\"></div>\n              </div>\n            )}\n          </button>\n        ))}\n      </nav>\n\n      {/* Footer */}\n      <div className=\"p-4 border-t border-blue-700 text-center\">\n        <p className=\"text-xs text-blue-300\">Ø§Ù„Ø­Ø±ÙÙŠÙŠÙ† - Ø§Ù„Ø³Ù„Ø§Ù… - Ø£Ù…Ø§Ù… Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª</p>\n        <p className=\"text-xs text-blue-400 mt-1\">01020630677</p>\n      </div>\n    </div>\n  );\n};\n\n// Inventory Management Component\nconst Inventory = () => {\n  const [inventoryItems, setInventoryItems] = useState([]);\n  const [inventoryTransactions, setInventoryTransactions] = useState([]);\n  const [lowStockItems, setLowStockItems] = useState([]);\n  const [currentView, setCurrentView] = useState('items'); // items, transactions, low-stock, add-item\n  const [editingItem, setEditingItem] = useState(null); // Ù„Ù„ØªØ¹Ø¯ÙŠÙ„\n  const [newItem, setNewItem] = useState({\n    material_type: 'NBR',\n    inner_diameter: '',\n    outer_diameter: '',\n    available_pieces: '',  // ØªØºÙŠÙŠØ± Ù…Ù† available_height Ø¥Ù„Ù‰ available_pieces\n    min_stock_level: 2,    // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ 2 Ù‚Ø·Ø¹Ø©\n    notes: ''\n  });\n  const [newTransaction, setNewTransaction] = useState({\n    material_type: 'NBR',\n    inner_diameter: '',\n    outer_diameter: '',\n    transaction_type: 'in',\n    pieces_change: '',     // ØªØºÙŠÙŠØ± Ù…Ù† height_change Ø¥Ù„Ù‰ pieces_change\n    reason: '',\n    notes: ''\n  });\n  const [searchTerm, setSearchTerm] = useState('');\n\n  const materialTypes = ['NBR', 'BUR', 'BT', 'VT', 'BOOM'];\n\n  // Fetch functions\n  const fetchInventoryItems = async () => {\n    try {\n      const response = await axios.get(`${API}/inventory`);\n      setInventoryItems(response.data || []);\n    } catch (error) {\n      console.error('Error fetching inventory items:', error);\n    }\n  };\n\n  const fetchInventoryTransactions = async () => {\n    try {\n      const response = await axios.get(`${API}/inventory-transactions`);\n      setInventoryTransactions(response.data || []);\n    } catch (error) {\n      console.error('Error fetching inventory transactions:', error);\n    }\n  };\n\n  const fetchLowStockItems = async () => {\n    try {\n      const response = await axios.get(`${API}/inventory/low-stock`);\n      setLowStockItems(response.data || []);\n    } catch (error) {\n      console.error('Error fetching low stock items:', error);\n    }\n  };\n\n  useEffect(() => {\n    fetchInventoryItems();\n    fetchInventoryTransactions();\n    fetchLowStockItems();\n  }, []);\n\n  // Add or Update inventory item\n  const addInventoryItem = async () => {\n    if (!newItem.material_type || !newItem.inner_diameter || \n        !newItem.outer_diameter || !newItem.available_pieces) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      if (editingItem) {\n        // Update existing item\n        await axios.put(`${API}/inventory/${editingItem.id}`, {\n          ...newItem,\n          inner_diameter: parseFloat(newItem.inner_diameter),\n          outer_diameter: parseFloat(newItem.outer_diameter),\n          available_pieces: parseInt(newItem.available_pieces),\n          min_stock_level: parseInt(newItem.min_stock_level || 2)\n        });\n        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n        setEditingItem(null);\n      } else {\n        // Add new item\n        await axios.post(`${API}/inventory`, {\n          ...newItem,\n          inner_diameter: parseFloat(newItem.inner_diameter),\n          outer_diameter: parseFloat(newItem.outer_diameter),\n          available_pieces: parseInt(newItem.available_pieces),\n          min_stock_level: parseInt(newItem.min_stock_level || 2)\n        });\n        alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n      }\n      \n      fetchInventoryItems();\n      fetchLowStockItems();\n      setCurrentView('items');\n      setNewItem({\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        available_pieces: '',\n        min_stock_level: 2,\n        notes: ''\n      });\n    } catch (error) {\n      console.error('Error saving inventory item:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  // Add inventory transaction\n  const addInventoryTransaction = async () => {\n    if (!newTransaction.material_type || !newTransaction.inner_diameter || \n        !newTransaction.outer_diameter || !newTransaction.pieces_change || !newTransaction.reason) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      const transactionData = {\n        ...newTransaction,\n        inner_diameter: parseFloat(newTransaction.inner_diameter),\n        outer_diameter: parseFloat(newTransaction.outer_diameter),\n        pieces_change: newTransaction.transaction_type === 'out' \n          ? -Math.abs(parseInt(newTransaction.pieces_change))\n          : Math.abs(parseInt(newTransaction.pieces_change))\n      };\n\n      await axios.post(`${API}/inventory-transactions`, transactionData);\n      \n      fetchInventoryItems();\n      fetchInventoryTransactions();\n      fetchLowStockItems();\n      setNewTransaction({\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        transaction_type: 'in',\n        pieces_change: '',\n        reason: '',\n        notes: ''\n      });\n      alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ù…Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error adding inventory transaction:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ù…Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ø¬Ø±Ø¯: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  // Filter and sort items based on search\n  const filteredItems = inventoryItems.filter(item =>\n    item.material_type.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    item.inner_diameter.toString().includes(searchTerm.toLowerCase()) ||\n    item.outer_diameter.toString().includes(searchTerm.toLowerCase()) ||\n    item.notes?.toLowerCase().includes(searchTerm.toLowerCase())\n  ).sort((a, b) => {\n    // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\n    const materialPriority = { 'BUR': 1, 'NBR': 2, 'BT': 3, 'BOOM': 4, 'VT': 5 };\n    const aPriority = materialPriority[a.material_type] || 6;\n    const bPriority = materialPriority[b.material_type] || 6;\n    \n    if (aPriority !== bPriority) {\n      return aPriority - bPriority;\n    }\n    // Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)\n    if (a.inner_diameter !== b.inner_diameter) {\n      return a.inner_diameter - b.inner_diameter;\n    }\n    return a.outer_diameter - b.outer_diameter;\n  });\n\n  const filteredTransactions = inventoryTransactions.filter(transaction =>\n    transaction.reason.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    transaction.material_type.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    transaction.notes?.toLowerCase().includes(searchTerm.toLowerCase())\n  ).sort((a, b) => {\n    // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\n    const materialPriority = { 'BUR': 1, 'NBR': 2, 'BT': 3, 'BOOM': 4, 'VT': 5 };\n    const aPriority = materialPriority[a.material_type] || 6;\n    const bPriority = materialPriority[b.material_type] || 6;\n    \n    if (aPriority !== bPriority) {\n      return aPriority - bPriority;\n    }\n    // Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ) Ø«Ù… Ø§Ù„ØªØ§Ø±ÙŠØ®\n    if (a.inner_diameter !== b.inner_diameter) {\n      return a.inner_diameter - b.inner_diameter;\n    }\n    if (a.outer_diameter !== b.outer_diameter) {\n      return a.outer_diameter - b.outer_diameter;\n    }\n    return new Date(b.date) - new Date(a.date); // Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹\n  });\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-3xl font-bold\">Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø®Ø§Ù…Ø§Øª</h1>\n        <div className=\"flex space-x-4 space-x-reverse\">\n          <button\n            onClick={() => setCurrentView('items')}\n            className={`px-4 py-2 rounded ${currentView === 'items' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¬Ø±Ø¯\n          </button>\n          <button\n            onClick={() => setCurrentView('transactions')}\n            className={`px-4 py-2 rounded ${currentView === 'transactions' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ø¬Ø±Ø¯\n          </button>\n          <button\n            onClick={() => setCurrentView('low-stock')}\n            className={`px-4 py-2 rounded ${currentView === 'low-stock' ? 'bg-red-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ù…Ø®Ø²ÙˆÙ† Ù…Ù†Ø®ÙØ¶ ({lowStockItems.length})\n          </button>\n          <button\n            onClick={() => setCurrentView('excel')}\n            className={`px-4 py-2 rounded ${currentView === 'excel' ? 'bg-green-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥ÙƒØ³Ù„\n          </button>\n          <button\n            onClick={() => setCurrentView('add-item')}\n            className={`px-4 py-2 rounded ${currentView === 'add-item' ? 'bg-green-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø¬Ø¯ÙŠØ¯\n          </button>\n        </div>\n      </div>\n\n      {/* Search Bar */}\n      <div className=\"mb-4\">\n        <input\n          type=\"text\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          placeholder=\"Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¬Ø±Ø¯...\"\n          className=\"w-full p-3 border border-gray-300 rounded-lg\"\n        />\n      </div>\n\n      {/* Inventory Items View */}\n      {currentView === 'items' && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¬Ø±Ø¯</h3>\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full border-collapse border border-gray-300\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø§Ø¯Ø©</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</th>\n                  <th className=\"border border-gray-300 p-2\">Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹ Ø§Ù„Ù…ØªØ§Ø­Ø©</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø§Ù„Ø©</th>\n                  <th className=\"border border-gray-300 p-2\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n                </tr>\n              </thead>\n              <tbody>\n                {filteredItems.map(item => (\n                  <tr key={item.id}>\n                    <td className=\"border border-gray-300 p-2 font-semibold\">{item.material_type}</td>\n                    <td className=\"border border-gray-300 p-2\">{item.inner_diameter}</td>\n                    <td className=\"border border-gray-300 p-2\">{item.outer_diameter}</td>\n                    <td className={`border border-gray-300 p-2 font-semibold ${\n                      item.available_pieces <= item.min_stock_level ? 'text-red-600' : 'text-green-600'\n                    }`}>\n                      {item.available_pieces} Ù‚Ø·Ø¹Ø©\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">{item.min_stock_level} Ù‚Ø·Ø¹Ø©</td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <span className={`px-2 py-1 rounded text-sm ${\n                        item.available_pieces <= item.min_stock_level ? 'bg-red-100 text-red-800' : 'bg-green-100 text-green-800'\n                      }`}>\n                        {item.available_pieces <= item.min_stock_level ? 'Ù…Ù†Ø®ÙØ¶' : 'Ø·Ø¨ÙŠØ¹ÙŠ'}\n                      </span>\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">{item.notes || '-'}</td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <div className=\"flex space-x-2 space-x-reverse\">\n                        <button\n                          onClick={() => {\n                            setEditingItem(item);\n                            setNewItem({\n                              material_type: item.material_type,\n                              inner_diameter: item.inner_diameter,\n                              outer_diameter: item.outer_diameter,\n                              available_pieces: item.available_pieces,\n                              min_stock_level: item.min_stock_level,\n                              notes: item.notes || ''\n                            });\n                            setCurrentView('add-item');\n                          }}\n                          className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                        >\n                          ØªØ¹Ø¯ÙŠÙ„\n                        </button>\n                        <button\n                          onClick={async () => {\n                            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ØµØ±ØŸ')) {\n                              try {\n                                await axios.delete(`${API}/inventory/${item.id}`);\n                                alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ù†ØµØ± Ø¨Ù†Ø¬Ø§Ø­');\n                                fetchInventoryItems();\n                              } catch (error) {\n                                console.error('Error deleting item:', error);\n                                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¹Ù†ØµØ±');\n                              }\n                            }\n                          }}\n                          className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                        >\n                          Ø­Ø°Ù\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {/* Transactions View */}\n      {currentView === 'transactions' && (\n        <div>\n          {/* Add Transaction Form */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø§Ù…Ù„Ø© Ø¬Ø±Ø¯</h3>\n            <div className=\"grid grid-cols-3 gap-4\">\n              <select\n                value={newTransaction.material_type}\n                onChange={(e) => setNewTransaction({...newTransaction, material_type: e.target.value})}\n                className=\"p-2 border border-gray-300 rounded\"\n              >\n                {materialTypes.map(type => (\n                  <option key={type} value={type}>{type}</option>\n                ))}\n              </select>\n              <input\n                type=\"number\"\n                value={newTransaction.inner_diameter}\n                onChange={(e) => setNewTransaction({...newTransaction, inner_diameter: e.target.value})}\n                placeholder=\"Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <input\n                type=\"number\"\n                value={newTransaction.outer_diameter}\n                onChange={(e) => setNewTransaction({...newTransaction, outer_diameter: e.target.value})}\n                placeholder=\"Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <select\n                value={newTransaction.transaction_type}\n                onChange={(e) => setNewTransaction({...newTransaction, transaction_type: e.target.value})}\n                className=\"p-2 border border-gray-300 rounded\"\n              >\n                <option value=\"in\">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…Ø®Ø²ÙˆÙ†</option>\n                <option value=\"out\">Ø®ØµÙ… Ù…Ù† Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</option>\n              </select>\n              <input\n                type=\"number\"\n                step=\"1\"\n                value={newTransaction.pieces_change}\n                onChange={(e) => setNewTransaction({...newTransaction, pieces_change: e.target.value})}\n                placeholder=\"Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <input\n                type=\"text\"\n                value={newTransaction.reason}\n                onChange={(e) => setNewTransaction({...newTransaction, reason: e.target.value})}\n                placeholder=\"Ø³Ø¨Ø¨ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            <div className=\"mt-4\">\n              <input\n                type=\"text\"\n                value={newTransaction.notes}\n                onChange={(e) => setNewTransaction({...newTransaction, notes: e.target.value})}\n                placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            <button\n              onClick={addInventoryTransaction}\n              className=\"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n            >\n              ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©\n            </button>\n          </div>\n\n          {/* Transactions List */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø³Ø¬Ù„ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ø¬Ø±Ø¯</h3>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full border-collapse border border-gray-300\">\n                <thead>\n                  <tr className=\"bg-gray-100\">\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                    <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø§Ø¯Ø©</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª</th>\n                    <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©</th>\n                    <th className=\"border border-gray-300 p-2\">Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø³Ø¨Ø¨</th>\n                    <th className=\"border border-gray-300 p-2\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {filteredTransactions.map(transaction => (\n                    <tr key={transaction.id}>\n                      <td className=\"border border-gray-300 p-2\">\n                        {new Date(transaction.date).toLocaleDateString('ar-EG')}\n                      </td>\n                      <td className=\"border border-gray-300 p-2\">{transaction.material_type}</td>\n                      <td className=\"border border-gray-300 p-2\">\n                        {transaction.inner_diameter} Ã— {transaction.outer_diameter}\n                      </td>\n                      <td className=\"border border-gray-300 p-2\">\n                        <span className={`px-2 py-1 rounded text-sm ${\n                          transaction.transaction_type === 'in' \n                            ? 'bg-green-100 text-green-800' \n                            : 'bg-red-100 text-red-800'\n                        }`}>\n                          {transaction.transaction_type === 'in' ? 'Ø¥Ø¶Ø§ÙØ©' : 'Ø®ØµÙ…'}\n                        </span>\n                      </td>\n                      <td className={`border border-gray-300 p-2 font-semibold ${\n                        transaction.pieces_change > 0 ? 'text-green-600' : 'text-red-600'\n                      }`}>\n                        {transaction.pieces_change > 0 ? '+' : ''}{transaction.pieces_change} Ù‚Ø·Ø¹Ø©\n                      </td>\n                      <td className=\"border border-gray-300 p-2 font-semibold\">\n                        {transaction.remaining_pieces} Ù‚Ø·Ø¹Ø©\n                      </td>\n                      <td className=\"border border-gray-300 p-2\">{transaction.reason}</td>\n                      <td className=\"border border-gray-300 p-2\">{transaction.notes || '-'}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Low Stock Items View */}\n      {currentView === 'low-stock' && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4 text-red-600\">\n            Ø¹Ù†Ø§ØµØ± Ø¨Ù…Ø®Ø²ÙˆÙ† Ù…Ù†Ø®ÙØ¶ ({lowStockItems.length})\n          </h3>\n          {lowStockItems.length === 0 ? (\n            <p className=\"text-green-600 text-center py-8\">\n              âœ… Ø¬Ù…ÙŠØ¹ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¬Ø±Ø¯ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ\n            </p>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full border-collapse border border-gray-300\">\n                <thead>\n                  <tr className=\"bg-red-50\">\n                    <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø§Ø¯Ø©</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰</th>\n                    <th className=\"border border-gray-300 p-2\">Ù†Ù‚Øµ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {lowStockItems.map(item => (\n                    <tr key={item.id} className=\"bg-red-50\">\n                      <td className=\"border border-gray-300 p-2 font-semibold\">{item.material_type}</td>\n                      <td className=\"border border-gray-300 p-2\">\n                        {item.inner_diameter} Ã— {item.outer_diameter}\n                      </td>\n                      <td className=\"border border-gray-300 p-2 font-semibold text-red-600\">\n                        {item.available_pieces} Ù‚Ø·Ø¹Ø©\n                      </td>\n                      <td className=\"border border-gray-300 p-2\">{item.min_stock_level} Ù‚Ø·Ø¹Ø©</td>\n                      <td className=\"border border-gray-300 p-2 font-semibold text-red-600\">\n                        {Math.max(0, item.min_stock_level - item.available_pieces)} Ù‚Ø·Ø¹Ø©\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Add/Edit Item View */}\n      {currentView === 'add-item' && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">\n            {editingItem ? 'ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯' : 'Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø¬Ø±Ø¯ Ø¬Ø¯ÙŠØ¯'}\n          </h3>\n          <div className=\"grid grid-cols-2 gap-4\">\n            <select\n              value={newItem.material_type}\n              onChange={(e) => setNewItem({...newItem, material_type: e.target.value})}\n              className=\"p-2 border border-gray-300 rounded\"\n            >\n              {materialTypes.map(type => (\n                <option key={type} value={type}>{type}</option>\n              ))}\n            </select>\n            <input\n              type=\"number\"\n              value={newItem.inner_diameter}\n              onChange={(e) => setNewItem({...newItem, inner_diameter: e.target.value})}\n              placeholder=\"Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ\"\n              className=\"p-2 border border-gray-300 rounded\"\n            />\n            <input\n              type=\"number\"\n              value={newItem.outer_diameter}\n              onChange={(e) => setNewItem({...newItem, outer_diameter: e.target.value})}\n              placeholder=\"Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ\"\n              className=\"p-2 border border-gray-300 rounded\"\n            />\n            <input\n              type=\"number\"\n              step=\"1\"\n              value={newItem.available_pieces}\n              onChange={(e) => setNewItem({...newItem, available_pieces: e.target.value})}\n              placeholder=\"Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹ Ø§Ù„Ù…ØªØ§Ø­Ø©\"\n              className=\"p-2 border border-gray-300 rounded\"\n            />\n            <input\n              type=\"number\"\n              value={newItem.min_stock_level}\n              onChange={(e) => setNewItem({...newItem, min_stock_level: e.target.value})}\n              placeholder=\"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ù…Ø®Ø²ÙˆÙ†\"\n              className=\"p-2 border border-gray-300 rounded\"\n            />\n            <input\n              type=\"text\"\n              value={newItem.notes}\n              onChange={(e) => setNewItem({...newItem, notes: e.target.value})}\n              placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n              className=\"p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          <button\n            onClick={addInventoryItem}\n            className=\"mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n          >\n            {editingItem ? 'ØªØ­Ø¯ÙŠØ« Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯' : 'Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø±Ø¯'}\n          </button>\n          {editingItem && (\n            <button\n              onClick={() => {\n                setEditingItem(null);\n                setNewItem({\n                  material_type: 'NBR',\n                  inner_diameter: '',\n                  outer_diameter: '',\n                  available_pieces: '',\n                  min_stock_level: 2,\n                  notes: ''\n                });\n                setCurrentView('items');\n              }}\n              className=\"mt-4 mr-2 bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n            >\n              Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„\n            </button>\n          )}\n        </div>\n      )}\n\n      {/* Excel Management View */}\n      {currentView === 'excel' && (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          {/* Inventory Excel Management */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¯Ø§Ø±Ø© Ù…Ù„ÙØ§Øª Ø§Ù„Ø¬Ø±Ø¯ - Excel</h3>\n            \n            {/* Export Inventory */}\n            <div className=\"mb-6\">\n              <h4 className=\"font-medium mb-2\">ØªØµØ¯ÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø±Ø¯</h4>\n              <button\n                onClick={async () => {\n                  try {\n                    const response = await axios.get(`${API}/excel/export/inventory`, {\n                      responseType: 'blob'\n                    });\n                    const url = window.URL.createObjectURL(new Blob([response.data]));\n                    const link = document.createElement('a');\n                    link.href = url;\n                    link.setAttribute('download', `inventory_export_${new Date().toISOString().split('T')[0]}.xlsx`);\n                    document.body.appendChild(link);\n                    link.click();\n                    link.remove();\n                    alert('ØªÙ… ØªØµØ¯ÙŠØ± Ù…Ù„Ù Ø§Ù„Ø¬Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n                  } catch (error) {\n                    console.error('Error exporting inventory:', error);\n                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù');\n                  }\n                }}\n                className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n              >\n                ØªØµØ¯ÙŠØ± Ø¬Ø±Ø¯ Excel\n              </button>\n            </div>\n\n            {/* Import Inventory */}\n            <div>\n              <h4 className=\"font-medium mb-2\">Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø±Ø¯</h4>\n              <input\n                type=\"file\"\n                accept=\".xlsx,.xls\"\n                onChange={async (e) => {\n                  const file = e.target.files[0];\n                  if (!file) return;\n                  \n                  const formData = new FormData();\n                  formData.append('file', file);\n                  \n                  try {\n                    const response = await axios.post(`${API}/excel/import/inventory`, formData, {\n                      headers: { 'Content-Type': 'multipart/form-data' }\n                    });\n                    alert(`ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ ${response.data.imported_count} Ø¹Ù†ØµØ± Ø¨Ù†Ø¬Ø§Ø­`);\n                    if (response.data.errors.length > 0) {\n                      console.warn('Import errors:', response.data.errors);\n                    }\n                    fetchInventoryItems();\n                  } catch (error) {\n                    console.error('Error importing inventory:', error);\n                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù');\n                  }\n                  \n                  e.target.value = '';\n                }}\n                className=\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100\"\n              />\n              <p className=\"text-sm text-gray-600 mt-2\">\n                Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©: material_type, inner_diameter, outer_diameter, available_pieces\n              </p>\n            </div>\n          </div>\n\n          {/* Raw Materials Excel Management */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù… - Excel</h3>\n            \n            {/* Export Raw Materials */}\n            <div className=\"mb-6\">\n              <h4 className=\"font-medium mb-2\">ØªØµØ¯ÙŠØ± Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…</h4>\n              <button\n                onClick={async () => {\n                  try {\n                    const response = await axios.get(`${API}/excel/export/raw-materials`, {\n                      responseType: 'blob'\n                    });\n                    const url = window.URL.createObjectURL(new Blob([response.data]));\n                    const link = document.createElement('a');\n                    link.href = url;\n                    link.setAttribute('download', `raw_materials_export_${new Date().toISOString().split('T')[0]}.xlsx`);\n                    document.body.appendChild(link);\n                    link.click();\n                    link.remove();\n                    alert('ØªÙ… ØªØµØ¯ÙŠØ± Ù…Ù„Ù Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­');\n                  } catch (error) {\n                    console.error('Error exporting raw materials:', error);\n                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù');\n                  }\n                }}\n                className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n              >\n                ØªØµØ¯ÙŠØ± Ù…ÙˆØ§Ø¯ Ø®Ø§Ù… Excel\n              </button>\n            </div>\n\n            {/* Import Raw Materials */}\n            <div>\n              <h4 className=\"font-medium mb-2\">Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…</h4>\n              <input\n                type=\"file\"\n                accept=\".xlsx,.xls\"\n                onChange={async (e) => {\n                  const file = e.target.files[0];\n                  if (!file) return;\n                  \n                  const formData = new FormData();\n                  formData.append('file', file);\n                  \n                  try {\n                    const response = await axios.post(`${API}/excel/import/raw-materials`, formData, {\n                      headers: { 'Content-Type': 'multipart/form-data' }\n                    });\n                    alert(`ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ ${response.data.imported_count} Ù…Ø§Ø¯Ø© Ø®Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­`);\n                    if (response.data.errors.length > 0) {\n                      console.warn('Import errors:', response.data.errors);\n                    }\n                  } catch (error) {\n                    console.error('Error importing raw materials:', error);\n                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù');\n                  }\n                  \n                  e.target.value = '';\n                }}\n                className=\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100\"\n              />\n              <p className=\"text-sm text-gray-600 mt-2\">\n                Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©: material_type, inner_diameter, outer_diameter, height, pieces_count, unit_code, cost_per_mm\n              </p>\n            </div>\n          </div>\n\n          {/* Instructions */}\n          <div className=\"bg-yellow-50 p-6 rounded-lg shadow-md md:col-span-2\">\n            <h3 className=\"text-lg font-semibold mb-4\">ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¥ÙƒØ³Ù„</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <h4 className=\"font-medium mb-2\">ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:</h4>\n                <ul className=\"text-sm text-gray-700 list-disc list-inside space-y-1\">\n                  <li>ÙŠØªÙ… ØªØµØ¯ÙŠØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</li>\n                  <li>Ø§Ù„Ù…Ù„Ù ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ØªÙ†Ø³ÙŠÙ‚ Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ¹Ø¯ÙŠÙ„</li>\n                  <li>ÙŠÙ…ÙƒÙ† ÙØªØ­ Ø§Ù„Ù…Ù„Ù ÙÙŠ Excel Ø£Ùˆ Google Sheets</li>\n                </ul>\n              </div>\n              <div>\n                <h4 className=\"font-medium mb-2\">Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:</h4>\n                <ul className=\"text-sm text-gray-700 list-disc list-inside space-y-1\">\n                  <li>ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ù…Ù„Ù Ù…Ù† Ù†ÙˆØ¹ .xlsx Ø£Ùˆ .xls</li>\n                  <li>Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù…ÙˆØ¬ÙˆØ¯Ø©</li>\n                  <li>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© Ù„Ù† ØªØªØ£Ø«Ø± (ÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø£Ùˆ Ø§Ù„Ø¥Ø¶Ø§ÙØ©)</li>\n                  <li>Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯ Ù…Ø¹ Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø³ØªÙˆØ±Ø¯Ø©</li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Local Products Management Component\nconst Local = () => {\n  const [suppliers, setSuppliers] = useState([]);\n  const [localProducts, setLocalProducts] = useState([]);\n  const [supplierTransactions, setSupplierTransactions] = useState([]);\n  const [currentView, setCurrentView] = useState('suppliers'); // suppliers, products, transactions\n  const [newSupplier, setNewSupplier] = useState({ name: '', phone: '', address: '' });\n  const [newProduct, setNewProduct] = useState({ name: '', supplier_id: '', purchase_price: '', selling_price: '', current_stock: 0 });\n  const [newTransaction, setNewTransaction] = useState({ supplier_id: '', transaction_type: 'purchase', amount: '', description: '', product_name: '', quantity: '', unit_price: '', payment_method: 'cash' });\n  const [selectedSupplier, setSelectedSupplier] = useState('');\n  const [paymentAmount, setPaymentAmount] = useState('');\n  const [paymentMethod, setPaymentMethod] = useState('cash');\n\n  // Fetch data functions\n  const fetchSuppliers = async () => {\n    try {\n      const response = await axios.get(`${API}/suppliers`);\n      setSuppliers(response.data || []);\n    } catch (error) {\n      console.error('Error fetching suppliers:', error);\n    }\n  };\n\n  const fetchLocalProducts = async () => {\n    try {\n      const response = await axios.get(`${API}/local-products`);\n      setLocalProducts(response.data || []);\n    } catch (error) {\n      console.error('Error fetching local products:', error);\n    }\n  };\n\n  const fetchSupplierTransactions = async () => {\n    try {\n      const response = await axios.get(`${API}/supplier-transactions`);\n      setSupplierTransactions(response.data || []);\n    } catch (error) {\n      console.error('Error fetching supplier transactions:', error);\n    }\n  };\n\n  useEffect(() => {\n    fetchSuppliers();\n    fetchLocalProducts();\n    fetchSupplierTransactions();\n  }, []);\n\n  // Add supplier\n  const addSupplier = async () => {\n    if (!newSupplier.name.trim()) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯');\n      return;\n    }\n\n    try {\n      if (newSupplier.id) {\n        // Update existing supplier\n        await axios.put(`${API}/suppliers/${newSupplier.id}`, {\n          name: newSupplier.name,\n          phone: newSupplier.phone,\n          address: newSupplier.address\n        });\n        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n      } else {\n        // Add new supplier\n        await axios.post(`${API}/suppliers`, newSupplier);\n        alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n      }\n      \n      fetchSuppliers();\n      setNewSupplier({ name: '', phone: '', address: '' });\n    } catch (error) {\n      console.error('Error saving supplier:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…ÙˆØ±Ø¯: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const editSupplier = (supplier) => {\n    // Fill the form with supplier data for editing\n    setNewSupplier({\n      id: supplier.id,\n      name: supplier.name,\n      phone: supplier.phone || '',\n      address: supplier.address || ''\n    });\n  };\n\n  const deleteSupplier = async (supplierId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ±Ø¯ØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡.')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/suppliers/${supplierId}`);\n      fetchSuppliers();\n      fetchLocalProducts(); // Refresh products as they might be affected\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting supplier:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ±Ø¯: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  // Add local product\n  const addLocalProduct = async () => {\n    if (!newProduct.name.trim() || !newProduct.supplier_id || !newProduct.purchase_price || !newProduct.selling_price) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      if (newProduct.id) {\n        // Update existing product\n        await axios.put(`${API}/local-products/${newProduct.id}`, {\n          name: newProduct.name,\n          supplier_id: newProduct.supplier_id,\n          purchase_price: parseFloat(newProduct.purchase_price),\n          selling_price: parseFloat(newProduct.selling_price),\n          current_stock: parseInt(newProduct.current_stock || 0)\n        });\n        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­');\n      } else {\n        // Add new product\n        await axios.post(`${API}/local-products`, {\n          ...newProduct,\n          purchase_price: parseFloat(newProduct.purchase_price),\n          selling_price: parseFloat(newProduct.selling_price),\n          current_stock: parseInt(newProduct.current_stock || 0)\n        });\n        alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­');\n      }\n      \n      fetchLocalProducts();\n      setNewProduct({ name: '', supplier_id: '', purchase_price: '', selling_price: '', current_stock: 0 });\n    } catch (error) {\n      console.error('Error saving local product:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const editLocalProduct = (product) => {\n    // Fill the form with product data for editing\n    setNewProduct({\n      id: product.id,\n      name: product.name,\n      supplier_id: product.supplier_id,\n      purchase_price: product.purchase_price.toString(),\n      selling_price: product.selling_price.toString(),\n      current_stock: product.current_stock || 0\n    });\n  };\n\n  const deleteLocalProduct = async (productId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡.')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/local-products/${productId}`);\n      fetchLocalProducts();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting local product:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  // Pay supplier\n  const paySupplier = async () => {\n    if (!selectedSupplier || !paymentAmount) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙˆØ±Ø¯ ÙˆØ¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº');\n      return;\n    }\n\n    try {\n      await axios.post(`${API}/supplier-payment?supplier_id=${selectedSupplier}&amount=${paymentAmount}&payment_method=${paymentMethod}`);\n      fetchSuppliers();\n      fetchSupplierTransactions();\n      setSelectedSupplier('');\n      setPaymentAmount('');\n      alert('ØªÙ… Ø¯ÙØ¹ Ø§Ù„Ù…Ø¨Ù„Øº Ù„Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error paying supplier:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¯ÙØ¹ Ø§Ù„Ù…Ø¨Ù„Øº');\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-3xl font-bold\">Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</h1>\n        <div className=\"flex space-x-4 space-x-reverse\">\n          <button\n            onClick={() => setCurrentView('suppliers')}\n            className={`px-4 py-2 rounded ${currentView === 'suppliers' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†\n          </button>\n          <button\n            onClick={() => setCurrentView('products')}\n            className={`px-4 py-2 rounded ${currentView === 'products' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª\n          </button>\n          <button\n            onClick={() => setCurrentView('transactions')}\n            className={`px-4 py-2 rounded ${currentView === 'transactions' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª\n          </button>\n          <button\n            onClick={() => setCurrentView('payments')}\n            className={`px-4 py-2 rounded ${currentView === 'payments' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Ø³Ø¯Ø§Ø¯ Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†\n          </button>\n        </div>\n      </div>\n\n      {/* Suppliers View */}\n      {currentView === 'suppliers' && (\n        <div>\n          {/* Add New Supplier */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ±Ø¯ Ø¬Ø¯ÙŠØ¯</h3>\n            <div className=\"grid grid-cols-3 gap-4\">\n              <input\n                type=\"text\"\n                value={newSupplier.name}\n                onChange={(e) => setNewSupplier({...newSupplier, name: e.target.value})}\n                placeholder=\"Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <input\n                type=\"text\"\n                value={newSupplier.phone}\n                onChange={(e) => setNewSupplier({...newSupplier, phone: e.target.value})}\n                placeholder=\"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <input\n                type=\"text\"\n                value={newSupplier.address}\n                onChange={(e) => setNewSupplier({...newSupplier, address: e.target.value})}\n                placeholder=\"Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            <button\n              onClick={addSupplier}\n              className=\"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n            >\n              Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ±Ø¯\n            </button>\n          </div>\n\n          {/* Suppliers List */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</h3>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full border-collapse border border-gray-300\">\n                <thead>\n                  <tr className=\"bg-gray-100\">\n                    <th className=\"border border-gray-300 p-2\">Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‡Ø§ØªÙ</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>\n                    <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</th>\n                    <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯ÙÙˆØ¹</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ­Ù‚</th>\n                    <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {suppliers.map(supplier => (\n                    <tr key={supplier.id}>\n                      <td className=\"border border-gray-300 p-2 font-semibold\">{supplier.name}</td>\n                      <td className=\"border border-gray-300 p-2\">{supplier.phone || '-'}</td>\n                      <td className=\"border border-gray-300 p-2\">{supplier.address || '-'}</td>\n                      <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {(supplier.total_purchases || 0).toFixed(2)}</td>\n                      <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {(supplier.total_paid || 0).toFixed(2)}</td>\n                      <td className={`border border-gray-300 p-2 font-semibold ${(supplier.balance || 0) > 0 ? 'text-red-600' : 'text-green-600'}`}>\n                        Ø¬.Ù… {(supplier.balance || 0).toFixed(2)}\n                      </td>\n                      <td className=\"border border-gray-300 p-2\">\n                        <div className=\"flex space-x-2 space-x-reverse\">\n                          <button\n                            onClick={() => editSupplier(supplier)}\n                            className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                            title=\"ØªØ­Ø±ÙŠØ±\"\n                          >\n                            âœï¸\n                          </button>\n                          <button\n                            onClick={() => deleteSupplier(supplier.id)}\n                            className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                            title=\"Ø­Ø°Ù\"\n                          >\n                            ðŸ—‘ï¸\n                          </button>\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Products View */}\n      {currentView === 'products' && (\n        <div>\n          {/* Add New Product */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ù…Ø­Ù„ÙŠ Ø¬Ø¯ÙŠØ¯</h3>\n            <div className=\"grid grid-cols-2 gap-4\">\n              <input\n                type=\"text\"\n                value={newProduct.name}\n                onChange={(e) => setNewProduct({...newProduct, name: e.target.value})}\n                placeholder=\"Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <select\n                value={newProduct.supplier_id}\n                onChange={(e) => setNewProduct({...newProduct, supplier_id: e.target.value})}\n                className=\"p-2 border border-gray-300 rounded\"\n              >\n                <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ±Ø¯</option>\n                {suppliers.map(supplier => (\n                  <option key={supplier.id} value={supplier.id}>{supplier.name}</option>\n                ))}\n              </select>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                value={newProduct.purchase_price}\n                onChange={(e) => setNewProduct({...newProduct, purchase_price: e.target.value})}\n                placeholder=\"Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                value={newProduct.selling_price}\n                onChange={(e) => setNewProduct({...newProduct, selling_price: e.target.value})}\n                placeholder=\"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹\"\n                className=\"p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            <button\n              onClick={addLocalProduct}\n              className=\"mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n            >\n              Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬\n            </button>\n          </div>\n\n          {/* Products List */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©</h3>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full border-collapse border border-gray-300\">\n                <thead>\n                  <tr className=\"bg-gray-100\">\n                    <th className=\"border border-gray-300 p-2\">Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…ÙˆØ±Ø¯</th>\n                    <th className=\"border border-gray-300 p-2\">Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡</th>\n                    <th className=\"border border-gray-300 p-2\">Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹</th>\n                    <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ</th>\n                    <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ø§Ø¹</th>\n                    <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {localProducts.map(product => (\n                    <tr key={product.id}>\n                      <td className=\"border border-gray-300 p-2 font-semibold\">{product.name}</td>\n                      <td className=\"border border-gray-300 p-2\">{product.supplier_name}</td>\n                      <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {product.purchase_price.toFixed(2)}</td>\n                      <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {product.selling_price.toFixed(2)}</td>\n                      <td className=\"border border-gray-300 p-2\">{product.current_stock || 0}</td>\n                      <td className=\"border border-gray-300 p-2\">{product.total_sold || 0}</td>\n                      <td className=\"border border-gray-300 p-2\">\n                        <div className=\"flex space-x-2 space-x-reverse\">\n                          <button\n                            onClick={() => editLocalProduct(product)}\n                            className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                            title=\"ØªØ­Ø±ÙŠØ±\"\n                          >\n                            âœï¸\n                          </button>\n                          <button\n                            onClick={() => deleteLocalProduct(product.id)}\n                            className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                            title=\"Ø­Ø°Ù\"\n                          >\n                            ðŸ—‘ï¸\n                          </button>\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Transactions View */}\n      {currentView === 'transactions' && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</h3>\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full border-collapse border border-gray-300\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…ÙˆØ±Ø¯</th>\n                  <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø¨Ù„Øº</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙˆØµÙ</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ù†ØªØ¬</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙƒÙ…ÙŠØ©</th>\n                </tr>\n              </thead>\n              <tbody>\n                {supplierTransactions.map(transaction => (\n                  <tr key={transaction.id}>\n                    <td className=\"border border-gray-300 p-2\">\n                      {new Date(transaction.date).toLocaleDateString('ar-EG')}\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">{transaction.supplier_name}</td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <span className={`px-2 py-1 rounded text-sm ${\n                        transaction.transaction_type === 'purchase' \n                          ? 'bg-red-100 text-red-800' \n                          : 'bg-green-100 text-green-800'\n                      }`}>\n                        {transaction.transaction_type === 'purchase' ? 'Ø´Ø±Ø§Ø¡' : 'Ø¯ÙØ¹'}\n                      </span>\n                    </td>\n                    <td className={`border border-gray-300 p-2 font-semibold ${\n                      transaction.transaction_type === 'purchase' ? 'text-red-600' : 'text-green-600'\n                    }`}>\n                      Ø¬.Ù… {transaction.amount.toFixed(2)}\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">{transaction.description}</td>\n                    <td className=\"border border-gray-300 p-2\">{transaction.product_name || '-'}</td>\n                    <td className=\"border border-gray-300 p-2\">{transaction.quantity || '-'}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {/* Payments View */}\n      {currentView === 'payments' && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ø³Ø¯Ø§Ø¯ Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</h3>\n          <div className=\"grid grid-cols-3 gap-4 mb-6\">\n            <select\n              value={selectedSupplier}\n              onChange={(e) => setSelectedSupplier(e.target.value)}\n              className=\"p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ±Ø¯</option>\n              {suppliers.filter(s => (s.balance || 0) > 0).map(supplier => (\n                <option key={supplier.id} value={supplier.id}>\n                  {supplier.name} - Ù…Ø³ØªØ­Ù‚: Ø¬.Ù… {(supplier.balance || 0).toFixed(2)}\n                </option>\n              ))}\n            </select>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={paymentAmount}\n              onChange={(e) => setPaymentAmount(e.target.value)}\n              placeholder=\"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹\"\n              className=\"p-2 border border-gray-300 rounded\"\n            />\n            <select\n              value={paymentMethod}\n              onChange={(e) => setPaymentMethod(e.target.value)}\n              className=\"p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"cash\">Ù†Ù‚Ø¯ÙŠ</option>\n              <option value=\"vodafone_elsawy\">ÙÙˆØ¯Ø§ÙÙˆÙ† 010</option>\n              <option value=\"vodafone_wael\">ÙƒØ§Ø´ 0100</option>\n              <option value=\"instapay\">Ø§Ù†Ø³ØªØ§ Ø¨Ø§ÙŠ</option>\n            </select>\n          </div>\n          <button\n            onClick={paySupplier}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n          >\n            Ø¯ÙØ¹ Ø§Ù„Ù…Ø¨Ù„Øº\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Dashboard Component\nconst Dashboard = () => {\n  const { user } = useAuth();\n  \n  // Only Elsawy can access dashboard\n  if (user?.username !== 'Elsawy') {\n    return (\n      <div className=\"p-6\" dir=\"rtl\">\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\n          <strong>ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­!</strong> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ù…Ø®ØµØµØ© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Elsawy ÙÙ‚Ø·.\n        </div>\n      </div>\n    );\n  }\n\n  const [stats, setStats] = useState({\n    total_sales: 0,\n    total_expenses: 0,\n    net_profit: 0,\n    total_unpaid: 0,\n    invoice_count: 0,\n    customer_count: 0\n  });\n\n  useEffect(() => {\n    fetchStats();\n  }, []);\n\n  const fetchStats = async () => {\n    try {\n      const response = await axios.get(`${API}/dashboard/stats`);\n      setStats(response.data);\n    } catch (error) {\n      console.error('Error fetching stats:', error);\n    }\n  };\n\n  const clearAllData = async () => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) return;\n    \n    try {\n      // Clear all data from backend\n      await axios.delete(`${API}/customers/clear-all`);\n      await axios.delete(`${API}/raw-materials/clear-all`);\n      await axios.delete(`${API}/finished-products/clear-all`);\n      await axios.delete(`${API}/invoices/clear-all`);\n      await axios.delete(`${API}/expenses/clear-all`);\n      await axios.delete(`${API}/payments/clear-all`);\n      await axios.delete(`${API}/work-orders/clear-all`);\n      \n      // Refresh dashboard stats\n      fetchStats();\n      \n      alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');\n    } catch (error) {\n      console.error('Error clearing all data:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');\n    }\n  };\n\n  const printReport = (reportType) => {\n    const currentDate = new Date().toLocaleDateString('ar-EG');\n    let printContent = `\n      <div style=\"font-family: Arial, sans-serif; direction: rtl; text-align: right;\">\n        <div style=\"text-align: center; margin-bottom: 20px;\">\n          <h1>Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„</h1>\n          <p>Ø§Ù„Ø­Ø±ÙÙŠØ§Ù† Ø´Ø§Ø±Ø¹ Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª - 01020630677</p>\n          <h2>ØªÙ‚Ø±ÙŠØ± Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>\n          <p>Ø§Ù„ØªØ§Ø±ÙŠØ®: ${currentDate}</p>\n        </div>\n        <table style=\"width: 100%; border-collapse: collapse;\">\n          <tr>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\"><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª:</strong></td>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\">Ø¬.Ù… ${stats.total_sales.toFixed(2)}</td>\n          </tr>\n          <tr>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\"><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª:</strong></td>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\">Ø¬.Ù… ${stats.total_expenses.toFixed(2)}</td>\n          </tr>\n          <tr>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\"><strong>ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­:</strong></td>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\">Ø¬.Ù… ${stats.net_profit.toFixed(2)}</td>\n          </tr>\n          <tr>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\"><strong>Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø©:</strong></td>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\">Ø¬.Ù… ${stats.total_unpaid.toFixed(2)}</td>\n          </tr>\n          <tr>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\"><strong>Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ±:</strong></td>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\">${stats.invoice_count}</td>\n          </tr>\n          <tr>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\"><strong>Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡:</strong></td>\n            <td style=\"border: 1px solid #ddd; padding: 10px;\">${stats.customer_count}</td>\n          </tr>\n        </table>\n      </div>\n    `;\n    \n    const printWindow = window.open('', '_blank');\n    printWindow.document.write(printContent);\n    printWindow.document.close();\n    printWindow.print();\n  };\n\n  return (\n    <div className=\"space-y-6\" dir=\"rtl\">\n      {/* Header Section */}\n      <div className=\"bg-gradient-to-r from-blue-600 to-blue-800 rounded-xl p-6 text-white shadow-lg\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-3xl font-bold mb-2\">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>\n            <p className=\"text-blue-100\">Ù…Ø±Ø­Ø¨Ø§Ù‹ {user?.username} - Ø¥Ù„ÙŠÙƒ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù†Ø´Ø§Ø·</p>\n          </div>\n          <div className=\"text-6xl opacity-20\">ðŸ“Š</div>\n        </div>\n        \n        <div className=\"flex flex-wrap space-x-4 space-x-reverse mt-6\">\n          <button \n            onClick={clearAllData}\n            className=\"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105\">\n            ðŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n          </button>\n          <button \n            onClick={fetchStats}\n            className=\"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105\">\n            ðŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => printReport('dashboard')}\n            className=\"bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105\">\n            ðŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n          <select className=\"bg-white text-gray-700 border-0 rounded-lg px-4 py-3 shadow-lg focus:ring-2 focus:ring-blue-300 font-medium\">\n            <option>ðŸ“… ÙŠÙˆÙ…ÙŠ</option>\n            <option>ðŸ“† Ø£Ø³Ø¨ÙˆØ¹ÙŠ</option>\n            <option>ðŸ“Š Ø´Ù‡Ø±ÙŠ</option>\n            <option>ðŸ“ˆ Ø³Ù†ÙˆÙŠ</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {/* Total Sales */}\n        <div className=\"bg-gradient-to-br from-green-400 to-green-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold opacity-90\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</h3>\n              <p className=\"text-3xl font-bold mt-2\">\n                Ø¬.Ù… {stats.total_sales.toFixed(2)}\n              </p>\n            </div>\n            <div className=\"text-5xl opacity-30\">ðŸ’°</div>\n          </div>\n        </div>\n        \n        {/* Total Expenses */}\n        <div className=\"bg-gradient-to-br from-red-400 to-red-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold opacity-90\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>\n              <p className=\"text-3xl font-bold mt-2\">\n                Ø¬.Ù… {stats.total_expenses.toFixed(2)}\n              </p>\n            </div>\n            <div className=\"text-5xl opacity-30\">ðŸ’¸</div>\n          </div>\n        </div>\n        \n        {/* Net Profit */}\n        <div className=\"bg-gradient-to-br from-blue-400 to-blue-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold opacity-90\">ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­</h3>\n              <p className=\"text-3xl font-bold mt-2\">\n                Ø¬.Ù… {stats.net_profit.toFixed(2)}\n              </p>\n            </div>\n            <div className=\"text-5xl opacity-30\">ðŸ“ˆ</div>\n          </div>\n        </div>\n        \n        {/* Unpaid Amount */}\n        <div className=\"bg-gradient-to-br from-orange-400 to-orange-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold opacity-90\">Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø©</h3>\n              <p className=\"text-3xl font-bold mt-2\">\n                Ø¬.Ù… {stats.total_unpaid.toFixed(2)}\n              </p>\n            </div>\n            <div className=\"text-5xl opacity-30\">â³</div>\n          </div>\n        </div>\n        \n        {/* Invoice Count */}\n        <div className=\"bg-gradient-to-br from-purple-400 to-purple-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold opacity-90\">Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ±</h3>\n              <p className=\"text-3xl font-bold mt-2\">\n                {stats.invoice_count}\n              </p>\n            </div>\n            <div className=\"text-5xl opacity-30\">ðŸ§¾</div>\n          </div>\n        </div>\n        \n        {/* Customer Count */}\n        <div className=\"bg-gradient-to-br from-teal-400 to-teal-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold opacity-90\">Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h3>\n              <p className=\"text-3xl font-bold mt-2\">\n                {stats.customer_count}\n              </p>\n            </div>\n            <div className=\"text-5xl opacity-30\">ðŸ‘¥</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Sales Component\nconst Sales = () => {\n  const [customers, setCustomers] = useState([]);\n  const [newCustomer, setNewCustomer] = useState('');\n  const [selectedCustomer, setSelectedCustomer] = useState('');\n  const [suppliers, setSuppliers] = useState([]); // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†\n  const [supervisorName, setSupervisorName] = useState(''); // Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØªØµÙ†ÙŠØ¹\n  const [invoiceTitle, setInvoiceTitle] = useState(''); // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n  const [currentItem, setCurrentItem] = useState({\n    seal_type: 'RSL',\n    material_type: 'NBR',\n    inner_diameter: '',\n    outer_diameter: '',\n    height: '',\n    quantity: 1,\n    unit_price: '',\n    product_type: 'manufactured' // manufactured Ø£Ùˆ local\n  });\n  // New state for dual measurement inputs\n  const [measurements, setMeasurements] = useState({\n    inner_diameter_mm: '',\n    inner_diameter_inch: '',\n    outer_diameter_mm: '',\n    outer_diameter_inch: '',\n    height_mm: '',\n    height_inch: '',\n    wall_height_mm: '',\n    wall_height_inch: ''\n  });\n  const [localProduct, setLocalProduct] = useState({\n    product_size: '',      // Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ù†ØªØ¬\n    product_type: '',      // Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬\n    purchase_price: '',\n    selling_price: '',\n    supplier: ''\n  });\n  const [items, setItems] = useState([]);\n  const [paymentMethod, setPaymentMethod] = useState('Ù†Ù‚Ø¯ÙŠ');\n  const [discount, setDiscount] = useState(0); // Ø§Ù„Ø®ØµÙ…\n  const [discountType, setDiscountType] = useState('amount'); // Ù†ÙˆØ¹ Ø§Ù„Ø®ØµÙ…: amount Ø£Ùˆ percentage\n  const [compatibilityResults, setCompatibilityResults] = useState(null);\n  const [selectedMaterial, setSelectedMaterial] = useState(null);\n  const [selectedMaterials, setSelectedMaterials] = useState([]); // Ø®Ø§Ù…Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© Ù…Ø®ØªØ§Ø±Ø©\n  const [measurementUnit, setMeasurementUnit] = useState('Ù…Ù…'); // Ø¨ÙˆØµØ© Ø£Ùˆ Ù…Ù…\n  const [wallHeight, setWallHeight] = useState(''); // Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø© Ù„Ù„Ù€ W types\n  const [clientType, setClientType] = useState(1); // Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù„ØªØ³Ø¹ÙŠØ± (1, 2, 3)\n\n  // Measurement conversion functions\n  const mmToInch = (mm) => {\n    if (!mm || mm === '') return '';\n    return (parseFloat(mm) / 25.4).toFixed(4);\n  };\n\n  const inchToMm = (inch) => {\n    if (!inch || inch === '') return '';\n    return (parseFloat(inch) * 25.4).toFixed(2);\n  };\n\n  // Handle measurement input changes with auto-conversion\n  const handleMeasurementChange = (field, value, unit) => {\n    const newMeasurements = { ...measurements };\n    \n    if (unit === 'mm') {\n      newMeasurements[`${field}_mm`] = value;\n      newMeasurements[`${field}_inch`] = mmToInch(value);\n    } else {\n      newMeasurements[`${field}_inch`] = value;\n      newMeasurements[`${field}_mm`] = inchToMm(value);\n    }\n    \n    setMeasurements(newMeasurements);\n    \n    // Update currentItem with mm values (for backend compatibility)\n    const mmValue = parseFloat(newMeasurements[`${field}_mm`]) || '';\n    setCurrentItem({\n      ...currentItem,\n      [field]: mmValue\n    });\n  };\n\n  const sealTypes = ['RSL', 'RS', 'RSS', 'RSE', 'B17', 'B3', 'B14', 'B1', 'R15', 'R17', 'W1', 'W4', 'W5', 'W11', 'WBT', 'XR', 'CH', 'VR'];\n  const materialTypes = ['NBR', 'BUR', 'BT', 'VT', 'BOOM'];\n\n  useEffect(() => {\n    fetchCustomers();\n    fetchSuppliers();\n  }, []);\n\n  const fetchCustomers = async () => {\n    try {\n      const response = await axios.get(`${API}/customers`);\n      // Sort customers alphabetically by name\n      const sortedCustomers = (response.data || []).sort((a, b) => \n        a.name.localeCompare(b.name, 'ar')\n      );\n      setCustomers(sortedCustomers);\n    } catch (error) {\n      console.error('Error fetching customers:', error);\n    }\n  };\n\n  const fetchSuppliers = async () => {\n    try {\n      const response = await axios.get(`${API}/suppliers`);\n      setSuppliers(response.data || []);\n    } catch (error) {\n      console.error('Error fetching suppliers:', error);\n    }\n  };\n\n  // Calculate automatic pricing based on material and client type\n  const calculateAutomaticPrice = async (material, height, clientType) => {\n    try {\n      const response = await axios.post(`${API}/calculate-price`, null, {\n        params: {\n          material_type: material.material_type,\n          inner_diameter: material.inner_diameter,\n          outer_diameter: material.outer_diameter,\n          height: height,\n          client_type: clientType\n        }\n      });\n      \n      return response.data;\n    } catch (error) {\n      console.log('No pricing found for this material combination:', error);\n      return null;\n    }\n  };\n\n  // Confirm multi-material selection and calculate pricing\n  const confirmMultiMaterialSelection = async () => {\n    try {\n      // Calculate total pricing for all selected materials\n      let totalPrice = 0;\n      const height = parseFloat(currentItem.height);\n      \n      for (const selected of selectedMaterials) {\n        const pricing = await calculateAutomaticPrice(selected.material, height, clientType);\n        if (pricing) {\n          totalPrice += pricing.total_price * selected.seals;\n        }\n      }\n      \n      // Update the current item with the calculated price\n      setCurrentItem({\n        ...currentItem,\n        unit_price: (totalPrice / parseInt(currentItem.quantity)).toFixed(2)\n      });\n      \n      // Set the first material as the selected material for compatibility\n      if (selectedMaterials.length > 0) {\n        setSelectedMaterial(selectedMaterials[0].material);\n      }\n      \n      alert(`âœ… ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø®Ø§Ù…Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!\n\nðŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±:\n${selectedMaterials.map(sel => `- ${sel.material.unit_code}: ${sel.seals} Ø³ÙŠÙ„`).join('\\n')}\n\nðŸ’° Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${totalPrice.toFixed(2)} Ø¬.Ù…\nðŸ’° Ø³Ø¹Ø± Ø§Ù„Ø³ÙŠÙ„ Ø§Ù„ÙˆØ§Ø­Ø¯: ${(totalPrice / parseInt(currentItem.quantity)).toFixed(2)} Ø¬.Ù…`);\n      \n    } catch (error) {\n      console.error('Error confirming multi-material selection:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±');\n    }\n  };\n\n  const checkCompatibility = async () => {\n    if (!currentItem.inner_diameter || !currentItem.outer_diameter || !currentItem.height) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n    \n    let innerDiameter = parseFloat(currentItem.inner_diameter);\n    let outerDiameter = parseFloat(currentItem.outer_diameter);\n    let height = parseFloat(currentItem.height);\n    \n    if (isNaN(innerDiameter) || isNaN(outerDiameter) || isNaN(height)) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø£Ø±Ù‚Ø§Ù… ØµØ­ÙŠØ­Ø© Ù„Ù„Ù…Ù‚Ø§Ø³Ø§Øª');\n      return;\n    }\n    \n    // Convert from inches to millimeters if needed\n    if (measurementUnit === 'Ø¨ÙˆØµØ©') {\n      innerDiameter = innerDiameter * 25.4;\n      outerDiameter = outerDiameter * 25.4;\n      height = height * 25.4;\n      \n      console.log(`ØªØ­ÙˆÙŠÙ„ Ù…Ù† Ø¨ÙˆØµØ© Ø¥Ù„Ù‰ Ù…Ù„Ù„ÙŠÙ…ØªØ±:\n        Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ: ${currentItem.inner_diameter} Ø¨ÙˆØµØ© = ${innerDiameter.toFixed(1)} Ù…Ù…\n        Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ: ${currentItem.outer_diameter} Ø¨ÙˆØµØ© = ${outerDiameter.toFixed(1)} Ù…Ù…\n        Ø§Ù„Ø§Ø±ØªÙØ§Ø¹: ${currentItem.height} Ø¨ÙˆØµØ© = ${height.toFixed(1)} Ù…Ù…`);\n    }\n    \n    try {\n      const response = await axios.post(`${API}/compatibility-check`, {\n        seal_type: currentItem.seal_type,\n        material_type: currentItem.material_type,\n        inner_diameter: innerDiameter,\n        outer_diameter: outerDiameter,\n        height: height\n      });\n      setCompatibilityResults(response.data);\n    } catch (error) {\n      console.error('Error checking compatibility:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„ØªÙˆØ§ÙÙ‚');\n    }\n  };\n\n  const addItem = () => {\n    if (currentItem.product_type === 'manufactured') {\n      // Validation for manufactured products - check if at least one measurement is filled\n      const hasInnerDiameter = measurements.inner_diameter_mm || measurements.inner_diameter_inch;\n      const hasOuterDiameter = measurements.outer_diameter_mm || measurements.outer_diameter_inch;\n      const hasHeight = measurements.height_mm || measurements.height_inch;\n      \n      if (!hasInnerDiameter || !hasOuterDiameter || !hasHeight || !currentItem.unit_price) {\n        alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© (Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª ÙˆØ§Ù„Ø³Ø¹Ø±)');\n        return;\n      }\n\n      // Use mm values (they're automatically kept in sync by handleMeasurementChange)\n      const innerDiameter = parseFloat(currentItem.inner_diameter);\n      const outerDiameter = parseFloat(currentItem.outer_diameter);\n      const height = parseFloat(currentItem.height);\n      const wallHeightValue = parseFloat(measurements.wall_height_mm) || null;\n\n      const item = {\n        ...currentItem,\n        inner_diameter: innerDiameter,\n        outer_diameter: outerDiameter,\n        height: height,\n        quantity: parseInt(currentItem.quantity),\n        unit_price: parseFloat(currentItem.unit_price),\n        total_price: parseFloat(currentItem.unit_price) * parseInt(currentItem.quantity),\n        wall_height: wallHeightValue,\n        // Store original display values for both units\n        display_measurements: {\n          inner_diameter_mm: measurements.inner_diameter_mm,\n          inner_diameter_inch: measurements.inner_diameter_inch,\n          outer_diameter_mm: measurements.outer_diameter_mm,\n          outer_diameter_inch: measurements.outer_diameter_inch,\n          height_mm: measurements.height_mm,\n          height_inch: measurements.height_inch,\n          wall_height_mm: measurements.wall_height_mm,\n          wall_height_inch: measurements.wall_height_inch\n        },\n        material_used: selectedMaterial ? selectedMaterial.unit_code : null,\n        material_details: selectedMaterial ? {\n          id: selectedMaterial.id,\n          unit_code: selectedMaterial.unit_code,\n          inner_diameter: selectedMaterial.inner_diameter,\n          outer_diameter: selectedMaterial.outer_diameter,\n          height: selectedMaterial.height,\n          material_type: selectedMaterial.material_type,\n          is_finished_product: selectedMaterial.is_finished_product || false\n        } : {\n          // Ø¥Ø±Ø³Ø§Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø­ØªÙ‰ Ø¨Ø¯ÙˆÙ† Ø§Ø®ØªÙŠØ§Ø± Ù…Ø§Ø¯Ø© Ù…Ø­Ø¯Ø¯Ø©\n          material_type: currentItem.material_type,\n          inner_diameter: parseFloat(currentItem.inner_diameter),\n          outer_diameter: parseFloat(currentItem.outer_diameter),\n          is_finished_product: false\n        },\n        // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø®Ø§Ù…Ø§Øª Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©\n        selected_materials: selectedMaterials.length > 0 ? selectedMaterials.map(sel => ({\n          unit_code: sel.material.unit_code,\n          material_type: sel.material.material_type,\n          inner_diameter: sel.material.inner_diameter,\n          outer_diameter: sel.material.outer_diameter,\n          height: sel.material.height,\n          seals_count: sel.seals,\n          id: sel.material.id\n        })) : null\n      };\n\n      setItems([...items, item]);\n      setCurrentItem({\n        seal_type: 'RSL',\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        height: '',\n        quantity: 1,\n        unit_price: '',\n        product_type: 'manufactured'\n      });\n      setMeasurements({\n        inner_diameter_mm: '',\n        inner_diameter_inch: '',\n        outer_diameter_mm: '',\n        outer_diameter_inch: '',\n        height_mm: '',\n        height_inch: '',\n        wall_height_mm: '',\n        wall_height_inch: ''\n      });\n    } else {\n      // Validation for local products\n      if (!localProduct.product_size || !localProduct.product_type || !localProduct.selling_price || !localProduct.supplier || !localProduct.purchase_price) {\n        alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠ');\n        return;\n      }\n\n      const product_name = `${localProduct.product_size} - ${localProduct.product_type}`;\n\n      const item = {\n        // Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©ØŒ Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ØµÙ†Ø¹Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† null\n        seal_type: null,\n        material_type: null, \n        inner_diameter: null,\n        outer_diameter: null,\n        height: null,\n        product_type: 'local',\n        product_name: product_name,\n        product_size: localProduct.product_size,\n        product_type_name: localProduct.product_type,\n        supplier: localProduct.supplier,\n        purchase_price: parseFloat(localProduct.purchase_price),\n        selling_price: parseFloat(localProduct.selling_price),\n        quantity: parseInt(currentItem.quantity),\n        unit_price: parseFloat(localProduct.selling_price), // Use selling price as unit price\n        total_price: parseFloat(localProduct.selling_price) * parseInt(currentItem.quantity),\n        // Store local product details\n        local_product_details: {\n          product_size: localProduct.product_size,\n          product_type: localProduct.product_type,\n          supplier: localProduct.supplier,\n          purchase_price: parseFloat(localProduct.purchase_price),\n          selling_price: parseFloat(localProduct.selling_price)\n        }\n      };\n\n      setItems([...items, item]);\n      setLocalProduct({\n        product_size: '',\n        product_type: '',\n        purchase_price: '',\n        selling_price: '',\n        supplier: ''\n      });\n      setCurrentItem({\n        seal_type: 'RSL',\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        height: '',\n        quantity: 1,\n        unit_price: '',\n        product_type: 'manufactured'\n      });\n      setMeasurements({\n        inner_diameter_mm: '',\n        inner_diameter_inch: '',\n        outer_diameter_mm: '',\n        outer_diameter_inch: '',\n        height_mm: '',\n        height_inch: '',\n        wall_height_mm: '',\n        wall_height_inch: ''\n      });\n    }\n    \n    setCompatibilityResults(null);\n    setSelectedMaterial(null);\n    setSelectedMaterials([]); // Ù…Ø³Ø­ Ø§Ù„Ø®Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©\n  };\n\n  const editItem = (index) => {\n    const item = items[index];\n    \n    // Set current item for editing\n    setCurrentItem({\n      seal_type: item.seal_type || 'RSL',\n      material_type: item.material_type || 'NBR',\n      inner_diameter: item.inner_diameter?.toString() || '',\n      outer_diameter: item.outer_diameter?.toString() || '',\n      height: item.height?.toString() || '',\n      quantity: item.quantity || 1,\n      unit_price: item.unit_price?.toString() || '',\n      product_type: item.product_type || (item.local_product_details ? 'local' : 'manufactured')\n    });\n    \n    // Set measurements for dual input fields (assuming values are in mm from database)\n    setMeasurements({\n      inner_diameter_mm: item.inner_diameter?.toString() || '',\n      inner_diameter_inch: mmToInch(item.inner_diameter) || '',\n      outer_diameter_mm: item.outer_diameter?.toString() || '',\n      outer_diameter_inch: mmToInch(item.outer_diameter) || '',\n      height_mm: item.height?.toString() || '',\n      height_inch: mmToInch(item.height) || '',\n      wall_height_mm: item.wall_height?.toString() || '',\n      wall_height_inch: mmToInch(item.wall_height) || ''\n    });\n    \n    // Set wall height if exists\n    if (item.wall_height) {\n      setWallHeight(item.wall_height.toString());\n    }\n    \n    // Set measurement unit if exists\n    if (item.measurement_unit) {\n      setMeasurementUnit(item.measurement_unit);\n    }\n    \n    // Set local product details if exists\n    if (item.local_product_details) {\n      setLocalProduct({\n        product_size: item.local_product_details.product_size || '',\n        product_type: item.local_product_details.product_type || '',\n        purchase_price: '',\n        selling_price: item.unit_price?.toString() || '',\n        supplier: ''\n      });\n    }\n    \n    // Remove the item being edited\n    const newItems = items.filter((_, i) => i !== index);\n    setItems(newItems);\n  };\n\n  const deleteItem = (index) => {\n    if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ØµØ±ØŸ')) {\n      const newItems = items.filter((_, i) => i !== index);\n      setItems(newItems);\n    }\n  };\n\n  const [isCreatingInvoice, setIsCreatingInvoice] = useState(false);\n\n  const createInvoice = async () => {\n    // Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø± Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n    if (isCreatingInvoice) {\n      return;\n    }\n\n    if (!selectedCustomer && !newCustomer) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø£Ùˆ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯');\n      return;\n    }\n\n    if (items.length === 0) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª Ù„Ù„ÙØ§ØªÙˆØ±Ø©');\n      return;\n    }\n\n    try {\n      setIsCreatingInvoice(true); // Ø¨Ø¯Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n      \n      let customerId = selectedCustomer;\n      let customerName = '';\n\n      // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯ Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±\n      if (!selectedCustomer && newCustomer) {\n        try {\n          const customerResponse = await axios.post(`${API}/customers`, {\n            name: newCustomer,\n            phone: '',\n            address: ''\n          });\n          customerId = customerResponse.data.id;\n          customerName = newCustomer;\n          \n          // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\n          fetchCustomers();\n        } catch (customerError) {\n          // Check if it's a duplicate customer error\n          if (customerError.response?.status === 409) {\n            // Customer exists, ask user what to do\n            const existingCustomer = customers.find(c => c.name.toLowerCase() === newCustomer.toLowerCase());\n            if (existingCustomer) {\n              if (confirm(`âš ï¸ Ø§Ù„Ø¹Ù…ÙŠÙ„ \"${newCustomer}\" Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„!\\n\\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ØŸ`)) {\n                customerId = existingCustomer.id;\n                customerName = existingCustomer.name;\n                setSelectedCustomer(existingCustomer.id);\n                setNewCustomer('');\n              } else {\n                setIsCreatingInvoice(false);\n                return;\n              }\n            } else {\n              alert(`âŒ ${customerError.response.data.detail}\\n\\nÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©.`);\n              setIsCreatingInvoice(false);\n              return;\n            }\n          } else {\n            throw customerError;\n          }\n        }\n      } else {\n        const customer = customers.find(c => c.id === customerId);\n        customerName = customer ? customer.name : '';\n      }\n\n      // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ ÙˆØ§Ù„Ø®ØµÙ…\n      const subtotal = items.reduce((sum, item) => sum + item.total_price, 0);\n      const discountAmount = discountType === 'percentage' \n        ? (subtotal * parseFloat(discount || 0)) / 100\n        : parseFloat(discount || 0);\n      const totalAfterDiscount = subtotal - discountAmount;\n\n      // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n      const invoiceData = {\n        customer_id: customerId,\n        customer_name: customerName,\n        invoice_title: invoiceTitle, // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n        supervisor_name: supervisorName, // Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù\n        items: items,\n        payment_method: paymentMethod,\n        subtotal: subtotal,\n        discount: discountAmount,\n        discount_type: discountType,\n        discount_value: parseFloat(discount || 0),\n        total_after_discount: totalAfterDiscount,\n        notes: ''\n      };\n\n      const response = await axios.post(`${API}/invoices?supervisor_name=${encodeURIComponent(supervisorName)}`, invoiceData);\n      \n      if (response.data) {\n        alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');\n        \n        // Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\n        setItems([]);\n        setSelectedCustomer('');\n        setNewCustomer('');\n        setSupervisorName('');\n        setInvoiceTitle(''); // Ù…Ø³Ø­ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n        setPaymentMethod('Ù†Ù‚Ø¯ÙŠ');\n        setDiscount(0);\n        setDiscountType('amount');\n        setClientType(1); // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„\n        \n        // Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n        printInvoice(response.data);\n      }\n    } catch (error) {\n      console.error('Error creating invoice:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    } finally {\n      setIsCreatingInvoice(false); // Ø¥Ù†Ù‡Ø§Ø¡ Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡\n    }\n  };\n\n  const printInvoice = (invoice) => {\n    const printContent = `\n      <!DOCTYPE html>\n      <html dir=\"rtl\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <style>\n          body {\n            font-family: Arial, sans-serif;\n            margin: 0;\n            padding: 20px;\n            direction: rtl;\n            font-size: 15px;\n          }\n          .header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            border-bottom: 3px solid #000;\n            padding-bottom: 10px;\n            margin-bottom: 20px;\n          }\n          .company-info {\n            text-align: right;\n          }\n          .company-name {\n            font-size: 32px;\n            font-weight: bold;\n            color: #000;\n            margin: 0;\n          }\n          .company-subtitle {\n            font-size: 20px;\n            margin: 5px 0;\n            color: #666;\n          }\n          .company-details {\n            font-size: 16px;\n            margin: 2px 0;\n            color: #333;\n          }\n          .logo-section {\n            text-align: center;\n            flex: 1;\n          }\n          .invoice-title {\n            font-size: 20px;\n            font-weight: bold;\n            background-color: #ff4444;\n            color: white;\n            padding: 8px 20px;\n            border-radius: 5px;\n            display: inline-block;\n            margin-bottom: 10px;\n          }\n          .invoice-number {\n            font-size: 18px;\n            font-weight: bold;\n            color: #ff4444;\n          }\n          .customer-info {\n            display: flex;\n            justify-content: space-between;\n            margin: 20px 0;\n          }\n          .customer-details {\n            text-align: right;\n          }\n          .date-info {\n            text-align: left;\n          }\n          .products-table {\n            width: 100%;\n            border-collapse: collapse;\n            border: 2px solid #000;\n            margin: 20px 0;\n          }\n          .products-table th,\n          .products-table td {\n            border: 1px solid #000;\n            padding: 8px;\n            text-align: center;\n          }\n          .products-table th {\n            background-color: #f0f0f0;\n            font-weight: bold;\n          }\n          .footer {\n            margin-top: 30px;\n            border-top: 1px solid #ccc;\n            padding-top: 15px;\n            display: flex;\n            justify-content: space-between;\n            font-size: 12px;\n            color: #666;\n          }\n          .total-section {\n            text-align: left;\n            margin-top: 10px;\n          }\n          .total-amount {\n            font-size: 18px;\n            font-weight: bold;\n            border: 2px solid #000;\n            padding: 10px;\n            display: inline-block;\n            background-color: #f9f9f9;\n          }\n          @media print {\n            body { margin: 0; padding: 10px; }\n          }\n        </style>\n      </head>\n      <body>\n        <!-- Header Section -->\n        <div class=\"header\">\n          <div class=\"company-info\">\n            <h1 class=\"company-name\">Ø´Ø±ÙƒØ© Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„</h1>\n            <p class=\"company-subtitle\">ØªØµÙ†ÙŠØ¹ Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£ÙˆÙŠÙ„ Ø³ÙŠÙ„</p>\n            <p class=\"company-details\">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø·Ø§Ø± Ø­ØªÙ‰ Ù¥Ù Ù Ù…Ù„</p>\n            <p class=\"company-details\">Ù‡ÙŠØ¯Ø±ÙˆÙ„ÙŠÙƒ - Ù†ÙŠÙˆÙ…Ø§ØªÙŠÙƒ</p>\n          </div>\n          \n          <div class=\"logo-section\">\n            <img src=\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\" \n                 alt=\"Master Seal Logo\" \n                 style=\"max-width: 120px; max-height: 80px; margin-bottom: 10px;\">\n            <div class=\"invoice-title\">${invoice.invoice_title || 'Ø¹Ø±Ø¶ Ø³Ø¹Ø±'}</div>\n            <div class=\"invoice-number\">${invoice.invoice_number}</div>\n          </div>\n        </div>\n\n        <!-- Customer and Date Info -->\n        <div class=\"customer-info\">\n          <div class=\"customer-details\">\n            <p><strong>Ø§Ù„Ø³Ø§Ø¯Ø©:</strong> ${invoice.customer_name}</p>\n            <p><strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> ${invoice.customer_address || '........................'}</p>\n          </div>\n          <div class=\"date-info\">\n            <p><strong>ØªØ­Ø±ÙŠØ± ÙÙŠ:</strong> ${new Date(invoice.date).toLocaleDateString('ar-EG')}</p>\n            <p><strong>Date:</strong> ${new Date(invoice.date).toLocaleDateString('en-GB')}</p>\n          </div>\n        </div>\n\n        <!-- Products Table -->\n        <table class=\"products-table\">\n          <thead>\n            <tr>\n              <th style=\"width: 60px;\">Ø§Ù„Ù…Ø³Ù„Ø³Ù„<br>Item</th>\n              <th style=\"width: 80px;\">Ø§Ù„ÙƒÙ…ÙŠØ©<br>QTY</th>\n              <th style=\"width: 200px;\">Description<br>Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª</th>\n              <th style=\"width: 100px;\">Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©<br>Unit Price</th>\n              <th style=\"width: 100px;\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ<br>Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${invoice.items.map((item, index) => `\n              <tr>\n                <td>${index + 1}</td>\n                <td>${item.quantity}</td>\n                <td style=\"text-align: right;\">\n                  ${item.local_product_details ? \n                    `${item.local_product_details.product_size} - ${item.local_product_details.product_type}` : \n                    `${item.seal_type} - ${item.material_type}<br>\n                    <small>${item.inner_diameter} Ã— ${item.outer_diameter} Ã— ${item.height} Ù…Ù…${item.wall_height ? ` (Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø©: ${item.wall_height} Ù…Ù…)` : \"\"}</small>`\n                  }\n                </td>\n                <td>Ø¬.Ù… ${item.unit_price.toFixed(2)}</td>\n                <td>Ø¬.Ù… ${item.total_price.toFixed(2)}</td>\n              </tr>\n            `).join('')}\n            <!-- Empty rows for additional items -->\n            ${Array.from({length: Math.max(0, 8 - invoice.items.length)}, (_, i) => `\n              <tr style=\"height: 40px;\">\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n              </tr>\n            `).join('')}\n          </tbody>\n        </table>\n\n        <!-- Total Section -->\n        <div class=\"total-section\">\n          <div style=\"text-align: left; margin-bottom: 10px;\">\n            ${invoice.subtotal ? `\n              <div style=\"margin-bottom: 5px;\">\n                <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ: Ø¬.Ù… ${invoice.subtotal.toFixed(2)}</span>\n              </div>\n            ` : ''}\n            ${invoice.discount && invoice.discount > 0 ? `\n              <div style=\"margin-bottom: 5px; color: #d32f2f;\">\n                <span>Ø§Ù„Ø®ØµÙ…: - Ø¬.Ù… ${invoice.discount.toFixed(2)}</span>\n                ${invoice.discount_type === 'percentage' && invoice.discount_value ? \n                  ` <small>(${invoice.discount_value}%)</small>` : ''}\n              </div>\n              <hr style=\"margin: 5px 0; border: 1px solid #000;\">\n            ` : ''}\n          </div>\n          <div class=\"total-amount\">\n            Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: Ø¬.Ù… ${(invoice.total_after_discount || invoice.total_amount).toFixed(2)}\n          </div>\n        </div>\n\n        <!-- Additional Info -->\n        <div style=\"margin-top: 20px; text-align: center; font-size: 12px;\">\n          <p><strong>Ù…Ù„Ø­ÙˆØ¸Ø©:</strong> ÙÙ‚Ø· ÙˆÙ‚Ø¯Ø±Ù‡</p>\n          <div style=\"height: 30px; border-bottom: 1px solid #000; margin: 10px 40px;\"></div>\n        </div>\n\n        <!-- Footer -->\n        <div class=\"footer\">\n          <div>\n            <p><strong>Ø§Ù„ØªÙˆÙ‚ÙŠØ¹:</strong></p>\n            <p>Ù…ÙˆØ¨Ø§ÙŠÙ„: Ù Ù¡Ù Ù¢Ù Ù¦Ù£Ù Ù¦Ù§Ù§ - Ù Ù¡Ù Ù¦Ù¢Ù£Ù©Ù Ù¨Ù§Ù </p>\n            <p>ØªÙ„ÙŠÙÙˆÙ†: Ù Ù¡Ù Ù¢Ù Ù¦Ù£Ù Ù¦Ù§Ù§</p>\n          </div>\n          <div style=\"text-align: left;\">\n            <p><strong>Ø§Ù„Ù…Ø³ØªÙ„Ù…:</strong></p>\n            <p>Ø§Ù„Ø­Ø±ÙÙŠÙŠÙ† - Ø§Ù„Ø³Ù„Ø§Ù… - Ø£Ù…Ø§Ù… Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª</p>\n            <p>Ù…ÙˆØ¨Ø§ÙŠÙ„: Ù Ù¡Ù Ù¢Ù Ù¦Ù£Ù Ù¦Ù§Ù§ - Ù Ù¡Ù Ù¦Ù¢Ù£Ù©Ù Ù¨Ù§Ù </p>\n          </div>\n        </div>\n\n        <!-- Note -->\n        <div style=\"text-align: center; margin-top: 20px; font-size: 11px; color: #666;\">\n          <p>ÙŠÙ‚Ø± Ø§Ù„Ù…Ø´ØªØ±ÙŠ Ø¨Ø£Ù†Ù‡ Ù‚Ø§Ù… Ø¨Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø¨Ø¶Ø§Ø¹Ø© ÙˆÙ‚Ø¨ÙˆÙ„Ù‡Ø§</p>\n        </div>\n      </body>\n      </html>\n    `;\n    \n    const printWindow = window.open('', '_blank');\n    printWindow.document.write(printContent);\n    printWindow.document.close();\n    printWindow.print();\n  };\n\n  const clearAllInvoices = async () => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) return;\n    \n    try {\n      setItems([]);\n      alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±');\n    } catch (error) {\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <h2 className=\"text-2xl font-bold text-blue-600 mb-6\">Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</h2>\n      \n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Customer Selection */}\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„</h3>\n          \n          <div className=\"space-y-4\">\n            <div>\n              <select\n                value={selectedCustomer}\n                onChange={(e) => setSelectedCustomer(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              >\n                <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„</option>\n                {customers.map(customer => (\n                  <option key={customer.id} value={customer.id}>\n                    {customer.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n            \n            <div className=\"flex space-x-2 space-x-reverse\">\n              <div className=\"flex-1\">\n                <input\n                  type=\"text\"\n                  value={newCustomer}\n                  onChange={(e) => {\n                    const value = e.target.value;\n                    setNewCustomer(value);\n                    \n                    // Check for exact match and auto-select\n                    const exactMatch = customers.find(c => c.name.toLowerCase() === value.toLowerCase());\n                    if (exactMatch) {\n                      // Auto-select the existing customer\n                      setSelectedCustomer(exactMatch.id);\n                      setNewCustomer('');\n                      e.target.style.borderColor = '';\n                      e.target.style.backgroundColor = '';\n                      // Show brief confirmation\n                      const tempMsg = document.createElement('div');\n                      tempMsg.textContent = `âœ… ØªÙ… Ø§Ø®ØªÙŠØ§Ø±: ${exactMatch.name}`;\n                      tempMsg.className = 'text-xs text-green-600 mt-1';\n                      e.target.parentElement.appendChild(tempMsg);\n                      setTimeout(() => tempMsg.remove(), 2000);\n                    } else {\n                      // Check for potential duplicates (partial match)\n                      const partialMatch = customers.some(c => c.name.toLowerCase().includes(value.toLowerCase()) && value.length > 2);\n                      if (partialMatch && value) {\n                        e.target.style.borderColor = 'orange';\n                        e.target.style.backgroundColor = '#fff3cd';\n                      } else {\n                        e.target.style.borderColor = '';\n                        e.target.style.backgroundColor = '';\n                      }\n                    }\n                  }}\n                  placeholder=\"Ø§Ø³Ù… Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯\"\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                />\n              </div>\n              <button className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n                Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯\n              </button>\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØªØµÙ†ÙŠØ¹</label>\n              <input\n                type=\"text\"\n                value={supervisorName}\n                onChange={(e) => setSupervisorName(e.target.value)}\n                placeholder=\"Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©</label>\n              <input\n                type=\"text\"\n                value={invoiceTitle}\n                onChange={(e) => setInvoiceTitle(e.target.value)}\n                placeholder=\"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Product Entry */}\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</h3>\n          \n          {/* Product Type Selection */}\n          <div className=\"mb-4\">\n            <label className=\"block text-sm font-medium mb-2\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬</label>\n            <select\n              value={currentItem.product_type}\n              onChange={(e) => setCurrentItem({...currentItem, product_type: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"manufactured\">Ù…Ù†ØªØ¬ ØªØµÙ†ÙŠØ¹</option>\n              <option value=\"local\">Ù…Ù†ØªØ¬ Ù…Ø­Ù„ÙŠ</option>\n            </select>\n          </div>\n          \n          {/* Conditional Product Forms */}\n          {currentItem.product_type === 'manufactured' ? (\n            // Manufacturing Product Form\n            <>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„</label>\n                  <select\n                    value={currentItem.seal_type}\n                    onChange={(e) => setCurrentItem({...currentItem, seal_type: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  >\n                    {sealTypes.map(type => (\n                      <option key={type} value={type}>{type}</option>\n                    ))}\n                  </select>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</label>\n                  <select\n                    value={currentItem.material_type}\n                    onChange={(e) => setCurrentItem({...currentItem, material_type: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  >\n                    {materialTypes.map(type => (\n                      <option key={type} value={type}>{type}</option>\n                    ))}\n                  </select>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</label>\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">Ù…Ù„ÙŠÙ…ØªØ±</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.01\"\n                        value={measurements.inner_diameter_mm}\n                        onChange={(e) => handleMeasurementChange('inner_diameter', e.target.value, 'mm')}\n                        className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                        placeholder=\"Ù…Ù…\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">Ø¨ÙˆØµØ©</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.0001\"\n                        value={measurements.inner_diameter_inch}\n                        onChange={(e) => handleMeasurementChange('inner_diameter', e.target.value, 'inch')}\n                        className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                        placeholder=\"Ø¨ÙˆØµØ©\"\n                      />\n                    </div>\n                  </div>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</label>\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">Ù…Ù„ÙŠÙ…ØªØ±</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.01\"\n                        value={measurements.outer_diameter_mm}\n                        onChange={(e) => handleMeasurementChange('outer_diameter', e.target.value, 'mm')}\n                        className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                        placeholder=\"Ù…Ù…\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">Ø¨ÙˆØµØ©</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.0001\"\n                        value={measurements.outer_diameter_inch}\n                        onChange={(e) => handleMeasurementChange('outer_diameter', e.target.value, 'inch')}\n                        className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                        placeholder=\"Ø¨ÙˆØµØ©\"\n                      />\n                    </div>\n                  </div>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø³ÙŠÙ„</label>\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">Ù…Ù„ÙŠÙ…ØªØ±</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.01\"\n                        value={measurements.height_mm}\n                        onChange={(e) => handleMeasurementChange('height', e.target.value, 'mm')}\n                        className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                        placeholder=\"Ù…Ù…\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">Ø¨ÙˆØµØ©</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.0001\"\n                        value={measurements.height_inch}\n                        onChange={(e) => handleMeasurementChange('height', e.target.value, 'inch')}\n                        className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                        placeholder=\"Ø¨ÙˆØµØ©\"\n                      />\n                    </div>\n                  </div>\n                </div>\n                \n                {/* Wall Height for W-type seals */}\n                {currentItem.seal_type && currentItem.seal_type.startsWith('W') && (\n                  <div>\n                    <label className=\"block text-sm font-medium mb-1\">Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø©</label>\n                    <div className=\"grid grid-cols-2 gap-2\">\n                      <div>\n                        <label className=\"block text-xs text-gray-600 mb-1\">Ù…Ù„ÙŠÙ…ØªØ±</label>\n                        <input\n                          type=\"number\"\n                          step=\"0.01\"\n                          value={measurements.wall_height_mm}\n                          onChange={(e) => handleMeasurementChange('wall_height', e.target.value, 'mm')}\n                          className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                          placeholder=\"Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø© Ø¨Ø§Ù„Ù…Ù„ÙŠÙ…ØªØ±\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-xs text-gray-600 mb-1\">Ø¨ÙˆØµØ©</label>\n                        <input\n                          type=\"number\"\n                          step=\"0.0001\"\n                          value={measurements.wall_height_inch}\n                          onChange={(e) => handleMeasurementChange('wall_height', e.target.value, 'inch')}\n                          className=\"w-full p-2 border border-gray-300 rounded text-sm\"\n                          placeholder=\"Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø© Ø¨Ø§Ù„Ø¨ÙˆØµØ©\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n                )}\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙŠÙ„</label>\n                  <input\n                    type=\"number\"\n                    value={currentItem.quantity}\n                    onChange={(e) => setCurrentItem({...currentItem, quantity: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù„ØªØ³Ø¹ÙŠØ±</label>\n                  <select\n                    value={clientType}\n                    onChange={(e) => setClientType(parseInt(e.target.value))}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  >\n                    <option value={1}>Ø¹Ù…ÙŠÙ„ 1</option>\n                    <option value={2}>Ø¹Ù…ÙŠÙ„ 2</option>\n                    <option value={3}>Ø¹Ù…ÙŠÙ„ 3</option>\n                  </select>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø³Ø¹Ø± Ø§Ù„Ø³ÙŠÙ„ Ø§Ù„ÙˆØ§Ø­Ø¯</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={currentItem.unit_price}\n                    onChange={(e) => setCurrentItem({...currentItem, unit_price: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>\n                  <textarea\n                    value={currentItem.notes || ''}\n                    onChange={(e) => setCurrentItem({...currentItem, notes: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                    rows=\"2\"\n                    placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©...\"\n                  />\n                </div>\n                \n                <div className=\"flex items-end\">\n                  <button\n                    onClick={checkCompatibility}\n                    className=\"w-full bg-yellow-500 text-white p-2 rounded hover:bg-yellow-600\"\n                  >\n                    ÙØ­Øµ Ø§Ù„ØªÙˆØ§ÙÙ‚\n                  </button>\n                </div>\n              </div>\n            </>\n          ) : (\n            // Local Product Form\n            <>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ù†ØªØ¬</label>\n                  <input\n                    type=\"text\"\n                    value={localProduct.product_size}\n                    onChange={(e) => setLocalProduct({...localProduct, product_size: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                    placeholder=\"Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ù†ØªØ¬\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬</label>\n                  <input\n                    type=\"text\"\n                    value={localProduct.product_type}\n                    onChange={(e) => setLocalProduct({...localProduct, product_type: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                    placeholder=\"Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù…ÙˆØ±Ø¯</label>\n                  <select\n                    value={localProduct.supplier}\n                    onChange={(e) => setLocalProduct({...localProduct, supplier: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  >\n                    <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ±Ø¯</option>\n                    {suppliers.map(supplier => (\n                      <option key={supplier.id} value={supplier.name}>\n                        {supplier.name}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={localProduct.purchase_price}\n                    onChange={(e) => setLocalProduct({...localProduct, purchase_price: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                    placeholder=\"Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={localProduct.selling_price}\n                    onChange={(e) => setLocalProduct({...localProduct, selling_price: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                    placeholder=\"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ÙƒÙ…ÙŠØ©</label>\n                  <input\n                    type=\"number\"\n                    value={currentItem.quantity}\n                    onChange={(e) => setCurrentItem({...currentItem, quantity: e.target.value})}\n                    className=\"w-full p-2 border border-gray-300 rounded\"\n                  />\n                </div>\n              </div>\n            </>\n          )}\n          \n          <button\n            onClick={addItem}\n            className=\"w-full bg-green-500 text-white p-2 rounded hover:bg-green-600 mt-4\"\n          >\n            Ø¥Ø¶Ø§ÙØ© Ù„Ù„ÙØ§ØªÙˆØ±Ø©\n          </button>\n        </div>\n      </div>\n\n      {/* Compatibility Results */}\n      {compatibilityResults && (\n        <div className=\"mt-6 bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ù†ØªØ§Ø¦Ø¬ ÙØ­Øµ Ø§Ù„ØªÙˆØ§ÙÙ‚</h3>\n          \n          {compatibilityResults.compatible_materials.length > 0 && (\n            <div className=\"mb-4\">\n              <h4 className=\"font-medium mb-2\">ðŸ“¦ Ù†ØªØ§Ø¦Ø¬ ÙØ­Øµ Ø§Ù„ØªÙˆØ§ÙÙ‚</h4>\n              <p className=\"text-sm text-gray-600 mb-2\">Ø§Ø®ØªØ± Ø§Ù„Ø®Ø§Ù…Ø§Øª ÙˆØ­Ø¯Ø¯ Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙŠÙ„Ø§Øª Ù…Ù† ÙƒÙ„ Ø®Ø§Ù…Ø© (Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: {currentItem.quantity} Ø³ÙŠÙ„)</p>\n              \n              {/* Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© */}\n              {selectedMaterials.length > 0 && (\n                <div className=\"mb-4 p-3 bg-blue-50 rounded border\">\n                  <h5 className=\"font-medium text-blue-800 mb-2\">Ø§Ù„Ø®Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©:</h5>\n                  <div className=\"space-y-2\">\n                    {selectedMaterials.map((selected, index) => (\n                      <div key={index} className=\"flex items-center justify-between bg-white p-2 rounded border\">\n                        <span className=\"text-sm\">\n                          {selected.material.unit_code} - {selected.material.material_type} \n                          {selected.material.inner_diameter}Ã—{selected.material.outer_diameter}Ã—{selected.material.height}\n                        </span>\n                        <div className=\"flex items-center space-x-2 space-x-reverse\">\n                          <input\n                            type=\"number\"\n                            min=\"1\"\n                            max={Math.floor(selected.material.height / (parseFloat(currentItem.height) + 2))}\n                            value={selected.seals}\n                            onChange={(e) => {\n                              const newSelected = [...selectedMaterials];\n                              newSelected[index].seals = parseInt(e.target.value) || 0;\n                              setSelectedMaterials(newSelected);\n                            }}\n                            className=\"w-16 p-1 border rounded text-center\"\n                          />\n                          <span className=\"text-xs\">Ø³ÙŠÙ„</span>\n                          <button\n                            onClick={() => {\n                              const newSelected = selectedMaterials.filter((_, i) => i !== index);\n                              setSelectedMaterials(newSelected);\n                            }}\n                            className=\"text-red-600 hover:text-red-800 text-sm\"\n                          >\n                            âœ•\n                          </button>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                  <div className=\"mt-2 text-sm\">\n                    <span className=\"font-medium\">\n                      Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: {selectedMaterials.reduce((sum, sel) => sum + sel.seals, 0)} / {currentItem.quantity} Ø³ÙŠÙ„\n                    </span>\n                    {selectedMaterials.reduce((sum, sel) => sum + sel.seals, 0) === parseInt(currentItem.quantity) && (\n                      <span className=\"text-green-600 ml-2\">âœ“ Ù…ÙƒØªÙ…Ù„</span>\n                    )}\n                  </div>\n                </div>\n              )}\n              \n              <div className=\"space-y-2 max-h-48 overflow-y-auto\">\n                {compatibilityResults.compatible_materials.map((material, index) => {\n                  const isSelected = selectedMaterials.some(sel => \n                    sel.material.unit_code === material.unit_code && \n                    sel.material.inner_diameter === material.inner_diameter &&\n                    sel.material.outer_diameter === material.outer_diameter\n                  );\n                  const maxSeals = Math.floor(material.height / (parseFloat(currentItem.height) + 2));\n                  const remainingSeals = parseInt(currentItem.quantity) - selectedMaterials.reduce((sum, sel) => sum + sel.seals, 0);\n                  \n                  return (\n                    <div key={index} \n                         className={`p-3 rounded border transition-colors ${\n                           isSelected ? 'bg-blue-100 border-blue-300' : 'bg-gray-50 hover:bg-gray-100'\n                         }`}>\n                      <div className=\"flex justify-between items-start\">\n                        <div className=\"flex-1\">\n                          <p className=\"font-medium text-blue-600\">\n                            {material.unit_code} - {material.material_type}\n                          </p>\n                          <p className=\"text-sm text-gray-600\">\n                            Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯: {material.inner_diameter} Ã— {material.outer_diameter} Ã— {material.height} Ù…Ù…\n                          </p>\n                          <p className=\"text-xs text-green-600\">\n                            ÙŠÙ…ÙƒÙ† Ø¥Ù†ØªØ§Ø¬: {maxSeals} Ø³ÙŠÙ„ ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰\n                          </p>\n                          {material.score && (\n                            <p className=\"text-xs text-gray-500\">Ù†Ø³Ø¨Ø© Ø§Ù„ØªÙˆØ§ÙÙ‚: {material.score}%</p>\n                          )}\n                        </div>\n                        {!isSelected && remainingSeals > 0 && maxSeals > 0 && (\n                          <button\n                            onClick={() => {\n                              const newSelection = {\n                                material: material,\n                                seals: Math.min(maxSeals, remainingSeals)\n                              };\n                              setSelectedMaterials([...selectedMaterials, newSelection]);\n                            }}\n                            className=\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\"\n                          >\n                            Ø§Ø®ØªÙŠØ§Ø±\n                          </button>\n                        )}\n                        {isSelected && (\n                          <div className=\"text-blue-600 text-sm font-medium\">\n                            âœ“ Ù…Ø®ØªØ§Ø±Ø©\n                          </div>\n                        )}\n                        {!isSelected && remainingSeals <= 0 && (\n                          <div className=\"text-gray-400 text-sm\">\n                            Ù…ÙƒØªÙ…Ù„\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n              \n              {/* Ø²Ø± ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± */}\n              {selectedMaterials.length > 0 && (\n                <div className=\"mt-4 flex space-x-2 space-x-reverse\">\n                  <button\n                    onClick={() => {\n                      const totalSeals = selectedMaterials.reduce((sum, sel) => sum + sel.seals, 0);\n                      if (totalSeals !== parseInt(currentItem.quantity)) {\n                        alert(`âš ï¸ Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© (${totalSeals}) Ù„Ø§ ÙŠØ³Ø§ÙˆÙŠ Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ (${currentItem.quantity})`);\n                        return;\n                      }\n                      \n                      // ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± ÙˆØ­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø±\n                      confirmMultiMaterialSelection();\n                    }}\n                    className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n                    disabled={selectedMaterials.reduce((sum, sel) => sum + sel.seals, 0) !== parseInt(currentItem.quantity)}\n                  >\n                    ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±\n                  </button>\n                  <button\n                    onClick={() => {\n                      setSelectedMaterials([]);\n                    }}\n                    className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n                  >\n                    Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±\n                  </button>\n                </div>\n              )}\n            </div>\n          )}\n          \n          {compatibilityResults.compatible_products.length > 0 && (\n            <div>\n              <h4 className=\"font-medium mb-2\">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©:</h4>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {compatibilityResults.compatible_products.map((product, index) => (\n                  <div \n                    key={index} \n                    className=\"p-3 border border-blue-300 bg-blue-50 rounded cursor-pointer hover:bg-blue-100\"\n                    onClick={() => setSelectedMaterial({\n                      unit_code: `FINISHED-${product.id}`,\n                      material_type: product.material_type,\n                      seal_type: product.seal_type,\n                      inner_diameter: product.inner_diameter,\n                      outer_diameter: product.outer_diameter,\n                      height: product.height,\n                      is_finished_product: true\n                    })}\n                  >\n                    <p><strong>Ø§Ù„Ù†ÙˆØ¹:</strong> {product.seal_type} - {product.material_type}</p>\n                    <p><strong>Ø§Ù„Ù…Ù‚Ø§Ø³:</strong> {product.inner_diameter} Ã— {product.outer_diameter} Ã— {product.height}</p>\n                    <p><strong>Ø§Ù„ÙƒÙ…ÙŠØ©:</strong> {product.quantity}</p>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {selectedMaterial && (\n            <div className=\"mt-4 p-3 bg-blue-100 rounded\">\n              <p className=\"font-semibold text-blue-800\">\n                ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø®Ø§Ù…Ø©: {selectedMaterial.unit_code} ({selectedMaterial.material_type})\n              </p>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Current Items */}\n      {items.length > 0 && (\n        <div className=\"mt-6 bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø£Ø®ÙŠØ±Ø©</h3>\n          \n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full border-collapse border border-gray-300\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„</th>\n                  <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ù‚Ø§Ø³</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙƒÙ…ÙŠØ©</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø³Ø¹Ø±</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</th>\n                  <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n                </tr>\n              </thead>\n              <tbody>\n                {items.map((item, index) => (\n                  <tr key={index}>\n                    <td className=\"border border-gray-300 p-2\">\n                      {item.local_product_details ? item.local_product_details.product_type : item.seal_type}\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">\n                      {item.local_product_details ? 'Ù…Ø­Ù„ÙŠ' : item.material_type}\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">\n                      {item.local_product_details ? \n                        `${item.local_product_details.product_size} - ${item.local_product_details.product_type}` :\n                        `${item.original_inner_diameter || item.inner_diameter} Ã— ${item.original_outer_diameter || item.outer_diameter} Ã— ${item.original_height || item.height}${item.original_wall_height ? ` (Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø©: ${item.original_wall_height})` : (item.wall_height ? ` (Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø©: ${item.wall_height})` : '')} ${item.measurement_unit || 'Ù…Ù…'}`\n                      }\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">{item.quantity}</td>\n                    <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {item.unit_price}</td>\n                    <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {item.total_price}</td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <div className=\"flex space-x-2 space-x-reverse\">\n                        <button\n                          onClick={() => editItem(index)}\n                          className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                          title=\"ØªØ­Ø±ÙŠØ±\"\n                        >\n                          âœï¸\n                        </button>\n                        <button\n                          onClick={() => deleteItem(index)}\n                          className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                          title=\"Ø­Ø°Ù\"\n                        >\n                          ðŸ—‘ï¸\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n          \n          <div className=\"mt-4 flex justify-between items-center\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</label>\n              <select\n                value={paymentMethod}\n                onChange={(e) => setPaymentMethod(e.target.value)}\n                className=\"p-2 border border-gray-300 rounded\"\n              >\n                <option value=\"Ù†Ù‚Ø¯ÙŠ\">Ù†Ù‚Ø¯ÙŠ</option>\n                <option value=\"Ø¢Ø¬Ù„\">Ø¢Ø¬Ù„</option>\n                <option value=\"ÙÙˆØ¯Ø§ÙÙˆÙ† 010\">ÙÙˆØ¯Ø§ÙÙˆÙ† 010</option>\n                <option value=\"ÙƒØ§Ø´ 0100\">ÙƒØ§Ø´ 0100</option>\n                <option value=\"Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ\">Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ</option>\n                <option value=\"ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ\">ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ</option>\n              </select>\n            </div>\n            \n            {/* Discount Section */}\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 p-4 bg-gray-50 rounded-lg\">\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø®ØµÙ…</label>\n                <select\n                  value={discountType}\n                  onChange={(e) => setDiscountType(e.target.value)}\n                  className=\"p-2 border border-gray-300 rounded w-full\"\n                >\n                  <option value=\"amount\">Ù…Ø¨Ù„Øº Ø«Ø§Ø¨Øª</option>\n                  <option value=\"percentage\">Ù†Ø³Ø¨Ø© Ù…Ø¦ÙˆÙŠØ©</option>\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">\n                  Ù‚ÙŠÙ…Ø© Ø§Ù„Ø®ØµÙ… {discountType === 'percentage' ? '(%)' : '(Ø¬.Ù…)'}\n                </label>\n                <input\n                  type=\"number\"\n                  value={discount}\n                  onChange={(e) => setDiscount(e.target.value)}\n                  className=\"p-2 border border-gray-300 rounded w-full\"\n                  placeholder=\"0\"\n                  min=\"0\"\n                  step={discountType === 'percentage' ? '0.1' : '0.01'}\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù…Ø¨Ù„Øº Ø§Ù„Ø®ØµÙ…</label>\n                <div className=\"p-2 bg-white border border-gray-300 rounded w-full\">\n                  Ø¬.Ù… {(() => {\n                    const subtotal = items.reduce((sum, item) => sum + item.total_price, 0);\n                    const discountAmount = discountType === 'percentage' \n                      ? (subtotal * parseFloat(discount || 0)) / 100\n                      : parseFloat(discount || 0);\n                    return discountAmount.toFixed(2);\n                  })()}\n                </div>\n              </div>\n            </div>\n            \n            {/* Total Section */}\n            <div className=\"mt-4 p-4 bg-blue-50 rounded-lg\">\n              <div className=\"flex justify-between items-center mb-2\">\n                <span className=\"text-lg\">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ:</span>\n                <span className=\"text-lg font-semibold\">\n                  Ø¬.Ù… {items.reduce((sum, item) => sum + item.total_price, 0).toFixed(2)}\n                </span>\n              </div>\n              <div className=\"flex justify-between items-center mb-2\">\n                <span className=\"text-lg\">Ø§Ù„Ø®ØµÙ…:</span>\n                <span className=\"text-lg font-semibold text-red-600\">\n                  - Ø¬.Ù… {(() => {\n                    const subtotal = items.reduce((sum, item) => sum + item.total_price, 0);\n                    const discountAmount = discountType === 'percentage' \n                      ? (subtotal * parseFloat(discount || 0)) / 100\n                      : parseFloat(discount || 0);\n                    return discountAmount.toFixed(2);\n                  })()}\n                </span>\n              </div>\n              <hr className=\"my-2\" />\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-xl font-bold\">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:</span>\n                <span className=\"text-xl font-bold text-green-600\">\n                  Ø¬.Ù… {(() => {\n                    const subtotal = items.reduce((sum, item) => sum + item.total_price, 0);\n                    const discountAmount = discountType === 'percentage' \n                      ? (subtotal * parseFloat(discount || 0)) / 100\n                      : parseFloat(discount || 0);\n                    return (subtotal - discountAmount).toFixed(2);\n                  })()}\n                </span>\n              </div>\n            </div>\n            \n            <div className=\"text-xl font-bold\" style={{display: 'none'}}>\n              Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: Ø¬.Ù… {items.reduce((sum, item) => sum + item.total_price, 0).toFixed(2)}\n            </div>\n          </div>\n          \n          <button\n            onClick={createInvoice}\n            disabled={isCreatingInvoice}\n            className={`w-full p-3 rounded mt-4 text-lg font-semibold ${\n              isCreatingInvoice \n                ? 'bg-gray-400 text-gray-600 cursor-not-allowed' \n                : 'bg-green-500 text-white hover:bg-green-600'\n            }`}\n          >\n            {isCreatingInvoice ? 'Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©...' : 'Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©'}\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Simple placeholder components for other pages\n// Inventory Component will be replaced with new advanced version above\n\n// Stock Component (Old Inventory functionality for Raw Materials and Finished Products)\nconst Stock = () => {\n  const [rawMaterials, setRawMaterials] = useState([]);\n  const [finishedProducts, setFinishedProducts] = useState([]);\n  const [searchTerm, setSearchTerm] = useState(''); // Ù„Ù„Ø¨Ø­Ø«\n  const [newRawMaterial, setNewRawMaterial] = useState({\n    material_type: 'NBR',\n    inner_diameter: '',\n    outer_diameter: '',\n    height: '',\n    pieces_count: '',\n    cost_per_mm: ''\n  });\n  const [newFinishedProduct, setNewFinishedProduct] = useState({\n    seal_type: 'RSL',\n    material_type: 'NBR',\n    inner_diameter: '',\n    outer_diameter: '',\n    height: '',\n    quantity: '',\n    unit_price: ''\n  });\n\n  const materialTypes = ['NBR', 'BUR', 'BT', 'VT', 'BOOM'];\n  const sealTypes = ['RSL', 'RS', 'RSS', 'RSE', 'B17', 'B3', 'B14', 'B1', 'R15', 'R17', 'W1', 'W4', 'W5', 'W11', 'WBT', 'XR', 'CH', 'VR'];\n\n  // Ø¯Ø§Ù„Ø© ØªØµÙÙŠØ© Ø§Ù„Ø¨Ø­Ø«\n  const filteredRawMaterials = rawMaterials.filter(material => \n    material.material_type.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    material.unit_code.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    material.inner_diameter.toString().includes(searchTerm) ||\n    material.outer_diameter.toString().includes(searchTerm) ||\n    material.height.toString().includes(searchTerm)\n  ).sort((a, b) => {\n    // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\n    const materialPriority = { 'BUR': 1, 'NBR': 2, 'BT': 3, 'BOOM': 4, 'VT': 5 };\n    const aPriority = materialPriority[a.material_type] || 6;\n    const bPriority = materialPriority[b.material_type] || 6;\n    \n    if (aPriority !== bPriority) {\n      return aPriority - bPriority;\n    }\n    // Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)\n    if (a.inner_diameter !== b.inner_diameter) {\n      return a.inner_diameter - b.inner_diameter;\n    }\n    return a.outer_diameter - b.outer_diameter;\n  });\n\n  const filteredFinishedProducts = finishedProducts.filter(product => \n    product.seal_type.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    product.material_type.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    product.inner_diameter.toString().includes(searchTerm) ||\n    product.outer_diameter.toString().includes(searchTerm) ||\n    product.height.toString().includes(searchTerm)\n  ).sort((a, b) => {\n    // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø®Ø§Ù…Ø©: BUR-NBR-BT-BOOM-VT\n    const materialPriority = { 'BUR': 1, 'NBR': 2, 'BT': 3, 'BOOM': 4, 'VT': 5 };\n    const aPriority = materialPriority[a.material_type] || 6;\n    const bPriority = materialPriority[b.material_type] || 6;\n    \n    if (aPriority !== bPriority) {\n      return aPriority - bPriority;\n    }\n    // Ø«Ù… ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø«Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)\n    if (a.inner_diameter !== b.inner_diameter) {\n      return a.inner_diameter - b.inner_diameter;\n    }\n    return a.outer_diameter - b.outer_diameter;\n  });\n\n  useEffect(() => {\n    fetchRawMaterials();\n    fetchFinishedProducts();\n  }, []);\n\n  const fetchRawMaterials = async () => {\n    try {\n      const response = await axios.get(`${API}/raw-materials`);\n      setRawMaterials(response.data);\n    } catch (error) {\n      console.error('Error fetching raw materials:', error);\n    }\n  };\n\n  const fetchFinishedProducts = async () => {\n    try {\n      const response = await axios.get(`${API}/finished-products`);\n      setFinishedProducts(response.data);\n    } catch (error) {\n      console.error('Error fetching finished products:', error);\n    }\n  };\n\n  const addRawMaterial = async () => {\n    if (!newRawMaterial.inner_diameter || !newRawMaterial.outer_diameter || !newRawMaterial.height || !newRawMaterial.pieces_count || !newRawMaterial.cost_per_mm) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      const rawMaterial = {\n        material_type: newRawMaterial.material_type,\n        inner_diameter: parseFloat(newRawMaterial.inner_diameter),\n        outer_diameter: parseFloat(newRawMaterial.outer_diameter),\n        height: parseFloat(newRawMaterial.height),\n        pieces_count: parseInt(newRawMaterial.pieces_count),\n        cost_per_mm: parseFloat(newRawMaterial.cost_per_mm)\n        // unit_code will be generated automatically by backend\n      };\n\n      let response;\n      if (newRawMaterial.id) {\n        // Update existing material\n        response = await axios.put(`${API}/raw-materials/${newRawMaterial.id}`, rawMaterial);\n        alert(`ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­. ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø©: ${response.data.unit_code}`);\n      } else {\n        // Add new material\n        response = await axios.post(`${API}/raw-materials`, rawMaterial);\n        alert(`ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­. ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø©: ${response.data.unit_code}`);\n      }\n\n      fetchRawMaterials();\n      setNewRawMaterial({\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        height: '',\n        pieces_count: '',\n        cost_per_mm: ''\n      });\n    } catch (error) {\n      console.error('Error saving raw material:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const clearAllRawMaterials = async () => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…ØŸ')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/raw-materials/clear-all`);\n      fetchRawMaterials();\n      alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…');\n    } catch (error) {\n      console.error('Error clearing raw materials:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…');\n    }\n  };\n\n  const deleteRawMaterial = async (materialId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…ØŸ')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/raw-materials/${materialId}`);\n      fetchRawMaterials();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…');\n    } catch (error) {\n      console.error('Error deleting raw material:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù…');\n    }\n  };\n\n  const editRawMaterial = (material) => {\n    // Fill the form with the material data for editing\n    setNewRawMaterial({\n      id: material.id,\n      material_type: material.material_type,\n      inner_diameter: material.inner_diameter.toString(),\n      outer_diameter: material.outer_diameter.toString(),\n      height: material.height.toString(),\n      pieces_count: material.pieces_count.toString(),\n      cost_per_mm: material.cost_per_mm.toString()\n    });\n  };\n\n  const handleFileImport = async (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    const formData = new FormData();\n    formData.append('file', file);\n\n    try {\n      const response = await axios.post(`${API}/excel/import/raw-materials`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n\n      alert(response.data.message);\n      fetchRawMaterials(); // Refresh the raw materials list\n      event.target.value = ''; // Clear file input\n    } catch (error) {\n      console.error('Error importing file:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const handleFileExport = async () => {\n    try {\n      const response = await axios.get(`${API}/excel/export/raw-materials`, {\n        responseType: 'blob'\n      });\n\n      // Create download link\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', `raw_materials_export_${new Date().toISOString().split('T')[0]}.xlsx`);\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n    } catch (error) {\n      console.error('Error exporting file:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù');\n    }\n  };\n\n  const addFinishedProduct = async () => {\n    if (!newFinishedProduct.inner_diameter || !newFinishedProduct.outer_diameter || !newFinishedProduct.height || !newFinishedProduct.quantity || !newFinishedProduct.unit_price) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      const finishedProduct = {\n        seal_type: newFinishedProduct.seal_type,\n        material_type: newFinishedProduct.material_type,\n        inner_diameter: parseFloat(newFinishedProduct.inner_diameter),\n        outer_diameter: parseFloat(newFinishedProduct.outer_diameter),\n        height: parseFloat(newFinishedProduct.height),\n        quantity: parseInt(newFinishedProduct.quantity),\n        unit_price: parseFloat(newFinishedProduct.unit_price)\n      };\n\n      if (newFinishedProduct.id) {\n        // Update existing product\n        await axios.put(`${API}/finished-products/${newFinishedProduct.id}`, finishedProduct);\n        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¨Ù†Ø¬Ø§Ø­');\n      } else {\n        // Add new product\n        await axios.post(`${API}/finished-products`, finishedProduct);\n        alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¨Ù†Ø¬Ø§Ø­');\n      }\n\n      fetchFinishedProducts();\n      setNewFinishedProduct({\n        seal_type: 'RSL',\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        height: '',\n        quantity: '',\n        unit_price: ''\n      });\n    } catch (error) {\n      console.error('Error saving finished product:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ');\n    }\n  };\n\n  const editFinishedProduct = (product) => {\n    // Fill the form with the product data for editing\n    setNewFinishedProduct({\n      id: product.id,\n      seal_type: product.seal_type,\n      material_type: product.material_type,\n      inner_diameter: product.inner_diameter.toString(),\n      outer_diameter: product.outer_diameter.toString(),\n      height: product.height.toString(),\n      quantity: product.quantity.toString(),\n      unit_price: product.unit_price.toString()\n    });\n  };\n\n  const deleteFinishedProduct = async (productId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØŸ')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/finished-products/${productId}`);\n      fetchFinishedProducts();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ');\n    } catch (error) {\n      console.error('Error deleting finished product:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ');\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <h1 className=\"text-3xl font-bold mb-6\">Ù…Ø®Ø²Ù† Ø¥Ù†ØªØ§Ø¬</h1>\n      \n      {/* Raw Materials Section */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h3 className=\"text-lg font-semibold\">Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…</h3>\n          <div className=\"flex space-x-2 space-x-reverse\">\n            <button\n              onClick={clearAllRawMaterials}\n              className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\"\n            >\n              Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n            </button>\n          </div>\n        </div>\n\n        {/* Import/Export Section */}\n        <div className=\"bg-gray-50 p-4 rounded-lg mb-6\">\n          <h4 className=\"font-medium mb-4\">ðŸ“ Ø§Ø³ØªÙŠØ±Ø§Ø¯ ÙˆØªØµØ¯ÙŠØ± Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…</h4>\n          <div className=\"flex flex-wrap gap-4 items-center\">\n            <div className=\"flex items-center gap-2\">\n              <label className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 cursor-pointer\">\n                ðŸ“¤ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù† Excel\n                <input\n                  type=\"file\"\n                  accept=\".xlsx,.xls\"\n                  onChange={handleFileImport}\n                  className=\"hidden\"\n                />\n              </label>\n              <span className=\"text-sm text-gray-600\">(.xlsx Ø£Ùˆ .xls)</span>\n            </div>\n            \n            <button\n              onClick={handleFileExport}\n              className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n            >\n              ðŸ“¥ ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ Excel\n            </button>\n            \n            <div className=\"text-sm text-gray-600 bg-white p-2 rounded border\">\n              <strong>ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:</strong><br/>\n              material_type, inner_diameter, outer_diameter, height, pieces_count, unit_code, cost_per_mm\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</label>\n            <select\n              value={newRawMaterial.material_type}\n              onChange={(e) => setNewRawMaterial({...newRawMaterial, material_type: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              {materialTypes.map(type => (\n                <option key={type} value={type}>{type}</option>\n              ))}\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</label>\n            <input\n              type=\"number\"\n              value={newRawMaterial.inner_diameter}\n              onChange={(e) => setNewRawMaterial({...newRawMaterial, inner_diameter: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</label>\n            <input\n              type=\"number\"\n              value={newRawMaterial.outer_diameter}\n              onChange={(e) => setNewRawMaterial({...newRawMaterial, outer_diameter: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ (Ù…Ù…)</label>\n            <input\n              type=\"number\"\n              value={newRawMaterial.height}\n              onChange={(e) => setNewRawMaterial({...newRawMaterial, height: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹</label>\n            <input\n              type=\"number\"\n              value={newRawMaterial.pieces_count}\n              onChange={(e) => setNewRawMaterial({...newRawMaterial, pieces_count: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ØªÙƒÙ„ÙØ© Ø§Ù„Ù…Ù„Ù„ÙŠ</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newRawMaterial.cost_per_mm}\n              onChange={(e) => setNewRawMaterial({...newRawMaterial, cost_per_mm: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n        </div>\n        \n        <p className=\"text-sm text-gray-600 mt-4\">\n          Ù…Ù„Ø§Ø­Ø¸Ø©: Ø³ÙŠØªÙ… ØªÙˆÙ„ÙŠØ¯ ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø© ÙˆØ§Ù„Ù…ÙˆØ§ØµÙØ§Øª\n        </p>\n        \n        <button\n          onClick={addRawMaterial}\n          className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mb-4\"\n        >\n          Ø¥Ø¶Ø§ÙØ© Ù…Ø§Ø¯Ø© Ø®Ø§Ù…\n        </button>\n\n        {/* Ø­Ù‚Ù„ Ø§Ù„Ø¨Ø­Ø« */}\n        <div className=\"mb-4\">\n          <input\n            type=\"text\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            placeholder=\"Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù… (Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©ØŒ ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø©ØŒ Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª...)\"\n            className=\"w-full p-3 border border-gray-300 rounded-lg\"\n          />\n        </div>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø§Ø±ØªÙØ§Ø¹</th>\n                <th className=\"border border-gray-300 p-2\">Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹</th>\n                <th className=\"border border-gray-300 p-2\">ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø©</th>\n                <th className=\"border border-gray-300 p-2\">ØªÙƒÙ„ÙØ© Ø§Ù„Ù…Ù„Ù„ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredRawMaterials.map(material => (\n                <tr key={material.id}>\n                  <td className=\"border border-gray-300 p-2\">{material.material_type}</td>\n                  <td className=\"border border-gray-300 p-2\">{material.inner_diameter}</td>\n                  <td className=\"border border-gray-300 p-2\">{material.outer_diameter}</td>\n                  <td className=\"border border-gray-300 p-2\">{material.height}</td>\n                  <td className=\"border border-gray-300 p-2\">{material.pieces_count}</td>\n                  <td className=\"border border-gray-300 p-2\">{material.unit_code}</td>\n                  <td className=\"border border-gray-300 p-2\">{material.cost_per_mm}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex space-x-2 space-x-reverse\">\n                      <button\n                        onClick={() => editRawMaterial(material)}\n                        className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                        title=\"ØªØ­Ø±ÙŠØ±\"\n                      >\n                        âœï¸\n                      </button>\n                      <button\n                        onClick={() => deleteRawMaterial(material.id)}\n                        className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                        title=\"Ø­Ø°Ù\"\n                      >\n                        ðŸ—‘ï¸\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Finished Products Section */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ø§Ù„ØªØ§Ù…</h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„</label>\n            <select\n              value={newFinishedProduct.seal_type}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, seal_type: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              {sealTypes.map(type => (\n                <option key={type} value={type}>{type}</option>\n              ))}\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</label>\n            <select\n              value={newFinishedProduct.material_type}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, material_type: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              {materialTypes.map(type => (\n                <option key={type} value={type}>{type}</option>\n              ))}\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</label>\n            <input\n              type=\"number\"\n              value={newFinishedProduct.inner_diameter}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, inner_diameter: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</label>\n            <input\n              type=\"number\"\n              value={newFinishedProduct.outer_diameter}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, outer_diameter: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø³ÙŠÙ„</label>\n            <input\n              type=\"number\"\n              value={newFinishedProduct.height}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, height: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ÙƒÙ…ÙŠØ©</label>\n            <input\n              type=\"number\"\n              value={newFinishedProduct.quantity}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, quantity: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newFinishedProduct.unit_price}\n              onChange={(e) => setNewFinishedProduct({...newFinishedProduct, unit_price: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n        </div>\n        \n        <button\n          onClick={addFinishedProduct}\n          className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 mb-4\"\n        >\n          Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ù†Ù‡Ø§Ø¦ÙŠ\n        </button>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„</th>\n                <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø§Ø±ØªÙØ§Ø¹</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙƒÙ…ÙŠØ©</th>\n                <th className=\"border border-gray-300 p-2\">Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredFinishedProducts.map(product => (\n                <tr key={product.id}>\n                  <td className=\"border border-gray-300 p-2\">{product.seal_type}</td>\n                  <td className=\"border border-gray-300 p-2\">{product.material_type}</td>\n                  <td className=\"border border-gray-300 p-2\">{product.inner_diameter}</td>\n                  <td className=\"border border-gray-300 p-2\">{product.outer_diameter}</td>\n                  <td className=\"border border-gray-300 p-2\">{product.height}</td>\n                  <td className=\"border border-gray-300 p-2\">{product.quantity}</td>\n                  <td className=\"border border-gray-300 p-2\">{product.unit_price}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex space-x-2 space-x-reverse\">\n                      <button\n                        onClick={() => editFinishedProduct(product)}\n                        className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                        title=\"ØªØ­Ø±ÙŠØ±\"\n                      >\n                        âœï¸\n                      </button>\n                      <button\n                        onClick={() => deleteFinishedProduct(product.id)}\n                        className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                        title=\"Ø­Ø°Ù\"\n                      >\n                        ðŸ—‘ï¸\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Deferred Payments Component\nconst Deferred = () => {\n  const [unpaidInvoices, setUnpaidInvoices] = useState([]);\n  const [customers, setCustomers] = useState([]);\n  const [selectedInvoice, setSelectedInvoice] = useState(null);\n  const [paymentAmount, setPaymentAmount] = useState('');\n  const [paymentMethod, setPaymentMethod] = useState('Ù†Ù‚Ø¯ÙŠ');\n  const [paymentNotes, setPaymentNotes] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  \n  // Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª Ù„ÙƒÙ„ Ø¹Ù…ÙŠÙ„\n  const [customerTotals, setCustomerTotals] = useState({});\n\n  useEffect(() => {\n    fetchUnpaidInvoices();\n    fetchCustomers();\n  }, []);\n\n  useEffect(() => {\n    // Ø­Ø³Ø§Ø¨ Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\n    const totals = {};\n    filteredInvoices.forEach(invoice => {\n      const customerName = invoice.customer_name;\n      if (!totals[customerName]) {\n        totals[customerName] = {\n          totalAmount: 0,\n          invoiceCount: 0\n        };\n      }\n      totals[customerName].totalAmount += invoice.remaining_amount || invoice.total_amount;\n      totals[customerName].invoiceCount += 1;\n    });\n    setCustomerTotals(totals);\n  }, [unpaidInvoices, searchTerm]);\n  \n  // ÙÙ„ØªØ±Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø­Ø³Ø¨ Ø§Ù„Ø¨Ø­Ø«\n  const filteredInvoices = unpaidInvoices.filter(invoice => \n    invoice.customer_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    invoice.invoice_number.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    (invoice.invoice_title && invoice.invoice_title.toLowerCase().includes(searchTerm.toLowerCase()))\n  );\n\n  useEffect(() => {\n    fetchUnpaidInvoices();\n    fetchCustomers();\n  }, []);\n\n  const fetchUnpaidInvoices = async () => {\n    try {\n      const response = await axios.get(`${API}/invoices`);\n      const invoices = response.data.filter(invoice => \n        // ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¢Ø¬Ù„Ø© Ø£Ùˆ Ù„Ù‡Ø§ Ù…Ø¨Ù„Øº Ù…Ø³ØªØ­Ù‚\n        (invoice.payment_method === 'Ø¢Ø¬Ù„' || invoice.remaining_amount > 0) &&\n        (invoice.status === 'ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©' || \n         invoice.status === 'Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹' || \n         invoice.status === 'Ø§Ù†ØªØ¸Ø§Ø±' ||\n         invoice.remaining_amount > 0)\n      );\n      setUnpaidInvoices(invoices);\n    } catch (error) {\n      console.error('Error fetching unpaid invoices:', error);\n    }\n  };\n\n  const fetchCustomers = async () => {\n    try {\n      const response = await axios.get(`${API}/customers`);\n      // Sort customers alphabetically by name\n      const sortedCustomers = (response.data || []).sort((a, b) => \n        a.name.localeCompare(b.name, 'ar')\n      );\n      setCustomers(sortedCustomers);\n    } catch (error) {\n      console.error('Error fetching customers:', error);\n    }\n  };\n\n  const getCustomerName = (customerId) => {\n    const customer = customers.find(c => c.id === customerId);\n    return customer ? customer.name : 'Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…Ø­Ø¯Ø¯';\n  };\n\n  const makePayment = async () => {\n    if (!selectedInvoice || !paymentAmount) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙˆØ¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº');\n      return;\n    }\n\n    if (parseFloat(paymentAmount) > selectedInvoice.remaining_amount) {\n      alert('Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯Ø®Ù„ Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚');\n      return;\n    }\n\n    try {\n      await axios.post(`${API}/payments`, {\n        invoice_id: selectedInvoice.id,\n        amount: parseFloat(paymentAmount),\n        payment_method: paymentMethod,\n        notes: paymentNotes\n      });\n\n      setPaymentAmount('');\n      setPaymentNotes('');\n      setSelectedInvoice(null);\n      fetchUnpaidInvoices();\n      alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø© Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error making payment:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø©');\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n        <div className=\"flex flex-col md:flex-row md:items-center justify-between mb-4\">\n          <h3 className=\"text-xl font-bold text-blue-600 mb-2 md:mb-0\">Ø§Ù„Ø¢Ø¬Ù„ - Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª</h3>\n          <div className=\"flex space-x-2 space-x-reverse\">\n            <button \n              onClick={() => window.print()} \n              className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\">\n              Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n            </button>\n            <select className=\"border border-gray-300 rounded px-3 py-2\">\n              <option>ÙŠÙˆÙ…ÙŠ</option>\n              <option>Ø£Ø³Ø¨ÙˆØ¹ÙŠ</option>\n              <option>Ø´Ù‡Ø±ÙŠ</option>\n              <option>Ø³Ù†ÙˆÙŠ</option>\n            </select>\n          </div>\n        </div>\n        \n        {/* Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« ÙˆØ¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ */}\n        <div className=\"bg-gray-50 p-4 rounded-lg mb-4\">\n          <div className=\"mb-3\">\n            <input\n              type=\"text\"\n              placeholder=\"Ø¨Ø­Ø« Ø¨Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø£Ùˆ Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø£Ùˆ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          {/* Ø¹Ø±Ø¶ Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ */}\n          {Object.keys(customerTotals).length > 0 && (\n            <div className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3\">\n              {Object.entries(customerTotals).map(([customerName, totals]) => (\n                <div key={customerName} className=\"bg-white p-3 rounded border text-center\">\n                  <div className=\"font-semibold text-blue-800 text-sm\">{customerName}</div>\n                  <div className=\"text-xs text-blue-600\">\n                    {totals.invoiceCount} ÙØ§ØªÙˆØ±Ø©\n                  </div>\n                  <div className=\"text-sm font-bold text-green-600\">\n                    {totals.totalAmount.toFixed(2)} Ø¬.Ù…\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n\n      {/* Payment Form */}\n      {selectedInvoice && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n          <h3 className=\"text-lg font-semibold mb-4\">ØªØ³Ø¬ÙŠÙ„ Ø¯ÙØ¹Ø©</h3>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</label>\n              <input\n                type=\"text\"\n                value={selectedInvoice.invoice_number}\n                disabled\n                className=\"w-full p-2 border border-gray-300 rounded bg-gray-100\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø¹Ù…ÙŠÙ„</label>\n              <input\n                type=\"text\"\n                value={selectedInvoice.customer_name}\n                disabled\n                className=\"w-full p-2 border border-gray-300 rounded bg-gray-100\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚</label>\n              <input\n                type=\"text\"\n                value={`Ø¬.Ù… ${selectedInvoice.remaining_amount?.toFixed(2) || '0.00'}`}\n                disabled\n                className=\"w-full p-2 border border-gray-300 rounded bg-gray-100\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ù…Ø¨Ù„Øº Ø§Ù„Ø¯ÙØ¹Ø©</label>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                value={paymentAmount}\n                onChange={(e) => setPaymentAmount(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n                placeholder=\"0.00\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</label>\n              <select\n                value={paymentMethod}\n                onChange={(e) => setPaymentMethod(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              >\n                <option value=\"Ù†Ù‚Ø¯ÙŠ\">Ù†Ù‚Ø¯ÙŠ</option>\n                <option value=\"ÙÙˆØ¯Ø§ÙÙˆÙ† 010\">ÙÙˆØ¯Ø§ÙÙˆÙ† 010</option>\n                <option value=\"ÙƒØ§Ø´ 0100\">ÙƒØ§Ø´ 0100</option>\n                <option value=\"Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ\">Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ</option>\n              </select>\n            </div>\n            \n            <div className=\"md:col-span-2\">\n              <label className=\"block text-sm font-medium mb-1\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>\n              <input\n                type=\"text\"\n                value={paymentNotes}\n                onChange={(e) => setPaymentNotes(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n                placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n              />\n            </div>\n          </div>\n          \n          <div className=\"flex space-x-4 space-x-reverse\">\n            <button\n              onClick={makePayment}\n              className=\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\"\n            >\n              ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø©\n            </button>\n            <button\n              onClick={() => setSelectedInvoice(null)}\n              className=\"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600\"\n            >\n              Ø¥Ù„ØºØ§Ø¡\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Unpaid Invoices */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø§Ù„ÙÙˆØ§ØªÙŠØ± ØºÙŠØ± Ø§Ù„Ù…Ø³Ø¯Ø¯Ø©</h3>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¹Ù…ÙŠÙ„</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø¯ÙÙˆØ¹</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø³ØªØ­Ù‚</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø§Ù„Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredInvoices.map((invoice) => (\n                <tr key={invoice.id}>\n                  <td className=\"border border-gray-300 p-2\">{invoice.invoice_number}</td>\n                  <td className=\"border border-gray-300 p-2\">{invoice.customer_name}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    {new Date(invoice.date).toLocaleDateString('ar-EG')}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {invoice.total_amount?.toFixed(2) || '0.00'}</td>\n                  <td className=\"border border-gray-300 p-2\">Ø¬.Ù… {invoice.paid_amount?.toFixed(2) || '0.00'}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className=\"font-bold text-red-600\">\n                      Ø¬.Ù… {invoice.remaining_amount?.toFixed(2) || '0.00'}\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className={`px-2 py-1 rounded text-sm ${\n                      invoice.status === 'ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©' ? 'bg-red-100 text-red-800' :\n                      invoice.status === 'Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹' ? 'bg-yellow-100 text-yellow-800' :\n                      'bg-green-100 text-green-800'\n                    }`}>\n                      {invoice.status}\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex space-x-2 space-x-reverse\">\n                      <button\n                        onClick={() => setSelectedInvoice(invoice)}\n                        className=\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\"\n                      >\n                        Ø¹Ø±Ø¶ Ø§Ù„Ø¯ÙØ¹Ø§Øª\n                      </button>\n                      <button\n                        onClick={() => setSelectedInvoice(invoice)}\n                        className=\"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600\"\n                      >\n                        Ø¯ÙØ¹\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n          \n          {filteredInvoices.length === 0 && (\n            <div className=\"text-center py-8 text-gray-500\">\n              Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙˆØ§ØªÙŠØ± ØºÙŠØ± Ù…Ø³Ø¯Ø¯Ø©\n            </div>\n          )}\n        </div>\n\n        {/* Summary */}\n        <div className=\"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"bg-red-50 p-4 rounded\">\n            <h4 className=\"font-semibold text-red-800\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø©</h4>\n            <p className=\"text-2xl font-bold text-red-600\">\n              Ø¬.Ù… {filteredInvoices.reduce((sum, inv) => sum + (inv.remaining_amount || 0), 0).toFixed(2)}\n            </p>\n          </div>\n          \n          <div className=\"bg-yellow-50 p-4 rounded\">\n            <h4 className=\"font-semibold text-yellow-800\">Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©</h4>\n            <p className=\"text-2xl font-bold text-yellow-600\">{filteredInvoices.length}</p>\n          </div>\n          \n          <div className=\"bg-blue-50 p-4 rounded\">\n            <h4 className=\"font-semibold text-blue-800\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø£ØµÙ„ÙŠ</h4>\n            <p className=\"text-2xl font-bold text-blue-600\">\n              Ø¬.Ù… {filteredInvoices.reduce((sum, inv) => sum + (inv.total_amount || 0), 0).toFixed(2)}\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Expenses Component\nconst Expenses = () => {\n  const [expenses, setExpenses] = useState([]);\n  const [newExpense, setNewExpense] = useState({\n    description: '',\n    amount: '',\n    category: 'Ø®Ø§Ù…Ø§Øª'\n  });\n\n  const expenseCategories = ['Ø®Ø§Ù…Ø§Øª', 'Ø±ÙˆØ§ØªØ¨', 'ÙƒÙ‡Ø±Ø¨Ø§Ø¡', 'ØµÙŠØ§Ù†Ø©', 'Ø£Ø®Ø±Ù‰'];\n\n  useEffect(() => {\n    fetchExpenses();\n  }, []);\n\n  const fetchExpenses = async () => {\n    try {\n      const response = await axios.get(`${API}/expenses`);\n      setExpenses(response.data);\n    } catch (error) {\n      console.error('Error fetching expenses:', error);\n    }\n  };\n\n  const addExpense = async () => {\n    if (!newExpense.description || !newExpense.amount) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      await axios.post(`${API}/expenses`, {\n        ...newExpense,\n        amount: parseFloat(newExpense.amount)\n      });\n\n      setNewExpense({\n        description: '',\n        amount: '',\n        category: 'Ø®Ø§Ù…Ø§Øª'\n      });\n\n      fetchExpenses();\n      alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ØµØ±ÙˆÙ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error adding expense:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ØµØ±ÙˆÙ');\n    }\n  };\n\n  const deleteExpense = async (expenseId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ØµØ±ÙˆÙØŸ')) return;\n\n    try {\n      await axios.delete(`${API}/expenses/${expenseId}`);\n      fetchExpenses();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ØµØ±ÙˆÙ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting expense:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…ØµØ±ÙˆÙ');\n    }\n  };\n\n  const getTotalExpenses = () => {\n    return expenses.reduce((sum, expense) => sum + expense.amount, 0);\n  };\n\n  const getExpensesByCategory = () => {\n    const byCategory = {};\n    expenseCategories.forEach(cat => {\n      byCategory[cat] = expenses\n        .filter(exp => exp.category === cat)\n        .reduce((sum, exp) => sum + exp.amount, 0);\n    });\n    return byCategory;\n  };\n\n  const clearAllExpenses = async () => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§ØªØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) return;\n    \n    try {\n      await axios.delete(`${API}/expenses/clear-all`);\n      fetchExpenses();\n      alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª');\n    } catch (error) {\n      console.error('Error clearing expenses:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-blue-600 mb-4\">Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h2>\n        \n        <div className=\"flex space-x-4 space-x-reverse mb-4\">\n          <button \n            onClick={clearAllExpenses}\n            className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n            Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n          </button>\n          <button \n            onClick={fetchExpenses}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n            Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => window.print()}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n            Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n          <select className=\"border border-gray-300 rounded px-3 py-2\">\n            <option>ÙŠÙˆÙ…ÙŠ</option>\n            <option>Ø£Ø³Ø¨ÙˆØ¹ÙŠ</option>\n            <option>Ø´Ù‡Ø±ÙŠ</option>\n            <option>Ø³Ù†ÙˆÙŠ</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Add New Expense */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ Ø¬Ø¯ÙŠØ¯</h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ÙˆØµÙ Ø§Ù„Ù…ØµØ±ÙˆÙ</label>\n            <input\n              type=\"text\"\n              value={newExpense.description}\n              onChange={(e) => setNewExpense({...newExpense, description: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"Ù…Ø«Ø§Ù„: Ø´Ø±Ø§Ø¡ Ø®Ø§Ù…Ø§ØªØŒ ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ø§Ù„Ù…ØµÙ†Ø¹\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù…Ø¨Ù„Øº</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newExpense.amount}\n              onChange={(e) => setNewExpense({...newExpense, amount: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"0.00\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ÙØ¦Ø©</label>\n            <select\n              value={newExpense.category}\n              onChange={(e) => setNewExpense({...newExpense, category: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              {expenseCategories.map(category => (\n                <option key={category} value={category}>{category}</option>\n              ))}\n            </select>\n          </div>\n        </div>\n        \n        <button\n          onClick={addExpense}\n          className=\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\"\n        >\n          Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ØµØ±ÙˆÙ\n        </button>\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6\">\n        <div className=\"bg-red-50 p-6 rounded-lg\">\n          <h3 className=\"text-lg font-semibold text-red-800 mb-2\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>\n          <p className=\"text-3xl font-bold text-red-600\">\n            Ø¬.Ù… {getTotalExpenses().toFixed(2)}\n          </p>\n        </div>\n        \n        <div className=\"bg-blue-50 p-6 rounded-lg\">\n          <h3 className=\"text-lg font-semibold text-blue-800 mb-2\">Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>\n          <p className=\"text-3xl font-bold text-blue-600\">{expenses.length}</p>\n        </div>\n        \n        <div className=\"bg-yellow-50 p-6 rounded-lg\">\n          <h3 className=\"text-lg font-semibold text-yellow-800 mb-2\">Ù…ØªÙˆØ³Ø· Ø§Ù„Ù…ØµØ±ÙˆÙ</h3>\n          <p className=\"text-3xl font-bold text-yellow-600\">\n            Ø¬.Ù… {expenses.length > 0 ? (getTotalExpenses() / expenses.length).toFixed(2) : '0.00'}\n          </p>\n        </div>\n      </div>\n\n      {/* Expenses by Category */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©</h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\">\n          {Object.entries(getExpensesByCategory()).map(([category, amount]) => (\n            <div key={category} className=\"text-center p-4 border rounded\">\n              <h4 className=\"font-medium text-gray-700\">{category}</h4>\n              <p className=\"text-xl font-bold text-blue-600\">Ø¬.Ù… {amount.toFixed(2)}</p>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Expenses List */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙˆØµÙ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø¨Ù„Øº</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙØ¦Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {expenses.map((expense) => (\n                <tr key={expense.id}>\n                  <td className=\"border border-gray-300 p-2\">{expense.description}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className=\"font-semibold text-red-600\">\n                      Ø¬.Ù… {expense.amount.toFixed(2)}\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className={`px-2 py-1 rounded text-sm ${\n                      expense.category === 'Ø®Ø§Ù…Ø§Øª' ? 'bg-blue-100 text-blue-800' :\n                      expense.category === 'Ø±ÙˆØ§ØªØ¨' ? 'bg-green-100 text-green-800' :\n                      expense.category === 'ÙƒÙ‡Ø±Ø¨Ø§Ø¡' ? 'bg-yellow-100 text-yellow-800' :\n                      expense.category === 'ØµÙŠØ§Ù†Ø©' ? 'bg-purple-100 text-purple-800' :\n                      'bg-gray-100 text-gray-800'\n                    }`}>\n                      {expense.category}\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    {new Date(expense.date).toLocaleDateString('ar-EG')}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <button \n                      onClick={() => deleteExpense(expense.id)}\n                      className=\"bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600\">\n                      Ø­Ø°Ù\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n          \n          {expenses.length === 0 && (\n            <div className=\"text-center py-8 text-gray-500\">\n              Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ØµØ±ÙˆÙØ§Øª Ù…Ø³Ø¬Ù„Ø©\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Revenue Component\nconst Revenue = () => {\n  const [revenueData, setRevenueData] = useState({\n    total_revenue: 0,\n    total_expenses: 0,\n    material_cost: 0,\n    profit: 0\n  });\n  const [period, setPeriod] = useState('daily');\n\n  useEffect(() => {\n    fetchRevenueData();\n  }, [period]);\n\n  const fetchRevenueData = async () => {\n    try {\n      const response = await axios.get(`${API}/reports/revenue?period=${period}`);\n      setRevenueData(response.data);\n    } catch (error) {\n      console.error('Error fetching revenue data:', error);\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-blue-600 mb-4\">Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</h2>\n        \n        <div className=\"flex space-x-4 space-x-reverse mb-4\">\n          <button className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n            Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n          </button>\n          <button \n            onClick={fetchRevenueData}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n            Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => window.print()}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n            Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n          <select \n            value={period}\n            onChange={(e) => setPeriod(e.target.value)}\n            className=\"border border-gray-300 rounded px-3 py-2\">\n            <option value=\"daily\">Ø§Ù„ÙŠÙˆÙ…</option>\n            <option value=\"weekly\">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</option>\n            <option value=\"monthly\">Ø§Ù„Ø´Ù‡Ø±</option>\n            <option value=\"yearly\">Ø§Ù„Ø³Ù†Ø©</option>\n          </select>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {/* Revenue Cards */}\n        <div className=\"bg-green-50 p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold text-green-800 text-center mb-2\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</h3>\n          <p className=\"text-3xl font-bold text-green-600 text-center\">\n            Ø¬.Ù… {revenueData.total_revenue?.toFixed(2) || '0.00'}\n          </p>\n        </div>\n        \n        <div className=\"bg-red-50 p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold text-red-800 text-center mb-2\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>\n          <p className=\"text-3xl font-bold text-red-600 text-center\">\n            Ø¬.Ù… {revenueData.total_expenses?.toFixed(2) || '0.00'}\n          </p>\n        </div>\n        \n        <div className=\"bg-yellow-50 p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold text-yellow-800 text-center mb-2\">ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø§Ù…Ø§Øª</h3>\n          <p className=\"text-3xl font-bold text-yellow-600 text-center\">\n            Ø¬.Ù… {revenueData.material_cost?.toFixed(2) || '0.00'}\n          </p>\n        </div>\n        \n        <div className=\"bg-blue-50 p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold text-blue-800 text-center mb-2\">ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­</h3>\n          <p className={`text-3xl font-bold text-center ${\n            (revenueData.profit || 0) >= 0 ? 'text-blue-600' : 'text-red-600'\n          }`}>\n            Ø¬.Ù… {revenueData.profit?.toFixed(2) || '0.00'}\n          </p>\n        </div>\n      </div>\n\n      {/* Summary Table */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mt-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª - {\n          period === 'daily' ? 'ÙŠÙˆÙ…ÙŠ' :\n          period === 'weekly' ? 'Ø£Ø³Ø¨ÙˆØ¹ÙŠ' :\n          period === 'monthly' ? 'Ø´Ù‡Ø±ÙŠ' : 'Ø³Ù†ÙˆÙŠ'\n        }</h3>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-3\">Ø§Ù„Ø¨ÙŠØ§Ù†</th>\n                <th className=\"border border-gray-300 p-3\">Ø§Ù„Ù…Ø¨Ù„Øº (Ø¬.Ù…)</th>\n                <th className=\"border border-gray-300 p-3\">Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ©</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td className=\"border border-gray-300 p-3 font-semibold\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</td>\n                <td className=\"border border-gray-300 p-3 text-green-600 font-bold\">\n                  {revenueData.total_revenue?.toFixed(2) || '0.00'}\n                </td>\n                <td className=\"border border-gray-300 p-3\">100%</td>\n              </tr>\n              <tr>\n                <td className=\"border border-gray-300 p-3\">ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø§Ù…Ø§Øª</td>\n                <td className=\"border border-gray-300 p-3 text-yellow-600 font-semibold\">\n                  -{revenueData.material_cost?.toFixed(2) || '0.00'}\n                </td>\n                <td className=\"border border-gray-300 p-3\">\n                  {revenueData.total_revenue > 0 \n                    ? ((revenueData.material_cost / revenueData.total_revenue) * 100).toFixed(1) \n                    : '0.0'}%\n                </td>\n              </tr>\n              <tr>\n                <td className=\"border border-gray-300 p-3\">Ù…ØµØ±ÙˆÙØ§Øª Ø£Ø®Ø±Ù‰</td>\n                <td className=\"border border-gray-300 p-3 text-red-600 font-semibold\">\n                  -{((revenueData.total_expenses || 0) - (revenueData.material_cost || 0)).toFixed(2)}\n                </td>\n                <td className=\"border border-gray-300 p-3\">\n                  {revenueData.total_revenue > 0 \n                    ? (((revenueData.total_expenses - revenueData.material_cost) / revenueData.total_revenue) * 100).toFixed(1) \n                    : '0.0'}%\n                </td>\n              </tr>\n              <tr className=\"bg-blue-50\">\n                <td className=\"border border-gray-300 p-3 font-bold\">ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­</td>\n                <td className={`border border-gray-300 p-3 font-bold ${\n                  (revenueData.profit || 0) >= 0 ? 'text-blue-600' : 'text-red-600'\n                }`}>\n                  {revenueData.profit?.toFixed(2) || '0.00'}\n                </td>\n                <td className=\"border border-gray-300 p-3 font-bold\">\n                  {revenueData.total_revenue > 0 \n                    ? ((revenueData.profit / revenueData.total_revenue) * 100).toFixed(1) \n                    : '0.0'}%\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Performance Indicators */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mt-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡</h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"text-center p-4 border rounded\">\n            <h4 className=\"font-medium text-gray-700 mb-2\">Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­</h4>\n            <p className={`text-2xl font-bold ${\n              (revenueData.profit || 0) >= 0 ? 'text-green-600' : 'text-red-600'\n            }`}>\n              {revenueData.total_revenue > 0 \n                ? ((revenueData.profit / revenueData.total_revenue) * 100).toFixed(1) \n                : '0.0'}%\n            </p>\n          </div>\n          \n          <div className=\"text-center p-4 border rounded\">\n            <h4 className=\"font-medium text-gray-700 mb-2\">Ù†Ø³Ø¨Ø© ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø§Ù…Ø§Øª</h4>\n            <p className=\"text-2xl font-bold text-yellow-600\">\n              {revenueData.total_revenue > 0 \n                ? ((revenueData.material_cost / revenueData.total_revenue) * 100).toFixed(1) \n                : '0.0'}%\n            </p>\n          </div>\n          \n          <div className=\"text-center p-4 border rounded\">\n            <h4 className=\"font-medium text-gray-700 mb-2\">Ù†Ø³Ø¨Ø© Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©</h4>\n            <p className=\"text-2xl font-bold text-red-600\">\n              {revenueData.total_revenue > 0 \n                ? ((revenueData.total_expenses / revenueData.total_revenue) * 100).toFixed(1) \n                : '0.0'}%\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Invoices Component\nconst Invoices = () => {\n  const [invoices, setInvoices] = useState([]);\n  const [customers, setCustomers] = useState([]);\n  const [filterStatus, setFilterStatus] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [editingInvoice, setEditingInvoice] = useState(null);\n  const [editForm, setEditForm] = useState({\n    invoice_title: '',\n    supervisor_name: '',\n    customer_name: '',\n    payment_method: 'Ù†Ù‚Ø¯ÙŠ',\n    discount_type: 'amount',\n    discount_value: 0,\n    items: [],\n    notes: ''\n  });\n\n  useEffect(() => {\n    fetchInvoices();\n    fetchCustomers();\n  }, []);\n\n  const fetchInvoices = async () => {\n    try {\n      console.log('Fetching invoices...');\n      const response = await axios.get(`${API}/invoices`);\n      console.log('Invoices fetched:', response.data.length, 'invoices');\n      setInvoices(response.data);\n    } catch (error) {\n      console.error('Error fetching invoices:', error);\n      alert('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙˆØ§ØªÙŠØ±: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const fetchCustomers = async () => {\n    try {\n      const response = await axios.get(`${API}/customers`);\n      // Sort customers alphabetically by name\n      const sortedCustomers = (response.data || []).sort((a, b) => \n        a.name.localeCompare(b.name, 'ar')\n      );\n      setCustomers(sortedCustomers);\n    } catch (error) {\n      console.error('Error fetching customers:', error);\n    }\n  };\n\n  // Change payment method function\n  const changePaymentMethod = async (invoiceId) => {\n    const paymentMethods = [\n      { value: 'Ù†Ù‚Ø¯ÙŠ', label: 'Ù†Ù‚Ø¯ÙŠ' },\n      { value: 'Ø¢Ø¬Ù„', label: 'Ø¢Ø¬Ù„' },\n      { value: 'ÙÙˆØ¯Ø§ÙÙˆÙ† 010', label: 'ÙÙˆØ¯Ø§ÙÙˆÙ† 010' },\n      { value: 'ÙƒØ§Ø´ 0100', label: 'ÙƒØ§Ø´ 0100' },\n      { value: 'Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ', label: 'Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ' },\n      { value: 'ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ', label: 'ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ' }\n    ];\n\n    const invoice = invoices.find(inv => inv.id === invoiceId);\n    if (!invoice) {\n      alert('Ø§Ù„ÙØ§ØªÙˆØ±Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©');\n      return;\n    }\n\n    // Ù…Ù†Ø¹ ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹\n    if (invoice.paid_amount > 0 && invoice.remaining_amount > 0) {\n      alert('Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­ÙˆÙŠÙ„ Ø·Ø±ÙŠÙ‚Ø© Ø¯ÙØ¹ ÙØ§ØªÙˆØ±Ø© Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹');\n      return;\n    }\n\n    // Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø§ÙØ°Ø© Ø­ÙˆØ§Ø± Ù…Ø®ØµØµØ© Ù„Ù„Ø§Ø®ØªÙŠØ§Ø±\n    const modalHtml = `\n      <div id=\"paymentMethodModal\" style=\"\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0,0,0,0.5);\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        z-index: 1000;\n        direction: rtl;\n      \">\n        <div style=\"\n          background: white;\n          padding: 30px;\n          border-radius: 10px;\n          box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n          min-width: 400px;\n          text-align: center;\n        \">\n          <h3 style=\"margin-bottom: 20px; color: #333;\">ØªØºÙŠÙŠØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</h3>\n          <p style=\"margin-bottom: 15px;\">Ø§Ù„ÙØ§ØªÙˆØ±Ø©: <strong>${invoice.invoice_number}</strong></p>\n          <p style=\"margin-bottom: 20px;\">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø­Ø§Ù„ÙŠØ©: <strong style=\"color: #e74c3c;\">${invoice.payment_method}</strong></p>\n          <div style=\"margin-bottom: 20px;\">\n            <label style=\"display: block; margin-bottom: 10px; font-weight: bold;\">Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:</label>\n            <select id=\"newPaymentMethod\" style=\"\n              width: 100%;\n              padding: 10px;\n              border: 2px solid #ddd;\n              border-radius: 5px;\n              font-size: 16px;\n              direction: rtl;\n            \">\n              <option value=\"\">-- Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ --</option>\n              ${paymentMethods\n                .filter(method => method.value !== invoice.payment_method)\n                .map(method => `<option value=\"${method.value}\">${method.label}</option>`)\n                .join('')}\n            </select>\n          </div>\n          <div style=\"display: flex; gap: 10px; justify-content: center;\">\n            <button id=\"confirmChange\" style=\"\n              background: #27ae60;\n              color: white;\n              border: none;\n              padding: 10px 20px;\n              border-radius: 5px;\n              cursor: pointer;\n              font-size: 16px;\n            \">ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØºÙŠÙŠØ±</button>\n            <button id=\"cancelChange\" style=\"\n              background: #e74c3c;\n              color: white;\n              border: none;\n              padding: 10px 20px;\n              border-radius: 5px;\n              cursor: pointer;\n              font-size: 16px;\n            \">Ø¥Ù„ØºØ§Ø¡</button>\n          </div>\n        </div>\n      </div>\n    `;\n\n    // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø§ÙØ°Ø© Ù„Ù„ØµÙØ­Ø©\n    document.body.insertAdjacentHTML('beforeend', modalHtml);\n\n    // Ø¥Ø¶Ø§ÙØ© Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø£Ø²Ø±Ø§Ø±\n    const modal = document.getElementById('paymentMethodModal');\n    const selectElement = document.getElementById('newPaymentMethod');\n    const confirmBtn = document.getElementById('confirmChange');\n    const cancelBtn = document.getElementById('cancelChange');\n\n    // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©\n    const closeModal = () => {\n      if (modal && modal.parentNode) {\n        modal.parentNode.removeChild(modal);\n      }\n    };\n\n    // Ø²Ø± Ø§Ù„Ø¥Ù„ØºØ§Ø¡\n    cancelBtn.onclick = closeModal;\n\n    // Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø§ÙØ°Ø©\n    modal.onclick = (e) => {\n      if (e.target === modal) {\n        closeModal();\n      }\n    };\n\n    // Ø²Ø± Ø§Ù„ØªØ£ÙƒÙŠØ¯\n    confirmBtn.onclick = async () => {\n      const newMethod = selectElement.value;\n      \n      if (!newMethod) {\n        alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø·Ø±ÙŠÙ‚Ø© Ø¯ÙØ¹ Ø¬Ø¯ÙŠØ¯Ø©');\n        return;\n      }\n\n      if (newMethod === invoice.payment_method) {\n        alert('Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ù‡ÙŠ Ù†ÙØ³Ù‡Ø§ Ø¨Ø§Ù„ÙØ¹Ù„');\n        return;\n      }\n\n      if (!confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­ÙˆÙŠÙ„ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ù…Ù† \"${invoice.payment_method}\" Ø¥Ù„Ù‰ \"${newMethod}\"ØŸ\\n\\nØ³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ø²ÙŠÙ†Ø© ÙˆØ§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.`)) {\n        return;\n      }\n\n      try {\n        const response = await axios.put(`${API}/invoices/${invoiceId}/change-payment-method?new_payment_method=${encodeURIComponent(newMethod)}`);\n        alert(response.data.message);\n        fetchInvoices(); // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙˆØ§ØªÙŠØ±\n        closeModal();\n      } catch (error) {\n        console.error('Error changing payment method:', error);\n        alert('Ø®Ø·Ø£ ÙÙŠ ØªØºÙŠÙŠØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹: ' + (error.response?.data?.detail || error.message));\n      }\n    };\n  };\n\n  // Cancel invoice function\n  const cancelInvoice = async (invoiceId) => {\n    const invoice = invoices.find(inv => inv.id === invoiceId);\n    if (!invoice) {\n      alert('Ø§Ù„ÙØ§ØªÙˆØ±Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©');\n      return;\n    }\n\n    const confirmMessage = `Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø© ${invoice.invoice_number}ØŸ\\n\\nØ³ÙŠØªÙ…:\\n- Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø®Ø²Ù†\\n- Ø¹Ù…Ù„ Ù…Ø¹Ø§Ù…Ù„Ø© Ø¹ÙƒØ³ÙŠØ© ÙÙŠ Ø§Ù„Ø®Ø²ÙŠÙ†Ø©\\n- Ø­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹\\n\\nÙ‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ ØºÙŠØ± Ù‚Ø§Ø¨Ù„ Ù„Ù„Ø¥Ù„ØºØ§Ø¡!`;\n    \n    if (!confirm(confirmMessage)) {\n      return;\n    }\n\n    try {\n      const response = await axios.delete(`${API}/invoices/${invoiceId}/cancel`);\n      alert(response.data.message);\n      fetchInvoices(); // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙˆØ§ØªÙŠØ±\n    } catch (error) {\n      console.error('Error canceling invoice:', error);\n      alert('Ø®Ø·Ø£ ÙÙŠ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const deleteInvoice = async (invoiceId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©ØŸ')) return;\n\n    try {\n      await axios.delete(`${API}/invoices/${invoiceId}`);\n      fetchInvoices();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting invoice:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø©');\n    }\n  };\n\n  const startEditInvoice = (invoice) => {\n    setEditingInvoice(invoice.id);\n    setEditForm({\n      invoice_title: invoice.invoice_title || '',\n      supervisor_name: invoice.supervisor_name || '',\n      customer_name: invoice.customer_name || '',\n      payment_method: invoice.payment_method || 'Ù†Ù‚Ø¯ÙŠ',\n      discount_type: invoice.discount_type || 'amount',\n      discount_value: invoice.discount_value || 0,\n      items: invoice.items || [],\n      notes: invoice.notes || ''\n    });\n  };\n\n  const cancelEdit = () => {\n    setEditingInvoice(null);\n    setEditForm({\n      invoice_title: '',\n      supervisor_name: '',\n      customer_name: '',\n      payment_method: 'Ù†Ù‚Ø¯ÙŠ',\n      discount_type: 'amount',\n      discount_value: 0,\n      items: [],\n      notes: ''\n    });\n  };\n\n  const saveInvoiceEdit = async () => {\n    if (!editForm.customer_name.trim()) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„');\n      return;\n    }\n\n    try {\n      console.log('Saving invoice edit for ID:', editingInvoice);\n      console.log('Edit form data:', editForm);\n      \n      // Calculate totals\n      const subtotal = editForm.items.reduce((sum, item) => sum + (item.total_price || 0), 0);\n      let discountAmount = 0;\n      \n      if (editForm.discount_type === 'percentage') {\n        discountAmount = (subtotal * parseFloat(editForm.discount_value || 0)) / 100;\n      } else {\n        discountAmount = parseFloat(editForm.discount_value || 0);\n      }\n      \n      const totalAfterDiscount = subtotal - discountAmount;\n\n      const updatedInvoice = {\n        ...editForm,\n        subtotal: subtotal,\n        discount: discountAmount,\n        total_after_discount: totalAfterDiscount,\n        total_amount: totalAfterDiscount\n      };\n\n      console.log('Sending update to backend:', updatedInvoice);\n      \n      const response = await axios.put(`${API}/invoices/${editingInvoice}`, updatedInvoice);\n      console.log('Update response:', response.data);\n      \n      console.log('Fetching invoices after update...');\n      await fetchInvoices();\n      \n      cancelEdit();\n      alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error updating invoice:', error);\n      console.error('Error response:', error.response?.data);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ§ØªÙˆØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const updateInvoiceStatus = async (invoiceId, newStatus) => {\n    try {\n      await axios.put(`${API}/invoices/${invoiceId}/status`, \n        { status: newStatus }, {\n        headers: { 'Content-Type': 'application/json' }\n      });\n      fetchInvoices();\n      alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©');\n    } catch (error) {\n      console.error('Error updating invoice status:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©');\n    }\n  };\n\n  const printInvoice = (invoice) => {\n    const printContent = `\n      <!DOCTYPE html>\n      <html dir=\"rtl\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <style>\n          body {\n            font-family: Arial, sans-serif;\n            margin: 0;\n            padding: 20px;\n            direction: rtl;\n            font-size: 15px;\n          }\n          .header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            border-bottom: 3px solid #000;\n            padding-bottom: 10px;\n            margin-bottom: 20px;\n          }\n          .company-info {\n            text-align: right;\n          }\n          .company-name {\n            font-size: 32px;\n            font-weight: bold;\n            color: #000;\n            margin: 0;\n          }\n          .company-subtitle {\n            font-size: 20px;\n            margin: 5px 0;\n            color: #666;\n          }\n          .company-details {\n            font-size: 16px;\n            margin: 2px 0;\n            color: #333;\n          }\n          .logo-section {\n            text-align: center;\n            flex: 1;\n          }\n          .invoice-title {\n            font-size: 22px;\n            font-weight: bold;\n            background-color: #ff4444;\n            color: white;\n            padding: 8px 20px;\n            border-radius: 5px;\n            display: inline-block;\n            margin-bottom: 10px;\n          }\n          .invoice-number {\n            font-size: 20px;\n            font-weight: bold;\n            color: #ff4444;\n          }\n          .customer-info {\n            display: flex;\n            justify-content: space-between;\n            margin: 20px 0;\n          }\n          .customer-details {\n            text-align: right;\n          }\n          .date-info {\n            text-align: left;\n          }\n          .products-table {\n            width: 100%;\n            border-collapse: collapse;\n            border: 2px solid #000;\n            margin: 20px 0;\n          }\n          .products-table th,\n          .products-table td {\n            border: 1px solid #000;\n            padding: 8px;\n            text-align: center;\n          }\n          .products-table th {\n            background-color: #f0f0f0;\n            font-weight: bold;\n          }\n          .footer {\n            margin-top: 30px;\n            border-top: 1px solid #ccc;\n            padding-top: 15px;\n            display: flex;\n            justify-content: space-between;\n            font-size: 13px;\n            color: #666;\n          }\n          .total-section {\n            text-align: left;\n            margin-top: 10px;\n          }\n          .total-amount {\n            font-size: 20px;\n            font-weight: bold;\n            border: 2px solid #000;\n            padding: 10px;\n            display: inline-block;\n            background-color: #f9f9f9;\n          }\n          @media print {\n            body { margin: 0; padding: 10px; }\n          }\n        </style>\n      </head>\n      <body>\n        <!-- Header Section -->\n        <div class=\"header\">\n          <div class=\"company-info\">\n            <h1 class=\"company-name\">Ø´Ø±ÙƒØ© Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„</h1>\n            <p class=\"company-subtitle\">ØªØµÙ†ÙŠØ¹ Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£ÙˆÙŠÙ„ Ø³ÙŠÙ„</p>\n            <p class=\"company-details\">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø·Ø§Ø± Ø­ØªÙ‰ Ù¥Ù Ù Ù…Ù„</p>\n            <p class=\"company-details\">Ù‡ÙŠØ¯Ø±ÙˆÙ„ÙŠÙƒ - Ù†ÙŠÙˆÙ…Ø§ØªÙŠÙƒ</p>\n          </div>\n          \n          <div class=\"logo-section\">\n            <img src=\"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg\" \n                 alt=\"Master Seal Logo\" \n                 style=\"max-width: 120px; max-height: 80px; margin-bottom: 10px;\">\n            <div class=\"invoice-title\">${invoice.invoice_title || 'Ø¹Ø±Ø¶ Ø³Ø¹Ø±'}</div>\n            <div class=\"invoice-number\">${invoice.invoice_number}</div>\n          </div>\n        </div>\n\n        <!-- Customer and Date Info -->\n        <div class=\"customer-info\">\n          <div class=\"customer-details\">\n            <p><strong>Ø§Ù„Ø³Ø§Ø¯Ø©:</strong> ${invoice.customer_name}</p>\n            <p><strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> ${invoice.customer_address || '........................'}</p>\n          </div>\n          <div class=\"date-info\">\n            <p><strong>ØªØ­Ø±ÙŠØ± ÙÙŠ:</strong> ${new Date(invoice.date).toLocaleDateString('ar-EG')}</p>\n            <p><strong>Date:</strong> ${new Date(invoice.date).toLocaleDateString('en-GB')}</p>\n          </div>\n        </div>\n\n        <!-- Products Table -->\n        <table class=\"products-table\">\n          <thead>\n            <tr>\n              <th style=\"width: 60px;\">Ø§Ù„Ù…Ø³Ù„Ø³Ù„<br>Item</th>\n              <th style=\"width: 80px;\">Ø§Ù„ÙƒÙ…ÙŠØ©<br>QTY</th>\n              <th style=\"width: 200px;\">Description<br>Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª</th>\n              <th style=\"width: 100px;\">Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©<br>Unit Price</th>\n              <th style=\"width: 100px;\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ<br>Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${invoice.items.map((item, index) => `\n              <tr>\n                <td>${index + 1}</td>\n                <td>${item.quantity}</td>\n                <td style=\"text-align: right;\">\n                  ${item.local_product_details ? \n                    `${item.local_product_details.product_size} - ${item.local_product_details.product_type}` : \n                    `${item.seal_type} - ${item.material_type}<br>\n                    <small>${item.inner_diameter} Ã— ${item.outer_diameter} Ã— ${item.height} Ù…Ù…${item.wall_height ? ` (Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø©: ${item.wall_height} Ù…Ù…)` : \"\"}</small>`\n                  }\n                </td>\n                <td>Ø¬.Ù… ${item.unit_price.toFixed(2)}</td>\n                <td>Ø¬.Ù… ${item.total_price.toFixed(2)}</td>\n              </tr>\n            `).join('')}\n            <!-- Empty rows for additional items -->\n            ${Array.from({length: Math.max(0, 8 - invoice.items.length)}, (_, i) => `\n              <tr style=\"height: 40px;\">\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n              </tr>\n            `).join('')}\n          </tbody>\n        </table>\n\n        <!-- Total Section -->\n        <div class=\"total-section\">\n          <div style=\"text-align: left; margin-bottom: 10px;\">\n            ${invoice.subtotal ? `\n              <div style=\"margin-bottom: 5px;\">\n                <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ: Ø¬.Ù… ${invoice.subtotal.toFixed(2)}</span>\n              </div>\n            ` : ''}\n            ${invoice.discount && invoice.discount > 0 ? `\n              <div style=\"margin-bottom: 5px; color: #d32f2f;\">\n                <span>Ø§Ù„Ø®ØµÙ…: - Ø¬.Ù… ${invoice.discount.toFixed(2)}</span>\n                ${invoice.discount_type === 'percentage' && invoice.discount_value ? \n                  ` <small>(${invoice.discount_value}%)</small>` : ''}\n              </div>\n              <hr style=\"margin: 5px 0; border: 1px solid #000;\">\n            ` : ''}\n          </div>\n          <div class=\"total-amount\">\n            Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: Ø¬.Ù… ${(invoice.total_after_discount || invoice.total_amount).toFixed(2)}\n          </div>\n        </div>\n\n        <!-- Additional Info -->\n        <div style=\"margin-top: 20px; text-align: center; font-size: 13px;\">\n          <p><strong>Ù…Ù„Ø­ÙˆØ¸Ø©:</strong> ÙÙ‚Ø· ÙˆÙ‚Ø¯Ø±Ù‡</p>\n          <div style=\"height: 30px; border-bottom: 1px solid #000; margin: 10px 40px;\"></div>\n        </div>\n\n        <!-- Footer -->\n        <div class=\"footer\">\n          <div>\n            <p><strong>Ø§Ù„ØªÙˆÙ‚ÙŠØ¹:</strong></p>\n            <p>Ù…ÙˆØ¨Ø§ÙŠÙ„: Ù Ù¡Ù Ù¢Ù Ù¦Ù£Ù Ù¦Ù§Ù§ - Ù Ù¡Ù Ù¦Ù¢Ù£Ù©Ù Ù¨Ù§Ù </p>\n            <p>ØªÙ„ÙŠÙÙˆÙ†: Ù Ù¡Ù Ù¢Ù Ù¦Ù£Ù Ù¦Ù§Ù§</p>\n          </div>\n          <div style=\"text-align: left;\">\n            <p><strong>Ø§Ù„Ù…Ø³ØªÙ„Ù…:</strong></p>\n            <p>Ø§Ù„Ø­Ø±ÙÙŠÙŠÙ† - Ø§Ù„Ø³Ù„Ø§Ù… - Ø£Ù…Ø§Ù… Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª</p>\n            <p>Ù…ÙˆØ¨Ø§ÙŠÙ„: Ù Ù¡Ù Ù¢Ù Ù¦Ù£Ù Ù¦Ù§Ù§ - Ù Ù¡Ù Ù¦Ù¢Ù£Ù©Ù Ù¨Ù§Ù </p>\n          </div>\n        </div>\n\n        <!-- Note -->\n        <div style=\"text-align: center; margin-top: 20px; font-size: 12px; color: #666;\">\n          <p>ÙŠÙ‚Ø± Ø§Ù„Ù…Ø´ØªØ±ÙŠ Ø¨Ø£Ù†Ù‡ Ù‚Ø§Ù… Ø¨Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø¨Ø¶Ø§Ø¹Ø© ÙˆÙ‚Ø¨ÙˆÙ„Ù‡Ø§</p>\n        </div>\n      </body>\n      </html>\n    `;\n    \n    const printWindow = window.open('', '_blank');\n    printWindow.document.write(printContent);\n    printWindow.document.close();\n    printWindow.print();\n  };\n\n  const clearAllInvoices = async () => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ±ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) return;\n    \n    try {\n      await axios.delete(`${API}/invoices/clear-all`);\n      fetchInvoices();\n      alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ±');\n    } catch (error) {\n      console.error('Error clearing invoices:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');\n    }\n  };\n\n  const filteredInvoices = invoices.filter(invoice => {\n    const matchesStatus = filterStatus === '' || invoice.status === filterStatus;\n    const matchesSearch = searchTerm === '' || \n      invoice.invoice_number.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      invoice.customer_name.toLowerCase().includes(searchTerm.toLowerCase());\n    return matchesStatus && matchesSearch;\n  });\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-blue-600 mb-4\">Ø§Ù„ÙÙˆØ§ØªÙŠØ±</h2>\n        \n        <div className=\"flex space-x-4 space-x-reverse mb-4\">\n          <button \n            onClick={clearAllInvoices}\n            className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n            Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n          </button>\n          <button \n            onClick={fetchInvoices}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n            Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => window.print()}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n            Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n          <select className=\"border border-gray-300 rounded px-3 py-2\">\n            <option>ÙŠÙˆÙ…ÙŠ</option>\n            <option>Ø£Ø³Ø¨ÙˆØ¹ÙŠ</option>\n            <option>Ø´Ù‡Ø±ÙŠ</option>\n            <option>Ø³Ù†ÙˆÙŠ</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Filters */}\n      <div className=\"bg-white p-4 rounded-lg shadow-md mb-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø¨Ø­Ø«</label>\n            <input\n              type=\"text\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              placeholder=\"Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø£Ùˆ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„\"\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©</label>\n            <select\n              value={filterStatus}\n              onChange={(e) => setFilterStatus(e.target.value)}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"\">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª</option>\n              <option value=\"Ù…Ø¯ÙÙˆØ¹Ø©\">Ù…Ø¯ÙÙˆØ¹Ø©</option>\n              <option value=\"ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©\">ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©</option>\n              <option value=\"Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹\">Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹</option>\n              <option value=\"Ø§Ù†ØªØ¸Ø§Ø±\">Ø§Ù†ØªØ¸Ø§Ø±</option>\n              <option value=\"ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°\">ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°</option>\n            </select>\n          </div>\n          \n          <div className=\"flex items-end\">\n            <button\n              onClick={() => { setSearchTerm(''); setFilterStatus(''); }}\n              className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n            >\n              Ù…Ø³Ø­ Ø§Ù„ÙÙ„Ø§ØªØ±\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\n        <div className=\"bg-blue-50 p-4 rounded-lg text-center\">\n          <h3 className=\"font-semibold text-blue-800\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙÙˆØ§ØªÙŠØ±</h3>\n          <p className=\"text-2xl font-bold text-blue-600\">{invoices.length}</p>\n        </div>\n        \n        <div className=\"bg-green-50 p-4 rounded-lg text-center\">\n          <h3 className=\"font-semibold text-green-800\">Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø©</h3>\n          <p className=\"text-2xl font-bold text-green-600\">\n            {invoices.filter(inv => inv.status === 'Ù…Ø¯ÙÙˆØ¹Ø©').length}\n          </p>\n        </div>\n        \n        <div className=\"bg-red-50 p-4 rounded-lg text-center\">\n          <h3 className=\"font-semibold text-red-800\">ØºÙŠØ± Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø©</h3>\n          <p className=\"text-2xl font-bold text-red-600\">\n            {invoices.filter(inv => inv.status === 'ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©').length}\n          </p>\n        </div>\n        \n        <div className=\"bg-yellow-50 p-4 rounded-lg text-center\">\n          <h3 className=\"font-semibold text-yellow-800\">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</h3>\n          <p className=\"text-2xl font-bold text-yellow-600\">\n            Ø¬.Ù… {invoices.reduce((sum, inv) => sum + (inv.total_amount || 0), 0).toFixed(2)}\n          </p>\n        </div>\n      </div>\n\n      {/* Invoices Table */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ±</h3>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¹Ù…ÙŠÙ„</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                <th className=\"border border-gray-300 p-2\">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø®ØµÙ…</th>  \n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø§Ù„Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredInvoices.map((invoice) => (\n                <tr key={invoice.id}>\n                  <td className=\"border border-gray-300 p-2 font-semibold\">\n                    {invoice.invoice_number}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">{invoice.customer_name}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    {new Date(invoice.date).toLocaleDateString('ar-EG')}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">{invoice.payment_method}</td>\n                  <td className=\"border border-gray-300 p-2 font-semibold\">\n                    Ø¬.Ù… {invoice.subtotal?.toFixed(2) || (invoice.total_amount?.toFixed(2)) || '0.00'}\n                  </td>\n                  <td className=\"border border-gray-300 p-2 text-red-600\">\n                    {invoice.discount && invoice.discount > 0 ? (\n                      <div>\n                        <span>Ø¬.Ù… {invoice.discount.toFixed(2)}</span>\n                        {invoice.discount_type === 'percentage' && invoice.discount_value && (\n                          <small className=\"block text-xs\">(%{invoice.discount_value})</small>\n                        )}\n                      </div>\n                    ) : (\n                      <span className=\"text-gray-400\">Ù„Ø§ ÙŠÙˆØ¬Ø¯</span>\n                    )}\n                  </td>\n                  <td className=\"border border-gray-300 p-2 font-semibold text-green-600\">\n                    Ø¬.Ù… {(invoice.total_after_discount || invoice.total_amount)?.toFixed(2) || '0.00'}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className={`px-2 py-1 rounded text-sm cursor-pointer ${\n                      invoice.status === 'Ù…Ø¯ÙÙˆØ¹Ø©' ? 'bg-green-100 text-green-800' :\n                      invoice.status === 'ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©' ? 'bg-red-100 text-red-800' :\n                      invoice.status === 'Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹' ? 'bg-yellow-100 text-yellow-800' :\n                      invoice.status === 'Ø§Ù†ØªØ¸Ø§Ø±' ? 'bg-blue-100 text-blue-800' :\n                      invoice.status === 'ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°' ? 'bg-green-100 text-green-800' :\n                      invoice.status === 'ØªÙ… Ø§Ù„ØªØµÙ†ÙŠØ¹' ? 'bg-purple-100 text-purple-800' :\n                      'bg-gray-100 text-gray-800'\n                    }`}>\n                      {invoice.status}\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex flex-wrap gap-1\">\n                      <button\n                        onClick={() => printInvoice(invoice)}\n                        className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600\"\n                      >\n                        Ø·Ø¨Ø§Ø¹Ø©\n                      </button>\n                      <button\n                        onClick={() => startEditInvoice(invoice)}\n                        className=\"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600\"\n                      >\n                        ØªØ¹Ø¯ÙŠÙ„\n                      </button>\n                      <button\n                        onClick={() => changePaymentMethod(invoice.id)}\n                        className=\"bg-purple-500 text-white px-2 py-1 rounded text-sm hover:bg-purple-600\"\n                        title=\"ØªØºÙŠÙŠØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹\"\n                      >\n                        ðŸ’³ ØªØ­ÙˆÙŠÙ„\n                      </button>\n                      <button\n                        onClick={() => cancelInvoice(invoice.id)}\n                        className=\"bg-red-600 text-white px-2 py-1 rounded text-sm hover:bg-red-700\"\n                        title=\"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙˆØ¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ù…ÙˆØ§Ø¯\"\n                      >\n                        âŒ Ø¥Ù„ØºØ§Ø¡\n                      </button>\n                      <button\n                        onClick={() => deleteInvoice(invoice.id)}\n                        className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                      >\n                        Ø­Ø°Ù\n                      </button>\n                      {invoice.status === 'Ø§Ù†ØªØ¸Ø§Ø±' && (\n                        <button\n                          onClick={() => updateInvoiceStatus(invoice.id, 'ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°')}\n                          className=\"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600\"\n                        >\n                          ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°\n                        </button>\n                      )}\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n          \n          {filteredInvoices.length === 0 && (\n            <div className=\"text-center py-8 text-gray-500\">\n              Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙˆØ§ØªÙŠØ± ØªØ·Ø§Ø¨Ù‚ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¨Ø­Ø«\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Edit Invoice Modal */}\n      {editingInvoice && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white p-6 rounded-lg shadow-lg w-full max-w-4xl max-h-screen overflow-y-auto\" dir=\"rtl\">\n            <h3 className=\"text-xl font-semibold mb-4\">ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø©</h3>\n            \n            <div className=\"grid grid-cols-2 gap-4 mb-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø©</label>\n                <input\n                  type=\"text\"\n                  value={editForm.invoice_title}\n                  onChange={(e) => setEditForm({...editForm, invoice_title: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ§ØªÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù</label>\n                <input\n                  type=\"text\"\n                  value={editForm.supervisor_name}\n                  onChange={(e) => setEditForm({...editForm, supervisor_name: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</label>\n                <input\n                  type=\"text\"\n                  value={editForm.customer_name}\n                  onChange={(e) => setEditForm({...editForm, customer_name: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„\"\n                  required\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</label>\n                <select\n                  value={editForm.payment_method}\n                  onChange={(e) => setEditForm({...editForm, payment_method: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                >\n                  <option value=\"Ù†Ù‚Ø¯ÙŠ\">Ù†Ù‚Ø¯ÙŠ</option>\n                  <option value=\"ÙÙˆØ¯Ø§ÙÙˆÙ† 010\">ÙÙˆØ¯Ø§ÙÙˆÙ† 010</option>\n                  <option value=\"ÙƒØ§Ø´ 0100\">ÙƒØ§Ø´ 0100</option>\n                  <option value=\"Ø¢Ø¬Ù„\">Ø¢Ø¬Ù„</option>\n                  <option value=\"Ø§Ù†Ø³ØªØ§ Ø¨Ø§ÙŠ\">Ø§Ù†Ø³ØªØ§ Ø¨Ø§ÙŠ</option>\n                  <option value=\"Yad_Elsawy\">Yad Elsawy</option>\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø®ØµÙ…</label>\n                <select\n                  value={editForm.discount_type}\n                  onChange={(e) => setEditForm({...editForm, discount_type: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                >\n                  <option value=\"amount\">Ù…Ø¨Ù„Øº Ø«Ø§Ø¨Øª</option>\n                  <option value=\"percentage\">Ù†Ø³Ø¨Ø© Ù…Ø¦ÙˆÙŠØ©</option>\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù‚ÙŠÙ…Ø© Ø§Ù„Ø®ØµÙ…</label>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  value={editForm.discount_value}\n                  onChange={(e) => setEditForm({...editForm, discount_value: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder={editForm.discount_type === 'percentage' ? '0-100' : '0.00'}\n                />\n              </div>\n            </div>\n            \n            <div className=\"mb-4\">\n              <label className=\"block text-sm font-medium mb-1\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>\n              <textarea\n                value={editForm.notes}\n                onChange={(e) => setEditForm({...editForm, notes: e.target.value})}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n                rows=\"3\"\n                placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n              />\n            </div>\n            \n            {/* Items Display with Edit capability */}\n            <div className=\"mb-4\">\n              <h4 className=\"text-lg font-medium mb-2\">Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙØ§ØªÙˆØ±Ø©</h4>\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full border-collapse border border-gray-300\">\n                  <thead>\n                    <tr className=\"bg-gray-100\">\n                      <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ù†ØªØ¬</th>\n                      <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙƒÙ…ÙŠØ©</th>\n                      <th className=\"border border-gray-300 p-2\">Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©</th>\n                      <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>\n                      <th className=\"border border-gray-300 p-2\">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {editForm.items.map((item, index) => (\n                      <tr key={index}>\n                        <td className=\"border border-gray-300 p-2\">\n                          {item.product_type === 'local' || item.local_product_details ? (\n                            <input\n                              type=\"text\"\n                              value={item.product_name || `${item.local_product_details?.product_size || ''} - ${item.local_product_details?.product_type || ''}`}\n                              onChange={(e) => {\n                                const newItems = [...editForm.items];\n                                newItems[index].product_name = e.target.value;\n                                setEditForm({...editForm, items: newItems});\n                              }}\n                              className=\"w-full p-1 border border-gray-300 rounded\"\n                              placeholder=\"Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ù†ØªØ¬ - Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬\"\n                            />\n                          ) : (\n                            <div className=\"space-y-1\">\n                              {/* Seal Type */}\n                              <div className=\"flex items-center space-x-2 space-x-reverse\">\n                                <label className=\"text-xs font-medium w-16\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„:</label>\n                                <select\n                                  value={item.seal_type || ''}\n                                  onChange={(e) => {\n                                    const newItems = [...editForm.items];\n                                    newItems[index].seal_type = e.target.value;\n                                    setEditForm({...editForm, items: newItems});\n                                  }}\n                                  className=\"flex-1 p-1 text-xs border border-gray-300 rounded\"\n                                >\n                                  <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„Ù†ÙˆØ¹</option>\n                                  <option value=\"RSL\">RSL</option>\n                                  <option value=\"RS\">RS</option>\n                                  <option value=\"RSS\">RSS</option>\n                                  <option value=\"RSE\">RSE</option>\n                                  <option value=\"B17\">B17</option>\n                                  <option value=\"B3\">B3</option>\n                                  <option value=\"B14\">B14</option>\n                                  <option value=\"B1\">B1</option>\n                                  <option value=\"R15\">R15</option>\n                                  <option value=\"R17\">R17</option>\n                                  <option value=\"W1\">W1</option>\n                                  <option value=\"W4\">W4</option>\n                                  <option value=\"W5\">W5</option>\n                                  <option value=\"W11\">W11</option>\n                                  <option value=\"WBT\">WBT</option>\n                                  <option value=\"XR\">XR</option>\n                                  <option value=\"CH\">CH</option>\n                                  <option value=\"VR\">VR</option>\n                                </select>\n                              </div>\n                              \n                              {/* Material Type */}\n                              <div className=\"flex items-center space-x-2 space-x-reverse\">\n                                <label className=\"text-xs font-medium w-16\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©:</label>\n                                <select\n                                  value={item.material_type || ''}\n                                  onChange={(e) => {\n                                    const newItems = [...editForm.items];\n                                    newItems[index].material_type = e.target.value;\n                                    setEditForm({...editForm, items: newItems});\n                                  }}\n                                  className=\"flex-1 p-1 text-xs border border-gray-300 rounded\"\n                                >\n                                  <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„Ø®Ø§Ù…Ø©</option>\n                                  <option value=\"NBR\">NBR</option>\n                                  <option value=\"BUR\">BUR</option>\n                                  <option value=\"BT\">BT</option>\n                                  <option value=\"VT\">VT</option>\n                                  <option value=\"BOOM\">BOOM</option>\n                                </select>\n                              </div>\n                              \n                              {/* Dimensions */}\n                              <div className=\"flex items-center space-x-1 space-x-reverse\">\n                                <input\n                                  type=\"number\"\n                                  step=\"0.1\"\n                                  value={item.inner_diameter || ''}\n                                  onChange={(e) => {\n                                    const newItems = [...editForm.items];\n                                    newItems[index].inner_diameter = parseFloat(e.target.value) || 0;\n                                    setEditForm({...editForm, items: newItems});\n                                  }}\n                                  placeholder=\"Ø¯Ø§Ø®Ù„ÙŠ\"\n                                  className=\"w-12 p-1 text-xs border border-gray-300 rounded\"\n                                />\n                                <span className=\"text-xs\">Ã—</span>\n                                <input\n                                  type=\"number\"\n                                  step=\"0.1\"\n                                  value={item.outer_diameter || ''}\n                                  onChange={(e) => {\n                                    const newItems = [...editForm.items];\n                                    newItems[index].outer_diameter = parseFloat(e.target.value) || 0;\n                                    setEditForm({...editForm, items: newItems});\n                                  }}\n                                  placeholder=\"Ø®Ø§Ø±Ø¬ÙŠ\"\n                                  className=\"w-12 p-1 text-xs border border-gray-300 rounded\"\n                                />\n                                <span className=\"text-xs\">Ã—</span>\n                                <input\n                                  type=\"number\"\n                                  step=\"0.1\"\n                                  value={item.height || ''}\n                                  onChange={(e) => {\n                                    const newItems = [...editForm.items];\n                                    newItems[index].height = parseFloat(e.target.value) || 0;\n                                    setEditForm({...editForm, items: newItems});\n                                  }}\n                                  placeholder=\"Ø§Ø±ØªÙØ§Ø¹\"\n                                  className=\"w-12 p-1 text-xs border border-gray-300 rounded\"\n                                />\n                              </div>\n                            </div>\n                          )}\n                        </td>\n                        <td className=\"border border-gray-300 p-2\">\n                          <input\n                            type=\"number\"\n                            value={item.quantity}\n                            onChange={(e) => {\n                              const newItems = [...editForm.items];\n                              newItems[index].quantity = parseInt(e.target.value) || 0;\n                              newItems[index].total_price = newItems[index].unit_price * newItems[index].quantity;\n                              setEditForm({...editForm, items: newItems});\n                            }}\n                            className=\"w-full p-1 border border-gray-300 rounded\"\n                          />\n                        </td>\n                        <td className=\"border border-gray-300 p-2\">\n                          <input\n                            type=\"number\"\n                            step=\"0.01\"\n                            value={item.unit_price}\n                            onChange={(e) => {\n                              const newItems = [...editForm.items];\n                              newItems[index].unit_price = parseFloat(e.target.value) || 0;\n                              newItems[index].total_price = newItems[index].unit_price * newItems[index].quantity;\n                              setEditForm({...editForm, items: newItems});\n                            }}\n                            className=\"w-full p-1 border border-gray-300 rounded\"\n                          />\n                        </td>\n                        <td className=\"border border-gray-300 p-2 font-semibold\">\n                          Ø¬.Ù… {(item.total_price || 0).toFixed(2)}\n                        </td>\n                        <td className=\"border border-gray-300 p-2\">\n                          <button\n                            onClick={() => {\n                              const newItems = editForm.items.filter((_, i) => i !== index);\n                              setEditForm({...editForm, items: newItems});\n                            }}\n                            className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                          >\n                            Ø­Ø°Ù\n                          </button>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n              \n              {/* Add Product Button */}\n              <button\n                onClick={() => {\n                  // Add a new empty item for editing\n                  const newItem = {\n                    seal_type: '',\n                    material_type: '',\n                    inner_diameter: '',\n                    outer_diameter: '',\n                    height: '',\n                    quantity: 1,\n                    unit_price: 0,\n                    total_price: 0\n                  };\n                  setEditForm({\n                    ...editForm,\n                    items: [...editForm.items, newItem]\n                  });\n                }}\n                className=\"mt-2 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n              >\n                Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯\n              </button>\n            </div>\n            \n            {/* Action Buttons */}\n            <div className=\"flex justify-end space-x-4 space-x-reverse\">\n              <button\n                onClick={cancelEdit}\n                className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n              >\n                Ø¥Ù„ØºØ§Ø¡\n              </button>\n              <button\n                onClick={saveInvoiceEdit}\n                className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n              >\n                Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Deleted Invoices Component\nconst DeletedInvoices = () => {\n  const [deletedInvoices, setDeletedInvoices] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const {user} = useAuth();\n\n  useEffect(() => {\n    fetchDeletedInvoices();\n  }, []);\n\n  const fetchDeletedInvoices = async () => {\n    try {\n      const response = await axios.get(`${API}/deleted-invoices`);\n      setDeletedInvoices(response.data || []);\n    } catch (error) {\n      console.error('Error fetching deleted invoices:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©');\n    }\n  };\n\n  const handleRestore = async (invoiceId, invoiceNumber) => {\n    if (!confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø© ${invoiceNumber}ØŸ\\n\\nÙ…Ù„Ø§Ø­Ø¸Ø©: Ø³ÙŠØªÙ… Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙÙ‚Ø·ØŒ Ù„Ù† ÙŠØªÙ… Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø£Ùˆ Ø§Ù„Ø®Ø²ÙŠÙ†Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹`)) {\n      return;\n    }\n\n    try {\n      const response = await axios.post(`${API}/deleted-invoices/${invoiceId}/restore`, null, {\n        params: { username: user?.username }\n      });\n      alert(response.data.message + '\\n\\n' + (response.data.warning || ''));\n      fetchDeletedInvoices();\n    } catch (error) {\n      console.error('Error restoring invoice:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const handlePermanentDelete = async (invoiceId, invoiceNumber) => {\n    if (!confirm(`âš ï¸ ØªØ­Ø°ÙŠØ±: Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø© ${invoiceNumber} Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ØŸ\\n\\nÙ‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!`)) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/deleted-invoices/${invoiceId}`);\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹');\n      fetchDeletedInvoices();\n    } catch (error) {\n      console.error('Error deleting invoice:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const filteredInvoices = deletedInvoices.filter(invoice => {\n    const searchLower = searchTerm.toLowerCase();\n    return (\n      invoice.invoice_number?.toLowerCase().includes(searchLower) ||\n      invoice.customer_name?.toLowerCase().includes(searchLower) ||\n      invoice.payment_method?.toLowerCase().includes(searchLower)\n    );\n  });\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-3xl font-bold\">Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©</h1>\n        <button\n          onClick={fetchDeletedInvoices}\n          className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n        >\n          ðŸ”„ ØªØ­Ø¯ÙŠØ«\n        </button>\n      </div>\n\n      {/* Search */}\n      <div className=\"mb-4\">\n        <input\n          type=\"text\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          placeholder=\"Ø§Ù„Ø¨Ø­Ø« (Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©ØŒ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ØŒ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹...)\"\n          className=\"w-full p-2 border border-gray-300 rounded\"\n        />\n      </div>\n\n      {/* Invoices Table */}\n      <div className=\"bg-white rounded-lg shadow-md overflow-x-auto\">\n        <table className=\"min-w-full border-collapse\">\n          <thead>\n            <tr className=\"bg-gray-100\">\n              <th className=\"border border-gray-300 p-2\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>\n              <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n              <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¹Ù…ÙŠÙ„</th>\n              <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>\n              <th className=\"border border-gray-300 p-2\">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</th>\n              <th className=\"border border-gray-300 p-2\">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø°Ù</th>\n              <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n            </tr>\n          </thead>\n          <tbody>\n            {filteredInvoices.length === 0 ? (\n              <tr>\n                <td colSpan=\"7\" className=\"border border-gray-300 p-4 text-center text-gray-500\">\n                  Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙˆØ§ØªÙŠØ± Ù…Ø­Ø°ÙˆÙØ©\n                </td>\n              </tr>\n            ) : (\n              filteredInvoices.map((invoice) => (\n                <tr key={invoice.id} className=\"hover:bg-gray-50\">\n                  <td className=\"border border-gray-300 p-2 font-medium\">\n                    {invoice.invoice_number}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    {new Date(invoice.created_at).toLocaleDateString('ar-EG')}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">{invoice.customer_name}</td>\n                  <td className=\"border border-gray-300 p-2 font-bold\">\n                    {invoice.total_amount?.toFixed(2)} Ø¬.Ù…\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">{invoice.payment_method}</td>\n                  <td className=\"border border-gray-300 p-2 text-sm text-gray-600\">\n                    {new Date(invoice.deleted_at).toLocaleDateString('ar-EG', {\n                      year: 'numeric',\n                      month: 'short',\n                      day: 'numeric',\n                      hour: '2-digit',\n                      minute: '2-digit'\n                    })}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex space-x-2 space-x-reverse justify-center\">\n                      <button\n                        onClick={() => handleRestore(invoice.id, invoice.invoice_number)}\n                        className=\"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600\"\n                      >\n                        â†©ï¸ Ø§Ø³ØªØ¹Ø§Ø¯Ø©\n                      </button>\n                      <button\n                        onClick={() => handlePermanentDelete(invoice.id, invoice.invoice_number)}\n                        className=\"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700\"\n                      >\n                        ðŸ—‘ï¸ Ø­Ø°Ù Ù†Ù‡Ø§Ø¦ÙŠ\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))\n            )}\n          </tbody>\n        </table>\n      </div>\n\n      {/* Summary */}\n      <div className=\"mt-4 p-4 bg-blue-50 rounded-lg\">\n        <p className=\"text-sm text-gray-700\">\n          <strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø­Ø°ÙˆÙØ©:</strong> {filteredInvoices.length}\n        </p>\n        <p className=\"text-xs text-gray-600 mt-2\">\n          ðŸ’¡ <strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø³ØªØ±Ø¬Ø¹Ù‡Ø§ Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù†Ø´Ø·Ø©ØŒ Ù„ÙƒÙ† Ù„Ù† ÙŠØªÙ… Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø£Ùˆ Ø§Ù„Ø®Ø²ÙŠÙ†Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.\n        </p>\n      </div>\n    </div>\n  );\n};\n\n// Customer Statement Component (ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨)\nconst CustomerStatement = () => {\n  const [customers, setCustomers] = useState([]);\n  const [selectedCustomer, setSelectedCustomer] = useState('');\n  const [statement, setStatement] = useState(null);\n  const [fromDate, setFromDate] = useState('');\n  const [toDate, setToDate] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    fetchCustomers();\n  }, []);\n\n  const fetchCustomers = async () => {\n    try {\n      const response = await axios.get(`${API}/customers`);\n      // Sort customers alphabetically by name\n      const sortedCustomers = (response.data || []).sort((a, b) => \n        a.name.localeCompare(b.name, 'ar')\n      );\n      setCustomers(sortedCustomers);\n    } catch (error) {\n      console.error('Error fetching customers:', error);\n    }\n  };\n\n  const fetchStatement = async () => {\n    if (!selectedCustomer) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø¹Ù…ÙŠÙ„');\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const params = {};\n      if (fromDate) params.from_date = fromDate;\n      if (toDate) params.to_date = toDate;\n\n      const response = await axios.get(`${API}/customer-statement/${selectedCustomer}`, { params });\n      setStatement(response.data);\n    } catch (error) {\n      console.error('Error fetching statement:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨: ' + (error.response?.data?.detail || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const printStatement = () => {\n    if (!statement) return;\n\n    const printWindow = window.open('', '', 'width=800,height=600');\n    const customer = statement.customer;\n    const transactions = statement.transactions || [];\n    const summary = statement.summary || {};\n\n    printWindow.document.write(`\n      <!DOCTYPE html>\n      <html dir=\"rtl\">\n      <head>\n        <title>ÙƒØ´Ù Ø­Ø³Ø§Ø¨ - ${customer.name}</title>\n        <style>\n          body {\n            font-family: Arial, sans-serif;\n            padding: 20px;\n            direction: rtl;\n          }\n          .header {\n            text-align: center;\n            margin-bottom: 30px;\n            border-bottom: 2px solid #333;\n            padding-bottom: 10px;\n          }\n          .info-section {\n            margin-bottom: 20px;\n            display: flex;\n            justify-content: space-between;\n          }\n          .info-box {\n            border: 1px solid #ddd;\n            padding: 10px;\n            border-radius: 5px;\n            width: 45%;\n          }\n          table {\n            width: 100%;\n            border-collapse: collapse;\n            margin-bottom: 20px;\n          }\n          th, td {\n            border: 1px solid #ddd;\n            padding: 8px;\n            text-align: center;\n          }\n          th {\n            background-color: #f2f2f2;\n            font-weight: bold;\n          }\n          .summary {\n            margin-top: 20px;\n            border-top: 2px solid #333;\n            padding-top: 10px;\n          }\n          .summary-row {\n            display: flex;\n            justify-content: space-between;\n            padding: 5px 0;\n            font-size: 14px;\n          }\n          .final-balance {\n            font-size: 18px;\n            font-weight: bold;\n            color: ${summary.final_balance >= 0 ? 'green' : 'red'};\n          }\n          @media print {\n            body { padding: 10px; }\n          }\n        </style>\n      </head>\n      <body>\n        <div class=\"header\">\n          <h1>ÙƒØ´Ù Ø­Ø³Ø§Ø¨ Ø¹Ø§Ù…</h1>\n          <p>Ù…Ø±ØªØ¨ Ø¨ØªÙˆØ§Ø±ÙŠØ® Ø§Ù„Ù‚ÙŠÙˆØ¯</p>\n        </div>\n\n        <div class=\"info-section\">\n          <div class=\"info-box\">\n            <p><strong>Ø§Ø³Ù… Ø§Ù„Ø­Ø³Ø§Ø¨:</strong> ${customer.name}</p>\n            <p><strong>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</strong> ${customer.phone || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</p>\n            ${customer.is_also_supplier ? '<p><strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…ÙˆØ±Ø¯ Ø£ÙŠØ¶Ø§Ù‹</p>' : ''}\n          </div>\n          <div class=\"info-box\">\n            <p><strong>Ù…Ù† ØªØ§Ø±ÙŠØ®:</strong> ${statement.period.from_date}</p>\n            <p><strong>Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ®:</strong> ${statement.period.to_date}</p>\n            <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©:</strong> ${new Date().toLocaleDateString('ar-EG')}</p>\n          </div>\n        </div>\n\n        <table>\n          <thead>\n            <tr>\n              <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n              <th>Ù†ÙˆØ¹ Ø§Ù„Ù‚ÙŠØ¯</th>\n              <th>Ø§Ù„Ø¨ÙŠØ§Ù†</th>\n              <th>Ù…Ø¯ÙŠÙ†</th>\n              <th>Ø¯Ø§Ø¦Ù†</th>\n              <th>Ø§Ù„Ø±ØµÙŠØ¯</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${transactions.map(t => `\n              <tr>\n                <td>${new Date(t.date).toLocaleDateString('ar-EG')}</td>\n                <td>${t.type}</td>\n                <td>${t.description}</td>\n                <td>${t.debit > 0 ? t.debit.toFixed(2) : '-'}</td>\n                <td>${t.credit > 0 ? t.credit.toFixed(2) : '-'}</td>\n                <td>${t.balance.toFixed(2)}</td>\n              </tr>\n            `).join('')}\n          </tbody>\n        </table>\n\n        <div class=\"summary\">\n          <div class=\"summary-row\">\n            <span><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø§Ø¦Ù†:</strong></span>\n            <span>${summary.total_credit?.toFixed(2) || '0.00'} Ø¬.Ù…</span>\n          </div>\n          <div class=\"summary-row\">\n            <span><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯ÙŠÙ†:</strong></span>\n            <span>${summary.total_debit?.toFixed(2) || '0.00'} Ø¬.Ù…</span>\n          </div>\n          <div class=\"summary-row final-balance\">\n            <span><strong>Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:</strong></span>\n            <span>${summary.final_balance?.toFixed(2) || '0.00'} Ø¬.Ù…</span>\n          </div>\n        </div>\n\n        <p style=\"margin-top: 30px; text-align: left;\">Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ ÙŠØ¹ØªÙ…Ø¯ØŒØŒØŒ</p>\n      </body>\n      </html>\n    `);\n\n    printWindow.document.close();\n    printWindow.print();\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <h1 className=\"text-3xl font-bold mb-6\">ÙƒØ´Ù Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h1>\n\n      {/* Customer Selection and Filters */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„ *</label>\n            <select\n              value={selectedCustomer}\n              onChange={(e) => setSelectedCustomer(e.target.value)}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"\">-- Ø§Ø®ØªØ± Ø¹Ù…ÙŠÙ„ --</option>\n              {customers.map(customer => (\n                <option key={customer.id} value={customer.id}>\n                  {customer.name}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ù…Ù† ØªØ§Ø±ÙŠØ®</label>\n            <input\n              type=\"date\"\n              value={fromDate}\n              onChange={(e) => setFromDate(e.target.value)}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ®</label>\n            <input\n              type=\"date\"\n              value={toDate}\n              onChange={(e) => setToDate(e.target.value)}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            />\n          </div>\n\n          <div className=\"flex items-end\">\n            <button\n              onClick={fetchStatement}\n              disabled={loading || !selectedCustomer}\n              className={`w-full px-4 py-2 rounded text-white ${\n                loading || !selectedCustomer\n                  ? 'bg-gray-400 cursor-not-allowed'\n                  : 'bg-blue-500 hover:bg-blue-600'\n              }`}\n            >\n              {loading ? 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...' : 'ðŸ“‹ Ø¹Ø±Ø¶ ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨'}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Statement Display */}\n      {statement && (\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\n          {/* Header */}\n          <div className=\"flex justify-between items-center mb-6 pb-4 border-b-2\">\n            <div>\n              <h2 className=\"text-2xl font-bold\">ÙƒØ´Ù Ø­Ø³Ø§Ø¨ Ø¹Ø§Ù…</h2>\n              <p className=\"text-sm text-gray-600\">Ù…Ø±ØªØ¨ Ø¨ØªÙˆØ§Ø±ÙŠØ® Ø§Ù„Ù‚ÙŠÙˆØ¯</p>\n            </div>\n            <button\n              onClick={printStatement}\n              className=\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\"\n            >\n              ðŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©\n            </button>\n          </div>\n\n          {/* Customer Info */}\n          <div className=\"grid grid-cols-2 gap-4 mb-6\">\n            <div className=\"bg-blue-50 p-4 rounded\">\n              <p className=\"mb-2\"><strong>Ø§Ø³Ù… Ø§Ù„Ø­Ø³Ø§Ø¨:</strong> {statement.customer.name}</p>\n              <p className=\"mb-2\"><strong>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</strong> {statement.customer.phone || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</p>\n              {statement.customer.is_also_supplier && (\n                <p className=\"text-orange-600 font-medium\">âš ï¸ Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…ÙˆØ±Ø¯ Ø£ÙŠØ¶Ø§Ù‹</p>\n              )}\n            </div>\n            <div className=\"bg-gray-50 p-4 rounded\">\n              <p className=\"mb-2\"><strong>Ù…Ù† ØªØ§Ø±ÙŠØ®:</strong> {statement.period.from_date}</p>\n              <p className=\"mb-2\"><strong>Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ®:</strong> {statement.period.to_date}</p>\n              <p className=\"mb-2\"><strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> {new Date().toLocaleDateString('ar-EG')}</p>\n            </div>\n          </div>\n\n          {/* Transactions Table */}\n          <div className=\"overflow-x-auto mb-6\">\n            <table className=\"min-w-full border-collapse border border-gray-300\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                  <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ù‚ÙŠØ¯</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¨ÙŠØ§Ù†</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø±Ø¬Ø¹</th>\n                  <th className=\"border border-gray-300 p-2\">Ù…Ø¯ÙŠÙ†</th>\n                  <th className=\"border border-gray-300 p-2\">Ø¯Ø§Ø¦Ù†</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø±ØµÙŠØ¯</th>\n                </tr>\n              </thead>\n              <tbody>\n                {statement.transactions.length === 0 ? (\n                  <tr>\n                    <td colSpan=\"7\" className=\"border border-gray-300 p-4 text-center text-gray-500\">\n                      Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø§Øª ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©\n                    </td>\n                  </tr>\n                ) : (\n                  statement.transactions.map((trans, index) => (\n                    <tr key={index} className=\"hover:bg-gray-50\">\n                      <td className=\"border border-gray-300 p-2\">\n                        {new Date(trans.date).toLocaleDateString('ar-EG')}\n                      </td>\n                      <td className=\"border border-gray-300 p-2\">{trans.type}</td>\n                      <td className=\"border border-gray-300 p-2 text-right\">{trans.description}</td>\n                      <td className=\"border border-gray-300 p-2\">{trans.reference}</td>\n                      <td className=\"border border-gray-300 p-2 text-red-600 font-medium\">\n                        {trans.debit > 0 ? trans.debit.toFixed(2) : '-'}\n                      </td>\n                      <td className=\"border border-gray-300 p-2 text-green-600 font-medium\">\n                        {trans.credit > 0 ? trans.credit.toFixed(2) : '-'}\n                      </td>\n                      <td className=\"border border-gray-300 p-2 font-bold\">\n                        {trans.balance.toFixed(2)}\n                      </td>\n                    </tr>\n                  ))\n                )}\n              </tbody>\n            </table>\n          </div>\n\n          {/* Summary */}\n          <div className=\"bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-lg border-t-4 border-blue-500\">\n            <div className=\"grid grid-cols-3 gap-4\">\n              <div className=\"text-center\">\n                <p className=\"text-sm text-gray-600 mb-1\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø§Ø¦Ù†</p>\n                <p className=\"text-2xl font-bold text-green-600\">\n                  {statement.summary.total_credit?.toFixed(2)} Ø¬.Ù…\n                </p>\n              </div>\n              <div className=\"text-center\">\n                <p className=\"text-sm text-gray-600 mb-1\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯ÙŠÙ†</p>\n                <p className=\"text-2xl font-bold text-red-600\">\n                  {statement.summary.total_debit?.toFixed(2)} Ø¬.Ù…\n                </p>\n              </div>\n              <div className=\"text-center\">\n                <p className=\"text-sm text-gray-600 mb-1\">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</p>\n                <p className={`text-3xl font-bold ${\n                  statement.summary.final_balance >= 0 ? 'text-green-600' : 'text-red-600'\n                }`}>\n                  {statement.summary.final_balance?.toFixed(2)} Ø¬.Ù…\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Instructions */}\n      {!statement && (\n        <div className=\"bg-blue-50 p-6 rounded-lg border-r-4 border-blue-500\">\n          <h3 className=\"font-bold mb-2\">ðŸ“ ØªØ¹Ù„ÙŠÙ…Ø§Øª:</h3>\n          <ul className=\"list-disc list-inside text-sm text-gray-700 space-y-1\">\n            <li>Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</li>\n            <li>ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ø¯ÙŠØ¯ ÙØªØ±Ø© Ø²Ù…Ù†ÙŠØ© Ù…Ø¹ÙŠÙ†Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</li>\n            <li>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ \"Ø¹Ø±Ø¶ ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨\" Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</li>\n            <li>ÙŠÙ…ÙƒÙ†Ùƒ Ø·Ø¨Ø§Ø¹Ø© ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©</li>\n            <li><strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ø§Ù„ÙÙˆØ§ØªÙŠØ± = Ø¯Ø§Ø¦Ù† (Ù…ÙˆØ¬Ø¨) | Ø§Ù„Ø¯ÙØ¹Ø§Øª ÙˆØ§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª = Ù…Ø¯ÙŠÙ† (Ø³Ø§Ù„Ø¨)</li>\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Work Orders Component\nconst WorkOrders = () => {\n  const [workOrders, setWorkOrders] = useState([]);\n  const [invoices, setInvoices] = useState([]);\n  const [selectedInvoices, setSelectedInvoices] = useState([]);\n  const [newWorkOrder, setNewWorkOrder] = useState({\n    title: '',\n    description: '',\n    priority: 'Ø¹Ø§Ø¯ÙŠ'\n  });\n  const [showAddToExisting, setShowAddToExisting] = useState(false);\n  const [selectedWorkOrderId, setSelectedWorkOrderId] = useState('');\n  const [selectedInvoiceForAdd, setSelectedInvoiceForAdd] = useState('');\n\n  useEffect(() => {\n    fetchWorkOrders();\n    fetchInvoices();\n  }, []);\n\n  const fetchWorkOrders = async () => {\n    try {\n      const response = await axios.get(`${API}/work-orders`);\n      setWorkOrders(response.data);\n    } catch (error) {\n      console.error('Error fetching work orders:', error);\n      setWorkOrders([]); // Set empty array on error\n    }\n  };\n\n  const fetchInvoices = async () => {\n    try {\n      const response = await axios.get(`${API}/invoices`);\n      setInvoices(response.data);\n    } catch (error) {\n      console.error('Error fetching invoices:', error);\n    }\n  };\n\n  const toggleInvoiceSelection = (invoiceId) => {\n    setSelectedInvoices(prev => \n      prev.includes(invoiceId) \n        ? prev.filter(id => id !== invoiceId)\n        : [...prev, invoiceId]\n    );\n  };\n\n  const createWorkOrderFromMultipleInvoices = async () => {\n    if (selectedInvoices.length === 0) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ÙØ§ØªÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');\n      return;\n    }\n\n    if (!newWorkOrder.title.trim()) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„');\n      return;\n    }\n\n    try {\n      // Get selected invoices data\n      const selectedInvoicesData = invoices.filter(inv => selectedInvoices.includes(inv.id));\n      \n      // Clean invoices data (remove MongoDB ObjectIds)\n      const cleanInvoices = selectedInvoicesData.map(inv => {\n        const cleanInv = { ...inv };\n        if (cleanInv._id) delete cleanInv._id;\n        return cleanInv;\n      });\n      \n      // Create work order with multiple invoices\n      const workOrderData = {\n        title: newWorkOrder.title,\n        description: newWorkOrder.description,\n        priority: newWorkOrder.priority,\n        invoices: cleanInvoices,\n        total_amount: cleanInvoices.reduce((sum, inv) => sum + (inv.total_amount || 0), 0),\n        total_items: cleanInvoices.reduce((sum, inv) => sum + (inv.items?.length || 0), 0)\n      };\n\n      const response = await axios.post(`${API}/work-orders/multiple`, workOrderData);\n      \n      if (response.data) {\n        alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ø¨Ù†Ø¬Ø§Ø­');\n        \n        // Reset form\n        setSelectedInvoices([]);\n        setNewWorkOrder({\n          title: '',\n          description: '',\n          priority: 'Ø¹Ø§Ø¯ÙŠ'\n        });\n        \n        // Refresh work orders list\n        await fetchWorkOrders();\n      }\n    } catch (error) {\n      console.error('Error creating work order:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const addInvoiceToExistingWorkOrder = async () => {\n    if (!selectedWorkOrderId || !selectedInvoiceForAdd) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ ÙˆØ§Ù„ÙØ§ØªÙˆØ±Ø©');\n      return;\n    }\n\n    try {\n      const response = await axios.put(`${API}/work-orders/${selectedWorkOrderId}/add-invoice`, null, {\n        params: { invoice_id: selectedInvoiceForAdd }\n      });\n      \n      if (response.data) {\n        alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¥Ù„Ù‰ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ø¨Ù†Ø¬Ø§Ø­');\n        \n        // Reset form\n        setSelectedWorkOrderId('');\n        setSelectedInvoiceForAdd('');\n        setShowAddToExisting(false);\n        \n        // Refresh work orders list\n        await fetchWorkOrders();\n      }\n    } catch (error) {\n      console.error('Error adding invoice to work order:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ§ØªÙˆØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const getInvoiceDetails = (invoiceId) => {\n    return invoices.find(inv => inv.id === invoiceId);\n  };\n\n  const getAvailableInvoices = () => {\n    // Show invoices that are \"ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°\" or \"Ø§Ù†ØªØ¸Ø§Ø±\"\n    return invoices.filter(invoice => \n      invoice.status === 'ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°' || invoice.status === 'Ø§Ù†ØªØ¸Ø§Ø±'\n    );\n  };\n\n  const getAvailableInvoicesForAdd = () => {\n    // Get invoices not already in the selected work order\n    if (!selectedWorkOrderId) return getAvailableInvoices();\n    \n    const selectedWorkOrder = workOrders.find(wo => wo.id === selectedWorkOrderId);\n    if (!selectedWorkOrder) return getAvailableInvoices();\n    \n    const usedInvoiceIds = selectedWorkOrder.invoices?.map(inv => inv.id) || [];\n    \n    return getAvailableInvoices().filter(invoice => \n      !usedInvoiceIds.includes(invoice.id)\n    );\n  };\n\n  const printWorkOrder = (workOrder) => {\n    const workOrderInvoices = workOrder.invoices?.map(invoiceData => \n      invoices.find(inv => inv.id === invoiceData.id) || invoiceData\n    ).filter(inv => inv) || [];\n    \n    const totalAmount = workOrderInvoices.reduce((sum, inv) => sum + (inv.total_amount || 0), 0);\n    const totalItems = workOrderInvoices.reduce((sum, inv) => sum + (inv.items?.length || 0), 0);\n    \n    const printContent = `\n      <div style=\"font-family: Arial, sans-serif; direction: rtl; text-align: right;\">\n        <div style=\"text-align: center; margin-bottom: 20px;\">\n          <h1>Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„</h1>\n          <p>Ø§Ù„Ø­Ø±ÙÙŠÙŠÙ† Ø´Ø§Ø±Ø¹ Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª - 01020630677</p>\n          <h2 style=\"color: #333; margin-top: 20px;\">Ø£Ù…Ø± Ø´ØºÙ„</h2>\n        </div>\n        \n        <div style=\"margin-bottom: 20px;\">\n          <strong>Ø±Ù‚Ù… Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„:</strong> ${workOrder.id}<br>\n          <strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> ${workOrder.title || `Ø£Ù…Ø± Ø´ØºÙ„ #${workOrder.id.slice(-8)}`}<br>\n          <strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${new Date(workOrder.created_at).toLocaleDateString('ar-EG')}<br>\n          <strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> ${workOrder.status || 'Ø¬Ø¯ÙŠØ¯'}<br>\n          <strong>Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ±:</strong> ${workOrderInvoices.length}<br>\n          <strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ù„Øº:</strong> Ø¬.Ù… ${totalAmount.toFixed(2)}\n          ${workOrder.description ? `<br><strong>Ø§Ù„ÙˆØµÙ:</strong> ${workOrder.description}` : ''}\n          ${workOrder.supervisor_name ? `<br><strong>Ø§Ù„Ù…Ø´Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØªØµÙ†ÙŠØ¹:</strong> ${workOrder.supervisor_name}` : ''}\n          ${workOrder.is_daily ? `<br><strong>Ù†ÙˆØ¹ Ø§Ù„Ø£Ù…Ø±:</strong> Ø£Ù…Ø± Ø´ØºÙ„ ÙŠÙˆÙ…ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠ` : ''}\n        </div>\n\n        <h3 style=\"color: #333; margin-bottom: 10px;\">Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø¯Ø±Ø¬Ø©:</h3>\n        <table style=\"width: 100%; border-collapse: collapse; margin-bottom: 20px;\">\n          <thead>\n            <tr style=\"background-color: #f0f0f0;\">\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø§Ù„Ø¹Ù…ÙŠÙ„</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø§Ù„Ù…Ø¨Ù„Øº</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${workOrderInvoices.map(invoice => `\n              <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">${invoice.invoice_number}</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">${invoice.customer_name}</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">${new Date(invoice.date).toLocaleDateString('ar-EG')}</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">Ø¬.Ù… ${invoice.total_amount?.toFixed(2) || '0.00'}</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">${invoice.items?.length || 0}</td>\n              </tr>\n            `).join('')}\n          </tbody>\n        </table>\n\n        <h3 style=\"color: #333; margin-bottom: 10px;\">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</h3>\n        <table style=\"width: 100%; border-collapse: collapse; margin-bottom: 20px;\">\n          <thead>\n            <tr style=\"background-color: #f0f0f0;\">\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø§Ù„Ù…Ù‚Ø§Ø³</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø§Ù„ÙƒÙ…ÙŠØ©</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">Ø§Ù„Ø®Ø§Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©</th>\n              <th style=\"border: 1px solid #ddd; padding: 8px;\">ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø©</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${workOrderInvoices.map(invoice => \n              invoice.items?.map(item => `\n                <tr>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">${invoice.invoice_number}</td>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">${item.local_product_details ? item.local_product_details.product_type : (item.seal_type || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯')}</td>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">${item.local_product_details ? 'Ù…Ø­Ù„ÙŠ' : (item.material_type || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯')}</td>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">${item.local_product_details ? `${item.local_product_details.product_size} - ${item.local_product_details.product_type}` : (item.inner_diameter && item.outer_diameter && item.height ? `${item.inner_diameter} Ã— ${item.outer_diameter} Ã— ${item.height}${item.wall_height ? ` (Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­ÙŠØ·Ø©: ${item.wall_height})` : ''}` : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯')}</td>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">${item.quantity}</td>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">${item.local_product_details ? 'Ù…Ø­Ù„ÙŠ' : (item.material_used || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯')}</td>\n                  <td style=\"border: 1px solid #ddd; padding: 8px;\">\n                    ${item.local_product_details ? \n                      'Ù…Ø­Ù„ÙŠ' :\n                      item.material_details ? \n                        (item.material_details.is_finished_product ? \n                          'Ù…Ø®Ø²Ù† Ø§Ù†ØªØ§Ø¬ ØªØ§Ù…' : \n                          `${item.material_details.unit_code} / ${item.material_details.inner_diameter}-${item.material_details.outer_diameter}`\n                        ) : \n                        `${item.material_used || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'} / Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©`\n                    }\n                  </td>\n                </tr>\n              `).join('') || ''\n            ).join('')}\n          </tbody>\n        </table>\n        \n        <div style=\"margin-top: 40px; border-top: 1px solid #ddd; padding-top: 20px;\">\n          <div style=\"float: left;\">\n            <strong>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ØªØµÙ†ÙŠØ¹:</strong><br>\n            <div style=\"margin-top: 10px; height: 50px; border: 1px solid #ddd;\"></div>\n          </div>\n          <div style=\"float: right;\">\n            <strong>ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„:</strong><br>\n            <div style=\"margin-top: 10px; height: 50px; border: 1px solid #ddd; width: 150px;\"></div>\n          </div>\n          <div style=\"clear: both;\"></div>\n        </div>\n      </div>\n    `;\n    \n    const printWindow = window.open('', '_blank');\n    printWindow.document.write(printContent);\n    printWindow.document.close();\n    printWindow.print();\n  };\n\n  const clearAllWorkOrders = async () => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´ØºÙ„ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) return;\n    \n    try {\n      await axios.delete(`${API}/work-orders/clear-all`);\n      fetchWorkOrders();\n      alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´ØºÙ„');\n    } catch (error) {\n      console.error('Error clearing work orders:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');\n    }\n  };\n\n  const deleteWorkOrder = async (workOrderId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ù‡Ø°Ø§ØŸ')) return;\n    \n    try {\n      await axios.delete(`${API}/work-orders/${workOrderId}`);\n      fetchWorkOrders();\n      alert('ØªÙ… Ø­Ø°Ù Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting work order:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„');\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-blue-600 mb-4\">Ø£Ù…Ø± Ø´ØºÙ„</h2>\n        \n        <div className=\"flex space-x-4 space-x-reverse mb-4\">\n          <button \n            onClick={clearAllWorkOrders}\n            className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n            Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n          </button>\n          <button \n            onClick={() => { fetchWorkOrders(); fetchInvoices(); }}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n            Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => window.print()}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n            Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n          <button \n            onClick={() => setShowAddToExisting(!showAddToExisting)}\n            className=\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\">\n            {showAddToExisting ? 'Ø¥Ø®ÙØ§Ø¡' : 'Ø¥Ø¶Ø§ÙØ© ÙØ§ØªÙˆØ±Ø© Ù„Ø£Ù…Ø± Ù…ÙˆØ¬ÙˆØ¯'}\n          </button>\n          <select className=\"border border-gray-300 rounded px-3 py-2\">\n            <option>ÙŠÙˆÙ…ÙŠ</option>\n            <option>Ø£Ø³Ø¨ÙˆØ¹ÙŠ</option>\n            <option>Ø´Ù‡Ø±ÙŠ</option>\n            <option>Ø³Ù†ÙˆÙŠ</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Add Invoice to Existing Work Order */}\n      {showAddToExisting && (\n        <div className=\"bg-yellow-50 p-6 rounded-lg shadow-md mb-6 border border-yellow-200\">\n          <h3 className=\"text-lg font-semibold mb-4 text-yellow-800\">Ø¥Ø¶Ø§ÙØ© ÙØ§ØªÙˆØ±Ø© Ø¥Ù„Ù‰ Ø£Ù…Ø± Ø´ØºÙ„ Ù…ÙˆØ¬ÙˆØ¯</h3>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ø®ØªÙŠØ§Ø± Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„</label>\n              <select\n                value={selectedWorkOrderId}\n                onChange={(e) => setSelectedWorkOrderId(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              >\n                <option value=\"\">Ø§Ø®ØªØ± Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„</option>\n                {workOrders.map(workOrder => (\n                  <option key={workOrder.id} value={workOrder.id}>\n                    {workOrder.title || `Ø£Ù…Ø± Ø´ØºÙ„ #${workOrder.id.slice(-8)}`} \n                    ({workOrder.invoices?.length || 0} ÙØ§ØªÙˆØ±Ø©)\n                  </option>\n                ))}\n              </select>\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØ§ØªÙˆØ±Ø©</label>\n              <select\n                value={selectedInvoiceForAdd}\n                onChange={(e) => setSelectedInvoiceForAdd(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n                disabled={!selectedWorkOrderId}\n              >\n                <option value=\"\">Ø§Ø®ØªØ± Ø§Ù„ÙØ§ØªÙˆØ±Ø©</option>\n                {getAvailableInvoicesForAdd().map(invoice => (\n                  <option key={invoice.id} value={invoice.id}>\n                    {invoice.invoice_number} - {invoice.customer_name} \n                    (Ø¬.Ù… {invoice.total_amount?.toFixed(2) || '0.00'})\n                  </option>\n                ))}\n              </select>\n            </div>\n          </div>\n          \n          <div className=\"flex space-x-4 space-x-reverse\">\n            <button\n              onClick={addInvoiceToExistingWorkOrder}\n              className=\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\"\n              disabled={!selectedWorkOrderId || !selectedInvoiceForAdd}\n            >\n              Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ§ØªÙˆØ±Ø©\n            </button>\n            <button\n              onClick={() => {\n                setShowAddToExisting(false);\n                setSelectedWorkOrderId('');\n                setSelectedInvoiceForAdd('');\n              }}\n              className=\"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600\"\n            >\n              Ø¥Ù„ØºØ§Ø¡\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Create Work Order from Multiple Invoices */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø´ØºÙ„ Ø¬Ø¯ÙŠØ¯</h3>\n        \n        {/* Work Order Details */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø¹Ù†ÙˆØ§Ù† Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ *</label>\n            <input\n              type=\"text\"\n              value={newWorkOrder.title}\n              onChange={(e) => setNewWorkOrder({...newWorkOrder, title: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"Ù…Ø«Ø§Ù„: Ø£Ù…Ø± Ø´ØºÙ„ Ø±Ù‚Ù… 1 - ÙŠÙ†Ø§ÙŠØ± 2025\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©</label>\n            <select\n              value={newWorkOrder.priority}\n              onChange={(e) => setNewWorkOrder({...newWorkOrder, priority: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"Ø¹Ø§Ø¯ÙŠ\">Ø¹Ø§Ø¯ÙŠ</option>\n              <option value=\"Ù…Ù‡Ù…\">Ù…Ù‡Ù…</option>\n              <option value=\"Ø·Ø§Ø±Ø¦\">Ø·Ø§Ø±Ø¦</option>\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©</label>\n            <div className=\"p-2 bg-gray-100 rounded\">\n              {selectedInvoices.length} ÙØ§ØªÙˆØ±Ø© Ù…Ø­Ø¯Ø¯Ø©\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium mb-1\">ÙˆØµÙ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„</label>\n          <textarea\n            value={newWorkOrder.description}\n            onChange={(e) => setNewWorkOrder({...newWorkOrder, description: e.target.value})}\n            className=\"w-full p-2 border border-gray-300 rounded h-20\"\n            placeholder=\"ÙˆØµÙ Ø¥Ø¶Ø§ÙÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n          />\n        </div>\n        \n        <h4 className=\"font-medium mb-2\">Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙÙˆØ§ØªÙŠØ±:</h4>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4 max-h-60 overflow-y-auto border rounded p-4\">\n          {getAvailableInvoices().map(invoice => (\n            <div \n              key={invoice.id} \n              className={`border rounded-lg p-3 cursor-pointer transition-colors ${\n                selectedInvoices.includes(invoice.id) \n                  ? 'border-blue-500 bg-blue-50' \n                  : 'border-gray-300 hover:bg-gray-50'\n              }`}\n              onClick={() => toggleInvoiceSelection(invoice.id)}\n            >\n              <div className=\"flex items-center mb-2\">\n                <input\n                  type=\"checkbox\"\n                  checked={selectedInvoices.includes(invoice.id)}\n                  onChange={() => {}}\n                  className=\"ml-2\"\n                />\n                <h5 className=\"font-semibold\">{invoice.invoice_number}</h5>\n              </div>\n              <p className=\"text-sm text-gray-600\">Ø§Ù„Ø¹Ù…ÙŠÙ„: {invoice.customer_name}</p>\n              <p className=\"text-sm text-gray-600\">\n                Ø§Ù„ØªØ§Ø±ÙŠØ®: {new Date(invoice.date).toLocaleDateString('ar-EG')}\n              </p>\n              <p className=\"text-sm font-medium\">\n                Ø§Ù„Ù…Ø¨Ù„Øº: Ø¬.Ù… {invoice.total_amount?.toFixed(2) || '0.00'}\n              </p>\n              <p className=\"text-sm\">\n                Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: {invoice.items?.length || 0} ØµÙ†Ù\n              </p>\n              <span className={`inline-block px-2 py-1 rounded text-xs mt-1 ${\n                invoice.status === 'ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°' \n                  ? 'bg-green-100 text-green-800' \n                  : 'bg-blue-100 text-blue-800'\n              }`}>\n                {invoice.status}\n              </span>\n            </div>\n          ))}\n        </div>\n        \n        {getAvailableInvoices().length === 0 && (\n          <div className=\"text-center py-8 text-gray-500\">\n            Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙˆØ§ØªÙŠØ± Ù…ØªØ§Ø­Ø© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø´ØºÙ„\n          </div>\n        )}\n        \n        {selectedInvoices.length > 0 && (\n          <div className=\"mb-4 p-3 bg-blue-100 rounded\">\n            <h5 className=\"font-semibold text-blue-800\">Ù…Ù„Ø®Øµ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„:</h5>\n            <p className=\"text-blue-700\">\n              Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙÙˆØ§ØªÙŠØ±: {selectedInvoices.length} ÙØ§ØªÙˆØ±Ø©\n            </p>\n            <p className=\"text-blue-700\">\n              Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ù„Øº: Ø¬.Ù… {invoices\n                .filter(inv => selectedInvoices.includes(inv.id))\n                .reduce((sum, inv) => sum + (inv.total_amount || 0), 0)\n                .toFixed(2)}\n            </p>\n            <p className=\"text-blue-700\">\n              Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: {invoices\n                .filter(inv => selectedInvoices.includes(inv.id))\n                .reduce((sum, inv) => sum + (inv.items?.length || 0), 0)} ØµÙ†Ù\n            </p>\n          </div>\n        )}\n        \n        <button\n          onClick={createWorkOrderFromMultipleInvoices}\n          className=\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\"\n          disabled={selectedInvoices.length === 0}\n        >\n          Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„ ({selectedInvoices.length} ÙØ§ØªÙˆØ±Ø©)\n        </button>\n      </div>\n\n      {/* Work Orders List */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´ØºÙ„ ({workOrders.length})</h3>\n        \n        {workOrders.map(workOrder => {\n          // Handle both single invoice and multiple invoices work orders\n          const workOrderInvoices = workOrder.invoices || (workOrder.invoice_id ? [getInvoiceDetails(workOrder.invoice_id)] : []);\n          \n          return (\n            <div key={workOrder.id} className=\"border rounded-lg p-4 mb-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                <div>\n                  <h4 className=\"font-semibold text-lg\">\n                    {workOrder.title || `Ø£Ù…Ø± Ø´ØºÙ„ #${workOrder.id.slice(-8)}`}\n                  </h4>\n                  <p><strong>Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:</strong> \n                    <span className={`mr-2 px-2 py-1 rounded text-sm ${\n                      workOrder.priority === 'Ø·Ø§Ø±Ø¦' ? 'bg-red-100 text-red-800' :\n                      workOrder.priority === 'Ù…Ù‡Ù…' ? 'bg-yellow-100 text-yellow-800' :\n                      'bg-blue-100 text-blue-800'\n                    }`}>\n                      {workOrder.priority || 'Ø¹Ø§Ø¯ÙŠ'}\n                    </span>\n                  </p>\n                  <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡:</strong> {new Date(workOrder.created_at).toLocaleDateString('ar-EG')}</p>\n                  <p><strong>Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ±:</strong> {workOrderInvoices.filter(inv => inv).length}</p>\n                </div>\n                \n                <div>\n                  <p><strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> \n                    <span className=\"mr-2 px-2 py-1 rounded text-sm bg-blue-100 text-blue-800\">\n                      {workOrder.status || 'Ø¬Ø¯ÙŠØ¯'}\n                    </span>\n                  </p>\n                  <p><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ù„Øº:</strong> \n                    Ø¬.Ù… {workOrder.total_amount?.toFixed(2) || \n                    workOrderInvoices.reduce((sum, inv) => sum + (inv?.total_amount || 0), 0).toFixed(2)}\n                  </p>\n                  {workOrder.description && (\n                    <p><strong>Ø§Ù„ÙˆØµÙ:</strong> {workOrder.description}</p>\n                  )}\n                  {workOrder.supervisor_name && (\n                    <p><strong>Ø§Ù„Ù…Ø´Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØªØµÙ†ÙŠØ¹:</strong> {workOrder.supervisor_name}</p>\n                  )}\n                  {workOrder.is_daily && (\n                    <p><strong>Ù†ÙˆØ¹ Ø§Ù„Ø£Ù…Ø±:</strong> <span className=\"text-green-600\">Ø£Ù…Ø± Ø´ØºÙ„ ÙŠÙˆÙ…ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠ</span></p>\n                  )}\n                </div>\n              </div>\n              \n              {/* Work Order Invoices */}\n              <div className=\"mb-4\">\n                <h5 className=\"font-medium mb-2\">Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø¯Ø±Ø¬Ø©:</h5>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\n                  {workOrderInvoices.filter(invoice => invoice).map((invoice, index) => (\n                    <div key={index} className=\"bg-gray-50 p-3 rounded border\">\n                      <p><strong>Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©:</strong> {invoice.invoice_number}</p>\n                      <p><strong>Ø§Ù„Ø¹Ù…ÙŠÙ„:</strong> {invoice.customer_name}</p>\n                      <p><strong>Ø§Ù„Ù…Ø¨Ù„Øº:</strong> Ø¬.Ù… {invoice.total_amount?.toFixed(2) || '0.00'}</p>\n                      <p><strong>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</strong> {invoice.items?.length || 0} ØµÙ†Ù</p>\n                    </div>\n                  ))}\n                </div>\n              </div>\n              \n              {/* Work Order Items Details */}\n              <div className=\"overflow-x-auto mb-4\">\n                <h5 className=\"font-medium mb-2\">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</h5>\n                <table className=\"w-full border-collapse border border-gray-300\">\n                  <thead>\n                    <tr className=\"bg-gray-100\">\n                      <th className=\"border border-gray-300 p-2\">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>\n                      <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠÙ„</th>\n                      <th className=\"border border-gray-300 p-2\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</th>\n                      <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ù‚Ø§Ø³</th>\n                      <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙƒÙ…ÙŠØ©</th>\n                      <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø®Ø§Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©</th>\n                      <th className=\"border border-gray-300 p-2\">ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø©</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {workOrderInvoices.filter(invoice => invoice).map(invoice => \n                      invoice.items?.map((item, itemIndex) => (\n                        <tr key={`${invoice.id}-${itemIndex}`}>\n                          <td className=\"border border-gray-300 p-2\">{invoice.invoice_number}</td>\n                          <td className=\"border border-gray-300 p-2\">{item.seal_type}</td>\n                          <td className=\"border border-gray-300 p-2\">{item.material_type}</td>\n                          <td className=\"border border-gray-300 p-2\">\n                            {item.inner_diameter} Ã— {item.outer_diameter} Ã— {item.height}\n                          </td>\n                          <td className=\"border border-gray-300 p-2\">{item.quantity}</td>\n                          <td className=\"border border-gray-300 p-2\">\n                            {item.material_details ? (\n                              item.material_details.is_finished_product ? (\n                                <span className=\"px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm\">\n                                  Ù…Ù†ØªØ¬ Ø¬Ø§Ù‡Ø²\n                                </span>\n                              ) : (\n                                <span className=\"px-2 py-1 bg-green-100 text-green-800 rounded text-sm\">\n                                  {item.material_details.material_type}\n                                </span>\n                              )\n                            ) : (\n                              <span className=\"px-2 py-1 bg-green-100 text-green-800 rounded text-sm\">\n                                {item.material_used || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}\n                              </span>\n                            )}\n                          </td>\n                          <td className=\"border border-gray-300 p-2\">\n                            <div className=\"font-mono text-sm\">\n                              {item.material_details ? (\n                                item.material_details.is_finished_product ? (\n                                  <div className=\"text-center font-semibold text-blue-600\">\n                                    Ù…Ø®Ø²Ù† Ø§Ù†ØªØ§Ø¬ ØªØ§Ù…\n                                  </div>\n                                ) : (\n                                  <div>\n                                    <div className=\"font-semibold\">\n                                      {item.unit_code_display || item.material_details.unit_code}\n                                    </div>\n                                    <div className=\"text-xs text-gray-600\">\n                                      {item.material_details.inner_diameter} - {item.material_details.outer_diameter}\n                                    </div>\n                                  </div>\n                                )\n                              ) : (\n                                // Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø£Ùˆ Ø¹Ù†Ø¯Ù…Ø§ Ù„Ø§ ØªÙˆØ¬Ø¯ material_details\n                                <div>\n                                  <div className=\"font-semibold\">{item.material_used || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>\n                                  <div className=\"text-xs text-gray-600\">\n                                    Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø®Ø§Ù…Ø© ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©\n                                  </div>\n                                </div>\n                              )}\n                            </div>\n                          </td>\n                        </tr>\n                      )) || []\n                    )}\n                  </tbody>\n                </table>\n              </div>\n              \n              {/* Work Order Actions */}\n              <div className=\"flex space-x-4 space-x-reverse\">\n                <button \n                  onClick={() => printWorkOrder(workOrder)}\n                  className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n                  Ø·Ø¨Ø§Ø¹Ø© Ø£Ù…Ø± Ø§Ù„Ø´ØºÙ„\n                </button>\n                <button className=\"bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600\">\n                  ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„Ø©\n                </button>\n                <button \n                  onClick={() => {\n                    setSelectedWorkOrderId(workOrder.id);\n                    setShowAddToExisting(true);\n                  }}\n                  className=\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\">\n                  Ø¥Ø¶Ø§ÙØ© ÙØ§ØªÙˆØ±Ø©\n                </button>\n                <button \n                  onClick={() => deleteWorkOrder(workOrder.id)}\n                  className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n                  Ø­Ø°Ù\n                </button>\n              </div>\n            </div>\n          );\n        })}\n        \n        {workOrders.length === 0 && (\n          <div className=\"text-center py-8 text-gray-500\">\n            Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ÙˆØ§Ù…Ø± Ø´ØºÙ„\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// Treasury Management Component\nconst Treasury = () => {\n  const { user } = useAuth(); // Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ\n  const [accounts, setAccounts] = useState([\n    { id: 'cash', name: 'Ù†Ù‚Ø¯ÙŠ', balance: 0, transactions: [] },\n    { id: 'vodafone_elsawy', name: 'ÙÙˆØ¯Ø§ÙÙˆÙ† 010', balance: 0, transactions: [] },\n    { id: 'vodafone_wael', name: 'ÙƒØ§Ø´ 0100', balance: 0, transactions: [] },\n    { id: 'deferred', name: 'Ø¢Ø¬Ù„', balance: 0, transactions: [] },\n    { id: 'instapay', name: 'Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ', balance: 0, transactions: [] },\n    { id: 'yad_elsawy', name: 'ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ', balance: 0, transactions: [] }\n  ]);\n  \n  const [selectedAccount, setSelectedAccount] = useState('cash');\n  const [showTransferModal, setShowTransferModal] = useState(false);\n  const [transferData, setTransferData] = useState({\n    from: 'cash',\n    to: 'vodafone_elsawy',\n    amount: '',\n    notes: ''\n  });\n  \n  const [manualTransaction, setManualTransaction] = useState({\n    account: 'cash',\n    type: 'income', // income or expense\n    amount: '',\n    description: '',\n    notes: ''\n  });\n  \n  const [showManualForm, setShowManualForm] = useState(false);\n  const [searchTerm, setSearchTerm] = useState(''); // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø­Ø«\n\n  useEffect(() => {\n    fetchTreasuryData();\n  }, []);\n\n  const fetchTreasuryData = async () => {\n    try {\n      // Fetch balances and transactions from backend\n      const balancesResponse = await axios.get(`${API}/treasury/balances`);\n      const transactionsResponse = await axios.get(`${API}/treasury/transactions`);\n      const invoicesResponse = await axios.get(`${API}/invoices`);\n      const expensesResponse = await axios.get(`${API}/expenses`);\n      \n      const balances = balancesResponse.data;\n      const manualTransactions = transactionsResponse.data;\n      const invoices = invoicesResponse.data;\n      const expenses = expensesResponse.data;\n      \n      // Update accounts with balances and transactions\n      const updatedAccounts = accounts.map(account => {\n        let transactions = [];\n        \n        // Add invoice transactions\n        invoices.forEach(invoice => {\n          const paymentMethodMap = {\n            'Ù†Ù‚Ø¯ÙŠ': 'cash',\n            'ÙÙˆØ¯Ø§ÙÙˆÙ† 010': 'vodafone_elsawy', \n            'ÙƒØ§Ø´ 0100': 'vodafone_wael',\n            'Ø¢Ø¬Ù„': 'deferred',\n            'Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ': 'instapay',\n            'ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ': 'yad_elsawy'\n          };\n          \n          if (paymentMethodMap[invoice.payment_method] === account.id) {\n            transactions.push({\n              id: `inv-${invoice.id}`,\n              type: 'income',\n              amount: invoice.total_amount || 0,\n              description: `ÙØ§ØªÙˆØ±Ø© Ø±Ù‚Ù… ${invoice.invoice_number}`,\n              date: invoice.date,\n              reference: `Ø§Ù„Ø¹Ù…ÙŠÙ„: ${invoice.customer_name}`\n            });\n          }\n        });\n        \n        // Add expense transactions (only from cash account)\n        if (account.id === 'cash') {\n          expenses.forEach(expense => {\n            transactions.push({\n              id: `exp-${expense.id}`,\n              type: 'expense',\n              amount: expense.amount || 0,\n              description: expense.description || 'Ù…ØµØ±ÙˆÙ',\n              date: expense.date,\n              category: expense.category\n            });\n          });\n        }\n        \n        // Add manual transactions\n        manualTransactions\n          .filter(transaction => transaction.account_id === account.id)\n          .forEach(transaction => {\n            transactions.push({\n              id: transaction.id,\n              type: transaction.transaction_type,\n              amount: transaction.amount,\n              description: transaction.description,\n              date: transaction.date,\n              reference: transaction.reference\n            });\n          });\n        \n        return {\n          ...account,\n          balance: balances[account.id] || 0,\n          transactions: transactions.sort((a, b) => new Date(b.date) - new Date(a.date))\n        };\n      });\n      \n      setAccounts(updatedAccounts);\n    } catch (error) {\n      console.error('Error fetching treasury data:', error);\n    }\n  };\n\n  const handleTransfer = async () => {\n    if (!transferData.amount || parseFloat(transferData.amount) <= 0) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');\n      return;\n    }\n    \n    const amount = parseFloat(transferData.amount);\n    const fromAccount = accounts.find(acc => acc.id === transferData.from);\n    \n    if (fromAccount.balance < amount) {\n      alert('Ø§Ù„Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙŠ');\n      return;\n    }\n    \n    try {\n      await axios.post(`${API}/treasury/transfer`, {\n        from_account: transferData.from,\n        to_account: transferData.to,\n        amount: amount,\n        notes: transferData.notes\n      });\n      \n      // Refresh data\n      fetchTreasuryData();\n      \n      setShowTransferModal(false);\n      setTransferData({ from: 'cash', to: 'vodafone_elsawy', amount: '', notes: '' });\n      alert('ØªÙ… Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error processing transfer:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­ÙˆÙŠÙ„');\n    }\n  };\n\n  const handleManualTransaction = async () => {\n    if (!manualTransaction.amount || parseFloat(manualTransaction.amount) <= 0) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');\n      return;\n    }\n    \n    const amount = parseFloat(manualTransaction.amount);\n    \n    try {\n      await axios.post(`${API}/treasury/transactions`, {\n        account_id: manualTransaction.account,\n        transaction_type: manualTransaction.type,\n        amount: amount,\n        description: manualTransaction.description,\n        reference: manualTransaction.notes || 'Ø¥Ø¯Ø®Ø§Ù„ ÙŠØ¯ÙˆÙŠ'\n      });\n      \n      // Refresh data\n      fetchTreasuryData();\n      \n      setShowManualForm(false);\n      setManualTransaction({\n        account: 'cash',\n        type: 'income',\n        amount: '',\n        description: '',\n        notes: ''\n      });\n      alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error processing manual transaction:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');\n    }\n  };\n\n  const clearAccount = async (accountId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØµÙÙŠØ± Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) return;\n    \n    const account = accounts.find(acc => acc.id === accountId);\n    if (!account || account.balance === 0) {\n      alert('Ø§Ù„Ø­Ø³Ø§Ø¨ ÙØ§Ø±Øº Ø¨Ø§Ù„ÙØ¹Ù„ Ø£Ùˆ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');\n      return;\n    }\n    \n    try {\n      // Create expense transaction to zero the account\n      await axios.post(`${API}/treasury/transactions`, {\n        account_id: accountId,\n        transaction_type: 'expense',\n        amount: account.balance,\n        description: `ØªØµÙÙŠØ± Ø­Ø³Ø§Ø¨ ${account.name}`,\n        reference: 'ØªØµÙÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ù…Ø¯ÙŠØ±'\n      });\n      \n      // Refresh data\n      fetchTreasuryData();\n      alert(`ØªÙ… ØªØµÙÙŠØ± Ø­Ø³Ø§Ø¨ ${account.name} Ø¨Ù†Ø¬Ø§Ø­`);\n    } catch (error) {\n      console.error('Error clearing account:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµÙÙŠØ± Ø§Ù„Ø­Ø³Ø§Ø¨');\n    }\n  };\n\n  // Treasury Reset Function - Only for Elsawy\n  const resetTreasury = async () => {\n    if (user?.username !== 'Elsawy') {\n      alert('ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨ØªÙ†ÙÙŠØ° Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');\n      return;\n    }\n\n    // Triple confirmation for this critical operation\n    const firstConfirm = confirm('âš ï¸ ØªØ­Ø°ÙŠØ±: Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø³ÙŠØ­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø²ÙŠÙ†Ø© ÙˆÙ„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!\\nÙ‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ');\n    if (!firstConfirm) return;\n\n    const secondConfirm = confirm('âš ï¸ ØªØ£ÙƒÙŠØ¯ Ø«Ø§Ù†ÙŠ: Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª ÙˆØ§Ù„Ø£Ø±ØµØ¯Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹!\\nØ§ÙƒØªØ¨ \"Ù†Ø¹Ù…\" Ù„Ù„ØªØ£ÙƒÙŠØ¯:');\n    if (!secondConfirm) return;\n\n    const finalConfirm = prompt('âš ï¸ Ù„Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØŒ Ø§ÙƒØªØ¨ Ø¨Ø§Ù„Ø¶Ø¨Ø·: \"Ø§Ø­Ø°Ù ÙƒÙ„ Ø´ÙŠØ¡\"');\n    if (finalConfirm !== 'Ø§Ø­Ø°Ù ÙƒÙ„ Ø´ÙŠØ¡') {\n      alert('ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');\n      return;\n    }\n\n    try {\n      const response = await axios.post(`${API}/treasury/reset`, null, {\n        params: { username: user.username }\n      });\n\n      alert(`âœ… ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø²ÙŠÙ†Ø© Ø¨Ù†Ø¬Ø§Ø­!\\nØªÙ… Ø­Ø°Ù ${response.data.deleted_treasury_transactions} Ù…Ø¹Ø§Ù…Ù„Ø©`);\n      \n      // Refresh data\n      fetchTreasuryData();\n    } catch (error) {\n      console.error('Error resetting treasury:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ù…Ø³Ø­ Ø§Ù„Ø®Ø²ÙŠÙ†Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const selectedAccountData = accounts.find(acc => acc.id === selectedAccount);\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-blue-600 mb-4\">Ø§Ù„Ø®Ø²ÙŠÙ†Ø© - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ù…ÙˆØ§Ù„</h2>\n        \n        <div className=\"flex space-x-4 space-x-reverse mb-4\">\n          <button \n            onClick={() => setShowTransferModal(true)}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n            ØªØ­ÙˆÙŠÙ„ Ø£Ù…ÙˆØ§Ù„\n          </button>\n          <button \n            onClick={() => setShowManualForm(true)}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n            Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„ÙŠØ© ÙŠØ¯ÙˆÙŠØ©\n          </button>\n          <button \n            onClick={fetchTreasuryData}\n            className=\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\">\n            Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => window.print()}\n            className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\">\n            Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n          {user?.username === 'Elsawy' && (\n            <button \n              onClick={resetTreasury}\n              className=\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 font-bold border-2 border-red-800\">\n              âš ï¸ Ù…Ø³Ø­ Ø§Ù„Ø®Ø²ÙŠÙ†Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„\n            </button>\n          )}\n          {user?.username === 'Elsawy' && selectedAccount === 'yad_elsawy' && selectedAccountData?.balance > 0 && (\n            <button \n              onClick={() => clearAccount(selectedAccount)}\n              className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n              ØªØµÙÙŠØ± Ø­Ø³Ø§Ø¨ ÙŠØ¯ Ø§Ù„ØµØ§ÙˆÙŠ\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Accounts Summary */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-6\">\n        {accounts.map(account => (\n          <div \n            key={account.id}\n            className={`p-4 rounded-lg shadow cursor-pointer transition-colors ${\n              selectedAccount === account.id \n                ? 'bg-blue-100 border-2 border-blue-500' \n                : 'bg-white hover:bg-gray-50'\n            }`}\n            onClick={() => setSelectedAccount(account.id)}\n          >\n            <h3 className=\"font-semibold text-gray-800 mb-2\">{account.name}</h3>\n            <p className={`text-2xl font-bold ${\n              account.balance >= 0 ? 'text-green-600' : 'text-red-600'\n            }`}>\n              Ø¬.Ù… {account.balance.toFixed(2)}\n            </p>\n            <p className=\"text-sm text-gray-600 mt-1\">\n              {account.transactions.length} Ø¹Ù…Ù„ÙŠØ©\n            </p>\n          </div>\n        ))}\n      </div>\n\n      {/* Account Details */}\n      {selectedAccountData && (\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\n          <h3 className=\"text-lg font-semibold mb-4\">\n            ØªÙØ§ØµÙŠÙ„ Ø­Ø³Ø§Ø¨: {selectedAccountData.name}\n          </h3>\n          \n          {/* Search Bar */}\n          <div className=\"mb-4\">\n            <input\n              type=\"text\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              placeholder=\"Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª...\"\n              className=\"w-full p-3 border border-gray-300 rounded-lg\"\n            />\n          </div>\n          \n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full border-collapse border border-gray-300\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù†ÙˆØ¹</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ÙˆØµÙ</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø¨Ù„Øº</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ù…Ø±Ø¬Ø¹</th>\n                </tr>\n              </thead>\n              <tbody>\n                {selectedAccountData.transactions\n                  .filter(transaction => \n                    transaction.description.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                    (transaction.reference && transaction.reference.toLowerCase().includes(searchTerm.toLowerCase())) ||\n                    (transaction.category && transaction.category.toLowerCase().includes(searchTerm.toLowerCase()))\n                  )\n                  .map((transaction, index) => (\n                  <tr key={transaction.id || index}>\n                    <td className=\"border border-gray-300 p-2\">\n                      {new Date(transaction.date).toLocaleDateString('ar-EG')}\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <span className={`px-2 py-1 rounded text-xs ${\n                        transaction.type === 'income' ? 'bg-green-100 text-green-800' :\n                        transaction.type === 'expense' ? 'bg-red-100 text-red-800' :\n                        transaction.type === 'transfer_in' ? 'bg-blue-100 text-blue-800' :\n                        'bg-orange-100 text-orange-800'\n                      }`}>\n                        {transaction.type === 'income' ? 'Ø¯Ø®Ù„' :\n                         transaction.type === 'expense' ? 'Ù…ØµØ±ÙˆÙ' :\n                         transaction.type === 'transfer_in' ? 'ØªØ­ÙˆÙŠÙ„ ÙˆØ§Ø±Ø¯' : 'ØªØ­ÙˆÙŠÙ„ ØµØ§Ø¯Ø±'}\n                      </span>\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">{transaction.description}</td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <span className={\n                        transaction.type === 'income' || transaction.type === 'transfer_in' \n                          ? 'text-green-600 font-semibold' \n                          : 'text-red-600 font-semibold'\n                      }>\n                        {transaction.type === 'income' || transaction.type === 'transfer_in' ? '+' : '-'}\n                        Ø¬.Ù… {transaction.amount.toFixed(2)}\n                      </span>\n                    </td>\n                    <td className=\"border border-gray-300 p-2 text-sm text-gray-600\">\n                      {transaction.reference || transaction.category || '-'}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n            \n            {selectedAccountData.transactions.length === 0 && (\n              <div className=\"text-center py-8 text-gray-500\">\n                Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Transfer Modal */}\n      {showTransferModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4\">\n            <h3 className=\"text-lg font-semibold mb-4\">ØªØ­ÙˆÙŠÙ„ Ø£Ù…ÙˆØ§Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</h3>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù…Ù† Ø­Ø³Ø§Ø¨</label>\n                <select\n                  value={transferData.from}\n                  onChange={(e) => setTransferData({...transferData, from: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                >\n                  {accounts.map(account => (\n                    <option key={account.id} value={account.id}>\n                      {account.name} (Ø¬.Ù… {account.balance.toFixed(2)})\n                    </option>\n                  ))}\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø¥Ù„Ù‰ Ø­Ø³Ø§Ø¨</label>\n                <select\n                  value={transferData.to}\n                  onChange={(e) => setTransferData({...transferData, to: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                >\n                  {accounts.filter(acc => acc.id !== transferData.from).map(account => (\n                    <option key={account.id} value={account.id}>\n                      {account.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù…Ø¨Ù„Øº</label>\n                <input\n                  type=\"number\"\n                  value={transferData.amount}\n                  onChange={(e) => setTransferData({...transferData, amount: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"0.00\"\n                  min=\"0\"\n                  step=\"0.01\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>\n                <input\n                  type=\"text\"\n                  value={transferData.notes}\n                  onChange={(e) => setTransferData({...transferData, notes: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                />\n              </div>\n            </div>\n            \n            <div className=\"flex space-x-4 space-x-reverse mt-6\">\n              <button\n                onClick={handleTransfer}\n                className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n              >\n                ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„\n              </button>\n              <button\n                onClick={() => setShowTransferModal(false)}\n                className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n              >\n                Ø¥Ù„ØºØ§Ø¡\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Manual Transaction Modal */}\n      {showManualForm && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4\">\n            <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„ÙŠØ© ÙŠØ¯ÙˆÙŠØ©</h3>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø­Ø³Ø§Ø¨</label>\n                <select\n                  value={manualTransaction.account}\n                  onChange={(e) => setManualTransaction({...manualTransaction, account: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                >\n                  {accounts.map(account => (\n                    <option key={account.id} value={account.id}>\n                      {account.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</label>\n                <select\n                  value={manualTransaction.type}\n                  onChange={(e) => setManualTransaction({...manualTransaction, type: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                >\n                  <option value=\"income\">Ø¯Ø®Ù„</option>\n                  <option value=\"expense\">Ù…ØµØ±ÙˆÙ</option>\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù…Ø¨Ù„Øº</label>\n                <input\n                  type=\"number\"\n                  value={manualTransaction.amount}\n                  onChange={(e) => setManualTransaction({...manualTransaction, amount: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"0.00\"\n                  min=\"0\"\n                  step=\"0.01\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ÙˆØµÙ</label>\n                <input\n                  type=\"text\"\n                  value={manualTransaction.description}\n                  onChange={(e) => setManualTransaction({...manualTransaction, description: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"ÙˆØµÙ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>\n                <input\n                  type=\"text\"\n                  value={manualTransaction.notes}\n                  onChange={(e) => setManualTransaction({...manualTransaction, notes: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded\"\n                  placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\"\n                />\n              </div>\n            </div>\n            \n            <div className=\"flex space-x-4 space-x-reverse mt-6\">\n              <button\n                onClick={handleManualTransaction}\n                className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n              >\n                Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©\n              </button>\n              <button\n                onClick={() => setShowManualForm(false)}\n                className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n              >\n                Ø¥Ù„ØºØ§Ø¡\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Backup and Restore Component\nconst Backup = () => {\n  const [backups, setBackups] = useState([]);\n  const [driveFiles, setDriveFiles] = useState([]);\n  const [driveStatus, setDriveStatus] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [creating, setCreating] = useState(false);\n  const [activeTab, setActiveTab] = useState('local'); // 'local' or 'drive'\n  const {user} = useAuth();\n\n  useEffect(() => {\n    fetchBackups();\n    fetchDriveStatus();\n  }, []);\n\n  const fetchBackups = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.get(`${API}/backup/list`);\n      setBackups(response.data || []);\n    } catch (error) {\n      console.error('Error fetching backups:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchDriveStatus = async () => {\n    try {\n      const response = await axios.get(`${API}/backup/drive/status`);\n      setDriveStatus(response.data);\n    } catch (error) {\n      console.error('Error fetching drive status:', error);\n    }\n  };\n\n  const fetchDriveFiles = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.get(`${API}/backup/drive/list`);\n      setDriveFiles(response.data.files || []);\n    } catch (error) {\n      console.error('Error fetching drive files:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ù…Ù„ÙØ§Øª Google Drive');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const checkBackupStatus = async (backupId, attempts = 0) => {\n    try {\n      const response = await axios.get(`${API}/backup/status/${backupId}`);\n      const status = response.data.status;\n      \n      if (status === 'completed' || status === 'completed_with_drive') {\n        setCreating(false);\n        let message = `âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!\\n\\nØ¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª: ${response.data.total_documents}`;\n        if (status === 'completed_with_drive') {\n          message += '\\n\\nðŸŒ ØªÙ… Ø§Ù„Ø±ÙØ¹ Ø¥Ù„Ù‰ Google Drive Ø¨Ù†Ø¬Ø§Ø­!';\n        }\n        alert(message);\n        fetchBackups();\n        fetchDriveFiles();\n      } else if (status === 'failed') {\n        setCreating(false);\n        alert('âŒ ÙØ´Ù„Øª Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ\\n\\n' + (response.data.error || 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'));\n        fetchBackups();\n      } else if (status === 'in_progress' && attempts < 60) {\n        // Keep checking every 2 seconds for up to 2 minutes\n        setTimeout(() => checkBackupStatus(backupId, attempts + 1), 2000);\n      } else {\n        // Timeout after 2 minutes\n        setCreating(false);\n        alert('â±ï¸ Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©.');\n        fetchBackups();\n      }\n    } catch (error) {\n      console.error('Error checking backup status:', error);\n      if (attempts < 60) {\n        setTimeout(() => checkBackupStatus(backupId, attempts + 1), 2000);\n      } else {\n        setCreating(false);\n        fetchBackups();\n      }\n    }\n  };\n\n  const createBackup = async () => {\n    if (!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ø­Ù„ÙŠØ© Ø§Ù„Ø¢Ù†ØŸ')) {\n      return;\n    }\n\n    setCreating(true);\n    try {\n      const response = await axios.post(`${API}/backup/create`, null, {\n        params: { \n          username: user?.username\n        }\n      });\n      \n      // Start polling for status\n      if (response.data.backup_id) {\n        alert(`â³ ${response.data.message}\\n\\nØ³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡.`);\n        checkBackupStatus(response.data.backup_id);\n      } else {\n        setCreating(false);\n        alert('âŒ ÙØ´Ù„ ÙÙŠ Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ');\n      }\n    } catch (error) {\n      console.error('Error creating backup:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: ' + (error.response?.data?.detail || error.message));\n      setCreating(false);\n    }\n  };\n\n  const downloadBackup = async (backupId, createdAt) => {\n    try {\n      const response = await axios.get(`${API}/backup/download/${backupId}`, {\n        responseType: 'blob'\n      });\n      \n      // Create download link\n      const timestamp = new Date(createdAt).toISOString().replace(/[:.]/g, '-').slice(0, -5);\n      const filename = `backup_${timestamp}.json`;\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', filename);\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n      window.URL.revokeObjectURL(url);\n      \n      alert('âœ… ØªÙ… ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!');\n    } catch (error) {\n      console.error('Error downloading backup:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙ†Ø²ÙŠÙ„: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const handleFileUpload = async (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    // Check file type\n    if (!file.name.endsWith('.json')) {\n      alert('âŒ ÙŠØ¬Ø¨ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù JSON');\n      event.target.value = '';\n      return;\n    }\n\n    // Ask user what to do\n    const action = confirm(\n      `ØªÙ… Ø§Ø®ØªÙŠØ§Ø±: ${file.name}\\n\\n` +\n      `Ø§Ø®ØªØ± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡:\\n\\n` +\n      `âœ… Ù…ÙˆØ§ÙÙ‚ = Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø³Ø®Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© ÙÙ‚Ø· (ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ±Ø¬Ø§Ø¹Ù‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹)\\n` +\n      `âŒ Ø¥Ù„ØºØ§Ø¡ = Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø© (Ø³ÙŠØ­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©)\\n\\n` +\n      `Ù…Ø§Ø°Ø§ ØªØ±ÙŠØ¯ØŸ`\n    );\n\n    if (action) {\n      // Add to list only\n      await uploadBackupFile(file, false);\n    } else {\n      // Ask for confirmation before restore\n      if (confirm(`âš ï¸ ØªØ­Ø°ÙŠØ±!\\n\\nÙ‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø©ØŸ\\n\\nØ³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©!\\n\\nÙ‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!`)) {\n        await uploadBackupFile(file, true);\n      }\n    }\n\n    // Reset input\n    event.target.value = '';\n  };\n\n  const uploadBackupFile = async (file, restoreDirectly) => {\n    setLoading(true);\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n\n      let response;\n      if (restoreDirectly) {\n        // Restore directly\n        response = await axios.post(`${API}/backup/restore-from-file`, formData, {\n          params: { username: user?.username },\n          headers: { 'Content-Type': 'multipart/form-data' }\n        });\n        \n        alert(`âœ… ${response.data.message}\\n\\n` +\n              `Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ù…Ø³ØªØ±Ø¬Ø¹Ø©: ${response.data.collections_restored}\\n` +\n              `Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª: ${response.data.total_documents}\\n\\n` +\n              `Ø³ÙŠØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©...`);\n        \n        setTimeout(() => window.location.reload(), 2000);\n      } else {\n        // Upload to list\n        response = await axios.post(`${API}/backup/upload`, formData, {\n          headers: { 'Content-Type': 'multipart/form-data' }\n        });\n        \n        alert(`âœ… ${response.data.message}\\n\\n` +\n              `ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ù‡Ø°Ù‡ Ø§Ù„Ù†Ø³Ø®Ø© Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©`);\n        \n        fetchBackups();\n      }\n    } catch (error) {\n      console.error('Error uploading backup:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£: ' + (error.response?.data?.detail || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const restoreBackup = async (backupId, createdAt) => {\n    if (!confirm(`âš ï¸ ØªØ­Ø°ÙŠØ± Ø®Ø·ÙŠØ±!\\n\\nÙ‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©ØŸ\\n\\nØ§Ù„ØªØ§Ø±ÙŠØ®: ${new Date(createdAt).toLocaleString('ar-EG')}\\n\\nØ³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙˆØ§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§ Ø¨Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©!\\n\\nÙ‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!`)) {\n      return;\n    }\n\n    // Second confirmation\n    if (!confirm('ØªØ£ÙƒÙŠØ¯ Ù†Ù‡Ø§Ø¦ÙŠ: Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ ØªÙ…Ø§Ù…Ø§Ù‹ØŸ')) {\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const response = await axios.post(`${API}/backup/restore/${backupId}`, null, {\n        params: { username: user?.username }\n      });\n      alert(`âœ… ${response.data.message}\\n\\nØ§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ù…Ø³ØªØ±Ø¬Ø¹Ø©: ${response.data.collections_restored}\\nØ¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª: ${response.data.total_documents}\\n\\nÙŠÙÙ†ØµØ­ Ø¨Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©.`);\n      \n      // Reload page after successful restore\n      if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø¢Ù†ØŸ')) {\n        window.location.reload();\n      }\n    } catch (error) {\n      console.error('Error restoring backup:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: ' + (error.response?.data?.detail || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteBackup = async (backupId, createdAt) => {\n    if (!confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©ØŸ\\n\\nØ§Ù„ØªØ§Ø±ÙŠØ®: ${new Date(createdAt).toLocaleString('ar-EG')}\\n\\nÙ‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!`)) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/backup/${backupId}`);\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');\n      fetchBackups();\n      fetchDriveFiles(); // Refresh Drive files too\n    } catch (error) {\n      console.error('Error deleting backup:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  // Google Drive Functions\n  const uploadToDrive = async (backupId) => {\n    if (!driveStatus?.enabled) {\n      alert('âŒ Google Drive ØºÙŠØ± Ù…ØªØµÙ„!\\n\\nÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Google Drive.');\n      return;\n    }\n\n    try {\n      const response = await axios.post(`${API}/backup/${backupId}/upload-to-drive`);\n      alert(`âœ… ${response.data.message}`);\n      fetchBackups();\n      fetchDriveFiles();\n    } catch (error) {\n      console.error('Error uploading to Drive:', error);\n      let errorMsg = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¹ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©:\\n\\n';\n      \n      if (error.response?.data?.detail) {\n        errorMsg += error.response.data.detail;\n        \n        // Check for storage quota error\n        if (error.response.data.detail.includes('storage quota') || error.response.data.detail.includes('403')) {\n          errorMsg += '\\n\\nðŸ’¡ Ø§Ù„Ø­Ù„:\\n';\n          errorMsg += '1. Ø§ÙØªØ­ Google Drive\\n';\n          errorMsg += '2. Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø¬Ù„Ø¯ \"Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„\"\\n';\n          errorMsg += '3. Ø´Ø§Ø±Ùƒ Ø§Ù„Ù…Ø¬Ù„Ø¯ Ù…Ø¹:\\n   master-seal-backup@master-seal-backup.iam.gserviceaccount.com\\n';\n          errorMsg += '4. Ø§Ø®ØªØ± ØµÙ„Ø§Ø­ÙŠØ© \"Editor\"';\n        }\n      } else {\n        errorMsg += error.message;\n      }\n      \n      alert(errorMsg);\n    }\n  };\n\n  const downloadFromDrive = async (fileId, fileName) => {\n    try {\n      const response = await axios.get(`${API}/backup/drive/download/${fileId}`, {\n        responseType: 'blob'\n      });\n      \n      // Create download link\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', fileName);\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n      \n      alert('âœ… ØªÙ… ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error downloading from Drive:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„Ù: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const restoreFromDrive = async (fileId, fileName) => {\n    if (!confirm(`âš ï¸ ØªØ­Ø°ÙŠØ±!\\n\\nÙ‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ù† Google DriveØŸ\\n\\nÙ…Ù„Ù: ${fileName}\\n\\nØ³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©!`)) {\n      return;\n    }\n\n    if (!confirm('ØªØ£ÙƒÙŠØ¯ Ù†Ù‡Ø§Ø¦ÙŠ: Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ ØªÙ…Ø§Ù…Ø§Ù‹ØŸ')) {\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const response = await axios.post(`${API}/backup/drive/restore/${fileId}`);\n      alert(`âœ… ${response.data.message}\\n\\nØ§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ù…Ø³ØªØ±Ø¬Ø¹Ø©: ${response.data.collections_restored}\\nØ¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª: ${response.data.total_documents}`);\n      \n      if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø¢Ù†ØŸ')) {\n        window.location.reload();\n      }\n    } catch (error) {\n      console.error('Error restoring from Drive:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹: ' + (error.response?.data?.detail || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteFromDrive = async (fileId, fileName) => {\n    if (!confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ù…Ù„Ù Ù…Ù† Google DriveØŸ\\n\\n${fileName}\\n\\nÙ‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!`)) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/backup/drive/${fileId}`);\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù„Ù Ù…Ù† Google Drive Ø¨Ù†Ø¬Ø§Ø­');\n      fetchDriveFiles();\n    } catch (error) {\n      console.error('Error deleting from Drive:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­Ø°Ù: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  // Switch tab and load data\n  const switchTab = (tab) => {\n    setActiveTab(tab);\n    if (tab === 'drive' && driveFiles.length === 0) {\n      fetchDriveFiles();\n    }\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-3xl font-bold\">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ</h1>\n        <div className=\"flex space-x-2 space-x-reverse flex-wrap gap-2\">\n          <button\n            onClick={createBackup}\n            disabled={creating}\n            className={`px-6 py-2 rounded text-white ${\n              creating ? 'bg-gray-400 cursor-not-allowed' : 'bg-green-500 hover:bg-green-600'\n            }`}\n          >\n            {creating ? 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡...' : 'ðŸ’¾ Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø©'}\n          </button>\n          <label className=\"bg-purple-500 text-white px-6 py-2 rounded hover:bg-purple-600 cursor-pointer\">\n            ðŸ“¤ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù†Ø³Ø®Ø©\n            <input\n              type=\"file\"\n              accept=\".json\"\n              onChange={handleFileUpload}\n              className=\"hidden\"\n            />\n          </label>\n          <button\n            onClick={fetchBackups}\n            disabled={loading}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n          >\n            ðŸ”„ ØªØ­Ø¯ÙŠØ«\n          </button>\n        </div>\n      </div>\n\n      {/* Auto Backup Info */}\n      <div className=\"bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-lg mb-6 border-r-4 border-blue-500\">\n        <h3 className=\"font-bold mb-2\">ðŸ“… Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</h3>\n        <p className=\"text-sm text-gray-700\">\n          ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ø­Ù„ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙƒÙ„ ÙŠÙˆÙ… ÙÙŠ ØªÙ…Ø§Ù… Ø§Ù„Ø³Ø§Ø¹Ø© 7:00 Ù…Ø³Ø§Ø¡Ù‹. \n          ÙŠÙ…ÙƒÙ†Ùƒ ØªÙ†Ø²ÙŠÙ„ Ø£ÙŠ Ù†Ø³Ø®Ø© ÙˆØ±ÙØ¹Ù‡Ø§ ÙŠØ¯ÙˆÙŠØ§Ù‹ Ø¥Ù„Ù‰ Google Drive Ø£Ùˆ Ø£ÙŠ Ø®Ø¯Ù…Ø© Ø³Ø­Ø§Ø¨ÙŠØ© Ø£Ø®Ø±Ù‰.\n        </p>\n      </div>\n\n      {/* Backups Table */}\n      <div className=\"bg-white rounded-lg shadow-md overflow-x-auto\">\n        {loading && !creating ? (\n          <div className=\"p-8 text-center\">\n            <p className=\"text-gray-500\">â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>\n          </div>\n        ) : backups.length === 0 ? (\n          <div className=\"p-8 text-center\">\n            <p className=\"text-gray-500\">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</p>\n            <p className=\"text-sm text-gray-400 mt-2\">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ \"Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©\" Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø£ÙˆÙ„ Ù†Ø³Ø®Ø©</p>\n          </div>\n        ) : (\n          <table className=\"min-w-full border-collapse\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª</th>\n                <th className=\"border border-gray-300 p-2\">Ø£Ù†Ø´Ø¦Øª Ø¨ÙˆØ§Ø³Ø·Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø§Ù„Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {backups.map((backup) => (\n                <tr key={backup.backup_id} className=\"hover:bg-gray-50\">\n                  <td className=\"border border-gray-300 p-2\">\n                    {new Date(backup.created_at).toLocaleString('ar-EG', {\n                      year: 'numeric',\n                      month: 'long',\n                      day: 'numeric',\n                      hour: '2-digit',\n                      minute: '2-digit'\n                    })}\n                    {backup.is_scheduled && (\n                      <span className=\"block text-xs text-blue-600 mt-1\">ðŸ¤– ØªÙ„Ù‚Ø§Ø¦ÙŠ</span>\n                    )}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">{backup.created_by}</td>\n                  <td className=\"border border-gray-300 p-2 text-center font-medium\">\n                    {backup.total_documents || 0}\n                  </td>\n                  <td className=\"border border-gray-300 p-2 text-center\">\n                    {backup.status === 'in_progress' && (\n                      <span className=\"text-orange-600 animate-pulse\">â³ Ø¬Ø§Ø±ÙŠ...</span>\n                    )}\n                    {backup.status === 'failed' && (\n                      <span className=\"text-red-600\">âŒ ÙØ´Ù„</span>\n                    )}\n                    {(backup.status === 'completed' || backup.status === 'completed_with_drive' || backup.status === 'completed_no_drive') && (\n                      <span className=\"text-green-600\">âœ… Ù…ÙƒØªÙ…Ù„</span>\n                    )}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex space-x-2 space-x-reverse justify-center flex-wrap gap-1\">\n                      <button\n                        onClick={() => downloadBackup(backup.backup_id, backup.created_at)}\n                        className=\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\"\n                        title=\"ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©\"\n                      >\n                        â¬‡ï¸ ØªÙ†Ø²ÙŠÙ„\n                      </button>\n                      <button\n                        onClick={() => restoreBackup(backup.backup_id, backup.created_at)}\n                        disabled={loading || backup.status === 'in_progress'}\n                        className=\"bg-orange-500 text-white px-3 py-1 rounded text-sm hover:bg-orange-600 disabled:bg-gray-400\"\n                        title=\"Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„Ù†Ø³Ø®Ø©\"\n                      >\n                        â†©ï¸ Ø§Ø³ØªØ±Ø¬Ø§Ø¹\n                      </button>\n                      <button\n                        onClick={() => deleteBackup(backup.backup_id, backup.created_at)}\n                        disabled={loading}\n                        className=\"bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600 disabled:bg-gray-400\"\n                        title=\"Ø­Ø°Ù Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©\"\n                      >\n                        ðŸ—‘ï¸ Ø­Ø°Ù\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        )}\n      </div>\n\n      {/* Google Drive Tab */}\n      {activeTab === 'drive' && (\n        <div className=\"bg-white rounded-lg shadow-md overflow-x-auto\">\n          {loading ? (\n            <div className=\"p-8 text-center\">\n              <p className=\"text-gray-500\">â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>\n            </div>\n          ) : !driveStatus?.enabled ? (\n            <div className=\"p-8 text-center\">\n              <p className=\"text-red-500\">âŒ Google Drive ØºÙŠØ± Ù…ØªØµÙ„</p>\n              <p className=\"text-sm text-gray-400 mt-2\">ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Google Drive</p>\n            </div>\n          ) : driveFiles.length === 0 ? (\n            <div className=\"p-8 text-center\">\n              <p className=\"text-gray-500\">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„ÙØ§Øª ÙÙŠ Google Drive</p>\n              <p className=\"text-sm text-gray-400 mt-2\">Ù‚Ù… Ø¨Ø±ÙØ¹ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ù† Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø³Ø§Ø¨Ù‚</p>\n            </div>\n          ) : (\n            <table className=\"min-w-full border-collapse\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"border border-gray-300 p-2\">Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø¬Ù…</th>\n                  <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n                </tr>\n              </thead>\n              <tbody>\n                {driveFiles.map((file) => (\n                  <tr key={file.id} className=\"hover:bg-gray-50\">\n                    <td className=\"border border-gray-300 p-2\">\n                      <a\n                        href={file.webViewLink}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"text-blue-600 hover:underline\"\n                      >\n                        {file.name}\n                      </a>\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">\n                      {new Date(file.createdTime).toLocaleString('ar-EG', {\n                        year: 'numeric',\n                        month: 'short',\n                        day: 'numeric',\n                        hour: '2-digit',\n                        minute: '2-digit'\n                      })}\n                    </td>\n                    <td className=\"border border-gray-300 p-2 text-center\">\n                      {file.size ? `${(file.size / 1024).toFixed(2)} KB` : '-'}\n                    </td>\n                    <td className=\"border border-gray-300 p-2\">\n                      <div className=\"flex space-x-2 space-x-reverse justify-center flex-wrap gap-1\">\n                        <button\n                          onClick={() => downloadFromDrive(file.id, file.name)}\n                          className=\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\"\n                        >\n                          â¬‡ï¸ ØªÙ†Ø²ÙŠÙ„\n                        </button>\n                        <button\n                          onClick={() => restoreFromDrive(file.id, file.name)}\n                          disabled={loading}\n                          className=\"bg-orange-500 text-white px-3 py-1 rounded text-sm hover:bg-orange-600 disabled:bg-gray-400\"\n                        >\n                          â†©ï¸ Ø§Ø³ØªØ±Ø¬Ø§Ø¹\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          )}\n        </div>\n      )}\n\n      {/* Warning */}\n      <div className=\"mt-6 bg-red-50 p-4 rounded-lg border-r-4 border-red-500\">\n        <h3 className=\"font-bold text-red-700 mb-2\">âš ï¸ ØªØ­Ø°ÙŠØ±Ø§Øª Ù…Ù‡Ù…Ø©:</h3>\n        <ul className=\"list-disc list-inside text-sm text-red-700 space-y-1\">\n          <li>Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø³ÙŠØ­Ø°Ù <strong>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</strong></li>\n          <li>ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø­Ø¯ÙŠØ«Ø© Ù‚Ø¨Ù„ Ø§Ù„Ù‚ÙŠØ§Ù… Ø¨Ø£ÙŠ ØªØºÙŠÙŠØ±Ø§Øª ÙƒØ¨ÙŠØ±Ø©</li>\n          <li>Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù„Ù† ÙŠØªÙ… Ø­Ø°ÙÙ‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ - Ø§Ø­Ø°ÙÙ‡Ø§ ÙŠØ¯ÙˆÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø©</li>\n          <li>Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø¨Ø¹Ø¯ ØªÙ†ÙÙŠØ°Ù‡Ø§</li>\n        </ul>\n      </div>\n\n      {/* Tips */}\n      <div className=\"mt-4 bg-green-50 p-4 rounded-lg border-r-4 border-green-500\">\n        <h3 className=\"font-bold text-green-700 mb-2\">ðŸ’¡ Ù†ØµØ§Ø¦Ø­:</h3>\n        <ul className=\"list-disc list-inside text-sm text-green-700 space-y-1\">\n          <li>Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ© ØªØ¹Ù…Ù„ ÙŠÙˆÙ…ÙŠØ§Ù‹ Ø§Ù„Ø³Ø§Ø¹Ø© 7:00 Ù…Ø³Ø§Ø¡Ù‹</li>\n          <li>Ø§Ø³ØªØ®Ø¯Ù… Ø²Ø± \"ØªÙ†Ø²ÙŠÙ„\" Ù„Ø­ÙØ¸ Ø§Ù„Ù†Ø³Ø®Ø© Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ</li>\n          <li>ÙŠÙ…ÙƒÙ†Ùƒ Ø±ÙØ¹ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© ÙŠØ¯ÙˆÙŠØ§Ù‹ Ø¥Ù„Ù‰ Google Drive Ø£Ùˆ Ø£ÙŠ Ø®Ø¯Ù…Ø© Ø³Ø­Ø§Ø¨ÙŠØ©</li>\n          <li>Ø§Ø³ØªØ®Ø¯Ù… Ø²Ø± \"Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù†Ø³Ø®Ø©\" Ù„Ø±ÙØ¹ Ù…Ù„Ù Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ù† Ø¬Ù‡Ø§Ø²Ùƒ</li>\n          <li>Ø§Ø­ØªÙØ¸ Ø¨Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ù† ÙØªØ±Ø§Øª Ù…Ø®ØªÙ„ÙØ© Ù„Ù„Ø£Ù…Ø§Ù†</li>\n          <li>Ø­Ø¬Ù… Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ØµØºÙŠØ± (Ø¹Ø§Ø¯Ø© Ø£Ù‚Ù„ Ù…Ù† 1 MB)</li>\n        </ul>\n      </div>\n      \n      {/* Import Instructions */}\n      <div className=\"mt-4 bg-blue-50 p-4 rounded-lg border-r-4 border-blue-500\">\n        <h3 className=\"font-bold text-blue-700 mb-2\">ðŸ“¤ ÙƒÙŠÙÙŠØ© Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©:</h3>\n        <ol className=\"list-decimal list-inside text-sm text-blue-700 space-y-1\">\n          <li>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± \"Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù†Ø³Ø®Ø©\"</li>\n          <li>Ø§Ø®ØªØ± Ù…Ù„Ù Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© (.json) Ù…Ù† Ø¬Ù‡Ø§Ø²Ùƒ</li>\n          <li>Ø§Ø®ØªØ± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡:\n            <ul className=\"list-disc list-inside mr-6 mt-1\">\n              <li><strong>Ù…ÙˆØ§ÙÙ‚</strong> = Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© ÙÙ‚Ø· (Ø¢Ù…Ù†)</li>\n              <li><strong>Ø¥Ù„ØºØ§Ø¡</strong> = Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ù…Ø¨Ø§Ø´Ø± (ÙŠØ­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©)</li>\n            </ul>\n          </li>\n        </ol>\n      </div>\n    </div>\n  );\n};\n\n// Users Management Component  \nconst Users = () => {\n  const [users, setUsers] = useState([]);\n  const [newUser, setNewUser] = useState({\n    username: '',\n    password: '',\n    role: 'user'\n  });\n  const [editingUser, setEditingUser] = useState(null);\n  const [editForm, setEditForm] = useState({\n    username: '',\n    password: '',\n    role: 'user'\n  });\n  const [companyInfo, setCompanyInfo] = useState({\n    name: 'Ù…Ø§Ø³ØªØ± Ø³ÙŠÙ„',\n    address: 'Ø§Ù„Ø­Ø±ÙÙŠÙŠÙ† Ø´Ø§Ø±Ø¹ Ø§Ù„Ø³ÙˆØ¨Ø± Ø¬ÙŠØª',\n    phone: '01020630677'\n  });\n  const [editingCompany, setEditingCompany] = useState(false);\n  const [selectedUserPermissions, setSelectedUserPermissions] = useState(null);\n\n  const allPermissions = [\n    { key: 'dashboard', label: 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…' },\n    { key: 'sales', label: 'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª' },\n    { key: 'inventory', label: 'Ø§Ù„Ù…Ø®Ø²ÙˆÙ†' },\n    { key: 'deferred', label: 'Ø§Ù„Ø¢Ø¬Ù„' },\n    { key: 'expenses', label: 'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª' },\n    { key: 'revenue', label: 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª' },\n    { key: 'treasury', label: 'Ø§Ù„Ø®Ø²ÙŠÙ†Ø©' },\n    { key: 'invoices', label: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ±' },\n    { key: 'work-orders', label: 'Ø£Ù…Ø± Ø´ØºÙ„' },\n    { key: 'pricing', label: 'Ø§Ù„ØªØ³Ø¹ÙŠØ±' },\n    { key: 'users', label: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†' }\n  ];\n\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  const fetchUsers = async () => {\n    try {\n      const response = await axios.get(`${API}/users`);\n      \n      // Check if default users exist in database\n      const dbUsers = response.data || [];\n      const hasElsawy = dbUsers.some(user => user.username === 'Elsawy');\n      const hasRoot = dbUsers.some(user => user.username === 'Root');\n      \n      // Create default users if they don't exist\n      if (!hasElsawy) {\n        await axios.post(`${API}/users`, {\n          username: 'Elsawy',\n          password: '100100',\n          role: 'admin',\n          permissions: allPermissions.map(p => p.key)\n        });\n      }\n      \n      if (!hasRoot) {\n        await axios.post(`${API}/users`, {\n          username: 'Root',\n          password: 'master',\n          role: 'user',\n          permissions: ['dashboard', 'sales', 'inventory', 'deferred', 'expenses', 'treasury', 'work-orders']\n        });\n      }\n      \n      // Fetch users again if we created default users\n      if (!hasElsawy || !hasRoot) {\n        const updatedResponse = await axios.get(`${API}/users`);\n        setUsers(updatedResponse.data || []);\n      } else {\n        setUsers(dbUsers);\n      }\n      \n    } catch (error) {\n      console.error('Error fetching users:', error);\n      // Fall back to empty array for now\n      setUsers([]);\n    }\n  };\n\n  const addUser = async () => {\n    if (!newUser.username || !newUser.password) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');\n      return;\n    }\n\n    try {\n      // Check if username already exists\n      if (users.some(user => user.username === newUser.username)) {\n        alert('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„');\n        return;\n      }\n\n      // Default permissions based on role\n      const defaultPermissions = newUser.role === 'admin' \n        ? allPermissions.map(p => p.key)\n        : ['dashboard', 'sales', 'inventory', 'deferred', 'expenses', 'treasury', 'work-orders', 'pricing'];\n\n      // Let backend generate ID and created_at\n      const user = {\n        username: newUser.username,\n        password: newUser.password,\n        role: newUser.role,\n        permissions: defaultPermissions\n      };\n\n      await axios.post(`${API}/users`, user);\n      fetchUsers();\n      setNewUser({ username: '', password: '', role: 'user' });\n      alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error adding user:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const startEdit = (user) => {\n    setEditingUser(user.id);\n    setEditForm({\n      username: user.username,\n      password: '',\n      role: user.role\n    });\n  };\n\n  const cancelEdit = () => {\n    setEditingUser(null);\n    setEditForm({ username: '', password: '', role: 'user' });\n  };\n\n  const saveEdit = async () => {\n    if (!editForm.username) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');\n      return;\n    }\n\n    // Check if username already exists (excluding current user)\n    if (users.some(user => user.username === editForm.username && user.id !== editingUser)) {\n      alert('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„');\n      return;\n    }\n\n    try {\n      // Find current user to preserve their permissions\n      const currentUser = users.find(u => u.id === editingUser);\n      if (!currentUser) {\n        alert('Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');\n        return;\n      }\n\n      // Update user in backend - preserve existing permissions\n      const updatedUser = {\n        id: editingUser,\n        username: editForm.username,\n        role: editForm.role,\n        password: editForm.password || currentUser.password,\n        permissions: currentUser.permissions || [],\n        created_at: currentUser.created_at\n      };\n      \n      await axios.put(`${API}/users/${editingUser}`, updatedUser);\n      \n      // Fetch updated data from database instead of updating local state\n      fetchUsers();\n\n      setEditingUser(null);\n      setEditForm({ username: '', password: '', role: 'user' });\n      alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error updating user:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const deleteUser = async (userId) => {\n    if (userId === '1' || userId === '2') {\n      alert('Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠÙŠÙ†');\n      return;\n    }\n\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ')) return;\n\n    try {\n      await axios.delete(`${API}/users/${userId}`);\n      fetchUsers();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting user:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');\n    }\n  };\n\n  const resetPassword = async (userId) => {\n    const newPassword = prompt('Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:');\n    if (newPassword && newPassword.trim()) {\n      try {\n        // Find the user to get their current data\n        const user = users.find(u => u.id === userId);\n        if (!user) {\n          alert('Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');\n          return;\n        }\n\n        // Update password in backend\n        const updatedUser = {\n          id: user.id,\n          username: user.username,\n          password: newPassword.trim(),\n          role: user.role,\n          permissions: user.permissions || [],\n          created_at: user.created_at\n        };\n        \n        await axios.put(`${API}/users/${userId}`, updatedUser);\n        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­');\n      } catch (error) {\n        console.error('Error updating password:', error);\n        alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: ' + (error.response?.data?.detail || error.message));\n      }\n    }\n  };\n\n  const openPermissions = (user) => {\n    setSelectedUserPermissions({\n      ...user,\n      tempPermissions: [...(user.permissions || [])]\n    });\n  };\n\n  const togglePermission = (permissionKey) => {\n    setSelectedUserPermissions(prev => {\n      const newPermissions = prev.tempPermissions.includes(permissionKey)\n        ? prev.tempPermissions.filter(p => p !== permissionKey)\n        : [...prev.tempPermissions, permissionKey];\n      \n      return { ...prev, tempPermissions: newPermissions };\n    });\n  };\n\n  const savePermissions = async () => {\n    try {\n      // Update permissions in backend\n      const updatedUser = {\n        id: selectedUserPermissions.id,\n        username: selectedUserPermissions.username,\n        password: selectedUserPermissions.password,\n        role: selectedUserPermissions.role,\n        permissions: selectedUserPermissions.tempPermissions,\n        created_at: selectedUserPermissions.created_at\n      };\n      \n      await axios.put(`${API}/users/${selectedUserPermissions.id}`, updatedUser);\n      \n      // Fetch updated data from database\n      fetchUsers();\n      \n      setSelectedUserPermissions(null);\n      alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error updating permissions:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const saveCompanyInfo = () => {\n    setEditingCompany(false);\n    alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ© Ø¨Ù†Ø¬Ø§Ø­');\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-blue-600 mb-4\">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h2>\n        \n        <div className=\"flex space-x-4 space-x-reverse mb-4\">\n          <button className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\">\n            Ø­Ø°Ù Ø§Ù„ÙƒÙ„\n          </button>\n          <button className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n            Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„\n          </button>\n          <button \n            onClick={() => window.print()}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\n            Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ±\n          </button>\n        </div>\n      </div>\n\n      {/* Company Information */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ©</h3>\n        \n        {editingCompany ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©</label>\n              <input\n                type=\"text\"\n                value={companyInfo.name}\n                onChange={(e) => setCompanyInfo({...companyInfo, name: e.target.value})}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>\n              <input\n                type=\"text\"\n                value={companyInfo.address}\n                onChange={(e) => setCompanyInfo({...companyInfo, address: e.target.value})}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ØªÙ„ÙŠÙÙˆÙ†</label>\n              <input\n                type=\"text\"\n                value={companyInfo.phone}\n                onChange={(e) => setCompanyInfo({...companyInfo, phone: e.target.value})}\n                className=\"w-full p-2 border border-gray-300 rounded\"\n              />\n            </div>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©</label>\n              <p className=\"p-2 bg-gray-100 rounded\">{companyInfo.name}</p>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>\n              <p className=\"p-2 bg-gray-100 rounded\">{companyInfo.address}</p>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ØªÙ„ÙŠÙÙˆÙ†</label>\n              <p className=\"p-2 bg-gray-100 rounded\">{companyInfo.phone}</p>\n            </div>\n          </div>\n        )}\n        \n        <div className=\"flex space-x-4 space-x-reverse\">\n          {editingCompany ? (\n            <>\n              <button\n                onClick={saveCompanyInfo}\n                className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n              >\n                Ø­ÙØ¸\n              </button>\n              <button\n                onClick={() => setEditingCompany(false)}\n                className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n              >\n                Ø¥Ù„ØºØ§Ø¡\n              </button>\n            </>\n          ) : (\n            <button\n              onClick={() => setEditingCompany(true)}\n              className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n            >\n              ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ©\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Add New User */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯</h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>\n            <input\n              type=\"text\"\n              value={newUser.username}\n              onChange={(e) => setNewUser({...newUser, username: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>\n            <input\n              type=\"password\"\n              value={newUser.password}\n              onChange={(e) => setNewUser({...newUser, password: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©</label>\n            <select\n              value={newUser.role}\n              onChange={(e) => setNewUser({...newUser, role: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              <option value=\"user\">Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯ÙŠ</option>\n              <option value=\"admin\">Ù…Ø¯ÙŠØ±</option>\n            </select>\n          </div>\n        </div>\n        \n        <button\n          onClick={addUser}\n          className=\"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600\"\n        >\n          Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\n        </button>\n      </div>\n\n      {/* Users Table */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h3 className=\"text-lg font-semibold mb-4\">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h3>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"border border-gray-300 p-2\">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©</th>\n                <th className=\"border border-gray-300 p-2\">Ø¹Ø¯Ø¯ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª</th>\n                <th className=\"border border-gray-300 p-2\">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø­Ø§Ù„Ø©</th>\n                <th className=\"border border-gray-300 p-2\">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\n              </tr>\n            </thead>\n            <tbody>\n              {users.map((user) => (\n                <tr key={user.id}>\n                  <td className=\"border border-gray-300 p-2\">\n                    {editingUser === user.id ? (\n                      <input\n                        type=\"text\"\n                        value={editForm.username}\n                        onChange={(e) => setEditForm({...editForm, username: e.target.value})}\n                        className=\"w-full p-1 border border-gray-300 rounded\"\n                      />\n                    ) : (\n                      <span className=\"font-semibold\">{user.username}</span>\n                    )}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    {editingUser === user.id ? (\n                      <select\n                        value={editForm.role}\n                        onChange={(e) => setEditForm({...editForm, role: e.target.value})}\n                        className=\"w-full p-1 border border-gray-300 rounded\"\n                      >\n                        <option value=\"user\">Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯ÙŠ</option>\n                        <option value=\"admin\">Ù…Ø¯ÙŠØ±</option>\n                      </select>\n                    ) : (\n                      <span className={`px-2 py-1 rounded text-sm ${\n                        user.role === 'admin' \n                          ? 'bg-red-100 text-red-800' \n                          : 'bg-blue-100 text-blue-800'\n                      }`}>\n                        {user.role === 'admin' ? 'Ù…Ø¯ÙŠØ±' : 'Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯ÙŠ'}\n                      </span>\n                    )}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className=\"bg-gray-100 px-2 py-1 rounded text-sm\">\n                      {user.permissions?.length || 0} ØµÙ„Ø§Ø­ÙŠØ©\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    {new Date(user.created_at).toLocaleDateString('ar-EG')}\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <span className=\"px-2 py-1 rounded text-sm bg-green-100 text-green-800\">\n                      Ù†Ø´Ø·\n                    </span>\n                  </td>\n                  <td className=\"border border-gray-300 p-2\">\n                    <div className=\"flex space-x-2 space-x-reverse flex-wrap\">\n                      {editingUser === user.id ? (\n                        <>\n                          <button \n                            onClick={saveEdit}\n                            className=\"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600 mb-1\">\n                            Ø­ÙØ¸\n                          </button>\n                          <button \n                            onClick={cancelEdit}\n                            className=\"bg-gray-500 text-white px-2 py-1 rounded text-sm hover:bg-gray-600 mb-1\">\n                            Ø¥Ù„ØºØ§Ø¡\n                          </button>\n                        </>\n                      ) : (\n                        <>\n                          <button \n                            onClick={() => startEdit(user)}\n                            className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600 mb-1\">\n                            ØªØ¹Ø¯ÙŠÙ„\n                          </button>\n                          <button \n                            onClick={() => openPermissions(user)}\n                            className=\"bg-purple-500 text-white px-2 py-1 rounded text-sm hover:bg-purple-600 mb-1\">\n                            Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª\n                          </button>\n                          <button \n                            onClick={() => resetPassword(user.id)}\n                            className=\"bg-yellow-500 text-white px-2 py-1 rounded text-sm hover:bg-yellow-600 mb-1\">\n                            ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\n                          </button>\n                          {(user.id !== '1' && user.id !== '2') && (\n                            <button \n                              onClick={() => deleteUser(user.id)}\n                              className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600 mb-1\">\n                              Ø­Ø°Ù\n                            </button>\n                          )}\n                        </>\n                      )}\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Permissions Modal */}\n      {selectedUserPermissions && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 max-w-md w-full mx-4\">\n            <h3 className=\"text-lg font-bold mb-4\">\n              ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: {selectedUserPermissions.username}\n            </h3>\n            \n            <div className=\"space-y-2 mb-4\">\n              {allPermissions.map(permission => (\n                <label key={permission.key} className=\"flex items-center\">\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedUserPermissions.tempPermissions.includes(permission.key)}\n                    onChange={() => togglePermission(permission.key)}\n                    className=\"ml-2\"\n                  />\n                  <span>{permission.label}</span>\n                </label>\n              ))}\n            </div>\n            \n            <div className=\"flex space-x-4 space-x-reverse\">\n              <button\n                onClick={savePermissions}\n                className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n              >\n                Ø­ÙØ¸\n              </button>\n              <button\n                onClick={() => setSelectedUserPermissions(null)}\n                className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n              >\n                Ø¥Ù„ØºØ§Ø¡\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Material Pricing Component\nconst Pricing = () => {\n  const [materialPricings, setMaterialPricings] = useState([]);\n  const [editingPricing, setEditingPricing] = useState(null);\n  const [newPricing, setNewPricing] = useState({\n    material_type: 'NBR',\n    inner_diameter: '',\n    outer_diameter: '',\n    price_per_mm: '',\n    manufacturing_cost_client1: '',\n    manufacturing_cost_client2: '',\n    manufacturing_cost_client3: '',\n    notes: ''\n  });\n\n  const materialTypes = ['NBR', 'BUR', 'BT', 'VT', 'BOOM'];\n\n  useEffect(() => {\n    fetchMaterialPricings();\n  }, []);\n\n  const fetchMaterialPricings = async () => {\n    try {\n      const response = await axios.get(`${API}/material-pricing`);\n      setMaterialPricings(response.data);\n    } catch (error) {\n      console.error('Error fetching material pricings:', error);\n    }\n  };\n\n  const addMaterialPricing = async () => {\n    if (!newPricing.inner_diameter || !newPricing.outer_diameter || !newPricing.price_per_mm) {\n      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');\n      return;\n    }\n\n    try {\n      if (editingPricing) {\n        // Update existing pricing\n        await axios.put(`${API}/material-pricing/${editingPricing}`, {\n          ...newPricing,\n          inner_diameter: parseFloat(newPricing.inner_diameter),\n          outer_diameter: parseFloat(newPricing.outer_diameter),\n          price_per_mm: parseFloat(newPricing.price_per_mm),\n          manufacturing_cost_client1: parseFloat(newPricing.manufacturing_cost_client1 || 0),\n          manufacturing_cost_client2: parseFloat(newPricing.manufacturing_cost_client2 || 0),\n          manufacturing_cost_client3: parseFloat(newPricing.manufacturing_cost_client3 || 0)\n        });\n        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');\n        setEditingPricing(null);\n      } else {\n        // Add new pricing\n        await axios.post(`${API}/material-pricing`, {\n          ...newPricing,\n          inner_diameter: parseFloat(newPricing.inner_diameter),\n          outer_diameter: parseFloat(newPricing.outer_diameter),\n          price_per_mm: parseFloat(newPricing.price_per_mm),\n          manufacturing_cost_client1: parseFloat(newPricing.manufacturing_cost_client1 || 0),\n          manufacturing_cost_client2: parseFloat(newPricing.manufacturing_cost_client2 || 0),\n          manufacturing_cost_client3: parseFloat(newPricing.manufacturing_cost_client3 || 0)\n        });\n        alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');\n      }\n      \n      fetchMaterialPricings();\n      setNewPricing({\n        material_type: 'NBR',\n        inner_diameter: '',\n        outer_diameter: '',\n        price_per_mm: '',\n        manufacturing_cost_client1: '',\n        manufacturing_cost_client2: '',\n        manufacturing_cost_client3: '',\n        notes: ''\n      });\n    } catch (error) {\n      console.error('Error saving material pricing:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const editMaterialPricing = (pricing) => {\n    setNewPricing({\n      material_type: pricing.material_type,\n      inner_diameter: pricing.inner_diameter.toString(),\n      outer_diameter: pricing.outer_diameter.toString(),\n      price_per_mm: pricing.price_per_mm.toString(),\n      manufacturing_cost_client1: pricing.manufacturing_cost_client1.toString(),\n      manufacturing_cost_client2: pricing.manufacturing_cost_client2.toString(),\n      manufacturing_cost_client3: pricing.manufacturing_cost_client3.toString(),\n      notes: pricing.notes || ''\n    });\n    setEditingPricing(pricing.id);\n  };\n\n  const deleteMaterialPricing = async (pricingId) => {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©ØŸ')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`${API}/material-pricing/${pricingId}`);\n      fetchMaterialPricings();\n      alert('ØªÙ… Ø­Ø°Ù Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');\n    } catch (error) {\n      console.error('Error deleting material pricing:', error);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const cancelEdit = () => {\n    setEditingPricing(null);\n    setNewPricing({\n      material_type: 'NBR',\n      inner_diameter: '',\n      outer_diameter: '',\n      price_per_mm: '',\n      manufacturing_cost_client1: '',\n      manufacturing_cost_client2: '',\n      manufacturing_cost_client3: '',\n      notes: ''\n    });\n  };\n\n  return (\n    <div className=\"p-6\" dir=\"rtl\">\n      <h2 className=\"text-2xl font-bold text-blue-600 mb-6\">ðŸ’² Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ³Ø¹ÙŠØ±</h2>\n      \n      {/* Add/Edit Material Pricing Form */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">\n          {editingPricing ? 'ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©' : 'Ø¥Ø¶Ø§ÙØ© ØªØ³Ø¹ÙŠØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©'}\n        </h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</label>\n            <select\n              value={newPricing.material_type}\n              onChange={(e) => setNewPricing({...newPricing, material_type: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n            >\n              {materialTypes.map(type => (\n                <option key={type} value={type}>{type}</option>\n              ))}\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ (Ù…Ù…)</label>\n            <input\n              type=\"number\"\n              step=\"0.1\"\n              value={newPricing.inner_diameter}\n              onChange={(e) => setNewPricing({...newPricing, inner_diameter: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ (Ù…Ù…)</label>\n            <input\n              type=\"number\"\n              step=\"0.1\"\n              value={newPricing.outer_diameter}\n              onChange={(e) => setNewPricing({...newPricing, outer_diameter: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Ø³Ø¹Ø± Ø§Ù„Ù…Ù„ÙŠ (Ø¬.Ù…)</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newPricing.price_per_mm}\n              onChange={(e) => setNewPricing({...newPricing, price_per_mm: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"Ø³Ø¹Ø± Ø§Ù„Ù…Ù„ÙŠ Ø§Ù„ÙˆØ§Ø­Ø¯\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ØªÙƒÙ„ÙØ© Ø§Ù„ØªØµÙ†ÙŠØ¹ - Ø¹Ù…ÙŠÙ„ 1 (Ø¬.Ù…)</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newPricing.manufacturing_cost_client1}\n              onChange={(e) => setNewPricing({...newPricing, manufacturing_cost_client1: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"ØªÙƒÙ„ÙØ© Ø§Ù„ØªØµÙ†ÙŠØ¹ Ù„Ù„Ø¹Ù…ÙŠÙ„ 1\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ØªÙƒÙ„ÙØ© Ø§Ù„ØªØµÙ†ÙŠØ¹ - Ø¹Ù…ÙŠÙ„ 2 (Ø¬.Ù…)</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newPricing.manufacturing_cost_client2}\n              onChange={(e) => setNewPricing({...newPricing, manufacturing_cost_client2: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"ØªÙƒÙ„ÙØ© Ø§Ù„ØªØµÙ†ÙŠØ¹ Ù„Ù„Ø¹Ù…ÙŠÙ„ 2\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">ØªÙƒÙ„ÙØ© Ø§Ù„ØªØµÙ†ÙŠØ¹ - Ø¹Ù…ÙŠÙ„ 3 (Ø¬.Ù…)</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={newPricing.manufacturing_cost_client3}\n              onChange={(e) => setNewPricing({...newPricing, manufacturing_cost_client3: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              placeholder=\"ØªÙƒÙ„ÙØ© Ø§Ù„ØªØµÙ†ÙŠØ¹ Ù„Ù„Ø¹Ù…ÙŠÙ„ 3\"\n            />\n          </div>\n          \n          <div className=\"md:col-span-2 lg:col-span-3\">\n            <label className=\"block text-sm font-medium mb-1\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>\n            <textarea\n              value={newPricing.notes}\n              onChange={(e) => setNewPricing({...newPricing, notes: e.target.value})}\n              className=\"w-full p-2 border border-gray-300 rounded\"\n              rows=\"2\"\n              placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©...\"\n            />\n          </div>\n        </div>\n        \n        <div className=\"flex justify-end space-x-4 space-x-reverse mt-4\">\n          {editingPricing && (\n            <button\n              onClick={cancelEdit}\n              className=\"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600\"\n            >\n              Ø¥Ù„ØºØ§Ø¡\n            </button>\n          )}\n          <button\n            onClick={addMaterialPricing}\n            className=\"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600\"\n          >\n            {editingPricing ? 'ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©' : 'Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©'}\n          </button>\n        </div>\n      </div>\n      \n      {/* Material Pricings Table */}\n      <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h3 className=\"text-lg font-semibold\">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø§Øª</h3>\n        </div>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø©</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ (Ø¯Ø§Ø®Ù„ÙŠÃ—Ø®Ø§Ø±Ø¬ÙŠ)</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ø³Ø¹Ø± Ø§Ù„Ù…Ù„ÙŠ</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ø¹Ù…ÙŠÙ„ 1</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ø¹Ù…ÙŠÙ„ 2</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ø¹Ù…ÙŠÙ„ 3</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {materialPricings.map((pricing, index) => (\n                <tr key={pricing.id} className={index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                    {pricing.material_type}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {pricing.inner_diameter}Ã—{pricing.outer_diameter} Ù…Ù…\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {pricing.price_per_mm.toFixed(2)} Ø¬.Ù…\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {pricing.manufacturing_cost_client1.toFixed(2)} Ø¬.Ù…\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {pricing.manufacturing_cost_client2.toFixed(2)} Ø¬.Ù…\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {pricing.manufacturing_cost_client3.toFixed(2)} Ø¬.Ù…\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {pricing.notes || '-'}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                    <button\n                      onClick={() => editMaterialPricing(pricing)}\n                      className=\"text-blue-600 hover:text-blue-900 ml-2\"\n                    >\n                      ØªØ¹Ø¯ÙŠÙ„\n                    </button>\n                    <button\n                      onClick={() => deleteMaterialPricing(pricing.id)}\n                      className=\"text-red-600 hover:text-red-900\"\n                    >\n                      Ø­Ø°Ù\n                    </button>\n                  </td>\n                </tr>\n              ))}\n              \n              {materialPricings.length === 0 && (\n                <tr>\n                  <td colSpan=\"8\" className=\"px-6 py-4 text-center text-gray-500\">\n                    Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ³Ø¹ÙŠØ±Ø§Øª Ù…Ø¶Ø§ÙØ©\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Main App Component\nconst App = () => {\n  const [currentPage, setCurrentPage] = useState('sales'); // Default to sales instead of dashboard\n  const { user } = useAuth();\n\n  if (!user) return <Login />;\n\n  const renderPage = () => {\n    switch (currentPage) {\n      case 'dashboard': \n        // Only Elsawy can access dashboard\n        return user?.username === 'Elsawy' ? <Dashboard /> : <Sales />;\n      case 'sales': return <Sales />;\n      case 'inventory': return <Inventory />;\n      case 'stock': return <Stock />;\n      case 'local': return <Local />;\n      case 'deferred': return <Deferred />;\n      case 'expenses': return <Expenses />;\n      case 'revenue': return <Revenue />;\n      case 'treasury': return <Treasury />;\n      case 'invoices': return <Invoices />;\n      case 'deleted-invoices': return <DeletedInvoices />;\n      case 'customer-statement': return <CustomerStatement />;\n      case 'work-orders': return <WorkOrders />;\n      case 'pricing': return <Pricing />;\n      case 'backup': return <Backup />;\n      case 'users': return <Users />;\n      default: return <Sales />; // Default to sales instead of dashboard\n    }\n  };\n\n  return (\n    <div className=\"flex h-screen bg-gray-50\" dir=\"rtl\">\n      <Navigation currentPage={currentPage} onPageChange={setCurrentPage} />\n      <main className=\"flex-1 overflow-y-auto bg-gradient-to-br from-gray-50 to-blue-50\">\n        <div className=\"p-6\">\n          {renderPage()}\n        </div>\n      </main>\n    </div>\n  );\n};\n\n// Root App with AuthProvider\nconst AppWithAuth = () => (\n  <AuthProvider>\n    <App />\n  </AuthProvider>\n);\n\nexport default AppWithAuth;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}